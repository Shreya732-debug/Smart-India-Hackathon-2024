/*! BEGIN AuthoringDomain */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlauthoringdomain');var b=ss.mkType(a,'tab.$0',function(eo,ep,eq,er){this.$m=null;this.$k=null;this.$l=true;this.$n=false;tab.ClientCommand.call(this,'immediately',eo,null,null,null);this.$m=ep;this.$k=eq;this.$l=er;var es=this.$m.commandParams;var et=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-prepare'},es);cJ.setCommandParams(et,es);es['allowDuplicateFieldDropOnFilterShelf']=false;this.enqueueCommand(et)},{handleRemoteCommandSuccess:function(eo,ep){tab.ClientCommand.prototype.handleRemoteCommandSuccess.call(this,eo,ep);if(this.$n){return}var eq=ep;if(ss.isNullOrUndefined(eq)||ss.getKeyCount(eq)===0){return}this.$n=true;var er=this.$m;var es=this.$m.commandParams;if(ss.keyExists(eq,'dropCommandModel')){var et=eq['dropCommandModel'];var eu=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(et).get_simpleCommand(),false);if(ss.isValue(eu)){er=eu;es=eu.commandParams}}if(ss.keyExists(eq,'fieldEncodings')){es['fieldEncodings']=eq['fieldEncodings']}else if(ss.keyExists(eq,'fn')){var ev={fn:eq['fn']};es['fieldEncodings']=JSON.stringify([ev])}cJ.setCommandParams(er,es);this.enqueueCommand(er);if(ss.keyExists(eq,'doDropUiAction')&&eq['doDropUiAction']&&this.$k==='filter-shelf'){var ew=eq['fieldEncoding'];var ex=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'create-default-quick-filter'},null);var ey={};ey['fn']=ew.fn;ey['membershipTarget']='filter';if(this.$l){ey['quantitativeMode']='rel-date'}cJ.setCommandParams(ex,ey);this.enqueueCommand(ex)}}});var c=global.tab.AssignCategoricalColorPaletteCmd=ss.mkType(a,'tab.AssignCategoricalColorPaletteCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return c.cmdId},get_controllerID:function(){return this.c['componentId']},set_controllerID:function(eo){this.c['componentId']=eo|0},get_colorPaletteID:function(){return this.c['colorPaletteId']},set_colorPaletteID:function(eo){this.c['colorPaletteId']=eo},get_reversePaletteOrder:function(){return this.c['reversePaletteOrder']},set_reversePaletteOrder:function(eo){this.c['reversePaletteOrder']=eo},get_applyColors:function(){return this.c['applyColors']},set_applyColors:function(eo){this.c['applyColors']=eo},get_vizID:function(){return this.c['visualIdPresModel']},set_vizID:function(eo){this.c['visualIdPresModel']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'assign-categorical-color-palette'},this.c))}});var d=global.tab.AssignCategoricalColorPaletteCmd$ResponseBuilder=ss.mkType(a,'tab.AssignCategoricalColorPaletteCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var e=global.tab.AuthoringLeftAreaExpansionModel=ss.mkType(a,'tab.AuthoringLeftAreaExpansionModel',function(eo){this.$2$1=null;tab.Model.call(this,eo,new tab.PresModelPathItem('sidePaneExpansionState'.toString(),null));this.pm={sidePaneExpansionState:'expanded'}},{add_sidePaneExpansionStateChanged:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_sidePaneExpansionStateChanged:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_notificationId:function(){return'doc:side-pane-expansion-state-changed-event'},get_sidePaneExpansionState:function(){return this.$3().sidePaneExpansionState},$3:function(){return this.pm},onNotify:function(eo,ep){this.simpleSwapToUpdate(eo,this.$2$1,ep)}});var f=global.tab.BuildMainMenuCmd=ss.mkType(a,'tab.BuildMainMenuCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return f.cmdId},get_itemId:function(){return this.c['menuItemId']},set_itemId:function(eo){this.c['menuItemId']=eo},get_mobile:function(){return this.c['isMobile']},set_mobile:function(eo){this.c['isMobile']=eo},get_dataSource:function(){return this.c['datasource']},set_dataSource:function(eo){this.c['datasource']=eo},get_hasAllowAddNewDatasourceCapability:function(){return this.c['hasAllowAddNewDatasourceCapability']},set_hasAllowAddNewDatasourceCapability:function(eo){this.c['hasAllowAddNewDatasourceCapability']=eo},get_allowSaveDataSource:function(){return this.c['allowSaveDataSource']},set_allowSaveDataSource:function(eo){this.c['allowSaveDataSource']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'build-main-menu'},this.c))}});var g=global.tab.BuildMainMenuCmd$ResponseBuilder=ss.mkType(a,'tab.BuildMainMenuCmd$ResponseBuilder',function(eo){this.$1={};this.$1['commands']=eo},{get_commands:function(){return this.$1['commands']},set_commands:function(eo){this.$1['commands']=eo},withCommands:function(eo){this.set_commands(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'commands')){throw new ss.Exception("Missing required parameter 'DocParams.Commands'.")}}});var h=global.tab.BuildServerSceneMarginContextMenuCmd=ss.mkType(a,'tab.BuildServerSceneMarginContextMenuCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return h.cmdId},get_visualID:function(){return this.c['visualIdPresModel']},set_visualID:function(eo){this.c['visualIdPresModel']=eo},get_regionPoint:function(){return this.c['regionPoint']},set_regionPoint:function(eo){this.c['regionPoint']=eo},get_vizImageRegion:function(){return this.c['r']},set_vizImageRegion:function(eo){this.c['r']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'build-server-scene-margin-context-menu'},this.c))}});var i=global.tab.BuildServerSceneMarginContextMenuCmd$ResponseBuilder=ss.mkType(a,'tab.BuildServerSceneMarginContextMenuCmd$ResponseBuilder',function(eo){this.$1={};this.$1['commands']=eo},{get_commands:function(){return this.$1['commands']},set_commands:function(eo){this.$1['commands']=eo},withCommands:function(eo){this.set_commands(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'commands')){throw new ss.Exception("Missing required parameter 'DocParams.Commands'.")}}});var j=global.tab.BuildShelfItemContextMenuCmd=ss.mkType(a,'tab.BuildShelfItemContextMenuCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return j.cmdId},get_shelfItemID:function(){return this.c['shelfItemId']},set_shelfItemID:function(eo){this.c['shelfItemId']=eo|0},get_shelfType:function(){return this.c['shelfType']},set_shelfType:function(eo){this.c['shelfType']=eo},get_paneSpecId:function(){return this.c['paneSpec']},set_paneSpecId:function(eo){this.c['paneSpec']=eo|0},get_mobile:function(){return this.c['isMobile']},set_mobile:function(eo){this.c['isMobile']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'build-shelf-item-context-menu'},this.c))}});var k=global.tab.BuildShelfItemContextMenuCmd$ResponseBuilder=ss.mkType(a,'tab.BuildShelfItemContextMenuCmd$ResponseBuilder',function(eo){this.$1={};this.$1['commands']=eo},{get_commands:function(){return this.$1['commands']},set_commands:function(eo){this.$1['commands']=eo},withCommands:function(eo){this.set_commands(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'commands')){throw new ss.Exception("Missing required parameter 'DocParams.Commands'.")}}});var l=global.tab.CalcApplyResponse=ss.mkType(a,'tab.CalcApplyResponse',function(eo){this.$1=null;this.$0=null;this.$1=eo},{get_resultType:function(){return this.$1},get_errorMessage:function(){return this.$0},set_errorMessage:function(eo){this.$0=eo}},{fromApplyCalculationResult:function(eo,ep){var eq=(_.isString(eo)?eo:eo['calculationApplyResult'.toString()]);var er=new l(eq);switch(er.get_resultType()){case'invalid-formula':{er.set_errorMessage(ep.get_errorSummary());break}case'invalid-caption-for-new-calc':{er.set_errorMessage(eo['errorString'.toString()]);break}}return er}});var m=global.tab.CalculationAutoCompleteItemModel=ss.mkType(a,'tab.CalculationAutoCompleteItemModel',function(eo,ep){tab.Model.call(this,eo,new tab.PresModelPathItem('autocompleteItem'.toString(),null));this.swapPresModel(ep)},{$3:function(){return this.pm},get_itemType:function(){return(ss.isValue(this.$3().autocompleteType)?this.$3().autocompleteType:'func')},get_label:function(){return this.$3().label},get_styledLabel:function(){return this.$3().styledLabel},get_iconResource:function(){return this.$3().fieldIconRes},get_tooltip:function(){return this.$3().tooltipText},get_replaceText:function(){return this.$3().replaceText},get_caretIndex:function(){return this.$3().caretIndex}});var n=global.tab.CalculationAutoCompleteModel=ss.mkType(a,'tab.CalculationAutoCompleteModel',function(eo){this.$3=[];tab.Model.call(this,null,new tab.PresModelPathItem('calculationAutocompleteContextMenu'.toString(),null));this.swapPresModel(eo);var ep=eo.autocompleteItemList||[];for(var eq=0;eq<ep.length;eq++){var er=ep[eq];this.$3.push(new m(this,er))}},{get_functionTooltip:function(){return this.pm.functionHelp},get_functionHelpPosition:function(){return this.pm.functionHelpIndex},get_calculation:function(){return this.pm.acCalc},get_startIndex:function(){return this.pm.startIndex},get_endIndex:function(){return this.pm.endIndex},get_items:function(){return this.$3}});var o=global.tab.CalculationCommands=ss.mkType(a,'tab.CalculationCommands',null,null,{registerCommandInterceptors:function(){tab.CommandInterceptors.addPreCommandInterceptor([{ns:'tabdoc',cmd:'edit-pill'}],o.$5);tab.CommandInterceptors.addPreCommandInterceptor([{ns:'tabdoc',cmd:'create-calc'}],o.$2);tab.CommandInterceptors.addPreCommandInterceptor([{ns:'tabdoc',cmd:'edit-calc'}],o.$3);tab.CommandInterceptors.addPreCommandInterceptor([{ns:'tabdoc',cmd:'edit-copy-calc'}],o.$4)},$2:function(eo){if(eo.get_hasLocalComponent()){return eo}var ep=eo.get_primaryRemoteCommand();var eq=ep.commandParams['datasource'];var er=ep.commandParams['fn'];var es=ep.commandParams['joinOnCalcInfo'];return o.$6(eq,er,es)},$3:function(eo){if(eo.get_hasLocalComponent()){return eo}var ep=eo.get_primaryRemoteCommand();return o.$7(ep.commandParams['fn'],{ns:'tabdoc',cmd:'edit-calc'})},$4:function(eo){if(eo.get_hasLocalComponent()){return eo}var ep=eo.get_primaryRemoteCommand();return o.$7(ep.commandParams['fn'],{ns:'tabdoc',cmd:'edit-copy-calc'})},$5:function(eo){if(eo.get_hasLocalComponent()){return eo}var ep=eo.get_primaryRemoteCommand();var eq=ep.commandParams;return o.$8(eq['fn'],eq['shelfType'],parseInt(eq['shelfPosIndex']),parseInt(eq['paneSpec']),$.Deferred())},$6:function(eo,ep,eq){var er={};er['datasource']=eo;if(ss.isValue(ep)){er['fn']=ep}if(ss.isValue(eq)){er['joinOnCalcInfo']=eq}var es=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'create-calc'},er);return new tab.ClientCommand('immediately',ss.mkdel(this,function(et){var eu={datasource:eo,pendingCalcName:'__temporary calc name__'};o.$0(et,eu,'doc:calculation-dialog-event'.toString())}),es,null,null)},createCalculation:function(eo,ep){tab.CommandController.SendCommand(o.$6(eo,ep,null))},$7:function(eo,ep){var eq={};eq['fn']=eo;var er=tab.CommandUtils.newCommand(ep,eq);var es='';var et='';var eu=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findDataSourceFromGlobalFieldName(eo);if(ss.isValue(eu)){et=eu.get_name();var ev=eu.findField(eo);if(ss.isValue(ev)){es=ev.get_displayName()}}return new tab.ClientCommand('immediately',ss.mkdel(this,function(ew){var ex={fn:eo,calculationCaption:es,datasource:et,pendingCalcName:'__temporary calc name__'};o.$0(ew,ex,'doc:calculation-dialog-event'.toString())}),er,null,null)},editCalculation:function(eo,ep){tab.CommandController.SendCommand(o.$7(eo,ep))},$8:function(eo,ep,eq,er,es){var et={};et['fn']=eo;et['paneSpec']=er;et['shelfType']=ep;et['shelfPosIndex']=eq;var eu=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'edit-pill'},et);return o.$9(ep,eu,o.$1(ep,eq,er),es)},editPill:function(eo,ep,eq,er){var es=$.Deferred();var et=o.$8(eo,ep,eq,er,es);if(ss.isValue(et)){tab.CommandController.SendCommand(et)}return es},createAdHocCalculation:function(eo,ep,eq,er){if(ss.isNullOrEmptyString(eo)){return $.Deferred()}var es={};es['datasource']=eo;es['paneSpec']=er;es['shelfType']=ep;es['shelfPosIndex']=eq;var et=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'create-type-in-pill'},es);var eu=$.Deferred();var ev=o.$9(ep,et,o.$1(ep,eq,er),eu);if(ss.isValue(ev)){tab.CommandController.SendCommand(ev)}return eu},$1:function(eo,ep,eq){return ss.mkdel(this,function(er){var es={datasource:'__fake ds name__',pendingCalcName:'__temporary calc name__',shelfType:eo,shelfPosIndex:ep,paneSpec:eq};o.$0(er,es,'doc:type-in-pill-event'.toString())})},$9:function(eo,ep,eq,er){if(!o.isValidShelfForCalcs(eo)){er.reject();return null}return new tab.ClientCommand('immediately',eq,ep,function(es){var et=es;er.resolve(ss.isValue(et)&&(ss.isNullOrUndefined(et.valid)||et.valid))},function(es){er.reject()})},requestAutoCompleteInfo:function(eo,ep,eq){var er=$.Deferred();var es=new tab.CalculationAutoCompleteCmd;es.set_formula(ep);es.set_position(eq);es.set_calculation({datasource:eo.get_dataSourceName(),fn:eo.get_fieldName(),calculationContext:eo.get_calculationContext(),useParameters:eo.get_useParameters(),joinOnCalcInfo:eo.get_joinOnCalcInfoPresModel()});es.set_noExceptionDialog(true);es.invoke().done(function(et){er.resolve(new n(et.calculationAutocompleteContextMenu))}).fail(function(et){er.reject()});return er.promise()},applyCalculation:function(eo,ep,eq,er,es){var et=$.Deferred();var eu={};var ev;if(eo.get_isAdhoc()){ev={ns:'tabdoc',cmd:'apply-type-in-pill'};eu['datasource']=eo.get_dataSourceName();eu['updatedCalculationFormula']=eq;eu['isFullStyling']=true;eu['isTypeinFinished']=es}else{ev={ns:'tabdoc',cmd:'apply-calculation'};eu['updatedCalculationCaption']=ep;eu['updatedCalculationFormula']=eq;eu['isFullStyling']=true}var ew=ss.mkdel(this,function(ex){if(eo.get_isAdhoc()&&es){var ey={calculationCaption:null,pendingCalcName:null,datasource:null};o.$0(ex,ey,'doc:type-in-pill-event'.toString())}});tab.CommandController.SendCommand(new tab.ClientCommand('immediately',ew,tab.CommandUtils.newCommand(ev,eu),function(ex){et.resolve(l.fromApplyCalculationResult(ex,eo))},function(ex){et.reject()}));return et},cancelCalculation:function(eo){var ep=null;if(eo.get_isAdhoc()){ep={};ep['isTypeInPill']=true}var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'clear-calculation-model'},ep);tab.CommandController.SendCommand(new tab.ClientCommand('none',ss.mkdel(this,function(er){var es={calculationCaption:null,pendingCalcName:null,datasource:null};o.$0(er,es,(eo.get_isAdhoc()?'doc:type-in-pill-event'.toString():'doc:calculation-dialog-event'.toString()))}),eq,null,null))},validateCalculation:function(eo,ep,eq){var er=$.Deferred();var es;var et={};et['updatedCalculationFormula']=eq;et['isFullStyling']=true;if(eo.get_isAdhoc()){es={ns:'tabdoc',cmd:'validate-type-in-pill'};et['datasource']=eo.get_dataSourceName()}else{es={ns:'tabdoc',cmd:'validate-formula'};et['updatedCalculationCaption']=ep}tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(tab.CommandUtils.newCommand(es,et),'none',function(eu){er.resolve()},function(eu){er.reject()}));return er.promise()},startDraggingText:function(eo){var ep=$.Deferred();var eq={};eq['sheet']=tsConfig.current_sheet_name;eq['isRightDrag']=false;eq['text']=eo;tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-drag-pres-model-for-text'},eq),'none',function(er){ep.resolve(er)},function(er){ep.reject()}));return ep},dropOnCalcEditor:function(eo,ep,eq,er,es,et){var eu=$.Deferred();var ev={};ev['fieldVector']=eo;ev['calcEditorDropPos']=ep;ev['dragSource']=eq;if(ss.isValue(er)){ev['calcEditorTextSelection']=er}ev['isFullStyling']=true;ev['calculationContext']=es;if(ss.isValue(et)){ev['text']=et}var ew=tab.ClientCommand.createRemoteOnly(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-on-calc-editor'},ev),'immediately',function(ex){eu.resolve(ex)},function(ex){eu.reject()});tab.CommandController.SendCommand(ew);return eu.promise()},insertFunctionInFormula:function(eo,ep,eq){var er=$.Deferred();if(ss.isNullOrUndefined(eq)||ss.isNullOrUndefined(eo)){return er.reject()}var es={};es['expressionFunc']=eo;es['calculationFormula']=ep;es['selectionStart']=eq.calcEditorTextSelectionStartPos;es['selectionEnd']=eq.calcEditorTextSelectionEndPos;var et=tab.ClientCommand.createRemoteOnly(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'insert-function-in-formula'},es),'immediately',function(eu){er.resolve(eu)},function(eu){er.reject()});tab.CommandController.SendCommand(et);return er.promise()},isValidShelfForCalcs:function(eo){return eo==='columns-shelf'||eo==='rows-shelf'||eo==='encoding-shelf'||eo==='measures-shelf'},$0:function(eo,ep,eq){var er={};er['genCalculationPresModel']=ep;var es=er;var et={keyId:eq,presModelHolder:es};var eu=new Array(1);eu[0]=et;var ev=eo.makeMutablePresModel(tab.ApplicationModel.get_instance(),false);ev.presentationLayerNotification=eu}});var p=global.tab.CategoricalColorEditorDialogModel=ss.mkType(a,'tab.CategoricalColorEditorDialogModel',function(eo){this.$2$1=null;tab.Model.call(this,eo,new tab.PresModelPathItem('doc:web-categorical-color-dialog-event'.toString(),null))},{add_showOrUpdateDialog:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_showOrUpdateDialog:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_notificationId:function(){return'doc:web-categorical-color-dialog-event'},get_fieldDisplayNames:function(){return this.$3().categoricalColorDialog.fieldDisplayNames},get_itemColors:function(){return this.$3().categoricalColorDialog.colorLegend.colorLegendItems},get_availablePalettes:function(){return this.$3().categoricalColorDialog.categoricalColorEncoding.colorPalettes},get_currentPaletteIndex:function(){return this.$3().categoricalColorDialog.paletteIndex},get_selectedLegendItemIndexes:function(){return this.$3().categoricalColorDialog.itemIndices},get_controllerId:function(){return this.$3().categoricalColorDialog.componentId},$3:function(){return this.pm},onNotify:function(eo,ep){this.swapPresModel(eo);this.raiseEvent(this.$2$1,ep)}});var q=global.tab.ChangeLineInterpolationCmd=ss.mkType(a,'tab.ChangeLineInterpolationCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return q.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_paneSpecificationId:function(){return this.c['paneSpec']},set_paneSpecificationId:function(eo){this.c['paneSpec']=eo|0},get_lineInterpolationMode:function(){return this.c['lineInterpolationMode']},set_lineInterpolationMode:function(eo){this.c['lineInterpolationMode']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-line-interpolation'},this.c))}});var r=global.tab.ChangeLineInterpolationCmd$ResponseBuilder=ss.mkType(a,'tab.ChangeLineInterpolationCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var s=global.tab.ChangeLinePatternCmd=ss.mkType(a,'tab.ChangeLinePatternCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return s.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_paneSpecificationId:function(){return this.c['paneSpec']},set_paneSpecificationId:function(eo){this.c['paneSpec']=eo|0},get_linePattern:function(){return this.c['linePattern']},set_linePattern:function(eo){this.c['linePattern']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-line-pattern'},this.c))}});var t=global.tab.ChangeLinePatternCmd$ResponseBuilder=ss.mkType(a,'tab.ChangeLinePatternCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var u=global.tab.CloseAuthoringCmd=ss.mkType(a,'tab.CloseAuthoringCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return u.cmdId},get_returnsResult:function(){return false}});var v=global.tab.CloseAuthoringCmd$ResponseBuilder=ss.mkType(a,'tab.CloseAuthoringCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var w=global.tab.CloseDataSourceErrorDialogModel=ss.mkType(a,'tab.CloseDataSourceErrorDialogModel',function(eo){this.$2$1=null;tab.Model.call(this,eo,new tab.PresModelPathItem('doc:close-data-source-error-dialog-event'.toString(),null))},{add_newError:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_newError:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_sheetNames:function(){return this.$3().sheetNames},get_dataSourceName:function(){return this.$3().datasource},get_notificationId:function(){return'doc:close-data-source-error-dialog-event'},$3:function(){return this.pm},onNotify:function(eo,ep){this.swapPresModel(eo);if(this.$3().needsCloseDsErrorPrompt){this.raiseEvent(this.$2$1,ep)}}});var x=global.tab.CloseMapLayersPaneCmd=ss.mkType(a,'tab.CloseMapLayersPaneCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return x.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'close-map-layers-pane'},this.c))}});var y=global.tab.CloseMapLayersPaneCmd$ResponseBuilder=ss.mkType(a,'tab.CloseMapLayersPaneCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var z=global.tab.CloseRefLineEditorCmd=ss.mkType(a,'tab.CloseRefLineEditorCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return z.cmdId},get_visualID:function(){return this.c['visualIdPresModel']},set_visualID:function(eo){this.c['visualIdPresModel']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'close-ref-line-editor'},this.c))}});var A=global.tab.CloseRefLineEditorCmd$ResponseBuilder=ss.mkType(a,'tab.CloseRefLineEditorCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var B=global.tab.CommandBuilder=ss.mkType(a,'tab.CommandBuilder',function(eo){this.$1$1=null;this.set_command(eo)},{get_command:function(){return this.$1$1},set_command:function(eo){this.$1$1=eo},addParameter:function(eo,ep){if(ss.isNullOrUndefined(this.get_command().commandParams)){this.get_command().commandParams=ss.mkdict([eo,ep])}else{this.get_command().commandParams[eo]=ep}},toCommandAction$2:function(eo){return function(ep,eq,er,es){return ss.mkdel(this,function(et){var eu=eq(et);this.addParameter(ep,eu);tab.ServerCommands.executeServerCommand(this.get_command(),er,es,null)})}},toCommandAction$1:function(eo){return ss.mkdel(this,function(){tab.ServerCommands.executeServerCommand(this.get_command(),eo,null,null)})},toCommandAction:function(){return this.toCommandAction$1('immediately')}});var C=global.tab.DashboardZoneCommands=ss.mkType(a,'tab.DashboardZoneCommands',null,null,{moveZone:function(eo,ep,eq,er,es,et,eu){var ev=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-zone'},null);ev.commandParams={};ev.commandParams['zoneId']=eo;ev.commandParams['addAsFloating']=es;ev.commandParams['dashboard']=tsConfig.current_sheet_name;ev.commandParams['dropLocation']={x:ep.x|0,y:ep.y|0};ev.commandParams['grabLocation']={x:eq.x|0,y:eq.y|0};var ew=$.Deferred();var ex=tab.ResponsiveZonePreviewGenerator.getInstance().generateMovePreview(eo,er,et,eu);tab.CommandController.SendCommand(new tab.ClientCommand('immediately',ex,ev,function(ey){ew.resolve(ey)},function(ey){ew.reject()}));return ew.promise()},$0:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-zone'},null);eq.commandParams={};eq.commandParams['dashboard']=tsConfig.current_sheet_name;eq.commandParams['addAsFloating']=ep;var er=new Array(eo.length);for(var es=0;es<eo.length;es++){er[es]=eo[es].get_zoneId()}eq.commandParams['zoneIds']=er;eq.commandParams['zoneId']=er[0];return eq},moveZones:function(eo,ep,eq){var er=C.$0(eo,eq);er.commandParams['moveOffset']={x:ep.x|0,y:ep.y|0};var es=tab.CommandController.SendCommandWithDeferredReturn(er,'immediately');es.always(function(){for(var et=0;et<eo.length;et++){var eu=eo[et];eu.set_blockLocalReset(false);tab.Model.nonWorldUpdate(ss.mkdel(eu,eu.resetZoneAndChildrenLocalChanges),null)}});return es},moveZones$1:function(eo,ep,eq,er){var es=C.$0(eo,er);es.commandParams['grabLocation']={x:ep.x|0,y:ep.y|0};es.commandParams['dropLocation']={x:eq.x|0,y:eq.y|0};var et=tab.CommandController.SendCommandWithDeferredReturn(es,'immediately');et.always(function(){for(var eu=0;eu<eo.length;eu++){var ev=eo[eu];tab.Model.nonWorldUpdate(ss.mkdel(ev,ev.resetZoneAndChildrenLocalChanges),null)}});return et},hideZone:function(eo){return C.hideZones([eo])},hideZones:function(eo){var ep=null;if(eo.length===1){ep=tab.ResponsiveZonePreviewGenerator.getInstance().generateRemovePreview(eo[0])}var eq=new bq;eq.set_dashboard(tsConfig.current_sheet_name);eq.set_zoneIDs(eo);eq.set_zoneID(eo[0]);eq.set_deleteOrphans(false);eq.set_uiBlocking('immediately');eq.set_localWork(ep);return eq.invoke()},replaceZone:function(eo,ep){var eq=new bY;eq.set_dashboard(tsConfig.current_sheet_name);eq.set_zoneID(eo);eq.set_worksheet(ep);eq.set_uiBlocking('immediately');return eq.invoke()},selectZoneParent:function(eo){var ep=new cm;ep.set_zoneID(eo);ep.set_dashboard(tsConfig.current_sheet_name);ep.invoke()},getZoneResizeInfo:function(eo,ep){var eq=new bc;eq.set_dashboard(tsConfig.current_sheet_name);eq.set_x(eo);eq.set_y(ep);var er=eq;return er.invoke()},resizeTiledZone:function(eo,ep,eq,er,es,et){var eu=tab.ResponsiveZonePreviewGenerator.getInstance().generateMoveEdgePreview(ep,eq,er,es);var ev=new bF;ev.set_zoneEdgeRect(eo);ev.set_containerID(eq);ev.set_destPix(er);ev.set_dragHorz(es);ev.set_zoneEdgeMoveType(et);ev.set_uiBlocking('immediately');ev.set_localWork(eu);ev.invoke()},resizeFreeFormZone:function(eo,ep,eq,er,es){var et=tab.ResponsiveZonePreviewGenerator.getInstance().generateResizePreview(eo.get_zoneId(),ep,eq,er,es);var eu=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-free-form-zone'},null);eu.commandParams={};eu.commandParams['dashboard']=tsConfig.current_sheet_name;var ev=(ss.isNullOrUndefined(eo)?0:eo.get_zoneId());eu.commandParams['zoneId']=ev;eu.commandParams['x']=ep|0;eu.commandParams['y']=eq|0;eu.commandParams['w']=er|0;eu.commandParams['h']=es|0;var ew=$.Deferred();tab.CommandController.SendCommand(new tab.ClientCommand('immediately',et,eu,function(ex){ew.resolve(ex)},function(ex){ew.reject()}));ew.always(function(){tab.Model.nonWorldUpdate(ss.mkdel(eo,eo.resetZoneAndChildrenLocalChanges),null)});return ew.promise()},setZoneStyle:function(eo,ep,eq){var er=new cG;er.set_zoneID(eo);er.set_zoneStyle(ep);er.set_dashboard(eq);er.set_uiBlocking('immediately');return er.invoke()},toggleZoneTitle:function(eo){var ep=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-zone-title'},null);ep.commandParams={};ep.commandParams['zoneId']=eo;ep.commandParams['dashboard']=tsConfig.current_sheet_name;tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(ep,'immediately',null,null))},toggleFreeFormZone:function(eo){var ep=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-freeform-zone'},null);ep.commandParams={};ep.commandParams['zoneId']=eo;ep.commandParams['dashboard']=tsConfig.current_sheet_name;var eq=tab.ResponsiveZonePreviewGenerator.getInstance().generateToggleFloatingPreview(eo);var er=$.Deferred();tab.CommandController.SendCommand(new tab.ClientCommand('immediately',eq,ep,function(es){er.resolve()},function(es){er.reject()}))},modifyZoneZOrder:function(eo,ep,eq){var er=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-zone-z-order'},null);er.commandParams={};er.commandParams['zoneId']=eo;er.commandParams['modifyZoneZOrderType']=ep;if(ss.isValue(eq)){er.commandParams['position']=eq}tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(er,'immediately',null,null))},setZoneCustomFriendlyName:function(eo,ep,eq,er){var es=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-zone-custom-friendly-name'},null);es.commandParams={};es.commandParams['zoneId']=eo;es.commandParams['dashboard']=ep;es.commandParams['zoneFriendlyName']=eq;var et=$.Deferred();tab.CommandController.SendCommand(new tab.ClientCommand('immediately',er,es,function(eu){et.resolve()},function(eu){et.reject()}))},setZoneIsFixedSize:function(eo,ep){var eq=new cE;eq.set_dashboard(tsConfig.current_sheet_name);eq.set_zoneID(eo);eq.set_isSetFixedSize(ep);eq.invoke()},moveZoneWithinLayoutTree:function(eo,ep,eq){var er=2147483647;var es=new bH;es.set_dashboard(tsConfig.current_sheet_name);es.set_zoneID(eo);var et=es;if(eq!==er){et.set_insertBeforeZoneID(eq)}if(ep!==er){et.set_newParentZoneID(ep)}return et.invoke()},selectFieldForZoneVisibility:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'select-field-for-zone-visibility'},null);eq.commandParams={};eq.commandParams['zoneId']=eo;eq.commandParams['dashboard']=tsConfig.current_sheet_name;eq.commandParams['fn']=ep;tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))},clearFieldForZoneVisibility:function(eo){var ep=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'clear-field-for-zone-visibility'},null);ep.commandParams={};ep.commandParams['zoneId']=eo;ep.commandParams['dashboard']=tsConfig.current_sheet_name;tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(ep,'immediately',null,null))}});var D=global.tab.DashboardZoneStyleCommands=ss.mkType(a,'tab.DashboardZoneStyleCommands',null,null,{modifyZoneBorder:function(eo,ep,eq,er){var es=new bz;es.set_dashboard(tsConfig.current_sheet_name);es.set_zoneID(eo);es.set_borderColor(ep);es.set_borderWidth(eq);es.set_borderStyle(er);es.invoke()},modifyBackgroundShading:function(eo,ep){var eq=new bx;eq.set_dashboard(tsConfig.current_sheet_name);eq.set_zoneID(eo);eq.set_backgroundColor(ep);eq.invoke()},modifyMargins:function(eo,ep,eq){var er=new bB;er.set_dashboard(tsConfig.current_sheet_name);er.set_zoneID(eo);er.set_areLockedToBeEqual(eq);er.set_sharedMargin(ep.margin);er.set_leftMargin(ep.marginLeft);er.set_rightMargin(ep.marginRight);er.set_topMargin(ep.marginTop);er.set_bottomMargin(ep.marginBottom);er.invoke()},modifyPadding:function(eo,ep,eq){var er=new bD;er.set_dashboard(tsConfig.current_sheet_name);er.set_zoneID(eo);er.set_areLockedToBeEqual(eq);er.set_sharedPadding(ep.padding);er.set_leftPadding(ep.paddingLeft);er.set_rightPadding(ep.paddingRight);er.set_topPadding(ep.paddingTop);er.set_bottomPadding(ep.paddingBottom);er.invoke()}});var E=global.tab.DeleteDraftCmd=ss.mkType(a,'tab.DeleteDraftCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return E.cmdId},get_returnsResult:function(){return false}});var F=global.tab.DeleteDraftCmd$ResponseBuilder=ss.mkType(a,'tab.DeleteDraftCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var G=global.tab.DesktopSidePaneSynchronizer=ss.mkType(a,'tab.DesktopSidePaneSynchronizer',null,null,{connectToResizedEvent:function(eo){var ep=tabBootstrap.WorkbookSessionService.get_instance();if(ss.isValue(ep)){ep.registerSidePaneResizedHandler(function(eq){eo.set_width(eq)});eo.add_resizingEnded(G.$0);return new tab.CallOnDispose(function(){eo.remove_resizingEnded(G.$0)})}return new tab.CallOnDispose(function(){})},connectToVisibilityChangedEvent:function(eo){var ep=tabBootstrap.WorkbookSessionService.get_instance();if(ss.isNullOrUndefined(ep)){return}ep.registerSidePaneVisibilityChangedHandler(eo)},$0:function(eo){tabBootstrap.WorkbookSessionService.get_instance().resizeSidePane(eo)}});var H=global.tab.DestroyVQLSessionCmd=ss.mkType(a,'tab.DestroyVQLSessionCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return H.cmdId},get_returnsResult:function(){return false}});var I=global.tab.DestroyVQLSessionCmd$ResponseBuilder=ss.mkType(a,'tab.DestroyVQLSessionCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var J=global.tab.DistributionModel=ss.mkType(a,'tab.DistributionModel',function(eo){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;tab.Model.call(this,eo,new tab.PresModelPathItem('referenceLine'.toString(),null));this.pm={};this.set_distributionPercentagesModel(new K(this));this.set_distributionPercentilesModel(new L(this));this.set_distributionQuantilesModel(new M(this));this.set_distributionStandardDeviationModel(new N(this))},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_distributionPresModel:function(){return this.pm},get_isValid:function(){return this.get_distributionPresModel().valid},get_distributionType:function(){return this.get_distributionPresModel().distributionType},get_refLineId:function(){return this.get_distributionPresModel().refLineId||''},get_visualId:function(){return this.get_distributionPresModel().visualIdPresModel},get_scopeType:function(){return ss.coalesce(this.get_distributionPresModel().referenceLineScopeType,'per-pane')},get_labelType:function(){return ss.coalesce(this.get_distributionPresModel().referenceLineLabelType,'automatic')},get_tooltipType:function(){return ss.coalesce(this.get_distributionPresModel().referenceLineTooltipType,'automatic')},get_validLabelTypes:function(){return this.$2$2},set_validLabelTypes:function(eo){this.$2$2=eo},get_validTooltipTypes:function(){return this.$2$3},set_validTooltipTypes:function(eo){this.$2$3=eo},get_customLabel:function(){return this.get_distributionPresModel().label||''},get_customTooltip:function(){return this.get_distributionPresModel().tooltipText||''},get_validCustomLabelTags:function(){return this.$2$4},set_validCustomLabelTags:function(eo){this.$2$4=eo},get_formulaGroup:function(){return ss.coalesce(this.get_distributionPresModel().reflineFormulaGroup,'distribution')},get_instantAnalyticsEnabled:function(){return this.get_distributionPresModel().enableInstantAnalytics},get_isInstantAnalyticsAllowed:function(){return this.get_distributionPresModel().instantAnalyticsAllowed},get_isPercentilesAllowed:function(){return this.get_distributionPresModel().percentilesAllowed},get_isQuantilesAllowed:function(){return this.get_distributionPresModel().quantilesAllowed},get_isStandardDeviationAllowed:function(){return this.get_distributionPresModel().standardDeviationAllowed},get_selectedText:function(){return this.get_distributionPresModel().distributionValueString},get_distributionPercentagesModel:function(){return this.$2$5},set_distributionPercentagesModel:function(eo){this.$2$5=eo},get_distributionPercentilesModel:function(){return this.$2$6},set_distributionPercentilesModel:function(eo){this.$2$6=eo},get_distributionQuantilesModel:function(){return this.$2$7},set_distributionQuantilesModel:function(eo){this.$2$7=eo},get_distributionStandardDeviationModel:function(){return this.$2$8},set_distributionStandardDeviationModel:function(eo){this.$2$8=eo},$3:function(eo){this.set_validCustomLabelTags(_.map(eo,function(ep){return ep}))},$4:function(eo){this.set_validLabelTypes(_.map(eo,function(ep){return{key:ep.referenceLineLabelType,value:ep.displayText}}))},$5:function(eo){this.set_validTooltipTypes(_.map(eo,function(ep){return{key:ep.referenceLineTooltipType,value:ep.displayText}}))},update:function(eo,ep){this.$4(eo.validReferenceLineLabelTypes);this.$5(eo.validReferenceLineTooltipTypes);this.$3(eo.validReferenceLineCustomLabelTags);this.get_distributionPercentagesModel().update(eo.distributionPercentages,eo.visualIdPresModel,eo.refLineId,ep);this.get_distributionPercentilesModel().update(eo.distributionPercentiles,eo.visualIdPresModel,eo.refLineId,ep);this.get_distributionQuantilesModel().update(eo.distributionQuantiles,eo.visualIdPresModel,eo.refLineId,ep);this.get_distributionStandardDeviationModel().update(eo.distributionStddev,eo.visualIdPresModel,eo.refLineId,ep);this.simpleSwapToUpdate(eo,this.$2$1,ep)}});var K=global.tab.DistributionPercentagesModel=ss.mkType(a,'tab.DistributionPercentagesModel',function(eo){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;tab.Model.call(this,eo,new tab.PresModelPathItem('distributionPercentages'.toString(),null));this.pm={};this.set_fieldPickerCombo(new Y(this));this.set_validFormulaTypes([])},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_visualID:function(){return this.$2$2},set_visualID:function(eo){this.$2$2=eo},get_refLineID:function(){return this.$2$3},set_refLineID:function(eo){this.$2$3=eo},get_distributionPercentagesPresModel:function(){return this.pm},get_percentages:function(){return this.get_distributionPercentagesPresModel().percentagesStr},get_validFormulaTypes:function(){return this.$2$4},set_validFormulaTypes:function(eo){this.$2$4=eo},get_formulaType:function(){return ss.coalesce(this.get_distributionPercentagesPresModel().referenceLineFormulaType,'average')},get_formattedConstantValue:function(){return this.get_distributionPercentagesPresModel().formattedValue||''},get_fieldPickerCombo:function(){return this.$2$5},set_fieldPickerCombo:function(eo){this.$2$5=eo},get_isParameterSelected:function(){return this.get_distributionPercentagesPresModel().isParameterSelected},$3:function(eo){var ep=[];if(ss.isNullOrUndefined(eo)){return ep}return ep.concat.apply(ep,eo)},update:function(eo,ep,eq,er){this.set_visualID(ep);this.set_refLineID(eq);if(ss.isValue(eo)){this.get_fieldPickerCombo().update(eo.fieldPickerCombo,er);this.set_validFormulaTypes(this.$3(eo.validReferenceLineFormulaTypes))}this.simpleSwapToUpdate(eo,this.$2$1,er)}});var L=global.tab.DistributionPercentilesModel=ss.mkType(a,'tab.DistributionPercentilesModel',function(eo){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;tab.Model.call(this,eo,new tab.PresModelPathItem('distributionPercentiles'.toString(),null));this.pm={};this.set_percentileComboModel(new tab.EditValueWidgetModel(this,'distributionPercentilesLevelCombo'))},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_visualID:function(){return this.$2$2},set_visualID:function(eo){this.$2$2=eo},get_refLineID:function(){return this.$2$3},set_refLineID:function(eo){this.$2$3=eo},get_percentileComboModel:function(){return this.$2$4},set_percentileComboModel:function(eo){this.$2$4=eo},get_distributionPercentilesPresModel:function(){return this.pm},update:function(eo,ep,eq,er){this.set_visualID(ep);this.set_refLineID(eq);if(ss.isValue(eo)){this.get_percentileComboModel().update(eo.distributionPercentilesLevelCombo,er)}this.simpleSwapToUpdate(eo,this.$2$1,er)}});var M=global.tab.DistributionQuantilesModel=ss.mkType(a,'tab.DistributionQuantilesModel',function(eo){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;tab.Model.call(this,eo,new tab.PresModelPathItem('distributionQuantiles'.toString(),null));this.pm={};this.set_distributionQuantilesCombo(new tab.EditValueWidgetModel(this,'distributionQuantilesLevelCombo'))},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_visualID:function(){return this.$2$2},set_visualID:function(eo){this.$2$2=eo},get_distributionQuantilesCombo:function(){return this.$2$3},set_distributionQuantilesCombo:function(eo){this.$2$3=eo},get_refLineID:function(){return this.$2$4},set_refLineID:function(eo){this.$2$4=eo},get_distributionQuantilesPresModel:function(){return this.pm},update:function(eo,ep,eq,er){this.set_visualID(ep);this.set_refLineID(eq);if(ss.isValue(eo)){this.get_distributionQuantilesCombo().update(eo.distributionQuantilesLevelCombo,er)}this.simpleSwapToUpdate(eo,this.$2$1,er)}});var N=global.tab.DistributionStandardDeviationModel=ss.mkType(a,'tab.DistributionStandardDeviationModel',function(eo){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;tab.Model.call(this,eo,new tab.PresModelPathItem('distributionStddev'.toString(),null));this.pm={}},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_visualID:function(){return this.$2$2},set_visualID:function(eo){this.$2$2=eo},get_refLineID:function(){return this.$2$3},set_refLineID:function(eo){this.$2$3=eo},get_distributionStandardDeviationPresModel:function(){return this.pm},get_stDevType:function(){return this.get_distributionStandardDeviationPresModel().stdevType},get_factors:function(){return this.get_distributionStandardDeviationPresModel().factorsStr},get_validStDevTypes:function(){return this.$2$4},set_validStDevTypes:function(eo){this.$2$4=eo},update:function(eo,ep,eq,er){this.set_visualID(ep);this.set_refLineID(eq);this.set_validStDevTypes(_.map(eo.translatedStdevTypes,function(es){return{key:es.stdevType,value:es.displayText}}));this.simpleSwapToUpdate(eo,this.$2$1,er)}});var O=global.tab.DragToShowMeInfo=ss.mkType(a,'tab.DragToShowMeInfo',function(eo,ep){this.fieldModel=null;this.encodingType=null;this.fieldModel=eo;this.encodingType=ep});var P=global.tab.DragToShowMeInfoWrapper=ss.mkType(a,'tab.DragToShowMeInfoWrapper',function(eo,ep,eq){this.infoList=[];this.isFromDataSchemaPane=false;this.isCopyDrag=false;this.isShiftDrag=false;this.isFromDataSchemaPane=eo;this.isCopyDrag=ep;this.isShiftDrag=eq},{get_allFieldModels:function(){var eo=[];for(var ep=0;ep<this.infoList.length;ep++){var eq=this.infoList[ep];eo.push(eq.fieldModel)}return eo},add:function(eo){this.infoList.push(eo)}});var Q=global.tab.DropReferenceLineOnFilterShelfCmd=ss.mkType(a,'tab.DropReferenceLineOnFilterShelfCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return Q.cmdId},get_fieldName:function(){return this.c['fn']},set_fieldName:function(eo){this.c['fn']=eo},get_shelfDropPosition:function(){return this.c['shelfDropTargetPosition']},set_shelfDropPosition:function(eo){this.c['shelfDropTargetPosition']=eo},get_refLineId:function(){return this.c['refLineId']},set_refLineId:function(eo){this.c['refLineId']=eo},get_paneId:function(){return this.c['paneId']},set_paneId:function(eo){this.c['paneId']=eo},get_removeCommand:function(){return this.c['simpleCommandModel']},set_removeCommand:function(eo){this.c['simpleCommandModel']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-ref-line-on-filter-shelf'},this.c))}});var R=global.tab.DropReferenceLineOnFilterShelfCmd$ResponseBuilder=ss.mkType(a,'tab.DropReferenceLineOnFilterShelfCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var S=global.tab.DropReferenceLineOnSchemaViewerCmd=ss.mkType(a,'tab.DropReferenceLineOnSchemaViewerCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return S.cmdId},get_fieldName:function(){return this.c['fn']},set_fieldName:function(eo){this.c['fn']=eo},get_refLineId:function(){return this.c['refLineId']},set_refLineId:function(eo){this.c['refLineId']=eo},get_paneId:function(){return this.c['paneId']},set_paneId:function(eo){this.c['paneId']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-ref-line-on-schema-viewer'},this.c))}});var T=global.tab.DropReferenceLineOnSchemaViewerCmd$ResponseBuilder=ss.mkType(a,'tab.DropReferenceLineOnSchemaViewerCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var U=global.tab.DropReferenceLineOnShelfCmd=ss.mkType(a,'tab.DropReferenceLineOnShelfCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return U.cmdId},get_fieldName:function(){return this.c['fn']},set_fieldName:function(eo){this.c['fn']=eo},get_shelfDropPosition:function(){return this.c['shelfDropTargetPosition']},set_shelfDropPosition:function(eo){this.c['shelfDropTargetPosition']=eo},get_refLineId:function(){return this.c['refLineId']},set_refLineId:function(eo){this.c['refLineId']=eo},get_paneId:function(){return this.c['paneId']},set_paneId:function(eo){this.c['paneId']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-ref-line-on-shelf'},this.c))}});var V=global.tab.DropReferenceLineOnShelfCmd$ResponseBuilder=ss.mkType(a,'tab.DropReferenceLineOnShelfCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var W=global.tab.EditAxisDialogCommands=ss.mkType(a,'tab.EditAxisDialogCommands',null,null,{getServerSceneMarginContextMenu:function(eo,ep,eq,er){var es=new h;es.set_visualID(eo);es.set_regionPoint(tab.PointUtil.toPresModel(ep));es.set_vizImageRegion(eq);var et=es;et.invoke().then(er)},showEditAxisDialogInBrowserRenderedMode:function(eo){var ep=new tab.ShowEditAxisDialogCmd;ep.set_fieldName(eo.fn);ep.set_axisOrientation(eo.axisOrientation);ep.set_duplicateIndex(eo.duplicateIndex);ep.invoke()},showEditAxisDialogInServerRenderedMode:function(eo,ep,eq){var er=new tab.DoubleClickRegionNoReturnServerCmd;er.set_visualID(eo);er.set_regionPoint(tab.PointUtil.toPresModel(ep));er.set_vizImageRegion(eq);er.invoke()}});var X=global.tab.ExpandedSidePaneWidthModel=ss.mkType(a,'tab.ExpandedSidePaneWidthModel',function(){this.$4=0;this.$2$1=null;this.$2$2=null;tab.Model.call(this,null,null);var eo=tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()&&!tsConfig.is_mobile;this.$4=(eo?250:((tabBootstrap.ViewerBootstrap.get_initialAuthoringLeftAreaWidth()>0)?tabBootstrap.ViewerBootstrap.get_initialAuthoringLeftAreaWidth():200))},{add_resized:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_resized:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},add_resizingEnded:function(eo){this.$2$2=ss.delegateCombine(this.$2$2,eo)},remove_resizingEnded:function(eo){this.$2$2=ss.delegateRemove(this.$2$2,eo)},get_width:function(){return this.$4},set_width:function(eo){if(eo===this.get_width()){return}this.$4=eo;this.$3()},resizeEnded:function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(this.get_width())}},$3:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(this.get_width())}}});var Y=global.tab.FieldPickerComboModel=ss.mkType(a,'tab.FieldPickerComboModel',function(eo){this.$2$1=null;tab.Model.call(this,eo,new tab.PresModelPathItem('fieldPickerCombo'.toString(),null))},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_fieldPickerComboPresModel:function(){return this.pm},get_selectedField:function(){return this.get_fieldPickerComboPresModel().fn},get_fields:function(){return _.map(this.get_fieldPickerComboPresModel().fieldPickerFields,function(eo){return new Z(eo)})},update:function(eo,ep){this.simpleSwapToUpdate(eo,this.$2$1,ep)}});var Z=global.tab.FieldPickerFieldModel=ss.mkType(a,'tab.FieldPickerFieldModel',function(eo){this.fieldName=null;this.fieldCaption=null;this.fieldSummary=null;this.isInPrimaryDataSource=false;this.isFieldParameter=false;this.isTableCalc=false;this.fieldName=eo.fn;this.fieldCaption=eo.fieldCaption;this.fieldSummary=eo.fieldSummary;this.isInPrimaryDataSource=eo.isInPrimaryDataSource;this.isFieldParameter=eo.isFieldParameter;this.isTableCalc=eo.isTableCalc});var ba=global.tab.GetDensityColorPalettesCmd=ss.mkType(a,'tab.GetDensityColorPalettesCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ba.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_paneSpecId:function(){return this.c['paneSpec']},set_paneSpecId:function(eo){this.c['paneSpec']=eo|0},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-density-color-palettes'},this.c))}});var bb=global.tab.GetDensityColorPalettesCmd$ResponseBuilder=ss.mkType(a,'tab.GetDensityColorPalettesCmd$ResponseBuilder',function(eo){this.$1={};this.$1['colorPalettes']=eo},{get_colorPalettes:function(){return this.$1['colorPalettes']},set_colorPalettes:function(eo){this.$1['colorPalettes']=eo},withColorPalettes:function(eo){this.set_colorPalettes(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'colorPalettes')){throw new ss.Exception("Missing required parameter 'DocParams.ColorPalettes'.")}}});var bc=global.tab.GetDragZoneResizeCmd=ss.mkType(a,'tab.GetDragZoneResizeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bc.cmdId},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_x:function(){return this.c['x']},set_x:function(eo){this.c['x']=eo|0},get_y:function(){return this.c['y']},set_y:function(eo){this.c['y']=eo|0},get_isShiftDrag:function(){return this.c['isShiftDrag']},set_isShiftDrag:function(eo){this.c['isShiftDrag']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-drag-zone-resize'},this.c))}});var bd=global.tab.GetDragZoneResizeCmd$ResponseBuilder=ss.mkType(a,'tab.GetDragZoneResizeCmd$ResponseBuilder',function(){this.$1={}},{get_resizeInfo:function(){return this.$1['zoneResize']},set_resizeInfo:function(eo){this.$1['zoneResize']=eo},withResizeInfo:function(eo){this.set_resizeInfo(eo);return this},build:function(){return this.$1},$0:function(){}});var be=global.tab.GetLastPublishedDateForDataSourceCmd=ss.mkType(a,'tab.GetLastPublishedDateForDataSourceCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return be.cmdId},get_datasourceName:function(){return this.c['datasource']},set_datasourceName:function(eo){this.c['datasource']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-last-published-date-for-data-source'},this.c))}});var bf=global.tab.GetLastPublishedDateForDataSourceCmd$ResponseBuilder=ss.mkType(a,'tab.GetLastPublishedDateForDataSourceCmd$ResponseBuilder',function(eo,ep){this.$1={};this.$1['repositoryUrl']=eo;this.$1['lastPublishedAt']=ep},{get_repositoryUrlForInterceptorUse:function(){return this.$1['repositoryUrl']},set_repositoryUrlForInterceptorUse:function(eo){this.$1['repositoryUrl']=eo},withRepositoryUrlForInterceptorUse:function(eo){this.set_repositoryUrlForInterceptorUse(eo);return this},get_lastPublishedAt:function(){return this.$1['lastPublishedAt']},set_lastPublishedAt:function(eo){this.$1['lastPublishedAt']=eo},withLastPublishedAt:function(eo){this.set_lastPublishedAt(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'repositoryUrl')){throw new ss.Exception("Missing required parameter 'DocParams.RepositoryUrl'.")}if(!ss.keyExists(this.$1,'lastPublishedAt')){throw new ss.Exception("Missing required parameter 'DocParams.LastPublishedAt'.")}}});var bg=global.tab.GetRefLineDragInfoCmd=ss.mkType(a,'tab.GetRefLineDragInfoCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bg.cmdId},get_visualID:function(){return this.c['visualIdPresModel']},set_visualID:function(eo){this.c['visualIdPresModel']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_refLineId:function(){return this.c['referenceLineId']},set_refLineId:function(eo){this.c['referenceLineId']=eo},get_objectId:function(){return this.c['objectId']},set_objectId:function(eo){this.c['objectId']=eo|0},get_paneId:function(){return this.c['paneId']},set_paneId:function(eo){this.c['paneId']=eo},get_activePaneSpecId:function(){return this.c['paneSpec']},set_activePaneSpecId:function(eo){this.c['paneSpec']=eo|0},get_isRightDrag:function(){return this.c['isRightDrag']},set_isRightDrag:function(eo){this.c['isRightDrag']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-ref-line-drag-info'},this.c))}});var bh=global.tab.GetRefLineDragInfoCmd$ResponseBuilder=ss.mkType(a,'tab.GetRefLineDragInfoCmd$ResponseBuilder',function(eo){this.$1={};this.$1['analyticsObjectDragInfo']=eo},{get_presModel:function(){return this.$1['analyticsObjectDragInfo']},set_presModel:function(eo){this.$1['analyticsObjectDragInfo']=eo},withPresModel:function(eo){this.set_presModel(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'analyticsObjectDragInfo')){throw new ss.Exception("Missing required parameter 'DocParams.AnalyticsObjectDragInfo'.")}}});var bi=global.tab.GetRefLineFormulaCmd=ss.mkType(a,'tab.GetRefLineFormulaCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bi.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_refLineId:function(){return this.c['referenceLineId']},set_refLineId:function(eo){this.c['referenceLineId']=eo},get_calcType:function(){return this.c['referenceLineLodCalcType']},set_calcType:function(eo){this.c['referenceLineLodCalcType']=eo},get_paneId:function(){return this.c['paneId']},set_paneId:function(eo){this.c['paneId']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-ref-line-formula'},this.c))}});var bj=global.tab.GetRefLineFormulaCmd$ResponseBuilder=ss.mkType(a,'tab.GetRefLineFormulaCmd$ResponseBuilder',function(eo){this.$1={};this.$1['formula']=eo},{get_formula:function(){return this.$1['formula']},set_formula:function(eo){this.$1['formula']=eo},withFormula:function(eo){this.set_formula(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'formula')){throw new ss.Exception("Missing required parameter 'DocParams.Formula'.")}}});var bk=global.tab.GetSankeyColorPalettesCmd=ss.mkType(a,'tab.GetSankeyColorPalettesCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bk.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-sankey-color-palettes'},this.c))}});var bl=global.tab.GetSankeyColorPalettesCmd$ResponseBuilder=ss.mkType(a,'tab.GetSankeyColorPalettesCmd$ResponseBuilder',function(eo){this.$1={};this.$1['colorPalettes']=eo},{get_colorPalettes:function(){return this.$1['colorPalettes']},set_colorPalettes:function(eo){this.$1['colorPalettes']=eo},withColorPalettes:function(eo){this.set_colorPalettes(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'colorPalettes')){throw new ss.Exception("Missing required parameter 'DocParams.ColorPalettes'.")}}});var bm=global.tab.GetShouldDisplaySaveDatasourceDialogCmd=ss.mkType(a,'tab.GetShouldDisplaySaveDatasourceDialogCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bm.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-should-display-save-datasource-dialog'},this.c))}});var bn=global.tab.GetShouldDisplaySaveDatasourceDialogCmd$ResponseBuilder=ss.mkType(a,'tab.GetShouldDisplaySaveDatasourceDialogCmd$ResponseBuilder',function(eo){this.$1={};this.$1['shouldDisplaySaveDatasourceDialog']=eo},{get_shouldDisplayDialog:function(){return this.$1['shouldDisplaySaveDatasourceDialog']},set_shouldDisplayDialog:function(eo){this.$1['shouldDisplaySaveDatasourceDialog']=eo},withShouldDisplayDialog:function(eo){this.set_shouldDisplayDialog(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'shouldDisplaySaveDatasourceDialog')){throw new ss.Exception("Missing required parameter 'DocParams.ShouldDisplaySaveDatasourceDialog'.")}}});var bo=global.tab.GetTrendLineDragInfoCmd=ss.mkType(a,'tab.GetTrendLineDragInfoCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bo.cmdId},get_visualID:function(){return this.c['visualIdPresModel']},set_visualID:function(eo){this.c['visualIdPresModel']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_paneId:function(){return this.c['paneId']},set_paneId:function(eo){this.c['paneId']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-trend-line-drag-info'},this.c))}});var bp=global.tab.GetTrendLineDragInfoCmd$ResponseBuilder=ss.mkType(a,'tab.GetTrendLineDragInfoCmd$ResponseBuilder',function(eo){this.$1={};this.$1['analyticsObjectDragInfo']=eo},{get_presModel:function(){return this.$1['analyticsObjectDragInfo']},set_presModel:function(eo){this.$1['analyticsObjectDragInfo']=eo},withPresModel:function(eo){this.set_presModel(eo);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'analyticsObjectDragInfo')){throw new ss.Exception("Missing required parameter 'DocParams.AnalyticsObjectDragInfo'.")}}});var bq=global.tab.HideZoneCmd=ss.mkType(a,'tab.HideZoneCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bq.cmdId},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_zoneIDs:function(){return this.c['zoneIds']},set_zoneIDs:function(eo){this.c['zoneIds']=eo},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_deleteOrphans:function(){return this.c['deleteOrphans']},set_deleteOrphans:function(eo){this.c['deleteOrphans']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'hide-zone'},this.c))}});var br=global.tab.HideZoneCmd$ResponseBuilder=ss.mkType(a,'tab.HideZoneCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bs=global.tab.HideZoneWithPreviewCmd=ss.mkType(a,'tab.HideZoneWithPreviewCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bs.cmdId},get_returnsResult:function(){return false},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_deleteOrphans:function(){return this.c['deleteOrphans']},set_deleteOrphans:function(eo){this.c['deleteOrphans']=eo}});var bt=global.tab.HideZoneWithPreviewCmd$ResponseBuilder=ss.mkType(a,'tab.HideZoneWithPreviewCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bu=global.tab.LaunchFilterDialogCmd=ss.mkType(a,'tab.LaunchFilterDialogCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bu.cmdId},get_fieldName:function(){return this.c['fn']},set_fieldName:function(eo){this.c['fn']=eo},get_storeId:function(){return this.c['storeId']},set_storeId:function(eo){this.c['storeId']=eo|0},get_forceUserToChoose:function(){return this.c['forceUserToChoose']},set_forceUserToChoose:function(eo){this.c['forceUserToChoose']=eo},get_sourceDragType:function(){return this.c['dragSource']},set_sourceDragType:function(eo){this.c['dragSource']=eo},get_sourceDragPosition:function(){return this.c['shelfDragSourcePosition']},set_sourceDragPosition:function(eo){this.c['shelfDragSourcePosition']=eo},get_targetDropPosition:function(){return this.c['shelfDropTargetPosition']},set_targetDropPosition:function(eo){this.c['shelfDropTargetPosition']=eo},get_isCopy:function(){return this.c['isCopy']},set_isCopy:function(eo){this.c['isCopy']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'launch-filter-dialog'},this.c))}});var bv=global.tab.LaunchFilterDialogCmd$ResponseBuilder=ss.mkType(a,'tab.LaunchFilterDialogCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bw=global.tab.MenuBarClientCommands=ss.mkType(a,'tab.MenuBarClientCommands',null,null,{getMainMenu:function(eo,ep){switch(eo){case'file':case'data':case'worksheet':case'dashboard':case'map':case'format':case'window':{var eq=new f;eq.set_mobile(tsConfig.is_mobile);eq.set_itemId(eo);eq.set_hasAllowAddNewDatasourceCapability(tsConfig.allow_add_new_datasource);eq.set_allowSaveDataSource(tsConfig.allow_save_data_source&&!tsConfig.isPublic);var er=eq;er.invoke().then(ep);break}default:{break}}},getAnalysisMainMenu:function(eo,ep){var eq=new f;eq.set_itemId('analysis');if(!ss.isNullOrEmptyString(ep)){eq.set_dataSource(ep)}eq.invoke().then(eo)}});var bx=global.tab.ModifyBackgroundShadingCmd=ss.mkType(a,'tab.ModifyBackgroundShadingCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bx.cmdId},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_backgroundColor:function(){return this.c['color']},set_backgroundColor:function(eo){this.c['color']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-background-shading'},this.c))}});var by=global.tab.ModifyBackgroundShadingCmd$ResponseBuilder=ss.mkType(a,'tab.ModifyBackgroundShadingCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bz=global.tab.ModifyBorderCmd=ss.mkType(a,'tab.ModifyBorderCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bz.cmdId},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_borderWidth:function(){return this.c['w']},set_borderWidth:function(eo){this.c['w']=eo|0},get_borderStyle:function(){return this.c['borderStyle']},set_borderStyle:function(eo){this.c['borderStyle']=eo},get_borderColor:function(){return this.c['color']},set_borderColor:function(eo){this.c['color']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-border'},this.c))}});var bA=global.tab.ModifyBorderCmd$ResponseBuilder=ss.mkType(a,'tab.ModifyBorderCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bB=global.tab.ModifyMarginCmd=ss.mkType(a,'tab.ModifyMarginCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bB.cmdId},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_areLockedToBeEqual:function(){return this.c['areSidesLockedToBeEqual']},set_areLockedToBeEqual:function(eo){this.c['areSidesLockedToBeEqual']=eo},get_sharedMargin:function(){return this.c['margin']},set_sharedMargin:function(eo){this.c['margin']=eo|0},get_leftMargin:function(){return this.c['marginLeft']},set_leftMargin:function(eo){this.c['marginLeft']=eo|0},get_rightMargin:function(){return this.c['marginRight']},set_rightMargin:function(eo){this.c['marginRight']=eo|0},get_topMargin:function(){return this.c['marginTop']},set_topMargin:function(eo){this.c['marginTop']=eo|0},get_bottomMargin:function(){return this.c['marginBottom']},set_bottomMargin:function(eo){this.c['marginBottom']=eo|0},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-margin'},this.c))}});var bC=global.tab.ModifyMarginCmd$ResponseBuilder=ss.mkType(a,'tab.ModifyMarginCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bD=global.tab.ModifyPaddingCmd=ss.mkType(a,'tab.ModifyPaddingCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bD.cmdId},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_areLockedToBeEqual:function(){return this.c['areSidesLockedToBeEqual']},set_areLockedToBeEqual:function(eo){this.c['areSidesLockedToBeEqual']=eo},get_sharedPadding:function(){return this.c['padding']},set_sharedPadding:function(eo){this.c['padding']=eo|0},get_leftPadding:function(){return this.c['paddingLeft']},set_leftPadding:function(eo){this.c['paddingLeft']=eo|0},get_rightPadding:function(){return this.c['paddingRight']},set_rightPadding:function(eo){this.c['paddingRight']=eo|0},get_topPadding:function(){return this.c['paddingTop']},set_topPadding:function(eo){this.c['paddingTop']=eo|0},get_bottomPadding:function(){return this.c['paddingBottom']},set_bottomPadding:function(eo){this.c['paddingBottom']=eo|0},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-padding'},this.c))}});var bE=global.tab.ModifyPaddingCmd$ResponseBuilder=ss.mkType(a,'tab.ModifyPaddingCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bF=global.tab.MoveDashboardEdgeCmd=ss.mkType(a,'tab.MoveDashboardEdgeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bF.cmdId},get_zoneEdgeRect:function(){return this.c['zoneEdgePp']},set_zoneEdgeRect:function(eo){this.c['zoneEdgePp']=eo},get_containerID:function(){return this.c['zoneId']},set_containerID:function(eo){this.c['zoneId']=eo|0},get_destPix:function(){return this.c['destPix']},set_destPix:function(eo){this.c['destPix']=eo|0},get_dragHorz:function(){return this.c['dragHorz']},set_dragHorz:function(eo){this.c['dragHorz']=eo},get_zoneEdgeMoveType:function(){return this.c['zoneEdgeMoveType']},set_zoneEdgeMoveType:function(eo){this.c['zoneEdgeMoveType']=eo},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-dashboard-edge'},this.c))}});var bG=global.tab.MoveDashboardEdgeCmd$ResponseBuilder=ss.mkType(a,'tab.MoveDashboardEdgeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bH=global.tab.MoveZoneWithinLayoutTreeCmd=ss.mkType(a,'tab.MoveZoneWithinLayoutTreeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bH.cmdId},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_newParentZoneID:function(){return this.c['newParentZoneId']},set_newParentZoneID:function(eo){this.c['newParentZoneId']=eo|0},get_insertBeforeZoneID:function(){return this.c['insertBeforeZoneId']},set_insertBeforeZoneID:function(eo){this.c['insertBeforeZoneId']=eo|0},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-zone-within-layout-tree'},this.c))}});var bI=global.tab.MoveZoneWithinLayoutTreeCmd$ResponseBuilder=ss.mkType(a,'tab.MoveZoneWithinLayoutTreeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bJ=global.tab.NavigationUtil=ss.mkType(a,'tab.NavigationUtil',null,null,{closeWindowIfOpenedByTableau:function(eo){var ep=tab.WindowHelper.get_windowSelf();if(bJ.wasTabOpenedByTableau(eo,ep)){tab.WindowHelper.close(ep)}},wasTabOpenedByTableau:function(eo,ep){var eq=tab.WindowHelper.getOpener(ep);if(ss.isValue(eq)){try{var er=tab.WindowHelper.getLocation(eq);var es=tab.VizUriModel.createForCurrentWindowLocation(eq).get_isNlpExplorationPageUri();if(ss.isValue(er.href)&&!es){return true}}catch(et){return false}}return false},redirectToDataSources:function(eo){var ep=tsConfig.site_root+'/datasources';tab.WindowHelper.setLocationHref(tab.WindowHelper.get_windowSelf(),tab.MiscUtil.replaceUriQueryParameters(ep,eo))}});var bK=global.tab.NotificationForwarder=ss.mkType(a,'tab.NotificationForwarder',function(eo){this.$2=[];this.$3=null;this.$1=null;this.$1=eo;tab.ApplicationModel.get_instance().registerNotificationHandler(eo,ss.mkdel(this,this.$0))},{dispose:function(){tab.ApplicationModel.get_instance().unRegisterNotificationHandler(this.$1,ss.mkdel(this,this.$0))},setReceiver:function(eo){tab.Param.verifyValue(eo,'updatedReceiver');this.$3=eo;tab.Model.nonWorldUpdate(ss.mkdel(this,function(ep){for(var eq=0;eq<this.$2.length;eq++){var er=this.$2[eq];this.$3.onNotify(er,ep)}this.$2.length=0}),null)},$0:function(eo,ep){if(ss.isNullOrUndefined(this.$3)){this.$2.push(eo)}else{this.$3.onNotify(eo,ep)}}});var bL=global.tab.PaneClientCommands=ss.mkType(a,'tab.PaneClientCommands',null,null,{setPanePrimitive:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-primitive'},null);eq.commandParams=bL.$1(eo);eq.commandParams['primitiveType']=ep.actualPrimitiveType;if(ep.actualPrimitiveType==='viz-extension'){eq.commandParams['vizExtensionId']=ep.vizExtensionId;eq.commandParams['vizExtensionVersion']=ep.vizExtensionVersion;eq.commandParams['vizExtensionUrl']=ep.vizExtensionUrl}tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))},getDefaultShapeType:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-default-shape'},null);eq.commandParams=bL.$1(eo);tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'none',function(er){ep((_.isString(er)?tab.ShapeModel.fromString(er.toString()):null))},function(){ep(null)}))},setDefaultShapeType:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-default-shape'},null);eq.commandParams=bL.$1(eo);eq.commandParams['shapeName']=bL.$7(ep);if(tabBootstrap.FeatureFlags.isEnabled('RuntimeWebAuthoringIU')){var er=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_renderMode()==='render-mode-client')?'none':'immediately'),function(es){bL.$5(es,ep)},eq,null,null);tab.CommandController.SendCommand(er)}else{tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))}},$5:function(eo,ep){if(ss.isValue(ep.get_palette())&&ss.unbox(ep.get_palette())!=='filled'){return}var eq=tab.SceneDataUtil.convertShapeToNumber(ep);var er=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);er.updateRuntimeHandles(eo,3,bL.$9(function(es){es.DefaultShape=[eq]}))},toggleMarkLabels:function(eo,ep,eq){var er=bL.$0(eo);er.markLabelsVisibilityChanged=true;var es=(ep?'mlv-visible':'mlv-hidden');bL.$8(er,eq,es)},$8:function(eo,ep,eq){eo.markLabelsVisibility=eq;var er=new dH;er.set_worksheet(tsConfig.current_sheet_name);er.set_markLabelsSpec(eo);er.set_paneSpecId(ep);er.invoke()},updateMarkLabelsMode:function(eo,ep,eq){var er=bL.$0(eo);er.markLabelsMode=eq;bL.$8(er,ep,'mlv-use-current')},updateMarkLabelsScope:function(eo,ep,eq){var er=bL.$0(eo);er.markLabelsScope=eq;bL.$8(er,ep,'mlv-use-current')},updateMarkLabelsMinMaxFieldChanged:function(eo,ep,eq){var er=bL.$0(eo);er.fn=eq;bL.$8(er,ep,'mlv-use-current')},updateMarkLabelsMinMaxStartCheckboxChanged:function(eo,ep,eq){var er=bL.$0(eo);er.labelMarkMin=eq;bL.$8(er,ep,'mlv-use-current')},updateMarkLabelsMinMaxEndCheckboxChanged:function(eo,ep,eq){var er=bL.$0(eo);er.labelMarkMax=eq;bL.$8(er,ep,'mlv-use-current')},updateMarkLabelsLineEndFirstCheckboxChanged:function(eo,ep,eq){var er=bL.$0(eo);er.labelLineEndFirst=eq;bL.$8(er,ep,'mlv-use-current')},updateMarkLabelsLineEndLastCheckboxChanged:function(eo,ep,eq){var er=bL.$0(eo);er.labelLineEndLast=eq;bL.$8(er,ep,'mlv-use-current')},updateMarkLabelsAllowLabelOverlapCheckboxChanged:function(eo,ep,eq){var er=bL.$0(eo);er.cullLabels=!eq;bL.$8(er,ep,'mlv-use-current')},$0:function(eo){var ep={markLabelsMode:eo.markLabelsMode,markLabelsScope:eo.markLabelsScope,fn:eo.fieldPickerCombo.fn,labelMarkMin:eo.labelMinimumValueIsChecked,labelMarkMax:eo.labelMaximumValueIsChecked,labelLineEndFirst:eo.labelStartOfLineIsChecked,labelLineEndLast:eo.labelEndOfLineIsChecked,cullLabels:!eo.allowMarksLabelsIsEnabled};return ep},setMarkSize:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-mark-size'},null);eq.commandParams={};eq.commandParams=bL.$1(eo);eq.commandParams['markScale']=ep.toString();if(tabBootstrap.FeatureFlags.isEnabled('RuntimeWebAuthoringIU')){var er=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_renderMode()==='render-mode-client')?'none':'immediately'),function(es){bL.$6(es,ep)},eq,null,null);tab.CommandController.SendCommand(er)}else{tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))}},$6:function(eo,ep){var eq=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);eq.updateRuntimeHandles(eo,4,bL.$9(function(er){er.DefaultSize=[ep]}))},resetTooltip:function(eo){var ep=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'reset-tooltip'},null);ep.commandParams={};ep.commandParams['worksheet']=tsConfig.current_sheet_name;if(ss.isValue(eo)&&eo.get_id()>0){ep.commandParams['paneSpec']=eo.get_id().toString()}tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(ep,'immediately',null,null))},getDefaultColor:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-default-color'},null);eq.commandParams=bL.$1(eo);tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'none',function(er){ep((_.isString(er)?tab.ColorModel.fromColorCode(er.toString()):null))},function(){ep(null)}))},setDefaultColor:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-default-color'},null);eq.commandParams=bL.$1(eo);eq.commandParams['defaultColor']=ep.toRgba255();if(tabBootstrap.FeatureFlags.isEnabled('RuntimeWebAuthoringIU')){var er=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_renderMode()==='render-mode-client')?'none':'immediately'),function(es){bL.$4(es,ep)},eq,null,null);tab.CommandController.SendCommand(er)}else{tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))}},$4:function(eo,ep){var eq=ep.toArgbInt();var er=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);er.updateRuntimeHandles(eo,2,bL.$9(function(es){es.DefaultMarkColor=[eq]}))},setSteppedColor:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);eq.commandParams=bL.$1(eo);eq.commandParams['steps']=ep.toString();tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))},reverseColor:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);eq.commandParams=bL.$1(eo);eq.commandParams['isReversed']=ep.toString();tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))},setTotalsInEncoding:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);eq.commandParams=bL.$1(eo);eq.commandParams['totalsInclusionValue']=ep.toString();tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))},setQuantColorPalette:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);eq.commandParams=bL.$1(eo);eq.commandParams['colorPaletteId']=ep;tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))},setCatColorPalette:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-categorical-color'},null);eq.commandParams=bL.$1(eo);eq.commandParams['colorPaletteId']=ep;var er=true;eq.commandParams['isInstance']=er.toString();tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))},setColorAlphaLevel:function(eo,ep){if(isNaN(ep)){return}var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-alpha-level'},null);eq.commandParams=bL.$1(eo);eq.commandParams['alphaLevel']=ep.toString();if(tabBootstrap.FeatureFlags.isEnabled('RuntimeWebAuthoringIU')){var er=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_renderMode()==='render-mode-client')?'none':'immediately'),function(es){bL.$3(es,ep,eo.get_paneDescriptorKeys())},eq,null,null);tab.CommandController.SendCommand(er)}else{tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))}},$3:function(eo,ep,eq){var er=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);var es=ss.trunc(ep);var et=function(eu){var ev=$.Deferred();var ew=new tab.RuePacker;for(var ex=0;ex<eq.length;ex++){var ey=eq[ex];ew.addInt32((new tab.LayoutInputStoreKeys).pdMarksData(ey).parameters().alpha().toString(),es)}tab.RuntimeWebModule.proxy.rueUpdateCommandHex(eu.get_VM(),tab.HexEncoder.encodeBufferToHex(ew.pack())).done(function(ez){ev.resolve(ez)}).fail(function(ez){ev.reject()});return ev};er.updateRuntimeHandles(eo,0,et)},setMarksBorderColor:function(eo,ep,eq,er){var es=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-border'},null);es.commandParams={};es.commandParams['worksheet']=tsConfig.current_sheet_name;es.commandParams['paneSpec']=eo.get_id().toString();es.commandParams['color']=ep.toString();es.commandParams['isAuto']=eq.toString();es.commandParams['isNone']=er.toString();tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(es,'immediately',null,null))},setMarksHaloColor:function(eo,ep,eq,er){var es=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-halo'},null);es.commandParams={};es.commandParams['worksheet']=tsConfig.current_sheet_name;es.commandParams['paneSpec']=eo.get_id().toString();es.commandParams['color']=ep.toString();es.commandParams['isAuto']=eq.toString();es.commandParams['isNone']=er.toString();tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(es,'immediately',null,null))},setReferenceLineConstantValue:function(eo,ep){var eq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-reference-line-constant-value'},null);eq.commandParams={};eq.commandParams['constantValue']=eo;eq.commandParams['referenceLineId']=ep;tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(eq,'immediately',null,null))},setDensityColorEncoding:function(eo,ep){var eq=new cq;eq.set_worksheet(tsConfig.current_sheet_name);eq.set_paneSpecId(eo.get_id());eq.set_colorPalette(ep);eq.invoke()},setDensityKernelSize:function(eo,ep){var eq=new cu;eq.set_worksheet(tsConfig.current_sheet_name);eq.set_paneSpecId(eo.get_id());eq.set_kernelSize(ep);eq.invoke()},setDensityIntensity:function(eo,ep){var eq=new cs;eq.set_worksheet(tsConfig.current_sheet_name);eq.set_paneSpecId(eo.get_id());eq.set_intensityPercentage(ep);eq.invoke()},getHeatmapColorPalettes:function(eo,ep){var eq=function(et){ep(et.colorPalettes)};var er=function(et){ep([])};var es=new ba;es.set_worksheet(tsConfig.current_sheet_name);es.set_paneSpecId(eo.get_id());es.invoke().then(eq,er)},$1:function(eo){var ep={};ep['worksheet']=tsConfig.current_sheet_name;ep['paneSpec']=eo.get_id().toString();return ep},$7:function(eo){if(ss.isNullOrUndefined(eo)){return null}return eo.toString()},$2:function(eo){return eo['PaneStyles']},$9:function(eo){return function(ep){var eq=$.Deferred();tab.RuntimeWebModule.proxy.marshallDatastoreSubKeyHex(ep.get_finalStore(),tab.HexEncoder.encodeBufferToHex(tab.Utf8TextEncoder.encode('PaneStyles'))).done(function(er){var es=bL.$2(er);eo(es);var et=tab.PaneStylesTableUtils.toRuePacker('PaneStylesData',es);tab.RuntimeWebModule.proxy.rueUpdateCommandHex(ep.get_VM(),tab.HexEncoder.encodeBufferToHex(et.pack())).done(function(eu){eq.resolve(eu)}).fail(function(eu){eq.reject()})}).fail(function(er){eq.reject()});return eq}}});var bM=global.tab.PresentationModeAffordanceSet=ss.mkType(a,'tab.PresentationModeAffordanceSet',function(){this.$1=null;tabBootstrap.DisableAffordanceSet.call(this,bM.$1);var eo=tab.ApplicationModel.get_instance();this.$1=eo.modelInstance(bN).call(eo);this.$1.add_changed(ss.mkdel(this,this.raiseAffordanceSetChanged))},{get_isSetEnabled:function(){return this.$1.get_isPresentationMode()}});var bN=global.tab.PresentationModeModel=ss.mkType(a,'tab.PresentationModeModel',function(eo){this.$2$1=null;tab.Model.call(this,eo,new tab.PresModelPathItem('',null));this.pm={isPresentationModeDoc:false}},{add_changed:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_changed:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_isPresentationMode:function(){return tsConfig.is_desktop&&this.pm.isPresentationModeDoc},get_notificationId:function(){return'doc:presentation-mode-changed-event'},onNotify:function(eo,ep){this.simpleSwapToUpdate(eo,this.$2$1,ep)}});var bO=global.tab.QuantitativeColorEditorDialogModel=ss.mkType(a,'tab.QuantitativeColorEditorDialogModel',function(){this.$2$1=null;this.$2$2=null;tab.Model.call(this,null,new tab.PresModelPathItem('doc:web-quantitative-color-dialog-event'.toString(),null))},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},add_stopNotifying:function(eo){this.$2$2=ss.delegateCombine(this.$2$2,eo)},remove_stopNotifying:function(eo){this.$2$2=ss.delegateRemove(this.$2$2,eo)},get_notificationId:function(){return'doc:web-quantitative-color-dialog-event'},get_componentID:function(){return this.$3().componentId},get_encodingFields:function(){return ss.arrayClone(this.$3().encodingFieldVector)},get_title:function(){return this.$3().fieldDisplayNames.join(' ')},get_selectedColorPalette:function(){return this.$3().selectedColorPalette},get_colorPalettes:function(){return ss.arrayClone(this.$3().colorPalettes)},get_minColor:function(){return this.$3().color1},get_maxColor:function(){return this.$3().color2},get_rampColors:function(){return this.$3().colorMap},get_isDiverging:function(){return this.$3().isColorDiverging},get_minValue:function(){return this.$3().minLabel},get_maxValue:function(){return this.$3().maxLabel},get_reverse:function(){return this.$3().isReversed},get_stepsEnabled:function(){return this.$3().isColorStepped},get_stepsValue:function(){return this.$3().steps},get_canUseFullColorRange:function(){return this.$3().canUseFullColorRange},get_useFullColorRange:function(){return this.$3().useFullColorRange},get_includeTotalsOptionEnabled:function(){return this.$3().areTotalsUsed},get_includeTotals:function(){return this.$3().totalsInclusionValue==='include-totals'},get_startChecked:function(){return this.$3().useStartValue},get_startValue:function(){return this.$3().formattedStart},get_centerChecked:function(){return this.$3().useCenterValue},get_centerValue:function(){return this.$3().formattedCenter},get_canEnableCenter:function(){return this.$3().canEnableCenter},get_endChecked:function(){return this.$3().useEndValue},get_endValue:function(){return this.$3().formattedEnd},get_canShowAdvancedSettings:function(){return this.$3().canShowAdvancedSettings},$3:function(){return this.pm.quantitativeColorDialog},detachNotifications:function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}},onNotify:function(eo,ep){this.swapPresModel(eo);this.raiseEvent(this.$2$1,ep)}});var bP=global.tab.QuickSortAscendingCmd=ss.mkType(a,'tab.QuickSortAscendingCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bP.cmdId},get_returnsResult:function(){return false}});var bQ=global.tab.QuickSortAscendingCmd$ResponseBuilder=ss.mkType(a,'tab.QuickSortAscendingCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bR=global.tab.QuickSortDescendingCmd=ss.mkType(a,'tab.QuickSortDescendingCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bR.cmdId},get_returnsResult:function(){return false}});var bS=global.tab.QuickSortDescendingCmd$ResponseBuilder=ss.mkType(a,'tab.QuickSortDescendingCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bT=global.tab.ReferenceBandModel=ss.mkType(a,'tab.ReferenceBandModel',function(eo){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;tab.Model.call(this,eo,new tab.PresModelPathItem('referenceLine'.toString(),null));this.pm={};this.set_fromFieldPickerCombo(new Y(this));this.set_toFieldPickerCombo(new Y(this));this.set_validFormulaTypes([]);this.set_validPairedFormulaTypes([])},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_refBandPresModel:function(){return this.pm},get_refLineId:function(){return this.get_refBandPresModel().refLineId||''},get_pairedId:function(){return this.get_refBandPresModel().refLinePairedId||''},get_visualId:function(){return this.get_refBandPresModel().visualIdPresModel},get_referenceParam:function(){return this.get_refBandPresModel().referenceParam||''},get_instantAnalyticsEnabled:function(){return this.get_refBandPresModel().enableInstantAnalytics},get_isInstantAnalyticsAllowed:function(){return this.get_refBandPresModel().instantAnalyticsAllowed},get_scopeType:function(){return ss.coalesce(this.get_refBandPresModel().referenceLineScopeType,'per-pane')},get_fromLabelType:function(){return ss.coalesce(this.get_refBandPresModel().referenceLineLabelType,'automatic')},get_fromTooltipType:function(){return ss.coalesce(this.get_refBandPresModel().referenceLineTooltipType,'automatic')},get_toLabelType:function(){return ss.coalesce(this.get_refBandPresModel().pairedReferenceLineLabelType,'automatic')},get_toTooltipType:function(){return ss.coalesce(this.get_refBandPresModel().pairedReferenceLineTooltipType,'automatic')},get_fromCustomLabel:function(){return this.get_refBandPresModel().label||''},get_fromCustomTooltip:function(){return this.get_refBandPresModel().tooltipText||''},get_toCustomLabel:function(){return this.get_refBandPresModel().pairedLabel||''},get_toCustomTooltip:function(){return this.get_refBandPresModel().pairedTooltipText||''},get_validFormulaTypes:function(){return this.$2$2},set_validFormulaTypes:function(eo){this.$2$2=eo},get_validPairedFormulaTypes:function(){return this.$2$3},set_validPairedFormulaTypes:function(eo){this.$2$3=eo},get_validLabelTypes:function(){var eo=[];if(ss.isNullOrUndefined(this.get_refBandPresModel().validReferenceLineLabelTypes)){return eo}var ep=this.get_refBandPresModel().validReferenceLineLabelTypes;for(var eq=0;eq<ep.length;eq++){var er=ep[eq];eo.push({key:er.referenceLineLabelType,value:er.displayText})}return eo},get_validTooltipTypes:function(){var eo=[];if(ss.isNullOrUndefined(this.get_refBandPresModel().validReferenceLineTooltipTypes)){return eo}var ep=this.get_refBandPresModel().validReferenceLineTooltipTypes;for(var eq=0;eq<ep.length;eq++){var er=ep[eq];eo.push({key:er.referenceLineTooltipType,value:er.displayText})}return eo},get_validCustomLabelTags:function(){var eo=[];if(ss.isNullOrUndefined(this.get_refBandPresModel().validReferenceLineCustomLabelTags)){return eo}var ep=this.get_refBandPresModel().validReferenceLineCustomLabelTags;for(var eq=0;eq<ep.length;eq++){var er=ep[eq];eo.push(er)}return eo},get_fromFormulaType:function(){return ss.coalesce(this.get_refBandPresModel().referenceLineFormulaType,'min')},get_toFormulaType:function(){return ss.coalesce(this.get_refBandPresModel().pairedReferenceLineFormulaType,'max')},get_fromFieldPickerCombo:function(){return this.$2$4},set_fromFieldPickerCombo:function(eo){this.$2$4=eo},get_toFieldPickerCombo:function(){return this.$2$5},set_toFieldPickerCombo:function(eo){this.$2$5=eo},get_fromConstantValue:function(){return this.get_refBandPresModel().constantValue||''},get_toConstantValue:function(){return this.get_refBandPresModel().pairedConstantValue||''},get_fromFormattedConstantValue:function(){return this.get_refBandPresModel().formattedValue||''},get_toFormattedConstantValue:function(){return this.get_refBandPresModel().pairedFormattedValue||''},get_isParameterSelectedOnTo:function(){return this.get_refBandPresModel().isParameterSelectedOnTo},get_isParameterSelectedOnFrom:function(){return this.get_refBandPresModel().isParameterSelectedOnFrom},$3:function(eo){var ep=[];if(ss.isNullOrUndefined(eo)){return ep}return ep.concat.apply(ep,eo)},update:function(eo,ep){if(ss.isValue(eo)){this.get_fromFieldPickerCombo().update(eo.fieldPickerCombo,ep);this.get_toFieldPickerCombo().update(eo.pairedFieldPickerCombo,ep);this.set_validFormulaTypes(this.$3(eo.validReferenceLineFormulaTypes));this.set_validPairedFormulaTypes(this.$3(eo.validReferenceLinePairedFormulaTypes))}this.simpleSwapToUpdate(eo,this.$2$1,ep)}});var bU=global.tab.ReferenceLineEditorModel=ss.mkType(a,'tab.ReferenceLineEditorModel',function(eo){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;tab.Model.call(this,eo,new tab.PresModelPathItem('referenceLineEditor'.toString(),null));this.pm={};this.set_activeModel(null);this.set_activePane('line');this.set_lineModel(new bV(this));this.set_bandModel(new bT(this));this.set_distributionModel(new J(this))},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_activePane:function(){return this.$2$2},set_activePane:function(eo){this.$2$2=eo},get_activeModel:function(){return this.$2$3},set_activeModel:function(eo){this.$2$3=eo},get_lineModel:function(){return this.$2$4},set_lineModel:function(eo){this.$2$4=eo},get_bandModel:function(){return this.$2$5},set_bandModel:function(eo){this.$2$5=eo},get_distributionModel:function(){return this.$2$6},set_distributionModel:function(eo){this.$2$6=eo},get_editorPresModel:function(){return this.pm},get_isEditing:function(){return ss.isValue(this.get_activeModel())},get_notificationId:function(){return'doc:update-ref-line-dialog-event'},onNotify:function(eo,ep){this.update(eo,ep)},update:function(eo,ep){this.swapAndCopyPresModel(eo);this.set_activePane(ss.coalesce(eo.reflineFormulaGroup,this.get_activePane()));switch(this.get_activePane()){case'none':{this.set_activeModel(null);break}case'line':{this.set_activeModel(this.get_lineModel());break}case'band':{this.set_activeModel(this.get_bandModel());break}case'distribution':{this.set_activeModel(this.get_distributionModel());break}default:{break}}this.get_lineModel().update(eo.editReferenceLine,ep);this.get_bandModel().update(eo.editReferenceBand,ep);this.get_distributionModel().update(eo.editDistribution,ep);this.raiseEvent(this.$2$1,ep)}});var bV=global.tab.ReferenceLineModel=ss.mkType(a,'tab.ReferenceLineModel',function(eo){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;tab.Model.call(this,eo,new tab.PresModelPathItem('referenceLine'.toString(),null));this.pm={};this.set_fieldPickerCombo(new Y(this));this.set_confidenceLevelCombo(new tab.EditValueWidgetModel(this,'confidenceLevelCombo'))},{add_modelUpdated:function(eo){this.$2$1=ss.delegateCombine(this.$2$1,eo)},remove_modelUpdated:function(eo){this.$2$1=ss.delegateRemove(this.$2$1,eo)},get_refLinePresModel:function(){return this.pm},get_refLineId:function(){return this.get_refLinePresModel().refLineId||''},get_visualId:function(){return this.get_refLinePresModel().visualIdPresModel},get_scopeType:function(){return ss.coalesce(this.get_refLinePresModel().referenceLineScopeType,'per-pane')},get_labelType:function(){return ss.coalesce(this.get_refLinePresModel().referenceLineLabelType,'automatic')},get_tooltipType:function(){return ss.coalesce(this.get_refLinePresModel().referenceLineTooltipType,'automatic')},get_customLabel:function(){return this.get_refLinePresModel().label||''},get_customTooltip:function(){return this.get_refLinePresModel().tooltipText||''},get_formulaType:function(){return ss.coalesce(this.get_refLinePresModel().referenceLineFormulaType,'average')},get_validFormulaTypes:function(){return this.$2$2},set_validFormulaTypes:function(eo){this.$2$2=eo},get_validLabelTypes:function(){var eo=[];if(ss.isNullOrUndefined(this.get_refLinePresModel().validReferenceLineLabelTypes)){return eo}var ep=this.get_refLinePresModel().validReferenceLineLabelTypes;for(var eq=0;eq<ep.length;eq++){var er=ep[eq];eo.push({key:er.referenceLineLabelType,value:er.displayText})}return eo},get_validTooltipTypes:function(){var eo=[];if(ss.isNullOrUndefined(this.get_refLinePresModel().validReferenceLineTooltipTypes)){return eo}var ep=this.get_refLinePresModel().validReferenceLineTooltipTypes;for(var eq=0;eq<ep.length;eq++){var er=ep[eq];eo.push({key:er.referenceLineTooltipType,value:er.displayText})}return eo},get_validCustomLabelTags:function(){var eo=[];if(ss.isNullOrUndefined(this.get_refLinePresModel().validReferenceLineCustomLabelTags)){return eo}var ep=this.get_refLinePresModel().validReferenceLineCustomLabelTags;for(var eq=0;eq<ep.length;eq++){var er=ep[eq];eo.push(er)}return eo},get_fieldPickerCombo:function(){return this.$2$3},set_fieldPickerCombo:function(eo){this.$2$3=eo},get_confidenceLevelCombo:function(){return this.$2$4},set_confidenceLevelCombo:function(eo){this.$2$4=eo},get_formattedConstantValue:function(){return this.get_refLinePresModel().formattedValue||''},get_isConfidenceIntervalAllowed:function(){return this.get_refLinePresModel().confidenceIntervalAllowed},get_isInstantAnalyticsAllowed:function(){return this.get_refLinePresModel().instantAnalyticsAllowed},get_confidenceIntervalSelectedState:function(){return this.get_refLinePresModel().confidenceIntervalSelectedState},get_confidenceIntervalStates:function(){var eo=[];if(ss.isNullOrUndefined(this.get_refLinePresModel().translatedConfidenceIntervalStates)){return eo}var ep=this.get_refLinePresModel().translatedConfidenceIntervalStates;for(var eq=0;eq<ep.length;eq++){var er=ep[eq];eo.push({key:er.confidenceIntervalState,value:er.displayText})}return eo},get_instantAnalyticsEnabled:function(){return this.get_refLinePresModel().enableInstantAnalytics},get_isParameterSelected:function(){return this.get_refLinePresModel().isParameterSelected},$3:function(eo){var ep=[];if(ss.isNullOrUndefined(eo)){return ep}return ep.concat.apply(ep,eo)},update:function(eo,ep){if(ss.isValue(eo)){this.get_fieldPickerCombo().update(eo.fieldPickerCombo,ep);this.get_confidenceLevelCombo().update(eo.confidenceLevelCombo,ep);this.set_validFormulaTypes(this.$3(eo.validReferenceLineFormulaTypes))}this.simpleSwapToUpdate(eo,this.$2$1,ep)}});var bW=global.tab.ReleaseComponentCmd=ss.mkType(a,'tab.ReleaseComponentCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bW.cmdId},get_componentUUID:function(){return this.c['uuid']},set_componentUUID:function(eo){this.c['uuid']=eo},get_componentID:function(){return this.c['componentId']},set_componentID:function(eo){this.c['componentId']=eo|0},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'release-component'},this.c))}});var bX=global.tab.ReleaseComponentCmd$ResponseBuilder=ss.mkType(a,'tab.ReleaseComponentCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var bY=global.tab.ReplaceZoneCmd=ss.mkType(a,'tab.ReplaceZoneCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bY.cmdId},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_deleteOrphans:function(){return this.c['deleteOrphans']},set_deleteOrphans:function(eo){this.c['deleteOrphans']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'replace-zone'},this.c))}});var bZ=global.tab.ReplaceZoneCmd$ResponseBuilder=ss.mkType(a,'tab.ReplaceZoneCmd$ResponseBuilder',function(eo){this.$1={};this.$1['zoneId']=eo},{get_newZoneID:function(){return this.$1['zoneId']},set_newZoneID:function(eo){this.$1['zoneId']=eo},withNewZoneID:function(eo){this.set_newZoneID(eo);return this},build:function(){return this.$1},$0:function(){}});var ca=global.tab.ResetCategoricalColorMapCmd=ss.mkType(a,'tab.ResetCategoricalColorMapCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ca.cmdId},get_controllerID:function(){return this.c['componentId']},set_controllerID:function(eo){this.c['componentId']=eo|0},get_vizID:function(){return this.c['visualIdPresModel']},set_vizID:function(eo){this.c['visualIdPresModel']=eo},get_applyColors:function(){return this.c['applyColors']},set_applyColors:function(eo){this.c['applyColors']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'reset-categorical-color-map'},this.c))}});var cb=global.tab.ResetCategoricalColorMapCmd$ResponseBuilder=ss.mkType(a,'tab.ResetCategoricalColorMapCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cc=global.tab.ResizeActiveZoneCmd=ss.mkType(a,'tab.ResizeActiveZoneCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cc.cmdId},get_returnsResult:function(){return false},get_zoneRectangle:function(){return this.c['zoneEdge']},set_zoneRectangle:function(eo){this.c['zoneEdge']=eo}});var cd=global.tab.ResizeActiveZoneCmd$ResponseBuilder=ss.mkType(a,'tab.ResizeActiveZoneCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var ce=global.tab.RevertToPublishedCmd=ss.mkType(a,'tab.RevertToPublishedCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ce.cmdId},get_returnsResult:function(){return false}});var cf=global.tab.RevertToPublishedCmd$ResponseBuilder=ss.mkType(a,'tab.RevertToPublishedCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cg=global.tab.SaveAsCmd=ss.mkType(a,'tab.SaveAsCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cg.cmdId},get_returnsResult:function(){return false}});var ch=global.tab.SaveAsCmd$ResponseBuilder=ss.mkType(a,'tab.SaveAsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var ci=global.tab.SaveCmd=ss.mkType(a,'tab.SaveCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ci.cmdId},get_returnsResult:function(){return false}});var cj=global.tab.SaveCmd$ResponseBuilder=ss.mkType(a,'tab.SaveCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var ck=global.tab.SaveOrSaveAsCmd=ss.mkType(a,'tab.SaveOrSaveAsCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ck.cmdId},get_returnsResult:function(){return false}});var cl=global.tab.SaveOrSaveAsCmd$ResponseBuilder=ss.mkType(a,'tab.SaveOrSaveAsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cm=global.tab.SelectZoneParentCmd=ss.mkType(a,'tab.SelectZoneParentCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cm.cmdId},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_zoneIDs:function(){return this.c['zoneIds']},set_zoneIDs:function(eo){this.c['zoneIds']=eo},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'select-zone-parent'},this.c))}});var cn=global.tab.SelectZoneParentCmd$ResponseBuilder=ss.mkType(a,'tab.SelectZoneParentCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var co=global.tab.SetCategoricalLegendItemColorCmd=ss.mkType(a,'tab.SetCategoricalLegendItemColorCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return co.cmdId},get_controllerID:function(){return this.c['componentId']},set_controllerID:function(eo){this.c['componentId']=eo|0},get_color:function(){return this.c['color']},set_color:function(eo){this.c['color']=eo},get_legendIndex:function(){return this.c['itemIndex']},set_legendIndex:function(eo){this.c['itemIndex']=eo|0},get_vizID:function(){return this.c['visualIdPresModel']},set_vizID:function(eo){this.c['visualIdPresModel']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-categorical-legend-item-color'},this.c))}});var cp=global.tab.SetCategoricalLegendItemColorCmd$ResponseBuilder=ss.mkType(a,'tab.SetCategoricalLegendItemColorCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cq=global.tab.SetDensityColorEncodingCmd=ss.mkType(a,'tab.SetDensityColorEncodingCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cq.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_paneSpecId:function(){return this.c['paneSpec']},set_paneSpecId:function(eo){this.c['paneSpec']=eo|0},get_colorPalette:function(){return this.c['densityColorPalette']},set_colorPalette:function(eo){this.c['densityColorPalette']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-density-color-encoding'},this.c))}});var cr=global.tab.SetDensityColorEncodingCmd$ResponseBuilder=ss.mkType(a,'tab.SetDensityColorEncodingCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cs=global.tab.SetDensityIntensityCmd=ss.mkType(a,'tab.SetDensityIntensityCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cs.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_paneSpecId:function(){return this.c['paneSpec']},set_paneSpecId:function(eo){this.c['paneSpec']=eo|0},get_intensityPercentage:function(){return this.c['densityIntensityPercentage']},set_intensityPercentage:function(eo){this.c['densityIntensityPercentage']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-density-intensity'},this.c))}});var ct=global.tab.SetDensityIntensityCmd$ResponseBuilder=ss.mkType(a,'tab.SetDensityIntensityCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cu=global.tab.SetDensityKernelSizeCmd=ss.mkType(a,'tab.SetDensityKernelSizeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cu.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_paneSpecId:function(){return this.c['paneSpec']},set_paneSpecId:function(eo){this.c['paneSpec']=eo|0},get_kernelSize:function(){return this.c['densityKernelSize']},set_kernelSize:function(eo){this.c['densityKernelSize']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-density-kernel-size'},this.c))}});var cv=global.tab.SetDensityKernelSizeCmd$ResponseBuilder=ss.mkType(a,'tab.SetDensityKernelSizeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cw=global.tab.SetSankeyColorPaletteCmd=ss.mkType(a,'tab.SetSankeyColorPaletteCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cw.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_marksSpec:function(){return this.c['paneSpec']},set_marksSpec:function(eo){this.c['paneSpec']=eo|0},get_colorPalette:function(){return this.c['colorPaletteId']},set_colorPalette:function(eo){this.c['colorPaletteId']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-sankey-color-palette'},this.c))}});var cx=global.tab.SetSankeyColorPaletteCmd$ResponseBuilder=ss.mkType(a,'tab.SetSankeyColorPaletteCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cy=global.tab.SetSelectedLegendItemsCmd=ss.mkType(a,'tab.SetSelectedLegendItemsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cy.cmdId},get_controllerID:function(){return this.c['componentId']},set_controllerID:function(eo){this.c['componentId']=eo|0},get_legendIndexes:function(){return this.c['itemIndices']},set_legendIndexes:function(eo){this.c['itemIndices']=eo},get_vizID:function(){return this.c['visualIdPresModel']},set_vizID:function(eo){this.c['visualIdPresModel']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-selected-legend-items'},this.c))}});var cz=global.tab.SetSelectedLegendItemsCmd$ResponseBuilder=ss.mkType(a,'tab.SetSelectedLegendItemsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cA=global.tab.SetSidePaneExpansionStateCmd=ss.mkType(a,'tab.SetSidePaneExpansionStateCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cA.cmdId},get_sidePaneExpansionState:function(){return this.c['sidePaneExpansionState']},set_sidePaneExpansionState:function(eo){this.c['sidePaneExpansionState']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-side-pane-expansion-state'},this.c))}});var cB=global.tab.SetSidePaneExpansionStateCmd$ResponseBuilder=ss.mkType(a,'tab.SetSidePaneExpansionStateCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cC=global.tab.SetStoryPointCaptionWidthAndFlipboardNavHeightCmd=ss.mkType(a,'tab.SetStoryPointCaptionWidthAndFlipboardNavHeightCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cC.cmdId},get_storyboard:function(){return this.c['storyboard']},set_storyboard:function(eo){this.c['storyboard']=eo},get_width:function(){return this.c['w']},set_width:function(eo){this.c['w']=eo|0},get_height:function(){return this.c['h']},set_height:function(eo){this.c['h']=eo|0},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-story-point-caption-width-and-flipboard-nav-height'},this.c))}});var cD=global.tab.SetStoryPointCaptionWidthAndFlipboardNavHeightCmd$ResponseBuilder=ss.mkType(a,'tab.SetStoryPointCaptionWidthAndFlipboardNavHeightCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cE=global.tab.SetZoneIsFixedSizeCmd=ss.mkType(a,'tab.SetZoneIsFixedSizeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cE.cmdId},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_zoneIDs:function(){return this.c['zoneIds']},set_zoneIDs:function(eo){this.c['zoneIds']=eo},get_isSetFixedSize:function(){return this.c['state']},set_isSetFixedSize:function(eo){this.c['state']=eo},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-zone-is-fixed-size'},this.c))}});var cF=global.tab.SetZoneIsFixedSizeCmd$ResponseBuilder=ss.mkType(a,'tab.SetZoneIsFixedSizeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cG=global.tab.SetZoneStyleCmd=ss.mkType(a,'tab.SetZoneStyleCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cG.cmdId},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0},get_zoneIDs:function(){return this.c['zoneIds']},set_zoneIDs:function(eo){this.c['zoneIds']=eo},get_zoneStyle:function(){return this.c['styledBox']},set_zoneStyle:function(eo){this.c['styledBox']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-zone-style'},this.c))}});var cH=global.tab.SetZoneStyleCmd$ResponseBuilder=ss.mkType(a,'tab.SetZoneStyleCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cI=global.tab.SheetThumbnailCache=ss.mkType(a,'tab.SheetThumbnailCache',function(){this.$1=null;this.$1=new(ss.makeGenericType(tab.LruCache$2,[String,String]))(75)},{hasThumbnail:function(eo){return this.$1.has(eo)},getThumbnail:function(eo){var ep=$.Deferred();if(this.hasThumbnail(eo)){return ep.resolve(this.$1.get(eo))}tab.DashboardClientCommands.getThumbnailImage(eo).done(ss.mkdel(this,function(eq){this.$0(eq,eo,ep)})).fail(function(){ep.reject()});return ep.promise()},delete$1:function(eo){if(this.hasThumbnail(eo)){this.$1.delete$1(eo)}},$0:function(eo,ep,eq){var er=ss.coalesce(eo.image,'');this.$1.add(ep,er);eq.resolve(er)},clear:function(){if(ss.isValue(this.$1)){this.$1.clear()}}});var cJ=global.tab.ShelfClientCommands=ss.mkType(a,'tab.ShelfClientCommands',null,null,{$b:function(){return tab.Logger.getLoggerWithName(ss.getTypeName(cJ)+tsConfig.layoutid)},setItemEncodingType:function(eo,ep,eq){var er={};tab.CommandUtils.addVisualIdToCommand(er,cJ.$6());er['paneSpec']=eo.get_paneId().toString();er['position']=ss.indexOf(eo.get_pills(),ep).toString();er['encodingTypePresModel']=eq;er['shelfType']=eo.get_shelfType().toString();var es=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-item-encoding-type'},er);tab.ServerCommands.executeServerCommand(es,'immediately',null,null)},startDrag:function(eo,ep,eq,er,es){var et=$.Deferred();var eu={};eu['worksheet']=tsConfig.current_sheet_name;eu['isRightDrag']=JSON.stringify(er);if(ss.isValue(eq)){eu['paneSpec']=JSON.stringify(eq)}eu['dragSource']=es;cJ.$4(eu,eo,ep);var ev=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-drag-pres-model'},eu);tab.ServerCommands.executeServerCommand(ev,'none',function(ew){et.resolve(ew)},function(ew){et.reject()});return et},executeDragToShowMe:function(eo,ep,eq){var er=$.Deferred();var es={commandNamespace:{ns:'tabdoc',cmd:'drop-on-showme'}.ns,commandName:{ns:'tabdoc',cmd:'drop-on-showme'}.cmd,commandParams:{}};cJ.$4(es.commandParams,ep.get_allFieldModels(),null);es.commandParams['visualIdPresModel']=JSON.stringify(eo);es.commandParams['shelfDropContext']='none';es.commandParams['isCopy']=ep.isCopyDrag;es.commandParams['isDeadDrop']=false;es.commandParams['dragSource']=(ep.isFromDataSchemaPane?'drag-drop-schema':'drag-drop-shelf');es.commandParams['dropTarget']='drag-drop-viz';es.commandParams['dragDescription']='';es.commandParams['shelfDragSourcePosition']=cJ.$1(ep);es.commandParams['shelfDropTargetPosition']=cJ.$3();es.commandParams['isShiftDrag']=ep.isShiftDrag;es.commandParams['worksheet']=tsConfig.current_sheet_name;es.commandParams['dashboard']=tab.ModelUtils.findContentDashboard(null).pm.sheetPath;es.commandParams['isRightDrag']=false;if(ss.isValue(eq)){es.commandParams['paneSpec']=ss.unbox(eq)}var et=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-prepare'},es.commandParams);tab.ServerCommands.executeServerCommand(et,'immediately',function(eu){tab.ServerCommands.executeServerCommand(es,'immediately',function(ev){er.resolve(ev)},function(ev){er.reject()})},function(eu){})},$3:function(){return{shelfType:'show-me-shelf',shelfPosIndex:0,shelfDropAction:'replace',isFolded:false,isOverlay:true}},$1:function(eo){var ep={shelfPosIndex:(eo.isFromDataSchemaPane?-1:0),shelfDropAction:(eo.isFromDataSchemaPane?'insert':'replace')};if(eo.isFromDataSchemaPane){ep.shelfType='none-shelf'}return ep},getShelfItemContextMenu:function(eo,ep,eq){var er=new j;er.set_shelfItemID(eo);er.set_shelfType(ep);er.set_paneSpecId(eq);er.set_mobile(tsConfig.is_mobile);return er.invoke()},drillOnPill:function(eo,ep,eq){var er={};er['worksheet']=tsConfig.current_sheet_name;er['shelfType']=eo.get_shelfType().toString();er['position']=eq.toString();er['drillDown']=JSON.stringify(ep.get_shouldDrill());if(eo.get_shelfType()==='encoding-shelf'){er['paneSpec']=eo.get_paneId().toString()}var es=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'level-drill-up-down'},er);tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(es,'immediately',null,null))},removeShelfPill:function(eo,ep){var eq=cJ.$2();eq.commandName={ns:'tabdoc',cmd:'drop-nowhere'}.cmd;var er=eq.commandParams;er['paneSpec']=eo.get_paneId();er['dragDescription']=eo.get_shelfType().toString();cJ.$8(er,ep.get_column(),ep.get_encodingType());er['shelfSelection']=[ep.pm.shelfItemId];er['dragSource']='drag-drop-shelf';var es=er['shelfDragSourcePosition'];es.shelfType=eo.get_shelfType();es.shelfPosIndex=ss.indexOf(eo.get_pills(),ep);es.shelfDropAction='replace';var et=new tab.ClientCommand('immediately',function(eu){cJ.$7(eu.makeMutablePresModel(eo,false),ep.pm)},eq,null,null);tab.CommandController.SendCommand(et)},replaceShelfPill:function(eo,ep,eq,er,es,et){var eu=ss.indexOf(eo.get_pills(),ep);var ev=es.shelfPosIndex;var ew=cJ.$2();var ex=ew.commandParams;cJ.$8(ex,ep.get_column(),ep.get_encodingType());ex['shelfSelection']=[ep.pm.shelfItemId];ex['dragSource']='drag-drop-shelf';var ey=ex['shelfDragSourcePosition'];ey.shelfType=eo.get_shelfType();ey.shelfPosIndex=eu;ey.shelfDropAction='replace';ex['paneSpec']=eq.get_paneId();ex['dropTarget']='drag-drop-shelf';if(ss.isNullOrUndefined(es)){es=ex['shelfDropTargetPosition'];es.shelfType=eq.get_shelfType();es.shelfPosIndex=ev;es.encodingTypePresModel=er.get_encodingType();es.shelfDropAction='replace'}else{ex['shelfDropTargetPosition']=es}if(et){ex['isCopy']=cJ.$c}var ez=new b(ss.mkdel(this,function(eA){if(!et){var eB=eA.makeMutablePresModel(eo,false);cJ.$7(eB,ep.pm)}var eC=eA.makeMutablePresModel(eq,false);cJ.$7(eC,er.pm);var eD={displayText:ep.pm.displayText,fn:ep.pm.fn,encodingTypePresModel:er.get_encodingType(),encodingUiItems:er.pm.encodingUiItems};cJ.$0(eC,eD,es,0)}),ew,eq.get_shelfType(),false);tab.CommandController.SendCommand(ez)},moveShelfPill:function(eo,ep,eq,er,es){var et=cJ.$2();var eu=et.commandParams;eu['shelfSelection']=[eq.pm.shelfItemId];cJ.$8(eu,eq.get_column(),eq.get_encodingType());if(es){eu['isCopy']=cJ.$c}eu['dragSource']='drag-drop-shelf';var ev=eu['shelfDragSourcePosition'];ev.shelfType=eo.get_shelfType();ev.shelfPosIndex=ss.indexOf(eo.get_pills(),eq);ev.shelfDropAction='replace';if(ss.isNullOrUndefined(er)){er=eu['shelfDropTargetPosition'];er.shelfType=ep.get_shelfType();er.shelfPosIndex=0;er.shelfDropAction=(ss.referenceEquals(eo,ep)?'swap':'insert')}eu['dropTarget']='drag-drop-shelf';eu['paneSpec']=ep.get_paneId();eu['shelfDropTargetPosition']=er;var ew=new b(ss.mkdel(this,function(ex){var ey={displayText:eq.pm.displayText,fn:eq.pm.fn,encodingTypePresModel:er.encodingTypePresModel};var ez=ex.makeMutablePresModel(ep,false);cJ.$0(ez,ey,er,0);if(!es){var eA=ex.makeMutablePresModel(eo,false);cJ.$7(eA,eq.pm)}}),et,ep.get_shelfType(),false);tab.CommandController.SendCommand(ew)},movePillToEncoding:function(eo,ep,eq,er,es,et){var eu=cJ.$2();var ev=eu.commandParams;ev['shelfSelection']=[er.pm.shelfItemId];ev['dragSource']='drag-drop-shelf';var ew=ev['shelfDragSourcePosition'];ew.shelfType=eo.get_shelfType();ew.shelfPosIndex=ss.indexOf(eo.get_pills(),er);ew.encodingTypePresModel=er.get_encodingType();ew.shelfDropAction='replace';ew.isOverride=false;cJ.$8(ev,er.get_column(),er.get_encodingType());if(es){ev['isCopy']=cJ.$c}if(ss.isNullOrUndefined(et)){et=ev['shelfDropTargetPosition'];et.shelfType='encoding-shelf';et.shelfPosIndex=0;et.shelfDropAction='insert';et.encodingTypePresModel=eq;et.isOverride=true}ev['dropTarget']='drag-drop-shelf';ev['paneSpec']=ep.get_paneId();ev['shelfDropTargetPosition']=JSON.stringify(et);var ex=new b(ss.mkdel(this,function(ey){if(!es){var ez=ey.makeMutablePresModel(eo,false);cJ.$7(ez,er.pm)}var eA={displayText:er.get_column().get_description(),fn:er.get_column().get_globalName(),encodingTypePresModel:eq,encodingUiItems:er.pm.encodingUiItems};var eB=ey.makeMutablePresModel(ep,false);cJ.$0(eB,eA,et,0)}),eu,ep.get_shelfType(),false);tab.CommandController.SendCommand(ex)},addEncodingFields:function(eo,ep,eq,er,es,et,eu){var ev=cJ.$2();var ew=ev.commandParams;if(ss.isNullOrUndefined(er)){er=ew['shelfDropTargetPosition'];er.shelfType='encoding-shelf';er.shelfPosIndex=0;er.shelfDropAction='insert';er.encodingTypePresModel=eq}if(es){ew['isShiftDrag']=cJ.$c}if(et){ew['isRightDrag']=cJ.$c}cJ.$4(ew,ep,null);ew['paneSpec']=eo.get_paneId();ew['dragSource']='drag-drop-schema';ew['dropTarget']='drag-drop-shelf';ew['shelfDropTargetPosition']=JSON.stringify(er);var ex=new b(ss.mkdel(this,function(ey){var ez=ey.makeMutablePresModel(eo,false);for(var eA=0;eA<ep.length;eA++){var eB=ep[eA];var eC={displayText:eB.get_description(),fn:eB.get_globalName(),encodingTypePresModel:eq,encodingUiItems:[{}]};eC.encodingUiItems[0].isVisible=true;eC.encodingUiItems[0].isEnabled=true;eC.encodingUiItems[0].encodingTypePresModel=eC.encodingTypePresModel;cJ.$0(ez,eC,er,0)}}),ev,eo.get_shelfType(),eu);tab.CommandController.SendCommand(ex)},getFieldAggregationsForDrop:function(eo,ep,eq,er){var es=new tab.GetDropFieldAggregationsCmd;es.set_dropShelfType(ep);es.set_fieldName(eo);es.set_uiBlocking('immediately');var et=es;et.invoke().done(function(eu){if(ss.isValue(eu.filterSelectMeasure)){eq(eu.filterSelectMeasure)}else{er()}}).fail(er)},launchFilterDialog:function(eo,ep,eq,er,es,et){var eu=new bu;eu.set_fieldName(eo);eu.set_forceUserToChoose(es);eu.set_uiBlocking('immediately');eu.set_sourceDragType(ep);eu.set_targetDropPosition(eq);eu.set_isCopy(et);var ev=eu;if(ss.isValue(er)){ev.set_sourceDragPosition(er)}ev.invoke()},addShelfField:function(eo,ep,eq,er,es,et){var eu=cJ.$2();var ev=eu.commandParams;if(ss.isNullOrUndefined(er)){er=ev['shelfDropTargetPosition'];er.shelfType=eo.get_shelfType();er.shelfPosIndex=0;er.shelfDropAction='insert';er.encodingTypePresModel=eq}if(es){ev['isRightDrag']=cJ.$c}cJ.$4(ev,ep,null);ev['paneSpec']=eo.get_paneId();ev['dragSource']='drag-drop-schema';ev['dropTarget']='drag-drop-shelf';ev['shelfDropTargetPosition']=er;if(ss.isValue(eq)&&eq.encodingType!=='invalid-encoding'){ev['encodingTypePresModel']=eq}var ew=new b(ss.mkdel(this,function(ex){var ey=0;for(var ez=0;ez<ep.length;ez++){var eA=ep[ez];var eB={displayText:eA.get_description(),fn:eA.get_globalName(),encodingTypePresModel:((eo.get_shelfType()==='encoding-shelf'&&!tab.EncodingTypeUtils.isValid(eq))?tab.EncodingTypeUtils.create('level-of-detail-encoding'):eq)};var eC=ex.makeMutablePresModel(eo,false);cJ.$0(eC,eB,er,ey);ey++}}),eu,eo.get_shelfType(),et);tab.CommandController.SendCommand(ew)},replaceShelfPillWithField:function(eo,ep,eq,er,es){var et=cJ.$2();var eu=et.commandParams;if(ss.isNullOrUndefined(er)){er=eu['shelfDropTargetPosition'];er.shelfType=eo.get_shelfType();er.shelfPosIndex=ss.indexOf(eo.get_pills(),ep);er.shelfDropAction='replace';er.encodingTypePresModel=ep.get_encodingType()}cJ.$4(eu,eq,null);eu['paneSpec']=eo.get_paneId();eu['shelfSelection']=[];eu['dragSource']='drag-drop-schema';eu['dropTarget']='drag-drop-shelf';eu['shelfDropTargetPosition']=er;var ev=new b(ss.mkdel(this,function(ew){var ex=ew.makeMutablePresModel(eo,false);var ey=0;for(var ez=0;ez<eq.length;ez++){var eA=eq[ez];var eB={displayText:eA.get_description(),fn:eA.get_globalName(),encodingTypePresModel:ep.get_encodingType(),encodingUiItems:ep.pm.encodingUiItems};cJ.$0(ex,eB,er,ey);ey++}}),et,eo.get_shelfType(),es);tab.CommandController.SendCommand(ev)},setCommandParams:function(eo,ep){tab.CommandUtils.addVisualIdToCommand(ep,cJ.$6());var eq=new ss.ObjectEnumerator(ep);try{while(eq.moveNext()){var er=eq.current();var es=er.value;if(ss.isNullOrUndefined(es)||_.isString(es)||_.isBoolean(es)||_.isNumber(es)){}else if(_.isObject(es)||_.isArray(es)){ep[er.key]=JSON.stringify(es)}}}finally{eq.dispose()}eo.commandParams=ep},$2:function(){var eo={};eo['dragSource']='drag-drop-none';eo['dropTarget']='drag-drop-none';eo['dragDescription']='';eo['isCopy']=false;eo['isDeadDrop']=false;eo['isRightDrag']=false;eo['shelfDropContext']='none';eo['shelfDragSourcePosition']={};eo['shelfDropTargetPosition']={};eo['checkRelatability']=!/^\s*true\s*$/i.test(window.localStorage.getItem('SuppressCardinalityWarning'));return tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-on-shelf'},eo)},$5:function(eo,ep){var eq={fn:eo.get_globalName()};if(ss.isValue(ep)&&tab.EncodingTypeUtils.isValid(ep)){eq.encodingTypePresModel=ep}return eq},$8:function(eo,ep,eq){eo['fieldEncodings']=JSON.stringify([cJ.$5(ep,eq)])},$4:function(eo,ep,eq){if(ss.isNullOrUndefined(eq)){eq={encodingType:'invalid-encoding'}}var er=_.map(ep,function(es){return cJ.$5(es,eq)});eo['fieldEncodings']=JSON.stringify(er)},$0:function(eo,ep,eq,er){var es=((er>0)?'insert':(eq.shelfDropAction||'insert'));switch(es){case'insert':{ss.insert(cJ.$9(eo.shelfItems),eq.shelfPosIndex+er,ep);break}case'replace':{eo.shelfItems[eq.shelfPosIndex]=ep;break}case'replace-all':{eo.shelfItems[eq.shelfPosIndex]=ep;eo.shelfItems=_.filter(eo.shelfItems,function(et){return!tab.EncodingTypeUtils.isEqual(et.encodingTypePresModel,eq.encodingTypePresModel)||ss.referenceEquals(et,ep)});break}}},$7:function(eo,ep){eo.shelfItems=_.filter(eo.shelfItems,function(eq){return!_.isEqual(eq,ep)})},$9:function(eo){return eo},$6:function(){return tab.ModelUtils.getVisualId(tsConfig.current_sheet_name)}});var cK=global.tab.TableCalcChangeTypeCmd=ss.mkType(a,'tab.TableCalcChangeTypeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cK.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_newCalcType:function(){return this.c['tableCalcType']},set_newCalcType:function(eo){this.c['tableCalcType']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-change-type'},this.c))}});var cL=global.tab.TableCalcChangeTypeCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcChangeTypeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cM=global.tab.TableCalcCloseCmd=ss.mkType(a,'tab.TableCalcCloseCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cM.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-close'},this.c))}});var cN=global.tab.TableCalcCloseCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcCloseCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cO=global.tab.TableCalcDialogActivatedCmd=ss.mkType(a,'tab.TableCalcDialogActivatedCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cO.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-dialog-activated'},this.c))}});var cP=global.tab.TableCalcDialogActivatedCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcDialogActivatedCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cQ=global.tab.TableCalcEditNestedTableCalcCmd=ss.mkType(a,'tab.TableCalcEditNestedTableCalcCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cQ.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-edit-nested'},this.c))}});var cR=global.tab.TableCalcEditNestedTableCalcCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcEditNestedTableCalcCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cS=global.tab.TableCalcSetAddressingFieldsCmd=ss.mkType(a,'tab.TableCalcSetAddressingFieldsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cS.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_addressingFields:function(){return this.c['fieldVector']},set_addressingFields:function(eo){this.c['fieldVector']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-addressing-fields'},this.c))}});var cT=global.tab.TableCalcSetAddressingFieldsCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetAddressingFieldsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cU=global.tab.TableCalcSetAddressingFieldsOrderCmd=ss.mkType(a,'tab.TableCalcSetAddressingFieldsOrderCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cU.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_availableAddressingFields:function(){return this.c['fieldVector']},set_availableAddressingFields:function(eo){this.c['fieldVector']=eo},get_addressingFields:function(){return this.c['addressingValues']},set_addressingFields:function(eo){this.c['addressingValues']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-addressing-fields-order'},this.c))}});var cV=global.tab.TableCalcSetAddressingFieldsOrderCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetAddressingFieldsOrderCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cW=global.tab.TableCalcSetAtTheLevelFieldCmd=ss.mkType(a,'tab.TableCalcSetAtTheLevelFieldCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cW.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_atTheLevelField:function(){return this.c['fieldNameAllowEmpty']},set_atTheLevelField:function(eo){this.c['fieldNameAllowEmpty']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-at-the-level-field'},this.c))}});var cX=global.tab.TableCalcSetAtTheLevelFieldCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetAtTheLevelFieldCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var cY=global.tab.TableCalcSetCompoundRateCmd=ss.mkType(a,'tab.TableCalcSetCompoundRateCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cY.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_isCompoundRate:function(){return this.c['bool']},set_isCompoundRate:function(eo){this.c['bool']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-compound-rate'},this.c))}});var cZ=global.tab.TableCalcSetCompoundRateCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetCompoundRateCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var da=global.tab.TableCalcSetCumulativeOptionsCmd=ss.mkType(a,'tab.TableCalcSetCumulativeOptionsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return da.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_aggType:function(){return this.c['aggregation']},set_aggType:function(eo){this.c['aggregation']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-cumulative-options'},this.c))}});var db=global.tab.TableCalcSetCumulativeOptionsCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetCumulativeOptionsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dc=global.tab.TableCalcSetNullIfIncompleteCmd=ss.mkType(a,'tab.TableCalcSetNullIfIncompleteCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dc.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_nullIfIncomplete:function(){return this.c['nullIfIncomplete']},set_nullIfIncomplete:function(eo){this.c['nullIfIncomplete']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-null-if-incomplete'},this.c))}});var dd=global.tab.TableCalcSetNullIfIncompleteCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetNullIfIncompleteCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var de=global.tab.TableCalcSetOrderingTypeCmd=ss.mkType(a,'tab.TableCalcSetOrderingTypeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return de.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_orderingType:function(){return this.c['orderingType']},set_orderingType:function(eo){this.c['orderingType']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-ordering-type'},this.c))}});var df=global.tab.TableCalcSetOrderingTypeCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetOrderingTypeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dg=global.tab.TableCalcSetPercentTotalOptionsCmd=ss.mkType(a,'tab.TableCalcSetPercentTotalOptionsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dg.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_allPages:function(){return this.c['includeAllPages']},set_allPages:function(eo){this.c['includeAllPages']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-percent-total-options'},this.c))}});var dh=global.tab.TableCalcSetPercentTotalOptionsCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetPercentTotalOptionsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var di=global.tab.TableCalcSetRankSortDirectionCmd=ss.mkType(a,'tab.TableCalcSetRankSortDirectionCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return di.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_sortDirection:function(){return this.c['sortOrder']},set_sortDirection:function(eo){this.c['sortOrder']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-rank-sort-direction'},this.c))}});var dj=global.tab.TableCalcSetRankSortDirectionCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetRankSortDirectionCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dk=global.tab.TableCalcSetRankTypeCmd=ss.mkType(a,'tab.TableCalcSetRankTypeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dk.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_rankType:function(){return this.c['rankType']},set_rankType:function(eo){this.c['rankType']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-rank-type'},this.c))}});var dl=global.tab.TableCalcSetRankTypeCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetRankTypeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dm=global.tab.TableCalcSetReferenceOptionsCmd=ss.mkType(a,'tab.TableCalcSetReferenceOptionsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dm.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_relativeAddress:function(){return this.c['relativeAddress']},set_relativeAddress:function(eo){this.c['relativeAddress']=eo},get_paramName:function(){return this.c['fn']},set_paramName:function(eo){this.c['fn']=eo},get_fixedTupleIndex:function(){return this.c['idx']},set_fixedTupleIndex:function(eo){this.c['idx']=eo|0},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-reference-options'},this.c))}});var dn=global.tab.TableCalcSetReferenceOptionsCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetReferenceOptionsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dp=global.tab.TableCalcSetRestartEveryFieldCmd=ss.mkType(a,'tab.TableCalcSetRestartEveryFieldCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dp.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_restartEveryField:function(){return this.c['fieldNameAllowEmpty']},set_restartEveryField:function(eo){this.c['fieldNameAllowEmpty']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-restart-every-field'},this.c))}});var dq=global.tab.TableCalcSetRestartEveryFieldCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetRestartEveryFieldCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dr=global.tab.TableCalcSetSortAggregationCmd=ss.mkType(a,'tab.TableCalcSetSortAggregationCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dr.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_sortAggregation:function(){return this.c['aggregation']},set_sortAggregation:function(eo){this.c['aggregation']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-sort-aggregation'},this.c))}});var ds=global.tab.TableCalcSetSortAggregationCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetSortAggregationCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dt=global.tab.TableCalcSetSortDirectionCmd=ss.mkType(a,'tab.TableCalcSetSortDirectionCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dt.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_sortDirection:function(){return this.c['sortOrder']},set_sortDirection:function(eo){this.c['sortOrder']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-sort-direction'},this.c))}});var du=global.tab.TableCalcSetSortDirectionCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetSortDirectionCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dv=global.tab.TableCalcSetSortFieldCmd=ss.mkType(a,'tab.TableCalcSetSortFieldCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dv.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_sortField:function(){return this.c['fn']},set_sortField:function(eo){this.c['fn']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-sort-field'},this.c))}});var dw=global.tab.TableCalcSetSortFieldCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetSortFieldCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dx=global.tab.TableCalcSetSortModeCmd=ss.mkType(a,'tab.TableCalcSetSortModeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dx.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_sortModeIsAuto:function(){return this.c['sortModeIsAuto']},set_sortModeIsAuto:function(eo){this.c['sortModeIsAuto']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-sort-mode'},this.c))}});var dy=global.tab.TableCalcSetSortModeCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetSortModeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dz=global.tab.TableCalcSetWindowOptionsCmd=ss.mkType(a,'tab.TableCalcSetWindowOptionsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dz.cmdId},get_calcNestingLevel:function(){return this.c['calcNestingLevel']},set_calcNestingLevel:function(eo){this.c['calcNestingLevel']=eo},get_nestedCalcField:function(){return this.c['nestedCalcFn']},set_nestedCalcField:function(eo){this.c['nestedCalcFn']=eo},get_aggType:function(){return this.c['aggregation']},set_aggType:function(eo){this.c['aggregation']=eo},get_includeCurrent:function(){return this.c['includeCurrent']},set_includeCurrent:function(eo){this.c['includeCurrent']=eo},get_nullIfIncomplete:function(){return this.c['nullIfIncomplete']},set_nullIfIncomplete:function(eo){this.c['nullIfIncomplete']=eo},get_numberOfPrevValues:function(){return this.c['numberOfPrevValues']},set_numberOfPrevValues:function(eo){this.c['numberOfPrevValues']=eo|0},get_numberOfNextValues:function(){return this.c['numberOfNextValues']},set_numberOfNextValues:function(eo){this.c['numberOfNextValues']=eo|0},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-window-options'},this.c))}});var dA=global.tab.TableCalcSetWindowOptionsCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcSetWindowOptionsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dB=global.tab.TableCalcToggleSecondaryCalcCmd=ss.mkType(a,'tab.TableCalcToggleSecondaryCalcCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dB.cmdId},get_useSecondaryCalc:function(){return this.c['useSecondaryCalc']},set_useSecondaryCalc:function(eo){this.c['useSecondaryCalc']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-toggle-secondary-calc'},this.c))}});var dC=global.tab.TableCalcToggleSecondaryCalcCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcToggleSecondaryCalcCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dD=global.tab.TableCalcToggleShowCalcAssistanceCmd=ss.mkType(a,'tab.TableCalcToggleShowCalcAssistanceCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dD.cmdId},get_calcAssistanceState:function(){return this.c['isCalcAssistanceEnabled']},set_calcAssistanceState:function(eo){this.c['isCalcAssistanceEnabled']=eo},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-toggle-show-calc-assistance'},this.c))}});var dE=global.tab.TableCalcToggleShowCalcAssistanceCmd$ResponseBuilder=ss.mkType(a,'tab.TableCalcToggleShowCalcAssistanceCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dF=global.tab.ToggleFreeFormZoneWithPreviewCmd=ss.mkType(a,'tab.ToggleFreeFormZoneWithPreviewCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dF.cmdId},get_returnsResult:function(){return false},get_dashboard:function(){return this.c['dashboard']},set_dashboard:function(eo){this.c['dashboard']=eo},get_zoneID:function(){return this.c['zoneId']},set_zoneID:function(eo){this.c['zoneId']=eo|0}});var dG=global.tab.ToggleFreeFormZoneWithPreviewCmd$ResponseBuilder=ss.mkType(a,'tab.ToggleFreeFormZoneWithPreviewCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dH=global.tab.UpdateMarkLabelsSettingsCmd=ss.mkType(a,'tab.UpdateMarkLabelsSettingsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dH.cmdId},get_worksheet:function(){return this.c['worksheet']},set_worksheet:function(eo){this.c['worksheet']=eo},get_paneSpecId:function(){return this.c['paneSpec']},set_paneSpecId:function(eo){this.c['paneSpec']=eo|0},get_markLabelsSpec:function(){return this.c['markLabelsSpecification']},set_markLabelsSpec:function(eo){this.c['markLabelsSpecification']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'update-mark-labels-settings'},this.c))}});var dI=global.tab.UpdateMarkLabelsSettingsCmd$ResponseBuilder=ss.mkType(a,'tab.UpdateMarkLabelsSettingsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dJ=global.tab.UpdateReferenceLineCmd=ss.mkType(a,'tab.UpdateReferenceLineCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dJ.cmdId},get_visualID:function(){return this.c['visualIdPresModel']},set_visualID:function(eo){this.c['visualIdPresModel']=eo},get_refLineId:function(){return this.c['referenceLineId']},set_refLineId:function(eo){this.c['referenceLineId']=eo},get_formulaGroup:function(){return this.c['reflineFormulaGroup']},set_formulaGroup:function(eo){this.c['reflineFormulaGroup']=eo},get_scopeType:function(){return this.c['referenceLineScopeType']},set_scopeType:function(eo){this.c['referenceLineScopeType']=eo},get_formulaType:function(){return this.c['referenceLineFormulaType']},set_formulaType:function(eo){this.c['referenceLineFormulaType']=eo},get_constantValue:function(){return this.c['constantValue']},set_constantValue:function(eo){this.c['constantValue']=eo},get_fieldName:function(){return this.c['fn']},set_fieldName:function(eo){this.c['fn']=eo},get_labelType:function(){return this.c['referenceLineLabelType']},set_labelType:function(eo){this.c['referenceLineLabelType']=eo},get_customLabel:function(){return this.c['label']},set_customLabel:function(eo){this.c['label']=eo},get_tooltipType:function(){return this.c['referenceLineTooltipType']},set_tooltipType:function(eo){this.c['referenceLineTooltipType']=eo},get_customTooltip:function(){return this.c['tooltipText']},set_customTooltip:function(eo){this.c['tooltipText']=eo},get_confidenceIntervalState:function(){return this.c['confidenceIntervalState']},set_confidenceIntervalState:function(eo){this.c['confidenceIntervalState']=eo},get_confidenceLevelValue:function(){return this.c['confidenceLevelValue']},set_confidenceLevelValue:function(eo){this.c['confidenceLevelValue']=eo},get_referenceParameter:function(){return this.c['referenceParam']},set_referenceParameter:function(eo){this.c['referenceParam']=eo},get_quantilesValue:function(){return this.c['quantilesValue']},set_quantilesValue:function(eo){this.c['quantilesValue']=eo},get_distributionType:function(){return this.c['distributionType']},set_distributionType:function(eo){this.c['distributionType']=eo},get_stDevType:function(){return this.c['stdevType']},set_stDevType:function(eo){this.c['stdevType']=eo},get_enableInstantAnalytics:function(){return this.c['enableInstantAnalytics']},set_enableInstantAnalytics:function(eo){this.c['enableInstantAnalytics']=eo},get_percentages:function(){return this.c['percentagesStr']},set_percentages:function(eo){this.c['percentagesStr']=eo},get_factors:function(){return this.c['factorsStr']},set_factors:function(eo){this.c['factorsStr']=eo},get_percentiles:function(){return this.c['percentilesString']},set_percentiles:function(eo){this.c['percentilesString']=eo},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'update-reference-line'},this.c))}});var dK=global.tab.UpdateReferenceLineCmd$ResponseBuilder=ss.mkType(a,'tab.UpdateReferenceLineCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dL=global.tab.WebCatalogDetailsDialogCmd=ss.mkType(a,'tab.WebCatalogDetailsDialogCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dL.cmdId},get_returnsResult:function(){return false},get_dataSource:function(){return this.c['datasource']},set_dataSource:function(eo){this.c['datasource']=eo}});var dM=global.tab.WebCatalogDetailsDialogCmd$ResponseBuilder=ss.mkType(a,'tab.WebCatalogDetailsDialogCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dN=global.tab.WebConnectDataCmd=ss.mkType(a,'tab.WebConnectDataCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dN.cmdId},get_returnsResult:function(){return false}});var dO=global.tab.WebConnectDataCmd$ResponseBuilder=ss.mkType(a,'tab.WebConnectDataCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dP=global.tab.WebCreateMetricFromFieldCmd=ss.mkType(a,'tab.WebCreateMetricFromFieldCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dP.cmdId},get_returnsResult:function(){return false},get_datasource:function(){return this.c['datasource']},set_datasource:function(eo){this.c['datasource']=eo},get_datasourceId:function(){return this.c['uuid']},set_datasourceId:function(eo){this.c['uuid']=eo},get_datasourceRepositoryUrl:function(){return this.c['datasourceUrl']},set_datasourceRepositoryUrl:function(eo){this.c['datasourceUrl']=eo},get_measure:function(){return this.c['measureFieldNameLeaf']},set_measure:function(eo){this.c['measureFieldNameLeaf']=eo},get_aggregation:function(){return this.c['aggregation']},set_aggregation:function(eo){this.c['aggregation']=eo},get_timeDimension:function(){return this.c['dimensionFieldNameLeaf']},set_timeDimension:function(eo){this.c['dimensionFieldNameLeaf']=eo}});var dQ=global.tab.WebCreateMetricFromFieldCmd$ResponseBuilder=ss.mkType(a,'tab.WebCreateMetricFromFieldCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dR=global.tab.WebDashboardDesignCmd=ss.mkType(a,'tab.WebDashboardDesignCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dR.cmdId},get_returnsResult:function(){return false}});var dS=global.tab.WebDashboardDesignCmd$ResponseBuilder=ss.mkType(a,'tab.WebDashboardDesignCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dT=global.tab.WebEditDataSourceCmd=ss.mkType(a,'tab.WebEditDataSourceCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dT.cmdId},get_returnsResult:function(){return false},get_dataSource:function(){return this.c['datasource']},set_dataSource:function(eo){this.c['datasource']=eo}});var dU=global.tab.WebEditDataSourceCmd$ResponseBuilder=ss.mkType(a,'tab.WebEditDataSourceCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dV=global.tab.WebEditObjectCaptionCmd=ss.mkType(a,'tab.WebEditObjectCaptionCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dV.cmdId},get_returnsResult:function(){return false},get_objectId:function(){return this.c['dataObjectModelObjectId']},set_objectId:function(eo){this.c['dataObjectModelObjectId']=eo},get_fieldName:function(){return this.c['uniqueName']},set_fieldName:function(eo){this.c['uniqueName']=eo},get_dataSource:function(){return this.c['datasource']},set_dataSource:function(eo){this.c['datasource']=eo}});var dW=global.tab.WebEditObjectCaptionCmd$ResponseBuilder=ss.mkType(a,'tab.WebEditObjectCaptionCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dX=global.tab.WebEPDSPublishCmd=ss.mkType(a,'tab.WebEPDSPublishCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dX.cmdId},get_returnsResult:function(){return false},get_datasource:function(){return this.c['datasource']},set_datasource:function(eo){this.c['datasource']=eo},get_parentProjectId:function(){return this.c['publishdsdialogParentProjectId']},set_parentProjectId:function(eo){this.c['publishdsdialogParentProjectId']=eo|0},get_pagingStartRow:function(){return this.c['publishdsdialogPagingStartRow']},set_pagingStartRow:function(eo){this.c['publishdsdialogPagingStartRow']=eo|0},get_pagingEndRow:function(){return this.c['publishdsdialogPagingEndRow']},set_pagingEndRow:function(eo){this.c['publishdsdialogPagingEndRow']=eo|0},get_projectsSortAscendingOrder:function(){return this.c['publishdsdialogProjectSortAscendingOrder']},set_projectsSortAscendingOrder:function(eo){this.c['publishdsdialogProjectSortAscendingOrder']=eo},get_isPublishAs:function(){return this.c['isPublishAs']},set_isPublishAs:function(eo){this.c['isPublishAs']=eo}});var dY=global.tab.WebEPDSPublishCmd$ResponseBuilder=ss.mkType(a,'tab.WebEPDSPublishCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var dZ=global.tab.WebFilterDialogDomainCancelCmd=ss.mkType(a,'tab.WebFilterDialogDomainCancelCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return dZ.cmdId},get_returnsResult:function(){return false},get_commandName:function(){return this.c['commandName']},set_commandName:function(eo){this.c['commandName']=eo}});var ea=global.tab.WebFilterDialogDomainCancelCmd$ResponseBuilder=ss.mkType(a,'tab.WebFilterDialogDomainCancelCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var eb=global.tab.WebRemoveShelfPillCmd=ss.mkType(a,'tab.WebRemoveShelfPillCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return eb.cmdId},get_returnsResult:function(){return false},get_shelfType:function(){return this.c['shelfType']},set_shelfType:function(eo){this.c['shelfType']=eo},get_shelfItemID:function(){return this.c['shelfItemId']},set_shelfItemID:function(eo){this.c['shelfItemId']=eo|0}});var ec=global.tab.WebRemoveShelfPillCmd$ResponseBuilder=ss.mkType(a,'tab.WebRemoveShelfPillCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var ed=global.tab.WebRenameDatasourceDialogCmd=ss.mkType(a,'tab.WebRenameDatasourceDialogCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ed.cmdId},get_returnsResult:function(){return false},get_dataSource:function(){return this.c['datasource']},set_dataSource:function(eo){this.c['datasource']=eo}});var ee=global.tab.WebRenameDatasourceDialogCmd$ResponseBuilder=ss.mkType(a,'tab.WebRenameDatasourceDialogCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var ef=global.tab.WebShowFieldCatalogDetailsCmd=ss.mkType(a,'tab.WebShowFieldCatalogDetailsCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ef.cmdId},get_returnsResult:function(){return false},get_datasource:function(){return this.c['datasource']},set_datasource:function(eo){this.c['datasource']=eo},get_fieldName:function(){return this.c['fieldName']},set_fieldName:function(eo){this.c['fieldName']=eo}});var eg=global.tab.WebShowFieldCatalogDetailsCmd$ResponseBuilder=ss.mkType(a,'tab.WebShowFieldCatalogDetailsCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var eh=global.tab.WebShowMeCmd=ss.mkType(a,'tab.WebShowMeCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return eh.cmdId},get_returnsResult:function(){return false}});var ei=global.tab.WebShowMeCmd$ResponseBuilder=ss.mkType(a,'tab.WebShowMeCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var ej=global.tab.WebToolbarMoreCmd=ss.mkType(a,'tab.WebToolbarMoreCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ej.cmdId},get_returnsResult:function(){return false}});var ek=global.tab.WebToolbarMoreCmd$ResponseBuilder=ss.mkType(a,'tab.WebToolbarMoreCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var el=global.tab.WebZonesEnabledModel=ss.mkType(a,'tab.WebZonesEnabledModel',function(eo){tab.Model.call(this,eo,new tab.PresModelPathItem('doc:user-content-web-view-enable-web-zones-changed-event'.toString(),null));this.pm={userContentWebViewWebZonesEnabled:true}},{get_notificationId:function(){return'doc:user-content-web-view-enable-web-zones-changed-event'},onNotify:function(eo,ep){var eq=eo;if(ss.isValue(eq)){tsConfig.is_web_zones_enabled=eq.userContentWebViewWebZonesEnabled}}});var em=global.tab.WhereDidSaveGoCmd=ss.mkType(a,'tab.WhereDidSaveGoCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return em.cmdId},get_returnsResult:function(){return false}});var en=global.tab.WhereDidSaveGoCmd$ResponseBuilder=ss.mkType(a,'tab.WhereDidSaveGoCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});ss.initClass(b,tab.ClientCommand);ss.initClass(c,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(d);ss.initClass(e,tab.Model,[tab.IHandleNotifications]);ss.initClass(f,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(g);ss.initClass(h,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(i);ss.initClass(j,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(k);ss.initClass(l);ss.initClass(m,tab.Model);ss.initClass(n,tab.Model);ss.initClass(o);ss.initClass(p,tab.Model,[tab.IHandleNotifications]);ss.initClass(q,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(r);ss.initClass(s,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(t);ss.initClass(u,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(v);ss.initClass(w,tab.Model,[tab.IHandleNotifications]);ss.initClass(x,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(y);ss.initClass(z,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(A);ss.initClass(B);ss.initClass(C);ss.initClass(D);ss.initClass(E,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(F);ss.initClass(G);ss.initClass(H,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(I);ss.initClass(J,tab.Model);ss.initClass(K,tab.Model);ss.initClass(L,tab.Model);ss.initClass(M,tab.Model);ss.initClass(N,tab.Model);ss.initClass(O);ss.initClass(P);ss.initClass(Q,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(R);ss.initClass(S,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(T);ss.initClass(U,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(V);ss.initClass(W);ss.initClass(X,tab.Model);ss.initClass(Y,tab.Model);ss.initClass(Z);ss.initClass(ba,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bb);ss.initClass(bc,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bd);ss.initClass(be,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bf);ss.initClass(bg,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bh);ss.initClass(bi,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bj);ss.initClass(bk,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bl);ss.initClass(bm,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bn);ss.initClass(bo,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bp);ss.initClass(bq,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(br);ss.initClass(bs,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(bt);ss.initClass(bu,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bv);ss.initClass(bw);ss.initClass(bx,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(by);ss.initClass(bz,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bA);ss.initClass(bB,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bC);ss.initClass(bD,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bE);ss.initClass(bF,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bG);ss.initClass(bH,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bI);ss.initClass(bJ);ss.initClass(bK,null,[ss.IDisposable]);ss.initClass(bL);ss.initClass(bM,tabBootstrap.DisableAffordanceSet);ss.initClass(bN,tab.Model,[tab.IHandleNotifications]);ss.initClass(bO,tab.Model,[tab.IDetachableNotificationHandler,tab.IHandleNotifications]);ss.initClass(bP,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(bQ);ss.initClass(bR,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(bS);ss.initClass(bT,tab.Model);ss.initClass(bU,tab.Model,[tab.IHandleNotifications]);ss.initClass(bV,tab.Model);ss.initClass(bW,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bX);ss.initClass(bY,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bZ);ss.initClass(ca,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cb);ss.initClass(cc,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cd);ss.initClass(ce,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cf);ss.initClass(cg,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(ch);ss.initClass(ci,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cj);ss.initClass(ck,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cl);ss.initClass(cm,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cn);ss.initClass(co,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cp);ss.initClass(cq,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cr);ss.initClass(cs,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(ct);ss.initClass(cu,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cv);ss.initClass(cw,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cx);ss.initClass(cy,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cz);ss.initClass(cA,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cB);ss.initClass(cC,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cD);ss.initClass(cE,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cF);ss.initClass(cG,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cH);ss.initClass(cI);ss.initClass(cJ);ss.initClass(cK,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cL);ss.initClass(cM,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cN);ss.initClass(cO,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cP);ss.initClass(cQ,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cR);ss.initClass(cS,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cT);ss.initClass(cU,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cV);ss.initClass(cW,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cX);ss.initClass(cY,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cZ);ss.initClass(da,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(db);ss.initClass(dc,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dd);ss.initClass(de,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(df);ss.initClass(dg,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dh);ss.initClass(di,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dj);ss.initClass(dk,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dl);ss.initClass(dm,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dn);ss.initClass(dp,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dq);ss.initClass(dr,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(ds);ss.initClass(dt,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(du);ss.initClass(dv,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dw);ss.initClass(dx,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dy);ss.initClass(dz,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dA);ss.initClass(dB,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dC);ss.initClass(dD,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dE);ss.initClass(dF,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(dG);ss.initClass(dH,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dI);ss.initClass(dJ,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(dK);ss.initClass(dL,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(dM);ss.initClass(dN,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(dO);ss.initClass(dP,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(dQ);ss.initClass(dR,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(dS);ss.initClass(dT,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(dU);ss.initClass(dV,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(dW);ss.initClass(dX,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(dY);ss.initClass(dZ,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(ea);ss.initClass(eb,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(ec);ss.initClass(ed,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(ee);ss.initClass(ef,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(eg);ss.initClass(eh,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(ei);ss.initClass(ej,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(ek);ss.initClass(el,tab.Model,[tab.IHandleNotifications]);ss.initClass(em,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(en);(function(){j.cmdId={ns:'tabdoc',cmd:'build-shelf-item-context-menu'}})();(function(){bu.cmdId={ns:'tabdoc',cmd:'launch-filter-dialog'}})();(function(){cJ.$c=JSON.stringify(true)})();(function(){c.cmdId={ns:'tabdoc',cmd:'assign-categorical-color-palette'}})();(function(){var eo=tab.ApplicationModel.get_instance();eo.modelInstance(e).call(eo)})();(function(){f.cmdId={ns:'tabdoc',cmd:'build-main-menu'}})();(function(){h.cmdId={ns:'tabdoc',cmd:'build-server-scene-margin-context-menu'}})();(function(){o.fakeDsName='__fake ds name__';o.registerCommandInterceptors()})();(function(){var eo=tab.ApplicationModel.get_instance();eo.addModel(p).call(eo)})();(function(){q.cmdId={ns:'tabdoc',cmd:'change-line-interpolation'}})();(function(){s.cmdId={ns:'tabdoc',cmd:'change-line-pattern'}})();(function(){u.cmdId={ns:'tabdoc',cmd:'close-authoring'}})();(function(){var eo=tab.ApplicationModel.get_instance();eo.addModel(w).call(eo)})();(function(){x.cmdId={ns:'tabdoc',cmd:'close-map-layers-pane'}})();(function(){z.cmdId={ns:'tabdoc',cmd:'close-ref-line-editor'}})();(function(){bq.cmdId={ns:'tabdoc',cmd:'hide-zone'}})();(function(){bY.cmdId={ns:'tabdoc',cmd:'replace-zone'}})();(function(){cm.cmdId={ns:'tabdoc',cmd:'select-zone-parent'}})();(function(){bc.cmdId={ns:'tabdoc',cmd:'get-drag-zone-resize'}})();(function(){bF.cmdId={ns:'tabdoc',cmd:'move-dashboard-edge'}})();(function(){cG.cmdId={ns:'tabdoc',cmd:'set-zone-style'}})();(function(){cE.cmdId={ns:'tabdoc',cmd:'set-zone-is-fixed-size'}})();(function(){bH.cmdId={ns:'tabdoc',cmd:'move-zone-within-layout-tree'}})();(function(){bz.cmdId={ns:'tabdoc',cmd:'modify-border'}})();(function(){bx.cmdId={ns:'tabdoc',cmd:'modify-background-shading'}})();(function(){bB.cmdId={ns:'tabdoc',cmd:'modify-margin'}})();(function(){bD.cmdId={ns:'tabdoc',cmd:'modify-padding'}})();(function(){E.cmdId={ns:'tabdoc',cmd:'delete-draft'}})();(function(){H.cmdId={ns:'tabdoc',cmd:'destroy-vqlsession'}})();(function(){Q.cmdId={ns:'tabdoc',cmd:'drop-ref-line-on-filter-shelf'}})();(function(){S.cmdId={ns:'tabdoc',cmd:'drop-ref-line-on-schema-viewer'}})();(function(){U.cmdId={ns:'tabdoc',cmd:'drop-ref-line-on-shelf'}})();(function(){var eo=tab.ApplicationModel.get_instance();eo.modelInstance(X).call(eo)})();(function(){ba.cmdId={ns:'tabdoc',cmd:'get-density-color-palettes'}})();(function(){be.cmdId={ns:'tabdoc',cmd:'get-last-published-date-for-data-source'}})();(function(){bg.cmdId={ns:'tabdoc',cmd:'get-ref-line-drag-info'}})();(function(){bi.cmdId={ns:'tabdoc',cmd:'get-ref-line-formula'}})();(function(){bk.cmdId={ns:'tabdoc',cmd:'get-sankey-color-palettes'}})();(function(){bm.cmdId={ns:'tabdoc',cmd:'get-should-display-save-datasource-dialog'}})();(function(){bo.cmdId={ns:'tabdoc',cmd:'get-trend-line-drag-info'}})();(function(){bs.cmdId={ns:'tabdoc',cmd:'hide-zone-with-preview'}})();(function(){dH.cmdId={ns:'tabdoc',cmd:'update-mark-labels-settings'}})();(function(){cq.cmdId={ns:'tabdoc',cmd:'set-density-color-encoding'}})();(function(){cu.cmdId={ns:'tabdoc',cmd:'set-density-kernel-size'}})();(function(){cs.cmdId={ns:'tabdoc',cmd:'set-density-intensity'}})();(function(){bM.$1=['zoneWidgetry','sidePane'];if(tsConfig.is_desktop){tabBootstrap.Affordances.register(new bM)}})();(function(){bP.cmdId={ns:'tabdoc',cmd:'quick-sort-ascending'}})();(function(){bR.cmdId={ns:'tabdoc',cmd:'quick-sort-descending'}})();(function(){var eo=tab.ApplicationModel.get_instance();eo.addModel(bU).call(eo)})();(function(){bW.cmdId={ns:'tabdoc',cmd:'release-component'}})();(function(){ca.cmdId={ns:'tabdoc',cmd:'reset-categorical-color-map'}})();(function(){cc.cmdId={ns:'tabdoc',cmd:'resize-active-zone'}})();(function(){ce.cmdId={ns:'tabdoc',cmd:'revert-to-published'}})();(function(){cg.cmdId={ns:'tabdoc',cmd:'save-as'}})();(function(){ci.cmdId={ns:'tabdoc',cmd:'save'}})();(function(){ck.cmdId={ns:'tabdoc',cmd:'save-or-save-as'}})();(function(){co.cmdId={ns:'tabdoc',cmd:'set-categorical-legend-item-color'}})();(function(){cw.cmdId={ns:'tabdoc',cmd:'set-sankey-color-palette'}})();(function(){cy.cmdId={ns:'tabdoc',cmd:'set-selected-legend-items'}})();(function(){cA.cmdId={ns:'tabdoc',cmd:'set-side-pane-expansion-state'}})();(function(){cC.cmdId={ns:'tabdoc',cmd:'set-story-point-caption-width-and-flipboard-nav-height'}})();(function(){cI.$0=75})();(function(){cK.cmdId={ns:'tabdoc',cmd:'table-calc-change-type'}})();(function(){cM.cmdId={ns:'tabdoc',cmd:'table-calc-close'}})();(function(){cO.cmdId={ns:'tabdoc',cmd:'table-calc-dialog-activated'}})();(function(){cQ.cmdId={ns:'tabdoc',cmd:'table-calc-edit-nested'}})();(function(){cS.cmdId={ns:'tabdoc',cmd:'table-calc-set-addressing-fields'}})();(function(){cU.cmdId={ns:'tabdoc',cmd:'table-calc-set-addressing-fields-order'}})();(function(){cW.cmdId={ns:'tabdoc',cmd:'table-calc-set-at-the-level-field'}})();(function(){cY.cmdId={ns:'tabdoc',cmd:'table-calc-set-compound-rate'}})();(function(){da.cmdId={ns:'tabdoc',cmd:'table-calc-set-cumulative-options'}})();(function(){dc.cmdId={ns:'tabdoc',cmd:'table-calc-set-null-if-incomplete'}})();(function(){de.cmdId={ns:'tabdoc',cmd:'table-calc-set-ordering-type'}})();(function(){dg.cmdId={ns:'tabdoc',cmd:'table-calc-set-percent-total-options'}})();(function(){di.cmdId={ns:'tabdoc',cmd:'table-calc-set-rank-sort-direction'}})();(function(){dk.cmdId={ns:'tabdoc',cmd:'table-calc-set-rank-type'}})();(function(){dm.cmdId={ns:'tabdoc',cmd:'table-calc-set-reference-options'}})();(function(){dp.cmdId={ns:'tabdoc',cmd:'table-calc-set-restart-every-field'}})();(function(){dr.cmdId={ns:'tabdoc',cmd:'table-calc-set-sort-aggregation'}})();(function(){dt.cmdId={ns:'tabdoc',cmd:'table-calc-set-sort-direction'}})();(function(){dv.cmdId={ns:'tabdoc',cmd:'table-calc-set-sort-field'}})();(function(){dx.cmdId={ns:'tabdoc',cmd:'table-calc-set-sort-mode'}})();(function(){dz.cmdId={ns:'tabdoc',cmd:'table-calc-set-window-options'}})();(function(){dB.cmdId={ns:'tabdoc',cmd:'table-calc-toggle-secondary-calc'}})();(function(){dD.cmdId={ns:'tabdoc',cmd:'table-calc-toggle-show-calc-assistance'}})();(function(){dF.cmdId={ns:'tabdoc',cmd:'toggle-free-form-zone-with-preview'}})();(function(){dJ.cmdId={ns:'tabdoc',cmd:'update-reference-line'}})();(function(){dL.cmdId={ns:'tabdoc',cmd:'web-catalog-details-dialog'}})();(function(){dN.cmdId={ns:'tabdoc',cmd:'web-connect-data'}})();(function(){dP.cmdId={ns:'tabdoc',cmd:'web-create-metric-from-field'}})();(function(){dR.cmdId={ns:'tabdoc',cmd:'web-dashboard-design'}})();(function(){dT.cmdId={ns:'tabdoc',cmd:'web-edit-data-source'}})();(function(){dV.cmdId={ns:'tabdoc',cmd:'web-edit-object-caption'}})();(function(){dX.cmdId={ns:'tabdoc',cmd:'web-epdspublish'}})();(function(){dZ.cmdId={ns:'tabdoc',cmd:'web-filter-dialog-domain-cancel'}})();(function(){eb.cmdId={ns:'tabdoc',cmd:'web-remove-shelf-pill'}})();(function(){ed.cmdId={ns:'tabdoc',cmd:'web-rename-datasource-dialog'}})();(function(){ef.cmdId={ns:'tabdoc',cmd:'web-show-field-catalog-details'}})();(function(){eh.cmdId={ns:'tabdoc',cmd:'web-show-me'}})();(function(){ej.cmdId={ns:'tabdoc',cmd:'web-toolbar-more'}})();(function(){var eo=tab.ApplicationModel.get_instance();eo.modelInstance(el).call(eo)})();(function(){em.cmdId={ns:'tabdoc',cmd:'where-did-save-go'}})()})();;
/*! BEGIN Authoring */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlauthoring');var b=ss.mkType(a,'tab.$0',function(ni,nj,nk){this.$6=null;this.$4=null;this.$5=null;this.$6=ni;this.$4=nj;this.$5=nk},{$3:function(){return this.$6},$1:function(ni){return this.$0(ni.get_caption())||this.$2(ni.get_formula())},$0:function(ni){return!ss.referenceEquals(this.$4,ni)},$2:function(ni){return!ss.referenceEquals(this.$5,ni)}});var c=ss.mkType(a,'tab.$1',function(ni){this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=ni},{createInitialProps:function(){return{layoutTreeItem:this.$3}}});var d=ss.mkEnum(a,'tab.$10',{$3:0,$2:1,$0:2,$1:3});var e=ss.mkEnum(a,'tab.$11',{$1:0,$0:1});var f=ss.mkType(a,'tab.$12',function(ni){this.$1=null;this.$1=ni},{$0:function(){return this.$1.get_marksCardTabEncoding().get_id()},get_viewType:function(){return iu},get_viewModel:function(){return this.$1},get_active:function(){return false},set_active:function(ni){}});var g=ss.mkType(a,'tab.$13',function(){this.$3=null;this.$1=null;this.$0=null;this.$2=null;this.$4=0});var h=ss.mkType(a,'tab.$14',function(){this.$2=null;this.$1=null;spiff.Template.call(this,$("\n<div class='tabPane'>\n    <div class='tabPaneTitle'></div>\n    <div class='tabPaneBody'></div>\n</div>"));this.$2=this.getElementBySelector('.tabPaneTitle');this.$1=this.getElementBySelector('.tabPaneBody')});var i=ss.mkType(a,'tab.$15',function(){this.$1=null;spiff.Template.call(this,$("<div class='refLineConstantValueEditor'><span class='refLineConstantValueEditorTitle'></span><input class='refLineConstantValueEditorInput' type='text'/></div>"));this.$1=this.getElementBySelector('.refLineConstantValueEditorInput');this.getElementBySelector('.refLineConstantValueEditorTitle').text(tab.Strings.RefLineEditorInputTitle)});var j=ss.mkType(a,'tab.$16',function(){this.$2=null;this.$0=null;this.$1=0});var k=ss.mkType(a,'tab.$17',function(ni){this.$1$1=null;this.$1$2=0;this.$1$3=0;this.$a(ni);this.$8(tab.DoubleUtil.tryParseDouble(ni.css('min-height'),0));this.$6(tab.DoubleUtil.tryParseDouble(ni.css('max-height'),Number.MAX_VALUE))},{$9:function(){return this.$1$1},$a:function(ni){this.$1$1=ni},$2:function(){return this.$9().height()},$3:function(ni){this.$9().height(ni)},$4:function(){return this.$5()-this.$2()<1},$7:function(){return this.$1$2},$8:function(ni){this.$1$2=ni},$5:function(){return this.$1$3},$6:function(ni){this.$1$3=ni},$0:function(){return tab.DoubleUtil.tryParseDouble(this.$9().css('flex-grow'),0)},$1:function(ni){this.$9().css('flex-grow',ni.toString())}});var l=ss.mkType(a,'tab.$18',function(){this.$2=null;this.$1=null;spiff.Template.call(this,$(l.$0));this.$2=this.getElementBySelector('.tabAuthShelfScrollPrev');this.$1=this.getElementBySelector('.tabAuthShelfScrollNext')});var m=ss.mkType(a,'tab.$19',function(){this.$2=null;this.$1=null;spiff.Template.call(this,$("\n<div class='tabTabbedPane'>\n    <div class='tabTabLabels'></div>\n    <div class='tabTabContentArea'></div>\n</div>"));this.$2=this.getElementBySelector('.tabTabLabels');this.$1=this.getElementBySelector('.tabTabContentArea')},{get_root:function(){return this.domRoot},get_tabs:function(){return this.$2},get_contentArea:function(){return this.$1},createTabLabel:function(ni,nj){return new spiff.Template($("<span class='tabTabLabel'></span>").text(nj))}});var n=ss.mkType(a,'tab.$2',function(ni,nj,nk,nl){this.$3=null;this.$2=null;this.$1=null;this.$0=null;this.$3=ni;this.$1=nj;this.$0=nk;this.$2=nl},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){this.$1();if(!ss.isInstanceOfType(ni,cp)){return null}var nj=this.$3.getDropPositionPresModel(ni,this.$2);if(ss.isNullOrUndefined(nj)){return null}return this},dragExit:function(ni){this.$0()},acceptDrop:function(ni){return this.$3.acceptDrop(ni,this.$2)},getDropTarget:function(ni){return this},getDropCursor:function(ni){var nj=ss.safeCast(ni,cp);if(ss.isNullOrUndefined(nj)){return spiff.CustomCursor.noOp}if(nj.hasOnlyPills()&&!ni.isCopyDrag){return spiff.CustomCursor.move}return spiff.CustomCursor.copy}});var o=ss.mkType(a,'tab.$20',function(){this.$0=false;this.$1=null});var p=ss.mkType(a,'tab.$21',function(ni,nj){this.$4=null;this.$5=null;spiff.Template.call(this,$("<div class='tab-editReferenceLineTab'>\n                 <div class='tab-tabIcon'></div>\n                 <div class='tab-tabLabel'></div>\n              </div>"));this.$4=this.getElementBySelector('.tab-tabIcon');this.$5=this.getElementBySelector('.tab-tabLabel');this.$2().text(nj);this.$1().addClass(this.$3(ni))},{$1:function(){return this.$4},$2:function(){return this.$5},$3:function(ni){var nj='tabEditReferenceLine-';switch(ni){case'line':{return nj+'Line'}case'band':{return nj+'Band'}case'distribution':{return nj+'Distribution'}}return''}});var q=ss.mkType(a,'tab.$3',function(ni,nj){this.$1=null;this.$0=0;this.$1=ni;this.$0=nj},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){var nj=this.$1.dragOver$1(ni,this.$0);if(ss.isValue(nj)){return this}return null},dragExit:function(ni){this.$1.dragExit(ni)},acceptDrop:function(ni){return this.$1.acceptDrop$1(ni,this.$0)},getDropCursor:function(ni){return this.$1.getDropCursor(ni)},getDropTarget:function(ni){return this}});var r=ss.mkType(a,'tab.$4');var s=ss.mkType(a,'tab.$5',function(ni){this.$1=null;this.$2=0;this.$1=ni.getValue();this.$2=ni.indexFromPos(ni.getCursor())},{$0:function(){return ss.isValue(this.$1)&&this.$1.length>0}});var t=ss.mkType(a,'tab.$6',function(){this.$7=null;this.$5=null;spiff.Template.call(this,$("<div><div class='autocomplete_item'><span class='field-icon-area'><div class='schema-field-icon'></div></span></div></div>"));this.$5=this.getElementBySelector('.autocomplete_item');this.$7=this.getElementBySelector('.schema-field-icon')},{$6:function(ni){$('<span>'+ni+'</span>').appendTo(this.$5)},$2:function(ni){if(ni){$("<div class='autocomplete_separator'></div>").insertBefore(this.$5)}},$1:function(ni){if(!ss.isNullOrEmptyString(ni)){var nj=$("<div class='autocomplete_header'></div>");nj.text(ni);nj.insertBefore(this.$5)}},$4:function(ni){if(!ss.isNullOrEmptyString(ni)){this.$5.attr('title',ni)}},$3:function(ni){this.domRoot.appendTo(ni)}});var u=ss.mkType(a,'tab.$7',function(ni,nj){t.call(this);this.$5.addClass('autocomplete_field');this.$6(ni);if(nj.length>0){this.$7.addClass(ss.formatString('tab-schema-{0}-icon',nj))}});var v=ss.mkType(a,'tab.$8',function(ni){t.call(this);this.$5.addClass('autocomplete_func');this.$6(ni);this.$7.addClass('autocomplete-menu-function')});var w=ss.mkType(a,'tab.$9',function(){tab.TooltipTemplate.call(this);this.domRoot.addClass('tabCalcFunctionHelp')});var x=global.tab.AccordionHeaderTemplate=ss.mkType(a,'tab.AccordionHeaderTemplate',function(){this.title=null;this.titleText=null;this.titleInput=null;this.icon=null;this.iconTwo=null;this.visibilityButton=null;this.dropdownMenu=null;spiff.Template.call(this,$("<div class='tabAccordionHeader'>\n            <div class='tabLayerVisibilityButton'></div>\n            <div class='tabAccordionItemIconContainer'>\n                <div class='tabAccordionItemIcon'></div>\n            </div>\n            <span class='tabAccordionItemTitle'>\n                <div class='tabAccordionItemTitleText'></div>\n                <input class='tabAccordionItemTitleInput' style='display: none'/>\n                <span class='tableCalcIcon'></span>\n            </span>\n            <div class='tabAccordionDropdownMenu'></div>\n            </div>"));this.title=this.getElementBySelector('.tabAccordionItemTitle');this.titleText=this.getElementBySelector('.tabAccordionItemTitleText');this.titleInput=this.getElementBySelector('.tabAccordionItemTitleInput');this.icon=this.getElementBySelector('.tabAccordionItemIcon');this.iconTwo=this.getElementBySelector('.tableCalcIcon');this.visibilityButton=this.getElementBySelector('.tabLayerVisibilityButton');this.dropdownMenu=this.getElementBySelector('.tabAccordionDropdownMenu')});var y=global.tab.AccordionHeaderView=ss.mkType(a,'tab.AccordionHeaderView',function(ni,nj){this.$j=null;this.$i=null;this.$h=[];ss.makeGenericType(spiff.BaseView$1,[z]).call(this,ni,nj);this.$j=ni;this.$i=nj;if(this.$j.get_isLayered()){this.$i.titleInput.on('blur',ss.mkdel(this,this.handleRenameBlur));this.$i.titleInput.on('keypress',ss.mkdel(this,this.handleEnterKeyPressed));this.$i.visibilityButton.on('mouseenter',ss.mkdel(this,this.$d));this.$i.visibilityButton.on('mouseleave',ss.mkdel(this,this.$e))}this.$i.domRoot.on('mouseenter',ss.mkdel(this,this.$a));this.$i.domRoot.on('mouseleave',ss.mkdel(this,this.$b));this.$g()},{dispose:function(){this.$7();ss.makeGenericType(spiff.BaseView$1,[z]).prototype.dispose.call(this)},$7:function(){this.$h.forEach(function(ni){ni.dispose()});ss.clear(this.$h)},$8:function(ni){if(!this.$j.get_isLayered()){return}ni.hide();var nj=ni.parent().children('.tabAccordionItemTitleInput').first();nj.val(ni[0].textContent);nj.show();nj.focus()},doubleClickToEdit:function(ni){this.$8($(ni.currentTarget))},handleEnterKeyPressed:function(ni){if(ni.which===13){ni.currentTarget.blur()}},handleRenameBlur:function(ni){var nj=$(ni.currentTarget);var nk=nj.val().trim();if(!ss.referenceEquals(nk,this.$j.get_title())){this.$j.updateLayerTitle(nk);if(nk.length===0){nk=this.$j.get_defaultTitle()}this.$i.titleText.text(nk)}nj.hide();this.$i.titleText.show()},renderVisibilityButton:function(ni){if(this.$j.get_isLayered()){var nj=React.createElement('div',{className:ni,onClick:ss.mkdel(this,function(nk){this.$c()}),'data-test-id':'tabLayerVisibilityButton-'+this.$j.get_marksSpecId(),key:'tabLayerVisibilityButton'});ReactDOM.render(nj,this.$i.visibilityButton.get(0));this.$i.visibilityButton.show();this.$i.icon.parent().hide();this.$i.iconTwo.hide()}else{if(ss.isValue(this.$j.get_iconClass())){this.$i.icon.addClass(this.$j.get_iconClass())}if(ss.isValue(this.$j.get_iconClassTwo())){this.$i.iconTwo.addClass(this.$j.get_iconClassTwo())}this.$i.visibilityButton.hide();this.$i.icon.parent().show();this.$i.iconTwo.show()}},$9:function(){var ni=ir.getMenuData(this.$j);return{onSelect:ss.mkdel(this,function(nj){this.$f(nj)}),menuItemInfos:ss.arrayClone(ni),testId:'layerDropdownMenu',type:2}},renderDropdownMenu:function(){var ni=this.$9();var nj=React.createElement(SharedWidgets.HierarchicalDropdownWidget,ni);ReactDOM.render(nj,this.$i.dropdownMenu.get(0))},$c:function(){this.$j.toggleLayerVisibility();if(this.$j.get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden-hover')}else{this.renderVisibilityButton('tabLayerVisibilityButton-visible-hover')}},$a:function(ni){if(!this.get_viewModel().get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-visible')}},$b:function(ni){if(this.get_viewModel().get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden')}else{this.renderVisibilityButton(this.get_viewModel().get_iconClass())}},$d:function(ni){if(this.get_viewModel().get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden-hover')}else{this.renderVisibilityButton('tabLayerVisibilityButton-visible-hover')}},$e:function(ni){if(this.get_viewModel().get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden')}else{this.renderVisibilityButton('tabLayerVisibilityButton-visible')}},$f:function(ni){switch(ni){case'disableSelection':{this.$j.disableSelection();break}case'addToZoom':{this.$j.addZoom();break}case'moveUp':{this.$j.moveUp();break}case'moveDown':{this.$j.moveDown();break}case'renameLayer':{this.$i.dropdownMenu.hide();this.$8(this.$i.titleText);break}case'hideLayer':{this.$j.hide();break}case'removeLayer':{this.$j.remove();break}default:{break}}},$g:function(){if(this.$j.get_isLayered()){this.$h.push(spiff.TableauClickHandler.targetAndDoubleClick(this.$i.titleText[0],ss.mkdel(this,this.doubleClickToEdit)))}var ni=this.$j.get_title();if(ni.length===0){ni=((this.$j.get_defaultTitle().length!==0)?this.$j.get_defaultTitle():tab.Strings.EmptyLayer)}tab.DomUtil.setNativeTooltip(this.$i.title,ni);this.$i.titleText.text(ni);if(this.$j.get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden')}else{this.renderVisibilityButton(this.get_viewModel().get_iconClass())}if(this.get_viewModel().get_isLayered()){this.renderDropdownMenu()}if(this.$j.get_isLayered()){EventUtils.DragDropManager.attachDragSource(this.$i.domRoot,this)}},startDrag:function(ni){if(tab.DomUtil.isFocusableTextElement(ni.target)){return null}this.get_viewModel().dragLayerToReorderStartCallback(this.$j.get_marksSpecId(),this.$j.get_layerIndex());var nj=new y(this.$j,new x);nj.$i.domRoot.addClass('dragAvatar');var nk=new he(this,nj,this.$j.get_layerIndex(),this.$j.get_marksSpecId());return nk},acceptsDragType:function(){return 1}});var z=global.tab.AccordionHeaderViewModel=ss.mkType(a,'tab.AccordionHeaderViewModel',function(ni,nj,nk,nl,nm){this.$9=null;this.$0=null;this.$1=null;this.$2=null;this.$3=false;this.$5=false;this.$4=false;this.$8=0;this.$7=0;this.$6=false;this.$a=0;this.dragLayerToReorderStartCallback=null;spiff.BaseViewModel.call(this);this.$8=ni.get_id();this.$7=nl;this.$a=nm;this.$9=ni.get_name();this.$0=ni.get_defaultName();this.$1=gO.getMarksCardTabIcon(ni);if(ni.get_isTableCalc()){this.$2='tabAuthPillIconTableCalc'}this.$6=nk;this.$3=ni.get_isHidden();this.$5=ni.get_isLayerSelectionDisabled();this.$4=ni.get_isInExtent();this.dragLayerToReorderStartCallback=nj},{get_marksSpecId:function(){return this.$8},get_title:function(){return this.$9},set_title:function(ni){this.$9=ni},get_defaultTitle:function(){return this.$0},set_defaultTitle:function(ni){this.$0=ni},get_isLayered:function(){return this.$6},get_layerIndex:function(){return this.$7},get_totalLayerCount:function(){return this.$a},get_iconClass:function(){return this.$1},set_iconClass:function(ni){this.$1=ni},get_iconClassTwo:function(){return this.$2},set_iconClassTwo:function(ni){this.$2=ni},get_isHidden:function(){return this.$3},get_isLayerSelectionDisabled:function(){return this.$5},get_isInExtent:function(){return this.$4},updateLayerTitle:function(ni){tab.MarksLayerClientCommands.setLayerTitle(this.$8,ni)},toggleLayerVisibility:function(){this.$3=!this.$3;tab.MarksLayerClientCommands.setOrToggleLayerIsHidden(this.$8)},disableSelection:function(){tab.MarksLayerClientCommands.setLayerSelection(this.$8)},addZoom:function(){tab.MarksLayerClientCommands.setLayerZoomExtent(this.$8)},moveUp:function(){tab.MarksLayerClientCommands.setLayerIndex(this.$8,this.$7+1)},moveDown:function(){if(this.$7===0){return}tab.MarksLayerClientCommands.setLayerIndex(this.$8,this.$7-1)},hide:function(){tab.MarksLayerClientCommands.setOrToggleLayerIsHidden(this.$8)},remove:function(){tab.MarksLayerClientCommands.removeLayer(this.$7)}});var A=global.tab.AccordionItem=ss.mkType(a,'tab.AccordionItem',function(ni,nj,nk,nl,nm){this.$2=null;this.$0=null;this.$3=0;this.$1=null;var nn=(nj.get_isTableCalc()?(nn='tabAuthPillIconTableCalc'):'');var no=new z(nj,ss.mkdel(ni,ni.dragLayerToReorderStart),ni.get_isLayered(),nl,nm);this.$2=tab.ObjectRegistry.newView(y).call(null,[no]);this.$0=nk;this.$3=nj.get_id();this.$1=nj.get_dataSourceName()},{get_header:function(){return this.$2},set_header:function(ni){this.$2=ni},get_content:function(){return this.$0},set_content:function(ni){this.$0=ni},get_marksSpecificationId:function(){return this.$3},get_dataSourceName:function(){return this.$1}});var B=global.tab.AccordionItemTemplate=ss.mkType(a,'tab.AccordionItemTemplate',function(ni){this.content=null;this.header=null;spiff.Template.call(this,ni);this.header=this.getElementBySelector('.tabAccordionItemHeader');this.content=this.getElementBySelector('.tabAccordionItemContent');this.domRoot.on('dragover',function(nj){nj.preventDefault()});this.domRoot.on('dragleave',function(nj){nj.preventDefault()});this.domRoot.on('dragenter',function(nj){nj.preventDefault()})},null,{createDefault:function(){return new B($("<div class='tabAccordionItem'>\n            <div class='tabAccordionItemHeader'></div>\n            <div class='tabAccordionItemContent'></div>\n            </div>"))}});var C=global.tab.AccordionTemplate=ss.mkType(a,'tab.AccordionTemplate',function(){this.itemsContainer=null;this.layersDropTargetsContainer=null;this.layersDropTargetsGlass=null;spiff.Template.call(this,$("<div class='tabAccordion'>\n            <div class='tabAccordionItems'></div>\n            <div class='layersDropTargetsContainer'></div>\n            <div class='layersDropTargetsGlass'></div>\n            </div>"));this.itemsContainer=this.getElementBySelector('.tabAccordionItems');this.layersDropTargetsContainer=this.getElementBySelector('.layersDropTargetsContainer');this.layersDropTargetsGlass=this.getElementBySelector('.layersDropTargetsGlass')},{get_allItems:function(){return this.getElementsBySelector('.tabAccordionItem')}});var D=global.tab.AccordionView=ss.mkType(a,'tab.AccordionView',function(ni,nj){this.$g=null;this.$f=null;this.$d=[];this.$e=[];this.$c=[];ss.makeGenericType(spiff.BaseView$1,[E]).call(this,ni,nj);this.$g=ni;this.$f=nj;this.update()},{dispose:function(){this.removeViews();ss.makeGenericType(spiff.BaseView$1,[E]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[E]).prototype.onViewModelPropertyChanged.call(this,ni,nj);switch(nj.get_propertyName()){case'AllItems':{this.update();break}case'ActiveItem':{this.$7(this.$g.get_activeItem());break}case'DragToReorderLayers':{this.$b();break}}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$a()},$a:function(){if(!this.addedToDom){return}this.$d.forEach(function(ni){var nj=ss.safeCast(ni,spiff.Widget);if(ss.isValue(nj)){nj.onAddedToDom()}})},removeViews:function(){for(var ni=0;ni<this.$d.length;ni++){var nj=this.$d[ni];nj.dispose()}ss.clear(this.$d);for(var nk=0;nk<this.$e.length;nk++){var nl=this.$e[nk];EventUtils.DragDropManager.removeDragSource(nl.get_template().domRoot);nl.dispose()}ss.clear(this.$e);this.$f.itemsContainer.children().remove();this.$f.layersDropTargetsContainer.children().remove();this.$f.layersDropTargetsGlass.children().remove();this.$9()},$9:function(){this.$c.forEach(function(ni){ni.dispose()});ss.clear(this.$c)},update:function(){this.removeViews();var ni=this.$g.get_items();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];if(nk.get_marksSpecificationId()===this.$g.get_defaultMarksSpecId()&&this.$g.get_isLayered()){continue}var nl=B.createDefault();var nm=spiff.TableauClickHandler.targetAndClick(nl.header[0],this.$8(nk));nm.set_stopPropagationOnEvent(false);this.$c.push(nm);nl.domRoot.data('tabAccordionItem',nk);nl.header.append(nk.get_header().element);this.$e.push(nk.get_header());nl.content.hide();var nn=tab.ObjectRegistry.newView$1(ss.makeGenericType(tab.IView$1,[tab.IViewModel])).call(null,nk.get_content().get_viewType(),[nk.get_content().get_viewModel()]);this.$d.push(nn);nl.content.append(nn.get_rootElement());if(this.$g.get_isLayered()){this.$f.itemsContainer.prepend(nl.domRoot)}else{this.$f.itemsContainer.append(nl.domRoot)}}if(this.$g.get_isLayered()&&(!ss.isValue(this.$g.get_activeItem())||this.$g.get_activeItem().get_marksSpecificationId()===this.$g.get_defaultMarksSpecId())){this.$g.set_activeItem(this.$g.get_items()[this.$g.get_items().length-1])}else{this.$7(this.$g.get_activeItem())}this.$a()},$8:function(ni){return ss.mkdel(this,function(){this.$g.set_activeItem(ni)})},$7:function(ni){var nj=this.$f.domRoot.find('.tabAccordionActive').length>0;var nk=this.$f.get_allItems().get();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=$(nm);var no=new B(nn);var np=ss.referenceEquals(nn.data('tabAccordionItem'),ni);no.domRoot.toggleClass('tabAccordionActive',np);no.domRoot.toggleClass('tabAccordionNotActive',!np);if(np){if(nj){no.content.slideDown('fast')}else{no.content.show()}this.$g.triggerSlideDownAction()}else if(no.content.is(':visible')){if(nj){no.content.slideUp('fast')}else{no.content.hide()}}}},$b:function(){if(!this.$g.get_isLayered()){return}var ni=this.$g.indexOfLayerBeingDragged;if(ni===-1){this.$f.layersDropTargetsGlass.children().remove();this.$f.layersDropTargetsContainer.children().remove();return}for(var nj=0;nj<this.$g.get_items().length;nj++){var nk=new hi(ss.mkdel(this.$g,this.$g.setLayerIndexClientSide),nj);if(nj===this.$g.get_items().length-1){nk.isTopMostDropTarget=true}var nl=0;if(nj>0){var nm=this.$g.get_items()[nj];if(nm.get_marksSpecificationId()===this.$g.get_activeItem().get_marksSpecificationId()){nl=this.$f.getElementBySelector('.tabAccordionActive').find('.tabAccordionItemContent').outerHeight()}}if(nj===this.$g.indexOfLayerBeingDragged||nj-1===this.$g.indexOfLayerBeingDragged){nl+=y.headerHeight;var nn=new hk(ss.trunc(nl));var no=new hl(nk,nn);this.$f.layersDropTargetsContainer.prepend(no.get_template().domRoot);continue}var np=new hh(nk,new hg(ss.trunc(nl)));this.$f.layersDropTargetsContainer.prepend(np.get_template().domRoot)}}});var E=global.tab.AccordionViewModel=ss.mkType(a,'tab.AccordionViewModel',function(){this.$1=0;this.$2=false;this.$3=[];this.indexOfLayerBeingDragged=-1;this.marksSpecIdBeingDragged=-1;this.$0=null;this.$2$1=null;spiff.BaseViewModel.call(this)},{add_slideDownTriggered:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_slideDownTriggered:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_defaultMarksSpecId:function(){return this.$1},set_defaultMarksSpecId:function(ni){this.$1=ni},get_isLayered:function(){return this.$2},set_isLayered:function(ni){this.$2=ni},get_items:function(){return this.$3},get_activeItem:function(){return this.$0},set_activeItem:function(ni){if(ss.referenceEquals(this.$0,ni)){return}if(ss.isValue(this.$0)&&ss.isValue(this.$0.get_content())){this.$0.get_content().set_active(false)}var nj=this.$0;this.$0=ni;if(ss.isValue(this.$0)&&ss.isValue(this.$0.get_content())){this.$0.get_content().set_active(true)}if(ss.isValue(this.$0)){if(ss.isNullOrUndefined(nj)||!ss.referenceEquals(nj.get_dataSourceName(),this.$0.get_dataSourceName())){tab.SchemaClientCommands.setActiveDataSourceName(this.$0.get_dataSourceName(),false)}if(ss.isNullOrUndefined(nj)||nj.get_marksSpecificationId()!==this.$0.get_marksSpecificationId()){var nk={};nk['worksheet']=tsConfig.current_sheet_name;nk['paneSpec']=this.$0.get_marksSpecificationId();var nl=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-active-layer'},nk);tab.ServerCommands.executeServerCommand(nl,'none',null,null)}}this.notifyPropertyChanged('ActiveItem')},updateItems:function(ni){ss.clear(this.$3);ss.arrayAddRange(this.$3,ni);var nj=false;if(ss.isValue(this.$0)){for(var nk=0;nk<this.$3.length;nk++){var nl=this.$3[nk];if(nl.get_marksSpecificationId()===this.$0.get_marksSpecificationId()){nj=true;break}}}if(!nj){this.set_activeItem(null)}this.notifyPropertyChanged('AllItems')},dragLayerToReorderStart:function(ni,nj){this.marksSpecIdBeingDragged=ni;this.indexOfLayerBeingDragged=nj;this.notifyPropertyChanged('DragToReorderLayers')},setLayerIndexClientSide:function(ni,nj){var nk=this.$3[ni];ss.removeAt(this.$3,ni);ss.insert(this.$3,nj,nk);this.notifyPropertyChanged('AllItems')},triggerSlideDownAction:function(){this.raiseActionEvent(this.$2$1)}});var F=global.tab.AddDashboardObjectDragAvatarView=ss.mkType(a,'tab.AddDashboardObjectDragAvatarView',function(ni){ss.makeGenericType(spiff.BaseView$1,[G]).call(this,ni,spiff.Template.fromHtml(''));this.$7();this.get_viewModel().add_displayStateChanged(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_displayStateChanged(ss.mkdel(this,this.$7))}))},{$7:function(){var ni=this.get_viewModel().dragInstance;var nj=ni.get_dragAvatar();var nk=nj.get_rootElement();nk.addClass('tab-ZoneDragAvatarContainer');var nl=nk.children().first();var nm=this.get_viewModel().get_floatingDisplayRect();el.updateSizeAndPosition(nl,nm);var nn=this.get_viewModel().get_isFloating()&&this.get_viewModel().get_isOverTarget();nk.toggle(nn)}});var G=global.tab.AddDashboardObjectDragAvatarViewModel=ss.mkType(a,'tab.AddDashboardObjectDragAvatarViewModel',function(ni,nj){this.dragInstance=null;co.call(this,nj);this.dragInstance=ni;this.onDisplayStateChanged();var nk=ss.mkdel(this,function(){this.onDisplayStateChanged()});ni.add_shiftStateChanged(nk);this.disposables.add(function(){ni.remove_shiftStateChanged(nk)})},{get_payload:function(){return this.dragInstance.get_payload()},get_isFloating:function(){return this.dragInstance.isShiftDrag!==this.get_payload().addAsFloating}});var H=global.tab.AddDashboardObjectDragDropViewModel=ss.mkType(a,'tab.AddDashboardObjectDragDropViewModel',function(ni,nj,nk){this.$6=null;this.$7=null;this.$5=null;cn.call(this,nj);this.$6=ni;this.$7=this.$6.get_payload();this.$5=nk;this.initialize()},{onDragStart:function(){this.updateProps$1(this.dragProperties.floatingProps);this.$5.done(ss.mkdel(this,function(ni){this.dragProperties.tileDropTargets=ss.arrayClone(ni.targetPreviewPairs.map(this.dragProperties.dropTargetGenerator));this.dragProperties.tiledZoneBorders=ni.zoneBorders;this.dragProperties.tiledContainerGuides=ni.containerGuides;this.updatePropsOrResetToDefaultForFloating();this.$6.add_shiftStateChanged(ss.mkdel(this,this.updatePropsOrResetToDefaultForFloating))}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_shiftStateChanged(ss.mkdel(this,this.updatePropsOrResetToDefaultForFloating))})))},isDraggedForFloating:function(){return this.$6.isShiftDrag!==this.$7.addAsFloating},$4:function(){return{dragInstanceType:this.$7.dragInstanceType,dashboardObjectIdentifer:this.$7.dashboardObjectIdentifer,addAsFloating:this.isDraggedForFloating()}},handleDropWithDashboardDropLocation:function(ni,nj){var nk={dashboardObjectDragDrop:this.$4(),dropLocation:{x:ni.x,y:ni.y}};tab.ApplicationModel.get_instance().raiseNotification('doc:accept-drop-event',nk,null)}});var I=global.tab.AddressingDragAvatar=ss.mkType(a,'tab.AddressingDragAvatar',function(ni){this.$0=null;var nj="<span class='tab-icon-toggle tab-unification-check tabCheckboxListItemDragAvatar'>\n    <span class='icon'><span class='innerIcon tab-img-check'></span></span>\n    <span class='label'></span>\n</span>";this.$0=$(nj);var nk=ni.get_data();if(ss.isValue(nk)){this.$0.find('.label').text(nk.get_addressingName()).attr('title',nk.get_addressingName())}this.$0.toggleClass('selected',ni.get_selected())},{get_rootElement:function(){return this.$0},get_viewModel:function(){return null},dispose:function(){this.$0=null},addToDom:function(ni){ni.append(this.get_rootElement());this.onAddedToDom()},onAddedToDom:function(){}});var J=global.tab.AddressingItemsBuilder=ss.mkType(a,'tab.AddressingItemsBuilder',function(){this.addressingFieldNames=null;this.addressingCaptions=null;this.selectedAddressingIndexes=null;this.invalidAddressingIndexes=null},{create:function(){this.$2();var ni=new spiff.ListItemViewModelCollectionBuilder;ni.itemDatas=this.$0();ni.selectionIndexes=this.$1();ni.invalidIndexes=this.invalidAddressingIndexes;ni.itemIds=J.$0(this.addressingFieldNames.length);var nj=ni;return nj.create()},$2:function(){tab.Param.verifyValue(this.addressingFieldNames,'AddressingFieldNames');tab.Param.verifyValue(this.addressingCaptions,'AddressingCaptions');tab.Param.verifyValue(this.selectedAddressingIndexes,'SelectedAddressingIndexes');tab.Param.verifyValue(this.invalidAddressingIndexes,'InvalidAddressingIndexes')},$0:function(){var ni=[];for(var nj=0,nk=this.addressingFieldNames.length;nj<nk;++nj){var nl=new iV;nl.set_addressingValue(this.addressingFieldNames[nj]);nl.set_addressingName(this.addressingCaptions[nj]);ni.push(nl)}return ni},$1:function(){var ni=_.union(this.selectedAddressingIndexes,this.invalidAddressingIndexes);var nj=_.sortBy(ni,function(nl){return nl});var nk=_.uniq(nj,true);return nk}},{$0:function(ni){var nj=[];for(var nk=0;nk<ni;++nk){nj.push('orderAddrOption_'+nk)}return nj}});var K=global.tab.AggregationSelection=ss.mkType(a,'tab.AggregationSelection',function(){this.selectedField=null;this.isRelativeDate=false});var L=global.tab.AggregationSelectionDialog=ss.mkType(a,'tab.AggregationSelectionDialog',function(ni,nj,nk,nl){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=false;tab.BaseDisposableDialog.call(this);this.$9(ni);this.$b(nj);this.$5(nk);this.$7(nl)},{$a:function(){return this.$2$1},$b:function(ni){this.$2$1=ni},$4:function(){return this.$2$2},$5:function(ni){this.$2$2=ni},$8:function(){return this.$2$3},$9:function(ni){this.$2$3=ni},$6:function(){return this.$2$4},$7:function(ni){this.$2$4=ni},$3:function(){if(ss.isNullOrUndefined(L.$2)){this.parentNode=document.createElement('div');var ni={aggregationList:this.$8(),cancel:ss.mkdel(this,this.$1),select:ss.mkdel(this,this.$2),confirmButtonText:(this.$6()?tab.Strings.DialogButtonNext:tab.Strings.DialogButtonOK)};L.$2=React.createElement(M,ni);ReactDOM.render(L.$2,this.parentNode)}},$2:function(ni){if(!ss.staticEquals(this.$a(),null)){this.$a()(ni)}this.$0()},$1:function(){if(!ss.staticEquals(this.$4(),null)){this.$4()()}this.$0()},$0:function(){L.$2=null;_.defer(ss.mkdel(this,this.dispose))}},{showAggregationSelection:function(ni,nj){(new L(ni,nj,null,false)).$3()},$0:function(ni,nj){var nk=ni;(new L(nk.filterSelectMeasure,function(nl){var nm=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nk.simpleCommandModel).get_simpleCommand(),false);var nn=nm.commandParams||{};nn['globalFieldName']=nl.selectedField.pm.fn;nn['forceRelativeDate']=nl.isRelativeDate;nm.commandParams=nn;tab.ServerCommands.executeServerCommand(nm,'immediately',null,null)},function(){var nl=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nk.simpleCommandModel).get_simpleCommand(),false);if(ss.isValue(nl.commandParams)&&ss.getKeyCount(nl.commandParams)===1&&ss.keyExists(nl.commandParams,'simpleCommandModel')){var nm=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'close-quantitative-filter-dialog'},nl.commandParams);tab.ServerCommands.executeServerCommand(nm,'immediately',null,null)}},true)).$3()}});var M=global.tab.AggregationSelectionDialogComponent=ss.mkType(a,'tab.AggregationSelectionDialogComponent',function(ni){this.$6=null;spiff.PureRenderComponent.call(this,ni);this.state={selectedAggregation:null};this.$6=this.$1()},{render:function(){return React.createElement(SharedWidgets.DialogWidget,{children:this.$2(),testId:'AggregationSelectionDialog',isModal:true,type:0,positioningBehavior:0,dialogWidth:375,dialogBodyStyle:{display:'flex'},footerContent:this.$3(),onCloseRequest:this.props.cancel,shouldAdjustPositionOnWindowResize:true,shouldReturnFocusOnClose:true,showFooter:true,title:this.props.aggregationList.caption,zIndex:1000})},$3:function(){var ni=React.createElement(SharedWidgets.ButtonWidget,{buttonType:2,handleClick:ss.mkdel(this,function(nk){this.$5()}),testId:'okAggregation',children:this.props.confirmButtonText,disabled:ss.isNullOrUndefined(this.state.selectedAggregation),style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace}});var nj=React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:ss.mkdel(this,function(nk){this.props.cancel()}),testId:'cancelAggregation',children:tab.Strings.DialogButtonCancel});return spiff.DOMElements.div({className:'tab-agg-selection-footer'},nj,ni)},$2:function(){var ni=spiff.DOMElements.div({},this.props.aggregationList.subtitle);return spiff.DOMElements.div({className:'tab-agg-selection-content'},ni,this.$0())},$0:function(){var ni;if(ss.isValue(this.state.selectedAggregation)){ni=(this.state.selectedAggregation.isRelativeDate?'relativeDate':this.state.selectedAggregation.selectedField.pm.fn.toString())}else{ni=''}var nj=React.createElement(SharedWidgets.List,{items:this.$6,onSelect:ss.mkdel(this,this.$4),selectedValue:ni,testId:'aggregation-list',style:{borderWidth:'1px',borderStyle:'solid',borderColor:SharedWidgets.TabStyles.Colors.F4,marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace,marginBottom:SharedWidgets.TabStyles.Spacing.MediumSpace,paddingLeft:'0px',paddingRight:'0px'}});return nj},$1:function(){var ni=[];var nj=0;var nk=0;for(nj=0;nj<this.props.aggregationList.fieldDisplayList.length;nj++){var nl=this.props.aggregationList.fieldDisplayList[nj];var nm=nj===this.props.aggregationList.indiexRelativeDateField;if(nl.isSelected){var nn=new K;nn.selectedField=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findField(nl.fn);nn.isRelativeDate=nm;this.setState({selectedAggregation:nn})}if(nl.showSeparator){ni.push({separator:true,value:'separator'+nk++})}var no=(nm?'relativeDate':nl.fn.toString());ni.push({content:spiff.DOMElements.div({onDoubleClick:ss.mkdel(this,function(np){this.$5()}),key:no,className:'tab-aggregation-option',title:nl.fieldCaption,style:{display:'flex',fontWeight:((this.props.aggregationList.indexSelectedItem===nj)?'bold':'normal')}},spiff.DOMElements.div({className:gO.getFieldIcon(nl.iconRes)}),spiff.DOMElements.div({style:{paddingBottom:SharedWidgets.TabStyles.Spacing.SmallSpace,alignSelf:'flex-end'}},nl.fieldCaption)),value:no})}return Array.prototype.slice.call(ni)},$4:function(ni){var nj=ni==='relativeDate';var nk=(nj?this.props.aggregationList.fieldDisplayList[this.props.aggregationList.indiexRelativeDateField].fn.toString():ni);var nl=new K;nl.selectedField=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findField(nk);nl.isRelativeDate=nj;var nm=nl;this.setState({selectedAggregation:nm})},$5:function(){if(ss.isValue(this.state.selectedAggregation)){this.props.select(this.state.selectedAggregation)}}});var N=global.tab.AliasDialogEditProxy=ss.mkType(a,'tab.AliasDialogEditProxy');var O=global.tab.AnalyticsDragAvatar=ss.mkType(a,'tab.AnalyticsDragAvatar',function(ni){ss.makeGenericType(spiff.BaseView$1,[Y]).call(this,ni,new P(ni.get_analyticsItem().name))});var P=global.tab.AnalyticsDragAvatarTemplate=ss.mkType(a,'tab.AnalyticsDragAvatarTemplate',function(ni){spiff.Template.call(this,$("\n        <span class='tabAuthAnalyticsDragAvatar'>\n            <div class='tabAuthAnalyticsDragAvatarLabel'></div>\n        </span>"));this.getElementBySelector('.tabAuthAnalyticsDragAvatarLabel').text(ni)});var Q=global.tab.AnalyticsDropSpot=ss.mkType(a,'tab.AnalyticsDropSpot',function(ni,nj){this.$1=null;this.$0=null;this.$1=ni;this.$0=nj},{get_command:function(){return(ss.isValue(this.$1)?this.$1.simpleCommandModel:null)},get_axis:function(){return this.$0},get_feedbackType:function(){return'dropfeedbackuponentry'},directMatch:function(ni){return ss.isValue(ni)&&ss.referenceEquals(this.get_command(),ni.get_command())&&(ss.referenceEquals(this.$0,ni.$0)||ss.isNullOrUndefined(ni.$0))},indirectMatch:function(ni){return ss.isValue(ni)&&(ss.referenceEquals(this.get_command(),ni.get_command())||ss.isNullOrUndefined(this.get_command())||ss.isNullOrUndefined(ni.get_command()))&&(ss.referenceEquals(this.get_command(),ni.get_command())||ss.referenceEquals(this.$0,ni.$0)||ss.isNullOrUndefined(this.$0)||ss.isNullOrUndefined(ni.$0))},dragOver:function(ni){var nj=ss.safeCast(ni.get_payload(),U);if(ss.isValue(nj)){nj.setHoveredTarget(this)}return this},dragExit:function(ni){var nj=ss.safeCast(ni.get_payload(),U);if(ss.isValue(nj)){nj.removeHoveredTarget(this)}},acceptDrop:function(ni){var nj=ss.safeCast(ni.get_payload(),U);var nk=$.Deferred();var nl=ss.isValue(nj)&&ss.isValue(this.get_command());nk.resolve(nl);if(nl){nj.executeDropCommand(this)}return nk},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.copy}});var R=global.tab.AnalyticsDropTargetAxisRowTemplate=ss.mkType(a,'tab.AnalyticsDropTargetAxisRowTemplate',function(){this.axisHeader=null;spiff.Template.call(this,$("<div class='tabAdAxisRow'><span class='tabAdAxisName tabAdAxisCell'></span></div>"));this.axisHeader=this.getElementBySelector('.tabAdAxisName')},{setAxisName:function(ni){this.axisHeader.text(ni)},$1:function(){var ni=$("<span class='tabAdAxisDropSpotHolder'><span class='tabAdAxisDropSpot'></span></span>");this.domRoot.append(ni);return ni}});var S=global.tab.AnalyticsDropTargetTemplate=ss.mkType(a,'tab.AnalyticsDropTargetTemplate',function(){this.horizontalDivider=null;this.axisHolder=null;this.axisListScroller=null;this.axisList=null;this.axisScrollTopSpot=null;this.axisScrollBottomSpot=null;this.$1=null;spiff.Template.call(this,$("<div class='tabAdDropTarget'><div class='tabAdHeaderRow'><span class='tabAdDropTitle tabAdAxisCell'><div class='tabAdDropInstructionTextPre'></div><div class='tabAdDropLabel'></div><div class='tabAdDropInstructionTextPost'></div></span></div><div class='tabAdHorizontalDivider'></div><div class='tabAdAxisHolder'><div class='tabAdAxisListScroller'><div class='tabAdAxisList'></div><div class='tabAdScrollHoverTop'></div><div class='tabAdScrollHoverBottom'></div></div></div></div>"));this.horizontalDivider=this.getElementBySelector('.tabAdHorizontalDivider');this.axisHolder=this.getElementBySelector('.tabAdAxisHolder');this.axisListScroller=this.getElementBySelector('.tabAdAxisListScroller');this.axisList=this.getElementBySelector('.tabAdAxisList');this.$1=this.getElementBySelector('.tabAdDropLabel');this.axisScrollTopSpot=this.getElementBySelector('.tabAdScrollHoverTop');this.axisScrollBottomSpot=this.getElementBySelector('.tabAdScrollHoverBottom')},{setDropLabel:function(ni){var nj=ni;var nk=nj.split('|');this.getElementBySelector('.tabAdDropInstructionTextPre').text(nk[0]);this.$1.text(nk[1]);this.getElementBySelector('.tabAdDropInstructionTextPost').text(nk[2])},addDropColumnHeader:function(ni,nj,nk){var nl=$("<span class='tabAdAreaDropSpot tabAdDropCell'><div class='tabAdAreaDropImage'></div><div class='tabAdAreaDropLabel'></div></span>");var nm=nl.find('.tabAdAreaDropLabel');var nn=ni.split('\n');for(var no=0;no<nj;++no){var np=$('<div></div>');if(no<nn.length){np.text(nn[no])}else{np.html('&nbsp;')}nm.append(np)}nl.find('.tabAdAreaDropImage').addClass(nk);this.getElementBySelector('.tabAdHeaderRow').append(nl);return nl}});var T=global.tab.AnalyticsDropTargetView=ss.mkType(a,'tab.AnalyticsDropTargetView',function(ni,nj){this.$g=null;this.$f=[];ss.makeGenericType(spiff.BaseView$1,[U]).call(this,ni,new S);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$a));var nk=new gB(nj);nk.set_opaque(true);this.$g=nk;this.$g.show();this.$9(nj);if(tab.FeatureParamsLookup.getBool(31)===true){this.$g.set_opaque(false);EventUtils.DragDropManager.attachDropTarget(this.$g.element,this.$g)}},{$d:function(){return this.get_template()},$e:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7();this.$8();this.$b();this.element.css('visibility','visible')},$7:function(){var ni=tab.DoubleUtil.roundToInt(this.element.find('.tabAdDropTitle').width());var nj=this.element.find('.tabAdAxisName');for(var nk=0,nl=nj.length;nk<nl;nk++){if(nj.eq(nk).width()!==ni){nj.eq(nk).width(ni)}}},$8:function(){var ni=this.element.find('.tabAdAxisRow');if(ni.length===0){return}var nj=this.element.find('.tabAdDropCell');for(var nk=0;nk<nj.length;nk++){var nl=tab.DoubleUtil.roundToInt(nj.eq(nk).width());var nm=ni.find('.tabAdAxisDropSpotHolder:eq('+nk+')');if(nm.width()!==nl){nm.width(nl)}}},dispose:function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$a));this.$g.dispose();ss.makeGenericType(spiff.BaseView$1,[U]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[U]).prototype.onViewModelPropertyChanged.call(this,ni,nj);this.$c()},$c:function(){var ni=this.$e().get_hoverTarget();for(var nj=0;nj<this.$f.length;nj++){var nk=this.$f[nj];nk.item1.toggleClass('tabDirectHover',nk.item2.directMatch(ni));nk.item1.toggleClass('tabIndirectHover',nk.item2.indirectMatch(ni))}},$9:function(ni){ss.clear(this.$f);this.$d().setDropLabel(this.$e().get_dropLabel());var nj=1;var nk=this.$e().get_dropZoneItems();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nj=Math.max(nj,nm.label.toString().split('\n').length)}var nn=this.$e().get_dropZoneItems();for(var no=0;no<nn.length;no++){var np=nn[no];var nq=this.$d().addDropColumnHeader(np.label,nj,ba.getClassNameForIcon(np.imageRes,'tabAuthAnalyticsPaneDrop'));if(np.isEnabled){var nr=new Q(np,null);this.$f.push({item1:nq,item2:nr})}else{nq.addClass('tabAdDropDisabled')}nq.get(0).id=tab.DomUtil.makeHtmlSafeId('tabAoDropTarget-'+np.label)}if(this.$e().get_showDropMeasures()){var ns=this.$e().get_dropMeasureNamePairs();for(var nt=0;nt<ns.length;nt++){var nu=ns[nt];var nv=new R;var nw=nu.fieldCaption;nv.setAxisName(nw);var nx=new Q(null,nu);this.$f.push({item1:nv.axisHeader,item2:nx});var ny=this.$e().get_dropZoneItems();for(var nz=0;nz<ny.length;nz++){var nA=ny[nz];var nB=nv.$1();if(nA.isEnabled){nx=new Q(nA,nu);this.$f.push({item1:nB,item2:nx})}else{nB.css('visibility','hidden')}nB.get(0).id=tab.DomUtil.makeHtmlSafeId('tabAoDropTarget-'+nw+nA.label)}this.$d().axisList.append(nv.domRoot)}var nC=tab.DoubleUtil.roundToInt($(ni).height())-90;this.$d().axisListScroller.css('max-height',nC+'px');var nD=new bc(-1,this.$d().axisListScroller,ss.mkdel(this,this.$b));var nE=new bc(1,this.$d().axisListScroller,ss.mkdel(this,this.$b));EventUtils.DragDropManager.attachDropTarget(this.$d().axisScrollTopSpot,nD);EventUtils.DragDropManager.attachDropTarget(this.$d().axisScrollBottomSpot,nE)}else{this.$d().horizontalDivider.hide()}for(var nF=0;nF<this.$f.length;nF++){var nG=this.$f[nF];EventUtils.DragDropManager.attachDropTarget(nG.item1,nG.item2)}},$b:function(){var ni=this.$d().axisListScroller;var nj=tab.DoubleUtil.roundToInt(ni.scrollTop());if(nj===0){this.$d().axisScrollTopSpot.hide()}else{this.$d().axisScrollTopSpot.show()}var nk=tab.DoubleUtil.roundToInt(this.$d().axisList.height());if(nk===0||tab.DoubleUtil.roundToInt(ni.scrollTop())+parseInt(ni.css('max-height'))>=nk){this.$d().axisScrollBottomSpot.hide()}else{this.$d().axisScrollBottomSpot.show()}},$a:function(ni){this.dispose()}});var U=global.tab.AnalyticsDropTargetViewModel=ss.mkType(a,'tab.AnalyticsDropTargetViewModel',function(ni,nj,nk){this.$1=null;this.$0=null;this.$2=null;this.$3=null;spiff.BaseViewModel.call(this);this.$0=ni;this.$1=nj;this.$2=nk},{get_dropLabel:function(){return this.$1.label},get_showDropMeasures:function(){return this.$1.showDropMeasures},get_dropZoneItems:function(){return this.$1.dropZoneItems},get_dropMeasureNamePairs:function(){return this.$0},get_hoverTarget:function(){return this.$3},set_hoverTarget:function(ni){this.$3=ni;this.notifyPropertyChanged('HoverTarget')},executeDefaultAddCommand:function(){if(ss.isValue(this.$2)){this.$2()}},executeDropCommand:function(ni){var nj=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(ni.get_command()).get_simpleCommand(),false);var nk=[];if(ss.isValue(ni.get_axis())){nk.push(ni.get_axis().fn)}else{for(var nl=0;nl<this.$0.length;nl++){var nm=this.$0[nl];nk.push(nm.fn)}}if(nk.length>0){nj.commandParams['fieldVector']=nk}tab.ServerCommands.executeServerCommand(nj,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(null),null)},setHoveredTarget:function(ni){if(ss.isNullOrUndefined(ni.get_command())){ni=null}this.set_hoverTarget(ni)},removeHoveredTarget:function(ni){if(ss.referenceEquals(this.$3,ni)){this.set_hoverTarget(null)}},getAxisDisplayName:function(ni){return tab.ModelUtils.findContentDashboard(null).get_activeVisual().get_vizDataModel().getVizDataField(ni).get_fieldCaption()}});var V=global.tab.AnalyticsListHeaderTemplate=ss.mkType(a,'tab.AnalyticsListHeaderTemplate',function(ni){spiff.Template.call(this,$("<div class='tabAnalyticsListHeader'><span class='tabAnalyticsListHeaderName'></span></div>"));var nj=this.getElementBySelector('.tabAnalyticsListHeaderName');nj.text(ni)});var W=global.tab.AnalyticsListItemTemplate=ss.mkType(a,'tab.AnalyticsListItemTemplate',function(){this.icon=null;this.name=null;spiff.Template.call(this,$("<div class='tabAnalyticsListItem'><span class='tabAnalyticsListItemIcon'></span><span class='tabAnalyticsListItemName'></span></div>"));this.icon=this.getElementBySelector('.tabAnalyticsListItemIcon');this.name=this.getElementBySelector('.tabAnalyticsListItemName')});var X=global.tab.AnalyticsListItemView=ss.mkType(a,'tab.AnalyticsListItemView',function(ni){ss.makeGenericType(spiff.BaseView$1,[Y]).call(this,ni,new W);this.$8().name.text(this.get_itemViewModel().get_analyticsItem().name);spiff.Widget.disableTextSelectionOnElement(this.$8().name);var nj=ba.getClassNameForIcon(this.get_itemViewModel().get_analyticsItem().iconRes,null);this.$8().icon.addClass(nj);var nk=this.disposables;var nl=spiff.TableauClickHandler.target(this.element[0]);var nm=this.get_itemViewModel();nk.add$1(nl.onDoubleClick(ss.mkdel(nm,nm.executeDefaultAddCommand)));this.$7()},{get_itemViewModel:function(){return this.get_viewModel()},$8:function(){return this.get_template()},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[Y]).prototype.onViewModelPropertyChanged.call(this,ni,nj);this.$7()},$7:function(){var ni=this.$8().domRoot;ni.toggleClass('disabled',!this.get_itemViewModel().get_analyticsItem().isEnabled);ni.attr('title',this.get_itemViewModel().get_analyticsItem().analyticsItemTooltip)}});var Y=global.tab.AnalyticsListItemViewModel=ss.mkType(a,'tab.AnalyticsListItemViewModel',function(ni,nj){this.$0=null;this.$1=null;spiff.BaseViewModel.call(this);this.$0=ni;this.$1=nj},{get_analyticsItem:function(){return this.$0},startDrag:function(ni){if(this.get_analyticsItem().isEnabled){var nj=new U(this.$1,this.$0.dropTargetInfo,ss.mkdel(this,this.executeDefaultAddCommand));return new EventUtils.DragInstance(nj,new O(this))}return null},acceptsDragType:function(){return 1},executeDefaultAddCommand:function(){if(!this.get_analyticsItem().isEnabled){return}if(ss.isValue(this.$0.simpleCommandModel)){var ni=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(this.$0.simpleCommandModel).get_simpleCommand(),false);tab.ServerCommands.executeServerCommand(ni,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(null),null)}}});var Z=global.tab.AnalyticsPaneTemplate=ss.mkType(a,'tab.AnalyticsPaneTemplate',function(){spiff.Template.call(this,$("<div class='tabAnalyticsPane'></div>"))});var ba=global.tab.AnalyticsPaneView=ss.mkType(a,'tab.AnalyticsPaneView',function(ni){this.$b=[];ss.makeGenericType(spiff.BaseView$1,[bb]).call(this,ni,new Z);this.$9();EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$8))})))},{$a:function(){return this.get_viewModel()},dispose:function(){this.$7();ss.makeGenericType(spiff.BaseView$1,[bb]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(ni,nj){this.$9()},$9:function(){this.$7();var ni=true;var nj=this.$a().get_analyticsItemViewModelLists();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];var nm=new V(nl.item1);this.element.append(nm.domRoot);if(ni){ni=false}else{nm.domRoot.addClass('tabAnalyticsListHeaderSpacer')}for(var nn=0;nn<nl.item2.length;nn++){var no=nl.item2[nn];var np=new X(no);this.element.append(np.element);this.$b.push(np);EventUtils.DragDropManager.attachDragSource(np.element,np.get_itemViewModel())}}},$7:function(){this.element.children().remove();for(var ni=0;ni<this.$b.length;ni++){var nj=this.$b[ni];nj.dispose()}ss.clear(this.$b)},$8:function(ni){var nj=ss.safeCast(ni.get_payload(),U);if(ss.isNullOrUndefined(nj)){return}var nk=$("<div class='tabAuthTempGlassForDropTarget'></div>");nk.css({position:'absolute',top:0+'px',bottom:0+'px',left:0+'px',right:0+'px'});$('.dashboardSpacer').append(nk);var nl=new T(nj,nk.get(0));nl.addToDom(nk);var nm=function(){nk.remove()};nl.add_disposed(nm);this.disposables.add$1(new tab.CallOnDispose(function(){nl.remove_disposed(nm)}))}},{getClassNameForIcon:function(ni,nj){nj=ss.coalesce(nj,'tabAuthAnalyticsPane');return nj+'-'+tab.TabResources.getResourceName(tab.TabResources.lookupFullResourceAlias(ni))}});var bb=global.tab.AnalyticsPaneViewModel=ss.mkType(a,'tab.AnalyticsPaneViewModel',function(){this.$2=null;spiff.BaseViewModel.call(this)},{get_title:function(){return tab.Strings.AuthLeftPaneTabLabelAnalytics},get_id:function(){return'analytics'},get_contentViewType:function(){return ba},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return null},get_analyticsItemViewModelLists:function(){var ni=[];if(ss.isValue(this.$2)){var nj=this.$2.get_analyticsPresModel().analyticsObjectGroups;for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];var nm=[];if(ss.isValue(nl.analyticsObjectItems)){for(var nn=0;nn<nl.analyticsObjectItems.length;nn++){var no=nl.analyticsObjectItems[nn];if(ss.isValue(no.fieldCaptionPairs)){nm.push(new Y(no,no.fieldCaptionPairs))}}}ni.push({item1:nl.name,item2:nm})}}return ni},get_analyticsPaneModel:function(){return this.$2},set_analyticsPaneModel:function(ni){this.$1();this.$2=ni;this.$0();this.$2.add_newAnalyticsPane(ss.mkdel(this,this.$0))},dispose:function(){this.$1();spiff.BaseViewModel.prototype.dispose.call(this)},$1:function(){if(ss.isValue(this.$2)){this.$2.remove_newAnalyticsPane(ss.mkdel(this,this.$0))}},$0:function(){this.notifyPropertyChanged('AnalyticsPane')}});var bc=global.tab.AnalyticsScrollSpot=ss.mkType(a,'tab.AnalyticsScrollSpot',function(ni,nj,nk){this.$5=0;this.$2=null;this.$3=-1;this.$4=null;this.$5=ni*10;this.$2=nj;this.$4=nk},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){this.$3=window.setInterval(ss.mkdel(this,this.$1),100);return this},dragExit:function(ni){this.$0()},acceptDrop:function(ni){this.$0();var nj=$.Deferred();nj.resolve(false);return nj},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.copy},$1:function(){var ni=tab.DoubleUtil.roundToInt(this.$2.scrollTop());this.$2.scrollTop(ni+this.$5);if(ni===tab.DoubleUtil.roundToInt(this.$2.scrollTop())){this.$0()}else{this.$4()}},$0:function(){if(this.$3>0){window.clearInterval(this.$3);this.$3=-1}}});var bd=global.tab.AnalyticsVizObjectDragAvatar=ss.mkType(a,'tab.AnalyticsVizObjectDragAvatar',function(ni){this.$4=null;spiff.Widget.call(this,$("<span class='tabAuthAnalyticsDragAvatar'><div class='tabAuthAnalyticsDragAvatarLabel'></div></span>"));this.$4=this.element.find('.tabAuthAnalyticsDragAvatarLabel');switch(ni){case 4:case 5:case 6:case 3:{break}case 7:case 8:default:{this.set_label('hitObjectType: '+ni.toString());break}}},{get_viewModel:function(){return null},get_rootElement:function(){return this.element},get_label:function(){return this.$4.text()},set_label:function(ni){this.$4.text(ni)}});var be=global.tab.AnalyticsVizObjectDragInstance=ss.mkType(a,'tab.AnalyticsVizObjectDragInstance',function(ni,nj){this.$6=$.Deferred();this.$8=null;this.$7=null;this.$5=null;this.$4$1=0;cp.call(this,null,new bd(nj));this.set_hitObjectType(nj);this.draggedObject=this;this.$3(ni);this.$5=spiff.CustomCursor.noOp},{get_analyticsDragInfoPromise:function(){return this.$6.promise()},get_hitObjectType:function(){return this.$4$1},set_hitObjectType:function(ni){this.$4$1=ni},get_isRefLineDrag:function(){return this.get_hitObjectType()===4||this.get_hitObjectType()===5||this.get_hitObjectType()===6},get_fields:function(){return this.$7},get_fieldNames:function(){return _.map(this.get_fields(),function(ni){return ni.get_globalName()})},get_pills:function(){return null},get_pill:function(){return null},get_readyToDrop:function(){return this.get_drop().state()==='resolved'},get_defaultDropCursor:function(){return this.$5},get_feedbackType:function(){return'dropfeedbackuponentry'},$3:function(ni){var nj=new spiff.Glass(ni,false);nj.set_opaque(true);this.$8=nj;this.$8.show();EventUtils.DragDropManager.attachDropTarget(this.$8.element,this);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$4))},$1:function(){if(ss.isValue(this.$8)){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$4));EventUtils.DragDropManager.detachDropTarget(this.$8.element);this.$8.dispose();this.$8=null}},$4:function(ni){this.$1()},getFormulaPromise:function(ni){var nj=$.Deferred();this.$6.done(ss.mkdel(this,function(nk){var nl=new tab.GetRefLineFormulaCmd;nl.set_worksheet(tsConfig.current_sheet_name);nl.set_refLineId(nk.refLineId);nl.set_calcType(ni);nl.set_paneId(nk.paneId);nl.invoke().done(function(nm){nj.resolve(nm.formula)}).fail(function(nm){nj.reject.apply(nj,null)})}));return nj.promise()},getDropCursor:function(ni){return spiff.CustomCursor.noOp},hasOnlyFields:function(){return true},hasOnlyPills:function(){return false},resolve:function(ni){if(ss.isValue(ni)){var nj=ni;if(ss.keyExists(nj,'refLineId'.toString())){this.resolve$1(ni)}else{this.reject(null)}}else{this.reject(null)}},resolve$1:function(ni){if(this.finalDrop.state()==='resolved'){return}var nj=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findField(ni.fn);this.$7=(ss.isNullOrUndefined(nj)?[]:[nj]);this.drag=ni.drag||{shelfDropModels:[]};this.get_dragAvatar().set_label(ni.label);this.finalDrop.resolve(this);this.$6.resolve(ni)},reject:function(ni){if(this.finalDrop.state()==='resolved'){return}this.finalDrop.reject(this);this.$6.reject.apply(this.$6,null)},addShelfField:function(ni,nj,nk,nl,nm){this.$2(ni.get_shelfType(),nj[0],nl)},addEncodingFields:function(ni,nj,nk,nl,nm){this.$2(ni.get_shelfType(),nj[0],nl)},dispose:function(){this.$1()},$2:function(ni,nj,nk){this.$6.done(ss.mkdel(this,function(nl){if(ni==='filter-shelf'){var nm=new tab.DropReferenceLineOnFilterShelfCmd;nm.set_fieldName(nl.fn);nm.set_shelfDropPosition(nk);nm.set_refLineId(nl.refLineId);nm.set_paneId(nl.paneId);nm.set_removeCommand(nl.removeSimpleCommandModel);nm.set_worksheet(tsConfig.current_sheet_name);nm.set_uiBlocking('immediately');nm.invoke()}else{var nn=new tab.DropReferenceLineOnShelfCmd;nn.set_fieldName(nj.get_globalName());nn.set_shelfDropPosition(nk);nn.set_refLineId(nl.refLineId);nn.set_paneId(nl.paneId);nn.set_worksheet(tsConfig.current_sheet_name);nn.set_uiBlocking('immediately');nn.invoke()}}))},dropToNowhereAction:function(){this.$6.done(function(ni){if(ss.isValue(ni)&&ss.isValue(ni.removeSimpleCommandModel)){tab.CommandUtils.executeSimpleCommand(ni.removeSimpleCommandModel,'immediately')}})},dragOver:function(ni){return this},dragExit:function(ni){},acceptDrop:function(ni){return $.Deferred().resolve(true).promise()},getDropTarget:function(ni){return this}},{installVizDragOverride:function(){tab.ModuleManager.load$1(tab.IVizZoneModule).call(null,[]).done(function(ni){ni.addVizDragHandler(be.$3);ni.addAsyncVizDragHandler(be.$4);ni.addVizDragApprover(be.$2)})},$2:function(ni){return be.$0(ni.get_result())},$4:function(ni,nj){var nk=$.Deferred();var nl=ni.get_vizHitTestDebouncer().getAsync(nj);nl.done(function(nm){nk.resolve(be.$3(ni,nj))});return nk.promise()},$3:function(ni,nj){if(!nj.get_IsRightMouseEvent()&&ni.get_vizHitTestDebouncer().isWithinLastHitTestDistance(nj)&&be.$0(ni.get_vizHitTestDebouncer().get_current().get_result())){var nk=new be(ni.get_rootElement()[0],ni.get_vizHitTestDebouncer().get_current().get_result().get_hitObjectType());be.requestAnalyticsObjectDragInfo(ni.get_vizHitTestDebouncer().get_current()).done(function(nl){nk.resolve$1(nl);if(ss.isValue(nl.removeSimpleCommandModel)){nk.$5=spiff.CustomCursor.delete$1}}).fail(function(nl){nk.reject(null)});EventUtils.DragDropManager.startDrag(nk,nj,null);return true}return false},$0:function(ni){if(tab.ApplicationModel.get_instance().get_currentSheetType()==='story'){return false}switch(ni.get_hitObjectType()){case 4:case 5:case 6:case 3:{return!be.$1(ni)}default:{return false}}},$1:function(ni){return(ni.get_id()&32768)!==0},requestAnalyticsObjectDragInfo:function(ni){switch(ni.get_result().get_hitObjectType()){case 4:case 5:case 6:{return be.requestRefLineDragInfo(ni)}case 3:{return be.requestTrendLineDragInfo(ni)}default:{var nj=$.Deferred();return nj.reject.apply(nj,null)}}},requestRefLineDragInfo:function(ni){var nj=$.Deferred();var nk=new tab.GetRefLineDragInfoCmd;nk.set_visualID(ni.get_visualId());nk.set_worksheet(ni.get_sheetId());nk.set_objectId(ni.get_result().get_id());nk.set_paneId((new tab.PaneIdModel.$ctor1(ni.get_paneColumnIndex(),ni.get_paneRowIndex(),ni.get_paneLayerIndex(),4294967295)).get_presModel());nk.set_activePaneSpecId(ss.coalesce(tab.ModelUtils.findActivePaneSpecId(),0));nk.invoke().done(function(nl){nj.resolve(nl.analyticsObjectDragInfo)}).fail(function(nl){nj.reject.apply(nj,null)});return nj.promise()},requestTrendLineDragInfo:function(ni){var nj=$.Deferred();var nk=new tab.GetTrendLineDragInfoCmd;nk.set_visualID(ni.get_visualId());nk.set_worksheet(ni.get_sheetId());nk.set_paneId((new tab.PaneIdModel.$ctor1(ni.get_paneColumnIndex(),ni.get_paneRowIndex(),ni.get_paneLayerIndex(),4294967295)).get_presModel());nk.invoke().done(function(nl){nj.resolve(nl.analyticsObjectDragInfo)}).fail(function(nl){nj.reject.apply(nj,null)});return nj.promise()}});var bf=global.tab.AnimationFormatPaneComponent=ss.mkType(a,'tab.AnimationFormatPaneComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){var ni=new tab.WidgetPluginContainerProps;ni.moduleName=bf.$1;var nj={};nj['originIsWeb']=true;nj['userPreferencesURL']=tab.UserUrl.toPrefsUrl(tsConfig.current_user_name);ni.initialProps=nj;return React.createElement(tab.WidgetPluginContainer,ni)}});var bg=global.tab.AnimationSettingsSidePaneProps=ss.mkType(a,'tab.AnimationSettingsSidePaneProps',function(){});var bh=global.tab.AnimationSidePaneProxy=ss.mkType(a,'tab.AnimationSidePaneProxy',function(){new hR(bh.id,ss.mkdel(this,this.openOrUpdateCallback),ss.mkdel(this,this.openOrUpdateCallback),ss.mkdel(this,this.closeCallback),'doc:open-animation-side-pane-event','doc:update-animation-side-pane-event','doc:close-animation-side-pane-event')},{openOrUpdateCallback:function(ni,nj){var nk=React.createElement(bf,new bg);ReactDOM.render(nk,nj)},closeCallback:function(){}});var bi=global.tab.ArrangeSectionComponent=ss.mkType(a,'tab.ArrangeSectionComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){var ni=this.$0();return spiff.DOMElements.div({className:['tab-ZoneLayoutInfoItem','tab-ArrangeSectionContainer'].join(' '),key:'layout-arrange-section'},[spiff.DOMElements.div({className:'tab-ArrangeSection'},ni)])},$0:function(){return null}},{create:function(ni){return React.createElement(bi,ni)}});var bj=global.tab.AskDataAdPopover=ss.mkType(a,'tab.AskDataAdPopover',function(ni){this.$1=null;this.$2=null;this.$0=null;React.Component.call(this,ni);this.$2=ss.mkdel(this,function(nj){this.$1=nj});this.$0=function(nj){if(ss.isNullOrUndefined(nj)){window.localStorage.removeItem('ShowAskDataAd')}}},{componentDidMount:function(){tab.OnlineAnalyticsClient.logEndeavourSpan('toolbar_operations',ss.mkdict(['operation_name','ad_popover_rendered','user_id',tsConfig.current_user_id,'session_id',tsConfig.sessionid]));this.$1.toggle(true)},render:function(){return React.createElement(SharedWidgets.PopoverWidget,{title:'Ask-Data-Ad-Popover',darkMode:true,zIndex:1000,stackingRootId:'main-content',popoverContent:this.createPopoverContent(),triggerElement:spiff.DOMElements.div({id:'ask-data-popover-trigger',style:{position:'absolute',top:-1+'px',right:0+'px'}}),ref:this.$2,placement:'right-end',style:{backgroundColor:'#1274ca',color:SharedWidgets.TabStyles.Colors.White,boxShadow:'0px 4px 8px 4px #0000001A',borderColor:'transparent'}})},createPopoverContent:function(){var ni=spiff.DOMElements.span({className:'ask-data-ad-learn-more-text',children:tab.Strings.AskDataAdLearnMore});var nj=spiff.DOMElements.div({className:'ask-data-ad-goto'});var nk=React.createElement(SharedWidgets.TextLinkWidget,{kind:'lightweight-dark',children:spiff.DOMElements.div({},ni,nj),href:tab.UriUtil.makeHelpUri('ask-data-dash-object',''),target:'_blank',style:{whiteSpace:'nowrap',marginLeft:'32px',color:SharedWidgets.TabStyles.Colors.White}});var nl=spiff.DOMElements.div({},tab.Strings.AskDataAuthoringPopoverText);return spiff.DOMElements.div({ref:this.$0,style:{display:'flex',flexDirection:'row',alignItems:'center',lineHeight:SharedWidgets.TabStyles.Typography.Sizing.XLarge+'px'}},nl,nk)}});var bk=global.tab.AugmentedDropTarget=ss.mkType(a,'tab.AugmentedDropTarget',function(ni,nj,nk){this.key=null;this.hitTarget=null;this.dropTarget=null;this.key=ni;this.hitTarget=nj;this.dropTarget=nk});var bl=global.tab.AuthoringBaseZoneSelectionComponent$1=ss.mkType(a,'tab.AuthoringBaseZoneSelectionComponent$1',function(ni){var nj=ss.registerGenericClassInstance(bl,[ni],function(nk,nl){this.boundAttachMoveDragSource=null;this.boundTrackButtons=null;this.$4=null;ss.makeGenericType(tab.BaseZoneSelectionComponent$2,[ni,Object]).call(this,nk,nl);this.state={buttonsHeight:0,buttonsWidth:0};this.boundAttachMoveDragSource=ss.mkdel(this,this.$0);this.boundTrackButtons=ss.mkdel(this,this.$3)},{componentDidMount:function(){this.$2()},componentDidUpdate:function(){this.$2()},renderEdge:function(nk,nl){return ch.createChromeEdgeRender(nk,this.props,nl,this.boundAttachMoveDragSource).render()},renderButtons:function(nk){var nl=new mP(this.boundTrackButtons,this.props,nk,this.state.buttonsHeight,this.state.buttonsWidth);return nl.render()},$1:function(nk,nl){if(ss.isValue(nk)){var nm=$(nk);if(!EventUtils.DragDropManager.isDragSource(nm)){var nn=this.props.resizeDragSourceFactory(nl);EventUtils.DragDropManager.attachDragSource(nm,nn)}}},$0:function(nk){if(ss.isValue(nk)){EventUtils.DragDropManager.attachDragSource($(nk),this.props.moveDragSource)}},$3:function(nk){if(ss.isNullOrUndefined(nk)){this.$4=null}else{this.$4=$(nk)}},$2:function(){if(ss.isNullOrUndefined(this.$4)){return}var nk=tab.DoubleUtil.roundToInt(this.$4.outerWidth());var nl=tab.DoubleUtil.roundToInt(this.$4.outerHeight());if(nk!==this.state.buttonsWidth||nl!==this.state.buttonsHeight){this.setState({buttonsWidth:nk,buttonsHeight:nl})}},renderPendingResizePreview:function(){if(this.props.resizePreviewProps.hasPendingResize){return tab.RemoteComponent.renderZoneRectPreview(this.props.resizePreviewProps.pendingZoneGeometry,'keyboard-nudge-preview')}return null}},null,function(){return ss.makeGenericType(tab.BaseZoneSelectionComponent$2,[ni,Object])});return nj});ss.initGenericClass(bl,1);var bm=global.tab.AuthoringBaseZoneSelectionViewModel$1=ss.mkType(a,'tab.AuthoringBaseZoneSelectionViewModel$1',function(ni){var nj=ss.registerGenericClassInstance(bm,[ni],function(nk){this.$5=[];this.$6=null;ss.makeGenericType(tab.BaseZoneSelectionViewModel$1,[ni]).call(this,nk);this.$6=new hc(ss.mkdel(this,function(){return this.get_dashboardWidth()}),ss.mkdel(this,function(){return this.get_dashboardHeight()}));this.disposables.add$1(this.$6);this.disposables.add$1(this.addChildViewModel(this.$6))},{get_resizePreviewViewModel:function(){return this.$6},get_areMultipleZonesSelected:function(){return false},get_dragEnabled:null,get_showZoneChromeButtons:function(){return!tsConfig.is_mobile},get_chromeItems:function(){return this.$5},isResizable:null,activeZoneChanged:null,handleUpdateZoneChrome:function(nk){this.updateChromeItems();this.incrementProps()},hideZoneChrome:function(){this.forceHidden=true;this.incrementProps()},showZoneChrome:function(){this.forceHidden=false;this.incrementProps()},updateChromeItems:null,getGrabPoint:function(nk){var nl=nk.get_GestureInfo();var nm=tab.DashboardView.dashboardGeometry();return{x:nl.startX-nm.l,y:nl.startY-nm.t}},chromeButtonChanged:function(nk,nl){if(nl.get_propertyName()==='isActive'){var nm=this.get_chromeItems();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];if(no.get_isActive()){var np=(ss.isInstanceOfType(no,tab.ToolbarDropdownButtonViewModel)?0:500);this.set_isZoneChromeActive(true);window.setTimeout(ss.mkdel(this,function(){this.set_isZoneChromeActive(false)}),np);return}}this.set_isZoneChromeActive(false)}},addChromeItems:function(nk){var nl=tab.CommandsPresModelWrapper.create(nk.get_commands());if(ss.isNullOrUndefined(nl)||ss.isNullOrUndefined(nl.get_commandItems())){return}var nm=nl.get_commandItems();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=tab.CommandItemWrapper.create(no);switch(np.get_commandsType()){case'item':{this.addChromeButton(np.get_item());break}case'subcommands':{var nq=[];tab.WidgetUtil.newMenuItemsFromCommands(nq,np.get_commands(),tab.WidgetUtil.createDropdownMenuCommandHandler,false,null);this.addChromeDropdownButtonWithSubMenu(np,new spiff.Menu(nq));break}}}},addChromeButton:function(nk){var nl=tab.ToolbarButtonViewModel.createFromCommandItem(nk,'tabAuthZoneChrome-',null,null);nl.set_tooltipText(nl.get_text());nl.set_text(null);nl.add_propertyChanged(ss.mkdel(this,this.chromeButtonChanged));this.get_chromeItems().push(nl)},addChromeDropdownButtonWithSubMenu:function(nk,nl){var nm=new tab.ToolbarDropdownButtonViewModel(nk.get_name(),'tabAuthZoneChrome-'+nk.get_name(),function(no){return nl});nm.set_tooltipText(tab.Strings.ChromeDropdownButtonTooltip);nm.set_text(null);var nn=nm;nn.add_propertyChanged(ss.mkdel(this,this.chromeButtonChanged));this.get_chromeItems().push(nn)},disposeChromeItems:function(){for(var nk=0;nk<this.$5.length;nk++){var nl=this.$5[nk];nl.remove_propertyChanged(ss.mkdel(this,this.chromeButtonChanged))}tab.MiscUtil.dispose(this.$5)}},null,function(){return ss.makeGenericType(tab.BaseZoneSelectionViewModel$1,[ni])},function(){return[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[ni])]});return nj});ss.initGenericClass(bm,1);var bn=global.tab.AuthoringCompletedHandler=ss.mkType(a,'tab.AuthoringCompletedHandler',null,null,{exitAuthoring:function(ni){bn.$7(ni).done(function(nj){if(!nj){bn.handleExit(null,ni);return}var nk=bn.$0(ni);if(ss.isNullOrUndefined(nk)){bn.handleExit(null,ni);return}tab.SavingUtil.loadSaveController().done(function(nl){nl.checkUnusedFiles(function(){if(nl.get_hasUnusedFiles()){nk.set_messageHtml(nk.get_messageHtml()+(' '+tab.Strings.UnusedFilesInSaveWorkbookPublishedMessage))}nk.show()})})})},$0:function(ni){var nj=tab.ApplicationModel.get_instance().get_workbook();if(nj.get_isEditingPublishedDatasource()){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_Datasource_Description,function(nk){bn.$3(nk)},tab.Strings.AuthMastheadDone_Confirm_Datasource_Title,tab.Strings.AuthMastheadDone_Confirm_CanSaveAs_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanSaveAs_Deny)}if(tab.SavingUtil.isSaveEnabled()){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanPublish,function(nk){bn.$2(nk,ni)},tab.Strings.AuthMastheadDone_Confirm_Title_Publish,tab.Strings.AuthMastheadDone_Confirm_CanPublish_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanPublish_Deny)}if(tab.SavingUtil.isSaveAsEnabled()){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanPublishAs,function(nk){bn.$2(nk,ni)},tab.Strings.AuthMastheadDone_Confirm_Title_Publish,tab.Strings.AuthMastheadDone_Confirm_CanPublishAs_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanPublishAs_Deny)}if(tsConfig.is_guest){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanLogin_Publish,function(nk){bn.$2(nk,ni)},tab.Strings.AuthMastheadDone_Confirm_Title_Publish,tab.Strings.AuthMastheadDone_Confirm_CanLogin_Confirm_Publish,tab.Strings.AuthMastheadDone_Confirm_CanLogin_Deny_Publish)}return null},isEditingPublishedDatasource:function(){return tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()},getShouldDisplaySaveDatasourceDialogForEPDS:function(){return(new tab.GetShouldDisplaySaveDatasourceDialogCmd).invoke()},$4:function(ni){var nj=function(nl){ni.resolve(nl.shouldDisplaySaveDatasourceDialog)};var nk=function(){ni.resolve(false)};bn.getShouldDisplaySaveDatasourceDialogForEPDS().then(nj,nk)},$6:function(ni,nj){var nk=nj.get_isWorkbookModifiedAuthoring()&&!cl.get_instance().get_autoSaveEnabled();ni.resolve(nk)},$5:function(ni,nj){var nk=nj.get_isWorkbookModifiedAuthoring();ni.resolve(nk)},$7:function(ni){var nj=$.Deferred();if(bn.isEditingPublishedDatasource()){bn.$4(nj)}else if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){bn.$6(nj,ni)}else{bn.$5(nj,ni)}return nj.promise()},$2:function(ni,nj){switch(ni){case'confirm':{tab.SavingUtil.saveWorkbook(function(nk){bn.handleExit(nk,nj)},null);break}case'deny':{tab.SessionServerCommands.destroySessionAndForward(function(){bn.handleExit(null,nj)},cl.get_instance().get_autoSaveEnabled());break}case'cancel':{break}}},$3:function(ni){if(ni==='confirm'){var nj={};tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-web-save-datasource-dialog'},nj),'immediately',null,null)}else if(ni==='deny'){tab.SessionServerCommands.destroySessionAndForward(function(){bn.handleExit(null,null)},cl.get_instance().get_autoSaveEnabled())}},redirectToView:function(ni,nj){tab.NavigationUtil.closeWindowIfOpenedByTableau(tab.Log.get$1(by));var nk=tab.VizUriModel.createForCurrentWindowLocation(null);if(nk.get_isAuthorNewWorkbookUri()){if(tsConfig.isPublic){var nl=window.location.protocol+'//'+window.location.host+'/me';tab.WindowHelper.setLocationHref(tab.WindowHelper.get_windowSelf(),nl)}else{tab.NavigationUtil.redirectToDataSources(nk.get_queryParams())}}else{var nm=bn.$1(ni,nj);if(tsConfig.isPublic){nm.set_showVizHome(true)}nm.setWindowLocation(null)}},handleExit:function(ni,nj){tab.ApplicationModel.get_instance().raiseNotification('doc:workbook-ready-to-close-event',null,null);if(tab.ApplicationModel.get_instance().get_embeddingModel().suppressRedirect){return}bn.redirectToView(ni,nj)},$1:function(ni,nj){var nk=null;if(ss.isValue(ni)){nk=tab.VizUriModel.createVizUriModelForViewingSheetInWorkbook(tsConfig.current_sheet_name,ni)}else{var nl=nj.get_outerDashboardRepositoryUrl();if(!tab.MiscUtil.isNullOrEmpty$1(nl)){nk=tab.VizUriModel.createForViewingSheet(nl)}}return nk||tab.VizUriModel.createForViewingSheet(tsConfig.origin_repository_url)}});var bo=global.tab.AuthoringDashboardView=ss.mkType(a,'tab.AuthoringDashboardView',function(ni){this.$v=null;this.$u=2;this.$y=null;this.$x=null;this.$B=null;this.$w=null;this.$z=null;this.$A=null;this.$t=null;this.$s=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;ss.makeGenericType(spiff.BaseView$1,[bp]).call(this,ni,spiff.Template.fromHtml(''));this.$i();this.set_zoneReadiness(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[cj,ci,Object])).call(null,[this.get_viewModel().zoneReadiness]));this.disposables.add$1(this.get_zoneReadiness());this.set_dashboardGrid(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ei,ec,eg])).call(null,[this.get_viewModel().dashboardGrid]));this.set_emptyDashboardView(tab.ObjectRegistry.newView(fU).call(null,[this.get_viewModel().emptyDashboardViewModel]));this.set_dashboardPortPreview(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[eq,ep,Object])).call(null,[this.get_viewModel().dashboardPortPreview]));this.disposables.add$1(this.get_dashboardPortPreview());this.disposables.add$1(this.get_dashboardGrid());this.disposables.add$1(this.get_emptyDashboardView());this.disposables.add(ss.mkdel(this,this.$9));this.$o()},{get_zoneSelection:function(){return this.$3$1},set_zoneSelection:function(ni){this.$3$1=ni},get_zoneReadiness:function(){return this.$3$2},set_zoneReadiness:function(ni){this.$3$2=ni},get_dashboardGrid:function(){return this.$3$3},set_dashboardGrid:function(ni){this.$3$3=ni},get_dashboardPortPreview:function(){return this.$3$4},set_dashboardPortPreview:function(ni){this.$3$4=ni},get_emptyDashboardView:function(){return this.$3$5},set_emptyDashboardView:function(ni){this.$3$5=ni},get_dashboardSelectionView:function(){return this.$3$6},set_dashboardSelectionView:function(ni){this.$3$6=ni},get_glass:function(){return this.$3$7},set_glass:function(ni){this.$3$7=ni},get_isMoveShortcutAllowed:function(){return this.addedToDom&&this.get_viewModel().get_isDashboard()&&this.get_viewModel().get_hasSelectedFloatingZones()},get_isDeleteShortcutAllowed:function(){return false},get_isResizeShortcutAllowed:function(){return this.get_isMoveShortcutAllowed()},$q:function(){return this.$u},$r:function(ni){if(ni===this.$u){return}this.$u=ni;var nj;switch(this.$u){case 0:{nj='ns-resize';break}case 1:{nj='ew-resize';break}case 2:{nj='default';break}default:{nj='default';break}}this.$v.css('cursor',nj)},$i:function(){if(!this.get_viewModel().get_isZoneWidgetryEnabled()){return}this.set_zoneSelection(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[nd,nc,Object])).call(null,[this.get_viewModel().zoneSelection]));this.disposables.add$1(this.get_zoneSelection());EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$f))})))},$o:function(){this.$h();if(!tsConfig.is_mobile){var ni=this.get_viewModel().get_isDashboard()&&!this.get_viewModel().get_isStoryboard()&&this.get_viewModel().get_currentDevice()==='default';if(!this.get_viewModel().get_isDashboard()){this.$m()}else if(ni){var nj=ss.mkdel(this,function(){return this.get_isResizeShortcutAllowed()});var nk=this.get_viewModel();this.$y=new kF(nj,ss.mkdel(nk,nk.keyboardResizeFloatingZone));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$y);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$y)}));var nl=ss.mkdel(this,function(){return this.get_isMoveShortcutAllowed()});var nm=this.get_viewModel();this.$x=new iH(nl,ss.mkdel(nm,nm.moveFloatingZone));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$x);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$x)}));var nn=ss.mkdel(this,function(){return this.get_isDeleteShortcutAllowed()});var no=this.get_viewModel();this.$w=new eR(nn,ss.mkdel(no,no.deleteSelectedZonesOnFlexibleDashboard));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$w);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$w)}));this.$B=new ev(this);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$B);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$B)}));this.$n()}}},$m:function(){var ni=this.get_viewModel();this.$A=new ly(ss.mkdel(ni,ni.showActionListDialogForWorksheet));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$A);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$A)}))},$n:function(){var ni=this.get_viewModel();this.$z=new lx(ss.mkdel(ni,ni.showActionListDialogForDashboard));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$z);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$z)}));var nj=this.get_viewModel();this.$A=new ly(ss.mkdel(nj,nj.showActionListDialogForActiveWorksheetOnDashboard));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$A);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$A)}))},$h:function(){if(ss.isValue(this.$y)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$y);this.$y=null}if(ss.isValue(this.$B)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$B);this.$B=null}if(ss.isValue(this.$x)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$x);this.$x=null}if(ss.isValue(this.$w)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$w);this.$w=null}if(ss.isValue(this.$z)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$z);this.$z=null}if(ss.isValue(this.$A)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$A);this.$A=null}},$8:function(){ReactDOM.unmountComponentAtNode(this.get_zoneSelection().get_rootElement()[0]);ReactDOM.unmountComponentAtNode(this.get_zoneReadiness().get_rootElement()[0]);ReactDOM.unmountComponentAtNode(this.get_dashboardGrid().get_rootElement()[0]);ReactDOM.unmountComponentAtNode(this.get_dashboardPortPreview().get_rootElement()[0])},addToDom:function(ni){this.$8();this.$v=tab.WorkbookView.findDashboardContainer();this.$l();this.get_zoneSelection().addToDom(this.$v);var nj=this.$v.find('.'+'tab-dashboard');this.get_emptyDashboardView().addToDom(nj);this.get_zoneReadiness().addToDom(nj);this.get_dashboardGrid().addToDom(nj);this.get_dashboardPortPreview().addToDom(this.$v);this.get_dashboardPortPreview().addClass('tab-dashboard-port-preview-host');this.get_dashboardPortPreview().get_rootElement().css({top:this.get_viewModel().get_dashboardContentOffsetTop()+'px',left:this.get_viewModel().get_dashboardContentOffsetLeft()+'px'});this.disposables.add$2([spiff.EventUtil.bindWithDispose(nj,'mousemove',ss.mkdel(this,this.$g)),spiff.EventUtil.bindWithDispose(nj,'mouseleave',ss.mkdel(this,this.$d))]);this.onAddedToDom();this.$p()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this)},$p:function(){var ni=ss.mkdel(this,function(){this.get_viewModel().zoneSelection.updateZoneChromeOnScroll()});this.$v.scroll(ni)},$d:function(ni){this.get_viewModel().dashExited();this.$v.css('cursor','')},$9:function(){if(ss.isValue(this.get_glass())){this.get_glass().remove_click(ss.mkdel(this,this.$c));this.set_glass(tab.MiscUtil.dispose$1(this.get_glass()))}},$l:function(){this.$9();if(this.get_viewModel().get_shouldShowGlass()){var ni=new spiff.Glass(this.$v.find('.tab-gutter')[0],false);ni.set_opaque(true);ni.set_zIndex(702);this.set_glass(ni);this.get_glass().add_click(ss.mkdel(this,this.$c));this.get_glass().element.addClass('tab-dsdGlass');this.get_glass().show()}},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[bp]).prototype.onViewModelPropertyChanged.call(this,ni,nj);if(nj.get_propertyName()==='tabAutoGeneratedDeviceLayouts'||nj.get_propertyName()==='tabAuthDevice'){this.$v=tab.WorkbookView.findDashboardContainer();this.$l()}if(nj.get_propertyName()==='tabSheetType'){this.$o()}},$c:function(){this.get_viewModel().launchUseCustomLayoutDialog()},$7:function(ni){ni.get_rootElement().addClass('tab-dashDragDrop');ni.get_rootElement().css({top:this.get_viewModel().get_dashboardContentOffsetTop()+'px',left:this.get_viewModel().get_dashboardContentOffsetLeft()+'px'});if(tab.ApplicationModel.get_instance().get_currentSheetType()==='story'){this.$v=tab.WorkbookView.findDashboardContainer()}ni.addToDom(this.$v)},$e:function(ni){return ni.presmodelType==='dashboard-object-drag'},$f:function(ni){if(!(this.get_viewModel().get_isDashboard()||this.get_viewModel().get_isStoryboard())){return}if(this.get_viewModel().get_isStoryboard()){var nj=ss.safeCast(ni,lp);if(ss.isValue(nj)){return}}this.get_viewModel().zoneSelection.hideZoneChrome();this.$j(ni);var nk=ss.safeCast(ni,go);if(ss.isValue(nk)){nk.viewModel.add_disposed(ss.mkdel(this,function(nm){this.get_viewModel().zoneSelection.showZoneChrome()}));return}var nl=ss.safeCast(ni,eb);if(ss.isValue(nl)){nl.get_viewModel().add_disposed(ss.mkdel(this,function(nm){this.get_viewModel().zoneSelection.showZoneChrome()}));return}EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$k))},$a:function(ni){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$a));if(ss.isValue(this.$s)){this.$t.dispose();this.$t=null;this.$s.dispose();this.$s=null}},$j:function(ni){var nj=null;if(this.$e(ni)){var nk=tab.DashboardClientCommands.getSheetDragDropTargets(null,null);var nl=$.Deferred();nk.done(function(nq){nl.resolve(nq.zoneDragDrop)}).fail(function(){nl.reject()});var nm=co.createDeferredRect(nl);this.$s=new G(ni,nm);tab.ObjectRegistry.newView(F).call(null,[this.$s]);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$a));this.$t=new H(ni,tab.DashboardView.dashboardGeometry,nl);nj=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[H,dY,Object])).call(null,[this.$t]);this.disposables.add$1(this.$t)}else{var nn=ss.safeCast(ni,eb);if(ss.isValue(nn)){nj=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dW,dY,Object])).call(null,[nn.get_viewModel()])}}var no=ss.safeCast(ni,go);if(ss.isValue(no)){nj=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[gq,gp,Object])).call(null,[no.viewModel])}var np=ss.safeCast(ni,dH);if(ss.isValue(np)){nj=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dI,kE,Object])).call(null,[np.viewModel])}if(ss.isValue(nj)){this.$7(nj)}},$k:function(ni){this.get_viewModel().zoneSelection.showZoneChrome();EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$k))},$g:function(ni){if(!this.get_viewModel().get_isDashboard()){this.$r(2);return}var nj=this.$b(ni);this.$r(this.get_viewModel().zoneResizeViewModel.getDraggableFeedbackOnLegacyDashboard(nj.x,nj.y))},$b:function(ni){var nj=this.$v.offset();var nk=tab.DoubleUtil.roundToInt(this.$v.scrollLeft());var nl=tab.DoubleUtil.roundToInt(this.$v.scrollTop());var nm=ni.pageX-ss.trunc(nj.left)-this.get_viewModel().get_dashboardContentOffsetLeft()+nk;var nn=ni.pageY-ss.trunc(nj.top)-this.get_viewModel().get_dashboardContentOffsetTop()+nl;return{x:nm,y:nn}}});var bp=global.tab.AuthoringDashboardViewModel=ss.mkType(a,'tab.AuthoringDashboardViewModel',function(ni){this.$6=null;this.$7=false;this.emptyDashboardViewModel=null;this.leftPanelPaneViewModel=null;this.leftLayoutPaneViewModel=null;this.dashboardSelectionViewModel=null;this.zoneSelection=null;this.zoneReadiness=null;this.zoneResizeViewModel=null;this.dashboardGrid=null;this.dashboardPortPreview=null;spiff.BaseViewModel.call(this);this.$6=ni;this.emptyDashboardViewModel=new fV(ni);this.$5();this.dashboardPortPreview=new eq(ni);this.disposables.add$1(this.dashboardPortPreview);this.dashboardGrid=new ei(ni);this.leftPanelPaneViewModel=new eo(ni);this.leftLayoutPaneViewModel=new hB(ni);this.disposables.add$2([this.dashboardGrid,this.leftLayoutPaneViewModel,this.leftLayoutPaneViewModel]);tab.DashboardModel.add_storyPointDeleted(ss.mkdel(this,this.handleStoryPointDeleted));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.DashboardModel.remove_storyPointDeleted(ss.mkdel(this,this.handleStoryPointDeleted))})));this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addEventBinding(ss.mkdel(this,function(nj){nj.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.$0));nj.add_currentDeviceLayoutChanged(ss.mkdel(this,this.$1))}),ss.mkdel(this,function(nj){nj.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.$0));nj.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.$1))})))},{get_visible:function(){return this.$7},set_visible:function(ni){if(this.$7===ni){return}this.$7=ni;this.notifyPropertyChanged('visible');if(ss.isValue(this.dashboardSelectionViewModel)){this.dashboardSelectionViewModel.set_visible(ni)}},get_dashboardContentOffsetTop:function(){return tabBootstrap.VizLayoutConstants.get_authoringGutter().top+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_dashboardContentOffsetLeft:function(){return tabBootstrap.VizLayoutConstants.get_authoringGutter().left+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_isDashboard:function(){var ni=this.$6.get_model();return ss.isValue(ni)&&ni.get_isDashboard()},get_isStoryboard:function(){return this.$6.get_model().isStory()},get_currentDevice:function(){return this.$6.get_model().get_currentDeviceLayout()},get_shouldShowGlass:function(){return this.$6.get_model().get_isCurrentLayoutAutoGenerated()},get_selectedZoneCount:function(){return(ss.isValue(this.$6.get_model())?this.$6.get_model().get_activeZoneIDs().length:0)},get_selectedZoneIDs:function(){return(ss.isValue(this.$6.get_model())?this.$6.get_model().get_activeZoneIDs():null)},get_selectedZoneID:function(){return(ss.isValue(this.$6.get_model())?this.$6.get_model().get_activeZoneID():0)},get_hasSelectedFloatingZones:function(){return ss.isValue(this.zoneSelection.get_selectedZone())&&this.zoneSelection.get_selectedZone().get_isFloating()},get_hasSelectedZonesOnFlexibleDashboard:function(){return this.dashboardSelectionViewModel.get_hasSelectedZones()},get_isZoneWidgetryEnabled:function(){return tabBootstrap.Affordances.isOn('zoneWidgetry')},$4:function(){this.dashboardSelectionViewModel=new es(this.$6);this.zoneReadiness=new cj(this.$6,ss.mkdel(this.dashboardSelectionViewModel.zoneResizeViewModel,this.dashboardSelectionViewModel.zoneResizeViewModel.isEdgeOrParentsResizable));this.disposables.add$2([this.dashboardSelectionViewModel,this.zoneReadiness])},$5:function(){this.zoneResizeViewModel=new nb(this.$6);this.zoneSelection=new nd(this.$6,ss.mkdel(this.zoneResizeViewModel,this.zoneResizeViewModel.isEdgeOrParentsResizable),null,false);this.zoneReadiness=new cj(this.$6,ss.mkdel(this.zoneResizeViewModel,this.zoneResizeViewModel.isEdgeOrParentsResizable));this.disposables.add$2([this.zoneResizeViewModel,this.zoneSelection,this.zoneReadiness])},startTiledResize:function(ni,nj,nk,nl,nm){var nn=new dI(this.$6.get_model(),nl);var no=nn.startDrag(ni,nk,nm);EventUtils.DragDropManager.startDrag(no,nj,null)},dashExited:function(){this.$6.get_model().set_readyZoneID(0)},moveFloatingZone:function(ni,nj){this.zoneSelection.get_resizePreviewViewModel().delayMoveZoneCall(this.zoneSelection.get_selectedZone(),ni,nj,null)},keyboardResizeFloatingZone:function(ni,nj){this.zoneSelection.get_resizePreviewViewModel().delayResizeZoneCall(this.zoneSelection.get_selectedZone(),ni,nj)},setFloatingZoneGeometry:function(ni,nj){this.zoneSelection.get_resizePreviewViewModel().delaySetZoneGeometry(this.zoneSelection.get_selectedZone(),ni,nj)},deleteSelectedZonesOnFlexibleDashboard:function(){var ni=[];var nj=this.dashboardSelectionViewModel.get_selectedZones();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];ni.push(nl.get_zoneId())}tab.DashboardZoneCommands.hideZones(Array.prototype.slice.call(ni))},handleStoryPointDeleted:function(ni){if(this.get_isStoryboard()){var nj=this.$6.get_model().zonesModel.getTextZonesToRemoveFromStoryPoint(ni);if(nj.length>0){tab.DashboardZoneCommands.hideZones(Array.prototype.slice.call(nj))}}},updateVisibility:function(ni,nj,nk){if(ni===1){this.set_visible(nj==='dashboard')}else if(ss.isValue(this.$6.get_model())&&!this.$6.get_model().get_isDashboard()){this.set_visible(false)}else{this.set_visible(!nk)}},showActionListDialogForActiveWorksheetOnDashboard:function(){if(ss.isValue(this.zoneSelection)&&ss.isValue(this.zoneSelection.get_selectedZone())&&this.zoneSelection.get_selectedZone().get_zoneType()==='viz'){var ni=this.zoneSelection.get_selectedZone().get_worksheetName();tab.DashboardClientCommands.showActionListDialogForWorksheet(ni,false)}},showActionListDialogForWorksheet:function(){tab.DashboardClientCommands.showActionListDialogForWorksheet(tsConfig.current_sheet_name,true)},showActionListDialogForDashboard:function(){tab.DashboardClientCommands.showActionListDialogForDashboard(tsConfig.current_sheet_name)},launchUseCustomLayoutDialog:function(){if(this.$6.get_model().get_isCurrentLayoutAutoGenerated()){tab.DashboardClientCommands.launchUseCustomLayoutDialog(this.$6.get_model().get_sheetName(),this.$6.get_model().get_currentDeviceLayout())}},updateReadyZoneId:function(ni){if(ss.isValue(this.$6.get_model())){this.$6.get_model().set_readyZoneID(ni)}},isMousePositionOverCanvasWhitespace:function(ni,nj){return ss.isValue(this.dashboardSelectionViewModel)&&ss.isValue(this.dashboardSelectionViewModel.zoneResizeViewModel)&&this.dashboardSelectionViewModel.zoneResizeViewModel.isNotOnAnyZone(ni,nj)},$2:function(ni){return ni==='viz'||ni==='size'||ni==='shape'||ni==='color'||ni==='map'},$3:function(){this.notifyPropertyChanged('tabSheetType');this.notifyPropertyChanged('tabAuthDevice')},$0:function(){this.notifyPropertyChanged('tabAutoGeneratedDeviceLayouts')},$1:function(){this.notifyPropertyChanged('tabAuthDevice')}});var bq=global.tab.AuthoringEventDetectionUtil=ss.mkType(a,'tab.AuthoringEventDetectionUtil',null,null,{initializeReturnToTabEventListener:function(ni){window.addEventListener('focus',ni)}});var br=global.tab.AuthoringInitializer=ss.mkType(a,'tab.AuthoringInitializer',null,null,{createAuthoringViewModel:function(){return new ce(tab.ApplicationModel.get_instance().get_workbook())},init:function(){if(!tsConfig.is_authoring){return}tab.MiscUtil.dispose$1(br.$b);br.$b=new tab.DisposableHolder;tab.StartupUtils.callAfterModelsInitialized(function(){br.$8();tab.StartupUtils.callEachTimeModelsInitialized(br.$3,br.$b)});tab.StartupUtils.callOnceAfterCommandControllerInitialized(br.$3);if(tsConfig.is_desktop){var ni=tab.ApplicationModel.get_instance();var nj=ni.modelInstance(tab.PresentationModeModel).call(ni);nj.add_changed(br.$5());br.$b.add(function(){nj.remove_changed(br.$5())})}},deInit:function(){tab.MiscUtil.dispose$1(br.$a)},$5:function(){return function(){br.$3();tab.ApplicationViewModel.updatePortSize()}},$3:function(){br.$a=tab.MiscUtil.dispose$1(br.$a);if(br.$6()){return}br.$0();br.$8();br.$7();br.$4();br.$2()},$0:function(){br.$a=br.createAuthoringViewModel();tab.ObjectRegistry.newView(cd).call(null,[br.$a]);tabBootstrap.MetricsController.logMetricsEvent$1('APPPNT'.toString(),2,tabBootstrap.ViewerBootstrap.get_instance().get_bootstrapRequestId());tabBootstrap.MetricsController.getOffsetFromTimeOrigin('apppnt'.toString(),null)},$6:function(){var ni=tabBootstrap.UrlLocationHashManager.getValueFromUrlHash('guest')==='n';if(ni){tabBootstrap.UrlLocationHashManager.removeEntryFromUrlHash('guest');if(tsConfig.is_authoring&&tsConfig.is_guest){var nj=tab.WindowHelper.getPathAndSearch(window.self);var nk='/signin'+'?externalRedirect='+encodeURIComponent(nj)+'&site='+encodeURIComponent(tsConfig.site_url_name);tab.WindowHelper.setLocationHref(window.self,nk);return true}}return false},$4:function(){var ni=tab.WindowHelper.getLocation(window.self);var nj=tab.UriExtensions.getUriQueryParameters(ni.search);if(ss.keyExists(nj,':showSaveAs')){tab.SavingUtil.saveWorkbookAs(null,null)}},$2:function(){var ni=tab.VizUriModel.createForCurrentWindowLocation(null);if(ni.get_isAuthorNewWorkbookUri()||ni.get_isAuthoringDatasourceUri()){var nj=cd.get_instance().get_leftArea().get_viewModel().get_leftPanelViewModel().get_schemaViewerViewModel();nj.done(function(nk){if(ss.isValue(nk.get_dataSchema())){br.$1(nk.get_dataSchema())}else{var nl=null;nl=function(nm){br.$1(nm);nk.remove_dataSchemaModelChanged(nl)};nk.add_dataSchemaModelChanged(nl)}})}},$1:function(ni){var nj=tab.VizUriModel.createForCurrentWindowLocation(null);var nk=ni.get_dataSourcesList();if(nk.length===0||nk.length===1&&ss.referenceEquals(nk[0],ni.get_parametersDataSource())){if(!ss.isNullOrEmptyString(nj.get_graphQLTableId())){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(function(nl){nl.showCreateConnectionDialogForPreselectedTable(nj.get_graphQLTableId())})}else if(!ss.isNullOrEmptyString(nj.get_graphQLDatabaseId())){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(function(nl){nl.showCreateConnectionDialogForPreselectedDatabase(nj.get_graphQLDatabaseId())})}else{tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(function(nl){nl.showCreateConnectionDialogForEmptyWorkbook()})}}},$7:function(){bz.get_instance().removeFromDom()},$8:function(){if(ss.isValue(cd.get_instance())&&ss.isValue(cd.get_instance().get_viewModel())&&ss.isValue(cd.get_instance().get_viewModel().get_authoringTabNavViewModel())){var ni=tab.VizUriModel.createForCurrentWindowLocation(null);if(ni.get_isAuthoringDatasourceUri()){cd.get_instance().get_viewModel().get_authoringTabNavViewModel().selectDataTab()}}}});var bs=global.tab.AuthoringLeftAreaTemplate=ss.mkType(a,'tab.AuthoringLeftAreaTemplate',function(ni){spiff.Template.call(this,ni)});var bt=global.tab.AuthoringLeftAreaView=ss.mkType(a,'tab.AuthoringLeftAreaView',function(ni,nj){this.internalLeftPanelView=null;this.dom=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[bu]).call(this,ni,nj);this.internalLeftPanelView=tab.ObjectRegistry.newView(hS).call(null,[this.get_viewModel().get_leftPanelViewModel()]);this.dom=this.get_template();this.get_viewModel().add_sheetTypeChanged(ss.mkdel(this,this.updateLeftAreaForSheetType));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_sheetTypeChanged(ss.mkdel(this,this.updateLeftAreaForSheetType))})))},{get_leftPanelView:function(){return this.internalLeftPanelView},get_floatingLeftPanel:function(){return this.$3$1},set_floatingLeftPanel:function(ni){this.$3$1=ni},dispose:function(){if(ss.isValue(this.internalLeftPanelView)){this.internalLeftPanelView.dispose()}this.dom.dispose();ss.makeGenericType(spiff.BaseView$1,[bu]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.addLeftPanelToDom();this.updateLeftAreaForSheetType(this.get_viewModel().get_sheetType())},addLeftPanelToDom:null,updateLeftAreaForSheetType:null});var bu=global.tab.AuthoringLeftAreaViewModel=ss.mkType(a,'tab.AuthoringLeftAreaViewModel',function(ni,nj,nk,nl){this.$b=null;this.$8=null;this.$9=null;this.$7=0;this.$a=0;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=false;spiff.BaseViewModel.call(this);this.$9=ni;this.$8=nj;this.$b=nk;this.set_controlMode(nl);this.$6();this.$5();tab.ApplicationModel.get_instance().get_workbook().add_sheetTypeChanged(ss.mkdel(this,this.$0));this.$9.add_sidePaneExpansionStateChanged(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.ApplicationModel.get_instance().get_workbook().remove_sheetTypeChanged(ss.mkdel(this,this.$0));this.$9.remove_sidePaneExpansionStateChanged(ss.mkdel(this,this.$1))})))},{$0:function(ni){this.$b.updatePaneForSheetType(ni);this.raiseActionEvent$1(Object).call(this,this.$2$1,ni);this.$4(ni)},add_sheetTypeChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_sheetTypeChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_sidePaneExpansionStateChanged:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_sidePaneExpansionStateChanged:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_sidePaneVisibilityChanged:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_sidePaneVisibilityChanged:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},add_controlModeChanged:function(ni){this.$2$4=ss.delegateCombine(this.$2$4,ni)},remove_controlModeChanged:function(ni){this.$2$4=ss.delegateRemove(this.$2$4,ni)},add_leftAreaResized:function(ni){this.$2$5=ss.delegateCombine(this.$2$5,ni)},remove_leftAreaResized:function(ni){this.$2$5=ss.delegateRemove(this.$2$5,ni)},add_leftAreaResizingEnded:function(ni){this.$2$6=ss.delegateCombine(this.$2$6,ni)},remove_leftAreaResizingEnded:function(ni){this.$2$6=ss.delegateRemove(this.$2$6,ni)},add_sidePaneResized:function(ni){this.$2$7=ss.delegateCombine(this.$2$7,ni)},remove_sidePaneResized:function(ni){this.$2$7=ss.delegateRemove(this.$2$7,ni)},get_sheetType:function(){return this.get_leftPanelViewModel().get_currentSheetType()},get_leftPanelViewModel:function(){return this.$b},get_sidePaneExpansionState:function(){return this.$9.get_sidePaneExpansionState()},set_sidePaneExpansionState:function(ni){this.$3(ni)},get_controlMode:function(){return this.$7},set_controlMode:function(ni){if(this.$7===ni){return}this.$7=ni;this.raiseActionEvent$1(iZ).call(this,this.$2$4,this.$7)},get_panelIsHidden:function(){return this.$2$8},set_panelIsHidden:function(ni){this.$2$8=ni},get_leftAreaWidth:function(){return this.$a},set_leftAreaWidth:function(ni){if(this.$a===ni){return}this.$a=ni;this.raiseActionEvent$1(ss.Int32).call(this,this.$2$5,this.$a)},get_expandedSidePaneWidth:function(){return this.$8.get_width()},set_expandedSidePaneWidth:function(ni){this.$8.set_width(ni)},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);if(ss.isValue(this.$b)){this.$b.dispose()}},$6:function(){this.$8.add_resized(ss.mkdel(this,this.$2));this.disposables.add$2([new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.remove_resized(ss.mkdel(this,this.$2))})),tab.DesktopSidePaneSynchronizer.connectToResizedEvent(this.$8)])},$5:function(){var ni=ss.mkdel(this,function(nj){nj=!nj;this.raiseActionEvent$1(Boolean).call(this,this.$2$3,nj)});tab.DesktopSidePaneSynchronizer.connectToVisibilityChangedEvent(ni)},leftAreaResizeEnded:function(){this.raiseActionEvent$1(ss.Int32).call(this,this.$2$6,this.get_leftAreaWidth())},$2:function(ni){this.raiseActionEvent$1(ss.Int32).call(this,this.$2$7,ni)},sidePaneResizeEnded:function(){this.$8.resizeEnded();this.leftAreaResizeEnded()},$1:function(){this.raiseActionEvent$1(Object).call(this,this.$2$2,this.get_sidePaneExpansionState())},$3:function(ni){var nj=new tab.SetSidePaneExpansionStateCmd;nj.set_sidePaneExpansionState(ni);nj.set_localWork(ss.mkdel(this,function(nk){var nl=nk.makeMutablePresModel(this.$9,false);nl.sidePaneExpansionState=ni;bu.$0(nk,nl,'doc:side-pane-expansion-state-changed-event'.toString())}));nj.invoke()},$4:function(ni){if(ni==='worksheet'||ni==='dashboard'||ni==='story'){this.set_panelIsHidden(false)}else{this.set_panelIsHidden(true)}}},{$0:function(ni,nj,nk){var nl=ni.makeMutablePresModel(tab.ApplicationModel.get_instance(),false);var nm={};nm['genSidePaneExpansionStatePresModel']=nj;nl.presentationLayerNotification=[{keyId:nk,presModelHolder:nm}]}});var bv=global.tab.AuthoringLeftPaneType=ss.mkEnum(a,'tab.AuthoringLeftPaneType',{dataSchemaPane:0,analyticsPane:1,dashboardPane:2,storyContentPane:3,storyLayoutPane:4,layoutPane:5});var bw=global.tab.AuthoringMenuBarComponent=ss.mkType(a,'tab.AuthoringMenuBarComponent',function(ni,nj){this.$I=0;this.$L=0;this.$N=0;this.$P=false;this.$M=null;this.$J=[];this.$K=new tab.DisposableHolder;this.$F=null;this.$O=null;this.$G=null;this.$R=null;this.$H=null;this.$S=null;this.$Q=document.body.getElementsByClassName('tabAuthMenuBarSavingStatusMessage');React.PureComponent.call(this,ni,nj);this.state={openedMenuId:null,collapsedMenuIds:[],publishButtonMenuIsOpen:false,hasNarrowWidth:false,publishButtonAnchorSet:false,savingStatusHasRendered:false,userDismissedPublishCallout:false,authoringLeftAreaWidth:'auto'};this.$M=_.throttle(ss.mkdel(this,this.$b),50,{leading:false,trailing:true});this.$F=ss.mkdel(this,function(nk){this.$O=ReactDOM.findDOMNode(nk);this.setState({publishButtonAnchorSet:true})});this.$G=ss.mkdel(this,function(nk){this.$R=ReactDOM.findDOMNode(nk)});this.$H=ss.mkdel(this,function(nk){this.$S=ReactDOM.findDOMNode(nk)})},{$E:function(){return{overflow:'hidden',textOverflow:'ellipsis',maxWidth:this.state.publishButtonMaxWidth}},componentDidMount:function(){this.$K.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,function(nk){this.$M()})));if(this.$Q.length>0){this.setState({savingStatusHasRendered:true})}var ni=$('.'+'tabAuthMenuBarCommandMenus');var nj=ni.find('.'+'tabAuthMenuBarMenu');if(nj.length>0){nj[0].setAttribute('tabindex','0')}nj.each(function(nk,nl){nl.setAttribute('role','menuitem')});this.$c()},$k:function(){var ni=$(ReactDOM.findDOMNode(this.refs['menu-bar-ref']));this.$L=0;for(var nj=0;nj<this.$J.length;nj++){var nk=this.$J[nj];var nl=ni.find('.'+nk.$1);if(ss.isNullOrUndefined(nl)){continue}nk.$4=nl.outerWidth(true);this.$L+=nk.$4}var nm=ni.find('.'+'tabAuthMenuBarDraftIndicator');var nn=((nm.length>0)?nm.outerWidth(true):0);this.$I=220+nn},componentDidUpdate:function(ni){this.$P=!_.isEqual(ni,this.props);this.$c()},componentWillUnmount:function(){this.$K.dispose()},render:function(){if(ss.isValue(this.props.menuItems)){ss.clear(this.$J);for(var ni=0;ni<this.props.menuItems.length;ni++){var nj={$:this.props.menuItems[ni]};var nk=this.$J;var nl=new g;nl.$3=nj.$.title;nl.$1=nj.$.cssClassName;nl.$0=ss.mkdel({item:nj,$this:this},function(nm,nn){this.$this.props.itemClickedCallback(this.item.$.itemId,nm,nn)});nl.$2=ss.mkdel({item:nj,$this:this},function(nm,nn){this.$this.props.itemEnteredCallback(this.item.$.itemId,nm,nn)});nk.push(nl)}}return spiff.DOMElements.div({ref:'menu-bar-ref',className:'tabAuthMenuBar'+' '+'tabAuthMenuBarNewHeaderLayout'},this.$t(),this.$m(),this.$y(),((this.props.showPublishCallout&&!this.state.userDismissedPublishCallout)?ss.mkdel(this,this.$x)():null),((this.state.savingStatusHasRendered&&this.props.showAutosaveCallout)?ss.mkdel(this,this.$l)():null))},$B:function(){return spiff.DOMElements.h1({className:'tabAuthMenuBarWorkbook',title:this.props.workbookDisplayName},this.props.workbookDisplayName)},$t:function(){var ni=(ss.isNullOrEmptyString(this.state.authoringLeftAreaWidth)?{}:{width:this.state.authoringLeftAreaWidth});return spiff.DOMElements.div({className:'tabAuthMenuBarLeftHeaderArea',style:ni},spiff.ReactElement.div$1('tabAuthMenuBarLeftUpperArea',[(this.state.hasNarrowWidth?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tabAuthMenuBarLeftHeaderWorkbookInfo',style:{maxWidth:this.state.workbookNameDivMaxWidth}},this.$B(),(this.props.isDraft?(function(){return spiff.ReactElement.div$1('tabAuthMenuBarDraftIndicator',[tab.Strings.AuthMenuBarDraftIndicator])})():null))})():null)]),spiff.ReactElement.div$1('tabAuthMenuBarMenus',[this.$q()]))},$m:function(){return(!this.state.hasNarrowWidth?ss.mkdel(this,function(){return spiff.ReactElement.div$1('tabAuthMenuBarCenterHeaderArea',[(this.props.isDraft?(function(){return spiff.ReactElement.div$1('tabAuthMenuBarDraftIndicator',[tab.Strings.AuthMenuBarDraftIndicator])})():null),this.$B()])})():null)},$y:function(){var ni=spiff.ReactElement.div$1('tabAuthMenuFlexSpace',[]);return spiff.ReactElement.div$1('tabAuthMenuBarRightHeaderArea',[ni,this.$r(),this.$z(),this.$A(),this.$s(),this.$w(),spiff.ReactElement.div$1('tabAuthMenuBarDivider',[]),this.$u(),spiff.ReactElement.div$1('tabAuthMenuBarDivider',[]),(!this.props.isCloseButtonHidden?ss.mkdel(this,function(){return this.$n()})():null)])},$x:function(){if(ss.isNullOrUndefined(this.$O)){return null}if(this.props.willAutoSaveEnableOnPublish){return React.createElement(gn,{anchorElement:this.$O,contentTitle:tab.Strings.AuthFirstPublishInformationToastTitle,contentText:tab.Strings.AuthFirstPublishInformationToastText,learnMoreToken:'server-autosave',onClose:ss.mkdel(this,function(){this.setState({userDismissedPublishCallout:true})})})}else{return React.createElement(gn,{anchorElement:this.$O,contentTitle:tab.Strings.AuthFirstPublishInformationToastTitle,onClose:ss.mkdel(this,function(){this.setState({userDismissedPublishCallout:true})})})}},$l:function(){return React.createElement(gn,{anchorElement:this.$Q.item(0),contentTitle:tab.Strings.AuthAutosaveEnabledToastTitle,contentText:tab.Strings.AuthAutosaveEnabledToastBody,learnMoreToken:'server-autosave',onClose:this.props.closeAutosaveCallout})},$n:function(){var ni=tab.NavigationUtil.wasTabOpenedByTableau(tab.Log.get$1(by),tab.WindowHelper.get_windowSelf());if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveForNewWorkbooks')&&ni){return null}var nj={className:'tabAuthMenuBarExit',onClick:ss.mkdel(this,function(nk){this.props.exitClicked()}),testId:'tabAuthMenuBarExit',title:tab.Strings.AuthMenuBarExit,useDarkStyling:true};return React.createElement(SharedWidgets.CloseButtonWidget,nj)},$5:function(){var ni=this.props.publishOptions[0];var nj={buttonType:2,handleClick:ni.onExecute,testId:'authMenuBarPublishButtonSingle',children:ni.displayName,disabled:!ni.isEnabled,ref:this.$F,style:this.$E()};return spiff.ReactElement.div$1('tabAuthMenuBarPublishButtonContainer',[React.createElement(SharedWidgets.ButtonWidget,nj)])},$f:function(ni){for(var nj=0;nj<this.props.publishOptions.length;nj++){var nk=this.props.publishOptions[nj];if(ss.referenceEquals(nk.displayName,ni)){nk.onExecute(null)}}this.$3()},$D:function(ni){this.setState({publishButtonMenuIsOpen:!this.state.publishButtonMenuIsOpen,userDismissedPublishCallout:true})},$3:function(){this.setState({publishButtonMenuIsOpen:false})},$7:function(){var ni=this.props.publishOptions[0];var nj={buttonType:2,handleClick:ni.onExecute,testId:'authMenuBarPublishButtonMainPart',children:ni.displayName,ref:this.$F,style:this.$E()};return React.createElement(SharedWidgets.ButtonWidget,nj)},$9:function(){if(ss.isNullOrUndefined(this.$O)||ss.isNullOrUndefined(this.$R)){return null}var ni=[];for(var nj=1;nj<this.props.publishOptions.length;nj++){var nk=this.props.publishOptions[nj];var nl={displayValue:nk.displayName,value:nk.displayName};ni.push(nl)}var nm={anchorEl:this.$R,toggleEl:this.$R,anchorOrigin:{vertical:'bottom',horizontal:'left'},stackedOrigin:{vertical:'top',horizontal:'left'},allowAutoPosition:true,onSelect:ss.mkdel(this,function(nn){this.$f(nn)}),requestCloseAll:ss.mkdel(this,this.$3),menuItemInfos:ni,id:'authMenuBarPublishButtonFlyout',testId:'authMenuBarPublishButtonFlyout',key:'authMenuBarPublishButtonFlyout'};return React.createElement(SharedWidgets.FlyoutListMenuWidget,nm)},$8:function(){var ni={kind:'primary',isOpen:this.state.publishButtonMenuIsOpen,onClick:ss.mkdel(this,this.$D),testId:'authMenuBarPublishButtonMenuPart','aria-controls':'authMenuBarPublishButtonFlyout','aria-label':tab.Strings.AuthMenuBarPublishButtonMenuAriaLabel,children:(this.state.publishButtonMenuIsOpen?[this.$9()]:null),ref:this.$G};return React.createElement(SharedWidgets.MenuButtonWidget,ni)},$6:function(){var ni={button:this.$7(),menuButton:this.$8()};return spiff.ReactElement.div$1('tabAuthMenuBarPublishButtonContainer',[React.createElement(SharedWidgets.SplitButtonWidget,ni)])},$w:function(){if(this.props.publishOptions.length===1){return this.$5()}else{return this.$6()}},$q:function(){var ni=0;if(this.props.isMenuOpen){var nj=$('.tabMenu');var nk={};var nl=ss.Int32.tryParse(nj.css('z-index'),nk);if(!nl){}ni=nk.$}return spiff.DOMElements.div({className:'tabAuthMenuBarCommandMenus',style:{zIndex:ni},role:'menubar'},this.$4(),this.$v())},$r:function(){var ni=this.props.isWorkbookTemplateSampleData;var nj=(ni?('tabAuthMenuBarSampleDataSpinner'+' active'):'tabAuthMenuBarSampleDataSpinner');return spiff.DOMElements.div({className:nj},(ni?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'waiting',style:{textAlign:'center'}},spiff.DOMElements.div({className:'centering'},React.createElement(SharedWidgets.ActivitySpinnerWidget,{testId:'waiting',shouldShowUnderlay:false,spinnerSize:14})))})():null))},$z:function(){var ni=this.props.isWorkbookTemplateSampleData;var nj=(ni?('tabAuthMenuBarSampleDataMsg'+' active'):'buttonHidden');return spiff.DOMElements.div({className:nj},(ni?(function(){return spiff.DOMElements.div({},tab.Strings.WorkbookTemplatesSampleData)})():null))},$A:function(){return spiff.ReactElement.div$1('tabAuthMenuBarSavingStatusMessage',[((tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&!this.props.isWorkbookTemplateSampleData)?this.props.status:null)])},$s:function(){return(!tab.MiscUtil.isNullOrEmpty$1(this.props.lastPublishedDSDate)?ss.mkdel(this,function(){return spiff.ReactElement.div$1('tabAuthMenuBarLastPublishedDSDateMessage',[ss.formatString('{0}: {1}',tab.Strings.LastPublished,this.props.lastPublishedDSDate)])})():null)},$u:function(){if(tsConfig.isPublic||tsConfig.embeddingV3){return spiff.DOMElements.div({className:'tabAuthMenuBarPublic',style:{maxWidth:this.state.localMenusDivMaxWidth}},this.props.userTitle)}var ni=ss.isValue(this.state.openedMenuId)&&ss.equalsT(this.state.openedMenuId,'userMenu');var nj=[];nj.push('tabAuthMenuBarMenu');nj.push('tabAuthMenuBarLocalMenus');var nk=nj;var nl=null;if(!this.props.isLoggedOn){nk.push('logOnItem');nl={id:'logOnItem',className:nk.join(' '),onClick:ss.mkdel(this,function(nm){this.$i()}),style:{maxWidth:this.state.localMenusDivMaxWidth}}}else{if(ni){nk.push('opened')}nk.push('userMenu');nl={id:'userMenu',className:nk.join(' '),'aria-controls':(ni?'authMenuBarUserFlyout':null),'aria-expanded':ni,'aria-haspopup':'menu',onClick:ss.mkdel(this,function(nm){this.$g()}),style:{maxWidth:this.state.localMenusDivMaxWidth},ref:this.$H}}return spiff.DOMElements.button(nl,spiff.DOMElements.span({className:'tabAuthMenuBarMenuLabel'},(this.props.isLoggedOn?this.props.userTitle:tab.Strings.AuthMastheadLogin)),spiff.DOMElements.span({className:'tabAuthMenuBarDropdownArrow'}),(ni?ss.mkdel(this,this.$a)():null))},$i:function(){var ni=tab.VizUriModel.createForAuthoringUnpublishedSheet(tsConfig.repositoryUrl,tsConfig.current_sheet_name);tab.LogOnViewModel.logOnAndTransitionSession(ni)},$g:function(){var ni=ss.isValue(this.state.openedMenuId)&&ss.equalsT(this.state.openedMenuId,'userMenu');this.setState({openedMenuId:(ni?null:'userMenu')})},$a:function(){var ni=[];ni.push({displayValue:tab.Strings.AuthMastheadUserPrefs,value:'userPreferences'});var nj=ni;if(this.props.isLogOutEnabled){nj.push({displayValue:tab.Strings.AuthMastheadLogout,value:'userLogout'})}var nk={anchorEl:this.$S,toggleEl:this.$S,anchorOrigin:{vertical:'bottom',horizontal:'left'},stackedOrigin:{vertical:'top',horizontal:'left'},allowAutoPosition:true,onSelect:ss.mkdel(this,this.$h),requestCloseAll:ss.mkdel(this,function(){this.setState({openedMenuId:null})}),menuItemInfos:nj,id:'authMenuBarUserFlyout',testId:'authMenuBarUserFlyout',key:'userMenu'};return React.createElement(SharedWidgets.FlyoutListMenuWidget,nk)},$h:function(ni){if(ni==='userPreferences'){bx.$2('User','User Preferences',0);tab.WindowHelper.open(tab.UserUrl.toPrefsUrl(tsConfig.current_user_name),'_blank')}else if(ni==='userLogout'){bx.$2('User','Sign Out',1);var nj=function(){tab.NotificationViewModel.showNotification(tab.Strings.SignOutFailedMessage,null)};tab.WorkgroupServerCommands.logOff(nj)}},$4:function(){var ni=[];for(var nj=0;nj<this.$J.length;nj++){var nk={$:this.$J[nj]};ni.push(this.$o(nk.$.$3,nk.$.$1,ss.mkdel({menu:nk,$this:this},function(){this.$this.$0(this.menu.$.$0,this.menu.$.$1)})))}return ni},$o:function(ni,nj,nk){return this.$p(ni,nj,null,nk,null)},$p:function(ni,nj,nk,nl,nm){var nn=[];nn.push('tabAuthMenuBarMenu');nn.push(nj);var no=nn;if(this.props.isMenuOpen&&ss.referenceEquals(nj,this.state.openedMenuId)){no.push('opened')}if(ss.contains(this.state.collapsedMenuIds,nj)){no.push('buttonHidden')}var np=new EventUtils.EventHandleSpec;np.tap=function(nq){nl()};np.firstTouch=function(nq){nq.preventDefault()};return EventUtils.EventForwarder.div(np,{key:nj},spiff.DOMElements.div({className:no.join(' '),key:ni,style:nk||{},onMouseEnter:ss.mkdel(this,function(nq){this.$e(nq.currentTarget)}),onKeyUp:ss.mkdel(this,function(nq){this.$d(nq,nl)}),title:ni,'aria-haspopup':'menu'},spiff.DOMElements.span({className:'tabAuthMenuBarMenuLabel'},ni),nm))},$v:function(){var ni=[];ni.push('tabAuthMenuBarMenu');ni.push('moreMenu');var nj=ni;if(this.state.collapsedMenuIds.length===0){nj.push('buttonHidden')}if(this.props.isMenuOpen&&'moreMenu'===this.state.openedMenuId){nj.push('opened')}var nk=new Object;nk.ariaLabelName=tab.Strings.AuthToolbarMore;nk.iconClassName='tabAuthMenuBarMoreIcon';nk.customClassName=nj.join(' ');nk.key='moreMenu';var nl=nk;var nm=new EventUtils.EventHandleSpec;nm.tap=ss.mkdel(this,function(nn){this.$1(this.props.moreClicked,'moreMenu')});nm.firstTouch=function(nn){nn.preventDefault()};return EventUtils.EventForwarder.div(nm,{onMouseEnter:ss.mkdel(this,function(nn){this.$e(nn.currentTarget)}),onKeyUp:ss.mkdel(this,function(nn){this.$d(nn,ss.mkdel(this,function(){this.$1(this.props.moreClicked,'moreMenu')}))})},React.createElement(spiff.IconButtonComponent,nl))},$0:function(ni,nj){var nk=ReactDOM.findDOMNode(this.refs['menu-bar-ref']);var nl=$(nk).find('.'+nj);var nm=this.$j(nj);this.setState({openedMenuId:nj});ni(new spiff.ShowMenuOptions(nl,false),nm)},$1:function(ni,nj){var nk=ReactDOM.findDOMNode(this.refs['menu-bar-ref']);var nl=$(nk).find('.'+nj);var nm=this.$j(nj);this.setState({openedMenuId:nj});var nn=[];for(var no=0;no<this.$J.length;no++){var np={$:this.$J[no]};if(ss.contains(this.state.collapsedMenuIds,np.$.$1)){nn.push(spiff.MenuItem.newActionItem(np.$.$3,ss.mkdel({item:np,$this:this},function(){this.$this.$0(this.item.$.$0,'moreMenu')}),true,''))}}ni(new spiff.ShowMenuOptions(nl,false),nm,nn)},$2:function(ni,nj){var nk=ni-this.$L-nj;return nk<this.$I},$b:function(){var ni=$(ReactDOM.findDOMNode(this.refs['menu-bar-ref']));var nj=ni.width();if(nj===this.$N&&!this.$P){return}this.$P=false;this.$N=nj;var nk=ni.find('.'+'tabAuthMenuBarRightHeaderArea').outerWidth();var nl=nj-nk-40;var nm=this.$2(nj,nk);if(nm!==this.state.hasNarrowWidth){this.setState({hasNarrowWidth:nm})}this.$C(nj,nk,nl);if(!nm||this.$L<nl){if(this.state.collapsedMenuIds.length!==0){this.setState({collapsedMenuIds:[]})}if(ss.compareStrings(this.state.authoringLeftAreaWidth,'auto',true)!==0){this.setState({authoringLeftAreaWidth:'auto'})}return}var nn=ni.find('.'+'tabAuthMenuBarWorkbook').outerWidth()+'px';if(!(ss.compareStrings(this.state.authoringLeftAreaWidth,nn,true)===0)){this.setState({authoringLeftAreaWidth:nn})}var no=[];var np=true;for(var nq=0;nq<this.$J.length;nq++){var nr=this.$J[nq];if(!np||nl<nr.$4){no.push(nr.$1);np=false}else{nl-=nr.$4}}if(this.state.collapsedMenuIds.length!==no.length){this.setState({collapsedMenuIds:no})}},$C:function(ni,nj,nk){this.setState({localMenusDivMaxWidth:nj*0.2+'px',publishButtonMaxWidth:nj*0.3+'px',workbookNameDivMaxWidth:(this.state.hasNarrowWidth?(nk+'px'):(ni*0.1875+'px'))})},$c:function(){this.$k();this.$b()},$e:function(ni){var nj=$(ni);if(nj.children().hasClass('moreMenu')){this.$1(this.props.moreMouseEntered,'moreMenu')}else{for(var nk=0;nk<this.$J.length;nk++){var nl=this.$J[nk];if(nj.hasClass(nl.$1)){this.$0(nl.$2,nl.$1);break}}}},$d:function(ni,nj){var nk=$('.'+'tabAuthMenuBarCommandMenus');var nl='.'+'tabAuthMenuBarMenu'+':not(.'+'buttonHidden'+')';var nm=nk.find(nl);var nn=nm.index(ni.target);var no=nm[nn];if(ni.key==='Enter'||ni.key==='ArrowDown'){nj();return}else if(ni.key==='ArrowRight'){nn++}else if(ni.key==='ArrowLeft'){nn--}else{return}no.setAttribute('tabindex','-1');nn=ss.imod(nm.length+nn,nm.length);nm[nn].setAttribute('tabindex','0');nm[nn].focus()},$j:function(ni){return this.props.isMenuOpen&&ss.isValue(this.state.openedMenuId)&&ss.equalsT(this.state.openedMenuId,ni)}});var bx=global.tab.AuthoringMenuBarTelemetry=ss.mkType(a,'tab.AuthoringMenuBarTelemetry',null,null,{$0:function(){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){tab.OnlineAnalyticsClient.logEvent('Authoring.Exit',null)}},$4:function(ni,nj,nk,nl){if(!(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry'))){return}var nm=new tab.MenuItemTelemetryConfigOptions;nm.set_commands(nj);nm.menuItems=nl;nm.set_menuItem(nk);nm.set_menuPrefix(ni);nm.set_menuTextMayBeSensitive(true);var nn=nm;var no=tab.CommandsTelemetryUtils.getMenuItemTelemetryInfoFromMenuAndCommands(nn);if(ss.isValue(no)){bx.$5('Server',ni,no.get_commandIndexInFlattenedList(),no.fullMenuItemName,no.get_commandReadId(),no.get_commandName())}else{}},$5:function(ni,nj,nk,nl,nm,nn){tab.OnlineAnalyticsClient.logEvent('Authoring.MenuItem',ss.mkdict(['ItemType',ni,'Menu',nj,'Item',nm,'Index',nk,'FullName',nl,'Command',nn]))},$3:function(ni,nj,nk){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){bx.$5('Local',ni,nk,tab.CommandsTelemetryUtils.joinToPrefix(ni,nj.readId,':'),nj.readId,'')}},$2:function(ni,nj,nk){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){bx.$5('Local',ni,nk,tab.CommandsTelemetryUtils.joinToPrefix(ni,nj,':'),nj,'')}},$1:function(ni){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){var nj=ni.match(bx.$7)||[];var nk=nj.length;tab.OnlineAnalyticsClient.logEvent('Authoring.HelpSearch',ss.mkdict(['Query',ni,'Length',ni.length,'Words',nk]))}}});var by=global.tab.AuthoringMenuBarViewModel=ss.mkType(a,'tab.AuthoringMenuBarViewModel',function(ni){this.$O=null;this.$N=null;this.$U=null;this.$T=null;this.$E=null;this.$G=false;this.$J=false;this.$K=false;this.$P=true;this.$R=false;this.$Q=false;this.$L=false;this.$S=false;this.$F=0;this.$D=null;this.$M=null;this.$H=true;this.$I=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$U=ni;this.$U.add_uiModeChanged(ss.mkdel(this,this.incrementProps));var nj=ss.mkdel(this,function(nm){this.incrementProps()});this.$U.add_sheetTypeChanged(nj);var nk=ss.mkdel(this,function(nm){this.incrementProps()});this.$U.get_commands().add_commandsChanged(nk);tab.JumpstartRefreshJobController.get_instance().add_activeJumpstartSampleData(ss.mkdel(this,this.$m));if(ss.isValue(this.$U.get_dataSchema())){this.$U.get_dataSchema().add_newActiveDataSource(ss.mkdel(this,this.$i))}var nl=ss.mkdel(this,function(nm){this.incrementProps()});cl.get_instance().add_statusUpdate(nl);if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){cl.get_instance().add_draftStatusErrorStateChanged(ss.mkdel(this,this.incrementProps))}this.$q();tab.WorkgroupServerCommands.get_getSessionInfo().done(ss.mkdel(this,function(nm){this.$P=nm.site.logoutEnabled}));if((tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&cl.get_instance().get_willAutoSaveEnableOnPublish()||this.$8())&&(tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringNewWorkbookUriWithConnectTo()||tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringNewDatasourceUri())){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(ss.mkdel(this,function(nm){nm.callOnceOnShown(ss.mkdel(this,function(){nm.callOnceAfterClose(ss.mkdel(this,function(){this.$c()}))}))}))}this.$U.get_draftStatus().add_draftStatusChanged(ss.mkdel(this,this.$f));this.disposables.add(ss.mkdel(this,function(){this.$U.remove_uiModeChanged(ss.mkdel(this,this.incrementProps));this.$U.remove_sheetTypeChanged(nj);this.$U.get_commands().remove_commandsChanged(nk);this.$U.get_draftStatus().remove_draftStatusChanged(ss.mkdel(this,this.$f));tab.JumpstartRefreshJobController.get_instance().remove_activeJumpstartSampleData(ss.mkdel(this,this.$m));if(ss.isValue(this.$U.get_dataSchema())){this.$U.get_dataSchema().remove_newActiveDataSource(ss.mkdel(this,this.$i))}cl.get_instance().remove_statusUpdate(nl);cl.get_instance().remove_draftStatusErrorStateChanged(ss.mkdel(this,this.incrementProps))}));if(tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()){tab.ApplicationModel.get_instance().registerNotificationHandler('doc:data-source-published-event',ss.mkdel(this,this.handleDatasourcePublishedNotification))}this.$t()},{dispose:function(){this.$A();spiff.BaseViewModel.prototype.dispose.call(this)},$q:function(){var ni=[];this.$E=new tab.HelpKeyboardShortcut(iF.makeWebAuthorHelpUri(2));ni.push(this.$E);ni.push(by.$1());ni.push(by.$4());ni.push(by.$5());ni.push(by.$2());ni.push(by.$3());for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nk)}this.disposables.add(function(){for(var nl=0;nl<ni.length;nl++){var nm=ni[nl];KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(nm)}})},$k:function(){if(!by.$b()){return}if(!this.$G){this.$T={};return}var ni=ss.mkdel(this,function(nj){this.$T=nj||{};this.incrementProps()});tab.WorkbookDraftsCommands.getCurrentDraft().then(ni,ni)},$c:function(){tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.$R=true;this.incrementProps()}),1000)},$8:function(){if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveForNewWorkbooks')){return false}return tsConfig.is_authoring&&cl.get_instance().isNewWorkbook&&!tsConfig.is_desktop&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringExistingDatasourceUri()},$t:function(){if((tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&cl.get_instance().get_willAutoSaveEnableOnPublish()||this.$8())&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringNewWorkbookUriWithConnectTo()&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringNewDatasourceUri()){this.$c()}},$s:function(){if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&!tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveForNewWorkbooks')&&this.$G&&tsConfig.workbookContentVersion===1){this.$Q=true}},createInitialProps:function(){return{isLoggedOn:!tsConfig.is_guest,isLogOutEnabled:this.$P,userTitle:tsConfig.current_user_friendly_name,exitClicked:ss.mkdel(this,this.$d),moreClicked:ss.mkdel(this,this.$6),isWorkbookTemplateSampleData:this.$L,showPublishCallout:false,showAutosaveCallout:false,closeAutosaveCallout:ss.mkdel(this,this.$7),moreMouseEntered:ss.mkdel(this,this.$l),itemEnteredCallback:ss.mkdel(this,this.$h),itemClickedCallback:ss.mkdel(this,this.$g),lastPublishedDSDate:this.$M,isCloseButtonHidden:tabBootstrap.Affordances.isOff('closeWorkbook')}},$b:function(ni){var nj=new kK;var nk=new kJ;var nl=true;if(!nj.get_isEnabled()&&!nk.get_isEnabled()){ni.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublish,function(nm){},false));nl=false}if(nj.get_isEnabled()){ni.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublish,function(nm){nj.invoke()},true))}if(nk.get_isEnabled()){ni.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublishAs,function(nm){nk.invoke()},true))}if(nl){ni.push(new jl(tab.Strings.RunOptimizer,function(nm){tab.WorkbookAnalyzerCommands.launchWorkbookAnalyzer()},true))}},$9:function(ni){if(this.$U.get_isEditingPublishedDatasource()){var nj=this.$U.get_dataSchema().getDataSourceCount(false)!==0;if(this.$I&&nj){ni.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublish,function(nk){(new mA.$ctor1(false,0,0,1000,true)).invoke()},true))}if(this.$H&&nj){ni.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublishAs,function(nk){(new mA.$ctor1(true,0,0,1000,true)).invoke()},true))}}if(ni.length===0){ni.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublishAs,function(nk){},false))}},$f:function(ni){this.$G=ni;this.$k();this.$s();this.incrementProps()},$a:function(){var ni=[];if(this.$U.get_isEditingPublishedDatasource()){this.$9(ni)}else{this.$b(ni)}return ni},handleDatasourcePublishedNotification:function(ni,nj){this.$B()},$B:function(){var ni=this.$U.get_isEditingPublishedDatasource()&&ss.isValue(this.$U.get_dataSchema())&&ss.isValue(this.$U.get_dataSchema().get_activeDataSource());if(ni){var nj=new tab.GetLastPublishedDateForDataSourceCmd;nj.set_datasourceName(this.$U.get_dataSchema().get_activeDataSource().get_name());nj.set_uiBlocking('none');var nk=nj.invoke();nk.done(ss.mkdel(this,function(nl){this.$M=this.$e(nl.lastPublishedAt);this.incrementProps()}))}},$e:function(ni){var nj={format:tab.ApplicationModel.get_instance().get_localeDateFormat(),locale:tsConfig.locale,timeFormat:tab.ApplicationModel.get_instance().get_localeTimeFormat(),locale_formatting_strings:tableau.format.defaultLocaleStrings};return tab.DateUtil.formatISO8601DateTimeToLocalDateTime(ni,nj,0)},createUpdatedProps:function(){return{workbookName:tsConfig.workbookName,workbookDisplayName:by.createWorkbookDisplayName(this.$T,this.$U),menuItems:iF.create$1(this.$U.get_uiMode()).buildMenuItems(),isMenuOpen:this.$J,isUserMenuOpen:this.$K,isDraft:cl.get_instance().get_autoSaveEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&this.$G&&cl.get_instance().get_isDraftStatusSuccess(),willAutoSaveEnableOnPublish:cl.get_instance().get_willAutoSaveEnableOnPublish(),publishOptions:this.$a(),showPublishCallout:this.$R,showAutosaveCallout:this.$Q&&cl.get_instance().get_isDraftStatusSuccess(),isWorkbookTemplateSampleData:this.$L,status:((tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&cl.get_instance().get_isDraftStatusSuccess())?cl.get_instance().status:null),lastPublishedDSDate:this.$M,isCloseButtonHidden:tabBootstrap.Affordances.isOff('closeWorkbook')}},$h:function(ni,nj,nk){if(this.$r(nk)){this.$x(ni,nj)}},$g:function(ni,nj,nk){if(nk){this.$j()}else{this.$x(ni,nj)}},$x:function(ni,nj){this.$N=nj;switch(ni){case'analysis':{this.$u(nj);return}case'help':{this.$v(nj);return}}if(by.$8(ni)){nj.expanded=true}var nk=ss.mkdel(this,function(nl){var nm=nl.commands;if(by.$9(ni)){nm=by.sortSubCommands(nm)}this.$y(ni,nm,nj)});tab.MenuBarClientCommands.getMainMenu(ni,nk)},$r:function(ni){return!ni&&this.$J&&!this.$K},$d:function(){bx.$0();bn.exitAuthoring(this.$U)},$7:function(){this.$Q=false;this.incrementProps()},$u:function(ni){var nj=ss.mkdel(this,function(nk){this.$y('analysis',nk.commands,ni)});if(tab.ApplicationModel.get_instance().get_currentSheetType()==='worksheet'){cc.selectedDataSourceNameAsync().done(function(nk){tab.MenuBarClientCommands.getAnalysisMainMenu(nj,nk)})}else{tab.MenuBarClientCommands.getAnalysisMainMenu(nj,null)}},$v:function(ni){this.$3(ni,null)},$3:function(ni,nj){var nk=iF.create$1(this.$U.get_uiMode()).buildHelpMenu(ni,this.$E,by.$6,ss.mkdel(this,this.$o),nj);this.$w(nk,ni)},$6:function(ni,nj,nk){if(nj){this.$j()}else{this.$z(ni,nk)}},$l:function(ni,nj,nk){if(this.$r(nj)){this.$z(ni,nk)}},$z:function(ni,nj){if(ss.isNullOrUndefined(nj)||nj.length===0){return}this.$N=ni;var nk=spiff.MenuViewModel.createForMenu(new spiff.Menu(nj),function(nl){var nm=_.indexOf(nj,nl);bx.$3('More',nl,nm);tab.WidgetUtil.commandMenuItemClicked(nl)},ss.mkdel(this,this.$o),null);nk.set_shouldAnimateOnClose(false);this.$w(nk,ni)},$y:function(ni,nj,nk){if(!ss.referenceEquals(nk,this.$N)){return}if(tsConfig.is_mobile&&ss.isValue(nj)){nj=cc.filterCommandsForMobile(nj)}var nl=null;var nm=tab.WidgetUtil.menuViewModelFromCommands(nj,function(nn){bx.$4(ni,nj,nn,nl.menuItems);if(nn.name.indexOf('Show Grid')!==-1){eh.logGridStateChangeEvent(nn.checkState===1,false)}tab.WidgetUtil.commandMenuItemClicked(nn)},ss.mkdel(this,this.$o),null,null);nl=nm.get_menu();this.$w(nm,nk)},$j:function(){if(ss.isValue(this.$O)){this.$O.hide();this.$O=null}},$w:function(ni,nj){this.$j();ni.show(nj);this.$p();this.$O=ni;this.$N=null},$n:function(){this.$L=this.$F!==0;this.$S=false;this.$D=null;this.incrementProps()},$m:function(ni){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(ss.mkdel(this,function(nj){this.$D=nj.showExtractInProgressDialog(ss.mkdel(this,this.$n));this.$S=true;this.$5(ni)}))},$5:function(ni){this.$F=window.setInterval(ss.mkdel(this,function(){tab.WorkgroupServerCommands.getBackgroundJobProgressState(ni).done(ss.mkdel(this,function(nj){if(nj==='inProgress'){return}this.$4();if(this.$S&&ss.isValue(this.$D)){this.$D()}else{this.$n()}if(nj==='success'){tab.JumpstartTelemetry.logJumpstartSuccessBannerOpen();tab.Application.get_commonBannerProvider().showSuccessBanner(tab.Strings.WorkbookTemplatesSuccessBannerMessage,tab.Strings.WorkbookTemplatesSuccessBannerActionMessage,by.$7,false)}else if(nj==='error'){tab.JumpstartTelemetry.logJumpstartErrorBannerOpen();var nk=function(){tab.JumpstartTelemetry.logJumpstartErrorBannerClick()};tab.Application.get_commonBannerProvider().showErrorBanner(tab.Strings.WorkbookTemplatesExtractErrorBannerMessage,tab.Strings.WorkbookTemplatesExtractErrorBannerActionMessage,nk,false)}})).fail(ss.mkdel(this,this.$4))}),by.get_checkExtractJobIsDoneTimeout())},$A:function(){this.$4()},$4:function(){if(this.$F!==0){window.clearInterval(this.$F);this.$F=0}},$p:function(){this.$J=true;this.incrementProps()},$o:function(){this.$J=false;this.$K=false;this.incrementProps()},$i:function(){this.$B();this.$C()},$C:function(){var ni=this.$U.get_isEditingPublishedDatasource()&&ss.isValue(this.$U.get_dataSchema())&&ss.isValue(this.$U.get_dataSchema().get_activeDataSource());if(ni){var nj=this.$U.get_dataSchema().getPublishedDsPermissions();if(ss.isValue(nj)){nj.done(ss.mkdel(this,function(nk){var nl=this.$H!==nk.canSaveasPublishedDataSource||this.$I!==nk.canOverwritePublishedDataSource;if(nl){this.$H=nk.canSaveasPublishedDataSource;this.$I=nk.canOverwritePublishedDataSource;this.incrementProps()}}))}}}},{get_checkExtractJobIsDoneTimeout:function(){return 3000},$b:function(){return tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveForNewWorkbooks')&&tsConfig.draft_type==='UNPUBLISHED_WORKBOOK'},$3:function(){var ni=new Object;ni.alt='required';var nj=new KeyboardShortcuts.KeyCombo('F2',ni);var nk=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[mG,Object]))(nj,true,false,null,null,null,null);return nk},$2:function(){var ni=new Object;ni.macControl='required';ni.shift='required';var nj=ni;var nk=new KeyboardShortcuts.KeyCombo('d',nj);var nl=new Object;nl.nonMacControl='required';nl.alt='required';nl.shift='required';var nm=nl;var nn=new KeyboardShortcuts.KeyCombo('d',nm);var no=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[my,Object]))(new KeyboardShortcuts.KeyCombos(nk,nn),true,true,null,null,null,null);return no},$5:function(){var ni=new Object;ni.controlOrCommand='required';var nj=ni;var nk=new KeyboardShortcuts.KeyCombo('s',nj);var nl=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[kM,Object]);var nm=new Object;nm.propagation=1;var nn=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[kM,Object]))(nk,false,false,null,null,nm,[{ns:'tabdoc',cmd:'save'}]);return nn},$4:function(){var ni=new Object;ni.controlOrCommand='required';ni.shift='required';var nj=ni;var nk=new KeyboardShortcuts.KeyCombo('s',nj);var nl=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[kJ,Object]);var nm=new Object;nm.propagation=1;var nn=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[kJ,Object]))(nk,false,false,null,null,nm,null);return nn},$1:function(){var ni=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[cU,Object]);var nj=new Object;nj.alt='required';var nk=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[cU,Object]))(new KeyboardShortcuts.KeyCombo('q',nj),false,true,null,null,null,null);return nk},$9:function(ni){return ni==='data'},$8:function(ni){return ni==='map'},sortSubCommands:function(ni){if(ss.isNullOrUndefined(ni)){return null}var nj=new tab.CommandsPresModelWrapper.$ctor1(ni);if(ss.isNullOrUndefined(nj.get_commandItems())||nj.get_commandItems().length===0){return null}var nk=by.splitSubCommands(nj);var nl=nk.item1;var nm=nk.item2;nl.sort(function(np,nq){return np.get_name().toLocaleLowerCase().localeCompare(nq.get_name().toLocaleLowerCase())});for(var nn=0;nn<nl.length;nn++){var no=nl[nn];nm.push(no.get_item())}nj.set_commandItems(nm);return nj.get_presModel()},splitSubCommands:function(ni){var nj=ni.get_commandItems()||[];var nk=[];var nl=[];for(var nm=0;nm<nj.length;nm++){var nn=nj[nm];var no=new tab.CommandItemWrapper(nn);if(no.get_commandsType()==='subcommands'){nk.push(no)}else{nl.push(nn)}}return{item1:nk,item2:nl}},$6:function(ni){bx.$1(ni);window.open(tab.UriUtil.makeHelpSearchUri(ni))},$7:function(){tab.JumpstartTelemetry.logJumpstartSuccessBannerClick();var ni=tab.VizUriModel.createForCurrentWindowLocation(null);ni.fullPageLoad(null)},createWorkbookDisplayName:function(ni,nj){var nk=tsConfig.workbookName;if(by.$b()){nk=(ss.isValue(ni)?ss.coalesce(ni.name,nk):null)}else if(tsConfig.isPublic){nk=ss.formatString('{0} ({1})',tsConfig.workbookName,tab.Strings.TableauPublic)}else if(nj.get_isEditingPublishedDatasource()&&tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringExistingDatasourceUri()){nk=nj.get_dataSchema().get_activeDataSource().get_name()}else if(nj.get_isEditingPublishedDatasource()){nk=tab.Strings.NewDataSource}return nk}});var bz=global.tab.AuthoringPlaceholder=ss.mkType(a,'tab.AuthoringPlaceholder',function(){},{removeFromDom:function(){var ni=$('.'+'tabAuthoringPlaceholderUX');if(ss.isValue(ni)&&ni.length>0){ni.remove()}}},{get_instance:function(){if(ss.isNullOrUndefined(bz.$1)){bz.$1=new bz}return bz.$1}});var bA=global.tab.AuthoringSizingComputer=ss.mkType(a,'tab.AuthoringSizingComputer',null,null,{computeSizing:function(ni){var nj=bA.$0(ni);nj.position='absolute';nj.overflow='hidden';return nj},$0:function(ni){var nj=ni.rightAreaWidth;var nk=tabBootstrap.VizLayoutConstants.get_authoringTabsHeight();var nl=tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight();var nm=0;var nn=ni.sheetType==='dashboard'&&!ni.isMobile;if(ni.sheetType==='worksheet'){if(!ni.isMobile){nj+=tabBootstrap.VizLayoutConstants.get_authoringVizMargin();nk+=tabBootstrap.VizLayoutConstants.get_authoringVizMargin()}nl+=tabBootstrap.VizLayoutConstants.get_authoringShelfHeight();nm+=tabBootstrap.VizLayoutConstants.get_authoringShelfWidth()+ni.leftAreaWidth}else if(nn||ni.sheetType==='story'){nm+=ni.leftAreaWidth}if(ni.isDevicePreviewBarVisible){nl+=tabBootstrap.VizLayoutConstants.get_authoringDevicePreviewBarHeight()}var no={top:nl+'px',right:nj+'px',bottom:nk+'px',left:nm+'px'};return no}});var bB=global.tab.AuthoringStatusComponent=ss.mkType(a,'tab.AuthoringStatusComponent',function(ni){spiff.PureRenderComponent.call(this,ni);if(ce.shouldShowFilmstripView()){this.state={selectedMode:0}}},{render:function(){var ni=null;if(this.props.shouldShowStats){var nj={};nj['numberOfMarks']=this.$2();nj['rowsByColumns']=this.$3();nj['lastComputedCalculation']=this.props.lastComputedCalculation;var nk=nj;ni=_.map(Object.keys(nk),ss.mkdel(this,function(nm){return(!tab.MiscUtil.isNullOrEmpty$1(nk[nm])?ss.mkdel(this,function(){return spiff.DOMElements.span({className:nm,key:nm},nk[nm])})():null)}))}var nl=(ce.shouldShowFilmstripView()?(' '+'viewButtons'):'');return spiff.DOMElements.div({className:'tabAuthTabStatusBar'+nl},ni,(ce.shouldShowFilmstripView()?ss.mkdel(this,this.$1)():null))},$2:function(){var ni=this.props.totalMarks;var nj=this.props.selectedMarks;if(nj>0&&ni>1&&nj!==ni){return tab.Strings.SelectedMarksText(nj,ni)}return((ni===1)?tab.Strings.MarkTextOneMark(ni):tab.Strings.MarksTextMultiMark(ni))},$3:function(){var ni=this.props.numberOfRows;var nj=this.props.numberOfColumns;if(ni===1&&nj===1){return tab.Strings.RowByColumn(ni,nj)}if(ni===1&&nj>1){return tab.Strings.RowByColumns(ni,nj)}if(ni>1&&nj===1){return tab.Strings.RowsByColumn(ni,nj)}if(ni>1&&nj>1){return tab.Strings.RowsByColumns(ni,nj)}return null},$1:function(){var ni=this.$0('filmstripView','tabAuthTabFilmstripViewIcon',1);var nj=this.$0('tabsView','tabAuthTabTabsViewIcon',0);var nk=[ni,nj];return spiff.DOMElements.span({className:'tabAuthTabStatusBarViews',key:'tabAuthTabStatusBarViews'},nk)},$0:function(ni,nj,nk){return spiff.DOMElements.div({className:(this.$4(nk)?'selected':'')},React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nl){this.$5(nk)}),buttonType:10,testId:ni,children:spiff.DOMElements.div({className:nj})}))},$4:function(ni){return this.state.selectedMode===ni},$5:function(ni){if(this.$4(ni)){return}this.setState({selectedMode:ni});this.props.handleViewModeChange(ni)}});var bC=global.tab.AuthoringStatusViewModel=ss.mkType(a,'tab.AuthoringStatusViewModel',function(ni){this.$3$1=0;this.$3$2=0;this.$3$3=0;this.$3$4=0;this.$3$5=null;this.$3$6=false;this.$3$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_handleSelectedViewMode(ni)},{get_totalMarks:function(){return this.$3$1},set_totalMarks:function(ni){this.$3$1=ni},get_selectedMarks:function(){return this.$3$2},set_selectedMarks:function(ni){this.$3$2=ni},get_numberOfRows:function(){return this.$3$3},set_numberOfRows:function(ni){this.$3$3=ni},get_numberOfColumns:function(){return this.$3$4},set_numberOfColumns:function(ni){this.$3$4=ni},get_lastComputedCalculation:function(){return this.$3$5},set_lastComputedCalculation:function(ni){this.$3$5=ni},get_shouldShowStats:function(){return this.$3$6},set_shouldShowStats:function(ni){this.$3$6=ni},get_handleSelectedViewMode:function(){return this.$3$7},set_handleSelectedViewMode:function(ni){this.$3$7=ni},updateForVisual:function(ni){if(ss.isValue(ni)){this.set_totalMarks(ni.get_totalMarks());this.set_selectedMarks(ni.get_selectedMarks());this.set_numberOfRows(ni.get_numberOfRows());this.set_numberOfColumns(ni.get_numberOfColumns());this.set_lastComputedCalculation(ni.get_lastComputedCalculation());this.set_shouldShowStats(true)}else{this.set_shouldShowStats(false)}this.incrementProps()},createInitialProps:function(){return{totalMarks:0,selectedMarks:0,numberOfRows:0,numberOfColumns:0,lastComputedCalculation:'',shouldShowStats:false,handleViewModeChange:this.get_handleSelectedViewMode()}},createUpdatedProps:function(){return{totalMarks:this.get_totalMarks(),selectedMarks:this.get_selectedMarks(),numberOfRows:this.get_numberOfRows(),numberOfColumns:this.get_numberOfColumns(),lastComputedCalculation:this.get_lastComputedCalculation(),shouldShowStats:this.get_shouldShowStats(),handleViewModeChange:this.get_handleSelectedViewMode()}}});var bD=global.tab.AuthoringTabConstants=ss.mkType(a,'tab.AuthoringTabConstants');var bE=global.tab.AuthoringTabNavigatorHoverHandler=ss.mkType(a,'tab.AuthoringTabNavigatorHoverHandler',function(ni,nj,nk){this.$3=null;this.$4=null;this.$2=false;this.$5=0;this.$6=null;this.$3=ni;this.$4=nj;this.$5=nk;this.$2=false},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){if(!this.$1(ni)){return null}if(this.$2){return this}this.$2=true;if(!ss.staticEquals(this.$3,null)){this.$3()}if(!ss.isValue(this.$6)){this.$6=tab.WindowHelper.setInterval(this.$3,this.$5)}return this},dragExit:function(ni){this.$2=false;this.$0(ni)},acceptDrop:function(ni){this.$0(ni);var nj=$.Deferred();nj.resolve(false);return nj},getDropTarget:function(ni){return this},getDropCursor:function(ni){return(this.$1(ni)?spiff.CustomCursor.panDrag:spiff.CustomCursor.noOp)},$1:function(ni){var nj=ss.safeCast(ni,bL);return ss.isValue(nj)},$0:function(ni){if(!this.$1(ni)){return}this.$6=tab.MiscUtil.clearInterval(this.$6);if(!ss.staticEquals(this.$4,null)){this.$4()}}});var bF=global.tab.AuthoringTabNavPlaceholderComponent=ss.mkType(a,'tab.AuthoringTabNavPlaceholderComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){var ni=[];if(ss.isValue(this.props.sheetNames)){ni=_.map(this.props.sheetNames,ss.mkdel(this,function(nj){return this.$0(nj)}))}return this.$1(ni)},$0:function(ni){var nj=(ss.referenceEquals(this.props.currentSheet,ni)?('tabAuthTab'+' '+'tabAuthTabChecked'):'tabAuthTab');var nk=ni+'-key';var nl=spiff.DOMElements.span({className:'tabAuthTabLabel'},ni);return spiff.DOMElements.span({className:nj,key:nk},spiff.DOMElements.span({className:'rightEdge'}),nl)},$1:function(ni){return spiff.DOMElements.div({className:'tabAuthoringTabNavPlaceholder'},ni)}});var bG=global.tab.AuthoringTabNavView=ss.mkType(a,'tab.AuthoringTabNavView',function(ni){this.authoringTabNavViewModel=null;this.dom=null;ss.makeGenericType(spiff.BaseView$1,[bH]).call(this,ni,new bI);this.authoringTabNavViewModel=ni;this.dom=this.get_template();this.authoringTabNavViewModel.add_tabsChanged(ss.mkdel(this,this.updateContent));this.authoringTabNavViewModel.add_currentTabChanged(ss.mkdel(this,this.$g));this.disposables.add(ss.mkdel(this,function(){this.authoringTabNavViewModel.remove_tabsChanged(ss.mkdel(this,this.updateContent));this.authoringTabNavViewModel.remove_currentTabChanged(ss.mkdel(this,this.$g))}));if(bG.get_shouldShowDataTab()){this.authoringTabNavViewModel.add_sheetsChanged(ss.mkdel(this,this.$a));this.disposables.add(ss.mkdel(this,function(){this.authoringTabNavViewModel.remove_sheetsChanged(ss.mkdel(this,this.$a))}));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.dataSourceButton,ss.mkdel(this,function(nk){this.get_viewModel().selectDataTab()})))}else{this.dom.dataSourceButton.toggleClass('dataTabHidden',true)}if(ce.shouldShowFilmstripView()){this.authoringTabNavViewModel.add_onViewModeChanged(ss.mkdel(this,this.$k));this.disposables.add(ss.mkdel(this,function(){this.authoringTabNavViewModel.remove_onViewModeChanged(ss.mkdel(this,this.$k))}))}var nj=new iM(ni);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nj);this.disposables.add(function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(nj)})},{get_tabsWidth:function(){return this.dom.tabContainer[0].scrollWidth},get_availableWidth:function(){return this.dom.tabContainer[0].clientWidth},$g:function(){this.scrollToActiveTab();this.updateContent()},scrollToActiveTab:null,onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(!tsConfig.is_mobile){this.dom.tabScrollArea.toggleClass('pinnedCreateButtons',true);this.$8()}this.$j();this.updateContent()},updateContent:function(){tab.StartupUtils.callAfterModelsInitialized(ss.mkdel(this,function(){this.$i()}))},$d:function(){var ni=spiff.Widget.getWidgets(this.dom.tabContainer.children(),bK);for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];nk.dispose()}this.dom.tabContainer.empty();this.dom.tabContainer.detach()},$j:function(){this.$d();var ni=new tab.TabbedNavigationPlaceholderViewModel;var nj=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.TabbedNavigationPlaceholderViewModel,bF,Object])).call(null,[ni]);nj.addToDom(this.dom.tabContainer);this.dom.tabContainer.prependTo(this.dom.tabScrollArea)},$i:function(){this.$d();var ni=this.authoringTabNavViewModel.get_workbookTabs();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];var nl=new bK(nk);nl.addToDom(this.dom.tabContainer)}if(tsConfig.is_mobile){this.$8()}this.dom.tabContainer.prependTo(this.dom.tabScrollArea);this.updateTabNavigation();this.$h();this.$c()},$8:function(){if(this.$b()){return}var ni=this.authoringTabNavViewModel.get_tabControlButtons();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];this.$7(nk)}},$7:function(ni){var nj=$("\n                <span class='"+'tabAuthTab'+' '+ni.get_buttonClass()+"' data-test-id='"+ni.get_buttonClass()+"'>\n                    <span class='"+'rightEdge'+"'></span>\n                    <div class='"+ni.get_iconClass()+"'></span>\n                </span>");nj.prop('title',ni.get_titleText());spiff.ClickHandler.targetAndClick(nj,ni.get_onClick());var nk=(!tsConfig.is_mobile?this.dom.createButtonsContainer:this.dom.tabContainer);nk.append(nj)},$k:function(){switch(this.authoringTabNavViewModel.get_currentViewMode()){case 1:{this.$e();break}case 0:{this.$f();break}default:{break}}},$b:function(){return tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()},$e:function(){this.dom.domRoot.addClass('filmstrip');var ni=this.get_viewModel().get_visibleWorkbookTabs();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];nk.addThumbnailUri();this.$i()}},$f:function(){this.dom.domRoot.removeClass('filmstrip');var ni=this.get_viewModel().get_visibleWorkbookTabs();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];nk.invalidateThumbnailUri();this.$i()}},$c:function(){var ni=tab.ApplicationModel.get_instance().get_workbook();var nj=ss.mkdel(this,function(nk){this.$h()});ni.get_dataSchema().add_newDataSchema(ss.mkdel(this,this.$h));ni.get_dataSchema().add_newActiveDataSource(ss.mkdel(this,this.$h));ni.get_dataSchema().add_newDataSourceAdded(nj);this.disposables.add(ss.mkdel(this,function(){ni.get_dataSchema().remove_newDataSchema(ss.mkdel(this,this.$h));ni.get_dataSchema().remove_newActiveDataSource(ss.mkdel(this,this.$h));ni.get_dataSchema().remove_newDataSourceAdded(nj)}))},$h:function(){this.dom.dataSourceButton.toggleClass('tabAuthTabChecked',this.get_viewModel().get_currentUIMode()==='data-tab');this.dom.dataSourceIcon.toggleClass('tabAuthDataTabIconActive',ss.isNullOrUndefined(this.get_viewModel().get_currentTab()));this.dom.dataSourceIcon.toggleClass('tabAuthDataTabIcon',ss.isValue(this.get_viewModel().get_currentTab()));this.$9()},$a:function(){this.$9()},$9:function(){var ni=ss.isNullOrUndefined(this.get_viewModel())||!this.get_viewModel().get_isActiveDataSourceSupported();if(!bG.get_shouldShowDataTab()){this.dom.dataSourceButton.hide()}else{this.dom.dataSourceButton.toggleClass('tabAuthDisabledTab',ni);this.dom.dataSourceButton.prop('title',(ni?(tab.Strings.DisabledDataTabTooltipInfo+'\n'+tab.Strings.DisabledDataTabTooltipDetails):tab.Strings.DataTabName))}},updateTabNavigation:null},{get_shouldShowDataTab:function(){return tabBootstrap.Affordances.isOn('authoring_DataTab')}});var bH=global.tab.AuthoringTabNavViewModel=ss.mkType(a,'tab.AuthoringTabNavViewModel',function(ni){this.$f=[];this.$d=[];this.$e=null;this.$c=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=0;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;spiff.BaseViewModel.call(this);this.$e=ni;this.set_selectionHandler(new bJ);this.set_reorderedTab(null);this.$e.add_sheetsChanged(ss.mkdel(this,this.$0));this.$e.add_uiModeChanged(ss.mkdel(this,this.$7));this.$c=lQ.controlButtons(this);this.disposables.add(ss.mkdel(this,function(){this.$e.remove_sheetsChanged(ss.mkdel(this,this.$0));this.$e.remove_uiModeChanged(ss.mkdel(this,this.$7))}));var nj=0;this.set_currentViewMode(nj);if(ss.isValue(this.$e.get_sheetsInfo())){this.$5()}this.$7()},{add_tabsChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_tabsChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_currentTabChanged:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_currentTabChanged:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_sheetsChanged:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_sheetsChanged:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},add_onViewModeChanged:function(ni){this.$2$4=ss.delegateCombine(this.$2$4,ni)},remove_onViewModeChanged:function(ni){this.$2$4=ss.delegateRemove(this.$2$4,ni)},get_workbookTabs:function(){return this.$f},get_visibleWorkbookTabs:function(){return this.$d},get_selectedTabNames:function(){var ni=tab.ListExtensions.where(bM).call(null,this.$f,function(nj){return(!nj.isHidden||nj.get_isCurrent())&&nj.get_isSelected()});return Array.prototype.slice.call(ni.map(function(nj){return nj.name.toString()}))},get_areMultipleTabsSelected:function(){return this.get_selectedTabNames().length>1},get_currentUIMode:function(){return this.$e.get_uiMode()},get_currentViewMode:function(){return this.$2$5},set_currentViewMode:function(ni){this.$2$5=ni},get_currentTab:function(){return this.$2$6},set_currentTab:function(ni){this.$2$6=ni},get_selectionHandler:function(){return this.$2$7},set_selectionHandler:function(ni){this.$2$7=ni},get_reorderedTab:function(){return this.$2$8},set_reorderedTab:function(ni){this.$2$8=ni},get_isActiveDataSourceSupported:function(){return ss.isValue(this.$e.get_dataSchema().get_activeDataSource())&&this.$e.get_dataSchema().get_activeDataSource().get_isDataTabViewSupported()},$8:function(){return this.$e.get_isDataTabUIMode()},$9:function(){return tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_SheetTabMultiSelect')},$a:function(){return this.$2$9},$b:function(ni){this.$2$9=ni},get_tabControlButtons:function(){return this.$c},selectDataTab:function(){if(this.get_isActiveDataSourceSupported()){tab.VizClientCommands.setUIMode('data-tab','DirectNavigation','')}},$2:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=this.get_currentTab();if(this.$8()){tab.VizClientCommands.setUIMode('document',null,ni.name);if(ss.isValue(nj)&&ss.referenceEquals(nj,ni)){this.$6(ni.name);this.raiseActionEvent(this.$2$2)}}else{if(ni.get_isCurrent()){this.get_selectionHandler().simpleSelect(ni.name);var nk=this.get_workbookTabs();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(!ss.referenceEquals(nm,ni)){nm.set_isSelected(false)}}return}if(ss.isValue(nj)){nj.set_isCurrent(false)}this.set_currentTab(ni);ni.set_isCurrent(true);this.get_selectionHandler().simpleSelect(ni.name);this.$6(ni.name);this.raiseActionEvent(this.$2$2)}if(!ss.referenceEquals(ni.name,this.$a())){var nn={sheetName:ni.name,oldSheetName:this.$a(),sheetType:ls.toSheetType(ni.tabType),noUndo:false,repositoryUrl:tsConfig.workbookName+'/'+ni.name};var no=(ss.isValue(nj)?nj.name.toString():this.$a());if(!ss.isNullOrEmptyString(no)){nn.oldRepositoryUrl=tsConfig.workbookName+'/'+no}tab.Application.fireOnTabSelect(nn)}},$4:function(ni){this.get_selectionHandler().toggleSelect(ni.name);this.$6(this.get_currentTab().name)},$1:function(ni){var nj=[];var nk=this.get_workbookTabs();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nj.push(nm.name)}this.get_selectionHandler().rangeSelect(ni.name,nj);this.$6(this.get_currentTab().name)},simpleSelectSheetTab:function(ni){tab.DataSourceExtractController.commitPendingExtractAction().done(ss.mkdel(this,function(){this.$2(ni)}))},toggleSelectSheetTab:function(ni){if(this.$8()){return}tab.DataSourceExtractController.commitPendingExtractAction().done(ss.mkdel(this,function(){this.$4(ni)}))},rangeSelectSheetTab:function(ni){if(this.$8()){return}tab.DataSourceExtractController.commitPendingExtractAction().done(ss.mkdel(this,function(){this.$1(ni)}))},createNewWorksheet:function(ni){tab.DataSourceExtractController.commitPendingExtractAction().done(function(){tab.SheetClientCommands.createSheet(null,ni)})},createNewDashboard:function(ni){tab.DataSourceExtractController.commitPendingExtractAction().done(function(){tab.SheetClientCommands.createDashboardOrStory(null,ni,false)})},createNewStoryboard:function(ni){tab.DataSourceExtractController.commitPendingExtractAction().done(function(){tab.SheetClientCommands.createDashboardOrStory(null,ni,true)})},$0:function(ni){this.raiseActionEvent(this.$2$3);this.$5()},$5:function(){var ni=tab.WorkbookModel.get_currentSheetName();this.$3(ni);this.$b(ni);this.$6(this.$a())},$3:function(ni){if(this.$8()){this.get_selectionHandler().get_selectedNames().clear()}else if(!ss.referenceEquals(ni,this.$a())){this.get_selectionHandler().simpleSelect(ni)}else if(!this.get_selectionHandler().isSelected(ni)){this.get_selectionHandler().simpleSelect(ni)}},$6:function(ni){var nj=this.$e.get_sheetsInfo();this.get_selectionHandler().handleSheetsChanged(nj.map(function(nr){return nr.sheet.toString()}));var nk=[];for(var nl=0;nl<nj.length;nl++){var nm=nj[nl];var nn=ss.referenceEquals(nm.sheet,ni);if(!nn&&!nm.isVisible){continue}var no=nn&&!this.$8();var np=new bM(nm,this);np.set_isCurrent(no);np.set_isSelected((this.$9()?this.get_selectionHandler().isSelected(nm.sheet):no));var nq=np;nk.push(nq);if(nn){this.set_currentTab(nq)}}if(this.haveTabsChanged(nk)){tab.MiscUtil.dispose(this.$f);this.$f=nk;this.$d=tab.ListExtensions.where(bM).call(null,this.$f,function(nr){return!nr.isHidden||nr.get_isCurrent()});if(ss.isValue(this.$2$1)){this.$2$1()}}else{tab.MiscUtil.dispose(nk)}},haveTabsChanged:function(ni){return ni.length!==this.$f.length||_.any(this.$f,function(nj,nk){return!nj.equalTo(ni[nk])})},$7:function(){var ni=ss.isNullOrUndefined(this.get_currentTab());var nj=ni!==this.$8();if(nj){this.$3(this.$a());this.set_currentTab(null);var nk=this.get_workbookTabs();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.set_isCurrent(ss.referenceEquals(nm.name,this.$a())&&!this.$8());nm.set_isSelected(this.get_selectionHandler().isSelected(nm.name));if(nm.get_isCurrent()){this.set_currentTab(nm)}}this.raiseActionEvent(this.$2$2)}},setSelectedViewMode:function(ni){this.set_currentViewMode(ni);this.raiseActionEvent(this.$2$4)}});var bI=global.tab.AuthoringTabNavViewTemplate=ss.mkType(a,'tab.AuthoringTabNavViewTemplate',function(){this.tabScrollArea=null;this.tabContainer=null;this.leftButton=null;this.rightButton=null;this.menuButton=null;this.dataSourceButton=null;this.dataSourceIcon=null;this.leftScrollHelper=null;this.createButtonsContainer=null;spiff.Template.call(this,$(bI.$2));this.tabScrollArea=this.getElementBySelector(ss.formatString('.{0}','tabAuthTabNavTabs'));this.tabContainer=this.getElementBySelector('.tabAuthTabNavTabContainer');this.leftButton=this.getElementBySelector('.tabAuthTabNavLeftButton');this.rightButton=this.getElementBySelector('.tabAuthTabNavRightButton');this.menuButton=this.getElementBySelector('.'+'tabAuthTabNavMenuButton');this.leftScrollHelper=this.getElementBySelector('.tabAuthLeftScrollDropTarget');this.createButtonsContainer=this.getElementBySelector('.tabAuthTabCreationButtonsContainer');this.dataSourceButton=this.getElementBySelector('.tabAuthTabDSTab');this.dataSourceIcon=this.dataSourceButton.find('.tabAuthTabIcon')},{rightMostElement:function(){return this.tabContainer.children().last()}});var bJ=global.tab.AuthoringTabSelectionHandler=ss.mkType(a,'tab.AuthoringTabSelectionHandler',function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.set_selectedNames(new Set);this.set_anchorName(null);this.set_lastRangeSelectName(null)},{get_selectedNames:function(){return this.$1$1},set_selectedNames:function(ni){this.$1$1=ni},get_anchorName:function(){return this.$1$2},set_anchorName:function(ni){this.$1$2=ni},get_lastRangeSelectName:function(){return this.$1$3},set_lastRangeSelectName:function(ni){this.$1$3=ni},ensureInitialized:function(ni){if(ss.isNullOrUndefined(this.get_anchorName())){this.get_selectedNames().add(ni);this.set_anchorName(ni)}},simpleSelect:function(ni){this.get_selectedNames().clear();this.get_selectedNames().add(ni);this.set_anchorName(ni);this.set_lastRangeSelectName(null)},toggleSelect:function(ni){var nj=this.get_selectedNames().has(ni);if(nj&&this.get_selectedNames().size>1){this.get_selectedNames().delete(ni)}else if(!nj){this.get_selectedNames().add(ni)}this.set_anchorName(ni);this.set_lastRangeSelectName(null)},rangeSelect:function(ni,nj){var nk=nj.indexOf(this.get_lastRangeSelectName());var nl=nj.indexOf(this.get_anchorName());var nm=nj.indexOf(ni);if(nl===-1||nm===-1){return}if(nk!==-1){var nn=Math.min(nl,nk);var no=Math.max(nl,nk);for(var np=nn;np<=no;np++){this.get_selectedNames().delete(nj[np])}}var nq=Math.min(nl,nm);var nr=Math.max(nl,nm);for(var ns=nq;ns<=nr;ns++){this.get_selectedNames().add(nj[ns])}this.set_lastRangeSelectName(ni)},isSelected:function(ni){return this.get_selectedNames().has(ni)},handleRename:function(ni,nj){if(this.get_selectedNames().has(ni)){this.get_selectedNames().delete(ni);this.get_selectedNames().add(nj)}if(ss.referenceEquals(this.get_anchorName(),ni)){this.set_anchorName(nj)}if(ss.referenceEquals(this.get_lastRangeSelectName(),ni)){this.set_lastRangeSelectName(nj)}},handleSheetsChanged:function(ni){var nj=[];this.get_selectedNames().forEach(function(nk){if(!ss.contains(ni,nk)){nj.push(nk)}});nj.forEach(ss.mkdel(this,function(nk){this.handleDelete(nk)}))},handleDelete:function(ni){if(this.get_selectedNames().has(ni)){this.get_selectedNames().delete(ni);if(ss.referenceEquals(this.get_anchorName(),ni)){this.set_anchorName(null)}if(ss.referenceEquals(this.get_lastRangeSelectName(),ni)){this.set_lastRangeSelectName(null)}}}});var bK=global.tab.AuthoringTabView=ss.mkType(a,'tab.AuthoringTabView',function(ni){this.glass=null;this.renameInput=null;this.$t=null;this.$u=null;this.$y=null;this.$z=null;this.$v=false;this.$w=null;this.$x=null;this.$3$1=false;this.$3$2=false;this.$3$3=false;ss.makeGenericType(spiff.BaseView$1,[bM]).call(this,ni,new bO);this.$u=ni;this.$t=this.get_template();this.$t.tabColor.css('border-bottom-color',this.$u.color);if(this.$l()){$("<span class='tabAuthTabIcon'></span>").insertBefore(this.$t.label)}this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$t.domRoot[0],ss.mkdel(this,this.handleClick)).onDoubleClick(ss.mkdel(this,this.handleDoubleClick)).onRightClick(ss.mkdel(this,this.handleRightClick)));var nj=new EventUtils.EventHandleSpec;nj.hover=ss.mkdel(this,function(nl){this.$c()});nj.hoverDelay=200;var nk=nj;this.disposables.add$1(new EventUtils.TableauEventHandler(this.$t.domRoot[0],nk));this.$t.domRoot.mouseleave(ss.mkdel(this,this.$g));this.$u.add_onTabChanged(ss.mkdel(this,this.$n));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$u.remove_onTabChanged(ss.mkdel(this,this.$n))})));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$a))})));EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.dragStarted));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.dragStarted))})));this.set_isDraggedOver(false);this.set_isDroppingToTheRight(false);this.set_cannotBeDropped(true);this.$n()},{$q:function(){return this.$u.parent},get_isDroppingToTheRight:function(){return this.$3$1},set_isDroppingToTheRight:function(ni){this.$3$1=ni},get_isDraggedOver:function(){return this.$3$2},set_isDraggedOver:function(ni){this.$3$2=ni},get_cannotBeDropped:function(){return this.$3$3},set_cannotBeDropped:function(ni){this.$3$3=ni},$s:function(){return this.$t.domRoot[0]},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(!tsConfig.is_mobile){this.$7();this.createRenameInput();if(ce.shouldShowFilmstripView()){this.$o()}}},$7:function(){EventUtils.DragDropManager.attachDragSource(this.$t.domRoot,this.$u);this.$x=new bN(this.$u.get_visibleIndexOfThisTab(),ss.mkdel(this,this.onDragOver),ss.mkdel(this,this.$f),ss.mkdel(this,this.$e),true);this.$w=new bN(this.$u.get_visibleIndexOfThisTab(),ss.mkdel(this,this.onDragOver),ss.mkdel(this,this.$f),ss.mkdel(this,this.$e),false);EventUtils.DragDropManager.attachDropTarget(this.$t.rightDropHandler,this.$x);EventUtils.DragDropManager.attachDropTarget(this.$t.leftDropHandler,this.$w);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.removeDragSource(this.$t.domRoot);EventUtils.DragDropManager.detachDropTarget(this.$t.rightDropHandler);EventUtils.DragDropManager.detachDropTarget(this.$t.leftDropHandler)})))},onDragOver:function(ni,nj,nk){this.set_cannotBeDropped(!ni||!nk);if(ni){this.set_isDraggedOver(true);if(nk){this.set_isDroppingToTheRight(nj)}}this.dragChanged()},$f:function(){this.set_isDraggedOver(false);this.dragChanged()},$e:function(ni){this.get_viewModel().updateReorderedTab(ni)},dragStarted:function(ni){var nj={};if(tsConfig.is_mobile||!bN.tryGetDragInstanceAsAuthoringTabViewDragInstance(ni,nj)){return}var nk=nj.$.get_viewModel().get_isSelected();if(nk&&this.$u.get_isSelected()||!nk&&ss.referenceEquals(nj.$.get_viewModel(),this.$u)){this.$t.domRoot.addClass('moveTab')}},$a:function(ni){if(!tsConfig.is_mobile){this.$t.domRoot.removeClass('moveTab');this.$t.domRoot.removeClass('toTheRight');this.$t.domRoot.removeClass('firstTab')}},dragChanged:function(){if(!tsConfig.is_mobile){var ni=this.get_viewModel().parent.get_visibleWorkbookTabs();var nj=this.$u.get_visibleIndexOfThisTab()===ni.length-1;var nk=this.$u.get_visibleIndexOfThisTab()===0;if(!this.get_isDraggedOver()&&!nk){this.$j(ni,false);this.get_viewModel().set_isDroppingToTheRight(false)}this.$p(nk,nj);var nl=!this.get_isDroppingToTheRight()&&!this.get_cannotBeDropped()&&!nk&&this.get_isDraggedOver();if(nl){this.$j(ni,true)}}},$p:function(ni,nj){this.$t.domRoot.toggleClass('toTheRight',this.get_isDroppingToTheRight()&&!this.get_cannotBeDropped()&&this.get_isDraggedOver()).toggleClass('lastTab',this.get_isDroppingToTheRight()&&!this.get_cannotBeDropped()&&nj&&this.get_isDraggedOver()).toggleClass('firstTab',!this.get_isDroppingToTheRight()&&!this.get_cannotBeDropped()&&ni&&this.get_isDraggedOver())},$j:function(ni,nj){var nk=this.get_viewModel().get_visibleIndexOfThisTab()-1;if(nk>=0){ni[nk].set_isDroppingToTheRight(nj)}},dispose:function(){this.$9();if(ss.isValue(this.glass)){this.glass.dispose()}ss.makeGenericType(spiff.BaseView$1,[bM]).prototype.dispose.call(this)},$d:function(ni,nj){if(!tsConfig.is_mobile&&this.renameInput.element.css('display')!=='none'||this.$r()){return}var nk=new spiff.ShowMenuOptions(ni,false);nk.preferUp=true;nk.additionalMenuClass='tabAuthSheetContextMenu';nj.showContextMenu(nk)},handleRightClick:function(){if(!this.$r()){this.$d(this.$t.domRoot,this.$u)}},handleClick:function(ni){if(ss.referenceEquals(this.$u,this.$q().get_currentTab())&&(tsConfig.is_mobile||BrowserSupport.BrowserSupport.IsTouch())){this.$d(this.$t.domRoot,this.$u)}else if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_SheetTabMultiSelect')){var nj=ni.shiftKey;var nk=(BrowserSupport.BrowserSupport.IsMac()?ni.metaKey:ni.ctrlKey);if(nj){this.$q().rangeSelectSheetTab(this.$u)}else if(nk){this.$q().toggleSelectSheetTab(this.$u)}else{this.$q().simpleSelectSheetTab(this.$u)}}else{this.$q().simpleSelectSheetTab(this.$u)}},handleDoubleClick:function(){if(tsConfig.is_mobile||this.$r()){return}this.$m()},renameTab:function(){if(this.$u.tryRename(this.renameInput.get_text())){this.$b()}else{this.$8()}},$m:function(){EventUtils.DragDropManager.removeDragSource(this.$t.domRoot);this.$t.label.hide();this.renameInput.element.show();this.renameInput.get_inputElement().focus();this.renameInput.get_inputElement().select();this.$k()},$b:function(){this.$t.label.text(this.renameInput.get_text().trim());this.$t.label.show();this.renameInput.element.hide();EventUtils.DragDropManager.attachDragSource(this.$t.domRoot,this.$u);this.$h()},$8:function(){this.renameInput.set_text(this.$u.name);this.$b()},$k:function(){this.renameInput.element.addClass('inputTabFocused');if(ss.isNullOrUndefined(this.glass)){this.glass=new spiff.Glass(null,false);this.glass.add_click(ss.mkdel(this,this.renameTab))}this.glass.show()},$h:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.mkdel(this,this.renameTab));this.glass.dispose();this.glass=null}this.renameInput.element.removeClass('inputTabFocused')},$g:function(ni){if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails')){this.$v=false;this.$9()}},$9:function(){if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails')){this.$y=tab.MiscUtil.dispose$1(this.$y);if(ss.isValue(this.$z)){this.$z.dispose()}}},$c:function(){if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails')){this.$v=true;var ni=this.$u.name;var nj=this.$u.getThumbnail(ni);nj.done(ss.mkdel(this,this.$i)).fail(ss.mkdel(this,function(){}))}},$i:function(ni){var nj={isDashboard:this.$u.tabType==='dashboard',isHidden:this.$u.isHidden,name:this.$u.name};var nk=this.$t.domRoot[0];var nl={anchorElement:nk,anchorOrigin:{vertical:'top',horizontal:'left'},stackedOrigin:{vertical:'bottom',horizontal:'left'}};if(this.$v){this.$9();this.$z=new mh(nl,nj,ni);this.$y=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[mh,SharedWidgets.Overlay,Object])).call(null,[this.$z]);this.$y.addToDom(this.$t.domRoot)}},$n:function(){if(ce.shouldShowFilmstripView()){this.$o()}if(this.$r()){this.$t.label.text(tab.Strings.ScratchpadTitle).attr('title',tab.Strings.ScratchpadTitle)}else{this.$t.label.text(this.$u.name).attr('title',this.$u.name)}this.$t.tabColor.css('border-bottom-color',this.$u.color);this.$t.domRoot.toggleClass('tabAuthTabChecked',this.$u.get_isSelected()).toggleClass('tabAuthTabCurrent',this.$u.get_isCurrent()&&this.$u.get_isSelected()).toggleClass('tabDashboard',this.$u.tabType==='dashboard').toggleClass('tabWorksheet',this.$u.tabType==='worksheet').toggleClass('tabStory',this.$u.tabType==='story').toggleClass('toTheRight',this.$u.get_isDroppingToTheRight())},$o:function(){if(this.$q().get_currentViewMode()===1){this.get_viewModel().addThumbnailUri()}if(this.$t.domRoot.length>0){this.$s().style.backgroundImage=this.get_viewModel().get_thumbnailUri()}else{}},$l:function(){return this.$u.tabType==='dashboard'||this.$u.tabType==='story'},$r:function(){var ni=tab.ApplicationModel.get_instance().get_workbook();return ss.isValue(ni)&&ni.get_isEditingPublishedDatasource()},createRenameInput:function(){if(ss.isValue(this.renameInput)){return}this.renameInput=spiff.TextInputView.newTextInputView(this.$t.label.text(),'',null,false);this.renameInput.add_enterKeyPressed(ss.mkdel(this,this.renameTab));this.renameInput.add_escapeKeyPressed(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.renameInput.remove_enterKeyPressed(ss.mkdel(this,this.renameTab))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.renameInput.remove_escapeKeyPressed(ss.mkdel(this,this.$8))})));this.renameInput.element.on('change keyup paste',function(ni){window.setTimeout(function(){},50)});this.renameInput.element.addClass('tabAuthTabRenameInput');this.renameInput.get_inputElement().attr('maxlength',(254).toString());this.element.append(this.renameInput.element);this.renameInput.element.hide()}});var bL=global.tab.AuthoringTabViewDragInstance=ss.mkType(a,'tab.AuthoringTabViewDragInstance',function(ni,nj){this.$2$1=0;this.$2$2=null;EventUtils.DragInstance.call(this,ni,null);this.set_viewModel(ni);this.set_sourceIndex(nj)},{get_defaultDropCursor:function(){return bL.$1},get_sourceIndex:function(){return this.$2$1},set_sourceIndex:function(ni){this.$2$1=ni},get_viewModel:function(){return this.$2$2},set_viewModel:function(ni){this.$2$2=ni}});var bM=global.tab.AuthoringTabViewModel=ss.mkType(a,'tab.AuthoringTabViewModel',function(ni,nj){this.$0=false;this.$2=false;this.$1=false;this.$2$1=null;this.tabType=null;this.parent=null;this.name=null;this.isHidden=false;this.color=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.parent=nj;this.name=ni.sheet;var nk='worksheet';if(ni.isStory){nk='story'}else if(ni.isDashboard){nk='dashboard'}this.tabType=nk;this.isHidden=!ni.isVisible;this.color=ni.tabColor;this.$1=false},{add_onTabChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_onTabChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_thumbnailUri:function(){return this.$2$2},set_thumbnailUri:function(ni){this.$2$2=ni},get_visibleIndexOfThisTab:function(){return ss.indexOf(this.parent.get_visibleWorkbookTabs(),this)},get_isCurrent:function(){return this.$0},set_isCurrent:function(ni){this.$0=ni;this.raiseActionEvent(this.$2$1)},get_isSelected:function(){return this.$2},set_isSelected:function(ni){this.$2=ni;this.raiseActionEvent(this.$2$1)},get_isDroppingToTheRight:function(){return this.$1},set_isDroppingToTheRight:function(ni){this.$1=ni;this.raiseActionEvent(this.$2$1)},addThumbnailUri:function(){var ni=tab.ThumbnailUtils.getThumbnailUriString(this.name);var nj='url("'+ni+'")';this.set_thumbnailUri(nj)},invalidateThumbnailUri:function(){this.set_thumbnailUri('')},startDrag:function(ni){return new bL(this,this.get_visibleIndexOfThisTab())},acceptsDragType:function(){return 1},updateReorderedTab:function(ni){this.parent.set_reorderedTab(ni)},tryRename:function(ni){var nj=this.parent.get_workbookTabs().map(function(nm){return nm.name});var nk=this.name;this.parent.get_selectionHandler().handleRename(nk,ni);var nl=ss.mkdel(this,function(nm){this.parent.get_selectionHandler().handleRename(ni,nk)});if(tab.SheetClientCommands.tryRenameSheet(nk,ni,nj,null,nl)){return true}else{nl(null);return false}},showContextMenu:function(ni){if(tsConfig.is_mobile&&this.tabType!=='worksheet'){return}var nj=function(nl){if(tsConfig.is_mobile){nl=tab.MiscUtil.cloneObject(nl);var nm=tab.CommandsPresModelWrapper.create(nl);var nn=function(np){return!dC.isDocCommand({ns:'tabdoc',cmd:'new-dashboard'},tab.CommandItemWrapper.create(np))&&!dC.isDocCommand({ns:'tabdoc',cmd:'new-storyboard'},tab.CommandItemWrapper.create(np))};if(ss.isValue(nm.get_commandItems())){nm.set_commandItems(nm.get_commandItems().filter(nn))}nl=nm.get_presModel()}var no=tab.WidgetUtil.menuViewModelFromCommands(nl,tab.WidgetUtil.commandMenuItemClicked,null,null,null);no.show(ni)};var nk=(this.get_isSelected()?this.parent.get_selectedTabNames():[this.name.toString()]);tab.SheetClientCommands.getSheetTabsContextMenu(nk,nj)},getThumbnail:function(ni){return ce.get_thumbnailCache().getThumbnail(ni)},equalTo:function(ni){return ss.referenceEquals(this.name,ni.name)&&this.isHidden===ni.isHidden&&this.get_isCurrent()===ni.$0&&ss.referenceEquals(ss.getInstanceType(this),ss.getInstanceType(ni))&&ss.referenceEquals(this.color,ni.color)&&this.tabType===ni.tabType&&this.get_isSelected()===ni.get_isSelected()}});var bN=global.tab.AuthoringTabViewModelDropHandler=ss.mkType(a,'tab.AuthoringTabViewModelDropHandler',function(ni,nj,nk,nl,nm){this.$1=false;this.$5=0;this.$4=null;this.$2=null;this.$3=null;this.$1=nm;this.$5=ni;this.$4=nj;this.$3=nk;this.$2=nl},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){var nj={};if(ss.staticEquals(this.$4,null)||!bN.tryGetDragInstanceAsAuthoringTabViewDragInstance(ni,nj)){return this}this.$4(true,this.$1,this.$0(nj.$));return this},dragExit:function(ni){if(ss.staticEquals(this.$3,null)||!bN.isDragInstanceSupported(ni)){return}this.$3()},acceptDrop:function(ni){var nj={};var nk=bN.tryGetDragInstanceAsAuthoringTabViewDragInstance(ni,nj);if(!nk){return $.Deferred().resolve(false)}if(this.$0(nj.$)){var nl=this.$5+(this.$1?1:0);var nm=[];if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_SheetTabMultiSelect')){var nn=nj.$.get_viewModel().parent.get_selectionHandler();var no=nj.$.get_viewModel().parent.get_visibleWorkbookTabs();var np=no[nj.$.get_sourceIndex()];if(!nn.isSelected(np.name)){nm.push(nj.$.get_sourceIndex())}else{for(var nq=0;nq<no.length;nq++){if(nn.isSelected(no[nq].name)){nm.push(nq)}}}}else{nm.push(nj.$.get_sourceIndex())}tab.SheetClientCommands.reorderSheets(nl,nm);if(!ss.staticEquals(this.$2,null)){this.$2(nj.$.get_viewModel())}}this.dragExit(ni);return $.Deferred().resolve(true)},$0:function(ni){var nj=ni.get_viewModel();if(nj.get_isSelected()&&nj.parent.get_areMultipleTabsSelected()){return true}var nk=ni.get_sourceIndex();var nl=this.$1&&nk===this.$5+1;var nm=!this.$1&&nk===this.$5-1;return nk!==this.$5&&!nm&&!nl},getDropTarget:function(ni){return this},getDropCursor:function(ni){return(bN.isDragInstanceSupported(ni)?bN.$1:spiff.CustomCursor.noOp)}},{isDragInstanceSupported:function(ni){var nj={};return bN.tryGetDragInstanceAsAuthoringTabViewDragInstance(ni,nj)},tryGetDragInstanceAsAuthoringTabViewDragInstance:function(ni,nj){nj.$=ss.safeCast(ni,bL);return ss.isValue(nj.$)}});var bO=global.tab.AuthoringTabViewTemplate=ss.mkType(a,'tab.AuthoringTabViewTemplate',function(){this.tabColor=null;this.label=null;this.rightDropHandler=null;this.leftDropHandler=null;spiff.Template.call(this,$("\n            <span class='tabAuthTab'>\n                <span class='tabColor'></span>\n                <span class='rightEdge'></span>\n                <span class='dragMarker'></span>\n                <span class='tabAuthTabLabel'></span>\n                <div class='tabAuthDropHandlerContainer'>\n                    <div class='tabAuthDropHandlerLeft'></div>\n                    <div class='tabAuthDropHandlerRight'></div>\n                </div>\n            </span>"));this.label=this.getElementBySelector('.'+'tabAuthTabLabel');this.tabColor=this.getElementBySelector('.'+'tabColor');this.rightDropHandler=this.getElementBySelector('.'+'tabAuthDropHandlerRight');this.leftDropHandler=this.getElementBySelector('.'+'tabAuthDropHandlerLeft')});var bP=global.tab.AuthoringToolbarButtonComponent=ss.mkType(a,'tab.AuthoringToolbarButtonComponent',function(ni,nj){ss.makeGenericType(tab.BaseToolbarButtonComponent$2,[tab.ToolbarButtonViewModel,bQ]).call(this,bQ.create,ni,nj)});var bQ=global.tab.AuthoringToolbarButtonView=ss.mkType(a,'tab.AuthoringToolbarButtonView',function(ni){tab.ToolbarButtonView.call(this,ni);this.get_dom().domRoot.addClass(ni.get_iconClass().substring('tabAuthToolbar-'.length));var nj=this.get_viewModel();var nk=this.get_viewModel().get_tooltipText();if(ss.isNullOrUndefined(nk)){nk=this.get_viewModel().get_text()}nj.set_tooltipText(nk+this.hintText());if(this.get_viewModel().get_isSeparator()){this.get_dom().get_image().hide();this.get_dom().get_text().hide()}},{onClicked:function(){bU.$0(this.get_viewModel().get_iconType());tab.ToolbarButtonView.prototype.onClicked.call(this)},hintText:function(){return(ss.isNullOrEmptyString(this.get_viewModel().get_hintText())?'':(' '+' ('+this.get_viewModel().get_hintText()+')'))}},{create:function(ni){return new bQ(ni)}});var bR=global.tab.AuthoringToolbarDropdownButtonComponent=ss.mkType(a,'tab.AuthoringToolbarDropdownButtonComponent',function(ni,nj){ss.makeGenericType(tab.BaseToolbarButtonComponent$2,[tab.ToolbarDropdownButtonViewModel,bS]).call(this,bS.create,ni,nj)});var bS=global.tab.AuthoringToolbarDropdownButtonView=ss.mkType(a,'tab.AuthoringToolbarDropdownButtonView',function(ni){this.$k=null;bQ.call(this,ni);this.$k=ni;this.$i(false);this.$k.add_expanded(ss.mkdel(this,this.$i));this.get_toolbarButton().add_click(ss.mkdel(this,this.$j));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$k.remove_expanded(ss.mkdel(this,this.$i));this.get_toolbarButton().remove_click(ss.mkdel(this,this.$j))})))},{$j:function(){this.$k.dropdownClicked(this.element,ss.mkdel(this,function(ni){bU.$1(this.$k.get_iconType(),ni)}))},$i:function(ni){this.element.attr('aria-expanded',ni.toString())}},{create:function(ni){return new bS(ni)}});var bT=global.tab.AuthoringToolbarDropdownMenuView=ss.mkType(a,'tab.AuthoringToolbarDropdownMenuView',function(ni){this.$i=null;bQ.call(this,ni);this.$i=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.ToolbarDropdownMenuViewModel,SharedWidgets.DropdownWidget,Object])).call(null,[ni]);this.disposables.add$1(this.$i)},{get_dropdownMenuView:function(){return this.$i}},{create:function(ni){return new bT(ni)}});var bU=global.tab.AuthoringToolbarTelemetry=ss.mkType(a,'tab.AuthoringToolbarTelemetry',null,null,{$0:function(ni){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){tab.OnlineAnalyticsClient.logEvent('Authoring_ToolbarItem',ss.mkdict(['Item',ni]))}},$1:function(ni,nj){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){var nk='';if(nj.checkState===1){nk='checked'}else if(nj.checkState===2){nk='radio-selected'}tab.OnlineAnalyticsClient.logEvent('Authoring_ToolbarMenuItem',ss.mkdict(['Item',ni,'Menu',nj.telemetryId,'State',nk]))}}});var bV=global.tab.AuthoringToolbarToggleButtonTemplate=ss.mkType(a,'tab.AuthoringToolbarToggleButtonTemplate',function(){this.$3=null;tab.ToolbarButtonTemplate.call(this);this.$3=$("<span class='tabAuthToolbarToggleButtonOppositeStateText'></span>");this.domRoot.append(this.$3)},{get_oppositeStateText:function(){return this.$3},setOppositeStateText:function(ni){this.$3.text(ni)}});var bW=global.tab.AuthoringToolbarToggleButtonView=ss.mkType(a,'tab.AuthoringToolbarToggleButtonView',function(ni){this.$i=null;bQ.call(this,ni);this.$i=$("<span class='tabAuthToolbarToggleButtonOppositeStateText'></span>");this.get_dom().domRoot.append(this.$i);this.setOppositeStateText(ni.get_toggleToText())},{get_oppositeStateText:function(){return this.$i},setOppositeStateText:function(ni){this.$i.text(ni)}},{create:function(ni){return new bW(ni)}});var bX=global.tab.AuthoringToolbarUberPopupButtonView=ss.mkType(a,'tab.AuthoringToolbarUberPopupButtonView',function(ni){this.$j=null;bQ.call(this,ni);this.$j=ni;this.get_toolbarButton().add_click(ss.mkdel(this,this.$i));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_toolbarButton().remove_click(ss.mkdel(this,this.$i))})))},{$i:function(){this.$j.buttonClicked(this.element)}},{$0:function(ni){return new bX(ni)}});var bY=global.tab.AuthoringToolbarUberPopupButtonViewModel=ss.mkType(a,'tab.AuthoringToolbarUberPopupButtonViewModel',function(ni,nj,nk,nl){this.$g=null;this.$i=null;this.$h=null;tab.ToolbarButtonViewModel.call(this,ni,'tabAuthToolbar-'+nj,null);this.$i=nk;this.set_enabled(true);this.set_iconType(nj);this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,this.onResize)));this.$g=ss.mkdel(this,function(){this.set_isActive(false)});this.set_isRightAligned(nl)},{get_uberPopupContent:function(){return this.$i},set_uberPopupContent:function(ni){this.$i=ni},get_relativeElement:function(){return this.$h.get_relativeElement()},set_relativeElement:function(ni){if(ss.isValue(this.$h)){this.$h.set_relativeElement(ni);this.$h.updatePosition()}},buttonClicked:function(ni){if(ss.isValue(this.$h)){this.dismissPopup()}else{this.$h=spiff.UberPopupViewModel.createForContent$1(this.$i,ni,null,true);this.$h.add_hidden(this.$g);this.$h.options.theme=0;this.$h.options.additionalClassNames=['tabSuppressVizTooltipsAndOverlays'];this.$h.options.horizontalAttach=1;this.$h.options.horizontalAlign=2;this.$h.options.isToolbarFlyout=true;this.$h.show();this.set_isActive(true)}},dismissPopup:function(){if(ss.isValue(this.$h)){this.$h.hide(false);this.$h.remove_hidden(this.$g);this.$h=null}},onResize:function(ni){if(ss.isValue(this.$h)){this.$h.updatePosition()}}});var bZ=global.tab.AuthoringToolbarView=ss.mkType(a,'tab.AuthoringToolbarView',function(ni){this.dom=null;this.$r=null;this.$p=[];this.$q=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;ss.makeGenericType(spiff.BaseView$1,[ca]).call(this,ni,new cb);this.set_authoringToolbarViewModel(ni);this.dom=this.get_template();this.$q=new tab.DisposableHolder;this.get_authoringToolbarViewModel().add_itemsChanged(ss.mkdel(this,this.updateToolbarButtons));this.$l();var nj=_.throttle(ss.mkdel(this,this.$h),50,{leading:false,trailing:true});this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',function(nk){nj()}));this.$m();this.updateToolbarButtons();nj()},{get_authoringToolbarViewModel:function(){return this.$3$1},set_authoringToolbarViewModel:function(ni){this.$3$1=ni},$n:function(){return this.$3$2},$o:function(ni){this.$3$2=ni},get_replayIconButton:function(){return this.$3$3},set_replayIconButton:function(ni){this.$3$3=ni},get_replayArrowButton:function(){return this.$3$4},set_replayArrowButton:function(ni){this.$3$4=ni},updateToolbarButtons:function(){this.$q.dispose();this.$q=new tab.DisposableHolder;this.dom.get_buttonArea().html('');this.dom.get_showMeArea().html('');this.set_replayIconButton(null);var ni=ss.getEnumerator(this.get_authoringToolbarViewModel().get_items());try{while(ni.moveNext()){var nj=ni.current();if(ss.isInstanceOfType(nj,tab.ToolbarToggleButtonViewModel)){this.$a(nj)}else if(ss.isInstanceOfType(nj,tab.ToolbarDropdownButtonViewModel)){this.$d(nj)}else if(ss.isInstanceOfType(nj,tab.ToolbarDropdownMenuViewModel)){this.$e(nj)}else if(ss.isInstanceOfType(nj,bY)){this.$b(nj)}else{this.$9(nj)}}}finally{ni.dispose()}this.$8();this.$h()},$m:function(){var ni=ss.mkdel(this,function(){tab.ReplayButtonUtil.enableDisableReplayButton(this.get_replayIconButton(),this.get_replayArrowButton())});tab.AnimationUtil.add_enableDisableReplayButton(ni);var nj=ss.mkdel(this,function(){tab.ReplayButtonUtil.checkSpeedControl(this.get_replayArrowButton())});tab.AnimationUtil.add_checkSpeedControl(nj);if(ss.isValue(tab.ApplicationModel.get_instance().get_workbook())){tab.ApplicationModel.get_instance().get_workbook().get_animationSidePaneModel().add_newAnimationSettings(ni)}this.disposables.add(function(){tab.AnimationUtil.remove_enableDisableReplayButton(ni);tab.AnimationUtil.remove_checkSpeedControl(nj);if(ss.isValue(tab.ApplicationModel.get_instance().get_workbook())){tab.ApplicationModel.get_instance().get_workbook().get_animationSidePaneModel().remove_newAnimationSettings(ni)}})},$f:function(ni,nj){var nk=bT.create(ni);this.dom.domRoot.addClass(ni.get_iconClass().substring('tabAuthToolbar-'.length));var nl=ni.get_tooltipText();if(ss.isNullOrUndefined(nl)){nl=ni.get_text()}ni.set_tooltipText(nl);nk.addToDom(nj);return nk},$g:function(){var ni=document.createElement('div');ni.setAttribute('class','splitButtonWrapperAuthoring');var nj=bQ.create(this.get_replayIconButton());ni.appendChild(nj.element.get(0));var nk=bS.create(this.get_replayArrowButton());ni.appendChild(nk.element.get(0));return ni},$8:function(){var ni=this.dom.get_buttonArea();var nj=new tab.ToolbarButtonViewModel(tab.Strings.AuthToolbarMore,'tabToolbarMoreIcon',ss.mkdel(this,this.$k));nj.set_iconType('More');this.$o(bQ.create(nj));this.$n().element.hide();this.$q.add$1(this.$n());ni.append(this.$n().element)},$h:function(){this.get_viewModel().showHiddenItems();ss.clear(this.$p);this.$n().element.hide();var ni=false;var nj=50;var nk=this.dom.get_spacerArea().width();while(nj>nk){var nl=this.get_viewModel().hideLastButton();if(ss.isNullOrUndefined(nl)){break}else if(nl.get_isSeparator()){ss.insert(this.$p,0,nl);continue}if(nl.get_iconType()==='analyticsassistant'&&ss.isValue(ce.einsteinPopoverRef)){ce.einsteinPopoverRef.toggle(false);this.get_viewModel().haveHiddenEinsteinPopover=true}ss.insert(this.$p,0,nl);if(!ni){this.$n().element.show();ni=true}var nm=this.dom.get_spacerArea().width();if(nm!==0&&nm===nk){break}nk=nm}},$k:function(){var ni=[];for(var nj=0;nj<this.$p.length;nj++){var nk=this.$p[nj];var nl=((!tab.MiscUtil.isNullOrEmpty$1(nk.get_description())&&!ss.referenceEquals(nk.get_description(),nk.get_hintText()))?nk.get_description():nk.get_text());if(nk.get_isSeparator()){if(ni.length>0){ni.push(spiff.MenuItem.newDivider())}}else{var nm;if(nk.get_enabled()){var nn=ss.safeCast(nk,tab.ToolbarDropdownButtonViewModel);var no=ss.safeCast(nk,tab.ToolbarDropdownMenuViewModel);if(ss.isValue(no)){var np=no.createMenu();nm=(new spiff.MenuItemBuilder).name(nk.get_text()).checkState(0).subMenu(np).enabled(np.menuItems.some(function(ns){return ns.enabled}))}else if(ss.isValue(nn)){var nq=nn.createMenu();nm=(new spiff.MenuItemBuilder).name(nl).checkState(0).subMenu(nq).enabled(nq.menuItems.some(function(ns){return ns.enabled}))}else{nm=(new spiff.MenuItemBuilder).name(nl).data(ss.mkdel(nk,nk.clickButton)).enabled(true)}}else{nm=(new spiff.MenuItemBuilder).name(nl).enabled(false)}nm.iconClass(nk.get_iconClass()+'-NoArrow').description(nk.get_hintText());ni.push(nm.build())}}var nr=spiff.MenuViewModel.createForMenu(new spiff.Menu(ni),tab.WidgetUtil.commandMenuItemClicked,null,null);nr.show(new spiff.ShowMenuOptions(this.$n().element,false))},$l:function(){KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bZ.$7);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bZ.$4);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bZ.$5);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bZ.$2);if(tabBootstrap.FeatureFlags.isEnabled('WebKeyboardShortcutsExtended')){KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bZ.$1)}this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bZ.$7);KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bZ.$4);KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bZ.$5);KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bZ.$2);if(tabBootstrap.FeatureFlags.isEnabled('WebKeyboardShortcutsExtended')){this.disposables.add(function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bZ.$1)})}}))},$7:function(ni){var nj=ni.get_dom().domRoot;if(ss.isValue(this.$r)){this.$r.remove()}this.$r=$('<div></div>');this.$r.insertAfter(nj);this.disposables.add(ss.mkdel(this,function(){if(ss.isValue(this.$r)){this.$r.remove()}}));var nk=function(nl){ce.einsteinPopoverRef=nl};ReactDOM.render(React.createElement(tab.AnalyticsAssistantPopoverComponent,{triggerElement:nj[0],refHandler:nk}),this.$r[0]);nj.click(function(nl){ce.einsteinPopoverRef.toggle(false);ni.get_viewModel().clickButton()})},$9:function(ni){if(this.$j(ni)){this.set_replayIconButton(ni)}else if(ss.isValue(ni)){var nj=bQ.create(ni);this.$c(nj.element,ni);this.$q.add$1(nj);if(ni.get_iconType()==='analyticsassistant'&&!ni.get_isHidden()&&ni.get_enabled()){this.$7(nj)}}},$j:function(ni){return ss.isValue(ni)&&ni.get_iconClass()==='tabAuthToolbar-replay'},$a:function(ni){var nj=ss.safeCast(ni,tab.ToolbarToggleButtonViewModel);var nk=bW.create(nj);this.dom.get_buttonArea().append(nk.element);this.$q.add$1(nk)},$d:function(ni){if(this.$i(ni)){this.set_replayArrowButton(ss.safeCast(ni,tab.ToolbarDropdownButtonViewModel));var nj=this.$g();this.dom.get_buttonArea().append(nj)}else{var nk=bS.create(ss.safeCast(ni,tab.ToolbarDropdownButtonViewModel));this.dom.get_buttonArea().append(nk.element);this.$q.add$1(nk)}},$i:function(ni){return ss.isValue(ni)&&ni.get_iconClass()==='tabAuthToolbar-splitButtonArrow'&&ss.isValue(this.get_replayIconButton())},$b:function(ni){var nj=ss.safeCast(ni,bY);var nk=bX.$0(nj);this.$c(nk.element,ni);nj.set_relativeElement(nk.element);this.$q.add$1(nk)},$c:function(ni,nj){if(nj.get_isRightAligned()){this.dom.get_showMeArea().append(ni)}else{this.dom.get_buttonArea().append(ni)}},$e:function(ni){var nj=ss.safeCast(ni,tab.ToolbarDropdownMenuViewModel);if(ss.isValue(nj.get_props())){var nk=this.$f(nj,this.dom.get_buttonArea());this.$q.add$1(nk)}},dispose:function(){this.$q.dispose();ss.makeGenericType(spiff.BaseView$1,[ca]).prototype.dispose.call(this)}});var ca=global.tab.AuthoringToolbarViewModel=ss.mkType(a,'tab.AuthoringToolbarViewModel',function(){this.$c=[];this.$e=null;this.$d=null;this.haveHiddenEinsteinPopover=false;this.$2$1=null;this.$2$2=false;spiff.BaseViewModel.call(this);this.$a()},{$a:function(){var ni=[];ni.push(ca.$3());if(tabBootstrap.FeatureFlags.isEnabled('WebKeyboardShortcutsExporting')){ni.push(ca.$1());ni.push(ca.$2());ni.push(ca.$4())}if(tabBootstrap.FeatureFlags.isEnabled('WebKeyboardShortcutsExtended')){ni.push(ca.$5());ni.push(ca.$6());ni.push(ca.$0())}for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nk)}this.disposables.add(function(){for(var nl=0;nl<ni.length;nl++){var nm=ni[nl];KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(nm)}})},add_itemsChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_itemsChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_items:function(){return this.$c},get_shouldShowMeBeEnabled:function(){return this.$2$2},set_shouldShowMeBeEnabled:function(ni){this.$2$2=ni},showPlaceholderButtons:function(){if(tabBootstrap.Affordances.isOff('authoring_ToolbarPlaceholder')){return}var ni=new tab.CommandsPresModelWrapper;ni.set_commandItems(jj.get_items());this.updateCommands(ni.get_presModel(),null,'document')},updateCommands:function(ni,nj,nk){if(ss.isNullOrUndefined(ni)){return}var nl=tab.CommandsPresModelWrapper.create(ni);var nm=nl.get_commandItems();this.$7(nm,nj,nk);this.raiseActionEvent(this.$2$1)},$2:function(ni,nj){if(ss.isNullOrUndefined(this.$d)){this.$e=new lA;this.$d=new bY(tab.Strings.AuthToolbarShowMe,'showme',this.$e,true)}this.set_shouldShowMeBeEnabled(ss.isValue(ni)&&!ni.isStory()&&nj==='document'&&(!ni.get_isDashboard()||ni.get_currentDeviceLayout()==='default'));if(!this.get_shouldShowMeBeEnabled()){this.$d.dismissPopup()}else{this.$e.updateDashboard(ni)}this.$d.set_enabled(this.get_shouldShowMeBeEnabled());this.$0(this.$d,'authoring_ShowMe')},$7:function(ni,nj,nk){this.$8();var nl=function(nr){return ca.isCommandOn(nr)};for(var nm=0;nm<ni.length;nm++){var nn=ni[nm];var no=tab.CommandItemWrapper.create(nn);switch(no.get_commandsType()){case'separator':{this.$0(tab.ToolbarButtonViewModel.createSeparator(),null);break}case'item':{var np=tab.CommandSerializer.deserialize(no.get_command(),false);if(ss.isValue(np)&&ss.referenceEquals(np.commandName,{ns:'tabdoc',cmd:'web-show-me'}.cmd)){this.$1();this.$2(nj,nk)}else if(ca.isCommandOn(np)){this.$3(nn)}break}case'subcommands':{var nq=[];tab.WidgetUtil.newMenuItemsFromCommands(nq,no.get_commands(),tab.WidgetUtil.createDropdownMenuCommandHandler,false,nl);if(this.$9(nq,no)){this.$6(tab.CommandsPresModelWrapper.create(no.get_commands()).get_commandItems())}else if(nq.length>0&&!no.get_hasIcon()){this.$5(nn,new spiff.Menu(nq))}else if(nq.length>0){this.$4(nn,new spiff.Menu(nq))}break}}}if(this.$c.length>0&&this.$c[this.$c.length-1].get_isSeparator()){ss.removeAt(this.$c,this.$c.length-1)}},$0:function(ni,nj){if(ni.get_isSeparator()){if(this.$c.length>0&&!this.$c[this.$c.length-1].get_isSeparator()){this.$c.push(ni)}}else if(!ss.isValue(nj)){this.$c.push(ni)}else if(tabBootstrap.Affordances.isOn$1(ss.unbox(nj),'authoringToolbar')){this.$c.push(ni)}},$1:function(){if(tsConfig.is_metrics_enabled){var ni=new tab.ToolbarButtonViewModel(tab.Strings.ToolbarShowPerformanceRecording,'tab-icon-'+'performance',ss.mkdel(this,this.$b));ni.set_iconType('performance');var nj=ni;this.$0(tab.ToolbarButtonViewModel.createSeparator(),null);this.$0(nj,'performanceRecording')}},$8:function(){for(var ni=0;ni<this.$c.length;ni++){var nj=this.$c[ni];if(!ss.referenceEquals(nj,this.$d)){nj.dispose()}}ss.clear(this.$c)},$9:function(ni,nj){return ni.length===2&&ni[0].enabled!==ni[1].enabled&&ss.isValue(nj.get_iconRes())&&ss.startsWithString(nj.get_iconRes().toString(),'toggle-')},$3:function(ni){var nj=tab.ToolbarButtonViewModel.createFromCommandItem(ni,'tabAuthToolbar-',null,null);if(nj.get_itemWrapper().get_isVisible()){this.$0(nj,null)}},$6:function(ni){if(ni.length!==2){return}var nj=null;var nk=tab.ToolbarToggleButtonViewModel.getCommandsByActiveState(ni[0],ni[1]);var nl='active';if(tab.CommandController.get_isWorldUpdateCancellationEnabled()){if(nk[nl].get_iconRes()==='pause-updates'){nj=tab.AutoUpdateUtility.showAutoUpdatesPausedBanner}else if(nk[nl].get_iconRes()==='resume-updates-highlighted'){nj=tab.AutoUpdateUtility.showAutoUpdatesResumedBanner}}var nm=tab.ToolbarToggleButtonViewModel.createFromCommandsByActiveState(nk,'tabAuthToolbar-',nj);if(ss.isValue(nm)){this.$0(nm,null)}},showHiddenItems:function(){for(var ni=0;ni<this.$c.length;ni++){var nj=this.$c[ni];nj.showButton()}},hideLastButton:function(){for(var ni=this.$c.length-1;ni>0;ni--){var nj=this.$c[ni];if(!ss.referenceEquals(this.$d,nj)&&!nj.get_isHidden()){nj.hideButton();return nj}}return null},$4:function(ni,nj){var nk=tab.CommandItemWrapper.create(ni);var nl=new tab.ToolbarDropdownButtonViewModel(nk.get_name(),'tabAuthToolbar-'+nk.get_iconRes(),function(nn){return nj});nl.set_iconType(nk.get_iconRes());var nm=nl;this.$0(nm,null)},$5:function(ni,nj){var nk=tab.CommandItemWrapper.create(ni);var nl=new tab.ToolbarDropdownMenuViewModel(nk.get_name(),'tabAuthToolbar-'+nk.get_iconRes(),function(nm){return nj});nl.set_iconType(nk.get_iconRes());this.$0(nl,null)},$b:function(){tab.CommandController.get().legacySession.saveAndOpenMetricsView()},dispose:function(){this.$8();this.$d=tab.MiscUtil.dispose$1(this.$d);this.$e=tab.MiscUtil.dispose$1(this.$e);spiff.BaseViewModel.prototype.dispose.call(this)}},{$0:function(){var ni=new Object;ni.macControl='required';var nj=ni;var nk=new KeyboardShortcuts.KeyCombo('d',nj);var nl=new Object;nl.nonMacControl='required';nl.alt='required';var nm=nl;var nn=new KeyboardShortcuts.KeyCombo('d',nm);var no=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[mv,Object]))(new KeyboardShortcuts.KeyCombos(nk,nn),true,true,null,null,null,null);return no},$6:function(){var ni=new Object;ni.controlOrCommand='required';var nj=new KeyboardShortcuts.KeyCombo('ArrowDown',ni);var nk=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[jy,Object]))(new KeyboardShortcuts.KeyCombos(nj),false,true,null,null,null,null);return nk},$5:function(){var ni=new Object;ni.controlOrCommand='required';var nj=new KeyboardShortcuts.KeyCombo('ArrowUp',ni);var nk=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[jx,Object]))(new KeyboardShortcuts.KeyCombos(nj),false,true,null,null,null,null);return nk},$4:function(){var ni=new Object;ni.controlOrCommand='required';ni.alt='required';ni.shift='required';var nj=ni;var nk=new KeyboardShortcuts.KeyCombo('p',nj);var nl=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[tab.WebExportPngCommand,Object]);var nm=new Object;nm.propagation=1;var nn=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[tab.WebExportPngCommand,Object]))(nk,false,true,null,null,nm,null);return nn},$2:function(){var ni=new Object;ni.alt='required';ni.shift='required';var nj=new KeyboardShortcuts.KeyCombo('p',ni);var nk=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[tab.WebExportDataCommand,Object]))(nj,true,true,null,null,null,null);return nk},$1:function(){var ni=new Object;ni.alt='required';var nj=new KeyboardShortcuts.KeyCombo('p',ni);var nk=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[tab.WebExportCrossTabCommand,Object]))(nj,true,false,null,null,null,null);return nk},$3:function(){var ni=new Object;ni.controlOrCommand='required';var nj=ni;var nk=new KeyboardShortcuts.KeyCombo('p',nj);var nl=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[tab.WebExportPdfCommand,Object]);var nm=new Object;nm.propagation=1;return new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[tab.WebExportPdfCommand,Object]))(nk,false,false,null,null,nm,null)},get_isToolbarSort:function(){return!tsConfig.is_mobile},isCommandOn:function(ni){if(!tab.CommandSerializer.isCommandOn(ni,'authoringToolbar')){return false}if(ss.isValue(ni)&&ss.referenceEquals(ni.commandName,{ns:'tabdoc',cmd:'toggle-data-orientation-side-pane-from-web'}.cmd)){return tabBootstrap.DataOrientationUserSettings.get_isButtonVisible()&&!tsConfig.isPublic}return true}});var cb=global.tab.AuthoringToolbarViewTemplate=ss.mkType(a,'tab.AuthoringToolbarViewTemplate',function(){spiff.Template.call(this,$("\n<div class='tabAuthToolbar'>\n    <div class='tabAuthToolbarButtonArea'></div>\n    <div class='tabAuthToolbarSpacerArea'></div>\n    <div class='tabAuthToolbarShowMeArea'></div>\n</div>"));this.domRoot.addClass('tabAuthToolbarV2')},{get_buttonArea:function(){return this.getElementBySelector('.tabAuthToolbarButtonArea')},get_spacerArea:function(){return this.getElementBySelector('.tabAuthToolbarSpacerArea')},get_showMeArea:function(){return this.getElementBySelector('.tabAuthToolbarShowMeArea')}});var cc=global.tab.AuthoringUtil=ss.mkType(a,'tab.AuthoringUtil',null,null,{selectedDataSourceNameAsync:function(){var ni=$.Deferred();cd.get_instance().get_leftArea().get_viewModel().get_leftPanelViewModel().get_schemaViewerViewModel().done(function(nj){ni.resolve((ss.isNullOrUndefined(nj.get_selectedDataSource())?'':nj.get_selectedDataSource().get_name()))});return ni.promise()},$0:function(ni,nj,nk){ni.set_commandItems(ni.get_commandItems().filter(nj));var nl=ni.get_commandItems();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=tab.CommandItemWrapper.create(nn);if(!nk(no)){no.set_enabled(false);if(dC.isItemType('subcommands',no)){var np=tab.CommandsPresModelWrapper.create(no.get_commands());ss.clear(np.get_commandItems())}}else if(dC.isItemType('subcommands',no)){var nq=tab.CommandsPresModelWrapper.create(no.get_commands());cc.$0(nq,nj,nk)}}},filterCommandsForMobile:function(ni){var nj=tab.MiscUtil.cloneObject(ni);var nk=function(np){return!dC.isDocCommand({ns:'tabdoc',cmd:'new-dashboard'},tab.CommandItemWrapper.create(np))&&!dC.isDocCommand({ns:'tabdoc',cmd:'new-storyboard'},tab.CommandItemWrapper.create(np))};var nl=function(np){return true};var nm=function(np){return!dC.isDocCommand({ns:'tabdoc',cmd:'clear-sheet'},np)&&!dC.isDocCommand({ns:'tabdoc',cmd:'duplicate-sheet'},np)&&!dC.isDocCommand({ns:'tabdoc',cmd:'view-data-highlighter-range'},np)&&!dC.isDocCommand({ns:'tabdoc',cmd:'view-quick-filters'},np)&&!dC.hasIconResource('clear-sheet',np)&&!dC.hasIconResource('viewsize',np)&&!dC.hasIconResource('window-options',np)};var nn=(tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetDashboard()?nm:nl);var no=tab.CommandsPresModelWrapper.create(nj);cc.$0(no,nk,nn);return no.get_presModel()},filterCommandsByUIMode:function(ni,nj){if(nj==='data-tab'){var nk=function(no){return dC.isItemType('separator',no)||dC.isDocCommand({ns:'tabdoc',cmd:'undo'},no)||dC.isDocCommand({ns:'tabdoc',cmd:'redo'},no)||dC.isServerCommand({ns:'tabsrv',cmd:'refresh-data-server'},no)};var nl=function(no){return true};var nm=tab.MiscUtil.cloneObject(ni);var nn=tab.CommandsPresModelWrapper.create(nm);cc.$0(nn,nl,nk);return nn.get_presModel()}return ni},$1:function(ni){var nj=(ss.isNullOrEmptyString(tsConfig.site_url_name)?'':('/t/'+tsConfig.site_url_name));return nj+'/'+ni+'/'+tab.UUIDUtils.generateUUID()},generateNewWorkbookUrl:function(){return cc.$1('newWorkbook')},generateEditDatasourceUrl:function(ni){return cc.$1('editDatasource')+'/'+ni},tryShowDownloadOrEditInDesktopErrorDialog:function(ni){var nj=tsConfig.downloadURIReadonly;var nk=tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthorNewWorkbookUri();var nl=tab.ApplicationModel.get_instance().get_workbook().get_draftStatus();if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){if(nk||cl.get_instance().get_autoSaveEnabled()&&nl.get_isDraft()||!cl.get_instance().get_autoSaveEnabled()&&tab.ApplicationModel.get_instance().get_workbook().get_isWorkbookModifiedAuthoring()){fx.showDownloadDraftErrorDialog();return true}}else if(tab.ApplicationModel.get_instance().get_workbook().get_isWorkbookModifiedAuthoring()||ni&&tab.MiscUtil.isNullOrEmpty$1(nj)){tab.Application.get_commonDialogProvider().ShowLocalErrorDialog(tab.Strings.AuthToolbarDownloadWorkbookErrorContent,tab.Strings.AuthToolbarDownloadWorkbookErrorTitle,null);return true}return false}});var cd=global.tab.AuthoringView=ss.mkType(a,'tab.AuthoringView',function(ni){this.disposables=new tab.DisposableHolder;this.menubarArea=null;this.toolbarArea=null;this.tabArea=null;this.$b=null;this.$c=null;this.$h=null;this.$g=null;this.$d=null;this.$e=null;this.$f=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$d=ni;this.$d.add_disposed(ss.mkdel(this,this.$a));this.$d.add_propertyChanged(ss.mkdel(this,this.$8));this.$d.add_dashboardViewChanged(ss.mkdel(this,this.$3));this.$d.add_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.$4));this.$d.add_sheetTypeChanged(ss.mkdel(this,this.$5));this.disposables.add(ss.mkdel(this,function(){this.$d.remove_disposed(ss.mkdel(this,this.$a));this.$d.remove_propertyChanged(ss.mkdel(this,this.$8));this.$d.remove_dashboardViewChanged(ss.mkdel(this,this.$3));this.$d.remove_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.$4));this.$d.remove_sheetTypeChanged(ss.mkdel(this,this.$5))}));if(ce.shouldShowFilmstripView()){this.$d.get_authoringTabNavViewModel().add_onViewModeChanged(ss.mkdel(this,this.$6));this.disposables.add(ss.mkdel(this,function(){this.$d.get_authoringTabNavViewModel().remove_onViewModeChanged(ss.mkdel(this,this.$6))}))}if(ss.isValue(ni.get_toolbarViewModel())){this.$h=new bZ(ni.get_toolbarViewModel())}if(ss.isValue(ni.get_authoringTabNavViewModel())){this.$g=tab.ObjectRegistry.newView(bG).call(null,[ni.get_authoringTabNavViewModel()])}if(ss.isValue(this.$d.get_authoringMenuBarViewModel())){this.$b=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[by,bw,Object])).call(null,[this.$d.get_authoringMenuBarViewModel()])}if(ss.isValue(this.$d.get_authoringStatusViewModel())){this.$c=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[bC,bB,Object])).call(null,[this.$d.get_authoringStatusViewModel()])}this.set_leftArea(tab.ObjectRegistry.newView(bt).call(null,[ni.get_leftAreaViewModel()]));this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,function(nj){this.$2()})));tab.StartupUtils.callOnceAfterInitialBootstrap(ss.mkdel(this,this.$3));tab.StartupUtils.callAfterModelsInitialized(ss.mkdel(this,function(){tab.StartupUtils.callEachTimeModelsInitialized(ss.mkdel(this,this.layout),this.disposables)}));this.$0();this.addDomToBody();this.$1();this.$7();cd.set_instance(this)},{get_element:function(){return null},get_rootElement:function(){return this.get_element()},get_leftArea:function(){return this.$1$2},set_leftArea:function(ni){this.$1$2=ni},get_devicePreviewBarView:function(){return this.$1$3},set_devicePreviewBarView:function(ni){this.$1$3=ni},get_leftAreaWidth:function(){return this.get_leftArea().get_viewModel().get_leftAreaWidth()},get_viewModel:function(){return this.$d},get_worksheetComponents:function(){return this.$1$4},set_worksheetComponents:function(ni){this.$1$4=ni},$a:function(ni){this.dispose()},dispose:function(){this.disposables.dispose();this.$g=tab.MiscUtil.dispose$1(this.$g);this.$h=tab.MiscUtil.dispose$1(this.$h);this.set_leftArea(tab.MiscUtil.dispose$1(this.get_leftArea()));this.$b=tab.MiscUtil.dispose$1(this.$b);this.$c=tab.MiscUtil.dispose$1(this.$c);this.set_devicePreviewBarView(tab.MiscUtil.dispose$1(this.get_devicePreviewBarView()));this.set_worksheetComponents(tab.MiscUtil.dispose$1(this.get_worksheetComponents()));this.$e=tab.MiscUtil.dispose$1(this.$e);this.$9();cd.set_instance(null)},$7:function(){if(ss.isNullOrUndefined(this.get_devicePreviewBarView())&&this.$d.get_isDashboardOrFlexibleDashboard()&&this.$d.get_devicePreviewBarIsVisible()&&ss.isValue(this.$d.get_devicePreviewBarViewModel())){var ni=$(tab.ApplicationView.devicePreviewBarContainerSelector);if(ss.isValue(ni)&&ni.length>0){this.set_devicePreviewBarView(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[fc,fb,Object])).call(null,[this.$d.get_devicePreviewBarViewModel()]));this.get_devicePreviewBarView().addToDom(ni)}}},addContent:function(){this.addContentToAreas();this.notifyContentAddedToDom()},addContentToAreas:function(){if(ss.isValue(this.$b)&&ss.isValue(this.menubarArea)){this.$b.addToDom(this.menubarArea)}if(ss.isValue(this.$h)){this.toolbarArea.append(this.$h.element)}if(ss.isValue(this.$g)){this.tabArea.append(this.$g.element)}if(ss.isValue(this.$c)){this.$c.addToDom(this.tabArea)}},notifyContentAddedToDom:function(){if(ss.isValue(this.$g)){this.$g.onAddedToDom()}if(ss.isValue(this.$d.get_toolbarViewModel())){this.$d.get_toolbarViewModel().showPlaceholderButtons()}},$0:function(){this.menubarArea=(tabBootstrap.Affordances.isOn('authoring_MenuBar')?$("<div class='tabAuthMenubarArea'></div>"):$('<div></div>').css('display','none'));if(tsConfig.is_desktop){this.toolbarArea=$('<div></div>').css('display','none')}else{this.toolbarArea=$("<div class='tabAuthToolbarArea'></div>").css({top:tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+'px'})}this.tabArea=(tabBootstrap.Affordances.isOn('authoring_TabArea')?$("<div class='tabAuthTabArea'></div>").addClass('statusBar'):$('<div></div>').css('display','none'))},$1:function(){this.set_worksheetComponents(tab.ObjectRegistry.newView(cf).call(null,[this.get_viewModel().get_worksheet()]));this.$e=tab.ObjectRegistry.newView(bo).call(null,[this.get_viewModel().get_dashboard()]);this.$f=$.Deferred();this.get_viewModel().get_storyboard().done(ss.mkdel(this,function(ni){var nj=(ss.isValue(ni)?tab.ObjectRegistry.newView(tab.IAuthoringStoryboardView).call(null,[ni]):null);this.$f.resolve(nj)}))},addDomToBody:function(){var ni=$(document.body);ni.prepend(this.toolbarArea).prepend(this.menubarArea);if(tabBootstrap.Affordances.isOn('sidePane')){this.get_leftArea().addToDom(ni)}ni.append(this.tabArea);$('html').attr('lang',tsConfig.language);var nj=spiff.TableauClickHandler.targetAndClick(document.body,function(nk){if(ss.referenceEquals(nk.currentTarget,nk.target)){nk.stopPropagation();var nl=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isValue(nl)){tab.SelectionClientCommands.clearAllSelections(nl.get_visualId())}}});nj.set_stopPropagationOnEvent(false);this.disposables.add$1(nj)},$3:function(){if(this.get_viewModel().get_isStory()){this.$f.done(function(ni){if(ss.isValue(ni)){ni.addToDom$1()}})}else if(ss.isValue(this.$e)){this.$e.addToDom($(''))}},$5:function(ni){this.$7();this.layout()},$4:function(){this.$7();this.layout()},$9:function(){this.menubarArea.remove();this.toolbarArea.remove();this.tabArea.remove()},handleComponentSizing:function(ni,nj){if(ss.isNullOrUndefined(this.get_viewModel().get_client())){tab.StartupUtils.callAfterModelsInitialized(ss.mkdel(this,function(){this.handleComponentSizing(ni,nj)}));return}var nk=bA.computeSizing({leftAreaWidth:ni,rightAreaWidth:nj,sheetType:this.get_viewModel().get_sheetType(),isMobile:tsConfig.is_mobile,isDevicePreviewBarVisible:this.get_viewModel().get_devicePreviewBarIsVisible()});var nl=this.get_viewModel().get_client().get_domNode();nl.css(nk);if(ss.isValue(this.get_devicePreviewBarView())){this.get_devicePreviewBarView().get_viewModel().update()}if(this.get_viewModel().get_sheetType()==='worksheet'){this.get_worksheetComponents().repositionShelves(ni,nj);this.get_worksheetComponents().layout()}},layout:function(){if(ss.isValue(this.get_leftArea())&&ss.isValue(this.get_leftArea().get_viewModel())){this.handleComponentSizing(this.get_leftAreaWidth(),tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth())}},$8:function(ni,nj){if(nj.get_propertyName()==='Client'){this.layout()}},$2:function(){if(ss.isValue(this.$g)){this.$g.updateTabNavigation()}},addToDom:function(ni){ni.append(this.get_rootElement());this.onAddedToDom()},onAddedToDom:function(){},$6:function(){switch(this.$d.get_authoringTabNavViewModel().get_currentViewMode()){case 1:{this.tabArea.addClass('filmstrip');break}default:{this.tabArea.removeClass('filmstrip');break}}}},{get_instance:function(){return cd.$1$1},set_instance:function(ni){cd.$1$1=ni}});var ce=global.tab.AuthoringViewModel=ss.mkType(a,'tab.AuthoringViewModel',function(ni){this.$k=null;this.$i=null;this.$l=null;this.dashboardModelHolder=null;this.$g=null;this.$h=null;this.$j=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;spiff.BaseViewModel.call(this);if(ss.isNullOrUndefined(ni)){throw new ss.ArgumentNullException('workbookModel')}this.$l=ni;this.dashboardModelHolder=new(ss.makeGenericType(tab.ModelHolder$1,[tab.DashboardModel]));this.$8();this.$a();this.$6(this.$l.get_sheetType());tab.StartupUtils.callAfterModelsInitialized(function(){jm.showToastIfNeeded()})},{add_sheetTypeChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_sheetTypeChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_dashboardViewChanged:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_dashboardViewChanged:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_devicePreviewBarVisibilityChanged:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_devicePreviewBarVisibilityChanged:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},get_client:function(){return tab.Application.get_instance().get_client()},get_rightAreaDrawerViewModel:function(){return tab.Application.get_instance().get_rightAreaDrawerViewModel()},get_toolbarViewModel:function(){return this.$2$4},set_toolbarViewModel:function(ni){this.$2$4=ni},get_authoringMenuBarViewModel:function(){return this.$2$5},set_authoringMenuBarViewModel:function(ni){this.$2$5=ni},get_authoringTabNavViewModel:function(){return this.$2$6},set_authoringTabNavViewModel:function(ni){this.$2$6=ni},get_authoringStatusViewModel:function(){return this.$2$7},set_authoringStatusViewModel:function(ni){this.$2$7=ni},get_leftAreaViewModel:function(){return this.$k},get_worksheet:function(){return this.$i},get_dashboard:function(){return this.$g},get_devicePreviewBarViewModel:function(){return this.$2$8},set_devicePreviewBarViewModel:function(ni){this.$2$8=ni},get_storyboard:function(){return this.$h},get_sheetType:function(){return this.$l.get_sheetType()},get_isDataTabUIMode:function(){return this.$l.get_isDataTabUIMode()},get_isDashboardOrFlexibleDashboard:function(){return this.get_sheetType()==='dashboard'},get_isStory:function(){return this.get_sheetType()==='story'},get_authoringWorksheetIsVisible:function(){return this.$i.get_visible()},get_authoringDashboardIsVisible:function(){return this.$g.get_visible()},get_devicePreviewBarIsVisible:function(){return ss.isValue(this.dashboardModelHolder.get_model())&&this.dashboardModelHolder.get_model().get_devicePreviewBarIsVisible()},$8:function(){if(!tsConfig.is_desktop){this.set_toolbarViewModel(new ca)}if(tabBootstrap.Affordances.isOn('authoring_MenuBar')){this.set_authoringMenuBarViewModel(new by(this.$l))}if(tabBootstrap.Affordances.isOn('authoring_TabArea')){this.set_authoringTabNavViewModel(new bH(this.$l));var ni=this.get_authoringTabNavViewModel();this.set_authoringStatusViewModel(new bC(ss.mkdel(ni,ni.setSelectedViewMode)))}this.$g=new bp(this.dashboardModelHolder);var nj=new hT;nj.setPaneViewModel(2,this.$g.leftPanelPaneViewModel);nj.setPaneViewModel(5,this.$g.leftLayoutPaneViewModel);this.$h=$.Deferred();var nk=tab.ApplicationModel.get_instance();var nl=nk.modelInstance(tab.AuthoringLeftAreaExpansionModel).call(nk);var nm=tab.ApplicationModel.get_instance();this.$k=new bu(nl,nm.modelInstance(tab.ExpandedSidePaneWidthModel).call(nm),nj,0);this.$i=new cg(this.dashboardModelHolder,this.$k.get_leftPanelViewModel(),cI.generate());this.set_devicePreviewBarViewModel(new fc(this.dashboardModelHolder,this.$k))},$a:function(){var ni=tab.Application.get_instance();ni.add_clientChanged(ss.mkdel(this,this.$2));this.disposables.add(ss.mkdel(this,function(){ni.remove_clientChanged(ss.mkdel(this,this.$2))}));this.$l.addDashboardUpdatedHandler(ss.mkdel(this,this.$3));this.$l.get_commands().add_commandsChanged(ss.mkdel(this,this.$c));this.$l.add_sheetTypeChanged(ss.mkdel(this,this.$6));this.$l.add_uiModeChanged(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.$l.removeDashboardHandler(ss.mkdel(this,this.$3));this.$l.get_commands().remove_commandsChanged(ss.mkdel(this,this.$c));this.$l.remove_sheetTypeChanged(ss.mkdel(this,this.$6));this.$l.remove_uiModeChanged(ss.mkdel(this,this.$7))}));this.disposables.add$1(this.dashboardModelHolder.newDisposableContext().addEventBinding(ss.mkdel(this,function(nk){nk.add_activeZoneChanged(ss.mkdel(this,this.$b));nk.add_newDashboard(ss.mkdel(this,this.$5));nk.add_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.$4))}),ss.mkdel(this,function(nk){nk.remove_activeZoneChanged(ss.mkdel(this,this.$b));nk.remove_newDashboard(ss.mkdel(this,this.$5));nk.remove_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.$4))})));var nj=function(){ce.checkForExistingSession()};tab.CommandController.get().add_onInitialBootstrap(nj);tab.StartupUtils.add_clientFullyLoaded(ss.mkdel(this,this.$9));this.disposables.add(function(){tab.CommandController.get().remove_onInitialBootstrap(nj)});this.disposables.add(ss.mkdel(this,function(){tab.StartupUtils.remove_clientFullyLoaded(ss.mkdel(this,this.$9))}))},$3:function(ni){if(ce.$1.isValueCreated&&ss.isValue(this.dashboardModelHolder.get_model())){ce.$1.value().delete$1(this.dashboardModelHolder.get_model().get_sheetName())}var nj=ss.isValue(this.dashboardModelHolder.get_model())&&this.dashboardModelHolder.get_model().get_devicePreviewBarIsVisible();var nk=ss.isValue(ni)&&ni.get_devicePreviewBarIsVisible();var nl=nj!==nk;this.dashboardModelHolder.set_Model(ni);this.$f(0);if(nl){this.raiseActionEvent(this.$2$3)}},$e:function(){if(ss.isNullOrUndefined(this.get_authoringStatusViewModel())){return}var ni=tab.ModelUtils.findActiveVisual();if(ss.isValue(ni)&&ni.get_shouldShowStats()&&!fS.get_isEmptyWorksheet()&&this.$l.get_uiMode()!=='data-tab'){this.get_authoringStatusViewModel().updateForVisual(ni)}else{this.get_authoringStatusViewModel().updateForVisual(null)}},$7:function(){this.$f(2)},$9:function(){if(!this.$j&&ss.isValue(ce.einsteinPopoverRef)&&!this.get_toolbarViewModel().haveHiddenEinsteinPopover&&!tabBootstrap.EmbedAndViewportCalculator.get_isEmbeddedInsideAnotherPage()){ce.einsteinPopoverRef.toggle(true);this.$j=true}},$5:function(){if(this.$0()){this.$b()}this.$e();this.$9()},$f:function(ni){this.$b();this.$d(ni,this.get_sheetType());this.$e()},dispose:function(){this.set_toolbarViewModel(tab.MiscUtil.dispose$1(this.get_toolbarViewModel()));this.set_authoringTabNavViewModel(tab.MiscUtil.dispose$1(this.get_authoringTabNavViewModel()));this.$i.dispose();this.$g.dispose();this.set_devicePreviewBarViewModel(tab.MiscUtil.dispose$1(this.get_devicePreviewBarViewModel()));this.dashboardModelHolder.dispose();this.$k.dispose();this.set_authoringMenuBarViewModel(tab.MiscUtil.dispose$1(this.get_authoringMenuBarViewModel()));this.set_authoringStatusViewModel(tab.MiscUtil.dispose$1(this.get_authoringStatusViewModel()));if(cl.get_hasInstance()){cl.get_instance().dispose()}spiff.BaseViewModel.prototype.dispose.call(this)},updatePortSizeAfterManualLayout:function(ni){tabBootstrap.ViewerBootstrap.get_instance().set_authoringLeftAreaWidth(ni);this.get_client().doResize()},$6:function(ni){switch(ni){case'story':{this.$1();break}}if(ss.isValue(tsConfig.current_sheet_type)){this.$d(1,ni)}this.raiseActionEvent$1(Object).call(this,this.$2$1,ni)},$1:function(){if(this.$h.state()!=='resolved'){tab.ModuleManager.load$1(tab.IStoryAuthoringModule).call(null,[]).done(ss.mkdel(this,function(ni){var nj=ni.newAuthoringStoryboardViewModel(this.dashboardModelHolder);this.$k.get_leftPanelViewModel().setPaneViewModel(3,nj.get_leftPanelContentPaneViewModel());this.$k.get_leftPanelViewModel().setPaneViewModel(4,nj.get_leftPanelLayoutPaneViewModel());this.$h.resolve(nj)}))}else{this.$h.resolve.apply(this.$h,null)}},$c:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(this.get_toolbarViewModel())){return}var nj=ni.get_commands();if(tsConfig.is_mobile&&ss.isValue(nj)){nj=cc.filterCommandsForMobile(nj)}nj=cc.filterCommandsByUIMode(nj,this.$l.get_uiMode());this.get_toolbarViewModel().updateCommands(nj,this.dashboardModelHolder.get_model(),this.$l.get_uiMode())},$b:function(){this.$c(this.$l.get_commands())},$0:function(){var ni=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(this.get_authoringStatusViewModel())||ss.isNullOrUndefined(ni)){return false}return this.get_authoringStatusViewModel().get_totalMarks()===0&&ni.get_totalMarks()>0||this.get_authoringStatusViewModel().get_totalMarks()>0&&ni.get_totalMarks()===0},$d:function(ni,nj){this.$i.updateVisibility(ni,nj,this.get_isDataTabUIMode());this.$g.updateVisibility(ni,nj,this.get_isDataTabUIMode())},$4:function(){this.raiseActionEvent(this.$2$3)},$2:function(){this.notifyPropertyChanged('Client');this.raiseActionEvent(this.$2$2)}},{get_thumbnailCache:function(){return ce.$1.value()},checkForExistingSession:function(){var ni=ss.referenceEquals(document.referrer,tab.WindowHelper.getLocation(window.self).href);if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')||ni||tsConfig.is_desktop||!tab.ApplicationModel.get_instance().get_workbook().get_isWorkbookModifiedAuthoring()){return}var nj=tab.Strings.AuthoringAutoRecoveredSessionMessagePublish;var nk=tab.Strings.AuthoringAutoRecoveredSessionMessagePublishNoPublishAs;var nl=tab.Strings.AuthoringAutoRecoveredSessionMessagePublishAsNoPublish;var nm=tab.Strings.AuthoringAutoRecoveredSessionMessageNoPublish;var nn=(tab.SavingUtil.isSaveEnabled()?nj:(tab.SavingUtil.isSaveAsEnabled()?nl:nm));if(tsConfig.isPublic&&tab.SavingUtil.isSaveEnabled()&&!tab.SavingUtil.isSaveAsEnabled()){nn=nk}var no={message:nn,toastType:'info',autoDismiss:false};SharedWidgets.ToastWidget.show(no)},shouldShowFilmstripView:function(){return tabBootstrap.FeatureFlags.isEnabled('WebFilmstripView')&&!tsConfig.is_mobile}});var cf=global.tab.AuthoringWorksheetView=ss.mkType(a,'tab.AuthoringWorksheetView',function(ni){this.disposables=new tab.DisposableHolder;this.insideViewArea=null;this.cards=null;this.$c=null;this.$d=null;this.$f=null;this.$e=false;this.$1$1=null;this.$c=ni;this.$c.add_propertyChanged(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c.remove_propertyChanged(ss.mkdel(this,this.$6))})));this.$8();this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,this.$7)));if(ss.isValue(ni.emptyAuthoringWorksheetViewModel)){this.set_emptySheetView(tab.ObjectRegistry.newView(fR).call(null,[this.get_viewModel().emptyAuthoringWorksheetViewModel]));this.disposables.add$1(this.get_emptySheetView())}},{get_viewModel:function(){return this.$c},get_rootElement:function(){return null},get_emptySheetView:function(){return this.$1$1},set_emptySheetView:function(ni){this.$1$1=ni},dispose:function(){this.disposables.dispose();this.$9()},$b:function(){if(this.get_viewModel().get_visible()){this.attachAreasDom();this.layout();this.notifyContentAddedToDom()}else{this.detachAreasDom()}},$2:function(){this.insideViewArea=$(ss.formatString("<div class='{0}' data-tb-test-id='{0}'></div>",'tabAuthVerticalChrome'))},$9:function(){this.insideViewArea.remove()},attachAreasDom:function(){$(document.body).append(this.insideViewArea)},$6:function(ni,nj){if(nj.get_propertyName()==='visible'){this.$b()}},detachAreasDom:function(){this.insideViewArea.detach()},buildDom:function(){this.$2();this.addContentToAreas();this.addDomToBody();this.notifyContentAddedToDom();if(ss.isValue(this.get_viewModel().get_calculationEditorViewModel())){tab.ObjectRegistry.newView(cx).call(null,[this.get_viewModel().get_calculationEditorViewModel()])}if(ss.isValue(this.get_viewModel().get_compoundTableCalcViewModel())){tab.ObjectRegistry.newView(lS).call(null,[this.get_viewModel().get_compoundTableCalcViewModel()])}if(ss.isValue(this.get_viewModel().get_refLineEditorViewModel())){tab.ObjectRegistry.newView(jY).call(null,[this.get_viewModel().get_refLineEditorViewModel()])}if(!this.get_viewModel().get_visible()){this.detachAreasDom()}_.defer(ss.mkdel(this,function(){if(ss.isValue(this.get_emptySheetView())){this.get_emptySheetView().onUpdateVisibility()}}))},addDomToBody:function(){this.attachAreasDom()},addContentToAreas:null,notifyContentAddedToDom:function(){var ni=new ss.ObjectEnumerator(this.cards);try{while(ni.moveNext()){var nj=ni.current();for(var nk=0;nk<nj.value.length;nk++){var nl={$:nj.value[nk]};nl.$.onAddedToDom();if(nj.key==='left'&&ss.isValue(nl.$.get_contentView())){nl.$.get_contentView().add_scrollContentChanged(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel({card:nl,$this:this},function(){this.card.$.get_contentView().remove_scrollContentChanged(ss.mkdel(this.$this,this.$this.$a))})))}}}}finally{ni.dispose()}},layout:function(){this.$a()},$8:function(){this.cards={};this.cards['top']=[];if(ss.isValue(this.get_viewModel().get_cardLayout()['top'])){var ni=this.get_viewModel().get_cardLayout()['top'];for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];this.cards['top'].push(tab.ObjectRegistry.newView(cK).call(null,[this.get_viewModel().get_cards()[nk]]))}}this.cards['left']=[];if(ss.isValue(this.get_viewModel().get_cardLayout()['left'])){var nl=this.get_viewModel().get_cardLayout()['left'];for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=this.get_viewModel().get_cards()[nn];var np=tab.ObjectRegistry.newView(cK).call(null,[no]);this.$0(np)}}},$0:function(ni){this.cards['left'].push(ni);var nj=null;var nk=ss.mkdel(this,function(nl){var nm=ss.safeCast(nl,ss.makeGenericType(cH,[tab.IViewModel]));if(ss.isValue(nm)){if(ss.isValue(nj)){nj.dispose();nj=null}nm.add_scrollContentChanged(ss.mkdel(this,this.$a));nj=new tab.CallOnDispose(ss.mkdel(this,function(){nm.remove_scrollContentChanged(ss.mkdel(this,this.$a))}))}this.$a()});ni.add_cardContentChanged(nk);this.disposables.add$1(new tab.CallOnDispose(function(){ni.remove_cardContentChanged(nk)}))},$7:function(ni){this.$d=null;this.$a()},repositionShelves:function(ni,nj){},$a:function(){this.$1();this.$e=true;_.defer(ss.mkdel(this,this.$5))},$5:function(){if(!this.$e){return}var ni=!_.isEqual(this.$f,this.$3());if(ss.isNullOrUndefined(this.$d)||ni){this.$d=null;this.$4()}this.$e=false;this.$1()},$1:function(){if(ss.isNullOrUndefined(this.$d)){return}for(var ni=0;ni<this.$d.length;ni++){var nj=this.cards['left'][ni];nj.get_contentView().setScrollableContentActualHeight(this.$d[ni])}},$4:function(){var ni=$('.tabAuthLeftShelves');var nj=this.cards['left'];for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];var nm=nl.get_contentView();nm.setScrollableContentActualHeight(null)}this.$f=this.$3();var nn=tab.DoubleUtil.roundToInt(ni.outerHeight(true));var no=0;ni.children().each(function(nD,nE){if($(nE).is(':visible')){no+=tab.DoubleUtil.roundToInt($(nE).outerHeight(true))}});if(no<=nn){return}var np=12;var nq=0;var nr=0;var ns=this.cards['left'];for(var nt=0;nt<ns.length;nt++){var nu=ns[nt];if(nu.element.is(':visible')){var nv=nu.get_contentView();nq+=nv.get_scrollableContentPreferredHeight();nr++}}var nw=no-nq;var nx=nn-nw;var ny=nx-np*nr;this.$d=[];var nz=0;var nA=ny;while(nz<this.$f.length-1){var nB=null;if(ss.isValue(this.$f[nz])){nB=np;if(ny>0){var nC=Math.floor(ny*ss.unbox(this.$f[nz])/nq);nB=ss.Nullable$1.add(nB,nC);nA-=nC}}this.$d.push(nB);nz++}if(ss.isValue(this.$f[nz])){this.$d.push(((ny>0)?(nA+np):np))}else{this.$d.push(null)}},$3:function(){var ni=[];var nj=this.cards['left'];for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];if(nl.element.is(':visible')){var nm=nl.get_contentView();var nn=nm.get_scrollableContentPreferredHeight();ni.push(nn)}else{ni.push(null)}}return ni},addToDom:function(ni){ni.append(this.get_rootElement());this.onAddedToDom()},onAddedToDom:function(){}},{findVizZone:function(){return $('.'+'tabZone-viz')},findVizView:function(){return $('.'+'tab-tvView')},findVisibleTitle:function(ni){var nj=cf.findTitles();nj=cf.$0(nj);if(nj.length===0||!nj.is(':visible')||!ni&&tsConfig.is_mobile){return null}return nj},findTitles:function(){return $('.'+'tab-tvTitle')},$0:function(ni){if(ss.isNullOrUndefined(ni)){return $('')}if(ni.length===2&&tab.ApplicationModel.get_instance().get_currentSheetType()==='worksheet'){var nj=$(ni[0]);var nk=$(ni[1]);var nl=nj.parents().hasClass('facadedom');var nm=nk.parents().hasClass('facadedom');if(!!!(nl^nm)){return nj}return(nl?nk:nj)}if(ni.length>=3&&tab.ApplicationModel.get_instance().get_currentSheetType()==='worksheet'){return $(ni[0])}return ni}});var cg=global.tab.AuthoringWorksheetViewModel=ss.mkType(a,'tab.AuthoringWorksheetViewModel',function(ni,nj,nk){this.$c=null;this.$d=null;this.$j=null;this.$a=null;this.$b=null;this.$i=null;this.$e=null;this.$h=null;this.$g=null;this.$f=null;this.$l=null;this.$k=false;this.shelvesModified=null;this.emptyAuthoringWorksheetViewModel=null;this.lastClickedPill=null;spiff.BaseViewModel.call(this);if(ss.isNullOrUndefined(ni)){throw new ss.ArgumentNullException('dashboardModelHolder')}this.$f=ni;this.$c=nk;this.$j=new lc;this.$a=new bb;this.$d={};var nl=ss.mkdel(this,function(np,nq){this.$d[np]=this.$0(nq)});nl('columns','columns-shelf');nl('rows','rows-shelf');nl('pages','pages-shelf');nl('filters','filter-shelf');nl('marks','encoding-shelf');nl('measureValues','measures-shelf');var nm=tab.ApplicationModel.get_instance();this.$b=cB.new$1(nm.modelInstance(tab.CalculationDialogModel).call(nm));this.disposables.add$1(this.$b);var nn=tab.ApplicationModel.get_instance();this.$e=dD.new$1(nn.modelInstance(tab.CompoundTableCalcModel).call(nn));this.disposables.add$1(this.$e);var no=tab.ApplicationModel.get_instance();this.$i=jZ.new$1(no.modelInstance(tab.ReferenceLineEditorModel).call(no));this.disposables.add$1(this.$i);nj.setPaneViewModel(0,this.$j);nj.setPaneViewModel(1,this.$a);this.emptyAuthoringWorksheetViewModel=new fS;if(tabBootstrap.Affordances.isOn('authoring_DragAndDrop_ShowMe')){this.$9()}this.$8()},{get_visible:function(){return this.$k},set_visible:function(ni){if(this.$k===ni){return}this.$k=ni;this.notifyPropertyChanged('visible')},get_client:function(){return tab.Application.get_instance().get_client()},get_cards:function(){return this.$d},get_calculationEditorViewModel:function(){return this.$b},get_compoundTableCalcViewModel:function(){return this.$e},get_refLineEditorViewModel:function(){return this.$i},get_schemaViewerViewModel:function(){return this.$j},get_cardLayout:function(){return this.$c},$8:function(){this.disposables.add$1(this.$f.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addEventBinding(ss.mkdel(this,function(ni){ni.zonesModel.add_newZone(ss.mkdel(this,this.$6))}),ss.mkdel(this,function(ni){ni.zonesModel.remove_newZone(ss.mkdel(this,this.$6))})))},dispose:function(){var ni=new ss.ObjectEnumerator(this.$d);try{while(ni.moveNext()){var nj=ni.current();nj.value.dispose()}}finally{ni.dispose()}if(ss.isValue(this.$h)){this.$h.dispose()}if(ss.isValue(this.$a)){this.$a.dispose()}if(ss.isValue(this.$j)){this.$j.dispose()}this.$2();spiff.BaseViewModel.prototype.dispose.call(this)},updateVisibility:function(ni,nj,nk){if(ni===1){this.set_visible(!nk&&nj==='worksheet')}else if(ss.isValue(this.$f.get_model())&&this.$f.get_model().get_isDashboard()){this.set_visible(false)}else if(ni===2){this.set_visible(true)}else{this.set_visible(!nk)}},$2:function(){if(ss.isNullOrUndefined(this.$l)){return}this.$l.get_shelves().remove_newShelves(ss.mkdel(this,this.$4));this.$l=null;this.$h.remove_primitiveChanged(ss.mkdel(this,this.$7))},$0:function(ni){var nj=cg.$0(ni);if(ni==='encoding-shelf'){return this.$1(iy.createFakeViewModelForRender(),nj)}else{var nk=new lw;nk.set_IsVisible(ni!=='measures-shelf');nk.set_shelfType(ni);var nl=nk;return this.$1(nl,nj)}},$1:function(ni,nj){this.disposables.add(function(){tab.MiscUtil.dispose$1(ni)});var nk=new cL;nk.set_content(ni);nk.set_isCollapsed(false);nk.set_orientation(nj);return nk},buildShelves:function(){var ni=[this.$d['columns'],this.$d['rows'],this.$d['filters'],this.$d['pages'],this.$d['measureValues']];var nj=null;var nk=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isValue(nk)){nj=nk.get_shelves()}if(ss.isValue(nj)&&ss.isValue(nj.get_shelves())){var nl=nj.get_shelves();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no;switch(nn.get_shelfType()){case'columns-shelf':{no=this.$d['columns'];break}case'rows-shelf':{no=this.$d['rows'];break}case'pages-shelf':{no=this.$d['pages'];break}case'measures-shelf':{no=this.$d['measureValues'];break}case'filter-shelf':{no=this.$d['filters'];break}case'encoding-shelf':{this.$h.addEncodingShelf(nn);continue}default:{continue}}var np=no.get_content();np.set_shelf(nn);no.set_content(np);ss.remove(ni,no)}if(ss.isValue(this.emptyAuthoringWorksheetViewModel)&&fS.isDragHintEnabled()){this.emptyAuthoringWorksheetViewModel.updateIfEmptySheet()}}for(var nq=0;nq<ni.length;nq++){var nr=ni[nq];var ns=nr.get_content();ns.set_shelf(null)}},$3:function(){this.$j.set_dataSchema(tab.ApplicationModel.get_instance().get_workbook().get_dataSchema());this.$5(tab.ModelUtils.findActiveOrDefaultVisual(null))},$6:function(ni){if(ni.get_zoneType()==='viz'){this.$5(ni.get_visualModel())}},$5:function(ni){this.$2();this.$l=ni;if(ss.isNullOrUndefined(this.$l)){return}if(ss.isValue(this.$a)&&ss.isValue(this.$l.get_analyticsModel())){this.$a.set_analyticsPaneModel(this.$l.get_analyticsModel())}if(ss.isValue(this.$h)){this.$h.dispose()}this.$h=new iy(this.$l.get_marksCardModel());this.$d['marks'].set_content(this.$h);this.$h.add_primitiveChanged(ss.mkdel(this,this.$7));this.$l.get_shelves().add_newShelves(ss.mkdel(this,this.$4));this.buildShelves()},$7:function(){this.emptyAuthoringWorksheetViewModel.updateIfEmptySheet()},$4:function(){this.buildShelves();this.$j.clearSelection();if(!ss.staticEquals(this.shelvesModified,null)){this.shelvesModified()}},$9:function(){this.$g=new fG;EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this.$g,this.$g.update));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this.$g,this.$g.update))}))}},{$0:function(ni){var nj=tabBootstrap.ShelfConfigurations.getShelfConfig(ni);if(ss.isNullOrUndefined(nj)){return 0}return((nj.position==='left')?0:1)}});var ch=global.tab.AuthoringZoneChromeEdgeRender=ss.mkType(a,'tab.AuthoringZoneChromeEdgeRender',function(){tab.ZoneChromeEdgeRender.call(this)},null,{$0:function(ni,nj,nk,nl){return new hU(nj,nk,tab.ZoneChromeEdgeRender.generateSingleZoneEdgeClass(ni),ni,nl,nj.zIndex)},createChromeEdgeRender:function(ni,nj,nk,nl){var nm=null;switch(ni){case 0:{nm=new tab.GeneralEdgeRender(nk,(nj.areMultipleZonesSelected?'tabMultiZoneLeft':tab.ZoneChromeEdgeRender.generateSingleZoneEdgeClass(ni)),ni,nj.zIndex);break}case 1:{nm=new tab.GeneralEdgeRender(nk,(nj.areMultipleZonesSelected?'tabMultiZoneRight':tab.ZoneChromeEdgeRender.generateSingleZoneEdgeClass(ni)),ni,nj.zIndex);break}case 2:{nm=ch.$0(ni,nj,nk,nl);break}case 3:{nm=ch.$0(ni,nj,nk,nl);break}}return nm}});var ci=global.tab.AuthoringZoneReadinessComponent=ss.mkType(a,'tab.AuthoringZoneReadinessComponent',function(ni){tab.ZoneReadinessComponent.call(this,ni)},{render:function(){var ni=(this.props.isLayoutContainer?'layoutContainerChrome':'');return spiff.DOMElements.div({className:['tabZoneReadyParent',ni].join(' '),hidden:!this.props.isVisible,key:'zone-readiness-component'},this.$3())},$3:function(){var ni=tab.ZoneChromeConstants.chromeRectFromZone$1(this.props.zone,this.props.shouldEnlarge,false,this.props.dashboardSize);var nj=[];nj.push(this.$1(2,ni,'tabZoneTop'));nj.push(this.$1(3,ni,'tabZoneBottom'));nj.push(this.$1(0,ni,'tabZoneLeft'));nj.push(this.$1(1,ni,'tabZoneRight'));nj.push(this.$2(ni,'tabZoneTopResizer',2));nj.push(this.$2(ni,'tabZoneBottomResizer',3));nj.push(this.$2(ni,'tabZoneRightResizer',1));nj.push(this.$2(ni,'tabZoneLeftResizer',0));return nj},$1:function(ni,nj,nk){var nl=new tab.GeneralEdgeRender(nj,nk,ni,700);return nl.render()},$2:function(ni,nj,nk){var nl=this.props.dragEnabled;switch(nk){case 3:{nl=nl&&this.props.isBottomResizable;break}case 0:{nl=nl&&this.props.isLeftResizable;break}case 1:{nl=nl&&this.props.isRightResizable;break}case 2:{nl=nl&&this.props.isTopResizable;break}}var nm=tab.ZoneChromeConstants.getEdgeCss(ni,nk,5);nm.zIndex=701;return spiff.DOMElements.div({hidden:!nl,className:nj,style:nm,onMouseDown:ss.mkdel(this,this.$0),key:nj})},$0:function(ni){this.props.mouseDown(ni)}});var cj=global.tab.AuthoringZoneReadinessViewModel=ss.mkType(a,'tab.AuthoringZoneReadinessViewModel',function(ni,nj){this.$i=null;tab.ZoneReadinessViewModel.call(this,ni);this.$i=nj},{$h:function(){return!tsConfig.is_mobile},$e:function(ni){return ss.isValue(this.get_readyZone())&&!this.get_readyZone().get_isFloating()&&this.$i(this.get_readyZone(),ni)},createUpdatedProps:function(){var ni=ss.isValue(this.get_readyZone())&&(this.get_readyZone().get_zoneType()==='layout-flow'||this.get_readyZone().get_zoneType()==='layout-basic');return{isVisible:ss.isValue(this.get_readyZone()),shouldEnlarge:this.get_shouldEnlargeReadyChrome(),zone:this.get_readyZone(),isLayoutContainer:ni,isReadyZoneInContainer:ss.isValue(this.get_readyZone()),dragEnabled:this.$h(),mouseDown:ss.mkdel(this,this.mouseDown),isTopResizable:this.$e(2),isBottomResizable:this.$e(3),isLeftResizable:this.$e(0),isRightResizable:this.$e(1),dashboardSize:this.dashboardModelHolder.get_model().get_dashboardSize()}},mouseDown:function(ni){var nj=tab.WorkbookView.findDashboardContainer();var nk=this.$d(ni);var nl=new dI(this.dashboardModelHolder.get_model(),tab.DashboardView.dashboardGeometry);var nm=nl.startDrag(nk,nj,function(){});EventUtils.DragDropManager.startDrag(nm,ni,$(ni.target));EventUtils.GlobalUIEvents.add_LastTouch(ss.mkdel(this,this.$g));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$f))},$g:function(ni,nj){this.$c()},$c:function(){window.setTimeout(ss.mkdel(this,function(){if(EventUtils.DragDropManager.get_isDragging()){EventUtils.DragDropManager.cancelDrag(null);this.$f(null)}}),0)},$f:function(ni){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$f));EventUtils.GlobalUIEvents.remove_LastTouch(ss.mkdel(this,this.$g))},$d:function(ni){var nj=tab.WorkbookView.findDashboardContainer();var nk=nj.offset();var nl=tab.DoubleUtil.roundToInt(nj.scrollLeft());var nm=tab.DoubleUtil.roundToInt(nj.scrollTop());var nn=tabBootstrap.VizLayoutConstants.get_authoringGutter().left;var no=tabBootstrap.VizLayoutConstants.get_authoringGutter().top;var np=tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth();var nq=ni.pageX-ss.trunc(nk.left)-(nn+np)+nl;var nr=ni.pageY-ss.trunc(nk.top)-(np+no)+nm;return{x:nq,y:nr}}});var ck=global.tab.AutofitDevConfigurationDialog=ss.mkType(a,'tab.AutofitDevConfigurationDialog',function(ni){spiff.PureRenderComponent.call(this,ni);var nj=tabBootstrap.CookieHelper.getValueForCookie(ck.devConfigCookieName);if(ss.isValue(nj)){this.state=JSON.parse(nj)}else{this.state={singleThresholdEdgeDistance:'',singleThresholdPerpendicularDistance:'',singleThresholdEdgeSizeDifference:'',multiThresholdEdgeDistance:'',multiThresholdPerpendicularDistance:'',multiThresholdEdgeSizeDifference:''}}},{render:function(){return React.createElement(SharedWidgets.DialogWidget,{children:this.$0(),isModal:true,type:0,positioningBehavior:0,dialogWidth:375,dialogBodyStyle:{display:'flex'},footerContent:this.$1(),shouldAdjustPositionOnWindowResize:true,shouldReturnFocusOnClose:false,showFooter:true,title:'Autofit Dev Configuration',zIndex:1000,onCloseRequest:ss.mkdel(this,this.$2)})},$0:function(){var ni=spiff.DOMElements.div({},'Configure single pass Autofit');var nj=spiff.DOMElements.div({},'Edge Distance ');var nk=spiff.DOMElements.input({type:'text',key:'singleEdgeInput',value:this.state.singleThresholdEdgeDistance,onChange:ss.mkdel(this,function(nw){this.setState({singleThresholdEdgeDistance:nw.target.value})})});var nl=spiff.DOMElements.div({},'Edge Size Difference ');var nm=spiff.DOMElements.input({type:'text',key:'singleEdgeSizeInput',value:this.state.singleThresholdEdgeSizeDifference,onChange:ss.mkdel(this,function(nw){this.setState({singleThresholdEdgeSizeDifference:nw.target.value})})});var nn=spiff.DOMElements.div({},'Perpindicular Distance ');var no=spiff.DOMElements.input({type:'text',key:'singlePerpindicularInput',value:this.state.singleThresholdPerpendicularDistance,onChange:ss.mkdel(this,function(nw){this.setState({singleThresholdPerpendicularDistance:nw.target.value})})});var np=spiff.DOMElements.div({},'Configure multi pass Autofit');var nq=spiff.DOMElements.div({},'Edge Distance ');var nr=spiff.DOMElements.input({type:'text',key:'multiEdgeInput',value:this.state.multiThresholdEdgeDistance,onChange:ss.mkdel(this,function(nw){this.setState({multiThresholdEdgeDistance:nw.target.value})})});var ns=spiff.DOMElements.div({},'Edge Size Difference ');var nt=spiff.DOMElements.input({type:'text',key:'multiEdgeSizeInput',value:this.state.multiThresholdEdgeSizeDifference,onChange:ss.mkdel(this,function(nw){this.setState({multiThresholdEdgeSizeDifference:nw.target.value})})});var nu=spiff.DOMElements.div({},'Perpindicular Distance ');var nv=spiff.DOMElements.input({type:'text',key:'singleThreshold',value:this.state.multiThresholdPerpendicularDistance,onChange:ss.mkdel(this,function(nw){this.setState({multiThresholdPerpendicularDistance:nw.target.value})})});return spiff.DOMElements.div({},ni,spiff.DOMElements.br({}),nj,nk,spiff.DOMElements.br({}),nl,nm,spiff.DOMElements.br({}),nn,no,spiff.DOMElements.br({}),spiff.DOMElements.br({}),np,spiff.DOMElements.br({}),nq,nr,spiff.DOMElements.br({}),ns,nt,spiff.DOMElements.br({}),nu,nv,spiff.DOMElements.br({}),spiff.DOMElements.br({}))},$1:function(){var ni=React.createElement(SharedWidgets.ButtonWidget,{buttonType:2,handleClick:ss.mkdel(this,function(nj){this.$2()}),testId:'AutofitDevConfigTestId1',children:tab.Strings.DialogButtonOK,style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace}});return spiff.DOMElements.div({},ni)},$2:function(){tabBootstrap.CookieHelper.setCookie(ck.devConfigCookieName,JSON.stringify(this.state),'/',null);this.props.close()}});var cl=global.tab.AutoSaveController=ss.mkType(a,'tab.AutoSaveController',function(){this.$f=null;this.$g=new tab.DisposableHolder;this.$e=null;this.$k=[];this.$j=null;this.$h=null;this.$i=true;this.toastDraftErrorId=null;this.toastDraftSuccessId=null;this.$1$1=null;this.$1$2=null;this.isNewWorkbook=false;this.$1$3=null;this.$1$4=null;this.isAutoSaveEnabledAtSiteLevel=false;this.status=null;this.isAutoSaveEnabledAtSiteLevel=true;this.$0();this.$f=[new fA,new fD,new fz,new fC];if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){tab.StartupUtils.callAfterModelsInitialized(ss.mkdel(this,function(){cl.$5=new fB;cl.$5.initializeStatusMonitor();this.$8();this.showAutoSaveDialogs(this.$f);this.$c();if(this.get_isAutoSaveForNewWorkbooksEnabled()&&tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){this.$b()}}))}if(!ss.isNullOrEmptyString(tsConfig.workbookLastPublishedAt)){this.set_documentLastPublished(new Date(tsConfig.workbookLastPublishedAt))}},{add_statusUpdate:function(ni){this.$1$1=ss.delegateCombine(this.$1$1,ni)},remove_statusUpdate:function(ni){this.$1$1=ss.delegateRemove(this.$1$1,ni)},add_draftStatusErrorStateChanged:function(ni){this.$1$2=ss.delegateCombine(this.$1$2,ni)},remove_draftStatusErrorStateChanged:function(ni){this.$1$2=ss.delegateRemove(this.$1$2,ni)},get_autoSaveFeatureStatus:function(){return(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook())?'unknown':(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook().get_draftStatus())?'unknown':tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_autoSaveFeatureStatus()))},get_draftErrorStatus:function(){return(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook())?'none':tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_draftErrorStatus())},get_isDraft:function(){return(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook())?false:(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook().get_draftStatus())?false:tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_isDraft()))},get_willAutoSaveEnableOnPublish:function(){if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveForNewWorkbooks')){return false}return tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&this.isAutoSaveEnabledAtSiteLevel&&tsConfig.is_authoring&&this.isNewWorkbook&&!tsConfig.is_desktop&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()&&this.get_autoSaveFeatureStatus()==='enabled'},get_autoSaveEnabled:function(){return tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&this.isAutoSaveEnabledAtSiteLevel&&tsConfig.is_authoring&&this.get_isAutoSaveForNewWorkbooksEnabled()&&!tsConfig.is_desktop&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()&&this.get_autoSaveFeatureStatus()==='enabled'},get_isAutoSaveForNewWorkbooksEnabled:function(){return!this.isNewWorkbook||tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveForNewWorkbooks')},get_isDraftStatusSuccess:function(){return this.$i},get_documentLastPublished:function(){return this.$1$3},set_documentLastPublished:function(ni){this.$1$3=ni},get_draftStatusLastSaved:function(){return this.$1$4},set_draftStatusLastSaved:function(ni){this.$1$4=ni},$c:function(){if(this.get_autoSaveFeatureStatus()==='disabled-because-workbook-too-large'){var ni=new kK;var nj=new kJ;var nk=((ni.get_isEnabled()||nj.get_isEnabled())?tab.Strings.AuthWorkbookTooLargeForAutosaveOnLoad:tab.Strings.AuthWorkbookTooLargeForAutosaveOnLoad_CantPublish);var nl=tab.Strings.AuthAutosaveLearnMore;var nm=tab.UriUtil.makeHelpUri('server-autosave-size','');SharedWidgets.ToastWidget.show({message:nk,toastType:'warning',actionMessage:nl,actionHref:nm});this.$i=false}},$8:function(){tab.Application.get_instance().add_clientChanged(ss.mkdel(this,this.$a));tab.CommandController.get().add_onInvalidation(ss.mkdel(this,this.$4));if(this.get_autoSaveEnabled()){tab.WorldUpdateInterceptor.get().add_onCommandResponse(ss.mkdel(this,this.$1))}if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){cl.$5.add_draftStatusSuccess(ss.mkdel(this,this.onDraftStatusSuccess));cl.$5.add_draftStatusError(ss.mkdel(this,this.onDraftStatusError))}this.$g.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.Application.get_instance().remove_clientChanged(ss.mkdel(this,this.$a));tab.CommandController.get().remove_onInvalidation(ss.mkdel(this,this.$4));tab.WorldUpdateInterceptor.get().remove_onCommandResponse(ss.mkdel(this,this.$1));cl.$5.remove_draftStatusSuccess(ss.mkdel(this,this.onDraftStatusSuccess));cl.$5.remove_draftStatusError(ss.mkdel(this,this.onDraftStatusError))})))},onPublishSuccess:function(){if(!tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){return}this.set_documentLastPublished(tab.DateUtil.get_now());this.$b();if(tab.OnlineAnalyticsClient.get_telemetryEnabled()){tab.OnlineAnalyticsClient.logEvent('AutoSave_Publish',ss.mkdict(['Event','PublishSuccess']))}},publishInitiated:function(){if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){this.$d();this.$9(tab.Strings.AutoSavePublishingInProgress)}},$5:function(){if(tab.ApplicationModel.get_instance().get_workbook().get_isWorkbookModifiedAuthoring()){this.$d();this.$9(tab.Strings.UnpublishedChanges)}else{this.$b()}},$6:function(){this.$2();this.$9(tab.Strings.AutoSaveSavingInProgress);this.set_draftStatusLastSaved(new Date(tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_workbookLastEditedAtTime()));this.$e=window.setTimeout(ss.mkdel(this,function(){this.$b();this.$e=tab.MiscUtil.clearTimeout(this.$e)}),cl.$1)},$4:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.layoutStatus)){return}if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&!this.get_autoSaveEnabled()&&!this.isNewWorkbook){this.$5()}else if(!ss.isNullOrEmptyString(ni.layoutStatus.guid)&&this.get_autoSaveEnabled()){this.$6()}},$1:function(ni){if(!tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')||!this.get_autoSaveEnabled()||!_.contains(cl.$2,ni.get_worldUpdateCommand().commandName)){return}var nj=false;tab.ApplicationModel.get_instance().get_uploadedFiles().forEach(ss.mkdel(this,function(nk,nl){if(!_.contains(this.$k,nl)){this.$k.push(nl);nj=true;tab.OnlineAnalyticsClient.logEvent('AutoSave_FileUploaded',ss.mkdict(['Event','FileUploaded','FileSize',((nk>2147483647)?-1:nk)]))}}));if(nj){window.setTimeout(function(){jn.showPublishUploadedFileDialog()},1000)}},$0:function(){this.isNewWorkbook=tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthorNewWorkbookUri()},$2:function(){this.$e=tab.MiscUtil.clearTimeout(this.$e)},$9:function(ni){this.status=ni;if(!ss.staticEquals(this.$1$1,null)){this.$1$1(ni)}},$b:function(){if(ss.isNullOrUndefined(this.$j)||ss.isNullOrUndefined(this.$h)){this.$3()}if(this.get_autoSaveEnabled()&&ss.isValue(tab.ApplicationModel.get_instance().get_workbook().get_draftStatus())&&tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_isDraft()){this.$j.stopDateGeneration();if(ss.staticEquals(this.get_draftStatusLastSaved(),null)){this.set_draftStatusLastSaved(new Date(tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_workbookLastEditedAtTime()))}this.$h.startDateGeneration(this.get_draftStatusLastSaved())}else{this.$h.stopDateGeneration();this.$j.startDateGeneration(this.get_documentLastPublished())}},$d:function(){if(ss.isValue(this.$h)){this.$h.stopDateGeneration()}if(ss.isValue(this.$j)){this.$j.stopDateGeneration()}},$3:function(){this.$j=new eM(cl.$7);this.$j.add_onNewModifiedTextBuilt(ss.mkdel(this,this.$7));this.$h=new eM(cl.$4);this.$h.add_onNewModifiedTextBuilt(ss.mkdel(this,this.$7));this.$g.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.remove_onNewModifiedTextBuilt(ss.mkdel(this,this.$7));this.$j.remove_onNewModifiedTextBuilt(ss.mkdel(this,this.$7))})))},$7:function(ni){this.$9(ni)},showAutoSaveDialogs:function(ni){for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];if(tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&nk.shouldShowDialog(tab.ApplicationModel.get_instance().get_workbook(),this.get_draftErrorStatus())){nk.showDialog();return}}},onDraftStatusSuccess:function(){if(this.$i){return}this.$i=true;if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}if(ss.isValue(this.toastDraftErrorId)){tab.OnlineAnalyticsClient.logEvent('AutoSave_ToastDraftSuccess',ss.mkdict(['OtherInfo','Draft Error Toast Dismissed']));SharedWidgets.ToastWidget.dismiss(this.toastDraftErrorId);this.toastDraftErrorId=null}if(!tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_isDraft()){return}tab.OnlineAnalyticsClient.logEvent('AutoSave_ToastDraftSuccess',ss.mkdict(['Event','Draft Success Toast Displayed']));this.toastDraftSuccessId=SharedWidgets.ToastWidget.show({message:tab.Strings.AutosaveAvailableToastBody,toastType:'info',autoDismiss:true,onCloseRequest:ss.mkdel(this,function(){this.toastDraftSuccessId=null})})},onDraftStatusError:function(ni,nj){if(!this.$i||!this.get_isDraft()){return}this.$i=false;if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}if(ss.isValue(this.toastDraftSuccessId)){tab.OnlineAnalyticsClient.logEvent('AutoSave_ToastDraftError',ss.mkdict(['OtherInfo','Draft Success Toast Dismissed']));SharedWidgets.ToastWidget.dismiss(this.toastDraftSuccessId);this.toastDraftSuccessId=null}var nk=(tab.SavingUtil.isSaveEnabled()?tab.Strings.AutosaveUnavailableToastBody:tab.Strings.AutosaveUnavailableToastBody_CantPublish);tab.OnlineAnalyticsClient.logEvent('AutoSave_ToastDraftError',ss.mkdict(['Event','Draft Error Toast Displayed']));this.toastDraftErrorId=SharedWidgets.ToastWidget.show({message:nk,toastType:'error',onCloseRequest:ss.mkdel(this,function(){this.toastDraftErrorId=null})})},$a:function(){tab.CommandController.get().remove_onInvalidation(ss.mkdel(this,this.$4));tab.CommandController.get().add_onInvalidation(ss.mkdel(this,this.$4))},dispose:function(){this.$g.dispose();cl.$6=null}},{get_instance:function(){if(ss.isNullOrUndefined(cl.$6)){cl.$6=new cl}return cl.$6},get_hasInstance:function(){return ss.isValue(cl.$6)},get_logger:function(){return tab.Logger.getLogger(cl,null)}});var cm=global.tab.AutoSaveWarningDialogComponent=ss.mkType(a,'tab.AutoSaveWarningDialogComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{$0:function(){var ni=this.props.buttonClassToFocus;if(tab.MiscUtil.isNullOrEmpty$1(ni)){ni=((this.props.primaryChoiceButtonIsAvailable&&this.props.doPrimaryActionOnCloseRequest)?'tab-autosavewarning-primarybutton':'tab-autosavewarning-secondarybutton')}return function(nj){return nj.querySelector('.'+ni)}},render:function(){var ni={paddingBottom:SharedWidgets.TabStyles.Spacing.MediumSpace};return React.createElement(SharedWidgets.DialogWidget,{children:this.$2(),testId:'AutoSaveWarningDialog',isModal:true,type:1,title:this.props.title,positioningBehavior:0,dialogWidth:(ss.isValue(this.props.dialogWidth)?ss.unbox(this.props.dialogWidth):450),disableAutoFocus:this.$0(),onCloseRequest:((this.props.primaryChoiceButtonIsAvailable&&this.props.doPrimaryActionOnCloseRequest)?this.props.primaryChoiceAction:this.props.secondaryChoiceAction),shouldAdjustPositionOnWindowResize:true,shouldReturnFocusOnClose:true,zIndex:1000,dialogBodyStyle:ni})},$1:function(){var ni=null;if(this.props.primaryChoiceButtonIsAvailable){ni=React.createElement(SharedWidgets.ButtonWidget,{buttonType:(this.props.primaryChoiceButtonIsDestructive?0:2),handleClick:ss.mkdel(this,function(nk){this.$3()}),testId:'AutoSaveWarningPrimaryAction',className:'tab-autosavewarning-primarybutton',children:this.props.primaryChoiceButtonString,style:this.props.primaryChoiceButtonStyle})}var nj=React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:ss.mkdel(this,function(nk){this.props.secondaryChoiceAction()}),testId:'AutoSaveWarningSecondaryAction',className:'tab-autosavewarning-secondarybutton',children:this.props.secondaryChoiceButtonString,style:this.props.secondaryChoiceButtonStyle});return spiff.DOMElements.div({className:'tab-autosavewarning-footer'},nj,ni)},$2:function(){var ni=spiff.DOMElements.div({className:'tab-autosavewarning-title'},this.props.title);var nj=null;if(ss.isValue(this.props.learnMoreToken)){var nk=tab.UriUtil.makeHelpUri(this.props.learnMoreToken,'');nj=spiff.DOMElements.a({href:nk,target:'_blank',className:'tab-autosavewarning-learnmore'},tab.Strings.AuthAutosaveLearnMore)}var nl=null;var nm=null;if(ss.isValue(this.props.firstMessage)){nl=spiff.DOMElements.div({className:'tab-autosavewarning-primarybutton-message'},this.props.firstMessage,(ss.isNullOrEmptyString(this.props.secondMessage)?nj:null))}if(ss.isValue(this.props.secondMessage)){nm=spiff.DOMElements.div({className:'tab-autosavewarning-autosave'},this.props.secondMessage,nj)}return spiff.DOMElements.div({className:'tab-autosavewarning-content'},ni,nl,nm,this.$1())},$3:function(){this.props.primaryChoiceAction()}});var cn=global.tab.BaseDashboardDragDropViewModel=ss.mkType(a,'tab.BaseDashboardDragDropViewModel',function(ni){this.dragProperties=ss.getDefaultValue(dX);ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);var nj=new dX;nj.dashboardGeometry=ni;this.dragProperties=nj},{initialize:function(){var ni=this.dragProperties;var nj=new iG;ni.dropTargetKeyFactory=ss.mkdel(nj,nj.generate);this.dragProperties.dropTargetGenerator=ss.mkdel(this,function(nk){var nl=this.dragProperties.dropTargetKeyFactory(nk);var nm;if(nk.dashboardTargetType==='unknown'||nk.dashboardTargetType==='noop-target'){nm=new spiff.NoopDropTarget}else{nm=new dZ.$ctor1(nk,ss.mkdel(this,this.$3),ss.mkdel(this,this.$2),ss.mkdel(this,this.updatePropsOrResetToDefaultForFloating),nk.dashboardTargetType)}return new bk(nl,nk.polygon,nm)});this.dragProperties.defaultDropTarget=[this.dragProperties.dropTargetGenerator({paneRect:{},polygon:dV.createDefaultHitTarget(this.dragProperties.dashboardGeometry())})];this.dragProperties.floatingProps={dropTargets:this.dragProperties.defaultDropTarget,borders:[],guides:[],dashboardGeometry:this.dragProperties.dashboardGeometry};this.dragProperties.tileDropTargets=this.dragProperties.defaultDropTarget;this.dragProperties.tiledZoneBorders=[];this.dragProperties.tiledContainerGuides=[];this.onDragStart()},onDragStart:null,isDraggedForFloating:null,handleDropWithDashboardDropLocation:null,$1:function(ni){var nj=this.dragProperties.dashboardGeometry();var nk={x:ni.pageX-nj.l,y:ni.pageY-nj.t};return nk},$2:function(ni,nj){var nk=this.$1(ni);this.handleDropWithDashboardDropLocation(nk,nj)},updatePropsOrResetToDefaultForFloating:function(){var ni=this.dragProperties.floatingProps;if(!this.isDraggedForFloating()){ni={dropTargets:this.dragProperties.tileDropTargets,borders:this.dragProperties.tiledZoneBorders,guides:this.dragProperties.tiledContainerGuides,dashboardGeometry:this.dragProperties.dashboardGeometry}}this.updateProps$1(ni)},$3:function(ni){this.updateProps$1({dropTargets:this.get_props().dropTargets,borders:this.get_props().borders,guides:this.get_props().guides,showBorders:!this.isDraggedForFloating(),dropFeedback:ni.paneRect,dashboardGeometry:this.dragProperties.dashboardGeometry,containerGuide:dV.getContainerGuide(ni.zoneId,this.get_props().guides)})}});var co=global.tab.BaseDashboardObjectDragAvatarViewModel=ss.mkType(a,'tab.BaseDashboardObjectDragAvatarViewModel',function(ni){this.$4=false;this.$3=false;this.$2=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.set_floatingDisplayRect(co.$1());ni.done(ss.mkdel(this,this.$1));this.$0(EventUtils.DragDropManager.get_currentTarget());this.$2=EventUtils.DragDropManager.get_currentTarget();EventUtils.DragDropManager.add_currentTargetChanged(ss.mkdel(this,this.$0));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_currentTargetChanged(ss.mkdel(this,this.$0))}))},{add_displayStateChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_displayStateChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},onDisplayStateChanged:function(){if(ss.isValue(this.$2$1)){this.$2$1()}},get_floatingDisplayRect:function(){return this.$2$2},set_floatingDisplayRect:function(ni){this.$2$2=ni},get_isFloating:null,get_isOverTarget:function(){return this.$4},set_isOverTarget:function(ni){if(this.$4!==ni){this.$4=ni}},get_isOverContainer:function(){return this.$3},set_isOverContainer:function(ni){if(this.$3!==ni){this.$3=ni}},get_currentTarget:function(){return this.$2},set_currentTarget:function(ni){if(!ss.referenceEquals(this.$2,ni)){this.$2=ni}},$1:function(ni){this.set_floatingDisplayRect(ni);this.onDisplayStateChanged()},$0:function(ni){if(!ss.referenceEquals(ni,this.get_currentTarget())){this.set_currentTarget(ni);this.set_isOverTarget(ss.isInstanceOfType(ni,dZ));this.set_isOverContainer(ss.isInstanceOfType(ni,dZ)&&ss.safeCast(ni,dZ).getTargetType()==='container-target');this.raiseActionEvent(this.$2$1)}}},{createDeferredRect:function(ni){var nj=$.Deferred();ni.done(function(nk){nj.resolve(co.$0(nk))}).fail(function(){nj.reject()});return nj},$0:function(ni){ni.y=ni.y||0;ni.x=ni.x||0;return{l:ni.y,t:ni.x,w:ni.defaultWidth,h:ni.defaultHeight}},$1:function(){return{l:0,t:0,w:0,h:0}}});var cp=global.tab.BaseFieldDragInstance=ss.mkType(a,'tab.BaseFieldDragInstance',function(ni,nj){lu.call(this,ni,nj)},{get_fields:null,get_fieldNames:null,get_pills:null,get_pill:null,hasOnlyFields:null,hasOnlyPills:null,shouldGetAggregationOfField:function(ni){return this.isRightDrag&&ni.length===1},dropPositionToReplacePill:function(ni){var nj=ni.shelfVM.matchingDropsFrom(this);var nk=ni.get_indexInShelf();if(ss.isNullOrUndefined(nj)){var nl={shelfPosIndex:nk,shelfDropAction:'replace'};return nl}return _.find(nj.shelfDropPositions,function(nm){return nm.shelfDropAction==='replace'&&nm.shelfPosIndex===nk})},dropPositionForShelf:function(ni,nj){var nk=ni.matchingDropsFrom(this);if(!ss.isValue(nk)){return null}var nl=_.find(nk.shelfDropPositions,function(nm){return(nm.shelfDropAction||'insert')==='insert'&&nm.shelfPosIndex===ss.coalesce(nj,0)});if(ss.isNullOrUndefined(nl)){nl=_.find(nk.shelfDropPositions,function(nm){return!ss.isValue(nj)||nm.shelfPosIndex===ss.unbox(nj)})}return nl},fieldsToDropOnShelf:function(ni){if(this.finalDrop.state()!=='resolved'){return this.get_fields()}var nj=[];for(var nk=0;nk<this.drag.shelfDropModels.length;nk++){var nl=this.drag.shelfDropModels[nk];if(nl.shelfType===ni){var nm=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();for(var nn=0;nn<nl.fieldEncodings.length;nn++){var no=nl.fieldEncodings[nn];var np=nm.findField(no.fn);if(ss.isValue(np)){nj.push(np)}}}}return nj},selectAggregationForField:function(ni,nj,nk){this.$0(nj,ni,ss.mkdel(this,function(nl){var nm=nl;if(ss.isNullOrUndefined(nm)){var nn=new K;nn.selectedField=nj;nm=nn}nk(nm)}))},addShelfField:function(ni,nj,nk,nl,nm){tab.ShelfClientCommands.addShelfField(ni.get_shelf(),nj,nk,nl,this.isRightDrag,nm)},addEncodingFields:function(ni,nj,nk,nl,nm){tab.ShelfClientCommands.addEncodingFields(ni.get_shelf(),nj,nk,nl,this.isShiftDrag,this.isRightDrag,nm)},$0:function(ni,nj,nk){tab.ShelfClientCommands.getFieldAggregationsForDrop(ni.get_globalName(),nj,function(nl){var nm=nl;if(ss.isValue(nm)&&ss.isValue(nm.fieldDisplayList)&&nm.fieldDisplayList.length>1){L.showAggregationSelection(nm,nk)}else{nk(null)}},function(){nk(null)})},resolve:null,reject:null});var cq=global.tab.CalcTextDragAvatar=ss.mkType(a,'tab.CalcTextDragAvatar',function(ni){this.$4=null;spiff.Widget.call(this,$("\n<span class='tabCalcEditorTextDragAvatar'>\n    <div class='tabCalcEditorTextDragAvatarLabel'></div>\n</span>"));this.set_label(ni)},{get_viewModel:function(){return null},get_rootElement:function(){return this.element},get_label:function(){return this.$4},set_label:function(ni){this.$4=ni;this.element.find('.tabCalcEditorTextDragAvatarLabel').text(this.$4)}});var cr=global.tab.CalcTextDragInstance=ss.mkType(a,'tab.CalcTextDragInstance',function(ni){this.$1=null;this.$3=null;this.$2=null;cp.call(this,ni,new cq(ni));this.$1=this.get_dragAvatar();this.$3=ni},{get_fields:function(){if(this.get_drop().state()==='resolved'){return ss.safeCast(this.draggedObject,Array)}return null},get_fieldNames:function(){return this.$2},get_pills:function(){return null},get_pill:function(){return null},get_text:function(){return this.$3},get_defaultDropCursor:function(){return spiff.CustomCursor.noOp},hasOnlyFields:function(){return true},hasOnlyPills:function(){return false},resolve:function(ni){if(this.finalDrop.state()==='resolved'||ss.isNullOrUndefined(ni)){return}this.drag=ni;if(tab.MiscUtil.isNullOrEmpty(this.drag.shelfDropModels)||tab.MiscUtil.isNullOrEmpty(this.drag.shelfDropModels[0].fieldEncodings)){return}var nj=this.drag.shelfDropModels[0].fieldEncodings[0].fn;this.$2=[nj];var nk=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();var nl=nk.findField(nj);if(ss.isValue(nl)){this.draggedObject=[nl];this.$1.set_label(nl.get_description())}this.finalDrop.resolve(this)},reject:function(ni){if(this.finalDrop.state()==='resolved'||!ss.isNullOrUndefined(ni)){return}if(ss.isNullOrUndefined(this.drag)){this.drag=ni}this.finalDrop.reject(this)}});var cs=global.tab.CalculationAutoCompleteHelper=ss.mkType(a,'tab.CalculationAutoCompleteHelper',function(ni,nj){this.$s=null;this.$o=null;this.$u=null;this.$q=new tab.DisposableHolder;this.$w=new tab.DisposableHolder;this.$m=null;this.$p=null;this.$l=null;this.$v=false;this.$r=false;this.$k=false;this.$n=null;this.$t=-1;this.$x=null;this.$s=ni;this.$o=nj;this.$n=new tab.Debouncer(ss.mkdel(this,this.$e),250);this.$m={};this.$m['hint']=ss.mkdel(this,this.getHints);this.$m['completeSingle']=false;this.$m['completeOnSingleClick']=true;this.$m['alignWithWord']=false;this.$m['closeOnUnfocus']=true;var nk=(BrowserSupport.BrowserSupport.IsMac()?'Cmd-Enter':'Ctrl-Enter');var nl={};nl[nk]=function(nm,nn){nn.pick()};this.$m['extraKeys']=nl;this.$u=new tab.Tooltip(new w);this.$u.set_horizontalOffset(0);this.$u.set_showAbove(false);this.$9('change',ss.mkdel(this,this.$8));this.$9('cursorActivity',ss.mkdel(this,this.$6));this.$9('blur',ss.mkdel(this,this.$7));this.$9('focus',ss.mkdel(this,this.$a));EventUtils.GlobalUIEvents.add_FirstTouch(ss.mkdel(this,this.$4));this.$o.add_calculationUpdated(ss.mkdel(this,this.$5))},{get_isShowingMenu:function(){return this.$v},set_isShowingMenu:function(ni){this.$v=ni},$j:function(){if(ss.isValue(this.$u)){return this.$u.element[0]}return null},$i:function(){var ni=$('.CodeMirror-hints');if(ss.isValue(ni)&&ni.length>0){return ni[0]}return null},get_validFormulaTooltip:function(){return this.$x},set_validFormulaTooltip:function(ni){this.$x=ni},dispose:function(){this.$r=true;this.$q.dispose();this.$n.dispose();this.$p=null;this.$0();this.$u.dispose();EventUtils.GlobalUIEvents.remove_FirstTouch(ss.mkdel(this,this.$4));this.$w.dispose();this.$o.remove_calculationUpdated(ss.mkdel(this,this.$5))},$9:function(ni,nj){this.$s.on(ni,nj);this.$q.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$s.off(ni,nj)})))},close:function(ni){if(ni){this.$1()}this.$l=null},$1:function(){this.$u.close();this.$t=-1},$0:function(){var ni=this.$3();if(ss.isValue(ni)){ni.close()}},$5:function(){this.$g(this.get_isShowingMenu())},$g:function(ni){var nj=this.$s.getValue();var nk=this.$s.indexFromPos(this.$s.getCursor());if(ss.isValue(this.$l)&&ni&&nk>=this.$l.get_startIndex()&&nk<=this.$l.get_endIndex()&&ss.referenceEquals(this.$l.get_calculation(),nj)){this.$1();this.$s.showHint(this.$m)}else if(ss.isValue(this.$l)&&!tab.MiscUtil.isNullOrEmpty$1(this.$l.get_functionTooltip())){this.$f(this.$l.get_functionTooltip(),this.$l.get_functionHelpPosition())}else if(!ss.isNullOrEmptyString(this.$x)&&this.$o.isValidFormula()&&this.$o.get_isDirty()){this.$f(this.$x,nk)}else{this.$1()}},$f:function(ni,nj){if(ss.isNullOrEmptyString(ni)){this.$1()}else{var nk=0;if(nj>=0&&ss.isValue(this.$l)){nk=cA.getNewLineOffset(this.$l.get_calculation().toString().substr(0,nj),null)}this.$t=nj;var nl=this.$s.posFromIndex(nk+this.$t);var nm=this.$s.cursorCoords(nl,'page');var nn=this.$s.cursorCoords(this.$s.getCursor(),'page');var no=this.$s.cursorCoords(this.$s.posFromIndex(0),'page').left+this.$s.getScrollInfo().left;var np=Math.max(no,nm.left);var nq=nn.top;this.$u.show(ni,{x:np,y:nq})}},$8:function(ni,nj){switch(nj.origin){case'+input':case'+delete':case'paste':case'*compose':{this.$d(true);break}case'complete':{this.$d(false);break}default:{break}}},$h:function(){this.close(false);this.$d(false)},$a:function(){this.$h()},$7:function(){this.$p=null;this.$1()},$6:function(){this.$h()},$4:function(ni,nj){this.close(false)},$3:function(){var ni=this.$s.state.completionActive;return ni},$2:function(ni,nj,nk,nl,nm){var nn=new Object;nn.from=nj;nn.to=nk;nn.text=ni.get_replaceText();nn.displayText=(ss.isNullOrEmptyString(ni.get_styledLabel())?ss.htmlEncode(ni.get_label()):ni.get_styledLabel());nn.caretIndex=ni.get_caretIndex();nn.hint=ss.mkdel(this,this.$b);var no;switch(ni.get_itemType()){case'field':{no=new u(nn.displayText,ni.get_iconResource());break}case'func':{no=new v(nn.displayText);break}default:{return null}}no.$2(nl);no.$1(nm);no.$4(ni.get_tooltip());nn.render=function(np,nq,nr){no.$3(np)};return nn},$c:function(ni,nj){},$b:function(ni,nj,nk){ni.replaceRange(nk.text,nk.from,nk.to,'complete');ni.setCursor(ni.posFromIndex(nk.caretIndex))},getHints:function(ni,nj){if(ss.isNullOrUndefined(this.$p)||ss.isNullOrUndefined(this.$l)||this.$l.get_items().length<1){return null}var nk=new Object;nk.from=ni.posFromIndex(this.$l.get_startIndex());nk.to=ni.posFromIndex(this.$l.get_endIndex());CodeMirror.on(nk,'select',ss.mkdel(this,this.$c));CodeMirror.on(nk,'shown',ss.mkdel(this,function(){this.set_isShowingMenu(true)}));CodeMirror.on(nk,'close',ss.mkdel(this,function(){this.set_isShowingMenu(false);this.$w.dispose()}));var nl=[];var nm=false;var nn=null;var no=this.$l.get_items();for(var np=0;np<no.length;np++){var nq=no[np];switch(nq.get_itemType()){case'separator':{nm=true;break}case'header':{nn=nq.get_label();break}default:{nl.push(this.$2(nq,nk.from,nk.to,nm,nn));nm=false;nn=null;break}}}nk.list=Array.prototype.slice.call(nl);return nk},$d:function(ni){this.$k=this.$k||ni;this.$n.invokeActionDelayed()},$e:function(){var ni=new s(this.$s);var nj=this.$k;this.$k=false;if(!ni.$0()){this.$p=null;return}if(ss.isValue(this.$p)&&ni.$2===this.$p.$2&&ss.referenceEquals(ni.$1,this.$p.$1)){return}this.$p=ni;this.$o.requestAutoCompleteMenu(this.$p.$1,ni.$2).done(ss.mkdel(this,function(nk){if(!this.$r&&ss.isValue(this.$p)&&ss.referenceEquals(this.$p.$1,nk.get_calculation())){this.$l=nk;this.$g(nj)}})).fail(ss.mkdel(this,function(nk){}))},isEqualOrAncestorOf:function(ni){return tab.DomUtil.isEqualOrAncestorOf(this.$i(),ni)||tab.DomUtil.isEqualOrAncestorOf(this.$j(),ni)}});var ct=global.tab.CalculationDependencyView=ss.mkType(a,'tab.CalculationDependencyView',function(ni){ss.makeGenericType(spiff.BaseView$1,[cu]).call(this,ni,spiff.Template.fromHtml("<div class='tabCalcDependencyContent'>\n            <div class='tabCalcDependencyPrefix'></div>\n            <div class='tabCalcDependencyInfo'></div>\n        </div>"));this.get_template().getElementBySelector('.tabCalcDependencyPrefix').text(tab.Strings.CalcEditorDependenciesPrefix);this.get_template().getElementBySelector('.tabCalcDependencyInfo').text(ni.get_dependencies())},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.element.parents('.tabUberPopup').css('max-width',this.get_viewModel().get_maxWidth()+'px').addClass('tabCalcEditorDependsPopup')}});var cu=global.tab.CalculationDependencyViewModel=ss.mkType(a,'tab.CalculationDependencyViewModel',function(ni,nj){this.$0=null;this.$1=0;spiff.BaseViewModel.call(this);this.$0=ni;this.$1=nj},{get_viewType:function(){return ct},get_viewModel:function(){return this},get_dependencies:function(){return this.$0},get_maxWidth:function(){return this.$1},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ni){}});var cv=global.tab.CalculationDialogECTButtonComponent=ss.mkType(a,'tab.CalculationDialogECTButtonComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){return spiff.DOMElements.div({className:'.tabCalcEditorECTButtonComponent',id:'calculation-dialog-ect-button-component-id'},React.createElement(SharedWidgets.ButtonWidget,this.$0()))},$0:function(){return{handleClick:ss.mkdel(this,function(ni){this.$2()}),buttonType:10,testId:'calculation-dialog-ect-button',children:'',title:tab.Strings.ECTButtonTitle,getContent:this.$1('tab-analyticsassistant-highlighted')}},$1:function(ni){var nj=React.createElement('div',{className:ni});return function(nk){return nj}},$2:function(){this.props.handleClick()}});var cw=global.tab.CalculationDialogTemplate=ss.mkType(a,'tab.CalculationDialogTemplate',function(){this.$6=null;this.$5=null;this.$1=null;this.$9=null;this.$7=null;this.$8=null;this.$3=null;this.$4=null;this.$2=null;cz.call(this,$("<div class='tabCalcEditor'><div class='tabCalcEditorBody'><div class='tabCalcEditorCmHolder tabCalcEditorDropTarget'></div></div><div class='tabCalcEditorControlArea'><div class='tabCalcEditorStatusOk'><span class='tabCalcEditorStatusOkText'></span></div><div class='tabCalcEditorStatusErrorBtn'><span class='tabCalcEditorStatusErrorText'></span><span class='tabCalcEditorDropdownBtnIcon'></span></div><div class='tabCalcEditorDependsBtn'><span class='tabCalcEditorDependsBtnLabel'></span><span class='tabCalcEditorDropdownBtnIcon'></span></div><div class='tabCalcEditorBtnArea'></div></div></div>"));this.$2=this.getElementBySelector('.tabCalcEditorBody');this.$6=this.getElementBySelector('.tabCalcEditorCmHolder');this.$5=this.getElementBySelector('.tabCalcEditorDropTarget');this.$1=this.getElementBySelector('.tabCalcEditorBtnArea');this.$7=this.getElementBySelector('.tabCalcEditorStatusErrorBtn');this.$8=this.getElementBySelector('.tabCalcEditorStatusErrorText');this.$9=this.getElementBySelector('.tabCalcEditorStatusOk');this.$3=this.getElementBySelector('.tabCalcEditorDependsBtn');this.$4=this.getElementBySelector('.tabCalcEditorDependsBtnLabel')},{get_calcEditorBody:function(){return this.$2},get_formulaEditorHolder:function(){return this.$6},get_dragSource:function(){return this.$6},get_dropTarget:function(){return this.$5},get_dropInviteBorder:function(){return this.$6},get_buttonArea:function(){return this.$1},get_statusErrorButton:function(){return this.$7},get_statusOk:function(){return this.$9},get_statusErrorText:function(){return this.$8},get_dependenciesButton:function(){return this.$3},get_dependenciesButtonLabel:function(){return this.$4}});var cx=global.tab.CalculationDialogView=ss.mkType(a,'tab.CalculationDialogView',function(ni){this.$O=null;this.$S=null;this.$Q=null;this.$N=null;this.$P=null;this.$M=null;this.$K=null;this.$R=null;this.$L=null;this.$4$1=null;this.$4$2=null;cA.call(this,ni,new cw);this.$O=new tab.Debouncer(ss.mkdel(this,this.$y),300);this.calcViewModel.add_dirtyStateChanged(ss.mkdel(this,this.$o));var nj=new kn(this);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nj);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.calcViewModel.remove_dirtyStateChanged(ss.mkdel(this,this.$o));KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(nj);this.$O.dispose()})));this.initDom()},{get_editableCaption:function(){return this.$4$1},set_editableCaption:function(ni){this.$4$1=ni},get_calcCaptionLabel:function(){return this.$4$2},set_calcCaptionLabel:function(ni){this.$4$2=ni},get_dialog:function(){return this.$N},$J:function(){return this.get_template()},initDom:function(){this.$K=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.applyCalc),tab.Strings.CalcEditorApply,'tabCalcEditorApplyButton',2,1);this.$J().get_buttonArea().append(this.$K.element);this.disposables.add$1(this.$K);this.$D();this.$K.set_hoverTooltipText((BrowserSupport.BrowserSupport.IsMac()?tab.Strings.CalcEditorApplyTooltipMac:tab.Strings.CalcEditorApplyTooltip));this.$R=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.applyCalcAndClose),tab.Strings.DialogButtonOK,'tabCalcEditorOkButton',0,2);this.$J().get_buttonArea().append(this.$R.element);this.disposables.add$1(this.$R);this.$R.set_hoverTooltipText(tab.Strings.CalcEditorOkButtonTooltip);this.$J().get_statusErrorText().text(tab.Strings.CalcEditorCalcError);this.$J().get_statusOk().text(tab.Strings.CalcEditorCalcOk);this.$P=new spiff.Button(this.$J().get_statusErrorButton());this.$P.add_click(ss.mkdel(this,this.$i));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$P.remove_click(ss.mkdel(this,this.$i));this.$P.dispose()})));this.$M=new spiff.Button(this.$J().get_dependenciesButton());this.$M.add_click(ss.mkdel(this,this.$h));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$M.remove_click(ss.mkdel(this,this.$h));this.$M.dispose()})));this.calcViewModel.add_applyErrorMessageCompleted(ss.mkdel(this,this.$n));this.calcViewModel.add_applyCalculationSuccess(ss.mkdel(this,this.$m));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.calcViewModel.remove_applyErrorMessageCompleted(ss.mkdel(this,this.$n));this.calcViewModel.remove_applyCalculationSuccess(ss.mkdel(this,this.$m))})));this.$k();cA.prototype.initDom.call(this)},onCalculationCanceled:function(){cA.prototype.onCalculationCanceled.call(this);this.$N.close(null)},$o:function(ni){this.$D()},$m:function(ni){if(ni){this.$N.close(null)}},applyCalc:function(){this.calcViewModel.applyCalculation(null,false)},applyCalcAndClose:function(){this.calcViewModel.applyCalculation(null,true)},updateDomFromModel:function(){this.get_editableCaption().set_text(this.calcViewModel.get_caption());this.$I();this.$H();cA.prototype.updateDomFromModel.call(this);this.$E();this.$B()},$A:function(ni,nj){if(nj.get_propertyName()==='selected'){var nk=ni.get_selected();this.$L.element.stop(true,true);var nl=ss.mkdel(this,function(){this.$L.element.css((nk?{display:''}:{'z-index':''}))});var nm=ss.mkdel(this,function(){this.$L.element.css((nk?{'z-index':this.element.find('.CodeMirror-vscrollbar').css('z-index')}:{display:'none'}));if(nk){this.$L.handleResize()}});var nn=(nk?((this.$L.element.outerWidth()+1)*-1):0);this.$L.element.animate({right:nn+'px'},ss.mkdict(['duration',300,'start',nl,'always',nm]))}},$k:function(){if(ss.isValue(this.$L)){return}this.$L=tab.ObjectRegistry.newView(cE).call(null,[this.calcViewModel.get_functionListViewModel()]);this.$L.element.css({display:'none'});this.$L.add_doubleClickedItem(ss.mkdel(this,this.$r));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$L.remove_doubleClickedItem(ss.mkdel(this,this.$r));this.$L.dispose();this.$L=null})))},createDialog:function(){this.$N=new spiff.Dialog('',this.element);this.$N.disableTextSelection();this.$N.configMoveDragSource(spiff.Dialog.defaultDraggableDialogConfigurer);this.$N.get_dialogElement().addClass('tabCalcEditDialog');if(this.calcViewModel.get_isForRelationshipCalc()){this.$N.get_dialogElement().css('position','absolute');this.$N.get_dialogElement().css('z-index',988+2)}this.$N.get_dialogElement().addClass('tabSuppressVizTooltipsAndOverlays');this.$N.set_resizeable(true);this.$N.add_closed(ss.mkdel(this,this.$p));this.$N.add_resizeEnd(ss.mkdel(this,this.$q));this.$N.set_stayInWindow(true);this.set_editableCaption(spiff.EditableTextView.newEditableTextView(this.calcViewModel.get_caption(),'',false));this.get_editableCaption().stopPropogationOfInputEvents();this.get_editableCaption().add_committed(ss.mkdel(this,this.$t));this.get_editableCaption().add_propertyChanged(ss.mkdel(this,this.$s));this.get_editableCaption().add_hoverStateChanged(ss.mkdel(this,this.$G));var ni=ss.mkdel(this,function(){this.$G(this.get_editableCaption().element.hasClass('hover'))});this.get_editableCaption().add_editing(ni);this.get_editableCaption().add_committed(ni);this.set_calcCaptionLabel(spiff.LabelButton.newTextButton(null,tab.Strings.DataTabJoinOnCalculationCaption));this.get_calcCaptionLabel().get_labelElement().addClass('tabCalcEditorJoinCalcLabel');this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$N.remove_closed(ss.mkdel(this,this.$p));this.$N.remove_resizeEnd(ss.mkdel(this,this.$q));this.$N.dispose();this.get_editableCaption().remove_committed(ss.mkdel(this,this.$t));this.get_editableCaption().remove_propertyChanged(ss.mkdel(this,this.$s));this.get_editableCaption().remove_hoverStateChanged(ss.mkdel(this,this.$G));this.get_editableCaption().remove_editing(ni);this.get_editableCaption().remove_committed(ni);this.get_editableCaption().dispose();this.get_calcCaptionLabel().dispose()})));this.$S=new cG;this.$N.get_titleBarElement().find('.tab-dialogTitle').append(this.$S.domRoot);this.disposables.add$1(this.$S);tab.ApplicationModel.get_instance().get_workbook().add_sheetsChanged(ss.mkdel(this,this.$u));tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().add_newActiveDataSource(ss.mkdel(this,this.$l));tab.ApplicationModel.get_instance().get_workbook().add_uiModeChanged(ss.mkdel(this,this.$v));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.ApplicationModel.get_instance().get_workbook().remove_sheetsChanged(ss.mkdel(this,this.$u));tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().remove_newActiveDataSource(ss.mkdel(this,this.$l));tab.ApplicationModel.get_instance().get_workbook().remove_uiModeChanged(ss.mkdel(this,this.$v))})));this.$x(this.$S.get_ectButtonContainer()[0]);if(ss.isNullOrUndefined(this.$L)){return}this.$N.element.prepend($("<div class='tabCalcEditorFunctionFlyoutCover'></div>"));this.$N.element.prepend(this.$L.element);this.$L.onAddedToDom();var nj=new gx;this.$Q=new spiff.ToggleButton(nj.domRoot,'flyoutShown');this.$Q.add_propertyChanged(ss.mkdel(this,this.$A));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$Q.remove_propertyChanged(ss.mkdel(this,this.$A))})));this.$Q.addToDom(this.$N.element);this.disposables.add$1(this.$Q);this.disposables.add$1(nj);this.$Q.set_selected(false)},$G:function(ni){this.$S.get_dataSourceLabel().css('display',((this.get_editableCaption().get_isEditing()||ni)?'none':'inline-block'))},$B:function(){var ni=(this.$z()?tab.DoubleUtil.roundToInt(this.get_calcCaptionLabel().get_labelElement().width()):this.get_editableCaption().get_textDisplayWidth());this.$C(ni)},$E:function(){this.get_calcCaptionLabel().set_label((this.calcViewModel.get_isForRelationshipCalc()?tab.Strings.DataTabRelationshipCalculationCaption:tab.Strings.DataTabJoinOnCalculationCaption))},$z:function(){return this.calcViewModel.get_isForJoin()||this.calcViewModel.get_isForRelationshipCalc()},$C:function(ni){var nj=this.calcViewModel.get_shouldShowDataSourceCaption();if(nj){this.$S.get_dataSourceLabelText().text(this.calcViewModel.get_dataSourceCaption());this.$S.get_dataSourceIcon().removeClass().addClass('icon '+this.calcViewModel.get_dataSourceIconName())}this.$S.get_dataSourceIcon().toggle(nj);this.$S.get_dataSourceLabel().css('left',ni+'px')},$y:function(){if(tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='data-tab'){this.$S.get_ectButtonContainer().toggle(false);return}if(tab.ApplicationModel.get_instance().get_currentSheetType()!=='worksheet'){this.$S.get_ectButtonContainer().toggle(false);return}(new gW).invoke().then(ss.mkdel(this,function(ni){this.$S.get_ectButtonContainer().toggle(ni.isAnalyticsAssistantAvailable)}),null)},$x:function(ni){var nj=React.createElement(cv,{handleClick:ss.mkdel(this,this.$w)});ReactDOM.render(nj,ni);this.$O.invokeActionDelayed()},$l:function(){this.$O.invokeActionDelayed()},$u:function(ni){this.$O.invokeActionDelayed()},$v:function(){this.$O.invokeActionDelayed()},$w:function(){var ni=new tab.LaunchAnalyticsAssistantSidePaneCmd;ni.set_isFromCalcDialog(true);ni.invoke()},onCalculationEdited:function(){if(ss.isNullOrUndefined(this.$N)){this.createDialog()}var ni=!this.get_dialog().get_isShown();if(ni){this.get_dialog().show();this.onAddedToDom();this.get_calcCaptionLabel().addToDom(this.$S.get_captionContainer());this.get_editableCaption().addToDom(this.$S.get_captionContainer())}this.$F();cA.prototype.onCalculationEdited.call(this);this.$B();this.$D();if(ni){if(this.calcViewModel.get_isNewCalculation()&&!this.$z()){this.get_editableCaption().edit()}else{this.focusEditor()}}else{this.$N.moveToTop();if(this.get_editableCaption().get_isEditing()){tab.DomUtil.selectAllInputText(this.get_editableCaption().get_inputElement())}else{this.get_editor().execCommand('goDocEnd')}}},$F:function(){if(this.$z()){this.get_calcCaptionLabel().element.show();this.get_editableCaption().get_textElement().hide()}else{this.get_calcCaptionLabel().element.hide();this.get_editableCaption().get_textElement().show()}},$I:function(){this.$J().get_statusOk().toggle(!this.calcViewModel.get_hasErrors());this.$J().get_statusErrorButton().toggle(this.calcViewModel.get_hasErrors())},$H:function(){this.$J().get_dependenciesButtonLabel().text(this.calcViewModel.get_dependenciesBtnLabel());this.$J().get_dependenciesButton().css('visibility',(this.calcViewModel.get_hasDependencies()?'':'hidden'))},$i:function(){var ni=_.map(this.calcViewModel.get_errors(),function(nj){return spiff.MenuItem.newItem(nj,nj.errorMessage,'ErrorButtonOnClick',null,null,null)});spiff.MenuViewModel.createForMenu(new spiff.Menu(ni),ss.mkdel(this,this.$j),null,null).show(new spiff.ShowMenuOptions(this.$J().get_statusErrorText(),false))},$j:function(ni){var nj=ni.data;var nk=cA.getNewLineOffset(this.calcViewModel.get_formula().substr(0,nj.startPositionForError),null);var nl=this.get_editor().posFromIndex(nj.startPositionForError-nk);var nm=this.get_editor().posFromIndex(nj.startPositionForError+nj.lengthOfCalcOfError-nk);this.get_editor().setCursor(nl);this.focusEditor();this.get_editor().setSelection(nl,nm)},$h:function(){this.$M.element.addClass('tabOpen');var ni=spiff.UberPopupViewModel.createForContent$1(new cu(this.calcViewModel.get_dependencies(),tab.DoubleUtil.roundToInt(this.element.outerWidth())),this.$J().get_dependenciesButton(),null,true);ni.options=new spiff.UberPopupShowOptions.$ctor1(0,0,0,false,false,true,null,null,null,false,0,null,987,true);ni.show();ni.add_hidden(ss.mkdel(this,function(){this.$M.element.removeClass('tabOpen')}))},$t:function(){if(ss.isNullOrEmptyString(this.get_editableCaption().get_text())){this.get_editableCaption().set_text(this.calcViewModel.get_caption())}else{this.calcViewModel.set_caption(this.get_editableCaption().get_text())}this.$B()},$s:function(ni,nj){if(nj.get_propertyName()==='text'){if(ss.isNullOrUndefined(this.$K)||ss.isNullOrUndefined(this.get_editableCaption())){return}this.$K.set_disabled(!(this.calcViewModel.isCaptionStringDirty(this.get_editableCaption().get_text())||this.calcViewModel.get_isFormulaDirty()))}},$D:function(){if(ss.isNullOrUndefined(this.$K)){return}this.$K.set_disabled(!this.calcViewModel.get_isDirty())},$p:function(ni,nj){this.calcViewModel.cancelCalculation()},$q:function(){this.get_editor().refresh();this.$L.handleResize()},$n:function(){this.focusEditor()},$r:function(ni){var nj=this.get_editor().indexFromPos(this.get_editor().getCursor());var nk=cA.getSelection(this.get_editor());if(ss.isNullOrUndefined(nk)){nk={calcEditorTextSelectionStartPos:nj,calcEditorTextSelectionEndPos:nj}}this.calcViewModel.insertFunction(ni,nk)},acceptDrop:function(ni){this.get_dialog().moveToTop();return cA.prototype.acceptDrop.call(this,ni)}});var cy=global.tab.CalculationEditorDragFeedback=ss.mkType(a,'tab.CalculationEditorDragFeedback',function(ni){this.$9=null;this.$8=null;this.$a=null;this.$f='tabTok_replace';this.$d='tabTok_noreplace';this.$e=0;this.$b=new Object;this.$c=null;this.$g=null;this.$a=ni;this.$9=$("<div class='tabEditorDropTargetPointer'></div>");this.$8=$("<div class='tabEditorDropTargetHighlighter'></div>")},{get_replaceableMarkerName:function(){return this.$f},set_replaceableMarkerName:function(ni){this.$f=ni},get_nonReplaceableMarkerName:function(){return this.$d},set_nonReplaceableMarkerName:function(ni){this.$d=ni},get_pillDragCursorPadding:function(){return this.$e},set_pillDragCursorPadding:function(ni){this.$e=ni},get_cursorIndex:function(){return this.$a.indexFromPos(this.$b)},get_cursorPosition:function(){return this.$b},dragOver:function(ni){this.switchDragFeedback(ni,true);this.showDragOverFeedback()},dragExit:function(ni){this.switchDragFeedback(ni,false)},handleDropStateChanged:function(ni){if(ni===1){this.$a.execCommand('singleSelection');this.$g=$(this.$a.getWrapperElement()).find('.CodeMirror-selected');this.$c=$(this.$a.getWrapperElement()).find('.CodeMirror-lines')}else{this.switchDragFeedback(null,false);this.$g=null;this.$c=null}},switchDragFeedback:function(ni,nj){if(ss.isValue(ni)&&ss.isValue(ni.get_dragAvatar())){ni.get_dragAvatar().get_rootElement().toggleClass('tabPillBelowCursor',nj)}if(ss.isValue(this.$c)){this.$c.toggleClass('tabActiveDropTarget',nj)}if(!nj){this.$8.remove();this.$9.remove();this.$1(false)}},showDragOverFeedback:function(){this.$b=this.getDocumentPositionForEvent(EventUtils.DragDropManager.get_lastDragEvent(),this.$a.getCursor());var ni=this.$a.indexFromPos(this.$b);if(this.$5(ni)){return}if(this.$6(this.$b,ni)){return}this.$7()},$5:function(ni){var nj=cA.getSelectionAtIndex(this.$a,ni);if(ss.isValue(nj)){this.$9.remove();this.$8.remove();this.$1(true);return true}this.$1(false);return false},$6:function(ni,nj){var nk=this.$0(this.$a.findMarksAt(ni));if(ss.isValue(nk)){var nl=nk.find();var nm=this.$a.indexFromPos(nl.from);var nn=this.$a.indexFromPos(nl.to);if(nj>nm&&nj<nn){if(this.$4(nk)){this.$2(nl);return true}if(this.$3(nk)){this.$b=((nj>nm+ss.idiv(nn-nm,2))?nl.to:nl.from);this.$7();return true}}}return false},$1:function(ni){if(ss.isValue(this.$g)){this.$g.toggleClass('tabActiveDropTarget',ni)}},$2:function(ni){var nj=new Object;if(ni.to.line>ni.from.line){var nk=this.$a.getLine(ni.from.line);var nl=nk.length-ni.from.ch;nj.ch=ni.from.ch+nl;nj.line=ni.from.line}else{nj=ni.to}var nm=this.$a.charCoords(ni.from,'local');var nn=this.$a.charCoords(nj,'local');this.$8.width(nn.left-nm.left);this.$9.remove();this.$a.addWidget(ni.from,this.$8[0],false,'over',null)},$7:function(){this.$8.remove();this.$a.addWidget(this.$b,this.$9[0],false,'over',null)},$0:function(ni){if(ss.isNullOrUndefined(ni)){return null}for(var nj=0,nk=ni.length;nj<nk;nj++){var nl=ni[nj];if(this.$4(nl)||this.$3(nl)){return nl}}return null},$4:function(ni){return ni.className.indexOf(this.get_replaceableMarkerName())!==-1},$3:function(ni){return ni.className.indexOf(this.get_nonReplaceableMarkerName())!==-1},getDocumentPositionForEvent:function(ni,nj){var nk=new Object;nk.left=ni.pageX;nk.top=ni.pageY-this.$e;if(ss.isValue(nj)&&nk.top>this.$a.heightAtLine(this.$a.lineCount(),'page')){return nj}return this.$a.coordsChar(nk)}});var cz=global.tab.CalculationEditorTemplate=ss.mkType(a,'tab.CalculationEditorTemplate',function(ni){spiff.Template.call(this,ni)},{get_formulaEditorHolder:null,get_dragSource:null,get_dropTarget:null,get_dropInviteBorder:null});var cA=global.tab.CalculationEditorView=ss.mkType(a,'tab.CalculationEditorView',function(ni,nj){this.calcViewModel=null;this.$c=null;this.$d=null;this.$g=null;this.$f='\r\n';this.$b=null;this.$e=[];ss.makeGenericType(spiff.BaseView$1,[cB]).call(this,ni,nj);this.$c=this.get_template();this.calcViewModel=ni;this.calcViewModel.add_calculationUpdated(ss.mkdel(this,this.updateDomFromModel));this.calcViewModel.add_calculationEdited(ss.mkdel(this,this.onCalculationEdited));this.calcViewModel.add_dropStateChanged(ss.mkdel(this,this.handleDropStateChanged));this.calcViewModel.add_calculationCanceled(ss.mkdel(this,this.onCalculationCanceled));this.calcViewModel.add_dropCommandCompleted(ss.mkdel(this,this.$9));this.calcViewModel.add_insertFunctionCompleted(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.calcViewModel.remove_calculationUpdated(ss.mkdel(this,this.updateDomFromModel));this.calcViewModel.remove_calculationEdited(ss.mkdel(this,this.onCalculationEdited));this.calcViewModel.remove_dropStateChanged(ss.mkdel(this,this.handleDropStateChanged));this.calcViewModel.remove_calculationCanceled(ss.mkdel(this,this.onCalculationCanceled));this.calcViewModel.remove_dropCommandCompleted(ss.mkdel(this,this.$9));this.calcViewModel.remove_insertFunctionCompleted(ss.mkdel(this,this.$a))})));EventUtils.DragDropManager.attachDropTarget(this.$c.get_dropTarget(),this);EventUtils.DragDropManager.attachDragSource(this.$c.get_dragSource(),this)},{get_hasEditor:function(){return ss.isValue(this.$d)},get_editor:function(){return this.$d},get_dom:function(){return this.$c},get_pillViewModel:function(){return null},set_pillViewModel:function(ni){},get_feedbackType:function(){return'dropfeedbackmousemove'},get_pillDragFeedback:function(){return this.$g},get_autoCompleteHelper:function(){return this.$b},createCodeMirrorOptions:function(){var ni=new Object;ni.indentUnit=2;ni.indentWithTabs=false;ni.lineNumbers=false;ni.lineWrapping=false;ni.smartIndent=false;ni.dragDrop=true;ni.extraKeys={};var nj=ni;nj.extraKeys[(BrowserSupport.BrowserSupport.IsMac()?'Cmd-Enter':'Ctrl-Enter')]=ss.mkdel(this,this.$7);this.addExtraKeys(nj.extraKeys);return nj},addExtraKeys:function(ni){},initDom:function(){if(ss.isValue(this.$d)){return}this.$d=CodeMirror(this.get_dom().get_formulaEditorHolder()[0],this.createCodeMirrorOptions());this.$d.on('change',ss.mkdel(this,this.$8));this.$d.on('dragstart',ss.mkdel(this,this.onDragStart));this.$g=new cy(this.$d);this.$b=new cs(this.$d,this.calcViewModel);this.disposables.add$1(this.$b);if(this.calcViewModel.get_hasCalculation()){this.onCalculationEdited()}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(this.get_hasEditor()){this.$d.refresh()}},focusEditor:function(){if(this.$d.hasFocus()){return}this.$d.focus()},$7:function(){this.calcViewModel.applyCalculation(this.get_pillViewModel(),false)},onDragStart:function(ni,nj){nj.preventDefault()},updateDomFromModel:function(){this.$f=cA.$0(this.calcViewModel.get_formula());var ni=!ss.referenceEquals(this.$d.getValue(this.$f),this.calcViewModel.get_formula());if(ni){var nj=this.$d.getCursor();this.$d.setValue(this.calcViewModel.get_formula());this.$d.setCursor(nj)}for(var nk=0;nk<this.$e.length;nk++){var nl=this.$e[nk];nl.clear()}this.$e=cA.markStyleAndErrorForTokens(this.$d,this.calcViewModel)},$9:function(ni){if(ni>=0){var nj=cA.getNewLineOffset(this.calcViewModel.get_formula().substr(0,ni),null);var nk=this.$d.posFromIndex(ni-nj);this.$d.setCursor(nk);this.focusEditor()}},$a:function(ni,nj){this.get_editor().setValue(ni);this.$9(nj)},onCalculationCanceled:function(){if(ss.isValue(this.get_autoCompleteHelper())){this.get_autoCompleteHelper().close(true)}},onCalculationEdited:function(){this.updateDomFromModel();this.$d.clearHistory();this.$d.execCommand('goDocEnd')},$8:function(ni,nj){this.calcViewModel.set_formula(ni.getValue(this.$f))},handleDropStateChanged:function(ni){this.get_dom().get_dropInviteBorder().toggleClass('tabDropInvited',ni===1);this.$g.handleDropStateChanged(ni)},dragOver:function(ni){if(!cB.canAccept(ni)){return null}this.$g.dragOver(ni);return this},dragExit:function(ni){this.$g.dragExit(ni)},acceptDrop:function(ni){this.$g.dragExit(ni);var nj=this.$g.get_cursorIndex()+cA.getNewLineOffset(this.calcViewModel.get_formula(),this.$g.get_cursorPosition());return this.calcViewModel.handleDrop(ni,nj,cA.getSelectionAtIndex(this.$d,nj))},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.copy},startDrag:function(ni){var nj=cA.getTextSelectionUnderMouse(this.$d,ni);if(ss.isNullOrUndefined(nj)){return null}var nk=this.$d.posFromIndex(nj.calcEditorTextSelectionStartPos);var nl=this.$d.posFromIndex(nj.calcEditorTextSelectionEndPos);return this.calcViewModel.getDragInstanceForText(this.$d.getRange(nk,nl))},acceptsDragType:function(){return 1},isEqualOrAncestorOf:function(ni){if(tab.DomUtil.isEqualOrAncestorOf(this.element[0],ni)){return true}if(ss.isValue(this.get_autoCompleteHelper())){return this.get_autoCompleteHelper().isEqualOrAncestorOf(ni)}return false}},{markStyleAndErrorForTokens:function(ni,nj){var nk=nj.get_formula();var nl=new Object;var nm=[];var nn=nj.get_errors();for(var no=0;no<nn.length;no++){var np=nn[no];var nq=cA.getNewLineOffset(nk.substr(0,np.startPositionForError),null);var nr=cA.getNewLineOffset(nk.substr(np.startPositionForError,np.lengthOfCalcOfError),null);var ns=ni.posFromIndex(np.startPositionForError-nq);var nt=ni.posFromIndex(np.startPositionForError+np.lengthOfCalcOfError-nq-nr);var nu=new Object;nu.className='tabTok_error';nu.title=np.errorMessage;var nv=nu;nm.push(ni.markText(ns,nt,nv))}var nw=nj.get_tokens();for(var nx=0;nx<nw.length;nx++){var ny=nw[nx];var nz=cA.getNewLineOffset(nk.substr(0,ny.tokenPositionForStyle),null);var nA=cA.getNewLineOffset(nk.substr(ny.tokenPositionForStyle,ny.tokenLengthForStyle),null);var nB=ni.posFromIndex(ny.tokenPositionForStyle-nz);var nC=ni.posFromIndex(ny.tokenPositionForStyle+ny.tokenLengthForStyle-nz-nA);var nD=ni.getRange(nB,nC);var nE=nD.length-ss.trimStartString(nD).length;if(nE===nD.length){continue}var nF=cA.$3(ny.tokenPositionForStyle+nE,ny.tokenLengthForStyle-nE,nj.get_errors());if(nF&&ny.calculationStyle==='style_default'){continue}if(nE>0){nB=ni.posFromIndex(ny.tokenPositionForStyle+nE-nz)}var nG=[];if(!nF&&ny.calculationStyle!=='style_default'){nG.push('tabTok_'+ny.calculationStyle)}var nH=cA.$1(ny,nD);if(ss.isValue(nH)){nG.push(nH)}nl.className=nG.join(' ');if(!ss.isNullOrEmptyString(nl.className)){nm.push(ni.markText(nB,nC,nl))}}return nm},$3:function(ni,nj,nk){var nl=ss.getEnumerator(nk);try{while(nl.moveNext()){var nm=nl.current();if(ni>=nm.startPositionForError&&ni+nj<=nm.startPositionForError+nm.lengthOfCalcOfError){return true}}}finally{nl.dispose()}return false},getNewLineOffset:function(ni,nj){var nk=0;var nl=0;var nm=0;while((ss.isNullOrUndefined(nj)||nk<nj.line)&&(nl=ni.indexOf(String.fromCharCode(10),nl))>=0){if(nl>=1&&ni.charCodeAt(nl-1)===13){nm++}nk++;nl++}return nm},$0:function(ni){return((ni.indexOf('\r\n')>=0)?'\r\n':'\n')},$1:function(ni,nj){if(nj.length<=1){return null}switch(ni.calculationStyle){case'style_prim_field':case'style_sec_field':case'style_invalid_field':case'style_param':{return'tabTok_replace'}case'style_remote_func':case'style_local_func':case'style_comment':case'style_default':case'style_string':case'style_table_expr':{return'tabTok_noreplace'}}return null},getTextSelectionUnderMouse:function(ni,nj){var nk=new Object;nk.left=nj.pageX;nk.top=nj.pageY;var nl=nk;var nm=ni.coordsChar(nl);var nn=ni.indexFromPos(nm);return cA.getSelectionAtIndex(ni,nn)},getSelectionAtIndex:function(ni,nj){var nk=ni.listSelections();for(var nl=0,nm=nk.length;nl<nm;nl++){var nn=cA.$2(ni,nk[nl]);if(ss.isValue(nn)&&nj>nn.calcEditorTextSelectionStartPos&&nj<nn.calcEditorTextSelectionEndPos){return nn}}return null},getSelection:function(ni){var nj=ni.listSelections();if(ss.isValue(nj)&&nj.length>0){return cA.$2(ni,nj[0])}return null},$2:function(ni,nj){if(ss.isNullOrUndefined(nj)||ss.isNullOrUndefined(ni)){return null}var nk=ni.indexFromPos(nj.anchor);var nl=ni.indexFromPos(nj.head);if(nk===nl){return null}var nm={calcEditorTextSelectionStartPos:Math.min(nk,nl),calcEditorTextSelectionEndPos:Math.max(nk,nl)};return nm}});var cB=global.tab.CalculationEditorViewModel=ss.mkType(a,'tab.CalculationEditorViewModel',function(ni){this.$y=['tab-schema-datasource-icon','tab-schema-extract-icon','tab-schema-cube-icon','tab-schema-server-icon'];this.$t=null;this.$p=null;this.$s=null;this.$q=null;this.$A=null;this.$z=0;this.$x=-1;this.$o=null;this.$B=null;this.$u=null;this.$w=0;this.$r=null;this.$v=false;this.$n=true;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=false;this.$2$11=null;this.$2$12=null;spiff.BaseViewModel.call(this);this.set_isAdhocVM(false);this.set_viewModelShelfType('none-shelf');this.$t=ni;if(ss.isValue(this.$t.get_calculationFunctionListModel())){this.set_functionListViewModel(new cF(this.$t.get_calculationFunctionListModel()))}this.$c().$e().$d();this.$t.add_calculationUpdated(ss.mkdel(this,this.$8));EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.dragEnded));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$t.remove_calculationUpdated(ss.mkdel(this,this.$8));EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.dragEnded))})));this.$z=0;if(this.$l()){this.$b()}},{add_calculationUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_calculationUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_calculationEdited:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_calculationEdited:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_calculationCanceled:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_calculationCanceled:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},add_dropStateChanged:function(ni){this.$2$4=ss.delegateCombine(this.$2$4,ni)},remove_dropStateChanged:function(ni){this.$2$4=ss.delegateRemove(this.$2$4,ni)},add_dirtyStateChanged:function(ni){this.$2$5=ss.delegateCombine(this.$2$5,ni)},remove_dirtyStateChanged:function(ni){this.$2$5=ss.delegateRemove(this.$2$5,ni)},add_dropCommandCompleted:function(ni){this.$2$6=ss.delegateCombine(this.$2$6,ni)},remove_dropCommandCompleted:function(ni){this.$2$6=ss.delegateRemove(this.$2$6,ni)},add_insertFunctionCompleted:function(ni){this.$2$7=ss.delegateCombine(this.$2$7,ni)},remove_insertFunctionCompleted:function(ni){this.$2$7=ss.delegateRemove(this.$2$7,ni)},add_applyErrorMessageCompleted:function(ni){this.$2$8=ss.delegateCombine(this.$2$8,ni)},remove_applyErrorMessageCompleted:function(ni){this.$2$8=ss.delegateRemove(this.$2$8,ni)},add_applyCalculationSuccess:function(ni){this.$2$9=ss.delegateCombine(this.$2$9,ni)},remove_applyCalculationSuccess:function(ni){this.$2$9=ss.delegateRemove(this.$2$9,ni)},$l:function(){return ss.isValue(this.$t)&&this.$t.get_hasCalculation()},$m:function(){if(!this.$l()){return false}if(this.get_isAdhocVM()){return this.$t.get_isAdhoc()&&this.$t.get_adHocShelf()===this.get_viewModelShelfType()}return!this.$t.get_isAdhoc()},get_hasCalculation:function(){return this.$l()&&ss.isValue(this.$r)},get_isNewCalculation:function(){return this.$t.get_isNewCalculation()},get_isDirty:function(){return this.$v},set_isDirty:function(ni){if(this.$v!==ni){this.$v=ni;if(ss.isValue(this.$2$5)){this.$2$5(this.$v)}}},get_isCaptionDirty:function(){return ss.isValue(this.$r)&&this.$r.$0(this.get_caption())},get_isFormulaDirty:function(){return ss.isValue(this.$r)&&this.$r.$2(this.get_formula())},get_isAdhocVM:function(){return this.$2$10},set_isAdhocVM:function(ni){this.$2$10=ni},get_viewModelShelfType:function(){return this.$2$11},set_viewModelShelfType:function(ni){this.$2$11=ni},get_functionListViewModel:function(){return this.$2$12},set_functionListViewModel:function(ni){this.$2$12=ni},get_shelfType:function(){return this.$t.get_adHocShelf()},get_shelfPaneSpecId:function(){return this.$t.get_adHocPaneSpecId()},get_shelfPosition:function(){return this.$t.get_adHocShelfPosition()},get_tokens:function(){return this.$s},get_errors:function(){return this.$t.get_errors()},get_caption:function(){return this.$p},set_caption:function(ni){if(!ss.referenceEquals(this.$p,ni)){this.$p=ni;this.$k();this.$i()}},get_formula:function(){return this.$q},set_formula:function(ni){if(!ss.referenceEquals(this.$q,ni)){this.$q=ni;this.$k();this.$i()}},get_dataSourceCaption:function(){return this.$t.get_dataSourceCaption()},get_dataSourceIconName:function(){try{var ni=this.$u.findDataSourceByName(this.$t.get_dataSourceName());var nj=this.$u.get_dataSchemaPresModel().worksheetDataSchemaMap[tsConfig.current_sheet_name];var nk=gO.getDataSourceIcon(nj.datasourceIcons,ni);nk=ss.replaceAllString(ss.replaceAllString(nk,'-primary',''),'-secondary','');return(ss.contains(this.$y,nk)?nk:'tab-schema-datasource-icon')}catch(nl){}return'tab-schema-datasource-icon'},get_shouldShowDataSourceCaption:function(){if(ss.isNullOrUndefined(this.$u)){return false}else{return this.$u.getDataSourceCount(false)>1}},get_hasErrors:function(){return this.$t.get_errors().length>0},get_hasDependencies:function(){return!ss.isNullOrEmptyString(this.get_dependencies())},get_dependencies:function(){return this.$t.get_dependencies()},get_dependenciesBtnLabel:function(){return this.$t.get_dependenciesBtnLabel()},get_dropState:function(){return this.$w},set_dropState:function(ni){if(this.$w===ni){return}this.$w=ni;if(ss.isValue(this.$2$4)){this.$2$4(this.$w)}},get_isForJoin:function(){return this.$t.get_isForJoin()},get_isForRelationshipCalc:function(){return this.$t.get_isForRelationshipCalc()},dispose:function(){this.$1();if(ss.isValue(this.get_functionListViewModel())){this.get_functionListViewModel().dispose()}spiff.BaseViewModel.prototype.dispose.call(this)},isValidFormula:function(){return this.$5()&&this.$6()&&!ss.isNullOrEmptyString(this.get_formula())&&this.get_errors().length===0},isCaptionStringDirty:function(ni){return ss.isValue(this.$r)&&this.$r.$0(ni)},$i:function(){this.set_isDirty(ss.isValue(this.$r)&&this.$r.$1(this))},$f:function(){if(!this.$t.get_hasCalculation()){this.$r=null}else if(ss.isNullOrEmptyString(this.$t.get_fieldName())){this.$r=new b(this.$t.get_name(),this.$t.get_caption(),'')}else{this.$r=new b(this.$t.get_name(),this.$t.get_caption(),this.$t.get_formula())}},applyCalculation:function(ni,nj){if(!this.$l()){return}this.$1();if(this.$t.get_isAdhoc()&&tab.MiscUtil.isNullOrEmpty$1(this.$q)){if(ss.isValue(ni)){tab.ShelfClientCommands.removeShelfPill(ni.shelfVM.get_shelf(),ni.get_pill())}if(nj){this.cancelCalculation()}this.$2(nj);return}if(this.$t.get_isForJoin()&&!tab.MiscUtil.isNullOrEmpty$1(this.$q)&&ss.isValue(this.$t.get_joinOnCalcInfoPresModel())){if(!ss.referenceEquals(this.$q,this.$t.get_joinOnCalcInfoPresModel().joinExpression)){var nk={forJoin:true,forOmRelationshipCalc:this.$t.get_joinOnCalcInfoPresModel().forOmRelationshipCalc,joinExpression:this.$q,clauseToModifyIndex:this.$t.get_joinOnCalcInfoPresModel().clauseToModifyIndex,isLeft:this.$t.get_joinOnCalcInfoPresModel().isLeft,tableAlias:this.$t.get_joinOnCalcInfoPresModel().tableAlias};tab.ApplicationModel.get_instance().raiseNotification('doc:join-calc-update-event',nk,null)}if(nj){this.cancelCalculation()}this.$2(nj);return}this.set_isDirty(false);var nl=this.$r;this.$r=new b(nl.$3(),this.$p,this.$q);var nm=tab.CalculationCommands.applyCalculation(this.$t,this.$p,this.$q,false,nj);nm.done(ss.mkdel(this,function(nn){if(nn.get_resultType()==='succeed'){this.$f();this.$2(nj)}else{this.$r=nl;var no=nn.get_resultType()!=='invalid-caption-for-new-calc';this.showApplyCalcErrorDialog(nn.get_errorMessage(),no)}})).fail(ss.mkdel(this,function(nn){this.cancelCalculation()})).always(ss.mkdel(this,function(){this.$i()}))},showApplyCalcErrorDialog:function(ni,nj){if(ss.isNullOrEmptyString(ni)){return}var nk=tab.ConfirmationViewModel.create(ss.htmlEncode(ni),ss.mkdel(this,function(nl){if(nl==='deny'){tab.CalculationCommands.applyCalculation(this.$t,this.$p,this.$q,true,false)}this.raiseActionEvent(this.$2$8)}));if(!nj){nk.set_showDenyButton(false);nk.set_confirmText(tab.Strings.DialogButtonOK);nk.set_titleText(tab.Strings.WarningTitle)}nk.show()},$2:function(ni){if(ss.isValue(this.$2$9)){this.$2$9(ni)}},cancelCalculation:function(){this.$1();tab.CalculationCommands.cancelCalculation(this.$t)},$1:function(){this.$A=tab.MiscUtil.clearTimeout(this.$A)},$8:function(){this.$j();if(!this.$l()){this.$0()}else if(this.$7()){this.$h()}else{this.$b()}},$j:function(){if(ss.isNullOrUndefined(this.get_functionListViewModel())&&ss.isValue(this.$t.get_calculationFunctionListModel())){this.set_functionListViewModel(new cF(this.$t.get_calculationFunctionListModel()))}},$0:function(){if(ss.isValue(this.$r)){this.$f();this.raiseActionEvent(this.$2$3)}this.$i()},$7:function(){return ss.isValue(this.$r)&&ss.referenceEquals(this.$r.$3(),this.$t.get_name())},$5:function(){return this.$z<=1&&ss.isNullOrUndefined(this.$A)},$h:function(){if(this.$5()){if(this.$6()){return}this.$g();this.raiseActionEvent(this.$2$1)}},$b:function(){try{this.$n=false;this.$f();this.$g();this.raiseActionEvent(this.$2$2)}finally{this.$n=true}},$6:function(){return this.$x===this.$t.get_modelVersion()},$g:function(){this.$x=this.$t.get_modelVersion();this.$p=this.$t.get_caption();this.$s=this.$t.get_tokens();this.$q=this.$t.get_formula();this.$i()},requestAutoCompleteMenu:function(ni,nj){if(this.$n&&this.get_hasCalculation()&&this.$t.get_dataSourceName()!=='__fake ds name__'){return tab.CalculationCommands.requestAutoCompleteInfo(this.$t,ni,nj)}else{return $.Deferred().reject()}},getDragInstanceForText:function(ni){var nj=new cr(ni);var nk=tab.CalculationCommands.startDraggingText(ni);nk.done(function(nl){if(ss.isValue(nl)&&ss.isValue(nl)){nj.resolve(nl)}else{nj.reject(nl)}});return nj},dragStarted:function(ni){if(ni.get_dragType()==='dragdrop'){this.set_dropState((cB.canAccept(ni)?1:2))}else{this.set_dropState(0)}},dragEnded:function(ni){this.set_dropState(0)},handleDrop:function(ni,nj,nk){var nl=$.Deferred();if(!ss.isInstanceOfType(ni,cp)){nl.resolve(false);return nl}var nm=ss.safeCast(ni,lu);nm.get_drop().done(ss.mkdel(this,function(nn){var no=ss.safeCast(nn,cp);var np=cB.canAccept(no);if(!np){}else if(no.hasOnlyFields()){var nq=no.get_fieldNames();this.$4();var nr;if(ss.isInstanceOfType(no,cr)){var ns=no.get_text();nr=tab.CalculationCommands.dropOnCalcEditor(nq,nj,'drag-drop-calculation-editor',nk,this.$t.get_calculationContext(),ns)}else if(ss.isInstanceOfType(no,be)){var nt=ss.safeCast(no,be);var nu=$.Deferred();nr=nu.promise();nt.getFormulaPromise('measure-formula').done(ss.mkdel(this,function(nx){tab.CalculationCommands.dropOnCalcEditor(nq,nj,'drag-drop-calculation-editor',nk,this.$t.get_calculationContext(),nx).done(function(ny){nu.resolve(ny)}).fail(function(ny){nu.reject(0)})})).fail(function(nx){nu.reject(0)})}else{nr=tab.CalculationCommands.dropOnCalcEditor(nq,nj,'drag-drop-schema',nk,this.$t.get_calculationContext(),null)}nr.done(ss.mkdel(this,this.$3))}else if(no.hasOnlyPills()){var nv=[];nv.push(no.get_pill().get_field().get_globalName());this.$4();var nw=tab.CalculationCommands.dropOnCalcEditor(nv,nj,'drag-drop-shelf',nk,this.$t.get_calculationContext(),null);nw.done(ss.mkdel(this,this.$3))}nl.resolve(np)}));return nl},insertFunction:function(ni,nj){var nk=this.get_formula();var nl=tab.CalculationCommands.insertFunctionInFormula(ni,nk,nj);nl.done(ss.mkdel(this,function(nm){if(ss.isNullOrUndefined(nm)||_.isString(nm)){return}var nn=nm;var no=nn['text'.toString()];var np=nn['selectionEnd'.toString()];nk=nk.substr(0,nj.calcEditorTextSelectionStartPos)+no+nk.substr(nj.calcEditorTextSelectionEndPos);if(ss.isValue(this.$2$7)){this.$2$7(nk,np)}else{this.set_formula(nk)}}))},$k:function(){this.$1();this.$A=window.setTimeout(ss.mkdel(this,function(){this.$4()}),250)},$4:function(){if(ss.isNullOrUndefined(this.$A)){return}this.$1();if(this.$l()){this.$z++;tab.CalculationCommands.validateCalculation(this.$t,this.$p,this.$q).always([ss.mkdel(this,function(){this.$z--})])}},$3:function(ni){if(ss.isValue(this.$2$6)){this.$2$6(ni)}},$c:function(){this.$o=tab.ApplicationModel.get_instance();this.$o.add_newWorkbook(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$o.remove_newWorkbook(ss.mkdel(this,this.$a));this.$o=null})));return this},$e:function(){this.$a(this.$o.get_workbook());this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$a(null)})));return this},$d:function(){this.$9(this.$B.get_dataSchema());this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$9(null)})));return this},$a:function(ni){if(ss.isValue(ni)){ni.add_newDataSchemaModel(ss.mkdel(this,this.$9))}if(ss.isValue(this.$B)){this.$B.remove_newDataSchemaModel(ss.mkdel(this,this.$9))}this.$B=ni},$9:function(ni){this.$u=ni}},{new$1:function(ni){return new cB(ni)},canAccept:function(ni){if(ss.isInstanceOfType(ni,be)){return false}var nj=ss.safeCast(ni,cp);if(!ni.get_hasPayload()||ss.isNullOrUndefined(nj)){return false}if(ss.isInstanceOfType(nj,jd)){var nk=nj.get_fields();if(ss.isNullOrUndefined(nk)){return false}return _.every(nk,function(nl){return nl.get_canBeUsedInCalculation()})}else if(ss.isInstanceOfType(nj,cr)){return true}return false}});var cC=global.tab.CalculationFunctionInfoTemplate=ss.mkType(a,'tab.CalculationFunctionInfoTemplate',function(){this.$2=null;this.$1=null;spiff.Template.call(this,$("\n<div class='tabCalcEditorFunctionInfo'>\n  <div class='tabCalcEditorFunctionName'></div>\n  <div class='tabCalcEditorFunctionDescription'></div>\n</div>"));this.$2=this.getElementBySelector('.tabCalcEditorFunctionName');this.$1=this.getElementBySelector('.tabCalcEditorFunctionDescription')},{get_functionName:function(){return this.$2},get_functionDescription:function(){return this.$1}});var cD=global.tab.CalculationFunctionListTemplate=ss.mkType(a,'tab.CalculationFunctionListTemplate',function(){this.$3=null;this.$2=null;this.$4=null;this.$1=null;spiff.Template.call(this,$("<div class='tabCalcEditorFunctionArea'><div class='tabCalcEditorSearchableFuncList'><div class='tabCalcEditorFuncType'></div><div class='tabCalcEditorFuncSearchBox'></div><div class='tabCalcEditorFuncListSeparator'></div><div class='tabCalcEditorFuncListArea'></div></div><div class='tabCalcEditorFuncInfoArea'></div></div>"));this.$3=this.getElementBySelector('.tabCalcEditorFuncListArea');this.$2=this.getElementBySelector('.tabCalcEditorFuncInfoArea');this.$4=this.getElementBySelector('.tabCalcEditorFuncSearchBox');this.$1=this.getElementBySelector('.tabCalcEditorFuncType')},{get_functionListArea:function(){return this.$3},get_functionInfoArea:function(){return this.$2},get_searchBox:function(){return this.$4},get_funcType:function(){return this.$1}});var cE=global.tab.CalculationFunctionListView=ss.mkType(a,'tab.CalculationFunctionListView',function(ni){this.$i=null;this.$e=null;this.$j=null;this.$h=null;this.$l=null;this.$k=null;this.$f=null;this.$g=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[cF]).call(this,ni,new cD);this.$i=ni;this.$e=this.get_template()},{add_doubleClickedItem:function(ni){this.$3$1=ss.delegateCombine(this.$3$1,ni)},remove_doubleClickedItem:function(ni){this.$3$1=ss.delegateRemove(this.$3$1,ni)},get_dom:function(){return this.$e},get_listView:function(){return this.$j},get_funcInfo:function(){return this.$f},get_funcTypeVm:function(){return this.$h},get_searchTextInputView:function(){return this.$l},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$j=spiff.ListView.createListView(this.$i.get_listViewModel(),this);this.$k=new spiff.ScrollableViewModel.$ctor1(true);this.$k.set_content(this.$j.element[0]);this.$k.set_scrollY(true);this.disposables.add$1(this.$k);var ni=spiff.ScrollableView.createScrollableView(this.$k);ni.element.attr('tabindex','-1');ni.addToDom(this.$e.get_functionListArea());this.$j.useScrollableView(ni);this.$f=new cC;this.$g=new spiff.ScrollableViewModel.$ctor1(true);this.$g.set_content(this.get_funcInfo().domRoot.get(0));this.$g.set_scrollY(true);this.disposables.add$1(this.$g);this.disposables.add$1(this.$f);var nj=spiff.ScrollableView.createScrollableView(this.$g);nj.addToDom(this.$e.get_functionInfoArea());this.$j.tabIndex(0);this.$i.add_selectionChanged(ss.mkdel(this,this.$b));this.$i.add_submitSelection(ss.mkdel(this,this.$a));this.$j.add_listItemsUpdated(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i.remove_selectionChanged(ss.mkdel(this,this.$b));this.$i.remove_submitSelection(ss.mkdel(this,this.$a));this.$j.remove_listItemsUpdated(ss.mkdel(this,this.$c));this.$j.dispose()})));this.$h=new spiff.ComboBoxViewModel;this.$7(tab.Strings.FunctionTypeAll,'all');this.$7(tab.Strings.FunctionTypeNumber,'num');this.$7(tab.Strings.FunctionTypeString,'str');this.$7(tab.Strings.FunctionTypeDate,'date');this.$7(tab.Strings.FunctionTypeType,'cast');this.$7(tab.Strings.FunctionTypeLogical,'logic');this.$7(tab.Strings.FunctionTypeAggregate,'agg');this.$7(tab.Strings.FunctionTypeUser,'user');this.$7(tab.Strings.FunctionTypeTableCalculation,'table');this.$7(tab.Strings.FunctionTypeSpatial,'spatial');this.$h.set_selectedItem(this.$h.get_items()[0]);this.$e.get_funcType().append(tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$h]).element);this.$h.add_selectedItemChanged(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$h.remove_selectedItemChanged(ss.mkdel(this,this.$8));this.$h.dispose()})));this.$l=spiff.ClearableTextInputView.newClearableTextInputView('',tab.Strings.FunctionTypeSearchHint,tab.Strings.FunctionTypeClearTooltip);this.$l.addToDom(this.$e.get_searchBox());this.$l.add_propertyChanged(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.remove_propertyChanged(ss.mkdel(this,this.$d));this.$l.dispose()})));this.$9()},$7:function(ni,nj){var nk=new spiff.ComboBoxItem(null,ni,nj,null,null);this.$h.addItem(nk)},$9:function(){var ni=this.$h.get_selectedItem().get_data();if(ni.toString()==='all'){ni=null}var nj=this.$l.get_text();if(ss.isValue(nj)){nj=nj.trim().toLowerCase()}this.$i.filter(ni,nj)},$8:function(ni){if(!ss.isNullOrEmptyString(this.$l.get_text())){this.$l.set_text('')}else{this.$9()}},$d:function(ni,nj){this.$9()},handleResize:function(){this.$k.triggerRefresh();this.$g.triggerRefresh()},$c:function(){this.$i.selectFirstItem();this.$k.triggerRefresh()},$b:function(ni){var nj='';var nk='';if(ss.isValue(ni)){nj=ni.funcSig||'';nk=ni.helpContents||''}this.get_funcInfo().get_functionName().text(nj);this.get_funcInfo().get_functionDescription().text(nk);this.$g.triggerRefresh()},$a:function(ni){if(!ss.staticEquals(this.$3$1,null)){this.$3$1(ni)}},createListItemContent:function(ni){var nj=ni.get_data();return $('<span></span>').addClass('tab-list-item-label').text(nj.name)}});var cF=global.tab.CalculationFunctionListViewModel=ss.mkType(a,'tab.CalculationFunctionListViewModel',function(ni){this.$5=null;this.$4=null;this.$3=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$5=ni;this.$5.add_functionListUpdated(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_functionListUpdated(ss.mkdel(this,this.$2))})));this.$4=new spiff.ListViewModel([],0);this.$4.add_selectionChanged(ss.mkdel(this,this.$0));this.$4.add_submitSelection(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_selectionChanged(ss.mkdel(this,this.$0));this.$4.remove_submitSelection(ss.mkdel(this,this.$1))})));this.$2()},{add_selectionChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_selectionChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_submitSelection:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_submitSelection:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},get_model:function(){return this.$5},get_functions:function(){return this.$5.get_functions()},get_listViewModel:function(){return this.$4},dispose:function(){this.$3=tab.MiscUtil.dispose(this.$3);this.$4.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},$2:function(){this.$3=tab.MiscUtil.dispose(this.$3);this.$3=[];var ni=this.$5.get_functions();for(var nj=0,nk=ni.length;nj<nk;nj++){var nl=nj.toString();var nm=ni[nj];this.$3.push(spiff.ListItemViewModel.newListItem(nl,nm,false,false,false))}this.$4.update(this.$3)},selectFirstItem:function(){if(this.$4.get_collection().length>0){this.$4.selectItemAtIndex(0)}},$0:function(){var ni=null;var nj=this.$4.get_firstSelectedItem();if(ss.isValue(nj)){ni=nj.get_data()}this.raiseActionEvent$1(Object).call(this,this.$2$1,ni)},$1:function(){var ni=this.$4.get_firstSelectedItem();if(ss.isValue(ni)){var nj=ni.get_data();this.raiseActionEvent$1(Object).call(this,this.$2$2,nj)}},filter:function(ni,nj){this.$4.set_filter(function(nk,nl,nm){var nn=nk.get_data();if(ss.isValue(ni)&&!ss.contains(nn.funcGrps,ss.unbox(ni))){return false}return ss.isNullOrEmptyString(nj)||nn.name.toString().toLowerCase().indexOf(nj)>=0})}});var cG=global.tab.CalculationTitleAreaTemplate=ss.mkType(a,'tab.CalculationTitleAreaTemplate',function(){this.$1=null;this.$3=null;this.$2=null;this.$4=null;spiff.Template.call(this,$("\n<div class='tabCalcEditorTitleArea'>\n  <div class='tabCalcEditorCaptionContainer'></div>\n  <div class='tabCalcEditorDataSourceLabel'><div class='icon'></div><div class='labelText'></div></div>\n  <div class='tabCalcEditorECTButtonComponent'><div class='tab-analyticsassistant-highlighted'></div></div>\n</div>"));this.$1=this.getElementBySelector('.tabCalcEditorCaptionContainer');this.$3=this.getElementBySelector('.tabCalcEditorDataSourceLabel');this.$2=this.getElementBySelector('.icon');this.$4=this.getElementBySelector('.tabCalcEditorECTButtonComponent')},{get_captionContainer:function(){return this.$1},get_dataSourceLabel:function(){return this.$3},get_dataSourceLabelText:function(){return this.$3.find('.labelText')},get_dataSourceIcon:function(){return this.$2},get_ectButtonContainer:function(){return this.$4}});var cH=global.tab.CardContentView$1=ss.mkType(a,'tab.CardContentView$1',function(ni){var nj=ss.registerGenericClassInstance(cH,[ni],function(nk,nl){this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[ni]).call(this,nk,nl)},{add_scrollContentChanged:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_scrollContentChanged:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},get_scrollableContentPreferredHeight:null,setScrollableContentActualHeight:null,raiseScrollContentChanged:function(){if(ss.isValue(this.$3$1)){this.$3$1()}}},null,function(){return ss.makeGenericType(spiff.BaseView$1,[ni])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[ni]),ss.IDisposable,tab.IAppendableView,gR]});return nj});ss.initGenericClass(cH,1);var cI=global.tab.CardLayoutFactory=ss.mkType(a,'tab.CardLayoutFactory',null,null,{generate:function(){var ni={};ni['top']=tabBootstrap.ShelfConfigurations.getShelvesAtPosition('top').map(cI.$0);ni['left']=tabBootstrap.ShelfConfigurations.getShelvesAtPosition('left').map(cI.$0);ni['right']=[];ni['bottom']=[];return ni},$0:function(ni){return(ss.keyExists(cI.$2,ni.type)?cI.$2[ni.type]:'measureValues')}});var cJ=global.tab.CardOrientation=ss.mkEnum(a,'tab.CardOrientation',{vertical:0,horizontal:1});var cK=global.tab.CardView=ss.mkType(a,'tab.CardView',function(ni){this.$h=null;this.$i=[];this.$g=false;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[cL]).call(this,ni,new cM);this.get_viewModel().add_cardChanged(ss.mkdel(this,this.$a));this.get_viewModel().add_collapsedChanged(ss.mkdel(this,this.$c));this.get_viewModel().add_contentDropStateChanged(ss.mkdel(this,this.$8));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.get_dom().expandoTarget,ss.mkdel(this,this.$9)));this.$a(this.get_viewModel())},{add_cardContentChanged:function(ni){this.$3$1=ss.delegateCombine(this.$3$1,ni)},remove_cardContentChanged:function(ni){this.$3$1=ss.delegateRemove(this.$3$1,ni)},get_contentView:function(){return this.$h},get_dom:function(){return this.get_template()},dispose:function(){if(ss.isValue(this.get_viewModel())){this.get_viewModel().remove_cardChanged(ss.mkdel(this,this.$a));this.get_viewModel().remove_collapsedChanged(ss.mkdel(this,this.$c));this.get_viewModel().remove_contentDropStateChanged(ss.mkdel(this,this.$8))}this.$i.forEach(function(ni){ni.dispose()});ss.makeGenericType(spiff.BaseView$1,[cL]).prototype.dispose.call(this)},onAddedToDom:function(){if(ss.isValue(this.$h)){this.$h.onAddedToDom()}spiff.Widget.prototype.onAddedToDom.call(this)},$8:function(ni){var nj=false;var nk=false;switch(ni){case 1:{nj=true;break}case 2:{nk=true;break}}this.element.toggleClass('tabAuthCardDropInvited',nj);this.element.toggleClass('tabAuthCardDropNotValid',nk)},$c:function(ni){if(ni.get_isCollapsed()){this.get_dom().content.slideUp()}else{this.get_dom().content.slideDown()}this.$d();this.$f()},$9:function(ni){this.get_viewModel().toggleExpanded()},$d:function(){this.get_dom().expando.toggleClass('Closed',this.get_viewModel().get_isCollapsed());this.get_dom().expando.toggleClass('Open',!this.get_viewModel().get_isCollapsed())},$f:function(){var ni='';if(ss.isValue(this.get_viewModel().get_content())){ni=this.get_viewModel().get_content().get_title();if(this.get_viewModel().get_isCollapsed()&&!tab.MiscUtil.isNullOrEmpty$1(this.get_viewModel().get_content().get_collapsedTitleDetail())){ni=tab.Strings.AuthCardCollapsedTitle(ni,this.get_viewModel().get_content().get_collapsedTitleDetail())}}this.get_dom().label.text(ni)},$b:function(){if(ss.isValue(this.get_viewModel().get_content())){var ni=this.get_viewModel().get_content().get_cardBackgroundColor();if(ss.isValue(ni)){this.get_dom().labelArea.get(0).style.backgroundColor=ni}}},$e:function(){if(this.get_viewModel().get_hasIcon()){this.get_dom().icon.removeClass().addClass(this.get_viewModel().get_iconClass())}},$a:function(ni){if(this.get_viewModel().get_isVisible()){this.get_dom().domRoot.show()}else{this.get_dom().domRoot.hide()}var nj=ni.get_orientation()===0;this.get_dom().domRoot.toggleClass('tabAuthCardVertical',nj);this.get_dom().domRoot.toggleClass('tabAuthCardHorizontal',!nj);this.$d();if(this.get_viewModel().get_isCollapsible()){this.get_dom().expando.show();this.get_dom().expandoTarget.show()}else{this.get_dom().expando.hide();this.get_dom().expandoTarget.hide()}this.$e();this.$f();this.$b();var nk=spiff.Widget.getWidgets(this.get_dom().content.children(),null);for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.dispose()}if(ss.isValue(ni.get_content())){if(ss.isValue(this.$h)){this.$h.dispose()}this.$h=tab.ObjectRegistry.newView$1(ss.makeGenericType(cH,[tab.IViewModel])).call(null,ni.get_content().get_viewType(),[ni.get_content().get_viewModel()]);this.get_dom().content.append(this.$h.get_rootElement());if(this.addedToDom){this.$h.onAddedToDom()}if(ss.isValue(this.$3$1)){this.$3$1(this.$h)}this.$7(ni)}},$7:function(ni){if(this.$g||ss.isNullOrEmptyString(ni.get_content().get_name())||ss.compareStrings(ni.get_content().get_name(),'none',true)===0){return}if(ss.referenceEquals(ss.getInstanceType(this.get_viewModel().get_content()),lw)){EventUtils.DragDropManager.attachDropTarget(this.get_dom().dropTarget,ni.get_content())}this.get_dom().domRoot.addClass('tabAuthCardType-'+ni.get_content().get_name());this.$g=true}});var cL=global.tab.CardViewModel=ss.mkType(a,'tab.CardViewModel',function(){this.$5=0;this.$4=false;this.$3=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this)},{add_cardChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_cardChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_collapsedChanged:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_collapsedChanged:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_contentDropStateChanged:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_contentDropStateChanged:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},get_orientation:function(){return this.$5},set_orientation:function(ni){this.$5=ni;this.handleCardChanged()},get_isVisible:function(){return ss.isValue(this.$3)&&this.$3.get_isVisible()},get_isCollapsible:function(){return this.$5===0},get_isCollapsed:function(){return this.$4},set_isCollapsed:function(ni){this.$4=ni;this.handleCollapsedChanged()},get_hasIcon:function(){return this.$5===1},get_iconClass:function(){var ni=this.$3;var nj=this.$0(ni.get_shelfType());return ss.formatString('tabAuthCardIcon {0}',nj)},get_shelfViewModel:function(){return this.$3},get_content:function(){return this.$3},set_content:function(ni){if(ss.isValue(this.$3)){this.$3.remove_dropStateChanged(ss.mkdel(this,this.$1));this.$3.remove_visibleChanged(ss.mkdel(this,this.$2))}this.$3=ni;if(ss.isValue(this.$3)){this.$3.add_dropStateChanged(ss.mkdel(this,this.$1));this.$3.add_visibleChanged(ss.mkdel(this,this.$2))}this.handleCardChanged()},toggleExpanded:function(){if(!this.get_isCollapsible()){return}this.set_isCollapsed(!this.$4)},handleCardChanged:function(){if(ss.isValue(this.$2$1)){this.$2$1(this)}},handleCollapsedChanged:function(){if(ss.isValue(this.$2$2)){this.$2$2(this)}},$1:function(ni){if(ss.isNullOrUndefined(this.$2$3)){return}this.$2$3(ni)},$2:function(){this.handleCardChanged()},$0:function(ni){switch(ni){case'rows-shelf':{return'Rows'}case'columns-shelf':{return'Columns'}default:{return''}}}});var cM=global.tab.CardViewTemplate=ss.mkType(a,'tab.CardViewTemplate',function(){this.labelArea=null;this.icon=null;this.label=null;this.content=null;this.expando=null;this.expandoTarget=null;this.dropTarget=null;spiff.Template.call(this,$(cM.template));this.labelArea=this.getElementBySelector('.tabAuthCardLabelArea');this.icon=this.getElementBySelector('.tabAuthCardIcon');this.label=this.getElementBySelector('.tabAuthCardLabel');this.content=this.getElementBySelector('.tabAuthCardContent');this.expando=this.getElementBySelector('.tabAuthCardExpando');this.expandoTarget=this.getElementBySelector('.tabAuthCardExpandoTarget');this.dropTarget=this.domRoot});var cN=global.tab.CategoricalBinEditProxy=ss.mkType(a,'tab.CategoricalBinEditProxy');var cO=global.tab.CategoricalColorEditorComponent=ss.mkType(a,'tab.CategoricalColorEditorComponent',function(ni,nj){React.Component.call(this,ni,nj);this.state=this.$2(this.props)},{componentWillReceiveProps:function(ni){this.setState(this.$2(ni))},$2:function(ni){return{selectedPalette:ni.allPalettes[ni.currentPaletteIndex],selectedLegendItemIndexes:ni.selectedLegendItemIndexes}},render:function(){var ni=spiff.ReactElement.div$1('tab-categoricalColorEditorDialogContent',[spiff.ReactElement.div$1('tab-colorFieldLegendContainer',[this.$7()]),spiff.ReactElement.div$1('tab-colorPaletteSelectorContainer',[this.$9()])]);return ni},$9:function(){var ni=this.state.selectedPalette;var nj=this.$4(ni.colors);var nk=spiff.ReactElement.div$1('tab-colorPaletteSelector',[spiff.ReactElement.div$1('tab-ColorFieldLegendTitle',[tab.Strings.TabAuthCategoricalColorEditorSelectPalette]),spiff.ReactElement.div$1('tab-ColorFieldLegendDropdown',[this.$8()]),spiff.ReactElement.div$1('tab-ColorPaletteContainer',[nj]),spiff.DOMElements.div({style:{display:'flex',justifyContent:'flex-end'}},React.createElement(SharedWidgets.ButtonWidget,{buttonType:2,handleClick:ss.mkdel(this,function(nl){this.$0()}),testId:'assignPaletteButton',children:tab.Strings.TabAuthCategoricalColorEditorAssignPalette,className:'tb-assignPaletteButton'}))]);return nk},$4:function(ni){var nj=spiff.ReactComponentExtensions.generateUniqueKeys(Object).call(null,ni,[]);return _.map(ni,ss.mkdel(this,function(nk,nl){var nm=spiff.DOMElements.div;var nn=new EventUtils.EventHandleSpec;nn.tap=ss.mkdel(this,function(no){this.$c(nk)});return nm({className:'tab-PaletteItemEntry',key:nj[nl]},EventUtils.EventForwarder.div(nn,{className:'tab-ColorPaletteSwatch',style:{backgroundColor:nk}}))}))},$8:function(){var ni=React.createElement(spiff.DropdownComponent,{styleClass:'tab-ColorPaletteDropdown',resetSelector:true,getDesiredHeight:function(nj){return 350},renderButton:ss.mkdel(this,function(){return React.createElement(spiff.TextDropdownButtonComponent,{selectionIconClass:'tabAuthPalette-small-'+this.state.selectedPalette.colorPaletteId,selectionText:this.state.selectedPalette.colorPaletteName})})},this.$a());return ni},$a:function(){return React.createElement(spiff.SelectableButtonGroupComponent,this.$1())},$1:function(){var ni=new Object;ni.borders=false;ni.allOption=false;ni.items=_.map(this.props.allPalettes,ss.mkdel(this,function(nj){var nk=new spiff.SelectableButtonGroupItem;nk.label=nj.colorPaletteName;nk.getCustomContentBefore=ss.mkdel(this,function(){return[spiff.DOMElements.div({key:nj.colorPaletteId.toString(),className:'tab-AuthPaletteIcon tabAuthPalette-small-'+nj.colorPaletteId})]});return nk}));ni.selection=spiff.SingleSelectGroupSelection.buildSingleSelectGroupSelection$1(Object).call(null,this.props.allPalettes,ss.mkdel(this,function(nj){return ss.equals(nj,this.state.selectedPalette)}));ni.showApplyAndCancelButtons=false;ni.onSelectionChanged=ss.mkdel(this,this.$6);return ni},$7:function(){var ni=this.$3(this.props.fieldColors,this.state.selectedLegendItemIndexes);var nj=spiff.ReactElement.div$1('tab-colorFieldLegend',[spiff.ReactElement.div$1('tab-ColorFieldLegendTitle',[tab.Strings.TabAuthCategoricalColorEditorSelectItem]),spiff.ReactElement.div$1('tab-ColorFieldLegendItems',[ni]),spiff.DOMElements.div({style:{display:'flex',justifyContent:'flex-start'}},React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:ss.mkdel(this,function(nk){this.$b()}),testId:'resetPaletteButton',children:tab.Strings.TabAuthCategoricalColorEditorReset,className:'tb-resetPaletteButton'}))]);return nj},$3:function(ni,nj){return _.map(ni,ss.mkdel(this,function(nk,nl){var nm='tab-ColorFieldLegendItemName'+(ss.contains(nj,nl)?' tab-ColorFieldLegendItemName-selected':'');var nn=React.createRef();return spiff.DOMElements.div({onClick:ss.mkdel(this,function(no){nn.current.toggle(false);this.$5(no,nl)}),onDoubleClick:ss.mkdel(this,function(no){this.$d(nl,true);nn.current.toggle(true)}),className:'tab-legendItemEntry tab-legendItemIdx'+nl,key:nk.text.toString()+nl,title:nk.text},React.createElement(dQ,{color:tab.ColorModel.fromColorCode(nk.color).toRgbHex(),label:nk.text,onConfirm:ss.mkdel(this,function(no){this.$c(no)}),popoverRef:nn,triggerElement:spiff.DOMElements.div({className:'tab-ColorFieldLegendItemSwatch',style:{backgroundColor:nk.color},key:nk.text.toString()+nk.color.toString()+nl})}),spiff.DOMElements.div({className:nm,key:nk.text.toString()+nl+'-name'},nk.text))}))},$6:function(ni){this.$e(ni)},$e:function(ni){var nj=ni.mapSelected(Object).call(ni,ss.mkdel(this,function(nk){return this.props.allPalettes[nk]}))[0];this.setState({selectedPalette:nj,selectedLegendItemIndexes:this.state.selectedLegendItemIndexes});this.props.setSelectedPaletteIndex(ni.mapSelected(ss.Int32).call(ni,function(nk){return nk})[0])},$0:function(){this.props.assignPalette(this.state.selectedPalette.colorPaletteId)},$b:function(){this.props.resetPalette()},$5:function(ni,nj){if(ni.detail>1){return}var nk=ni.target.classList;var nl=!ss.contains(this.state.selectedLegendItemIndexes,nj)&&(nk.contains('tab-ColorFieldLegendItemSwatch')||nk.contains('tab-ColorFieldLegendItemName'));this.$d(nj,nl)},$d:function(ni,nj){var nk=(nj?[ni]:[]);this.setState({selectedLegendItemIndexes:nk,selectedPalette:this.state.selectedPalette});this.props.setSelectedLegendItemIndexes(nk)},$c:function(ni){if(this.state.selectedLegendItemIndexes.length===0){return}this.props.setItemColor(ni)}});var cP=global.tab.CategoricalColorEditorDialog=ss.mkType(a,'tab.CategoricalColorEditorDialog',function(){React.Component.call(this)},{removeFromDOM:function(){cP.$1=null;var ni=cP.$0;cP.$0=null;if(ss.isValue(ni)){ReactDOM.unmountComponentAtNode(ni)}},showOrUpdate:function(ni,nj){var nk;if(ss.isNullOrUndefined(cP.$1)){cP.$0=document.createElement('div');nk={title:tab.Strings.TabAuthColorEditorDialogTitle(ni.fieldDisplayName),onClose:ss.mkdel(this,function(){this.removeFromDOM();if(!ss.staticEquals(nj,null)){nj()}}),editorProps:ni}}else{nk={title:tab.Strings.TabAuthColorEditorDialogTitle(ni.fieldDisplayName),onClose:cP.$1.props.onClose,editorProps:ni}}cP.$1=React.createElement(cP,nk);ReactDOM.render(cP.$1,cP.$0)},update:function(){this.render()},$0:function(){var ni=React.createElement(cO,this.props.editorProps);var nj={testId:'tab-categoricalColorEditor',isModal:true,type:0,isGlassTransparent:true,showCloseButton:true,title:this.props.title,positioningBehavior:2,dialogWidth:560,showFooter:false,shouldReturnFocusOnClose:false,children:ni,onCloseRequest:this.props.onClose,shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile,zIndex:1000,dialogBodyStyle:{overflow:''}};return nj},render:function(){var ni=this.$0();return React.createElement(SharedWidgets.DialogWidget,ni)}});var cQ=global.tab.CategoricalColorEditorDialogViewModel=ss.mkType(a,'tab.CategoricalColorEditorDialogViewModel',function(ni,nj){this.$3=null;this.$2=null;this.$4=null;spiff.BaseViewModel.call(this);this.$3=ni;this.$2=nj;ni.add_showOrUpdateDialog(ss.mkdel(this,this.$1));this.disposables.add(ss.mkdel(this,function(){this.$2.removeFromDOM();ni.remove_showOrUpdateDialog(ss.mkdel(this,this.$1))}))},{get_fieldDisplayName:function(){return this.$3.get_fieldDisplayNames().join(', ')},get_currentPaletteIndex:function(){var ni=this.$4;if(ss.isNullOrUndefined(ni)){ni=this.$3.get_currentPaletteIndex()}return ni},$1:function(){var ni={fieldDisplayName:this.get_fieldDisplayName(),allPalettes:this.$3.get_availablePalettes(),fieldColors:this.$3.get_itemColors(),currentPaletteIndex:this.get_currentPaletteIndex(),selectedLegendItemIndexes:this.$3.get_selectedLegendItemIndexes(),assignPalette:ss.mkdel(this,this.assignPalette),resetPalette:ss.mkdel(this,this.resetPalette),setItemColor:ss.mkdel(this,this.setItemColor),setSelectedLegendItemIndexes:ss.mkdel(this,this.setSelectedLegendItemIndexes),setSelectedPaletteIndex:ss.mkdel(this,this.setSelectedPaletteIndex)};this.$2.showOrUpdate(ni,ss.mkdel(this,this.$0))},assignPalette:function(ni){var nj=new tab.AssignCategoricalColorPaletteCmd;nj.set_uiBlocking('afterDelay');nj.set_controllerID(this.$3.get_controllerId());nj.set_colorPaletteID(ni);nj.set_applyColors(true);nj.invoke()},resetPalette:function(){this.$4=null;var ni=new tab.ResetCategoricalColorMapCmd;ni.set_uiBlocking('afterDelay');ni.set_controllerID(this.$3.get_controllerId());ni.set_applyColors(true);ni.invoke()},setItemColor:function(ni){if(this.$3.get_selectedLegendItemIndexes().length===0){return}if(ss.staticEquals(this.$3.get_itemColors()[this.$3.get_selectedLegendItemIndexes()[0]].color,ni)){return}var nj=new tab.SetCategoricalLegendItemColorCmd;nj.set_uiBlocking('afterDelay');nj.set_controllerID(this.$3.get_controllerId());nj.set_color(ni);nj.invoke()},setSelectedLegendItemIndexes:function(ni){var nj=new tab.SetSelectedLegendItemsCmd;nj.set_controllerID(this.$3.get_controllerId());nj.set_legendIndexes(ni);nj.invoke().fail(ss.mkdel(this,function(nk){this.$1()}))},setSelectedPaletteIndex:function(ni){this.$4=ni},$0:function(){this.$4=null;var ni=new tab.ReleaseComponentCmd;ni.set_componentID(this.$3.get_controllerId());ni.invoke()}});var cR=global.tab.CategoricalColorOptionTemplate=ss.mkType(a,'tab.CategoricalColorOptionTemplate',function(){this.colorEditButtonContainer=null;this.colorPaletteSelectionControlContainer=null;this.transparencyControlContainer=null;this.colorEffectsContainer=null;spiff.Template.call(this,$("<div class='tabAuthCategoricalColorOptionContent'>\n            <div class='tabColorEditButtonContainer'></div>\n            <div class='tabColorPalettePickerContainer'></div>\n            <div class='tabAuthDivider'></div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"));this.colorEditButtonContainer=this.getElementBySelector('.tabColorEditButtonContainer');this.colorPaletteSelectionControlContainer=this.getElementBySelector('.tabColorPalettePickerContainer');this.transparencyControlContainer=this.getElementBySelector('.tabAuthTransparencyControlContainer');this.colorEffectsContainer=this.getElementBySelector('.tabColorEffectsContainer')});var cS=global.tab.CategoricalColorOptionView=ss.mkType(a,'tab.CategoricalColorOptionView',function(ni){this.$a=null;ss.makeGenericType(spiff.BaseView$1,[cT]).call(this,ni,new cR);this.$a=this.get_template()},{$8:function(){var ni=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[cZ,cX,Object])).call(null,[this.get_viewModel().get_colorOptionEditButtonViewModel()]);ni.addToDom(this.$a.colorEditButtonContainer);this.disposables.add$1(ni)},$9:function(){var ni=tab.ObjectRegistry.newView$1(dA).call(null,dA,[this.get_viewModel().get_colorTransparencyControlViewModel()]);ni.addToDom(this.$a.transparencyControlContainer);this.disposables.add$1(ni)},$7:function(){var ni=tab.ObjectRegistry.newView(de).call(null,[this.get_viewModel().get_colorOptionEffectsViewModel()]);ni.addToDom(this.$a.colorEffectsContainer);this.disposables.add$1(ni)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$8();this.$9();this.$7()}});var cT=global.tab.CategoricalColorOptionViewModel=ss.mkType(a,'tab.CategoricalColorOptionViewModel',function(ni){this.$3=null;dm.call(this,ni);this.$3=new cZ(this.get_marksCardTabEncodingModel(),0,true)},{get_selectedColorPalette:function(){if(ss.isValue(this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().categoricalColor)){return this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().categoricalColor.colorPaletteId}return''},set_selectedColorPalette:function(ni){tab.PaneClientCommands.setCatColorPalette(this.get_marksCardTabEncodingModel(),ni)},get_viewType:function(){return cS},get_colorOptionEditButtonViewModel:function(){return this.$3},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},dispose:function(){this.$3.dispose();dm.prototype.dispose.call(this)},updateUberPopupViewModel:function(ni){}});var cU=global.tab.CloseAuthoringCommand=ss.mkType(a,'tab.CloseAuthoringCommand',function(){tab.CloseAuthoringCmd.call(this)},{get_isVisible:function(){return!(tsConfig.is_mobile_app||tabBootstrap.Affordances.isOff('closeWorkbook'))},invoke:function(){return this.fireAndForget(function(){bn.exitAuthoring(tab.ApplicationModel.get_instance().get_workbook())})}});var cV=global.tab.CloseDataSourceErrorDialog=ss.mkType(a,'tab.CloseDataSourceErrorDialog',function(){React.Component.call(this)},{render:function(){return React.createElement(SharedWidgets.DialogWidget,{testId:'tab-closeDataSourceErrorDialog',isModal:true,type:0,isGlassTransparent:false,showCloseButton:true,title:tab.Strings.CloseDataSourceErrorDialogTitle,positioningBehavior:0,dialogWidth:600,showFooter:true,shouldReturnFocusOnClose:false,onCloseRequest:this.props.onClose,zIndex:1000,children:spiff.ReactElement.div$1('tab-closeDataSourceErrorDialogContent',[spiff.ReactElement.div$1('tab-errorMessage',[tab.Strings.CloseDataSourceErrorDialogMessage(this.props.dataSourceName)]),spiff.ReactElement.br(null),spiff.ReactElement.div$1('tab-sheetNamesContainer',[_.map(this.props.sheetNames,function(ni){return spiff.ReactElement.div$1('tab-sheetName',[ni])})]),spiff.ReactElement.br(null),spiff.ReactElement.div$1('tab-errorMessageEpilogue',[tab.Strings.CloseDataSourceErrorDialogEpilogue])]),footerContent:React.createElement(SharedWidgets.DialogFooterButtonsWidget,{buttons:[{handleClick:ss.mkdel(this,function(ni){this.props.onClose()}),buttonType:2,testId:'OK',children:tab.Strings.DialogButtonOK,disabled:false}]})})}},{show:function(ni,nj){var nk=document.createElement('div');ReactDOM.render(React.createElement(cV,{dataSourceName:ni,sheetNames:nj,onClose:function(){_.defer(function(){ReactDOM.unmountComponentAtNode(nk)})}}),nk)}});var cW=global.tab.CloseDataSourceErrorDialogViewModel=ss.mkType(a,'tab.CloseDataSourceErrorDialogViewModel',function(ni){this.$1=null;spiff.BaseViewModel.call(this);this.$1=ni;ni.add_newError(ss.mkdel(this,this.$0));this.disposables.add(ss.mkdel(this,function(){ni.remove_newError(ss.mkdel(this,this.$0))}))},{$0:function(){cV.show(this.$1.get_dataSourceName(),this.$1.get_sheetNames())}});var cX=global.tab.ColorOptionEditButtonComponent=ss.mkType(a,'tab.ColorOptionEditButtonComponent',function(){React.Component.call(this)},{render:function(){var ni=React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:this.props.openColorEditDialog,testId:'tabColorEdit',children:tab.Strings.TabAuthColorEditButton,disabled:!this.props.buttonEnabled,title:this.props.tooltip});return spiff.DOMElements.div({className:'tabColorEditButtonControl'},spiff.DOMElements.div({className:'tabColorEditButtonHolder'},ni))}});var cY=global.tab.ColorOptionEditButtonType=ss.mkEnum(a,'tab.ColorOptionEditButtonType',{categorical:0,quantitative:1});var cZ=global.tab.ColorOptionEditButtonViewModel=ss.mkType(a,'tab.ColorOptionEditButtonViewModel',function(ni,nj,nk){this.$5=false;this.$6=null;this.$8=0;this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$6=ni;this.$8=nj;this.$5=nk;this.$7=(this.$5?null:tab.Strings.AuthColorEditingDisabled)},{createInitialProps:function(){return{openColorEditDialog:ss.mkdel(this,this.$3),buttonEnabled:this.$5,tooltip:this.$7}},createUpdatedProps:function(){if(this.get_props().buttonEnabled!==this.$5){return{buttonEnabled:this.$5}}else{return null}},$4:function(ni){this.$5=ni;this.incrementProps()},$3:function(ni){var nj;this.$4(false);if(this.$8===0){var nk=new tab.GetWebCategoricalColorDialogCmd;nk.set_fieldNames(this.$6.get_colorEncodingDropdown().encodingFieldVector);nj=nk.invoke()}else{var nl=new tab.GetWebQuantitativeColorDialogCmd;nl.set_fieldNames(this.$6.get_colorEncodingDropdown().encodingFieldVector);nj=nl.invoke()}nj.always([ss.mkdel(this,function(){this.$4(true)})])}});var da=global.tab.ColorOptionEffectComboBoxTemplate=ss.mkType(a,'tab.ColorOptionEffectComboBoxTemplate',function(){this.name=null;this.colorRule=null;this.button=null;spiff.Template.call(this,$("<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n            <div class='tabComboBoxNameContainer tab-ctrl-formatted'>\n                <span class='tabComboBoxName'></span>\n                <div class='tabComboBoxColorRule'></div>\n            </div>\n            <div class='tabComboBoxButtonHolder'>\n                <span class='tabComboBoxButton'></span>\n            </div>\n        </span>"));this.name=this.getElementBySelector('.tabComboBoxName');this.colorRule=this.getElementBySelector('.tabComboBoxColorRule');this.button=this.getElementBySelector('.tabComboBoxButtonHolder')});var db=global.tab.ColorOptionEffectComboBoxView=ss.mkType(a,'tab.ColorOptionEffectComboBoxView',function(ni){this.$a=null;this.$9=null;ss.makeGenericType(spiff.BaseView$1,[dc]).call(this,ni,new da);this.$a=this.get_template();this.$a.domRoot.addClass(spiff.ComboBoxView.classesForTheme[3]);this.$a.domRoot.addClass(spiff.ComboBoxView.noIconClass);this.get_viewModel().add_stateUpdated(ss.mkdel(this,this.$8));this.$8();this.$9=spiff.TableauClickHandler.targetAndClick(this.$a.domRoot[0],ss.mkdel(this,this.$7));this.$9.set_stopPropagationOnEvent(false);this.disposables.add$1(this.$9)},{$7:function(){if(!this.get_viewModel().get_enabled()){return}var ni=ss.mkdel(this,function(){return this.$a.domRoot});this.get_viewModel().clicked(ni)},$8:function(){if(this.get_viewModel().get_enabled()){this.$a.domRoot.toggleClass(spiff.ComboBoxView.disabledClass,false);if(this.get_viewModel().get_isAutoSelected()){this.$a.name.show();this.$a.colorRule.hide();this.$a.name.text(tab.Strings.AuthColorPaletteAutomatic)}else if(this.get_viewModel().get_isNoneSelected()){this.$a.name.show();this.$a.colorRule.hide();this.$a.name.text(tab.Strings.AuthColorPaletteNone)}else{this.$a.name.hide();this.$a.colorRule.show();this.$a.colorRule.css({'background-color':this.get_viewModel().get_selectedColor()})}}else{this.$a.domRoot.toggleClass(spiff.ComboBoxView.disabledClass,true);this.$a.name.show();this.$a.name.text('');this.$a.colorRule.hide()}}});var dc=global.tab.ColorOptionEffectComboBoxViewModel=ss.mkType(a,'tab.ColorOptionEffectComboBoxViewModel',function(ni){this.$0=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$0=ni},{add_stateUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_stateUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_comboClicked:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_comboClicked:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},get_enabled:function(){return this.$0.isEnabled},get_isAutoSelected:function(){return this.$0.isAuto},get_isNoneSelected:function(){return this.$0.isNone},get_selectedColor:function(){return this.$0.color},updateStyleSpec:function(ni){this.$0=ni},onStyleSpecUpdated:function(){this.$2$1()},clicked:function(ni){this.raiseActionEvent$1(Function).call(this,this.$2$2,ni)}});var dd=global.tab.ColorOptionEffectsTemplate=ss.mkType(a,'tab.ColorOptionEffectsTemplate',function(){this.borderColorLabel=null;this.borderColorButton=null;this.haloColorLabel=null;this.haloColorButton=null;spiff.Template.call(this,$("<div class='tabAuthMarksCardColorEffectsContainer'>\n            <div class='tabBorderColorLabel'></div>\n            <div class='tabBorderColorButtonArea'></div>\n            <div class='tabHaloColorLabel'></div>\n            <div class='tabHaloColorButtonArea'></div>\n        </div>"));this.borderColorLabel=this.getElementBySelector('.tabBorderColorLabel');this.borderColorButton=this.getElementBySelector('.tabBorderColorButtonArea');this.haloColorLabel=this.getElementBySelector('.tabHaloColorLabel');this.haloColorButton=this.getElementBySelector('.tabHaloColorButtonArea')});var de=global.tab.ColorOptionEffectsView=ss.mkType(a,'tab.ColorOptionEffectsView',function(ni){this.$7=null;ss.makeGenericType(spiff.BaseView$1,[df]).call(this,ni,new dd);this.$7=this.get_template();this.$7.borderColorLabel.text(tab.Strings.TabAuthMarksColorBorderLabel);this.$7.borderColorLabel.toggleClass('disabled',!this.get_viewModel().get_borderModel().isEnabled);this.$7.haloColorLabel.text(tab.Strings.TabAuthMarksColorHaloLabel);this.$7.haloColorLabel.toggleClass('disabled',!this.get_viewModel().get_haloModel().isEnabled);var nj=tab.ObjectRegistry.newView(db).call(null,[ni.get_borderComboModel()]);this.$7.borderColorButton.append(nj.element);var nk=tab.ObjectRegistry.newView(db).call(null,[ni.get_haloComboModel()]);this.$7.haloColorButton.append(nk.element);this.disposables.add$1(nj);this.disposables.add$1(nk)});var df=global.tab.ColorOptionEffectsViewModel=ss.mkType(a,'tab.ColorOptionEffectsViewModel',function(ni){this.$3=null;this.$4=null;this.$1=null;this.$2=null;spiff.BaseViewModel.call(this);this.$3=ni},{get_marksCardTabEncodingModel:function(){return this.$3},get_borderComboModel:function(){if(this.$1===null){this.$1=new dc(this.get_borderModel());this.$1.add_comboClicked(ss.mkdel(this,this.borderColorComboClicked))}return this.$1},get_haloComboModel:function(){if(this.$2===null){this.$2=new dc(this.get_haloModel());this.$2.add_comboClicked(ss.mkdel(this,this.haloColorComboClicked))}return this.$2},get_borderModel:function(){return this.$3.get_colorEncodingDropdown().marksColorUberEffects.borderStyleSpec},get_haloModel:function(){return this.$3.get_colorEncodingDropdown().marksColorUberEffects.haloStyleSpec},borderColorComboClicked:function(ni){var nj=new dg(this.$3,this.get_borderModel());nj.add_styleSpecUpdated(ss.mkdel(this.$1,this.$1.onStyleSpecUpdated));this.$1.updateStyleSpec(this.get_borderModel());var nk=new dj(this.$3,this.get_borderModel(),nj);this.$0(nk,ni)},haloColorComboClicked:function(ni){var nj=new dh(this.$3,this.get_haloModel());nj.add_styleSpecUpdated(ss.mkdel(this.$2,this.$2.onStyleSpecUpdated));this.$2.updateStyleSpec(this.get_haloModel());var nk=new dj(this.$3,this.get_haloModel(),nj);this.$0(nk,ni)},$0:function(ni,nj){if(ss.isValue(this.$4)){if(this.$4.get_relativeElement().is(nj())){return}else{this.dismissPopup()}}this.$4=spiff.UberPopupViewModel.createForContent(ni,nj,null,true);this.$4.options.glassZIndex=spiff.UberPopupShowOptions.startingGlassZIndex+2;this.$4.options.horizontalAlign=1;this.$4.add_hidden(ss.mkdel(this,function(){this.$4=null}));this.$4.show()},dismissPopup:function(){if(ss.isValue(this.$4)){this.$4.hide(false);this.$4=null}}});var dg=global.tab.ColorOptionEffectsViewModel$BorderColorUpdater=ss.mkType(a,'tab.ColorOptionEffectsViewModel$BorderColorUpdater',function(ni,nj){dl.call(this,ni,nj)},{callPaneClientCommand:function(ni,nj,nk){tab.PaneClientCommands.setMarksBorderColor(this.marksCardTabEncodingModel,nk,ni,nj)}});var dh=global.tab.ColorOptionEffectsViewModel$HaloColorUpdater=ss.mkType(a,'tab.ColorOptionEffectsViewModel$HaloColorUpdater',function(ni,nj){dl.call(this,ni,nj)},{callPaneClientCommand:function(ni,nj,nk){tab.PaneClientCommands.setMarksHaloColor(this.marksCardTabEncodingModel,nk,ni,nj)}});var di=global.tab.ColorOptionEffectUberView=ss.mkType(a,'tab.ColorOptionEffectUberView',function(ni){this.$c=null;this.$b=null;ss.makeGenericType(spiff.BaseView$1,[dj]).call(this,ni,new dk);this.$c=this.get_template();this.$b=tab.ObjectRegistry.newView(dx).call(null,[this.get_viewModel().get_colorPicker()]);this.$b.addToDom(this.$c.colorPicker);this.get_viewModel().add_stateUpdated(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_stateUpdated(ss.mkdel(this,this.$9))})));this.$a()},{$9:function(){if(this.get_viewModel().get_isAutoSelected()||this.get_viewModel().get_isNoneSelected()){this.$b.clearSelectedColor()}else{this.$b.updateSelectedColor(this.get_viewModel().get_color())}this.$a()},$a:function(){var ni=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nm){this.$7()}),buttonType:3,testId:'tabColorEffectAutoButton',key:'tabColorEffectAutoButton',children:tab.Strings.AuthColorPaletteAutomatic,selected:this.get_viewModel().get_isAutoSelected(),style:{width:'100%'}});var nj=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nm){this.$8()}),buttonType:3,testId:'tabColorEffectNoneButton',key:'tabColorEffectNoneButton',children:tab.Strings.AuthColorPaletteNone,selected:this.get_viewModel().get_isNoneSelected(),style:{width:'100%'}});var nk=React.createElement(SharedWidgets.ButtonWidget,{handleClick:null,buttonType:3,testId:'tabColorEffectMoreColorsButton',key:'tabColorEffectMoreColorsButton',children:tab.Strings.AuthColorPaletteMoreColors,className:'tabColorEffectMoreColorsButton',style:{width:'100%'}});var nl=React.createElement(dQ,{label:tab.Strings.AuthCustomHexColorLabel,onConfirm:ss.mkdel(this,function(nm){this.get_viewModel().onMoreColorAdded(nm)}),popoverRef:React.createRef(),triggerElement:nk});ReactDOM.render(ni,this.$c.autoButton.get(0));ReactDOM.render(nj,this.$c.noneButton.get(0));ReactDOM.render(nl,this.$c.moreColorsButtonArea.get(0))},$7:function(){this.get_viewModel().onAutoSelected()},$8:function(){this.get_viewModel().onNoneSelected()}});var dj=global.tab.ColorOptionEffectUberViewModel=ss.mkType(a,'tab.ColorOptionEffectUberViewModel',function(ni,nj,nk){this.$4=null;this.$5=null;this.$2=null;this.$1=null;this.$3=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode('#000000'),0);this.$2$1=null;spiff.BaseViewModel.call(this);this.$4=ni;this.$5=nj;this.$1=nk;this.$2=new fQ(this.$4,this.$1);if(!this.get_isAutoSelected()&&!this.get_isNoneSelected()){this.$2.set_selectedColor(tab.ColorModel.fromColorCode(this.$5.color))}this.$1.add_styleSpecUpdated(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$1.remove_styleSpecUpdated(ss.mkdel(this,this.$0))})));this.$1.allowUpdates()},{add_stateUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_stateUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_isAutoSelected:function(){return this.$5.isAuto},get_isNoneSelected:function(){return this.$5.isNone},get_color:function(){return tab.ColorModel.fromColorCode(this.$5.color)},get_colorPicker:function(){return this.$2},get_viewType:function(){return di},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},dispose:function(){this.$2.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},updateUberPopupViewModel:function(ni){},onAutoSelected:function(){if(!this.get_isAutoSelected()){this.$1.update(true,false,this.$3)}},onNoneSelected:function(){if(!this.get_isNoneSelected()){this.$1.update(false,true,this.$3)}},onMoreColorAdded:function(ni){this.$1.update(false,false,tab.ColorModel.fromColorCode(ni))},$0:function(){this.$2$1()}});var dk=global.tab.ColorOptionEffectUberViewTemplate=ss.mkType(a,'tab.ColorOptionEffectUberViewTemplate',function(){this.autoButton=null;this.noneButton=null;this.colorPicker=null;this.moreColorsButtonArea=null;spiff.Template.call(this,$("<div class='tabAuthColorOptionEffectUberContainer'>\n            <div class='tabAuthColorOptionEffectAutoButton'></div>\n            <div class='tabAuthColorOptionEffectNoneButton'></div>\n            <div class='tabAuthColorOptionEffectColorPicker'></div>\n            <div class='tabAuthColorOptionsEffectMoreButton'></div>\n        </div>"));this.autoButton=this.getElementBySelector('.tabAuthColorOptionEffectAutoButton');this.noneButton=this.getElementBySelector('.tabAuthColorOptionEffectNoneButton');this.colorPicker=this.getElementBySelector('.tabAuthColorOptionEffectColorPicker');this.moreColorsButtonArea=this.getElementBySelector('.tabAuthColorOptionsEffectMoreButton')});var dl=global.tab.ColorOptionEffectUpdater=ss.mkType(a,'tab.ColorOptionEffectUpdater',function(ni,nj){this.marksCardTabEncodingModel=null;this.$1=null;this.$0=false;this.$1$1=null;this.marksCardTabEncodingModel=ni;this.$1=nj;this.$0=false},{add_styleSpecUpdated:function(ni){this.$1$1=ss.delegateCombine(this.$1$1,ni)},remove_styleSpecUpdated:function(ni){this.$1$1=ss.delegateRemove(this.$1$1,ni)},allowUpdates:function(){this.$0=true},update:function(ni,nj,nk){if(!this.$0){return}if(this.$1.isAuto===ni&&this.$1.isNone===nj&&ss.referenceEquals(this.$1.color,nk.toRgba())){return}this.$1.isAuto=ni;this.$1.isNone=nj;this.$1.color=nk.toRgba();this.$1$1();this.callPaneClientCommand(ni,nj,nk)},callPaneClientCommand:null});var dm=global.tab.ColorOptionViewModel=ss.mkType(a,'tab.ColorOptionViewModel',function(ni){this.$1=null;this.$2=null;this.$0=null;spiff.BaseViewModel.call(this);this.$1=ni;this.$2=new dB(this.$1);this.$0=new df(this.$1);this.$1.add_newMarksCardTabEncoding(ss.mkdel(this,this.handleUpdatedMarksCardTabEncoding));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$1.remove_newMarksCardTabEncoding(ss.mkdel(this,this.handleUpdatedMarksCardTabEncoding))})))},{get_marksCardTabEncodingModel:function(){return this.$1},get_colorTransparencyControlViewModel:function(){return this.$2},get_colorOptionEffectsViewModel:function(){return this.$0},handleUpdatedMarksCardTabEncoding:function(){},dispose:function(){this.$2.dispose();this.$0.dispose();spiff.BaseViewModel.prototype.dispose.call(this)}});var dn=global.tab.ColorPaletteGroup=ss.mkType(a,'tab.ColorPaletteGroup',function(ni){this.paletteItems=null;this.paletteItems=_.map(ni,function(nj){return new dp(nj)})});var dp=global.tab.ColorPaletteItem=ss.mkType(a,'tab.ColorPaletteItem',function(ni){this.colorPaletteId=null;this.colorPaletteName=null;this.type=null;this.colors=null;this.colorPaletteId=ni.colorPaletteId;this.colorPaletteName=ni.colorPaletteName;this.type=ni.colorPaletteType;this.colors=ni.colors});var dq=global.tab.ColorPalettePageTemplate=ss.mkType(a,'tab.ColorPalettePageTemplate',function(){this.automaticPalette=null;this.paletteColumns=null;this.paletteColumnList=null;spiff.Template.call(this,$("<span class='tabColorPalettePage'>\n    <div class='tabColorSpecialPalette tabColorAutomaticPalette tabColorPalette'>\n        <div class='tabPaletteBorder'></div>\n    </div>\n    <div class='tabColorPalettePageColumns'>\n        <span class='tabColorPalettePageColumn0'></span>\n        <span class='tabColorPalettePageColumn1'></span>\n    </div>\n</span>"));this.automaticPalette=this.getElementBySelector('.tabColorAutomaticPalette');this.paletteColumns=this.getElementBySelector('.tabColorPalettePageColumns');this.paletteColumnList=new Array(2);for(var ni=0;ni<this.paletteColumnList.length;++ni){this.paletteColumnList[ni]=this.getElementBySelector('.tabColorPalettePageColumn'+ni.toString())}});var dr=global.tab.ColorPalettePickerTemplate=ss.mkType(a,'tab.ColorPalettePickerTemplate',function(){this.palettePickerWindow=null;this.palettePickerPageContainer=null;this.leftButtonArea=null;this.rightButtonArea=null;this.leftButton=null;this.rightButton=null;this.pageControls=null;spiff.Template.call(this,$("<div class='tabColorPalettePicker'>\n        <div class='tabAuthLeftButtonArea'>\n            <div class='tabAuthPalettePickerLeftButton'></div>\n        </div>\n        <div class='tabColorPalettePickerWindow'>\n            <div class='tabColorPalettePickerPageContainer'></div>\n        </div>\n        <div class='tabAuthRightButtonArea'>\n            <div class='tabAuthPalettePickerRightButton'></div>\n        </div>\n        <div class='tabPalettePageControlsArea'>\n            <div class='tabPalettePageControls'></div>\n        </div>\n    </div>"));this.palettePickerWindow=this.getElementBySelector('.tabColorPalettePickerWindow');this.palettePickerPageContainer=this.getElementBySelector('.tabColorPalettePickerPageContainer');this.leftButtonArea=this.getElementBySelector('.tabAuthLeftButtonArea');this.rightButtonArea=this.getElementBySelector('.tabAuthRightButtonArea');this.leftButton=this.getElementBySelector('.tabAuthPalettePickerLeftButton');this.rightButton=this.getElementBySelector('.tabAuthPalettePickerRightButton');this.pageControls=this.getElementBySelector('.tabPalettePageControls')},{get_pages:function(){return this.getElementsBySelector('.tabColorPalettePage')},get_palettes:function(){return this.getElementsBySelector('.tabColorPalette')},get_automaticPalette:function(){return this.getElementsBySelector('.tabColorAutomaticPalette')},get_warningPalettesPageObject:function(){return this.getElementsBySelector('.'+'tabColorPaletteWarning')},get_warningPalettePageLink:function(){return this.getElementsBySelector('.'+'tabPaletteWarningPageLink')},clear:function(){this.get_pages().remove()},clearSelection:function(){this.get_automaticPalette().removeClass('tabPaletteSelected');this.get_palettes().removeClass('tabPaletteSelected');this.get_warningPalettesPageObject().removeClass('tabPaletteSelected')}});var ds=global.tab.ColorPalettePickerView=ss.mkType(a,'tab.ColorPalettePickerView',function(ni){this.dom=null;this.colorPalettePickerViewModel=null;ss.makeGenericType(spiff.BaseView$1,[dt]).call(this,ni,new dr);this.colorPalettePickerViewModel=ni;this.dom=this.get_template();this.$b();this.setupNavigationControl();this.setupPageControls()},{setupPageControls:function(){for(var ni=0;ni<this.colorPalettePickerViewModel.get_pages().length;ni++){var nj=$('<a></a>').data('pageNo',ni);this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(nj.get(0),ss.mkdel(this,function(nk){var nl=$(nk.target);this.colorPalettePickerViewModel.set_currentPageIndex(nl.data()['pageNo']);this.dom.pageControls.children('a.tabPageHighlight').removeClass('tabPageHighlight');nl.addClass('tabPageHighlight')})));if(ni===this.colorPalettePickerViewModel.get_currentPageIndex()){nj.addClass('tabPageHighlight')}if(ni===this.colorPalettePickerViewModel.warningPageIndex){nj.addClass('tabPaletteWarningPageLink')}this.dom.pageControls.append(nj)}},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[dt]).prototype.onViewModelPropertyChanged.call(this,ni,nj);if(nj.get_propertyName()==='CurrentPage'){this.handleCurrentPageChange()}else if(nj.get_propertyName()==='SelectedPalette'){this.dom.clearSelection();this.dom.domRoot.find('.tabColorPalette').each(ss.mkdel(this,function(nk,nl){var nm=$(nl);var nn=nm.data('paletteId');if(ss.isValue(nn)&&ss.referenceEquals(nn,this.colorPalettePickerViewModel.get_selectedPalette())){nm.addClass('tabPaletteSelected')}}))}else if(nj.get_propertyName()==='PageRemoved'){if(ss.isValue(this.dom.get_warningPalettePageLink())&&this.dom.get_warningPalettePageLink().length>0){this.dom.get_warningPalettePageLink().hide()}}},updateNavigationButtons:function(){this.dom.leftButton.toggleClass('disabled',this.colorPalettePickerViewModel.get_isAtFisrtPage());this.dom.rightButton.toggleClass('disabled',this.colorPalettePickerViewModel.get_isAtLastPage())},handleCurrentPageChange:function(){var ni=this.colorPalettePickerViewModel.get_currentPageIndex();this.dom.pageControls.find('a').each(ss.mkdel(this,function(nj,nk){var nl=$(nk);var nm=nl.data();if(ss.isNullOrUndefined(nm)){return}var nn=nm['pageNo'];var no=isFinite(nn)&&nn===this.colorPalettePickerViewModel.get_currentPageIndex();nl.toggleClass('tabPageHighlight',no)}));this.scrollToPageNo(ni);this.updateNavigationButtons()},$b:function(){this.dom.clear();var ni=0;var nj=this.colorPalettePickerViewModel.get_pages();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];var nm=new dq;if(nl.get_isWarningPage()){var nn=nl.get_warningPageModel();nm.domRoot.empty();var no=$('<div></div>').addClass('tabColorSpecialPalette').addClass('tabColorPaletteWarning').addClass('tabPaletteGroupSelected');no.append($('<div></div>'));no.append($('<span></span>').text(nn.get_title()));no.data('paletteId',nn.get_selectedPalette());var np=$('<div></div>').addClass('tabPaletteNote').text(nn.get_message());no.append(np);nm.domRoot.append(no)}else{var nq=nl;var nr=this.$9(nm);if(ni!==0){nr.hide()}for(var ns=0;ns<nm.paletteColumnList.length;++ns){this.$7(nq.get_paletteGroups()[ns].paletteItems,nm.paletteColumnList[ns],nq.get_paletteGroups()[ns].paletteItems.length)}}this.dom.palettePickerPageContainer.append(nm.domRoot);ni++}this.initPaletteEventHandlers();this.updateNavigationButtons()},$9:function(ni){var nj=ni.automaticPalette;nj.data('paletteId','');nj.toggleClass('tabPaletteSelected',this.colorPalettePickerViewModel.get_automaticPaletteSelected());nj.append($('<span></span>').text(tab.Strings.AuthColorPaletteAutomatic));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(nj.get(0),ss.mkdel(this,function(nk){this.selectPaletteElement(nj);this.dom.clearSelection();nj.addClass('tabPaletteSelected');this.colorPalettePickerViewModel.set_automaticPaletteSelected(true)})));return nj},$7:function(ni,nj,nk){var nl=null;for(var nm=0;nm<ni.length;nm++){if(ss.imod(nm,nk)===0){nl=$('<span></span>').addClass('tabColorPaletteGroup').appendTo(nj)}this.$8(ni[nm],nl)}},$8:function(ni,nj){var nk=$('<div></div>').addClass('tabColorPalette').toggleClass('tabPaletteSelected',ss.referenceEquals(ni.colorPaletteId,this.colorPalettePickerViewModel.get_selectedPalette())).addClass('tabAuthPalette-'+ni.colorPaletteId).data('paletteId',ni.colorPaletteId);nk.append($('<div></div>').addClass('tabPaletteBorder')).appendTo(nj);tab.DomUtil.setNativeTooltip(nk,ni.colorPaletteName)},$a:function(ni){var nj=ni.get();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];var nm={$:$(nl)};this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(nm.$.get(0),ss.mkdel({palette:nm,$this:this},function(nn){this.$this.selectPaletteElement(this.palette.$)})))}},initPaletteEventHandlers:function(){this.$a(this.dom.get_palettes());this.$a(this.dom.get_warningPalettesPageObject())},selectPaletteElement:function(ni){this.dom.clearSelection();ni.addClass('tabPaletteSelected');this.colorPalettePickerViewModel.set_selectedPalette(ni.data('paletteId'))},scrollToOffset:function(ni,nj){tab.DomUtil.setElementPosition(this.dom.palettePickerPageContainer,ni,0,(nj?'400ms':'0'),null)},scrollOffsetForPageNo:function(ni){return-ni*tab.DoubleUtil.roundToInt(this.dom.get_pages().first().width())},scrollToPageNo:function(ni){this.scrollToOffset(this.scrollOffsetForPageNo(ni),true)},setupNavigationControl:function(){this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.dom.leftButtonArea.get(0),ss.mkdel(this,function(ni){this.colorPalettePickerViewModel.set_currentPageIndex(this.colorPalettePickerViewModel.get_currentPageIndex()-1)})));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.dom.rightButtonArea.get(0),ss.mkdel(this,function(ni){this.colorPalettePickerViewModel.set_currentPageIndex(this.colorPalettePickerViewModel.get_currentPageIndex()+1)})))}});var dt=global.tab.ColorPalettePickerViewModel=ss.mkType(a,'tab.ColorPalettePickerViewModel',function(ni,nj,nk){this.$4=null;this.$6=[];this.$5=0;this.$7=null;this.$2$1=0;this.warningPageIndex=0;spiff.BaseViewModel.call(this);this.$7=ni;this.set_selectedPaletteflags(nj);this.$5=0;this.$4=nk;this.warningPageIndex=-1;this.$1()},{get_selectedPalette:function(){return this.$7},set_selectedPalette:function(ni){if(ss.referenceEquals(ni,this.$7)){return}if(this.$2()||this.$0()){this.$3()}this.$7=ni;this.notifyPropertyChanged('SelectedPalette')},get_automaticPaletteSelected:function(){return ss.isNullOrEmptyString(this.$7)||ss.referenceEquals(this.$7,tab.Strings.AuthColorPaletteAutomatic)},set_automaticPaletteSelected:function(ni){if(ni){this.$7=''}},get_selectedPaletteflags:function(){return this.$2$1},set_selectedPaletteflags:function(ni){this.$2$1=ni},get_currentPageIndex:function(){return this.$5},set_currentPageIndex:function(ni){var nj=Math.min(Math.max(0,ni),this.$6.length-1);if(nj!==this.$5){this.$5=nj;this.notifyPropertyChanged('CurrentPage')}},get_isAtLastPage:function(){return this.get_currentPageIndex()===this.$6.length-1},get_isAtFisrtPage:function(){return this.get_currentPageIndex()===0},get_pages:function(){return this.$6},get_currentPage:function(){return this.$6[this.$5]},get_paletteCollectionModel:function(){return tab.ApplicationModel.get_instance().get_colorPalettes()},$1:function(){this.$6=[];var ni=Math.ceil(this.$4.length/2);for(var nj=0;nj<ni;nj++){var nk=new iY;var nl=nj*2;for(var nm=nl;nm<nl+2;nm++){nk.addGroup(this.get_paletteCollectionModel().colorPaletteGroup(this.$4[nm]))}this.$6.push(nk)}if(this.$2()||this.$0()){var nn=(this.$2()?tab.Strings.AuthColorPaletteLegacy:this.get_selectedPalette());var no=(this.$2()?tab.Strings.LegacyPaletteUnselectedNote:tab.Strings.CustomPaletteGroupUnselectedNote);var np=new iY;np.set_warningPageModel(new mt(nn,no,this.get_selectedPalette()));var nq=np;this.$6.push(nq);this.warningPageIndex=this.$6.length-1}},$0:function(){return!this.get_automaticPaletteSelected()&&!_.any(this.$4,ss.mkdel(this,function(ni){return _.any(ni.palettesIndices,ss.mkdel(this,function(nj){var nk=this.get_paletteCollectionModel().get_colorPalettes()[nj];return ss.referenceEquals(nk.colorPaletteId,this.get_selectedPalette())}))}))},$2:function(){return(this.get_selectedPaletteflags()&dt.getPaletteflagValue('palette-flag-legacy'))!==0},$3:function(){if(this.warningPageIndex>-1&&this.$6.length>this.warningPageIndex){ss.removeAt(this.$6,this.warningPageIndex);this.warningPageIndex=-1}else{}this.notifyPropertyChanged('PageRemoved')}},{getPaletteflagValue:function(ni){return dt.$1[ni]}});var du=global.tab.ColorPaletteUtil=ss.mkType(a,'tab.ColorPaletteUtil',null,null,{renderCustomPaletteIcon:function(ni,nj){var nk={className:'tab-AuthPaletteIcon tab-AuthCustomPalette',key:'tab-AuthPaletteIcon'};if(ni.colors.length<=0){return spiff.DOMElements.div(nk)}var nl={};nl['0.0']=ni.colors[0];for(var nm=1;nm<ni.colors.length;nm++){var nn=nm/(ni.colors.length-1);nl[nn.toString()]=ni.colors[nm]}return spiff.DOMElements.div(nk,React.createElement(jv,{stepped:nj,colors:nl,key:'tab-AuthPaletteIconRamp'}))}});var dv=global.tab.ColorPickerColorProvider=ss.mkType(a,'tab.ColorPickerColorProvider',function(){this.$0=null;this.$0=[]},{get_blackAndWhiteColors:function(){return _.map(dv.$1,function(ni){return tab.ColorModel.fromColorCode(ni)})},get_lightGrayColors:function(){return _.map(dv.$3,function(ni){return tab.ColorModel.fromColorCode(ni)})},get_darkGrayColors:function(){return _.map(dv.$2,function(ni){return tab.ColorModel.fromColorCode(ni)})},get_presetColors1:function(){return _.map(dv.$4,function(ni){return tab.ColorModel.fromColorCode(ni)})},get_presetColors2:function(){return _.map(dv.$5,function(ni){return tab.ColorModel.fromColorCode(ni)})},get_customUserColors:function(){return this.$0},checkAndAddCustomColor:function(ni){if(ni===null){return}var nj=ni.toRgbHex().toString().toUpperCase();if(ss.contains(dv.$1,nj)||ss.contains(dv.$2,nj)||ss.contains(dv.$3,nj)||ss.contains(dv.$4,nj)||ss.contains(dv.$5,nj)||ss.contains(this.$0,ni)){return}this.$0.push(ni)}});var dw=global.tab.ColorPickerTemplate=ss.mkType(a,'tab.ColorPickerTemplate',function(){this.black=null;this.darkGrays=null;this.white=null;this.lightGrays=null;this.preset1=null;this.preset2=null;this.userColors=null;this.$1=null;spiff.Template.call(this,$("<div class='tabColorPicker'>\n                <div class='tabColorPickerContainer'>\n                    <div class='tabColorPickerBlack'></div>\n                    <div class='tabColorPickerDarkGrays'></div>\n                    <div class='tabColorPickerWhite'></div>\n                    <div class='tabColorPickerLightGrays'></div>\n                    <div class='tabColorPickerPreset1'></div>\n                    <div class='tabColorPickerPreset2'></div>\n                    <div class='tabColorPickerUserContainer'></div>\n                </div>\n            </div>"));this.black=this.getElementBySelector('.tabColorPickerBlack');this.white=this.getElementBySelector('.tabColorPickerWhite');this.darkGrays=this.getElementBySelector('.tabColorPickerDarkGrays');this.lightGrays=this.getElementBySelector('.tabColorPickerLightGrays');this.preset1=this.getElementBySelector('.tabColorPickerPreset1');this.preset2=this.getElementBySelector('.tabColorPickerPreset2');this.userColors=this.getElementBySelector('.tabColorPickerUserContainer');this.$1=this.getElementBySelector('.tabColorPickerContainer')},{addColorTransparencyControlContainer:function(){return $("<div class='tabAuthTransparencyControlContainer'></div>").appendTo(this.$1)},removeAllColors:function(){this.black.children().remove();this.darkGrays.children().remove();this.white.children().remove();this.lightGrays.children().remove();this.preset1.children().remove();this.preset2.children().remove();this.userColors.children().remove()}});var dx=global.tab.ColorPickerView=ss.mkType(a,'tab.ColorPickerView',function(ni){this.$i=null;this.$g=null;this.$f=null;this.$h=null;ss.makeGenericType(spiff.BaseView$1,[gM]).call(this,ni,new dw);this.$i=this.get_template();this.$g=ni;this.$g.add_enabledChanged(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_enabledChanged(ss.mkdel(this,this.$e))})));this.disposables.add(ss.mkdel(this,function(){this.$c()}));this.$a();if(this.$g.get_isTransparencyVisible()){this.$b()}},{get_currentColorObject:function(){return this.$h},clearSelectedColor:function(){if(ss.isValue(this.$h)){this.$h.toggleClass('tabColorSelected',false)}this.$h=null;this.$g.set_selectedColor(null)},updateSelectedColor:function(ni){this.$g.set_selectedColor(ni);this.$h=null;this.$e()},$c:function(){this.$h=null;this.$f=tab.MiscUtil.dispose(this.$f)},$e:function(){this.$c();this.$i.removeAllColors();this.$a()},$b:function(){var ni=tab.ObjectRegistry.newView$1(dA).call(null,dA,[this.$g.get_colorTransparencyControlViewModel()]);ni.addToDom(this.$i.addColorTransparencyControlContainer());this.disposables.add$1(ni)},$a:function(){this.$i.domRoot.toggleClass('disabled',!this.$g.get_enabled());this.$8(this.$g.get_colorProvider().get_blackAndWhiteColors()[0],$('<span></span>').addClass('tabColorPickerGroup').appendTo(this.$i.black));this.$7(this.$g.get_colorProvider().get_darkGrayColors(),this.$i.darkGrays,this.$g.get_colorProvider().get_darkGrayColors().length);this.$8(this.$g.get_colorProvider().get_blackAndWhiteColors()[1],$('<span></span>').addClass('tabColorPickerGroup').appendTo(this.$i.white));this.$7(this.$g.get_colorProvider().get_lightGrayColors(),this.$i.lightGrays,this.$g.get_colorProvider().get_lightGrayColors().length);this.$7(this.$g.get_colorProvider().get_presetColors1(),this.$i.preset1,3);this.$7(this.$g.get_colorProvider().get_presetColors2(),this.$i.preset2,3);this.$9(this.$g.get_colorProvider().get_customUserColors(),this.$i.userColors,dv.columns)},$8:function(ni,nj){if(ss.isNullOrUndefined(this.$f)){this.$f=[]}var nk=$('<div></div>').addClass('tabColorPickerColor').css('background-color',ni.toRgb()).append($('<div></div>').addClass('tabColorPickerColorBorder')).appendTo(nj);if(ss.isValue(this.$g.get_selectedColor())&&ss.equals(ni.toRgb(),this.$g.get_selectedColor().toRgb())){this.$d(nk)}if(this.$g.get_enabled()){this.$f.push(spiff.TableauClickHandler.targetAndClick(nk[0],ss.mkdel(this,function(){this.$d(nk);var nl;if(this.$g.get_isTransparencyVisible()){nl=tab.ColorModel.fromColorModelPlusAlpha(ni,this.$g.get_colorTransparencyControlViewModel().get_currentFraction())}else{nl=ni}this.$g.set_selectedColor(nl)})))}},$d:function(ni){if(ss.isValue(this.$h)){this.$h.toggleClass('tabColorSelected',false)}this.$h=ni.toggleClass('tabColorSelected',true)},$7:function(ni,nj,nk){var nl=null;for(var nm=0;nm<ni.length;nm++){if(ss.imod(nm,nk)===0){nl=$('<span></span>').addClass('tabColorPickerGroup').appendTo(nj)}this.$8(ni[nm],nl)}},$9:function(ni,nj,nk){var nl=null;for(var nm=0;nm<ni.length;nm++){if(ss.imod(nm,nk)===0){nl=$('<div></div>').addClass('tabColorPickerUser').appendTo(nj)}var nn=$('<span></span>').addClass('tabColorPickerGroup').appendTo(nl);this.$8(ni[nm],nn)}}});var dy=global.tab.ColorPickerViewModel=ss.mkType(a,'tab.ColorPickerViewModel',function(ni,nj){this.$3=null;this.$1=null;this.$2=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.$2=true;this.$0(new dv);this.set_marksCardTabEncodingModel(ni);if(nj){this.$1=new dB(this.get_marksCardTabEncodingModel());this.disposables.add$1(this.$1)}},{add_enabledChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_enabledChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_colorProvider:function(){return this.$2$2},$0:function(ni){this.$2$2=ni},get_marksCardTabEncodingModel:function(){return this.$2$3},set_marksCardTabEncodingModel:function(ni){this.$2$3=ni},get_colorTransparencyControlViewModel:function(){return this.$1},get_viewType:function(){return dx},get_selectedColor:function(){return this.$3},set_selectedColor:function(ni){if(tab.ColorModel.isEqual(this.$3,ni,true)){return}this.get_colorProvider().checkAndAddCustomColor(ni);this.$3=ni;this.sendColorUpdate()},get_isTransparencyVisible:function(){return ss.isValue(this.$1)},get_enabled:function(){return this.$2},set_enabled:function(ni){if(this.$2===ni){return}this.$2=ni;this.raiseActionEvent(this.$2$1)},get_viewModel:function(){return this},update:function(ni){this.get_colorProvider().checkAndAddCustomColor(ni);this.$3=ni},sendColorUpdate:function(){tab.PaneClientCommands.setDefaultColor(this.get_marksCardTabEncodingModel(),this.$3)},updateUberPopupViewModel:function(ni){},disposeViewModel:function(){this.dispose()}});var dz=global.tab.ColorTransparencyControlTemplate=ss.mkType(a,'tab.ColorTransparencyControlTemplate',function(){spiff.Template.call(this,$("\n            <div class='tabAuthTransparencyControl'>\n                <div class='tabAuthTransparencyLabel'></div>\n                <div class='tabAuthTransparencyControlHolder'></div>\n            </div>"));this.get_label().append($('<span></span>').text(tab.Strings.AuthColorTransparencyLabel))},{get_label:function(){return this.getElementBySelector('.tabAuthTransparencyLabel')},get_controlHolder:function(){return this.getElementBySelector('.tabAuthTransparencyControlHolder')}});var dA=global.tab.ColorTransparencyControlView=ss.mkType(a,'tab.ColorTransparencyControlView',function(ni){ss.makeGenericType(spiff.BaseView$1,[gN]).call(this,ni,new dz)},{get_controlTemplate:function(){return this.get_template()},tabIndex:function(ni){this.get_viewModel().set_tabIndex(ni)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);var ni=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dB,spiff.HorizontalSliderComponent,Object])).call(null,[this.get_viewModel()]);ni.addToDom(this.get_controlTemplate().get_controlHolder());this.disposables.add$1(ni)}});var dB=global.tab.ColorTransparencyControlViewModel=ss.mkType(a,'tab.ColorTransparencyControlViewModel',function(ni){this.$6=null;this.$4=false;this.$7=null;this.$5=null;this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$6=ni;this.$4=true;this.$6.add_newMarksCardTabEncoding(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_newMarksCardTabEncoding(ss.mkdel(this,this.$3))})))},{add_sliderFractionUpdated:function(ni){this.$3$1=ss.delegateCombine(this.$3$1,ni)},remove_sliderFractionUpdated:function(ni){this.$3$1=ss.delegateRemove(this.$3$1,ni)},add_enabledChanged:function(ni){this.$3$2=ss.delegateCombine(this.$3$2,ni)},remove_enabledChanged:function(ni){this.$3$2=ss.delegateRemove(this.$3$2,ni)},get_viewType:function(){return dA},get_viewModel:function(){return this},get_marksCardTabEncodingModel:function(){return this.$6},get_alphaLevel:function(){if(!ss.isValue(this.$5)){this.$5=this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().alphaLevel}return ss.unbox(this.$5)},set_alphaLevel:function(ni){var nj=Math.round(ni);var nk=Math.round(this.get_alphaLevel());if(nj!==nk){this.$5=nj;tab.PaneClientCommands.setColorAlphaLevel(this.get_marksCardTabEncodingModel(),nj)}},get_currentFraction:function(){return tab.ColorModel.alpha255ToFraction(this.get_alphaLevel())},get_enabled:function(){return this.$4},set_enabled:function(ni){if(this.$4===ni){return}this.$4=ni;this.incrementProps();this.raiseActionEvent(this.$3$2)},get_tabIndex:function(){return this.$7},set_tabIndex:function(ni){if(ss.referenceEquals(this.$7,ni)){return}this.$7=ni;this.incrementProps()},setCurrentFraction:function(ni){this.set_alphaLevel(tab.ColorModel.alphaFractionTo255(tab.DoubleUtil.truncateTwoDecimalPlaces(ni)))},$3:function(){if(!ss.staticEquals(this.$3$1,null)){this.$3$1(this.get_currentFraction())}},createInitialProps:function(){return dB.getDefaultProps(this.get_currentFraction(),this.get_enabled(),ss.mkdel(this,function(ni){this.setCurrentFraction(ni/100)}),this.$7)},createUpdatedProps:function(){return{disabled:!this.$4,tabIndex:this.$7}}},{getDefaultProps:function(ni,nj,nk,nl){return{minValue:0,maxValue:100,initialValue:ss.trunc(tab.DoubleUtil.multiplyBy100(ni)),disabled:!nj,width:100,onValueChanged:nk,showValueTextBox:true,showPercentageSign:true,tabIndex:nl}}});var dC=global.tab.CommandPredicates=ss.mkType(a,'tab.CommandPredicates',null,null,{$0:function(ni,nj,nk){var nl=ni+':'+nj;return ss.isValue(nk.get_command())&&ss.startsWithString(nk.get_command(),nl)},isDocCommand:function(ni,nj){return dC.$0('tabdoc',ni.cmd,nj)},isItemType:function(ni,nj){return ss.equals(ni,nj.get_commandsType())},hasIconResource:function(ni,nj){return ss.equalsT(ni,nj.get_iconRes())},isServerCommand:function(ni,nj){return dC.$0('tabsrv',ni.cmd,nj)}});var dD=global.tab.CompoundTableCalcViewModel=ss.mkType(a,'tab.CompoundTableCalcViewModel',function(ni){this.$6=null;this.$8=null;this.$9=null;this.$7=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.$6=ni;this.$6.add_compoundTableCalcUpdated(ss.mkdel(this,this.$3));var nj=[{ns:'tabdoc',cmd:'table-calc-edit'},{ns:'tabdoc',cmd:'table-calc-add'}];var nk=tab.CommandInterceptors.addPreCommandListener$1(nj,ss.mkdel(this,function(nl){this.raiseActionEvent(this.$2$3)}));this.disposables.add(ss.mkdel(this,function(){this.$6.remove_compoundTableCalcUpdated(ss.mkdel(this,this.$3));tab.CommandInterceptors.removePreCommandListener$1(nj,nk)}));if(this.$6.get_hasTableCalc()){this.$1();this.$7=true}},{add_tableCalcsUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_tableCalcsUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_tableCalcsClosed:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_tableCalcsClosed:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_activate:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_activate:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},get_hasTableCalc:function(){return this.$6.get_hasTableCalc()},get_hasSecondaryTableCalc:function(){return this.$6.get_hasSecondaryTableCalc()},get_allowSecondaryTableCalc:function(){return this.get_hasTableCalc()&&this.$6.get_allowSecondaryTableCalc()},get_primaryTableCalcViewModel:function(){return this.$8},get_secondaryTableCalcViewModel:function(){return this.$9},get_fieldCaption:function(){return this.$6.get_fieldCaption()},get_isCalcAssistanceEnabled:function(){return this.$6.get_isCalcAssistanceEnabled()},get_isCalcAssistanceWidgetDisabled:function(){return this.$6.get_calcAssistanceWidgetState()==='widget-state-disabled'},get_dialogPosition:function(){return this.$2$4},set_dialogPosition:function(ni){this.$2$4=ni},get_isActive:function(){return this.$7},set_isActive:function(ni){if(ni&&!this.$7){this.$0()}this.$7=ni},dispose:function(){this.$8=tab.MiscUtil.dispose$1(this.get_primaryTableCalcViewModel());this.$9=tab.MiscUtil.dispose$1(this.get_secondaryTableCalcViewModel());spiff.BaseViewModel.prototype.dispose.call(this)},$4:function(){if(!this.$6.get_hasTableCalc()){this.$8=tab.MiscUtil.dispose$1(this.get_primaryTableCalcViewModel());return}if(ss.isNullOrUndefined(this.$8)){this.$8=lV.new$1(this.$6.get_primaryTableCalc())}this.get_primaryTableCalcViewModel().set_title((this.$6.get_hasSecondaryTableCalc()?tab.Strings.TableCalcPrimaryTitle:tab.Strings.TableCalcSingleTitle))},$5:function(){if(!this.$6.get_hasSecondaryTableCalc()){this.$9=tab.MiscUtil.dispose$1(this.get_secondaryTableCalcViewModel());return}if(ss.isNullOrUndefined(this.get_secondaryTableCalcViewModel())){this.$9=lV.new$1(this.$6.get_secondaryTableCalc());this.get_secondaryTableCalcViewModel().set_title(tab.Strings.TableCalcSecondaryTitle)}},$1:function(){this.$4();this.$5();this.raiseActionEvent(this.$2$1)},$2:function(){this.$8=tab.MiscUtil.dispose$1(this.get_primaryTableCalcViewModel());this.$9=tab.MiscUtil.dispose$1(this.get_secondaryTableCalcViewModel());this.raiseActionEvent(this.$2$2)},$0:function(){var ni=new tab.TableCalcDialogActivatedCmd;ni.set_uiBlocking('afterDelay');ni.invoke()},closeTableCalcs:function(){(new tab.TableCalcCloseCmd).invoke();this.$2()},$3:function(){if(this.get_hasTableCalc()){this.$1()}else{this.$2()}},addSecondaryTableCalc:function(){if(!this.get_hasSecondaryTableCalc()){var ni=new tab.TableCalcToggleSecondaryCalcCmd;ni.set_uiBlocking('immediately');ni.set_useSecondaryCalc(true);ni.invoke().fail(function(nj){})}},removeSecondaryTableCalc:function(){if(this.get_hasSecondaryTableCalc()){var ni=new tab.TableCalcToggleSecondaryCalcCmd;ni.set_uiBlocking('immediately');ni.set_useSecondaryCalc(false);ni.invoke().fail(function(nj){})}},setCalculationAssistanceState:function(ni){if(ni===this.get_isCalcAssistanceEnabled()){return}var nj=new tab.TableCalcToggleShowCalcAssistanceCmd;nj.set_calcAssistanceState(ni);nj.invoke()}},{new$1:function(ni){return new dD(ni)}});var dE=global.tab.ConfirmationCommandRedirectHandler=ss.mkType(a,'tab.ConfirmationCommandRedirectHandler',null,null,{$0:function(ni){var nj=$.Deferred();var nk=ni['confirmationPresModel'.toString()];var nl=$('<div></div>').append($('<div></div>').text(nk.confirmationMsg).css('white-space','pre-wrap'));var nm=nl.html();tab.ConfirmationViewModel.showConfirmation(nm,function(nn){dE.$2(nn,nj,nk)});return nj.promise()},$1:function(ni){var nj=$.Deferred();var nk=ni['confirmationPresModel'.toString()];tab.ConfirmationViewModel.showWarningConfirmationWithOkCancel(nk.confirmationMsg,function(nl){dE.$2(nl,nj,nk)});return nj.promise()},$2:function(ni,nj,nk){var nl=((ni==='confirm')?nk.acceptSimpleCommandModel:nk.declineSimpleCommandModel);if(ss.isNullOrUndefined(nl)){nj.resolve();return}var nm=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nl).get_simpleCommand(),false);tab.ServerCommands.executeServerCommand(nm,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(nj),function(){nj.reject()})}});var dF=global.tab.ContainerGuideComponent=ss.mkType(a,'tab.ContainerGuideComponent',function(ni){React.Component.call(this,ni)},{render:function(){var ni={className:'tab-dashContainerGuideContainer'};var nj='__BORDER__';var nk=spiff.DOMElements.rect({x:this.props.containerGuide.borderRect.x+2,y:this.props.containerGuide.borderRect.y+2,width:this.props.containerGuide.borderRect.w-2*2,height:this.props.containerGuide.borderRect.h-2*2,className:'tab-dashContainerGuideBorder',key:nj});var nl=this.props.containerGuide.lineList;var nm=spiff.ReactComponentExtensions.generateUniqueKeys(Object).call(null,nl,[nj]);var nn=_.map(nl,ss.mkdel(this,function(np,nq){return spiff.DOMElements.line({x1:np.pointsF[0],y1:np.pointsF[1],x2:np.pointsF[2],y2:np.pointsF[3],strokeDasharray:10+','+5,className:'tab-dashContainerGuideLine',key:nm[nq]})}));var no=ss.arrayClone(nn);ss.insert(no,0,nk);return spiff.DOMElements.svg(ni,no)}});var dG=global.tab.ContainerGuideProps=ss.mkType(a,'tab.ContainerGuideProps',function(){this.containerGuide=null});var dH=global.tab.ContainerResizeDragInstance=ss.mkType(a,'tab.ContainerResizeDragInstance',function(ni,nj,nk,nl,nm){this.viewModel=null;spiff.MoveDragInstance.call(this,ni,nk,nl,nm);this.viewModel=nj});var dI=global.tab.ContainerResizeViewModel=ss.mkType(a,'tab.ContainerResizeViewModel',function(ni,nj){this.$c=null;this.$b=null;this.$m=null;this.$f=0;this.$e=0;this.$a=null;this.$d=false;this.$h=0;this.$9=0;this.$8=null;this.$i=null;this.$g=null;this.$l=false;this.$j=0;this.$k=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$c=ni;this.$b=nj;this.$m=$.Deferred();this.$k=[];this.$9=0},{startDrag:function(ni,nj,nk){var nl=tab.DashboardZoneCommands.getZoneResizeInfo(ni.x,ni.y);nl.done(ss.mkdel(this,function(nm){var nn=nm.zoneResize;if(!nn.isValid){if(!ss.staticEquals(nk,null)){nk()}this.$m.reject();return}this.$5(nn,ni);this.$m.resolve();this.incrementProps();tab.SelectionClientCommands.clearActiveZone()}));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$3));return new dH(nj,this,ss.mkdel(this,this.$7),ss.mkdel(this,this.$4),null)},getPointOnEdge:function(ni,nj){switch(nj){case 3:{return{x:ni.get_x()+ss.idiv(ni.get_width(),2),y:ni.get_y()+ni.get_height()}}case 0:{return{x:ni.get_x(),y:ni.get_y()+ss.idiv(ni.get_height(),2)}}case 1:{return{x:ni.get_x()+ni.get_width(),y:ni.get_y()+ss.idiv(ni.get_height(),2)}}case 2:{return{x:ni.get_x()+ss.idiv(ni.get_width(),2),y:ni.get_y()}}}return{x:0,y:0}},createInitialProps:function(){return{dashboardGeometry:this.$b}},createUpdatedProps:function(){if(this.$m.state()!=='resolved'){return null}return{edge:this.$g,dragHorz:this.$d,position:this.$h,splitOnEdgeSnap:this.$l,snapPoints:this.$k,currentSnapPoint:this.$a,container:this.$8}},$5:function(ni,nj){var nk=this.$c.getZone(ni.zoneId);var nl=null;if(ss.isValue(nk)){nl={x:nk.get_x(),y:nk.get_y(),h:nk.get_height(),w:nk.get_width()};if(ni.isHorizontal){ni.zoneEdgePix.y=Math.max(nl.y,ni.zoneEdgePix.y);ni.zoneEdgePix.h=Math.min(nl.h+nl.y-ni.zoneEdgePix.y,ni.zoneEdgePix.h)}else{ni.zoneEdgePix.x=Math.max(nl.x,ni.zoneEdgePix.x);ni.zoneEdgePix.w=Math.min(nl.w+nl.x-ni.zoneEdgePix.x,ni.zoneEdgePix.w)}}this.$9=ni.zoneId;this.$f=ni.minPosition;this.$e=ni.maxPosition;this.$i=ni.zoneEdgePp;this.$g=ni.zoneEdgePix;this.$8=(ni.showParent?nl:null);this.$d=ni.isHorizontal;this.$h=(this.$d?nj.x:nj.y);this.$a=null;this.$l=ni.splitOnEdgeSnap;this.$j=ni.snapDistance;this.$k=ss.arrayClone(ni.snapPoints);this.$k.filter(ss.mkdel(this,function(nm){return nm.snapLocation>=this.$f&&nm.snapLocation<=this.$e}))},$7:function(ni){if(this.$m.state()!=='resolved'){return}var nj=(this.$d?(ni.pageX-this.$b().l):(ni.pageY-this.$b().t));nj=Math.max(this.$f,Math.min(this.$e,nj));nj=this.$6(nj);this.$h=nj;this.incrementProps()},$6:function(ni){this.$a=null;for(var nj=0;nj<this.$k.length;nj++){var nk=this.$k[nj];var nl=Math.abs(nk.snapLocation-ni);if(nl<=this.$j){this.$a=nk;return nk.snapLocation}}return ni},$4:function(ni){if(this.$m.state()!=='resolved'){return}var nj='edge-drag';if(ss.isValue(this.$a)){nj=this.$a.zoneEdgeMoveType}tab.DashboardZoneCommands.resizeTiledZone(this.$i,this.$g,this.$9,this.$h,this.$d,nj)},$3:function(ni){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$3));this.dispose()}});var dJ=global.tab.ContainerSectionDropTarget=ss.mkType(a,'tab.ContainerSectionDropTarget',function(ni,nj,nk,nl,nm){this.$i=null;this.$n=null;this.$l=null;this.$h=null;this.$o=null;this.$m=false;this.$k=null;this.$j='common';this.$l=ni;this.$n=nj;this.$h=nk;this.$i=nl;this.$o=nm;EventUtils.DragDropManager.attachDropTarget(this.$h,this);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$7));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$6))},{get_feedbackType:function(){return'dropfeedbackuponentry'},$f:function(){return ss.isNullOrUndefined(this.$i)},$c:function(){return ss.isValue(this.$i)&&this.$i.isObject},$b:function(){return this.$n==='groups'},$d:function(){return this.$n==='parameters'},$e:function(){return this.$b()||this.$d()},$g:function(){return ss.isValue(this.$i)&&this.$i.isFolder&&!this.$i.isLayered},dispose:function(){EventUtils.DragDropManager.detachDropTarget(this.$h);EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$7));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$6))},canAccept:function(ni){if(!dJ.$0(ni)){return false}if(ni.isCopyDrag&&!kT.canDropToCopyConvert(ni)){return false}if(this.$e()){if(this.$g()){return this.$k!==false}return this.$f()}else if(this.$f()||this.$g()){return true}else if(this.$c()&&this.$1(ni)){return true}return this.$k!==false},acceptDrop:function(ni){if(!this.canAccept(ni)){return $.Deferred().resolve(false)}var nj=ss.safeCast(ni,kT);if(this.$k===true&&nj.get_canDropToConvert()){this.$0(nj.get_originalFields(),this.$j,ni.isCopyDrag);return $.Deferred().resolve(true)}if(this.$f()){this.$5(nj.get_originalFields());return $.Deferred().resolve(true)}if(this.$i.isFolder){this.$4(nj.get_originalFields(),this.$i.localName);return $.Deferred().resolve(true)}if(this.$c()&&this.$1(nj)){this.$8(nj.get_originalFields());return $.Deferred().resolve(true)}return $.Deferred().resolve(false)},dragExit:function(ni){this.$j='common';this.$2()},dragOver:function(ni){if(!this.canAccept(ni)){return null}this.$3(ni);this.$a(ni);return this},$3:function(ni){if(this.$m){return}this.$m=true;var nj=ss.safeCast(ni,cp);if(ss.isValue(nj)){nj.get_drop().always(ss.mkdel(this,function(nk){if(EventUtils.DragDropManager.get_isDragging()&&ss.referenceEquals(EventUtils.DragDropManager.get_currentTarget(),this)){this.$a(nk)}}))}},getDropCursor:function(ni){if(kT.canDropToCopyConvert(ni)){return spiff.CustomCursor.copy}return spiff.CustomCursor.move},getDropTarget:function(ni){this.$j='common';if(ss.isValue(EventUtils.DragDropManager.get_lastDragEvent())&&ss.isValue(ni)&&ni.length>0&&ss.isValue(this.$o)&&this.$o.length>0){var nj=tab.DomUtil.getPageOffset$1(this.$o).top+this.$o.outerHeight(false)/2;var nk=EventUtils.DragDropManager.get_lastDragEvent().pageY<nj;this.$j=(nk?'dimensions':'measure')}return this},$1:function(ni){if(ss.isInstanceOfType(ni,kT)){return ss.safeCast(ni,kT).get_fieldsInfo().columnsInDrillPath!==0}return false},allDragFieldsAreFromThisContainer:function(ni){var nj=ss.safeCast(ni,kT);if(ss.isNullOrUndefined(nj)){return false}if(this.$f()&&this.$n==='common'){return nj.get_fieldsInfo().schemaCommonRootColumns===2}else if(this.$n==='groups'){return _.every(nj.get_originalFields(),function(nk){return nk.get_isGroup()})}else if(this.$n==='parameters'){return _.every(nj.get_originalFields(),function(nk){return nk.get_isParameter()})}return _.every(nj.get_originalFields(),ss.mkdel(this,function(nk){return ss.isValue(this.$i.findPath(nk.getSchemaItemLocator(),nk.get_dataSourceName()))}))},$7:function(ni){this.$k=this.allDragFieldsAreFromThisContainer(ni)},$6:function(ni){this.$m=false;this.$k=null;this.$j='common';this.$2()},$a:function(ni){var nj=ss.safeCast(ni,kT);if(ss.isNullOrUndefined(nj)||ss.isNullOrUndefined(this.$k)){return}if(this.$e()){if(this.$k===true&&this.$g()){this.$h.addClass('showMoveToZone')}}else if(this.$k===false&&ss.isValue(this.$i)&&this.$i.isFolder){this.$h.addClass('showMoveToZone')}if(this.$9(nj)){this.$o.addClass('showDroppable')}},$9:function(ni){if(ss.isNullOrUndefined(this.$o)){return false}if(this.$k!==true){return false}if(!ni.get_canDropToConvert()){return false}if(ni.get_fieldsInfo().drillPaths===2){return false}return true},$2:function(){if(ss.isValue(this.$o)){this.$o.removeClass('showDroppable')}this.$h.removeClass('showMoveToZone')},$0:function(ni,nj,nk){if(ni.length===0){return}if(nj!=='dimensions'&&nj!=='measure'){var nl=ni[0];nj=((nl.get_defaultRole()==='dimension')?'measure':'dimensions')}kW.dropOnSchemaSection(this.$l,ni,nj,nk,null)},$4:function(ni,nj){kW.dropOnSchemaSection(this.$l,ni,this.$n,false,nj)},$5:function(ni){kW.dropOnSchemaSection(this.$l,ni,this.$n,false,'')},$8:function(ni){kW.dropOnSchemaSection(this.$l,ni,this.$n,false,'')}},{$0:function(ni){if(ss.isInstanceOfType(ni,kT)){return ss.safeCast(ni,kT).get_originalFields().length>0}return false}});var dK=global.tab.ContentZoneBordersComponent=ss.mkType(a,'tab.ContentZoneBordersComponent',function(ni){React.Component.call(this,ni)},{render:function(){var ni={className:'tab-dashZoneBordersContainer'};var nj=_.filter(this.props.borders,ss.mkdel(this,function(nm){return!ss.contains(this.props.excludedZones,nm.zoneId)}));var nk=spiff.ReactComponentExtensions.generateUniqueKeys(Object).call(null,nj,[]);var nl=_.map(nj,ss.mkdel(this,function(nm,nn){return spiff.DOMElements.rect({x:nm.borderRect.x+2,y:nm.borderRect.y+2,width:nm.borderRect.w-2*2,height:nm.borderRect.h-2*2,key:nk[nn],className:'tab-dashZoneBorderPreview'})}));return spiff.DOMElements.svg(ni,nl)}});var dL=global.tab.ContentZoneBordersProps=ss.mkType(a,'tab.ContentZoneBordersProps',function(){this.borders=null;this.excludedZones=null});var dM=global.tab.ConvertDimMeasDropTarget=ss.mkType(a,'tab.ConvertDimMeasDropTarget',function(ni){this.$1=null;this.$1=ni},{get_feedbackType:function(){return'dropfeedbackuponentry'},acceptDrop:function(ni){if(!dM.$0(ni)){return $.Deferred().resolve(false)}var nj=ss.safeCast(ni,kT);if(nj.get_fieldsInfo().columnsInDrillPath!==0){this.$0(nj.get_originalFields());return $.Deferred().resolve(true)}dM.$1(nj.get_originalFields(),this.$1,ni.isCopyDrag);return $.Deferred().resolve(true)},$0:function(ni){if(ni.length>0){var nj=ni[0];kW.dropOnSchemaSection(nj.get_dataSourceName(),ni,this.$1,false,null)}},getDropTarget:function(ni){return this},dragExit:function(ni){},dragOver:function(ni){return(dM.$0(ni)?this:null)},getDropCursor:function(ni){if(kT.canDropToCopyConvert(ni)){return spiff.CustomCursor.copy}return spiff.CustomCursor.move}},{$0:function(ni){if(ss.isNullOrUndefined(ni)||!ni.get_readyToDrop()){return false}if(!ss.isInstanceOfType(ni,kT)){return false}if(ni.isCopyDrag&&!kT.canDropToCopyConvert(ni)){return false}return true},$1:function(ni,nj,nk){if(ni.length===0){return}var nl=ni[0];if(nj!=='dimensions'&&nj!=='measure'){nj=((nl.get_defaultRole()==='dimension')?'measure':'dimensions')}kW.dropOnSchemaSection(nl.get_dataSourceName(),ni,nj,nk,null)}});var dN=global.tab.ConvertUnnamedFieldsDropTarget=ss.mkType(a,'tab.ConvertUnnamedFieldsDropTarget',function(){fJ.call(this)},{dragOver:function(ni){return(this.canAccept(ni)?this:null)},dragExit:function(ni){},acceptDrop:function(ni){if(ss.isInstanceOfType(ni,be)){var nj=$.Deferred();ss.safeCast(ni,be).get_analyticsDragInfoPromise().done(ss.mkdel(this,function(nk){if(!this.canAccept(ni)){nj.reject(false);return}var nl=new tab.DropReferenceLineOnSchemaViewerCmd;nl.set_fieldName(nk.fn);nl.set_refLineId(nk.refLineId);nl.set_paneId(nk.paneId);nl.set_worksheet(tsConfig.current_sheet_name);nl.invoke().done(function(nm){nj.resolve(true)}).fail(function(nm){})})).fail(function(nk){nj.reject(false)});return nj}else if(ss.isInstanceOfType(ni,cp)){if(!this.canAccept(ni)){return $.Deferred().reject(false)}return tab.SchemaClientCommands.convertUnnamedFields(ss.safeCast(ni,cp).get_fieldNames()).pipe(function(nk){return ss.isValue(nk)})}else{return $.Deferred().reject(false)}},getDropCursor:function(ni){return spiff.CustomCursor.copy},getDropTarget:function(ni){return this},canAccept:function(ni){if(ss.isNullOrUndefined(ni)||!ni.get_readyToDrop()){return false}if(ss.isInstanceOfType(ni,cr)){return true}var nj=ss.safeCast(ni,be);if(ss.isValue(nj)){return nj.get_fieldNames().length>0}return ss.isInstanceOfType(ni,jd)&&_.any(ss.safeCast(ni,jd).get_pills(),function(nk){return nk.get_field().get_canBeAddedToDataSchema()})}});var dO=global.tab.CopyZoneToWebClipboardCommand=ss.mkType(a,'tab.CopyZoneToWebClipboardCommand',function(){tab.CopyZoneToWebClipboardCmd.call(this)},{get_isEnabled:function(){return tab.ModelUtils.findContentDashboard(null).pm.isCopiableZoneSelected},invoke:function(){return this.fireAndForget(function(){tab.DashboardView.copyZone()})}});var dP=global.tab.CumulativeTableCalcViewModel=ss.mkType(a,'tab.CumulativeTableCalcViewModel',function(ni){this.$2=null;this.$1=null;this.$3=0;mq.call(this);this.$2=ni;this.$2.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$1=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$1.add_selectedItemChanged(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$1.remove_selectedItemChanged(ss.mkdel(this,this.$0));this.$1.dispose()})))},{get_aggComboBoxVM:function(){return this.$1},get_model:function(){return this.$2},onModelUpdated:function(){if(!this.$2.get_hasAggregation()){return}this.$3=this.$2.get_aggregationIndex();var ni=[];for(var nj=0,nk=this.$2.get_aggregationValues().length;nj<nk;nj++){ni.push(new spiff.ComboBoxItem(null,this.$2.get_aggregationCaptions()[nj],this.$2.get_aggregationValues()[nj],null,null))}this.$1.setItems(ni);this.$1.set_selectedItem(this.$1.get_items()[this.$3])},$0:function(ni){if(ss.referenceEquals(ni,this.$1.get_items()[this.$3])){return}var nj=new tab.TableCalcSetCumulativeOptionsCmd;nj.set_uiBlocking('immediately');nj.set_aggType(ni.get_data());nj.set_calcNestingLevel(this.get_model().get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.get_model().get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(){this.$1.set_selectedItem(this.$1.get_items()[this.$3]);this.raiseViewModelUpdated()}))}});var dQ=global.tab.CustomColorPopoverComponent=ss.mkType(a,'tab.CustomColorPopoverComponent',function(){React.Component.call(this)},{render:function(){return React.createElement(SharedWidgets.PopoverWidget,{placement:'bottom-start',popoverContent:React.createElement(SharedWidgets.HexColorInputWidget,{label:this.props.label,color:(ss.isNullOrUndefined(this.props.color)?null:tab.ColorModel.fromColorCode(this.props.color).toRgbHex()),inputStyle:{width:'unset'},onConfirm:ss.mkdel(this,function(ni){try{var nj=tab.ColorModel.fromColorCode(ni);this.props.onConfirm(nj.toRgb());this.props.popoverRef.current.toggle(false)}catch(nk){}})}),style:{marginTop:'-8px',marginLeft:'-2px',width:'auto'},title:tab.Strings.AuthCustomHexColorLabel,triggerElement:this.props.triggerElement,ref:this.props.popoverRef})}});var dR=global.tab.CustomTableCalcViewModel=ss.mkType(a,'tab.CustomTableCalcViewModel',function(ni){this.$2=null;this.$4=null;this.$3=null;mq.call(this);this.$2=ni;this.$2.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$4=new lX(ni.get_referenceModel());this.disposables.add$1(this.$4);this.$3=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$3.add_selectedItemChanged(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_selectedItemChanged(ss.mkdel(this,this.$0));this.$3.dispose()})))},{get_relativeToComboBoxVM:function(){return this.$4.get_referenceComboBoxVM()},get_relativeToState:function(){return this.$4.get_referenceWidgetState()},get_nullIfIncomplete:function(){return this.$2.get_nullIfIncomplete()},get_nullIfIncompleteState:function(){return this.$2.get_nullIfIncompleteState()},get_allPages:function(){return this.$2.get_allPages()},get_allPagesState:function(){return this.$2.get_allPagesState()},get_model:function(){return this.$2},get_referenceViewModel:function(){return this.$4},get_nestedCalcsWidgetState:function(){return this.$2.get_nestedCalcsWidgetState()},get_nestedCalcsIndex:function(){return this.$2.get_nestedCalcsIndex()},get_nestedCalcsComboBoxVM:function(){return this.$3},onModelUpdated:function(){this.$1()},customNullIfIncompleteChanged:function(ni){if(ni===this.get_nullIfIncomplete()){return}var nj=new tab.TableCalcSetNullIfIncompleteCmd;nj.set_uiBlocking('immediately');nj.set_nullIfIncomplete(ni);nj.set_calcNestingLevel(this.get_model().get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.get_model().get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))},allPagesChanged:function(ni){if(ni===this.get_allPages()){return}var nj=new tab.TableCalcSetPercentTotalOptionsCmd;nj.set_uiBlocking('immediately');nj.set_allPages(ni);nj.set_calcNestingLevel(this.get_model().get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.get_model().get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))},$1:function(){if(this.$2.get_nestedCalcsWidgetState()!=='widget-state-enabled'){this.$3.clearItems();this.$3.set_enabled(false);return}var ni=[];for(var nj=0,nk=this.$2.get_nestedTableCalcInfoArray().length;nj<nk;nj++){var nl=this.$2.get_nestedTableCalcInfoArray()[nj];ni.push(new spiff.ComboBoxItem(null,nl.fieldCaption,nl.tableCalcIdentifier,null,null))}this.$3.setItems(ni);this.$3.set_selectedItem(ni[this.$2.get_nestedCalcsIndex()]);this.$3.set_enabled(true)},$0:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();var nk=this.$2.get_nestedTableCalcInfoArray()[this.$2.get_nestedCalcsIndex()];if(nj.calcNestingLevel===nk.tableCalcIdentifier.calcNestingLevel&&ss.referenceEquals(nj.fn,nk.tableCalcIdentifier.fn)){return}var nl=new tab.TableCalcEditNestedTableCalcCmd;nl.set_uiBlocking('immediately');nl.set_calcNestingLevel(nj.calcNestingLevel);nl.set_nestedCalcField(nj.fn);nl.invoke().fail(ss.mkdel(this,function(nm){this.$1()}))}});var dS=global.tab.DashboardAuthoringRectSelector=ss.mkType(a,'tab.DashboardAuthoringRectSelector',function(){this.$5=null;this.$1=null;this.$2=null;this.$6={x:0,y:0};this.$4={x:0,y:0};this.$7={x:0,y:0,w:0,h:0};this.$3={x:0,y:0,w:0,h:0};this.$5='<div></div>';this.$1='tv_drag';this.$3={x:0,y:0,w:0,h:0}},{get_dom:function(){return this.$2},get_dragStart:function(){return this.$4},get_parentDomRect:function(){return this.$7},createDomAndAppend:function(ni){this.$2=$(this.$5);this.$2.addClass(this.$1);this.$2.css('display','none');this.$2.css('position','absolute');ni.append(this.$2)},updateSpecificShape:function(ni){var nj=this.get_dragStart().x-this.get_parentDomRect().x;var nk=this.get_dragStart().y-this.get_parentDomRect().y;var nl=Math.round(Math.min(ni.x,nj));var nm=Math.round(Math.max(ni.x,nj));var nn=Math.round(Math.min(ni.y,nk));var no=Math.round(Math.max(ni.y,nk));var np=nm-nl;var nq=no-nn;this.$3={x:nl,y:nn,w:np,h:nq}},renderShape:function(){var ni={l:this.$3.x,t:this.$3.y,w:this.$3.w,h:this.$3.h};tab.DomUtil.setMarginBoxJQ(this.get_dom(),ni);this.get_dom().css('display','')},show:function(){this.get_dom().addClass('tvdrag_marquee');this.get_dom().css('background-color','rgba(0, 176, 240, .25)');this.get_dom().css('border','1px solid #00b0f0')},hide:function(){if(ss.isValue(this.get_dom())){this.get_dom().removeClass('tvdrag_marquee')}},zonesTouchedByMarquee:function(ni,nj){var nk=[];if(!ss.isNullOrUndefined(ni)){for(var nl=0;nl<ni.length;nl++){var nm=ni[nl];var nn={x:nm.get_zoneCommonModel().get_contentX(),y:nm.get_zoneCommonModel().get_contentY()};var no={x:nn.x+nm.get_zoneCommonModel().get_contentWidth(),y:nn.y+nm.get_zoneCommonModel().get_contentHeight()};if(this.$0(nn,no,nj)){nk.push(nm.get_zoneId())}}}return nk},$0:function(ni,nj,nk){var nl={x:this.$3.x+nk.x,y:this.$3.y+nk.y};var nm={x:this.$3.x+this.$3.w+nk.x,y:this.$3.y+this.$3.h+nk.y};if(nl.x>nj.x||nm.x<ni.x||nl.y>nj.y||nm.y<ni.y){return false}return true},dragStarted:function(ni,nj){var nk=tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth();var nl=tab.DashboardView.dashboardGeometry();this.$4={x:ni.startX,y:ni.startY};this.$7=nj},updateAndRenderShape:function(ni){this.constrainShape(ni);this.updateSpecificShape(this.$6);this.renderShape()},constrainShape:function(ni){this.$6={x:ni.pageX-this.$7.x,y:ni.pageY-this.$7.y};this.$6.y=Math.max(0,Math.min(this.$6.y,this.$7.h));this.$6.x=Math.max(0,Math.min(this.$6.x,this.$7.w))}});var dT=global.tab.DashboardDeviceLayoutMapping=ss.mkType(a,'tab.DashboardDeviceLayoutMapping',null,null,{getUserString:function(ni){return dT.$3[ni]},getLayout:function(ni){return dT.$2[ni]},$0:function(){var ni={};var nj=new ss.ObjectEnumerator(dT.$3);try{while(nj.moveNext()){var nk=nj.current();ni[nk.value]=nk.key}}finally{nj.dispose()}return ni}});var dU=global.tab.DashboardDeviceLayoutViewModel=ss.mkType(a,'tab.DashboardDeviceLayoutViewModel',function(ni,nj){this.$e=null;this.$g=null;this.$f=null;this.$h=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$e=ni;this.$g=nj;this.$f=new hs(this.$e);this.$h=dU.$4;this.addChildViewModel(this.$f);this.disposables.add$1(this.$e.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$6)).addEventBinding(ss.mkdel(this,function(nk){nk.add_activeZoneChanged(ss.mkdel(this,this.incrementProps));nk.deviceLayoutMetadataModel.add_deviceLayoutZoneInfosChanged(ss.mkdel(this,this.$6));nk.deviceLayoutMetadataModel.add_isLayoutCustomizedChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nk){nk.remove_activeZoneChanged(ss.mkdel(this,this.incrementProps));nk.deviceLayoutMetadataModel.remove_deviceLayoutZoneInfosChanged(ss.mkdel(this,this.$6));nk.deviceLayoutMetadataModel.remove_isLayoutCustomizedChanged(ss.mkdel(this,this.incrementProps))})))},{$a:function(){return this.$e.get_model()},$b:function(){return ss.isValue(this.$a())&&this.$a().get_isCurrentLayoutAutoGenerated()},$c:function(){return ss.isValue(this.$a())&&ss.isValue(this.$a().deviceLayoutMetadataModel)&&this.$a().deviceLayoutMetadataModel.get_isLayoutCustomized()},$d:function(){return(ss.isValue(this.$a())?this.$a().get_activeZoneID():0)},$9:function(){return ss.isValue(this.$g)&&this.$g.get_addNewZoneAsFloating()},createInitialProps:function(){return{addToDashboard:ss.mkdel(this,this.$3),clearAllClicked:ss.mkdel(this,this.$5),createDragInstance:ss.mkdel(this,this.$4),selectZone:ss.mkdel(this,this.$7),showContextMenu:ss.mkdel(this,this.$8)}},createUpdatedProps:function(){return{defaultCustomToggleProps:this.$f.get_props(),isCurrentLayoutAutoGenerated:this.$b(),isLayoutCustomized:this.$c(),rootNodes:this.$h,selectedZone:this.$d()}},$5:function(ni){if(ss.isValue(this.$a())){tab.DashboardClientCommands.clearDeviceLayout(this.$a().get_sheetName())}},$8:function(ni,nj){if(ss.isNullOrUndefined(this.$a())||ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.deviceZoneListItem)||ss.isNullOrUndefined(ni.deviceZoneVisibilityListItem)||ss.isNullOrUndefined(nj)){return}var nk=function(nl){var nm=nl.commands;var nn=tab.WidgetUtil.menuViewModelFromCommands(nm,tab.WidgetUtil.commandMenuItemClicked,null,null,null);nn.show(nj)};tab.DashboardClientCommands.getZoneListNodeContextMenu(this.$a().get_sheetName(),ni.deviceZoneListItem.get_zoneId(),ni.deviceZoneListItem.get_zoneName(),ni.deviceZoneListItem.get_zoneParam(),ni.deviceZoneListItem.get_zoneType(),ni.deviceZoneListItem.get_label(),ni.deviceZoneListItem.get_formattedText(),ni.deviceZoneVisibilityListItem.get_isEnabled(),ni.deviceZoneVisibilityListItem.get_isVisible(),this.$a().get_currentDeviceLayout(),this.$9(),nk)},$6:function(){this.$h=dU.$4;if(ss.isValue(this.$a())&&ss.isValue(this.$a().deviceLayoutMetadataModel)){this.$h=mn.buildTree(tab.DeviceLayoutZoneInfo,String,mX).call(null,this.$a().deviceLayoutMetadataModel.get_deviceLayoutZoneInfos(),null,dU.$0,dU.$1,function(ni,nj){return new mX.$ctor1(ni,nj)})}this.incrementProps()},$3:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.deviceZoneVisibilityListItem)||ni.deviceZoneVisibilityListItem.get_isVisible()||!ni.deviceZoneVisibilityListItem.get_isEnabled()){return}tab.DashboardClientCommands.addExistingObjectToDashboard(this.$a().get_sheetName(),ni.deviceZoneListItem.get_zoneType(),ni.deviceZoneListItem.get_direction()==='horizontal',this.$9(),ni.deviceZoneListItem.get_formattedText(),ni.deviceZoneListItem.get_zoneParam(),ni.deviceZoneListItem.get_dashboardObjectType(),ni.deviceZoneListItem.get_zoneId(),ni.deviceZoneListItem.get_zoneName())},$4:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.deviceZoneVisibilityListItem)||ni.deviceZoneVisibilityListItem.get_isVisible()||!ni.deviceZoneVisibilityListItem.get_isEnabled()){return null}var nj=tab.DashboardClientCommands.getSheetDragDropTargets(null,null);var nk=$.Deferred();nj.done(function(nm){nk.resolve(nm.zoneDragDrop)}).fail(function(){nk.reject()});var nl=co.createDeferredRect(nk);return fY.create(ni.deviceZoneListItem,this.$9(),nk,nl)},$7:function(ni){if(ss.isValue(ni)&&ss.isValue(ni.deviceZoneListItem)&&ss.isValue(ni.deviceZoneVisibilityListItem)&&ni.deviceZoneVisibilityListItem.get_isVisible()){tab.SelectionClientCommands.setActiveZone(ni.deviceZoneListItem.get_zoneId(),'replace',null)}}},{$0:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.deviceZoneListItem)){return''}return(dU.$2(ni.deviceZoneListItem.get_zoneType())?'':ni.deviceZoneListItem.get_zoneName())},$1:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.deviceZoneListItem)){return null}return(dU.$2(ni.deviceZoneListItem.get_zoneType())?ni.deviceZoneListItem.get_zoneName():null)},$2:function(ni){switch(ni){case'color':case'shape':case'size':case'map':case'filter':case'highlighter':case'current-page':{return true}}return false}});var dV=global.tab.DashboardDragDropUtils=ss.mkType(a,'tab.DashboardDragDropUtils',function(){},null,{getContainerGuide:function(ni,nj){if(ni===0){return null}var nk=ss.arrayClone(nj);for(var nl=nk.length-1;nl>=0;nl--){if(nk[nl].zoneId===ni||ss.contains(nk[nl].childZoneIds,ni)){return nk[nl]}}return null},createDefaultHitTarget:function(ni){var nj=[0,0,0,ni.h,ni.w,ni.h,ni.w,0,0,0];return{lineList:[{pointsF:nj}]}}});var dW=global.tab.DashboardDragDropViewModel=ss.mkType(a,'tab.DashboardDragDropViewModel',function(ni,nj){this.$5=null;cn.call(this,nj);this.$5=ni;this.initialize()},{onDragStart:function(){this.updateProps$1(this.dragProperties.floatingProps);if(ss.isValue(this.$5.get_dragDropPresModel())){this.$5.get_dragDropPresModel().done(ss.mkdel(this,function(ni){this.dragProperties.tileDropTargets=ss.arrayClone(ni.targetPreviewPairs.map(this.dragProperties.dropTargetGenerator));this.dragProperties.tiledZoneBorders=ni.zoneBorders;this.dragProperties.tiledContainerGuides=ni.containerGuides;this.updatePropsOrResetToDefaultForFloating();this.$5.add_shiftStateChanged(ss.mkdel(this,this.updatePropsOrResetToDefaultForFloating))}))}this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_shiftStateChanged(ss.mkdel(this,this.updatePropsOrResetToDefaultForFloating))})));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$4))},$4:function(ni){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$4));this.dispose()},isDraggedForFloating:function(){return this.$5.get_isFloating()},handleDropWithDashboardDropLocation:function(ni,nj){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$4));this.$5.dispose();this.$5.handleDrop(ni,ss.mkdel(this,this.dispose),this.get_props().dropFeedback,this.get_props().containerGuide,nj)}});var dX=global.tab.DashboardDragDropViewModelProperties=ss.mkType(a,'tab.DashboardDragDropViewModelProperties',function(){this.floatingProps=null;this.dashboardGeometry=null;this.dropTargetGenerator=null;this.dropTargetKeyFactory=null;this.defaultDropTarget=null;this.tileDropTargets=null;this.tiledZoneBorders=null;this.tiledContainerGuides=null},{getHashCode:function(){var ni=(this.floatingProps?ss.getHashCode(this.floatingProps):0);ni=ni*397^(this.dashboardGeometry?ss.getHashCode(this.dashboardGeometry):0);ni=ni*397^(this.dropTargetGenerator?ss.getHashCode(this.dropTargetGenerator):0);ni=ni*397^(this.dropTargetKeyFactory?ss.getHashCode(this.dropTargetKeyFactory):0);ni=ni*397^(this.defaultDropTarget?ss.getHashCode(this.defaultDropTarget):0);ni=ni*397^(this.tileDropTargets?ss.getHashCode(this.tileDropTargets):0);ni=ni*397^(this.tiledZoneBorders?ss.getHashCode(this.tiledZoneBorders):0);ni=ni*397^(this.tiledContainerGuides?ss.getHashCode(this.tiledContainerGuides):0);return ni},equals:function(ni){if(!ss.isInstanceOfType(ni,dX)){return false}return ss.equals(this.floatingProps,ni.floatingProps)&&ss.equals(this.dashboardGeometry,ni.dashboardGeometry)&&ss.equals(this.dropTargetGenerator,ni.dropTargetGenerator)&&ss.equals(this.dropTargetKeyFactory,ni.dropTargetKeyFactory)&&ss.equals(this.defaultDropTarget,ni.defaultDropTarget)&&ss.equals(this.tileDropTargets,ni.tileDropTargets)&&ss.equals(this.tiledZoneBorders,ni.tiledZoneBorders)&&ss.equals(this.tiledContainerGuides,ni.tiledContainerGuides)}},{$clone:function(ni){var nj=new dX;nj.floatingProps=ni.floatingProps;nj.dashboardGeometry=ni.dashboardGeometry;nj.dropTargetGenerator=ni.dropTargetGenerator;nj.dropTargetKeyFactory=ni.dropTargetKeyFactory;nj.defaultDropTarget=ni.defaultDropTarget;nj.tileDropTargets=ni.tileDropTargets;nj.tiledZoneBorders=ni.tiledZoneBorders;nj.tiledContainerGuides=ni.tiledContainerGuides;return nj}});var dY=global.tab.DashboardDragFeedbackComponent=ss.mkType(a,'tab.DashboardDragFeedbackComponent',function(ni,nj){React.Component.call(this,ni,nj)},{render:function(){var ni=this.props.dashboardGeometry();var nj={width:ni.w,height:ni.h,className:'tab-dashDropTargetContainer'};var nk=_.map(this.props.dropTargets,ss.mkdel(this,function(nn){return React.createElement(ea,{target:nn.hitTarget,dropTarget:nn.dropTarget,key:nn.key})}));var nl=ss.arrayClone(nk.reverse());if(ss.isValue(this.props.dropFeedback)){var nm={x:this.props.dropFeedback.x,y:this.props.dropFeedback.y,width:this.props.dropFeedback.w,height:this.props.dropFeedback.h,className:'tab-dashCurrentDropTarget',key:'__PREVIEW__'};ss.insert(nl,0,spiff.DOMElements.rect(nm))}if(ss.isValue(this.props.containerGuide)){ss.insert(nl,0,this.$0())}if(this.props.showBorders){ss.insert(nl,0,this.$1())}return spiff.DOMElements.svg(nj,nl)},$1:function(){var ni=(ss.isValue(this.props.containerGuide)?this.props.containerGuide.childZoneIds.concat([this.props.containerGuide.zoneId]):[]);var nj=new dL;nj.borders=this.props.borders;nj.excludedZones=ni;nj.key='__ZONES__';return React.createElement(dK,nj)},$0:function(){var ni=new dG;ni.containerGuide=this.props.containerGuide;ni.key='__CONTAINER__';return React.createElement(dF,ni)},componentDidUpdate:function(ni,nj){if(!_.isEqual(this.props.dropTargets,ni.dropTargets)){EventUtils.DragDropManager.dragMove(EventUtils.DragDropManager.get_lastDragEvent())}}});var dZ=global.tab.DashboardDropTarget=ss.mkType(a,'tab.DashboardDropTarget',function(ni,nj,nk,nl){this.$4=null;this.$2=null;this.$3=null;this.$1=null;this.$5=null;this.$4=ni;this.$2=nj;this.$3=nk;this.$1=nl},{get_feedbackType:function(){return'dropfeedbackuponentry'},get_presModel:function(){return this.$4},$0:function(ni){return ni.presmodelType==='dashboard-object-drag'},dragOver:function(ni){if(this.$0(ni)||ss.isInstanceOfType(ni,eb)){this.$2(this.$4);return this}return null},dragExit:function(ni){this.$1()},acceptDrop:function(ni){if(!ss.isNullOrUndefined(this.$4.zoneId)){this.$3(EventUtils.DragDropManager.get_lastDragEvent(),this.$4.zoneId)}else{this.$3(EventUtils.DragDropManager.get_lastDragEvent(),null)}return $.Deferred().resolve(true)},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.move},getTargetType:function(){return this.$5}},{$ctor1:function(ni,nj,nk,nl,nm){this.$4=null;this.$2=null;this.$3=null;this.$1=null;this.$5=null;this.$4=ni;this.$2=nj;this.$3=nk;this.$1=nl;this.$5=nm}});var ea=global.tab.DashboardDropTargetComponent=ss.mkType(a,'tab.DashboardDropTargetComponent',function(ni,nj){React.Component.call(this,ni,nj)},{render:function(){var ni=new ss.StringBuilder;var nj=this.props.target.lineList;for(var nk=0;nk<nj.length;nk++){var nl=nj[nk].pointsF;for(var nm=0;nm<nl.length;nm+=2){ni.append(nl[nm]+','+nl[nm+1]+' ')}}return spiff.DOMElements.polygon({points:ni.toString(),ref:spiff.ReactRefs.attachDropTarget(ss.mkdel(this,function(){return this.props.dropTarget}))})}});var eb=global.tab.DashboardElementDragInstance=ss.mkType(a,'tab.DashboardElementDragInstance',function(ni,nj,nk){this.$0=false;this.avatarViewModel=null;this.$1=null;this.defaultCursor=null;this.$2$1=null;EventUtils.DragInstance.call(this,ni,tab.ObjectRegistry.newView(mS).call(null,[nk]));this.$0=nj;this.avatarViewModel=nk},{get_isFloating:function(){return this.isShiftDrag!==this.$0},get_viewModel:function(){if(ss.isNullOrUndefined(this.$1)){this.$1=new dW(this,tab.DashboardView.dashboardGeometry)}return this.$1},get_dragDropPresModel:function(){return this.$2$1},set_dragDropPresModel:function(ni){this.$2$1=ni},handleDrop:null,initialize:function(){this.avatarViewModel.initialize(this)},dispose:function(){if(ss.isValue(this.$1)){this.$1.dispose()}if(ss.isValue(this.avatarViewModel)){this.avatarViewModel.dispose()}},dropToNowhereAction:function(){this.dispose()}});var ec=global.tab.DashboardGridComponent=ss.mkType(a,'tab.DashboardGridComponent',function(){React.Component.call(this)},{render:function(){var ni=new EventUtils.EventHandleSpec;ni.tap=this.props.onClick;return EventUtils.EventForwarder.div(ni,{className:'tab-dashboard-grid'},this.renderGrid())},renderGrid:function(){var ni=this.props.lineThickness+'px';var nj=this.props.color+' '+ni+', '+'transparent'+' '+ni+', '+'transparent'+')';var nk='linear-gradient(0deg, '+nj;var nl='linear-gradient(90deg, '+nj;var nm=nk+','+nl;var nn=this.props.gridCellSize+'px';var no=nn+' '+nn;return spiff.DOMElements.div({className:'tab-dashboard-grid-overlay',hidden:this.props.isHidden,style:{backgroundImage:nm,backgroundSize:no,height:this.props.dashboardHeight,width:this.props.dashboardWidth,zIndex:699},key:'dashboard-grid-overlay'})}});var ed=global.tab.DashboardGridDialogComponent=ss.mkType(a,'tab.DashboardGridDialogComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){this.props.dialogProps.children=this.$0();var ni=React.createElement(SharedWidgets.DialogWidget,this.props.dialogProps);return ni},$0:function(){var ni=React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'gridSize',containerStyle:{width:'100%'},start:this.props.gridSize,label:tab.Strings.DashboardGridSize,min:5,max:1000,onValueUpdated:this.props.changeSize});return ni}});var ee=global.tab.DashboardGridDialogViewModel=ss.mkType(a,'tab.DashboardGridDialogViewModel',function(ni){this.$8=null;this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$7=ni;this.disposables.add(ss.mkdel(ni,ni.detachNotifications));this.$7.add_updateGridDialogInfo(ss.mkdel(this,this.incrementProps));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_updateGridDialogInfo(ss.mkdel(this,this.incrementProps))})))},{createInitialProps:function(){return{dialogProps:this.$3(),changeSize:ss.mkdel(this,this.$4)}},createUpdatedProps:function(){return{gridSize:(ss.isValue(this.$7)?this.$7.get_gridSize():20)}},$3:function(){var ni={testId:'dashboardGridDialog',isModal:true,type:0,dialogWidth:200,showCloseButton:true,title:tab.Strings.GridDialogTitle,positioningBehavior:2,shouldAdjustPositionOnWindowResize:true,zIndex:1000,isGlassTransparent:true,onCloseRequest:ss.mkdel(this,this.$6)};return ni},$4:function(ni){this.$5();this.$8=window.setTimeout(function(){tab.DashboardClientCommands.changeDashboardGridSize(ni);eh.logGridSizeEvent(ni)},100)},$5:function(){this.$8=tab.MiscUtil.clearTimeout(this.$8)},$6:function(){_.defer(ss.mkdel(this,this.dispose))}});var ef=global.tab.DashboardGridOptionsProxy=ss.mkType(a,'tab.DashboardGridOptionsProxy',null,null,{$0:function(){var ni=new tab.DashboardGridDialogModel;ni.add_updateGridDialogInfo(function(){ef.$1(ni)});return ni},$1:function(ni){var nj=new ee(ni);var nk=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ee,ed,Object])).call(null,[nj]);nk.get_rootElement()[0].id='dashboardGridDialog';nk.addToDom($(document.body))}});var eg=global.tab.DashboardGridProps=ss.mkType(a,'tab.DashboardGridProps',function(){this.isHidden=false;this.gridCellSize=0;this.color=null;this.lineThickness=0;this.dashboardWidth=0;this.dashboardHeight=0;this.dashboardTop=0;this.dashboardLeft=0;this.onClick=null});var eh=global.tab.DashboardGridTelemetry=ss.mkType(a,'tab.DashboardGridTelemetry',null,null,{logGridStateChangeEvent:function(ni,nj){eh.$0('DashboardAuthoring_GridToggle',ss.mkdict(['GridState',(ni?'On':'Off'),'GridToggleMethod',(nj?'Shortcut':'Toggle Menu Bar')]))},logGridSizeEvent:function(ni){eh.$0('DashboardAuthoring_GridSize',ss.mkdict(['GridSize',ni]))},$0:function(ni,nj){tab.OnlineAnalyticsClient.logEvent(ni,nj)}});var ei=global.tab.DashboardGridViewModel=ss.mkType(a,'tab.DashboardGridViewModel',function(ni){this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[eg]).call(this);this.$3=ni;this.disposables.add$1(this.$3.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.add_sizeChanged(ss.mkdel(this,this.incrementProps));nj.add_gridOverlayModeChanged(ss.mkdel(this,this.incrementProps));nj.add_gridSizeChanged(ss.mkdel(this,this.incrementProps))}}),ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.remove_sizeChanged(ss.mkdel(this,this.incrementProps));nj.remove_gridOverlayModeChanged(ss.mkdel(this,this.incrementProps));nj.remove_gridSizeChanged(ss.mkdel(this,this.incrementProps))}})))},{get_isGridOn:function(){var ni=this.$3.get_model();return ss.isValue(ni)&&ni.get_gridMode()==='gom-on'},createUpdatedProps:function(){var ni=this.$3.get_model();var nj=0,nk=0;var nl=true;var nm=20;if(ss.isValue(ni)&&ni.get_isDashboard()&&ss.isValue(ni.get_dashboardSize())){nk=ni.get_dashboardSize().h;nj=ni.get_dashboardSize().w;nl=!this.get_isGridOn();nm=ni.get_gridSize()}var nn=new eg;nn.isHidden=nl;nn.gridCellSize=nm;nn.color='rgba(0, 220, 255, 0.35)';nn.dashboardHeight=nk;nn.dashboardWidth=nj;nn.lineThickness=1;nn.dashboardLeft=0;nn.dashboardTop=0;nn.onClick=ss.mkdel(this,this.onClick);return nn},onClick:function(ni){tab.SelectionClientCommands.clearActiveZone()}});var ej=global.tab.DashboardLeftPaneConstants=ss.mkType(a,'tab.DashboardLeftPaneConstants',null,null,{createTitleHtmlAttr:function(ni){return{className:'tab-SectionTitle',key:'title',id:ni}},get_contentHTMLAttr:function(){return{className:'tab-SectionContent',key:'content'}}});var ek=global.tab.DashboardNewObjectsPaneViewModel=ss.mkType(a,'tab.DashboardNewObjectsPaneViewModel',function(ni,nj){this.$5=null;this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$5=nj;this.$4=ni;this.disposables.add$1(this.$4.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nk){nk.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nk.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nk){nk.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nk.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))})))},{createInitialProps:function(){return{changeFloatingState:ss.mkdel(this,this.$3)}},createUpdatedProps:function(){var ni=ss.isValue(this.$4)&&ss.isValue(this.$4.get_model())&&this.$4.get_model().get_isCurrentLayoutAutoGenerated();return{addAsFloating:this.$5.get_addNewZoneAsFloating(),isCurrentLayoutAutoGenerated:ni}},$3:function(ni){if(this.$5.get_addNewZoneAsFloating()!==ni){this.$5.set_addNewZoneAsFloating(ni);this.incrementProps()}}});var el=global.tab.DashboardObjectDragAvatarViewUtils=ss.mkType(a,'tab.DashboardObjectDragAvatarViewUtils',null,null,{updateSizeAndPosition:function(ni,nj){var nk={width:nj.w+'px',height:nj.h+'px'};ni.css(nk);tab.DomUtil.setElementPosition(ni,nj.l,nj.t,null,true)}});var em=global.tab.DashboardPaneComponent=ss.mkType(a,'tab.DashboardPaneComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj);var nk=new en;nk.richTextEditorConfigurationFinished=em.get_richTextEditorConfigurationFinished();this.state=nk},{$b:function(){return(this.props.currentLayoutIsAutoGenerated?'disabled':'')},render:function(){var ni;if(this.props.currentDashboardDeviceLayout==='default'){ni=this.$1()}else{ni=this.$2()}return spiff.DOMElements.div({className:'tab-DashboardPane'},ni)},$1:function(){return[this.$5(),this.$8(),this.$7(),this.$6()]},$2:function(){var ni=tab.Strings.ZoneListTitle(dT.getUserString(this.props.currentDashboardDeviceLayout));var nj=[this.$5(),this.$8()];if(this.props.dashboardZoneListProps.isLayoutCustomized){nj.push(spiff.DOMElements.div({className:['tab-Section','DeviceZoneLayoutSection',this.$b()].join(' '),key:'zoneLayout-control-section','data-tb-test-id':'DeviceZoneLayoutSection'},spiff.DOMElements.div(ej.createTitleHtmlAttr('zoneListTitle'),ni),spiff.DOMElements.div(ej.get_contentHTMLAttr(),this.$a(),this.$9(),this.$4())));nj.push(this.$6())}else{nj.push(spiff.DOMElements.div({className:['tab-Section','DeviceZoneLayoutSection',this.$b()].join(' '),key:'zoneLayout-control-section'},spiff.DOMElements.div(ej.createTitleHtmlAttr('objectSectionTitle'),ni),spiff.DOMElements.div(ej.get_contentHTMLAttr(),this.$a(),spiff.DOMElements.div({className:'deviceLayoutDefaultMessage'},tab.Strings.DeviceLayoutDefaultMessagePart1),spiff.DOMElements.div({className:'deviceLayoutDefaultMessage'},tab.Strings.DeviceLayoutDefaultMessagePart2))))}return nj},$9:function(){var ni=React.createElement(eD,this.props.dashboardZoneListProps);return spiff.DOMElements.div({className:'tab-zoneList',key:'zone-list-section'},ni)},$4:function(){var ni={handleClick:this.props.dashboardZoneListProps.clearAllClicked,buttonType:1,testId:'device-layout-clear-all',children:tab.Strings.DashboardLayoutClearAll,disabled:this.props.isDashboardEmpty||this.props.currentLayoutIsAutoGenerated};var nj=React.createElement(SharedWidgets.ButtonWidget,ni);return spiff.DOMElements.div({className:'tab-ClearAllButton'},nj)},$6:function(){var ni=this.$3();return spiff.DOMElements.div({className:['tab-Section','tab-SectionObjects',this.$b()].join(' '),key:'dashboard-objects-section','data-tb-test-id':'tab-SectionObjects'},ni)},$3:function(){if(!em.$2()){var ni=ss.mkdel(this,function(){tab.RichTextClientCommands.cacheRichTextEditorConfiguration();em.set_richTextEditorConfigurationFinished(true);var nm=new en;nm.richTextEditorConfigurationFinished=true;this.setState(nm)});tab.StartupUtils.callAfterModelsInitialized(ni);em.$3(true)}if(ss.isNullOrUndefined(em.get_objectPaneItemSettingsCache())){em.set_objectPaneItemSettingsCache({isAskDataEnabled:!tsConfig.is_ask_data_disabled_for_site,isDataStoryEnabled:tsConfig.is_data_story_enabled,isWorkflowExtensionEnabled:tsConfig.is_workflow_extension_enabled,isPulseMetricExtensionEnabled:tsConfig.is_saas})}if(!this.state.richTextEditorConfigurationFinished){return em.$0()}var nj={currentSheet:tsConfig.current_sheet_name,isDesktop:false,showTitle:this.props.dashTitleCheckbox.isChecked,objectPaneItemSettings:em.get_objectPaneItemSettingsCache(),isDisabled:this.props.currentLayoutIsAutoGenerated,isPublic:tsConfig.isPublic,addAsFloating:this.props.newObjPane.addAsFloating,adminExtensionsInObjectPaneEnabled:true,localeLanguageIsoCode:tab.LocalizeLocales.get_currentMessageLocale()};var nk=new tab.WidgetPluginContainerProps;nk.moduleName='@tableau/hybrid-objects-pane';var nl={};nl['presModel']=nj;nk.initialProps=nl;return React.createElement(tab.WidgetPluginContainer,nk)},$a:function(){var ni=React.createElement(SharedWidgets.ToggleTextWidget,this.props.dashboardZoneListProps.defaultCustomToggleProps);return spiff.DOMElements.div({className:'tab-SectionZoneToggleButtons'},ni)},$7:function(){var ni=React.createElement(eu,this.props.sheets);var nj=new EventUtils.EventHandleSpec;nj.tap=ss.mkdel(this,this.$0);var nk=nj;return EventUtils.EventForwarder.div(nk,{className:['tab-Section','tab-SectionSheetList'].join(' '),key:'sheet-list-section'},spiff.DOMElements.div(ej.createTitleHtmlAttr('sheetListLabel'),tab.Strings.AuthDashboardPaneSheets),spiff.DOMElements.div(ej.get_contentHTMLAttr(),ni))},$5:function(){var ni=React.createElement(eX,this.props.deviceLayoutList);return ni},$8:function(){var ni=React.createElement(ew,this.props.size);return spiff.DOMElements.div({className:['tab-Section','tab-SectionSizing',this.$b()].join(' '),key:'size-control-section','data-tb-test-id':'tab-SectionSizing'},spiff.DOMElements.div(ej.createTitleHtmlAttr('titleLabel'),this.props.size.sectionTitle),spiff.DOMElements.div(ej.get_contentHTMLAttr(),ni))},$0:function(ni){var nj=$(ni.target);var nk=nj.hasClass('tabAuthSheetListItem')||nj.parents('.'+'tabAuthSheetListItem').length>0;if(!nk){this.props.sheets.actions.select(null)}}},{$2:function(){return em.$4$1},$3:function(ni){em.$4$1=ni},get_richTextEditorConfigurationFinished:function(){return em.$4$2},set_richTextEditorConfigurationFinished:function(ni){em.$4$2=ni},get_objectPaneItemSettingsCache:function(){return em.$4$3},set_objectPaneItemSettingsCache:function(ni){em.$4$3=ni},$0:function(){return React.createElement('deferred-objects-section')}});var en=global.tab.DashboardPaneState=ss.mkType(a,'tab.DashboardPaneState',function(){this.richTextEditorConfigurationFinished=false});var eo=global.tab.DashboardPaneViewModel=ss.mkType(a,'tab.DashboardPaneViewModel',function(ni){this.$a=null;this.$9=null;this.$7=null;this.$5=null;this.$8=null;this.$6=null;this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);var nj=new tab.DashboardNewObjectsModel;var nk=new et(ni,nj);this.$5=new eB(ni);this.$8=new ek(ni,nj);this.$7=new fa(ni);this.$9=new lr(ni,nj,nk);this.$6=new eC(ni);this.$4=new dU(ni,nj);this.$a=ni;this.disposables.add$2([this.addChildViewModel(this.$7),this.addChildViewModel(this.$9),this.addChildViewModel(this.$5),this.addChildViewModel(this.$8),this.addChildViewModel(this.$6),this.addChildViewModel(this.$4),this.$7,this.$9,this.$5,this.$8,this.$6,this.$4]);this.disposables.add$1(this.$a.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){nl.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))})).addEventBinding(ss.mkdel(this,function(nl){nl.add_dashboardTypeChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_dashboardTypeChanged(ss.mkdel(this,this.incrementProps))})).addEventBinding(ss.mkdel(this,function(nl){nl.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})))},{get_title:function(){return tab.Strings.AuthLeftPaneLabelDashboard},get_id:function(){return'dashboard'},get_contentViewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[eo,em,Object])},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthDashboardPane'},createUpdatedProps:function(){var ni=this.$a.get_model();var nj='default';var nk=false;var nl=true;if(ss.isValue(ni)){nj=ni.get_currentDeviceLayout();nk=ni.get_isCurrentLayoutAutoGenerated();nl=ni.get_zoneModels().length<=0}var nm={deviceLayoutList:this.$7.get_props(),sheets:this.$9.get_props(),size:this.$5.get_props(),newObjPane:this.$8.get_props(),dashTitleCheckbox:this.$6.get_props(),currentLayoutIsAutoGenerated:nk,currentDashboardDeviceLayout:nj,isDashboardEmpty:nl};nm.dashboardZoneListProps=this.$4.get_props();return nm},$3:function(ni){}});var ep=global.tab.DashboardPortPreviewComponent=ss.mkType(a,'tab.DashboardPortPreviewComponent',function(){React.PureComponent.call(this)},{render:function(){if(this.props.isHidden){return null}if(!this.props.layoutExists){return spiff.DOMElements.div({className:'tab-dashboard-solid-device-preview-port-overlay',style:{height:this.props.height,width:this.props.width,zIndex:699}})}return spiff.DOMElements.div({className:'tab-dashboard-device-preview-container',style:{height:this.props.height,width:this.props.width,zIndex:699}},spiff.DOMElements.div({className:'tab-dashboard-device-preview-port-overlay'}),spiff.DOMElements.div({className:'overlay-top'},spiff.DOMElements.div({className:'overlay-corner-bracket--top-left'}),spiff.DOMElements.div({className:'overlay-corner-bracket--top-right'})),spiff.DOMElements.div({className:'overlay-bottom'},spiff.DOMElements.div({className:'overlay-corner-bracket--bottom-left'}),spiff.DOMElements.div({className:'overlay-corner-bracket--bottom-right'})))}});var eq=global.tab.DashboardPortPreviewViewModel=ss.mkType(a,'tab.DashboardPortPreviewViewModel',function(ni){this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=ni;this.disposables.add$1(this.$3.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nj.add_currentPreviewLayoutChanged(ss.mkdel(this,this.incrementProps));nj.add_mobileAppEnabledInPreviewChanged(ss.mkdel(this,this.incrementProps));nj.add_previewPortSizeListChanged(ss.mkdel(this,this.incrementProps));nj.add_sizeChanged(ss.mkdel(this,this.incrementProps))}}),ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nj.remove_currentPreviewLayoutChanged(ss.mkdel(this,this.incrementProps));nj.remove_mobileAppEnabledInPreviewChanged(ss.mkdel(this,this.incrementProps));nj.remove_previewPortSizeListChanged(ss.mkdel(this,this.incrementProps));nj.remove_sizeChanged(ss.mkdel(this,this.incrementProps))}})))},{createUpdatedProps:function(){var ni=this.$3.get_model();if(ss.isNullOrUndefined(ni)||!ni.get_isDashboard()||ni.isStory()||ss.isNullOrUndefined(ni.get_previewPortSizeList())||ni.get_previewPortSizeList().length===0){return{width:0,height:0,isHidden:true,layoutExists:false}}var nj;if(ni.get_devicePreviewBarIsVisible()){nj=((ni.get_currentDeviceLayout()!=='default')?ni.get_currentDeviceLayout():ni.get_currentPreviewLayout())}else{nj=ni.get_currentDeviceLayout()}var nk=ni.previewPortSizeForDeviceLayout(nj);return{isHidden:nj==='default',layoutExists:ss.contains(ni.get_deviceLayouts(),nj),width:nk.w,height:nk.h}}});var er=global.tab.DashboardSelectionView=ss.mkType(a,'tab.DashboardSelectionView',function(ni){this.$s=null;this.$t=null;this.$w=null;this.$v=false;this.$u=null;this.$x={};this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[es]).call(this,ni,spiff.Template.fromHtml(''));this.set_zoneMultiselection(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[mZ,mY,Object])).call(null,[this.get_viewModel().zoneMultiselectionViewModel]));EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$d))})));if(tabBootstrap.FeatureFlags.isEnabled('DashboardDesignMode')){this.$w=new dS}},{get_zoneMultiselection:function(){return this.$3$1},set_zoneMultiselection:function(ni){this.$3$1=ni},get_zoneSelections:function(){return this.$x},dispose:function(){var ni=ss.getEnumerator(Object.keys(this.$x));try{while(ni.moveNext()){var nj=ni.current();tab.MiscUtil.dispose$1(this.$x[nj])}}finally{ni.dispose()}ss.clearKeys(this.$x);this.get_zoneMultiselection().dispose();ss.makeGenericType(spiff.BaseView$1,[es]).prototype.dispose.call(this)},$b:function(){ReactDOM.unmountComponentAtNode(this.get_zoneMultiselection().get_rootElement()[0]);var ni=ss.getEnumerator(Object.keys(this.get_zoneSelections()));try{while(ni.moveNext()){var nj=ni.current();ReactDOM.unmountComponentAtNode(this.get_zoneSelections()[nj].get_rootElement()[0])}}finally{ni.dispose()}},addToDom:function(ni){this.$b();this.$a();this.$9();this.onAddedToDom()},onAddedToDom:function(){this.get_zoneMultiselection().addToDom(this.$t);this.$r();spiff.Widget.prototype.onAddedToDom.call(this)},$r:function(){var ni=ss.mkdel(this,function(){this.get_viewModel().zoneMultiselectionViewModel.updateZoneChromeOnScroll()});this.$s.scroll(ni)},$a:function(){this.$s=tab.WorkbookView.findDashboardContainer();this.$t=$("<div class='"+'tab-dashSelection'+"'></div>");if(tabBootstrap.FeatureFlags.isEnabled('DashboardDesignMode')){var ni=this.makeMouseSpec(this);this.$u=new EventUtils.TableauEventHandler(this.$s.get(0),ni)}},$9:function(){this.$s.append(this.$t)},$c:function(){this.$t.detach()},onViewModelPropertyChanged:function(ni,nj){if(nj.get_propertyName()==='visible'){this.$q()}},$q:function(){if(this.get_viewModel().get_visible()){this.$9()}else{this.$c()}},$g:function(ni){var nj=this.$x[ni];if(ss.isValue(nj)){ReactDOM.unmountComponentAtNode(nj.get_rootElement()[0]);nj.dispose();delete this.$x[ni]}},$8:function(ni){ni.get_rootElement().addClass('tab-dashDragDrop');ni.get_rootElement().css({top:this.get_viewModel().get_dashboardContentOffsetTop()+'px',left:this.get_viewModel().get_dashboardContentOffsetLeft()+'px'});ni.addToDom(this.$s)},$j:function(ni,nj){this.$i(false);var nk=ss.safeCast(ni,go);if(ss.isValue(nk)){nk.viewModel.add_disposed(nj);return}var nl=ss.safeCast(ni,eb);if(ss.isValue(nl)){nl.get_viewModel().add_disposed(nj)}},$d:function(ni){return},$k:function(ni){},$l:function(ni){},get_isDragTracking:function(){return this.$v},set_isDragTracking:function(ni){this.$v=ni},$i:function(ni){if(this.get_viewModel().get_currentlyOnDesignDashboard()){this.set_isDragTracking(ni);if(!ni){this.$p(this.get_shapeSelector())}}else{this.set_isDragTracking(false)}},makeMouseSpec:function(ni){var nj=new EventUtils.EventHandleSpec;nj.dragStart=ss.mkdel(this,function(nl){this.dragToSelectOverride(nl,ni)});nj.dragMove=ss.mkdel(this,function(nl){this.$7(nl)});nj.dragEnd=ss.mkdel(this,this.$e);var nk=nj;return nk},dragToSelectOverride:function(ni,nj){if(this.get_viewModel().get_currentlyOnDesignDashboard()){if(this.get_isDragTracking()){return}this.$f(nj,ni)}},get_shapeSelector:function(){return this.$w},$f:function(ni,nj){this.$w=new dS;this.get_shapeSelector().createDomAndAppend($(tab.ApplicationView.dashboardViewportSelector));this.$n(this.get_shapeSelector());this.$m(nj)},$n:function(ni){if(ss.isValue(ni)&&!this.get_isDragTracking()){ni.show()}},$m:function(ni){if(ni.originalEvent['button']>1){return}if(this.get_isDragTracking()){return}this.$i(true);ni.preventDefault();var nj=ni.get_GestureInfo();this.get_shapeSelector().dragStarted(nj,this.getLocalOffsetForDBSpacer())},getLocalOffsetForDBSpacer:function(){var ni=$(tab.WorkbookView.dashboardSpacerSelector);return tab.DomUtil.getRectXY(ni)},getScrollOffsetForDBSpacer:function(){var ni=$(tab.WorkbookView.dashboardSpacerSelector);return{x:tab.DoubleUtil.roundToInt(ni.scrollLeft()),y:tab.DoubleUtil.roundToInt(ni.scrollTop()),w:0,h:0}},$7:function(ni){if(this.get_isDragTracking()){ni.preventDefault();this.get_shapeSelector().updateAndRenderShape(ni.get_GestureInfo())}},$p:function(ni){if(ss.isValue(ni)){ni.hide();this.$h()}},$h:function(){if(ss.isValue(this.$w)){if(ss.isValue(this.$w.get_dom())){this.$w.get_dom().remove()}this.$w=null}},$o:function(ni,nj){if(!this.get_isDragTracking()){return}this.$i(false)},$e:function(ni){}});var es=global.tab.DashboardSelectionViewModel=ss.mkType(a,'tab.DashboardSelectionViewModel',function(ni){this.$6=null;this.$9={};this.$7=null;this.$8=false;this.$2$1=null;this.$2$2=null;this.zoneMultiselectionViewModel=null;this.zoneResizeViewModel=null;spiff.BaseViewModel.call(this);this.$6=ni;this.zoneMultiselectionViewModel=new mZ(ni);this.zoneResizeViewModel=new nb(ni);this.$7=[];this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.onDashboardModelChanged)).addEventBinding(ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.add_activeZoneChanged(ss.mkdel(this,this.$1));nj.add_zoneDragChanged(ss.mkdel(this,this.$5))}}),ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.add_activeZoneChanged(ss.mkdel(this,this.$1));nj.remove_zoneDragChanged(ss.mkdel(this,this.$5))}})))},{add_activeZonesAdded:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_activeZonesAdded:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_activeZonesRemoved:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_activeZonesRemoved:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},get_dashboardContentOffsetTop:function(){return tabBootstrap.VizLayoutConstants.get_authoringGutter().top+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_dashboardContentOffsetLeft:function(){return tabBootstrap.VizLayoutConstants.get_authoringGutter().left+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_isDashboard:function(){var ni=this.$6.get_model();return ss.isValue(ni)&&ni.get_isDashboard()},get_isStoryboard:function(){var ni=this.$6.get_model();return ss.isValue(ni)&&ni.get_isStoryboard()},get_visible:function(){return this.$8},set_visible:function(ni){if(this.$8===ni){return}this.$8=ni;this.notifyPropertyChanged('visible')},get_currentlyOnDesignDashboard:function(){return this.$6.get_model().get_currentlyOnDesignDashboard()},get_selectedZones:function(){return this.$7},get_dashboardZones:function(){return this.$6.get_model().get_zoneModels()},get_hasSelectedFloatingZones:function(){if(this.get_selectedZones().length===0){return false}var ni=this.get_selectedZones();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];if(ss.isValue(nk)&&!nk.get_isFloating()){return false}}return true},get_hasSelectedZones:function(){return this.get_selectedZones().length>0},get_dashboardWidth:function(){return((ss.isValue(this.$6.get_model())&&ss.isValue(this.$6.get_model().get_dashboardSize()))?this.$6.get_model().get_dashboardSize().w:0)},get_dashboardHeight:function(){return((ss.isValue(this.$6.get_model())&&ss.isValue(this.$6.get_model().get_dashboardSize()))?this.$6.get_model().get_dashboardSize().h:0)},get_zoneSelectionViewModels:function(){return this.$9},dispose:function(){this.zoneMultiselectionViewModel.dispose();var ni=ss.getEnumerator(Object.keys(this.$9));try{while(ni.moveNext()){var nj=ni.current();tab.MiscUtil.dispose$1(this.$9[nj])}}finally{ni.dispose()}ss.clearKeys(this.$9);spiff.BaseViewModel.prototype.dispose.call(this)},onDashboardModelChanged:function(){},moveZones:function(ni,nj){this.zoneMultiselectionViewModel.get_resizePreviewViewModel().delayMoveZonesCall(this.get_selectedZones(),ni,nj)},keyboardResizeZone:function(ni,nj){if(this.get_selectedZones().length===1){this.zoneMultiselectionViewModel.get_resizePreviewViewModel().updatePendingGeometry(this.get_selectedZones()[0]);this.zoneMultiselectionViewModel.get_resizePreviewViewModel().delayResizeZoneCall(this.get_selectedZones()[0],ni,nj)}},$1:function(){},$0:function(){var ni=this.$6.get_model();if(ss.isValue(ni)){var nj=ni.get_activeZoneIDs();var nk=[];for(var nl=0;nl<nj.length;nl++){var nm=nj[nl];var nn=ni.getZone(nm);if(ss.isValue(nn)&&!ss.keyExists(this.$9,nm)){var no=new nd(this.$6,ss.mkdel(this.zoneResizeViewModel,this.zoneResizeViewModel.isEdgeOrParentsResizable),nn,true);this.$9[nm]=no;nk.push(no);this.$7.push(nn);nn.get_zoneCommonModel().add_resizeZone(ss.mkdel(this.zoneMultiselectionViewModel,this.zoneMultiselectionViewModel.handleZoneSizeChanged))}}if(!tab.MiscUtil.isNullOrEmpty$4(nk)){this.zoneMultiselectionViewModel.handleZoneSizeChanged();this.$2(nk)}}},$4:function(ni){var nj=[];for(var nk=this.$7.length-1;nk>=0;nk--){var nl=this.$7[nk];if(ss.keyExists(this.$9,nl.get_zoneId())||ni){this.$9[nl.get_zoneId()].dispose();delete this.$9[nl.get_zoneId()];nj.push(nl.get_zoneId());ss.removeAt(this.$7,nk);nl.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this.zoneMultiselectionViewModel,this.zoneMultiselectionViewModel.handleZoneSizeChanged))}}if(!tab.MiscUtil.isNullOrEmpty$4(nj)){this.zoneMultiselectionViewModel.handleZoneSizeChanged();this.$3(nj)}},$5:function(){},$3:function(ni){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(ni)}},$2:function(ni){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(ni)}}});var et=global.tab.DashboardSheetListActionHandler=ss.mkType(a,'tab.DashboardSheetListActionHandler',function(ni,nj){this.$2=null;this.$3=null;this.$2=ni;this.$3=nj},{$1:function(){return ss.isValue(this.$2.get_model())&&this.$2.get_model().get_activeZoneID()!==0},$0:function(){return false},getSelectedSheet:function(ni){if(ss.isValue(this.$2.get_model())&&ss.isValue(this.$2.get_model().sheetListModel)&&ss.isValue(this.$2.get_model().sheetListModel.get_sheets())&&this.$2.get_model().get_activeZoneID()!==0){var nj=this.$2.get_model().getZone(this.$2.get_model().get_activeZoneID());if(ss.isValue(nj)&&nj.get_zoneType()==='viz'){var nk=lr.findSheetListItemByName(this.$2.get_model().sheetListModel.get_sheets(),nj.get_worksheetName());return(ss.isNullOrUndefined(nk)?null:nk.pm)}}return ni},determineSelectedSheet:function(ni,nj){var nk=ni;if(nj===null){if(!this.$1()){nk=null}return nk}else{if(nj.isIncluded){var nl=tab.ModelUtils.getZoneIdForSheetName(nj.name);if(nl>-1){var nm=this.$2.get_model().zonesModel.getZone(nl);tab.SelectionClientCommands.setActiveZone(nm.get_zoneId(),'replace',null);return nk}}if(_.isEqual(ni,nj)){return nk}nk=nj;if(this.$1()||this.$0()){tab.SelectionClientCommands.clearActiveZone()}return nk}},onUpdatedSheetList:function(ni){return ni},onNewFlipboardNav:function(ni){return ni},onActiveZoneChanged:function(ni){if(this.$1()){return null}return ni},onDoubleClicked:function(ni,nj){if(tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetDashboard()&&!ni.isIncluded){tab.DashboardClientCommands.addSheetToDashboard(ni.name,nj)}},getDragInstance:function(ni){var nj=false;if(ss.isValue(this.$3)){nj=this.$3.get_addNewZoneAsFloating()}if(ni.isIncluded){return null}var nk=tab.DashboardClientCommands.getSheetDragDropTargets(null,null);var nl=$.Deferred();nk.done(function(no){nl.resolve(no.zoneDragDrop)}).fail(function(){nl.reject()});var nm=co.createDeferredRect(nl);var nn;nn=lp.create(new fE(ni.name,nj),nl,nm);return nn}});var eu=global.tab.DashboardSheetListComponent=ss.mkType(a,'tab.DashboardSheetListComponent',function(ni,nj){ss.makeGenericType(spiff.ListComponent$2,[Object,Object]).call(this,ni,nj,'sheetListLabel');spiff.PureRender.mixIn(this)},{getItemKey:function(ni){return ni.name},isSelected:function(ni){return ss.isValue(this.props.selectedSheet)&&ss.referenceEquals(this.props.selectedSheet.name,ni.name)},buildItem:function(ni){return React.createElement(lq,{actions:this.props.actions,selected:this.isSelected(ni),sheet:ni,isReplaceSheetSource:this.props.hasReplaceableSheet&&!ni.isIncluded})}});var ev=global.tab.DashboardShowGridShortcut=ss.mkType(a,'tab.DashboardShowGridShortcut',function(ni){this.$0=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=ni},{getKeyComboOrKeyCombos:function(){return ss.applyConstructor(KeyboardShortcuts.KeyCombo,['g',null].concat(null))},getAdditionalOptions:function(){var ni=new Object;ni.throttleTimeInMs=50;ni.shouldUseKeyUp=true;return ni},isAllowed:function(ni){return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,ni)&&this.$0.addedToDom&&this.$0.get_viewModel().get_isDashboard()},executeShortcut:function(ni){tab.DashboardClientCommands.showGridOnDashboard(!this.$0.get_viewModel().dashboardGrid.get_isGridOn());eh.logGridStateChangeEvent(this.$0.get_viewModel().dashboardGrid.get_isGridOn(),true)},getTelemetryKey:function(){return'Dashboard Show Grid'}});var ew=global.tab.DashboardSizeComponent=ss.mkType(a,'tab.DashboardSizeComponent',function(ni,nj){this.$7=null;this.$8=null;this.$a=null;this.$9=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.state={isPopupShowing:false};this.$7=ss.mkdel(this,function(nk){this.$a=ReactDOM.findDOMNode(ss.safeCast(nk,spiff.TextDropdownButtonComponent))});this.$8=ss.mkdel(this,function(nk){this.$9=ss.safeCast(nk,ss.isValue(nk)&&(ss.isInstanceOfType(nk,Element)&&nk.tagName==='INPUT'))})},{componentDidMount:function(){EventUtils.GlobalUIEvents.add_DismissTemporaryElements(ss.mkdel(this,this.$1))},componentWillUnmount:function(){EventUtils.GlobalUIEvents.remove_DismissTemporaryElements(ss.mkdel(this,this.$1))},render:function(){var ni=((this.props.isNonDefaultLayout&&!this.props.isStory)?this.$4():this.$5());var nj=(this.state.isPopupShowing?ss.mkdel(this,this.$3)():null);return spiff.DOMElements.div({},ni,nj)},$5:function(){var ni=new EventUtils.EventHandleSpec;ni.tap=ss.mkdel(this,this.$2);return EventUtils.EventForwarder.div(ni,{className:'tabAuthDashboardSizeSelector',title:this.props.currentSizeText,'aria-expanded':this.state.isPopupShowing,role:'button',tabIndex:0,onKeyPress:ss.mkdel(this,function(nj){if(nj.charCode===32||nj.charCode===13||nj.charCode===108){this.$6()}})},React.createElement(spiff.TextDropdownButtonComponent,{selectionText:this.props.currentSizeText,styleClass:'tab-unification-line-arrow-dropdown',key:'sizeButton',ref:this.$7}))},$3:function(){var ni=React.createElement(ex,this.props.popupProps);return React.createElement(SharedWidgets.DialogWidget,{anchorEl:this.$a,key:'sizePopup',anchorOrigin:{horizontal:'left',vertical:'bottom'},stackedOrigin:{horizontal:'left',vertical:'top'},zIndex:988,children:ni,dialogWidth:260,handleGlassClick:ss.mkdel(this,this.$1),onCloseRequest:ss.mkdel(this,this.$1),isModal:true,isGlassTransparent:true,positioningBehavior:3,type:2,title:tab.Strings.DashboardAuthoringSizePopupTitle,testId:'DashboardSizeAuthoringPopup'})},$4:function(){var ni='tabAuthDashboardSizeRadio';var nj=React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,{'aria-label':this.props.sectionTitle,buttonList:this.props.sizeRadioOptions,checkedIndex:this.props.sizeRadioSelectionIndex,handleChange:this.props.onSizeRadioChange});if(ss.isValue(this.props.heightStepperProps)){this.props.heightStepperProps.inputRef=this.$8;this.props.heightStepperProps.onValueUpdated=ss.mkdel(this,this.$0)}var nk=React.createElement(SharedWidgets.IntegerStepperWidget,this.props.heightStepperProps);return spiff.ReactElement.div$1(ni,[nj,nk])},$0:function(ni){this.props.onFitWidthStepperValueChange(ni,ss.referenceEquals(this.$9,document.activeElement))},$2:function(ni){this.$6()},$6:function(){this.setState({isPopupShowing:true})},$1:function(){this.setState({isPopupShowing:false})}});var ex=global.tab.DashboardSizePopupComponent=ss.mkType(a,'tab.DashboardSizePopupComponent',function(ni,nj){React.Component.call(this,ni,nj)},{render:function(){return spiff.DOMElements.div({className:'tabAuthDashboardSizePopup'},this.$7(),this.$6())},$7:function(){var ni=_.map(this.props.sizeModeOptions,function(nk){return nk.sizeModeName.toString()});var nj=this.props.selectedSizeMode.sizeModeName;return this.$2(ni,ss.mkdel(this,this.$9),nj,'SizeMode')},$6:function(){var ni=null;switch(this.props.currentSizeMode){case'automatic':{ni=spiff.DOMElements.div(null,tab.Strings.AutomaticDashboardSizeText);break}case'fixed':{ni=this.$3();break}default:{ni=this.$5();break}}return spiff.DOMElements.div({className:'tabAuthDashboardSizeControls'},ni)},$5:function(){var ni=!this.props.maxSelected;var nj=!this.props.minSelected;var nk=this.$0(tab.Strings.DashboardAuthoringMinimumSizeLabel,'tabAuthDashboardMinSizeControls','dash-size-min-checkbox',ss.mkdel(this,function(nm){this.props.toggleRangeBoundaries(nm,this.props.maxSelected)}),ss.mkdel(this,function(nm){this.props.setMinWidth(nm)}),ss.mkdel(this,function(nm){this.props.setMinHeight(nm)}));var nl=this.$0(tab.Strings.DashboardAuthoringMaximumSizeLabel,'tabAuthDashboardMaxSizeControls','dash-size-max-checkbox',ss.mkdel(this,function(nm){this.props.toggleRangeBoundaries(this.props.minSelected,nm)}),ss.mkdel(this,function(nm){this.props.setMaxWidth(nm)}),ss.mkdel(this,function(nm){this.props.setMaxHeight(nm)}));return spiff.DOMElements.div(null,nk(this.props.minSelected,ni,this.props.minWidth,this.props.minHeight),nl(this.props.maxSelected,nj,this.props.maxWidth,this.props.maxHeight))},$0:function(ni,nj,nk,nl,nm,nn){return ss.mkdel(this,function(no,np,nq,nr){var ns=this.$8(no,nq,nr,nm,nn);var nt=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:ni,checked:no,handleChange:nl,testId:nk,disabled:np});return spiff.DOMElements.div({className:nj},nt,ns)})},$8:function(ni,nj,nk,nl,nm){var nn=this.$1(nj,tab.Strings.DashboardAuthoringWidthSpinnerLabel,nl,!ni,'tabAuthDashboardWidthSpinner');var no=this.$1(nk,tab.Strings.DashboardAuthoringHeightSpinnerLabel,nm,!ni,'tabAuthDashboardHeightSpinner');return spiff.DOMElements.div({className:'tabAuthDashboardSpinnerPair'},nn,no)},$1:function(ni,nj,nk,nl,nm){return spiff.DOMElements.div({className:nm},React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'dashboard-size-component-'+nj+nm,label:nj,max:this.props.maxDimension,min:this.props.minDimension,delta:this.props.stepSize,start:ni,onValueUpdated:nk,disabled:nl}))},$3:function(){var ni=this.$4();var nj=this.$8(true,this.props.width,this.props.height,ss.mkdel(this,function(nk){this.props.setWidth(nk)}),ss.mkdel(this,function(nk){this.props.setHeight(nk)}));return spiff.DOMElements.div(null,ni,nj)},$4:function(){var ni=(ss.isValue(this.props.selectedPreset)?this.props.selectedPreset.get_name():tab.Strings.DashboardAuthoringCustomSizeName);var nj=_.map(this.props.presets,function(nk){return nk.get_name()});return this.$2(nj,ss.mkdel(this,this.$a),ni,'Presets')},$2:function(ni,nj,nk,nl){return React.createElement(SharedWidgets.DropdownWidget,{dropdownType:1,maxHeight:300,menuItemInfos:_.map(ni,ss.mkdel(this,function(nm){return{displayValue:nm,value:nm}})),testId:nl,onSelect:nj,selectedValue:nk,placeholder:nk,label:'',zIndex:988})},$a:function(ni){this.props.setToPresetFromName(ni)},$9:function(ni){this.props.setNewSizeModeFromName(ni)}});var ey=global.tab.DashboardSizePopupComponentConstants=ss.mkType(a,'tab.DashboardSizePopupComponentConstants');var ez=global.tab.DashboardSizePopupViewModel=ss.mkType(a,'tab.DashboardSizePopupViewModel',function(ni){this.$e=null;this.$f=null;this.$h=null;this.$g=null;this.$i=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$e=ni;this.$f=ni.createChildModelHolder(tab.DashboardSizeControlModel).call(ni,function(nj){return nj.get_dashboardSizeControlModel()});this.disposables.add$2([this.$f.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){nj.add_sizeInfoUpdated(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){nj.add_sizeInfoUpdated(ss.mkdel(this,this.incrementProps))})),this.$f])},{get_minHeight:function(){return this.$9().get_currentMinHeight()},set_minHeight:function(ni){this.setRangedSize(this.get_minWidth(),ni,this.get_maxWidth(),this.get_maxHeight(),'minheight')},get_minWidth:function(){return this.$9().get_currentMinWidth()},set_minWidth:function(ni){this.setRangedSize(ni,this.get_minHeight(),this.get_maxWidth(),this.get_maxHeight(),'minwidth')},get_maxHeight:function(){return this.$9().get_currentMaxHeight()},set_maxHeight:function(ni){this.setRangedSize(this.get_minWidth(),this.get_minHeight(),this.get_maxWidth(),ni,'maxheight')},get_maxWidth:function(){return this.$9().get_currentMaxWidth()},set_maxWidth:function(ni){this.setRangedSize(this.get_minWidth(),this.get_minHeight(),ni,this.get_maxHeight(),'maxwidth')},get_height:function(){return this.$9().get_currentHeight()},set_height:function(ni){this.setFixedSize(this.get_width(),ni,'fixedheight')},get_width:function(){return this.$9().get_currentWidth()},set_width:function(ni){this.setFixedSize(ni,this.get_height(),'fixedwidth')},get_storedWidth:function(){var ni=this.$h;if(ss.isNullOrUndefined(ni)){ni=this.get_width()}return ni},set_storedWidth:function(ni){this.$h=ni},get_storedHeight:function(){var ni=this.$g;if(ss.isNullOrUndefined(ni)){ni=this.get_height()}return ni},set_storedHeight:function(ni){this.$g=ni},$b:function(){return this.$e.get_model().get_sheetName()},$c:function(){return this.$f.get_model()},$a:function(){return this.$f.get_model().layoutInfoModel},$9:function(){return this.$f.get_model().dashboardSizeModel},$d:function(){return this.$f.get_model().get_sizeModeOptions()},$5:function(){if(this.$9().get_sizeMode()!=='fixed'||ss.isNullOrUndefined(this.$a())||ss.isNullOrUndefined(this.$9())){return null}var ni=_.find(this.$a().get_presetSizes(),ss.mkdel(this,function(nj){return nj.get_width()===this.get_width()&&nj.get_height()===this.get_height()}));return((typeof(ni)==='undefined')?null:ni)},$6:function(){return _.find(this.$d(),ss.mkdel(this,function(ni){return ni.dashboardSizingMode===this.$9().get_sizeMode()}))},$7:function(ni){return _.find(this.$a().get_presetSizes(),function(nj){return ss.referenceEquals(nj.get_name(),ni)})},$8:function(ni){return _.find(this.$d(),function(nj){return ss.referenceEquals(nj.sizeModeName,ni)}).dashboardSizingMode},createInitialProps:function(){return{toggleRangeBoundaries:ss.mkdel(this,this.toggleRangeBoundaries),setToPresetFromName:ss.mkdel(this,this.setToPresetFromName),setNewSizeModeFromName:ss.mkdel(this,this.setNewSizeModeFromName),setHeight:ss.mkdel(this,function(ni){this.$4(ss.mkdel(this,function(){this.set_height(ni)}))}),setMinHeight:ss.mkdel(this,function(ni){this.$4(ss.mkdel(this,function(){this.set_minHeight(ni)}))}),setMaxHeight:ss.mkdel(this,function(ni){this.$4(ss.mkdel(this,function(){this.set_maxHeight(ni)}))}),setWidth:ss.mkdel(this,function(ni){this.$4(ss.mkdel(this,function(){this.set_width(ni)}))}),setMinWidth:ss.mkdel(this,function(ni){this.$4(ss.mkdel(this,function(){this.set_minWidth(ni)}))}),setMaxWidth:ss.mkdel(this,function(ni){this.$4(ss.mkdel(this,function(){this.set_maxWidth(ni)}))})}},createUpdatedProps:function(){if(ss.isNullOrUndefined(this.$f.get_model())||ss.isNullOrUndefined(this.$c())||ss.isNullOrUndefined(this.$9())||ss.isNullOrUndefined(this.$a())){return null}var ni={minSelected:this.get_minWidth()>0||this.get_minHeight()>0,maxSelected:this.get_maxWidth()>0||this.get_maxHeight()>0,currentSizeMode:this.$9().get_sizeMode(),width:this.get_width(),height:this.get_height(),maxHeight:(this.get_props().maxSelected?this.get_maxHeight():this.get_storedHeight()),maxWidth:(this.get_props().maxSelected?this.get_maxWidth():this.get_storedWidth()),minWidth:(this.get_props().minSelected?this.get_minWidth():this.get_storedWidth()),minHeight:(this.get_props().minSelected?this.get_minHeight():this.get_storedHeight()),presets:this.$a().get_presetSizes(),selectedPreset:this.$5(),sizeModeOptions:this.$d(),selectedSizeMode:this.$6(),minDimension:this.$c().get_minDimension(),maxDimension:this.$c().get_maxDimension(),stepSize:this.$c().get_stepSize()};return ni},toggleRangeBoundaries:function(ni,nj){if(!ni&&!nj){this.setNewSizeMode('automatic')}else if(!ni){this.set_storedWidth(this.get_minWidth());this.set_storedHeight(this.get_minHeight());this.setRangedSize(null,null,this.get_maxWidth(),this.get_maxHeight(),'no')}else if(!nj){this.set_storedWidth(this.get_maxWidth());this.set_storedHeight(this.get_maxHeight());this.setRangedSize(this.get_minWidth(),this.get_minHeight(),null,null,'no')}else{var nk=((this.get_minWidth()!==0)?this.get_minWidth():Math.min(this.get_storedWidth(),this.get_maxWidth()));var nl=((this.get_minHeight()!==0)?this.get_minHeight():Math.min(this.get_storedHeight(),this.get_maxHeight()));var nm=((this.get_maxWidth()!==0)?this.get_maxWidth():Math.max(this.get_storedWidth(),this.get_minWidth()));var nn=((this.get_maxHeight()!==0)?this.get_maxHeight():Math.max(this.get_storedHeight(),this.get_minHeight()));this.setRangedSize(nk,nl,nm,nn,'no')}},setToPresetFromName:function(ni){var nj=this.$7(ni);if(ss.isValue(nj)){this.setToPreset(nj)}},setToPreset:function(ni){if(ni.get_width()===0&&ni.get_height()===0){this.setAutomaticSize()}else{this.setFixedSize(ni.get_width(),ni.get_height(),'no')}},setNewSizeModeFromName:function(ni){var nj=this.$8(ni);this.setNewSizeMode(nj)},setNewSizeMode:function(ni){switch(ni){case'automatic':{this.setAutomaticSize();break}case'fixed':{var nj=this.get_width();var nk=this.get_height();if(this.$9().get_sizeMode()==='range'&&this.get_minWidth()>0&&this.get_minHeight()>0){nj=this.get_minWidth();nk=this.get_minHeight()}this.setFixedSize(nj,nk,'no');break}default:{this.setRangedSize(this.get_width(),this.get_height(),this.get_width()+this.$c().get_stepSize(),this.get_height()+this.$c().get_stepSize(),'no');break}}},$4:function(ni){this.$3();this.$i=window.setTimeout(ss.mkdel(this,function(){this.$3();ni()}),450)},$3:function(){this.$i=tab.MiscUtil.clearTimeout(this.$i)},setAutomaticSize:function(){tab.DashboardClientCommands.setDashboardSizeAutomatic(this.$b(),this.$c())},setFixedSize:function(ni,nj,nk){tab.DashboardClientCommands.setDashboardSizeFixed(this.$b(),nk,ni,nj,this.$c())},setRangedSize:function(ni,nj,nk,nl,nm){tab.DashboardClientCommands.setDashboardSizeRange(this.$b(),nm,ni,nj,nk,nl,this.$c())}});var eA=global.tab.DashboardSizeRadioOption=ss.mkEnum(a,'tab.DashboardSizeRadioOption',{default$1:0,fitAll:1,fitWidth:2});var eB=global.tab.DashboardSizeViewModel=ss.mkType(a,'tab.DashboardSizeViewModel',function(ni){this.$m=null;var nj=[];nj.push({value:tab.Strings.AuthDashboardPaneSizeFitDefault,label:tab.Strings.AuthDashboardPaneSizeFitDefault,testId:'size-default-opt'});nj.push({value:tab.Strings.AuthDashboardPaneSizeFitAll,label:tab.Strings.AuthDashboardPaneSizeFitAll,testId:'size-fit-all-opt'});nj.push({value:tab.Strings.AuthDashboardPaneSizeFitWidth,label:tab.Strings.AuthDashboardPaneSizeFitWidth,testId:'size-fit-width-opt'});this.$n=nj;this.dashboardSizePopup=null;this.$l=null;this.$k=0;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$m=ni;this.dashboardSizePopup=new ez(ni);this.disposables.add$1(this.$m.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nk){if(nk.get_isDashboard()&&!ss.referenceEquals(nk.get_sheetName(),this.$l)){this.$l=nk.get_sheetName();this.$k=0}nk.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nk.add_currentDeviceLayoutChanged(ss.mkdel(this,this.$4));if(ss.isValue(nk.get_dashboardSizeControlModel())){nk.get_dashboardSizeControlModel().add_sizeInfoUpdated(ss.mkdel(this,this.$6))}}),ss.mkdel(this,function(nk){nk.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nk.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.$4));if(ss.isValue(nk.get_dashboardSizeControlModel())){nk.get_dashboardSizeControlModel().remove_sizeInfoUpdated(ss.mkdel(this,this.$6))}})));this.disposables.add$2([this.addChildViewModel(this.dashboardSizePopup),this.dashboardSizePopup])},{$b:function(){return this.$m.get_model()},$c:function(){return this.$b().get_dashboardSizeControlModel()},$d:function(){return this.$c().dashboardSizeModel},$a:function(){return this.$b().get_currentDeviceLayout()},$e:function(){return this.$d().get_currentHeight()},$f:function(){return ss.isValue(this.$b())&&this.$b().get_isCurrentLayoutAutoGenerated()},$h:function(){if(this.$j()==='automatic'){if(this.$a()==='desktop'){return 0}return 1}else if(this.$j()==='vscroll'){return 2}return 0},$i:function(){return this.$b().get_sheetName()},$j:function(){return this.$d().get_sizeMode()},$g:function(){if(this.$a()==='default'){return tab.Strings.AuthDashboardPaneSizeDefault}return tab.Strings.AuthDashboardPaneSize(dT.getUserString(this.$a()))},$4:function(){this.$k=0;this.incrementProps()},$6:function(){this.$9();this.incrementProps()},$7:function(ni,nj){this.$9();var nk=nj;if(nk===0){tab.DashboardClientCommands.resetDashboardCurrentLayoutSizing(this.$i())}else if(nk===1){tab.DashboardClientCommands.setDashboardSizeAutomatic(this.$i(),this.$c())}else{this.$8()}},$8:function(){var ni=((this.$k>0)?this.$k:this.$e());tab.DashboardClientCommands.setDashboardSizeVscroll(this.$i(),'no',0,ni,this.$c(),'immediately')},$5:function(ni,nj){var nk=(nj?'immediately':'afterDelay');tab.DashboardClientCommands.setDashboardSizeVscroll(this.$i(),'scrollableheight',0,ni,this.$c(),nk)},$9:function(){if(this.$h()===2){this.$k=this.$e()}},$3:function(){var ni=this.$h()!==2||this.$f();var nj={containerStyle:eB.$1,delta:this.$c().get_stepSize(),disabled:ni,inputStyle:eB.$3,label:tab.Strings.DashboardAuthoringHeightSpinnerLabel,labelStyle:(ni?eB.$2:eB.$4),max:this.$c().get_maxDimension(),min:this.$c().get_minDimension(),pageDelta:this.$c().get_stepSize(),testId:'fit-width-height-stepper'};if(ni&&this.$k>0){nj.start=this.$k}else if(!ni){nj.start=this.$e()}return nj},createUpdatedProps:function(){if(ss.isNullOrUndefined(this.$b())||ss.isNullOrUndefined(this.$c())||ss.isNullOrUndefined(this.$d())){return null}return{currentSizeText:this.$d().get_currentSizeText(),heightStepperProps:this.$3(),isNonDefaultLayout:this.$a()!=='default',isStory:tab.ApplicationModel.get_instance().get_currentSheetType()==='story',onSizeRadioChange:ss.mkdel(this,this.$7),onFitWidthStepperValueChange:ss.mkdel(this,this.$5),popupProps:this.dashboardSizePopup.get_props(),sectionTitle:this.$g(),sizeRadioOptions:this.$n.map(ss.mkdel(this,function(ni){ni.disabled=this.$f();return ni})),sizeRadioSelectionIndex:this.$h()}}});var eC=global.tab.DashboardTitleCheckboxViewModel=ss.mkType(a,'tab.DashboardTitleCheckboxViewModel',function(ni){this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=ni;this.disposables.add$1(this.$3.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){nj.add_titleVisibilityChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){nj.remove_titleVisibilityChanged(ss.mkdel(this,this.incrementProps))})))},{createInitialProps:function(){return{isChecked:false,changeDashboardTitle:ss.mkdel(this,this.toggleDashboardTitle)}},createUpdatedProps:function(){if(ss.isValue(this.$3.get_model())){return{isChecked:this.$3.get_model().get_isTitleVisible()}}return null},toggleDashboardTitle:function(ni){if(ss.isValue(this.$3)&&ss.isValue(this.$3.get_model())&&this.$3.get_model().get_isTitleVisible()!==ni){tab.DashboardClientCommands.showDashboardTitle(this.$3.get_model().get_sheetName())}}});var eD=global.tab.DashboardZoneListComponent=ss.mkType(a,'tab.DashboardZoneListComponent',function(ni,nj){this.$2=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.$2={renderSingleNode:ss.mkdel(this,this.$1)}},{render:function(){var ni=[];for(var nj=0;nj<this.props.rootNodes.length;nj++){var nk=this.props.rootNodes[nj];ni.push(mn.create(tab.DeviceLayoutZoneInfo).call(null,this.$0(nk)))}return spiff.DOMElements.div({},ni)},$0:function(ni){var nj=ni.get_item().deviceZoneListItem;return $.extend({rootNode:ni,key:nj.get_zoneName()+'_'+nj.get_zoneId()},this.$2)},$1:function(ni){return eE.create({addToDashboard:this.props.addToDashboard,createDragInstance:this.props.createDragInstance,deviceLayoutZoneInfo:ni,disabled:this.props.isCurrentLayoutAutoGenerated,selected:this.props.selectedZone===ni.deviceZoneListItem.get_zoneId(),selectZone:this.props.selectZone,showContextMenu:this.props.showContextMenu})}});var eE=global.tab.DashboardZoneListNodeComponent=ss.mkType(a,'tab.DashboardZoneListNodeComponent',function(ni,nj){this.$5=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.$5=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}))},{componentDidMount:function(){if(this.props.selected){this.$4()}},componentDidUpdate:function(ni){var nj=ni.selected;if(this.props.selected&&!nj){this.$4()}},$4:function(){var ni=ReactDOM.findDOMNode(this);var nj=$(ni).closest('.'+'tab-zoneList').get(0);spiff.ScrollTo.elementInContainer(ni,nj)},startDrag:function(ni){if(!ss.staticEquals(this.props.createDragInstance,null)){return this.props.createDragInstance(this.props.deviceLayoutZoneInfo)}return null},acceptsDragType:function(){return 1},render:function(){var ni=new EventUtils.EventHandleSpec;ni.tap=ss.mkdel(this,this.$2);ni.doubleTap=ss.mkdel(this,this.$0);ni.rightClick=ss.mkdel(this,this.$1);var nj=ni;var nk=['tab-zoneListNode'];if(this.props.disabled||!this.props.deviceLayoutZoneInfo.deviceZoneVisibilityListItem.get_isEnabled()){nk.push('disabledNode')}if(this.props.selected){nk.push('selected')}var nl=this.props.deviceLayoutZoneInfo.deviceZoneListItem.get_label();return EventUtils.EventForwarder.div(nj,{className:nk.join(' '),ref:this.$5},this.$3(),spiff.DOMElements.div({className:'zoneLabel',title:nl,key:nl},nl))},$3:function(){var ni=['tab-zoneTypeIcon'];var nj=this.props.deviceLayoutZoneInfo.deviceZoneListItem.get_zoneType();if(nj==='layout-flow'){if(this.props.deviceLayoutZoneInfo.deviceZoneListItem.get_direction()==='vertical'){ni.push('vertical')}else{ni.push('horizontal')}}else if(nj==='dashboard-object'){ni.push(this.props.deviceLayoutZoneInfo.deviceZoneListItem.get_dashboardObjectType().toString())}else{ni.push(nj.toString())}if(this.props.deviceLayoutZoneInfo.deviceZoneVisibilityListItem.get_isVisible()){ni.push('zoneIsVisible')}return spiff.DOMElements.div({className:'tab-zoneTypeContainerIcon',key:'zone-list-icon-container'},spiff.DOMElements.div.apply(null,[{className:ni.join(' ')}].concat(null)))},$0:function(ni){if(!ss.staticEquals(this.props.addToDashboard,null)&&!this.props.disabled){this.props.addToDashboard(this.props.deviceLayoutZoneInfo)}},$1:function(ni){if(!ss.staticEquals(this.props.showContextMenu,null)&&!this.props.disabled){var nj=ReactDOM.findDOMNode(this);this.props.showContextMenu(this.props.deviceLayoutZoneInfo,new spiff.ShowMenuOptions($(nj),false))}},$2:function(ni){if(!ss.staticEquals(this.props.selectZone,null)&&!this.props.disabled){this.props.selectZone(this.props.deviceLayoutZoneInfo)}}},{create:function(ni){return React.createElement(eE,ni)}});var eF=global.tab.DataCatalogHelpers=ss.mkType(a,'tab.DataCatalogHelpers',null,null,{getDataCatalogAssetTypeString:function(ni){switch(ni){case 8:{return'CloudFile'}case 7:{return'Column'}case 4:{return'DatabaseTable'}case 3:{return'DatabaseServer'}case 5:{return'Field'}case 9:{return'File'}case 6:{return'Flow'}case 2:{return'EmbeddedDatasource'}case 1:{return'PublishedDatasource'}case 12:{return'VirtualConnection'}case 11:{return'VirtualConnectionTable'}case 10:{return'WebDataConnector'}case 0:{return'Workbook'}default:{return null}}},getContentTypeString:function(ni){switch(ni){case 7:{return'column'}case 4:{return'table'}case 3:{return'database'}case 5:{return'field'}case 6:{return'flow'}case 1:case 2:{return'datasource'}case 12:{return'virtualConnection'}case 11:{return'virtualConnectionTable'}default:{return null}}},flattenLabels:function(ni){var nj=[];var nk=new ss.ObjectEnumerator(ni.getAllAssetMetadata());try{while(nk.moveNext()){var nl=nk.current();nj=nj.concat.apply(nj,[].concat.apply([],nl.value.get_labels()))}}finally{nk.dispose()}var nm=new ss.ObjectEnumerator(ni.getAllFieldMetadata());try{while(nm.moveNext()){var nn=nm.current();nj=nj.concat.apply(nj,[].concat.apply([],nn.value.get_labels()))}}finally{nm.dispose()}return nj},getProbablyCollectionForLabels:function(ni){var nj=null;var nk=null;var nl={};var nm=false;var nn=[].concat.apply([],ni);for(var no=0;no<nn.length;no++){var np=nn[no];if(ss.isNullOrUndefined(np)){continue}switch(np.get_type()){case'DataQualityWarning':{if(ss.isNullOrUndefined(nk)){nk={count:1,value:np.get_value(),severe:np.get_isElevated()}}else{nk.count++;nk.severe=!!(nk.severe|np.get_isElevated())}break}case'DataQualityCertification':{nm=true;break}default:{if(np.get_category()==='SENSITIVITY'){if(ss.isNullOrUndefined(nj)){nj={value:np.get_value(),severe:np.get_isElevated(),count:1}}else{nj.count++;nj.severe=!!(nj.severe|np.get_isElevated())}}else{var nq={category:np.get_category(),count:1,value:np.get_value()};if(ss.keyExists(nl,np.get_category())){nl[np.get_category()].push(nq)}else{nl[np.get_category()]=[nq]}}break}}}var nr=[];var ns=new ss.ObjectEnumerator(nl);try{while(ns.moveNext()){var nt=ns.current();var nu=nt.value[0];nu.count=nt.value.length;nr.push(nu)}}finally{ns.dispose()}return{certified:nm,warning:nk,custom:nr,sensitivity:nj}}});var eG=global.tab.DataSchemaFieldListContentTemplate=ss.mkType(a,'tab.DataSchemaFieldListContentTemplate',function(){spiff.Template.call(this,$("<div class='tab-schemaFieldListContent'></div>"))});var eH=global.tab.DataSchemaTemplate=ss.mkType(a,'tab.DataSchemaTemplate',function(ni){this.sources=null;this.sourceTitles=null;this.connectToData=null;this.sourcesHeader=null;this.sections={};this.headers={};this.panes={};this.contentArea=null;this.contentAreaScroll=null;this.dropInviteElements=null;this.schemaViewer=null;this.schemaSearch=null;this.fieldViewer=null;this.schemaCommonArea=null;this.topLevelFieldsArea=null;this.leftPaneEmptySpace=null;spiff.Template.call(this,$(ni));this.sources=this.getElementBySelector('.tab-dataSources');this.sourceTitles=this.getElementBySelector('.tab-dataSourceTitles');this.connectToData=this.getElementBySelector('.tab-connectToData');this.sourcesHeader=this.getElementBySelector('.tab-schemaDataSourcesHeader');this.schemaSearch=this.getElementBySelector('.tab-schemaSearch');this.contentArea=this.getElementBySelector('.tab-schemaViewerContentArea');this.contentAreaScroll=this.getElementBySelector('.tab-schemaViewerScroll');this.dropInviteElements=this.getElementsBySelector('.tab-schemaDropInviteTop, .tab-schemaDropInviteLeft, .tab-schemaDropInviteBottom, .tab-schemaDropInviteRight');this.schemaViewer=this.getElementBySelector('.tab-schemaViewerScroll');this.fieldViewer=this.getElementsBySelector('.tab-schemaViewerFields');var nj=this.getElementsBySelector('.tab-schemaCommon');this.schemaCommonArea=((nj.length===1)?nj:null);var nk=this.getElementsBySelector('.tab-schemaCommonArea');this.topLevelFieldsArea=((nk.length===1)?nk:null);this.leftPaneEmptySpace=this.getElementBySelector('.tab-schemaPane')},{get_schemaElements:function(){return this.domRoot.find(gm.fieldDomSelector)},getDimMeasSeparatorForSection:function(ni){return ni.find('.tab-columnSeparator')}});var eI=global.tab.DataSchemaView=ss.mkType(a,'tab.DataSchemaView',function(ni,nj){this.dom=null;this.perInitDisposables=new tab.DisposableHolder;this.$1o={};this.$1q={};this.$1v=null;this.$1s=null;this.$1x=null;this.$1p=false;this.$1m=null;this.$1r=false;this.$1n=null;this.$1l=null;this.$1k=null;this.$1u=SharedWidgets.TabStyles.Sizing.RowHeight;this.$1y=null;this.$1w=null;this.$1t=null;this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseView$1,[lc]).call(this,ni,nj);this.dom=this.get_template();this.dom.sourcesHeader.css('display','none');_.each(Object.keys(this.get_headers()),ss.mkdel(this,function(nk){this.get_headers()[nk].hide()}));_.each(Object.keys(this.get_sections()),ss.mkdel(this,function(nk){this.get_sections()[nk].hide()}));this.initContent();this.$1v={};this.$V();this.$S();this.$T(ni)},{get_sources:function(){return this.dom.sources},get_sections:function(){return this.dom.sections},get_headers:function(){return this.dom.headers},get_panes:function(){return this.dom.panes},get_domRoot:function(){return this.dom.domRoot},get_topLevelFieldsArea:function(){return this.dom.topLevelFieldsArea},get_sourceTitles:function(){return this.dom.sourceTitles},get_schemaElements:function(){return this.dom.get_schemaElements()},get_contentArea:function(){return this.dom.contentArea},get_schemaSearch:function(){return this.dom.schemaSearch},get_sourcesHeader:function(){return this.dom.sourcesHeader},get_contentAreaScroll:function(){return this.dom.contentAreaScroll},get_schemaViewerViewModel:function(){return this.get_viewModel()},get_contextMenuButton:function(){return this.$3$1},set_contextMenuButton:function(ni){this.$3$1=ni},get_width:function(){return tab.DoubleUtil.roundToInt(this.get_domRoot().width())},set_width:function(ni){this.get_domRoot().width(ni)},get_estimatedHeightOfSchemaRowItem:function(){return 21},get_estimatedHeightDeltaForSchemaFields:function(){return 120},get_estimatedHeightDeltaForLeftPanel:function(){return 230},get_estimatedHeightDeltaForDocumentBody:function(){return 382},get_dataSourceTitles:function(){return this.$3$2},set_dataSourceTitles:function(ni){this.$3$2=ni},$1j:function(){return this.get_schemaElements().toArray()},dispose:function(){this.$t();this.perInitDisposables.dispose();this.get_contextMenuButton().dispose();ss.makeGenericType(spiff.BaseView$1,[lc]).prototype.dispose.call(this)},$t:function(){this.$1y=tab.MiscUtil.dispose$1(this.$1y);this.$1w=tab.MiscUtil.dispose$1(this.$1w);this.$1t=tab.MiscUtil.dispose$1(this.$1t)},findElement:function(ni){return this.get_domRoot().find(ni)},$V:function(){this.get_schemaViewerViewModel().add_newDataSourceAddedCatalog(ss.mkdel(this,this.$M));this.get_schemaViewerViewModel().add_dataSchemaModified(ss.mkdel(this,this.initFromModel));this.get_schemaViewerViewModel().add_dataSourceListChanged(ss.mkdel(this,this.$1f));this.get_schemaViewerViewModel().add_scrollToNodes(ss.mkdel(this,this.showAndScrollToNodes));this.get_schemaViewerViewModel().add_expandNodes(ss.mkdel(this,this.expandNodes));this.get_schemaViewerViewModel().add_expandAllContainers(ss.mkdel(this,this.$y));this.get_schemaViewerViewModel().add_collapseAllContainers(ss.mkdel(this,this.$o));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_schemaViewerViewModel().remove_newDataSourceAddedCatalog(ss.mkdel(this,this.$M));this.get_schemaViewerViewModel().remove_dataSchemaModified(ss.mkdel(this,this.initFromModel));this.get_schemaViewerViewModel().remove_dataSourceListChanged(ss.mkdel(this,this.$1f));this.get_schemaViewerViewModel().remove_scrollToNodes(ss.mkdel(this,this.showAndScrollToNodes));this.get_schemaViewerViewModel().remove_expandNodes(ss.mkdel(this,this.expandNodes));this.get_schemaViewerViewModel().remove_expandAllContainers(ss.mkdel(this,this.$y));this.get_schemaViewerViewModel().remove_collapseAllContainers(ss.mkdel(this,this.$o))})))},$R:function(){this.$1m=this.get_viewModel().get_dragFeedback();this.$1m.fieldDragOver=ss.delegateCombine(this.$1m.fieldDragOver,ss.mkdel(this,this.$K));this.$1m.fieldDragExit=ss.delegateCombine(this.$1m.fieldDragExit,ss.mkdel(this,this.$J));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$1m.fieldDragOver=ss.delegateRemove(this.$1m.fieldDragOver,ss.mkdel(this,this.$K));this.$1m.fieldDragExit=ss.delegateRemove(this.$1m.fieldDragExit,ss.mkdel(this,this.$J))})))},$S:function(){this.$R();if(ss.keyExists(this.get_sections(),0)){EventUtils.DragDropManager.attachDropTarget(this.get_sections()[0],this.$1m.get_dimensionsDropTarget())}if(ss.keyExists(this.get_sections(),1)){EventUtils.DragDropManager.attachDropTarget(this.get_sections()[1],this.$1m.get_measuresDropTarget())}if(tabBootstrap.Affordances.isOn('schemaViewerDropCalc')){EventUtils.DragDropManager.attachDropTarget(this.get_domRoot(),this.$1m.get_unnamedFieldsDropTarget())}EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$w));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$u));EventUtils.DragDropManager.add_dragMoved(ss.mkdel(this,this.$v));this.$1m.get_unnamedFieldsDropTarget().add_dropStateChanged(ss.mkdel(this,this.$N));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$w));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$u));EventUtils.DragDropManager.remove_dragMoved(ss.mkdel(this,this.$v));this.$1m.get_unnamedFieldsDropTarget().remove_dropStateChanged(ss.mkdel(this,this.$N))})))},$w:function(ni){this.$1r=ss.isInstanceOfType(ni,jd);if(this.$1r){this.$1l=this.$e()}},$u:function(ni){this.$1n=tab.MiscUtil.clearInterval(this.$1n);this.$1r=false;this.$1k=null;this.$1l=null},$v:function(ni){if(!this.$1r){return}var nj=this.$B();if(ss.isNullOrUndefined(nj)&&ss.isValue(this.$1k)){this.$1n=tab.MiscUtil.clearInterval(this.$1n);this.$1k=null}else if(ss.isValue(nj)){this.$1k=nj;if(!ss.isValue(this.$1n)){this.$1n=window.setInterval(ss.mkdel(this,this.$13),200)}}},$e:function(){var ni=[];var nj=new ss.ObjectEnumerator(this.get_panes());try{while(nj.moveNext()){var nk=nj.current();var nl=nk.value;if(nl.is(':visible')){var nm=tab.DomUtil.getRectXY(nl);var nn=Math.min(25,ss.idiv(nm.h,3));var no=new j;no.$2=nl;no.$1=-1;no.$0={x:nm.x,y:nm.y,w:nm.w,h:nn};ni.push(no);var np=new j;np.$2=nl;np.$1=1;np.$0={x:nm.x,y:nm.y+nm.h-nn,w:nm.w,h:nn};ni.push(np)}}}finally{nj.dispose()}return ni},$B:function(){if(ss.isNullOrUndefined(this.$1l)){return null}var ni=EventUtils.DragDropManager.get_lastDragEvent();for(var nj=0;nj<this.$1l.length;nj++){var nk=this.$1l[nj];if(tab.RectXYUtil.inRectOrSharedEdge(nk.$0,ni.pageX,ni.pageY)){return nk}}return null},$13:function(){if(ss.isNullOrUndefined(this.$1k)){return}var ni=this.$1u*this.$1k.$1;this.$1k.$2.scrollTop(this.$1k.$2.scrollTop()+ni)},initializeContextMenu:function(ni){this.set_contextMenuButton(new spiff.ToggleButton($("<span><span class='icon'></span></span>"),null));this.get_contextMenuButton().element.addClass('tab-schemaViewerHeaderButton  tab-schema-menu-button');ni.append(this.get_contextMenuButton().element);this.get_contextMenuButton().add_click(ss.mkdel(this,this.$p));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_contextMenuButton().remove_click(ss.mkdel(this,this.$p))})))},setUpDataPaneEmptySpaceEventListener:function(){if(!tabBootstrap.FeatureFlags.isEnabled('WebAuthoringDataPaneContextMenu')){return}var ni=[];ni.push(this.dom.leftPaneEmptySpace);ni.push(this.dom.sections[0]);ni.push(this.dom.sections[1]);ni.push(this.dom.sections[2]);ni.push(this.dom.sections[3]);var nj=ni;nj.forEach(ss.mkdel(this,function(nk){nk.on('contextmenu',ss.mkdel(this,function(nl){var nm=this.$E(nk);this.get_schemaViewerViewModel().showEmptySpaceContextMenu(nl,nm,null)}))}))},$E:function(ni){var nj='common';if(ss.referenceEquals(ni,this.dom.sections[0])){nj='dimensions'}else if(ss.referenceEquals(ni,this.dom.sections[1])){nj='measure'}else if(ss.referenceEquals(ni,this.dom.sections[2])){nj='groups'}else if(ss.referenceEquals(ni,this.dom.sections[3])){nj='parameters'}return nj},$T:function(ni){var nj=new ku(ni);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nj);this.disposables.add$1(new tab.CallOnDispose(function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(nj)}))},isSectionVisible:function(ni){return this.$1v[ni]},updateVisibilityOfPanesForViewType:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_selectedDataSource())){this.$Q()}else if(this.get_viewModel().get_selectedDataSource().get_isHierarchical()){this.$1c()}else{this.$1d()}if(ss.isValue(this.get_dataSourceTitles())){this.get_dataSourceTitles().forEach(ss.mkdel(this,function(ni){if(tabBootstrap.Affordances.isOn('toolbar_DataDetails')&&tabBootstrap.FeatureFlags.isEnabled('DQWInWebAuth')&&ss.isValue(this.get_viewModel())&&ss.isValue(this.get_viewModel().get_dataSchema())&&ss.isValue(this.get_viewModel().get_dataSchema().get_workbookDataCatalogMetadata())){var nj=_.find(this.get_schemaViewerViewModel().get_selectableDataSources(),function(nk){return ss.referenceEquals(ni.domRoot.prop('DataSource'),nk)});if(ss.isValue(nj)&&!nj.get_shouldShowDataSourceConnectionError()){this.$10(ni.brokenIndicatorArea[0],nj.get_caption())}}}))}this.$1i()},$F:function(){return this.findElement('.tab-topLevelColumnSeparator')},$Q:function(){this.get_panes()[0].hide();this.get_headers()[0].hide();this.get_panes()[1].hide();this.get_headers()[1].hide();this.get_panes()[2].hide()},$1c:function(){this.get_panes()[0].hide();this.get_headers()[0].show();this.get_panes()[1].show();this.get_headers()[1].show();this.get_panes()[2].show()},$1d:function(){this.get_panes()[0].show();this.get_headers()[0].hide();this.get_panes()[1].hide();this.get_headers()[1].hide();this.get_panes()[2].hide();this.$F().show()},$1i:function(){if(this.get_viewModel().canSearchCurrentDataSource()){this.get_schemaSearch().show()}else{this.get_schemaSearch().hide();this.get_viewModel().updateSearchText('',true)}},renderSearchBox:function(ni){var nj=React.createElement(kU,{handleChange:ss.mkdel(this,function(nk){this.get_viewModel().updateSearchText(nk,false)}),handleClear:ss.mkdel(this,this.$n),searchFilterHelper:this.get_schemaViewerViewModel().get_searchFilterHelper()});ReactDOM.render(nj,ni)},$n:function(){this.get_schemaViewerViewModel().updateSearchText('',true)},$c:function(ni){if(tabBootstrap.Affordances.isOff('authoring_DataSource_ContextMenu')){return}ni.getMenuClickHandler(this.perInitDisposables).onClick(ss.mkdel(this,function(nj){this.$H(ni)}));ni.getLabelClickHandler(this.perInitDisposables).onRightClick(ss.mkdel(this,function(nj){this.$H(ni)}))},$H:function(ni){lc.showDataSourceContextMenu(ni.domRoot.prop('DataSource'),ni.domRoot)},findFieldTemplate:function(ni){if(ss.isNullOrUndefined(ni)){return null}var nj=null;this.get_schemaElements().each(function(nk,nl){var nm=gm.fromDom($(nl));var nn=nm.get_node();if(ss.isValue(nn)&&ss.referenceEquals(nn.globalFieldName,ni.globalFieldName)&&nn.instanceType===ni.instanceType&&ni.schemaSection===nn.schemaSection){nj=nm;return false}return true});return nj},initFromModel:function(){this.perInitDisposables.dispose();this.initDataSources();var ni=this.get_dataSourceTitles();for(var nj=0;nj<ni.length;nj++){var nk={$:ni[nj]};var nl=_.find(this.get_schemaViewerViewModel().get_selectableDataSources(),ss.mkdel({dataSourceTitle:nk},function(nm){return ss.referenceEquals(this.dataSourceTitle.$.domRoot.prop('DataSource'),nm)}));if(ss.isValue(nl)){if(!nl.get_shouldShowDataSourceConnectionError()&&tabBootstrap.Affordances.isOn('toolbar_DataDetails')&&tabBootstrap.FeatureFlags.isEnabled('DQWInWebAuth')){this.$10(nk.$.brokenIndicatorArea[0],nl.get_caption())}}}lc.sectionsInOrder.forEach(ss.mkdel(this,function(nm){this.initSection(nm,false)}))},fieldExpanded:function(){},expandCollapseAllComplete:function(ni){this.scrollSectionsToShowNodes(ni)},shouldExpandTopLevelNodes:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_selectedDataSource())){return false}if(this.$O()){return false}this.$15();return this.$P(this.get_schemaViewerViewModel().get_numNodesIfTopLevelExpanded())},$P:function(ni){return 2*this.$D()>=ni*this.get_estimatedHeightOfSchemaRowItem()},$D:function(){if(this.addedToDom){var ni=this.getSchemaViewerElement();if(ni.length>0){var nj=tab.DoubleUtil.roundToInt(ni.innerHeight());if(nj>0){return nj-this.get_estimatedHeightDeltaForSchemaFields()}}}var nk=$(document.body).find('.tabAuthLeftViewArea');if(nk.length>0&&$.contains(document.body,nk[0])){return tab.DoubleUtil.roundToInt(nk.innerHeight())-this.get_estimatedHeightDeltaForLeftPanel()}return document.body.clientHeight-this.get_estimatedHeightDeltaForDocumentBody()},getSchemaViewerElement:function(){return this.get_domRoot().find('.tab-schemaViewerFields')},showAndScrollToNodes:function(ni){var nj={};for(var nk=0;nk<ni.length;nk++){var nl=ni[nk];this.$A(nl);if(ss.isNullOrUndefined(nj[nl.get_node().schemaSection])){nj[nl.get_node().schemaSection]=nl.get_node()}}this.scrollSectionsToShowNodes(nj)},expandNodes:function(ni){for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];this.$z(nk.get_node())}},$A:function(ni){if(ss.isNullOrUndefined(ni)){return}ni.forEachParentNode(ss.mkdel(this,this.$z))},$z:function(ni){var nj=this.findFieldTemplate(ni);if(ss.isValue(nj)&&!nj.isExpanded()){this.$17(nj,true,false)}},findFocalFieldTemplate:function(ni){if(ss.isNullOrUndefined(ni)||ni.length!==1){return null}var nj=null;var nk=this.get_viewModel().hasSelection();var nl=ni[0].getBoundingClientRect();var nm=ni.find('.tab-schema-field:visible');for(var nn=0,no=nm.length;nn<no;nn++){var np=gm.fromDom($(nm[nn]));var nq=np.pill[0].getBoundingClientRect();if(nq.top>nl.bottom){break}if(nq.bottom>nl.top){if(ss.isNullOrUndefined(nj)&&nq.top>=nl.top){nj=np;if(!nk){break}}if(this.get_viewModel().isSelected(np.get_node())){return np}}}return nj},findFocalFieldNode:function(ni,nj){if(ss.isNullOrUndefined(ni)){return null}var nk=ni.get_node();if(nj){var nl=this.get_viewModel().findNodePath(nk);if(ss.isValue(nl)){nk=nl.getTopmostAncestor()}}return nk},findFocalFieldNodeInView:function(ni,nj,nk){var nl=this.findFocalFieldTemplate(ni);var nm=this.findFocalFieldNode(nl,nj);if(ss.isValue(nm)){nk[nm.schemaSection]=nm}},findAllFocalFieldNodes:function(ni){var nj={};var nk=new ss.ObjectEnumerator(this.get_panes());try{while(nk.moveNext()){var nl=nk.current();this.findFocalFieldNodeInView(nl.value,ni,nj)}}finally{nk.dispose()}return nj},$y:function(){var ni=this.findAllFocalFieldNodes(false);this.$16(this.get_schemaElements(),true);this.expandCollapseAllComplete(ni)},$o:function(){var ni=this.findAllFocalFieldNodes(true);this.$16(this.get_schemaElements(),false);this.expandCollapseAllComplete(ni)},$16:function(ni,nj){ni.each(ss.mkdel(this,function(nk,nl){var nm=gm.fromDom($(nl));if(ss.isValue(nm)&&nm.isExpanded()!==nj){var nn=nm.get_node();if(ss.isValue(nn)&&nn.canHaveChildren&&nn.children.length>0){var no=nj&&!ss.staticEquals(nm.deferredCreateChildren,null);this.$17(nm,nj,false);if(no){var np=nm.domRoot.find(gm.fieldDomSelector);this.$16(np,nj)}}}}))},scrollSectionsToShowNodes:function(ni){var nj=ss.getEnumerator(Object.keys(ni));try{while(nj.moveNext()){var nk=nj.current();this.scrollFieldIntoView(ni[nk])}}finally{nj.dispose()}},scrollFieldIntoView:null,getScrollTopValueForNode:function(ni,nj,nk,nl){var nm=null;var nn=this.findFieldTemplate(ni);if(ss.isValue(nn)){var no=tab.DoubleUtil.roundToInt(tab.DomUtil.getPageOffset$1(nn.pill).top);var np=no-nk;var nq=np+tab.DoubleUtil.roundToInt(nn.pill.height());if(np<0){nm=nj+np-10}else if(nq>nl){nm=nj+nq-nl+10}}return nm},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[lc]).prototype.onViewModelPropertyChanged.call(this,ni,nj);if(nj.get_propertyName()==='SelectedField'){this.$L()}},$N:function(ni){this.dom.dropInviteElements.toggle(ni===1)},$K:function(ni,nj,nk){switch(nj){case 0:{this.$7(ni);break}case 2:{this.$8(ni);break}case 3:{if(nk){this.$7(ni)}else{this.$8(ni)}break}}},$J:function(ni,nj){switch(nj){case 0:{this.$X(ni);break}case 2:{this.$Y(ni);break}case 3:{this.$Y(ni);this.$X(ni);break}}},$7:function(ni){var nj=this.findFieldTemplate(ni);if(ss.isValue(nj)){nj.pill.addClass('dragHover')}},$X:function(ni){var nj=this.findFieldTemplate(ni);if(ss.isValue(nj)){nj.pill.removeClass('dragHover')}},$8:function(ni){var nj=this.findFieldTemplate(ni);if(ss.isValue(nj)){nj.labelArea.css('border-bottom','1px solid black')}},$Y:function(ni){var nj=this.findFieldTemplate(ni);if(ss.isValue(nj)){nj.labelArea.css('border-bottom','')}},$p:function(){this.get_contextMenuButton().set_selected(true);this.get_schemaViewerViewModel().showContextMenu(this.get_contextMenuButton().element,ss.mkdel(this,this.$G))},$G:function(){this.get_contextMenuButton().set_selected(false)},$L:function(){var ni='selected';if(BrowserSupport.BrowserSupport.IsTouchAndNonMobile()){ni+=' '+'tab-schema-field-pill-touchScreenSelected'}this.get_domRoot().find('.tab-schema-field-pill.selected, .tab-schema-field-label.selected').removeClass(ni);if(this.get_schemaViewerViewModel().hasSelection()){this.get_schemaElements().each(ss.mkdel(this,function(nj,nk){return this.applySelection(gm.fromDom($(nk)))}))}else{this.$1s=null}},applySelection:function(ni){if(ss.isValue(ni)&&this.get_schemaViewerViewModel().isSelected(ni.get_node())){var nj=(ni.get_node().isUnsortedContainer?ni.name:ni.pill);nj.addClass('selected');EventUtils.DragDropManager.attachDragSource(nj,this.$1m.createFieldDragSource());if(BrowserSupport.BrowserSupport.IsTouchAndNonMobile()){nj.addClass('tab-schema-field-pill-touchScreenSelected');this.$1p=true}}return true},$I:function(ni){var nj=$(ni.target).parents(ss.formatString('.{0}','tab-schema-field')).first();var nk=gm.fromDom(nj);var nl=nk.get_node();if(ss.isValue(nl)&&nl.canHaveChildren){var nm=nk.expandoIcon.hasClass('tab-schema-collapsed');this.$17(nk,nm,true)}},$O:function(){var ni=this.get_viewModel().get_selectedDataSource().get_name();return ss.keyExists(this.$1q,ni)},$15:function(){if(this.get_viewModel().get_numNodesIfTopLevelExpanded()===0){return}if(tab.ApplicationModel.get_instance().get_workbook().get_uiMode()!=='document'){return}if(ss.isValue(this.get_viewModel().get_selectedDataSource())){var ni=this.get_viewModel().get_selectedDataSource().get_name();this.$1q[ni]=true}},$17:function(ni,nj,nk){if(!this.get_viewModel().get_isSearching()){this.$1o[ni.get_node().get_comparisonKey()]=nj;if(ss.isValue(this.get_viewModel().get_selectedDataSource())&&ss.referenceEquals(this.get_viewModel().get_selectedDataSource().get_name(),ni.get_node().dataSourceName)){this.$15()}}var nl=ss.mkdel(this,this.fieldExpanded);if(nj){ni.domRoot.addClass('expanded');if(ss.isValue(ni.deferredCreateChildren)){ni.deferredCreateChildren();ni.deferredCreateChildren=null}if(nk){ni.children.slideDown('fast',nl)}else{ni.children.show()}}else{ni.domRoot.removeClass('expanded');if(nk){ni.children.slideUp('fast',nl)}else{ni.children.hide()}}if(ni.get_node().isCubeFolder){ni.icon.toggleClass('tab-schema-folder-closed-icon',!nj).toggleClass('tab-schema-folder-open-icon',nj)}else if(ni.get_node().isFolder){ni.icon.toggleClass('tab-schema-folder-closed-icon',!nj).toggleClass('tab-schema-folder-open-icon',nj)}ni.expandoIcon.toggleClass('tab-schema-expanded',nj).toggleClass('tab-schema-collapsed',!nj)},$s:function(ni){var nj=new gm;nj.set_node(ni);var nk=nj;nk.domRoot.addClass('tab-field-column').attr('title',ni.tooltip);nk.name.text(ni.schemaViewerDisplayName);spiff.Widget.disableTextSelectionOnElement(nk.name);eI.$4(nk,ni);this.$14(nk,ni);return nk},$d:function(ni,nj,nk,nl){if(nj.isSelectable||ni.children.length>0||nj.isFolder){var nm=nj.childToSelect;this.attachFieldEventHandlers(nk.get_node(),nm,nk,nl)}},$1e:function(ni,nj){if(this.get_schemaViewerViewModel().isSelected(ni)){this.get_schemaViewerViewModel().deSelectNode(ni)}else{this.get_schemaViewerViewModel().addNodeToSelection(ni);this.$1s=nj}},$18:function(ni){if(ss.isNullOrUndefined(this.$1s)||ss.isNullOrUndefined(ni)){return}var nj=this.$1j();var nk=ss.indexOf(nj,ni);var nl=ss.indexOf(nj,this.$1s);var nm=Math.min(nk,nl);var nn=Math.max(nk,nl);if(this.$19(nm,nn)){if(ss.isValue(this.$1x)){nm=Math.min(nm,this.$1x.item1);nn=Math.max(nn,this.$1x.item2)}this.$a(nm,nn)}else{this.$Z(nm,nn)}},$19:function(ni,nj){return ss.isNullOrUndefined(this.$1x)||(this.$1x.item1>ni||this.$1x.item2<nj)},$a:function(ni,nj){var nk=this.$1j();var nl=nk.length;if(ni<0||nj<0||ni>=nl||nj>=nl){return}var nm=[];for(var nn=ni;nn<=nj;nn++){var no=gm.fromDom($(nk[nn]));if(ss.isValue(no)){this.renderRightSideRelatabilityIcon(no);nm.push(no.get_node())}}this.$1x={item1:ni,item2:nj};this.get_schemaViewerViewModel().addNodesToSelection(nm)},$Z:function(ni,nj){var nk=[];var nl=this.$1j();for(var nm=this.$1x.item1;nm<=this.$1x.item2;nm++){if(nl.length<=nm){break}if(nm<ni||nm>nj){var nn=gm.fromDom($(nl[nm]));if(ss.isValue(nn)){nk.push(nn.get_node())}}}this.$1x={item1:ni,item2:nj};this.get_schemaViewerViewModel().deSelectNodes(nk)},attachSelectionEventHandler:function(ni){ni.getLabelClickHandler(this.perInitDisposables).onPress(ss.mkdel(this,function(nj){var nk=ni.domRoot.get(0);if(tabBootstrap.Affordances.isOff('authoring_DataSchema_MultiSelect')){this.$11(ni)}else if(nj.shiftKey){if(ss.isValue(this.$1s)&&this.get_schemaViewerViewModel().hasSelection()){this.$18(nk)}else{this.get_schemaViewerViewModel().clearAllAndSelect(ni.get_node())}this.$1s=nk}else if(nj.get_IsCtrlKey()){this.$1e(ni.get_node(),nk);this.$1x=null}else if(!this.get_schemaViewerViewModel().isSelected(ni.get_node())){this.$11(ni)}})).onClick(ss.mkdel(this,function(nj){if(!nj.shiftKey&&!nj.get_IsCtrlKey()){this.$11(ni)}})).onRightClick(ss.mkdel(this,function(nj){if(!this.get_schemaViewerViewModel().isSelected(ni.get_node())){this.$11(ni)}}))},$11:function(ni){if(this.get_schemaViewerViewModel().get_selectedNodes().length!==1||!ss.referenceEquals(this.get_schemaViewerViewModel().get_selectedNodes()[0],ni.get_node())||this.$12()){this.get_schemaViewerViewModel().clearAllAndSelect(ni.get_node());this.$1s=ni.domRoot.get(0);this.$1x=null}},renderRightSideRelatabilityIcon:function(ni){if(!tabBootstrap.FeatureFlags.isEnabled('ObjectModelSharedDimensions')){return}if(ss.isNullOrUndefined(ni)){return}if(ni.labelArea.find('.'+'tab-schema-right-icon-container').length!==0){return}gh.addFieldRightIconToNode(ni,ni.get_node().displayName,this.get_schemaViewerViewModel().getFieldNodeRightIconInfo(ni.get_node()))},attachFieldEventHandlers:function(ni,nj,nk,nl){if(!nl){if(ni.isDraggable){nk.labelArea.dblclick(ss.mkdel(this,function(nm){if(nm.altKey){this.get_schemaViewerViewModel().launchEditingUI(nj)}else{this.get_schemaViewerViewModel().addFieldToSheet(nj)}}))}else if(ni.isUnsortedContainer){nk.getLabelClickHandler(this.perInitDisposables).onDoubleClick(ss.mkdel(this,this.$I))}}this.attachSelectionEventHandler(nk);if(ni.canHaveChildren){nk.getExpandoClickHandler(this.perInitDisposables).onPress(ss.mkdel(this,this.$I))}},$C:function(ni){var nj=this.get_viewModel().get_dataSchema().getMetadataForDatasourceByName(ni.dataSourceName);if(ss.isValue(nj)){return nj.getFieldMetadata(ni.localName)||nj.getFieldMetadata(ni.displayName)}return null},$14:function(ni,nj){if(nj.instanceType!=='column'){return}var nk=this.$C(nj);if(ss.isNullOrUndefined(nk)){return}var nl=ss.isValue(nk.get_labels())&&nk.get_labels().length>0;var nm=!tab.MiscUtil.isNullOrEmpty$1(nk.get_description());if(tabBootstrap.FeatureFlags.isEnabled('LabelsInWebAuthoring')&&(nl||nm)){var nn=ni.domRoot.addClass('tab-field-column');nn.attr('DatasourceName',nj.dataSourceName);nn.attr('FieldName',nj.localName);nn.removeAttr('title')}else if(tab.MiscUtil.isNullOrEmpty$1(nj.userDescription)&&nm){var no=ni.domRoot.addClass('tab-field-column');no.attr('ParentContentType',((nk.get_parentType()===4)?'table':'datasource'));no.attr('IsParentCertified',(nk.get_isParentCertified()?'true':'false'));no.attr('ParentName',nk.get_parentName());no.attr('InheritedDescription',nk.get_description());no.attr('FieldName',nk.get_fieldName());no.attr('InheritedColumnName',nk.get_inheritedColumnName());no.removeAttr('title')}},$U:function(ni,nj){var nk=this.$s(ni);if(ni.isSelectable){nk.pill.addClass(eI.$2(ni.fieldType,nj))}if(!ni.hasContextMenu){nk.menuButton.hide()}if(ni.isGenerated&&ni.children.length===0){nk.domRoot.addClass('tab-field-generated')}if(ni.isHierarchyRoot&&ni.children.length>0){nk.name.addClass('tab-schema-dimension-label')}if(ni.isGroup){nk.domRoot.add('tab-set')}if(ni.canChangeDataType||ni.canChangeSemanticRole){nk.icon.addClass('tab-can-change-data-type')}if(this.get_schemaViewerViewModel().shouldGrayOutField(ni)){nk.name.addClass('tab-schema-field-gray-out')}if(!tabBootstrap.FeatureFlags.isEnabled('ObjectModelSharedDimensions')){if(ni.isHidden){nk.name.addClass('tab-schema-field-hidden')}}return nk},$h:function(ni,nj){var nk=this.$U(ni,ni.isHidden);nk.labelArea.prop('SchemaItemLocator',ni.schemaItemLocator);if(this.get_schemaViewerViewModel().isSelected(ni)){this.applySelection(nk)}if(ni.instanceType==='relationalTable'){nk.name.addClass('tab-container')}this.$i(ni,nk,nj);this.$9(ni,nk);this.$d(ni,ni,nk,ni.isHidden);this.$m(ni,nk);return nk.domRoot},$9:function(ni,nj){var nk=this.get_schemaViewerViewModel().getFieldNodeRightIconInfo(ni);if(!nk.get_showOnHover()){gh.addFieldRightIconToNode(nj,ni.displayName,nk)}},$i:function(ni,nj,nk){if(ni.children.length===0){nj.children.hide();return}var nl=nk||(this.$1o[ni.get_comparisonKey()]||false);var nm=ss.mkdel(this,function(){var nn=false;for(var no=0;no<ni.children.length;no++){var np=ni.children[no];if(np.role==='measure'&&nn){nj.children.append(eI.$0())}nn=np.role==='dimension'&&!ni.isDrillPath;nj.children.append(this.$h(np,false))}});if(nl||this.get_viewModel().get_isSearching()){nm()}else{nj.deferredCreateChildren=nm;nj.children.hide()}if(this.get_viewModel().get_isSearching()){nl=ni.hasFilteredChildren}this.$17(nj,nl,false)},$m:function(ni,nj){if(ni.schemaSection===2||ni.schemaSection===3){if(ni.instanceType==='folderNew'){var nk=((ni.schemaSection===2)?'groups':'parameters');var nl=kW.createContainerSectionDropTarget(ni.dataSourceName,nk,nj.domRoot,ni,null);this.perInitDisposables.add$1(nl)}}else{var nm=this.$1m.tryCreateFieldDropTarget(ni);if(ss.isValue(nm)){EventUtils.DragDropManager.attachDropTarget(nj.labelArea,nm);this.perInitDisposables.add$1(nm)}}},$f:function(ni,nj){var nk=this.$U(ni,ni.isHidden);var nl=$('<div class="dimensions"></div>');nk.children.append(nl);var nm=eI.$0();nk.children.append(nm);var nn=$('<div class="measures"></div>');nk.children.append(nn);if(this.get_schemaViewerViewModel().isSelected(ni)){this.applySelection(nk)}this.$9(ni,nk);if(ni.children.length>0){var no=nj||(this.$1o[ni.get_comparisonKey()]||false);var np=ss.mkdel(this,function(){for(var ns=0;ns<ni.children.length;ns++){var nt=ni.children[ns];var nu=this.$h(nt,false);if(nt.role==='measure'){nn.append(nu)}else{nl.append(nu)}}});if(no||this.get_viewModel().get_isSearching()){np()}else{nk.deferredCreateChildren=np;nk.children.hide()}if(this.get_viewModel().get_isSearching()){no=ni.hasFilteredChildren}this.$17(nk,no,false)}else{nk.children.hide()}this.$d(ni,ni,nk,ni.isHidden);var nq=this.dom.getDimMeasSeparatorForSection(nk.domRoot);var nr=kW.createContainerSectionDropTarget(ni.dataSourceName,'common',nk.domRoot,ni,nq);this.perInitDisposables.add$1(nr);return nk.domRoot},initSection:function(ni,nj){if(!ss.keyExists(this.get_sections(),ni)){return false}this.$x(ni);var nk=this.get_schemaViewerViewModel().nodeTreeForSection(ni);var nl=this.$1b(ni,nk);var nm=this.$1a(ni,nl);this.$1h(ni,nl);var nn=this.getContentTreeNodeForSection(ni);nn.append(Array.prototype.slice.call(this.$k(ni,nk,nj)));var no=nk.some(function(np){return np.children.length>0});nn.toggleClass('tab-schema-has-hierarchies',no);nn.toggleClass('tab-schema-no-hierarchies',!no);return nm},initTopLevelDragDrop:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_selectedDataSource())){return}this.$t();var ni=this.get_viewModel().get_selectedDataSource().get_name();if(ss.isValue(this.get_topLevelFieldsArea())&&this.get_topLevelFieldsArea().length>0){var nj=this.dom.getDimMeasSeparatorForSection(this.get_topLevelFieldsArea());this.$1y=kW.createContainerSectionDropTarget(ni,'common',this.get_topLevelFieldsArea(),null,nj)}var nk=this.get_sections()[2];if(ss.isValue(nk)&&nk.length>0){this.$1w=kW.createContainerSectionDropTarget(ni,'groups',nk,null,null)}var nl=this.get_sections()[3];if(ss.isValue(nl)&&nl.length>0){var nm=this.get_viewModel().get_dataSchema().get_parametersDataSource();if(ss.isValue(nm)){this.$1t=kW.createContainerSectionDropTarget(nm.get_name(),'parameters',nl,null,null)}}},getContentTreeNodeForSection:function(ni){return this.get_sections()[ni]},initContent:function(){},layoutSections:function(){},initDataSources:function(){this.set_dataSourceTitles([]);var ni=this.get_schemaViewerViewModel().get_selectableDataSources();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];var nl=new eJ;tab.DomUtil.setNativeTooltip(nl.domRoot,nk.get_caption());nl.domRoot.prop('DataSource',nk);this.$1g(nl,nk);if(tabBootstrap.Affordances.isOn('authoring_DataTab')&&nk.get_isDataTabViewSupported()){var nm=new EventUtils.EventHandleSpec;nm.SetHandler('cancelPotentialDoubleTap',this.$q(nk,nl.domRoot));nm.SetHandler('doubleTap',this.$r(nk));var nn=spiff.TableauClickHandler.targetAndConfig(nl.domRoot[0],nm);this.perInitDisposables.add$1(nn)}else{this.perInitDisposables.add$1(spiff.TableauClickHandler.target(nl.domRoot[0]).onClick(this.$q(nk,nl.domRoot)))}this.get_dataSourceTitles().push(nl);this.$c(nl)}this.get_dataSourceTitles().sort(function(no,np){return no.labelArea.text().localeCompare(np.labelArea.text())});this.get_sourceTitles().empty();this.get_dataSourceTitles().forEach(ss.mkdel(this,function(no){this.get_sourceTitles().append(no.domRoot)}))},$x:function(ni){this.get_sections()[ni].empty()},$1b:function(ni,nj){switch(ni){case 2:{return nj.length>0}case 3:{return nj.length>0&&this.get_viewModel().get_dataSchema().getDataSourceCount(false)>0}case 0:case 1:case 4:case 5:case 6:default:{return true}}},$1a:function(ni,nj){if(this.get_viewModel().get_isSearching()){return false}if(ni===2||ni===3){var nk=this.$1v[ni]!==nj;if(nk){return true}}return false},$1h:function(ni,nj){if(!this.get_viewModel().get_isSearching()){if(ss.keyExists(this.get_headers(),ni)){this.get_headers()[ni].toggle(nj)}this.get_sections()[ni].toggle(nj);this.$1v[ni]=nj}},$b:function(ni,nj){var nk=eI.$3(ni)||this.isCurrentlyVisible(ni);if(nk&&nj.length===0&&this.get_viewModel().get_isSearching()){return true}return false},$k:function(ni,nj,nk){if(this.$b(ni,nj)){var nl=[];nl.push(this.$l(ni));return nl}else{if(ni===3||ni===2){nk=false}return((ni===4)?this.$g(nj,nk):this.$j(nj,nk))}},$l:function(ni){if(ni===5||ni===6||ni===4&&this.get_schemaViewerViewModel().getNodeCountForPane(0)>0){return null}return $('<div></div>').addClass('tab-schema-empty-section').text(tab.Strings.AuthSchemaViewerNoSearchMatches)},$g:function(ni,nj){var nk=[];for(var nl=0;nl<ni.length;nl++){var nm=ni[nl];var nn=this.$f(nm,nj);nn.addClass('tab-container');nk.push(nn);nk.push(eI.$1())}return nk},$j:function(ni,nj){var nk=[];for(var nl=0;nl<ni.length;nl++){var nm=ni[nl];nk.push(this.$h(nm,nj))}return nk},isCurrentlyVisible:function(ni){return this.$1v[ni]},$M:function(){this.$1f()},$1f:function(){this.initDataSources();var ni=this.get_dataSourceTitles();for(var nj=0;nj<ni.length;nj++){var nk={$:ni[nj]};var nl=_.find(this.get_schemaViewerViewModel().get_selectableDataSources(),ss.mkdel({dataSourceTitle:nk},function(nm){return ss.referenceEquals(this.dataSourceTitle.$.domRoot.prop('DataSource'),nm)}));if(ss.isValue(nl)){this.$1g(nk.$,nl)}}},$1g:function(ni,nj){var nk=this.get_schemaViewerViewModel().get_currentSheetSchema();if(ss.isNullOrUndefined(nk)){return}var nl=nj.get_caption().toString();var nm=(nj.get_shouldShowDataSourceConnectionError()?tab.Strings.DataSourceConnectionErrorTitleText(nl):nl);ni.domRoot.attr('title',nm);var nn=nk.datasourceIcons;ni.labelArea.text(nj.get_caption());ni.icon.removeClass();ni.icon.addClass('tab-schema-dataSourceIcon');ni.icon.addClass(gO.getDataSourceIcon(nn,nj));ni.brokenIndicatorArea.toggleClass('tab-schema-dataSourceBroken',nj.get_shouldShowDataSourceConnectionError());if(ss.referenceEquals(nj,this.get_schemaViewerViewModel().get_selectedDataSource())){ni.domRoot.addClass('tab-schema-dataSourceSelected');if(this.get_schemaViewerViewModel().get_selectableDataSources().length===1){ni.domRoot.addClass('tab-schema-singleDataSource')}if(BrowserSupport.BrowserSupport.IsTouchAndNonMobile()){ni.domRoot.addClass('tab-dataSource-touchScreenSelected')}}},loadOnDemandModulesForDatacatMetadata:function(){var ni=$.Deferred();tab.ModuleManager.load$1(tab.IConnectPanePluginTableauServerFactory).call(null,[]).done(function(nj){tab.ModuleManager.load$1(tab.IVizportalWebclientApiFactory).call(null,[]).done(function(nk){ni.resolve(true)})});return ni.promise()},$W:function(ni){switch(ni){case'WARNING':{return 0}case'DEPRECATED':{return 1}case'STALE':{return 2}case'MAINTENANCE':{return 3}case'SENSITIVE_DATA':{return 4}case'EXTRACT_REFRESH_FAILURE':{return 5}case'FLOW_RUN_FAILURE':{return 6}case'CERTIFIED':{return 7}default:{return 0}}},$10:function(ni,nj){if(tabBootstrap.FeatureFlags.isEnabled('LabelsInWebAuthoring')){return}var nk=this.get_viewModel().get_dataSchema().getMetadataForDatasourceByCaption(nj);if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(nk)){return}var nl=nk.getHighestWarning();if(ss.isNullOrUndefined(nl)||!nl.get_isActive()){return}var nm=[];var nn=new ss.ObjectEnumerator(nk.getAllAssetMetadata());try{while(nn.moveNext()){var no=nn.current();var np=no.value.get_dqws();for(var nq=0;nq<np.length;nq++){var nr=np[nq];nm.push({assetUrl:nr.get_assetId(),linksDisabled:true,assetName:nr.get_assetName(),assetType:nr.get_parentType().toString(),author:{domain:nr.get_author().get_domain(),name:nr.get_author().get_name(),username:nr.get_author().get_username()},isSevere:nr.get_isElevated(),localizedDate:ss.formatDate(new Date(nr.get_updatedAt()),'MMMM dd, yyyy, h:mm tt'),message:nr.get_message(),onContentItem:true,type:this.$W(nr.get_category()),remoteType:nr.get_remoteType()})}var ns=no.value.get_upstreamDqws();for(var nt=0;nt<ns.length;nt++){var nu=ns[nt];nm.push({assetUrl:nu.get_assetId(),linksDisabled:true,assetName:nu.get_assetName(),assetType:nu.get_parentType().toString(),author:{domain:nu.get_author().get_domain(),name:nu.get_author().get_name(),username:nu.get_author().get_username()},isSevere:nu.get_isElevated(),localizedDate:ss.formatDate(new Date(nu.get_updatedAt()),'MMMM dd, yyyy, h:mm tt'),message:nu.get_message(),onContentItem:false,type:this.$W(nu.get_category()),remoteType:nu.get_remoteType()})}}}finally{nn.dispose()}this.loadOnDemandModulesForDatacatMetadata().done(ss.mkdel(this,function(nv){var nw={linksDisabled:true,iconOnly:true,details:nm,side:'right'};var nx=React.createElement(ConnectPanePluginTableauServer.QualityWarningButton,nw);ReactDOM.render(nx,ni)}))},$q:function(ni,nj){return ss.mkdel(this,function(){eI.$5(nj);this.get_schemaViewerViewModel().set_selectedDataSource(ni)})},$r:function(ni){return ss.mkdel(this,function(){if(!ss.referenceEquals(ni,this.get_schemaViewerViewModel().get_selectedDataSource())){tab.SchemaClientCommands.setActiveDataSourceName(ni.get_name(),false)}tab.VizClientCommands.setUIMode('data-tab','EditDataSource','')})},$12:function(){return BrowserSupport.BrowserSupport.IsTouchAndNonMobile()&&!this.$1p}},{$2:function(ni,nj){if(nj){return'tab-schema-field-pill-inactive'}switch(ni){case'quantitative':{return'tab-schema-field-pill-measure'}case'ordinal':case'nominal':default:{return'tab-schema-field-pill-dimension'}}},$0:function(){var ni="<div class='tab-columnSeparator'>\n  <div class='separatorLabel dimLabel'><span class='separatorLabelText'>"+tab.Strings.AuthSchemaViewerHeaderDimensions+"</span></div>\n  <div class='separatorLine'></div>\n  <div class='separatorLabel measLabel'><span class='separatorLabelText'>"+tab.Strings.AuthSchemaViewerHeaderMeaures+'</span></div>\n</div>';return $(ni)},$1:function(){return $('<div class="tab-containerSeparator"></div>')},$3:function(ni){return ni===0||ni===1||ni===4},$4:function(ni,nj){if(ss.isNullOrUndefined(nj.fieldIconResource)||nj.fieldIconResource.length===0){ni.iconArea.toggleClass('no-icon',true);return}ni.iconArea.toggleClass('no-icon',false);ni.icon.addClass(gO.getFieldIcon$1(nj));spiff.Widget.disableTextSelectionOnElement(ni.icon)},$5:function(ni){if(BrowserSupport.BrowserSupport.IsTouchAndNonMobile()){ni.addClass('tab-dataSource-touchScreenSelected')}}});var eJ=global.tab.DataSourceTemplate=ss.mkType(a,'tab.DataSourceTemplate',function(){this.icon=null;this.labelArea=null;this.menuButton=null;this.brokenIndicatorArea=null;this.$1=null;this.$2=null;spiff.Template.call(this,$("<div class='tab-dataSource'><div class='tab-schema-dataSourceIcon'></div><div class='tab-schema-dataSourceName'></div><div class='tab-schema-dataSourceBrokenIndicatorArea'><div class='tab-schema-dataSourceBrokenIndicatorIcon'></div></div></div>"));this.icon=this.getElementBySelector('.'+'tab-schema-dataSourceIcon');this.labelArea=this.getElementBySelector('.'+'tab-schema-dataSourceName');this.brokenIndicatorArea=this.getElementBySelector('.'+'tab-schema-dataSourceBrokenIndicatorArea');if(tabBootstrap.Affordances.isOn('authoring_DataSource_ContextMenu')){this.domRoot.append($("<div class='tab-schema-dataSourceMenuButton'><div class='tab-schema-dataSourceMenuIcon'></div></div>"));this.menuButton=this.getElementBySelector('.'+'tab-schema-dataSourceMenuButton')}},{getMenuClickHandler:function(ni){if(ss.isValue(this.menuButton)&&ss.isNullOrUndefined(this.$2)){this.$2=spiff.TableauClickHandler.target(this.menuButton[0]);ni.add$1(this.$2)}return this.$2},getLabelClickHandler:function(ni){if(ss.isNullOrUndefined(this.$1)){this.$1=spiff.TableauClickHandler.target(this.labelArea[0]);ni.add$1(this.$1)}return this.$1}});var eK=global.tab.DataTabMenuBarBuilder=ss.mkType(a,'tab.DataTabMenuBarBuilder',function(){iF.call(this)},{addModeSpecificMenus:function(ni){},addModeSpecificHelpItems:function(ni,nj){}});var eL=global.tab.DataTabProxy=ss.mkType(a,'tab.DataTabProxy',function(){this.$b=null;this.$4=null;this.$8=null;this.$6=null;this.$9=null;this.$3='';this.$a=null;this.$7=null;this.$5=null;var ni=tab.ModuleManager.registerRawJsModule('@tableau/'+'data-tab-components','data-tab-components'+'.min','data-tab-components').moduleBeingConfigured;var nj=tab.ModuleManager.register(tab.IDataTabIsolatedModule).call(null,'DataTabIsolated',null).andLoadOnDemandIf(!tsConfig.isUnitTestRun).moduleBeingConfigured;nj.addDependency(ni);var nk=tab.ModuleManager.registerRawJsModule('@tableau/'+'extract-widgetry','extract-widgetry'+'.min','extract-widgetry').moduleBeingConfigured;nj.addDependency(nk);var nl=tab.ModuleManager.register(tab.IDataTabModule).call(null,'DataTab',null).andLoadOnDemandIf(!tsConfig.isUnitTestRun).moduleBeingConfigured;nl.addDependency(new tab.JsModuleInfo(ss.getTypeFullName(tab.IDataTabIsolatedModule),null))},{setWorkbook:function(ni){if(ss.isValue(this.$b)){this.$b.remove_uiModeChanged(ss.mkdel(this,this.$2))}if(!ss.staticEquals(this.$9,null)){this.$9();this.$9=null}if(!ss.staticEquals(this.$a,null)){this.$a();this.$a=null}tab.MiscUtil.dispose$1(this.$4);tab.MiscUtil.dispose$1(this.$8);tab.MiscUtil.dispose$1(this.$6);this.$b=ni;if(ss.isValue(this.$b)){this.$b.add_uiModeChanged(ss.mkdel(this,this.$2));this.$4=new tab.NotificationForwarder('doc:update-data-preparation-event');this.$8=new tab.NotificationForwarder('doc:show-join-area-event');this.$6=new tab.NotificationForwarder('doc:update-join-description-event');this.$9=tab.PluginPresentationLayer.get_instance().registerNotificationHandler('doc:get-active-object-pres-model-notification-event',ss.mkdel(this,this.$0));this.$a=tab.PluginPresentationLayer.get_instance().registerNotificationHandler('doc:get-object-graph-pres-model-notification-event',ss.mkdel(this,this.$1));if(this.$b.get_uiMode()==='data-tab'){this.$2()}}},$2:function(){if('data-tab'===this.$b.get_uiMode()){tab.ModuleManager.load$1(tab.IDataTabModule).call(null,[]).done(ss.mkdel(this,function(ni){this.$5=ni;var nj=this.$5.showDataTab(this.$b.get_dataSchema(),this.$3,this.$7,tab.PluginPresentationLayer.get_instance());this.$4.setReceiver(nj.updateDataPrepHandler);this.$8.setReceiver(nj.showJoinAreaHandler);this.$6.setReceiver(nj.updateJoinAreaHandler)}))}else if(ss.isValue(this.$5)){this.$5.hideDataTab()}},$0:function(ni){var nj=ni;this.$3=nj.dataObjectModelObjectId},$1:function(ni){this.$7=ni}},{new$1:function(ni){var nj=new eL;nj.setWorkbook(ni);return nj},$0:function(ni){eL.$1()},$1:function(){if(ss.isNullOrUndefined(eL.$3)){eL.$3=eL.new$1(tab.ApplicationModel.get_instance().get_workbook())}else{eL.$3.setWorkbook(tab.ApplicationModel.get_instance().get_workbook())}}});var eM=global.tab.DateModifiedDriver=ss.mkType(a,'tab.DateModifiedDriver',function(ni){this.$2=null;this.$3=null;this.$1$1=null;this.$2=ni},{add_onNewModifiedTextBuilt:function(ni){this.$1$1=ss.delegateCombine(this.$1$1,ni)},remove_onNewModifiedTextBuilt:function(ni){this.$1$1=ss.delegateRemove(this.$1$1,ni)},stopDateGeneration:function(){this.$3=tab.MiscUtil.clearTimeout(this.$3)},startDateGeneration:function(ni){this.$3=tab.MiscUtil.clearTimeout(this.$3);if(ss.staticEquals(ni,null)){return}this.$1(ni)},$1:function(ni){var nj=this.$0(ni);var nk=this.$2[nj].get_builder().buildDisplayTextForDate(ni);if(!ss.staticEquals(this.$1$1,null)){this.$1$1(nk)}if(nj<this.$2.length-1){this.$3=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.startDateGeneration(ni)}),this.$2[nj].get_nextUpdateIntervalMs())}},$0:function(ni){var nj=0;var nk=tab.DateUtil.differenceInMinutes(tab.DateUtil.get_now(),ni);while(nj<this.$2.length&&nk>=this.$2[nj].get_minutesDisplayIsValid()){nj++}return nj}});var eN=global.tab.DebouncedTextInputComponent=ss.mkType(a,'tab.DebouncedTextInputComponent',function(){this.$0=null;React.Component.call(this);this.$0=ss.mkdel(this,function(ni){this.props.onElementUpdatedHandler(ni)})},{render:function(){var ni={text:this.props.value,handleChange:this.props.onChangedHandler,handleClearText:this.props.onClearTextHandler,disabled:!this.props.enabled,testId:this.props.testId,shouldSelectTextOnFocus:this.props.shouldSelectTextOnFocus};if(ss.isValue(this.props.containerStyle)){ni.containerStyle=this.props.containerStyle}if(!ss.staticEquals(this.props.onSubmitHandler,null)){ni.handleBlur=ss.mkdel(this,function(nj){this.props.onSubmitHandler()});ni.handleEnter=this.props.onSubmitHandler}if(!ss.staticEquals(this.props.onElementUpdatedHandler,null)){ni.inputRef=this.$0}return React.createElement(SharedWidgets.OutlineTextFieldWidget,ni)}});var eO=global.tab.DebouncedTextInputViewModel=ss.mkType(a,'tab.DebouncedTextInputViewModel',function(ni){this.$j=null;this.$g=false;this.$h=null;this.$i=false;this.$3$1=null;this.$3$2=false;this.$3$3=false;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$j=ni;this.$h='';this.$g=true;this.set_shouldSelectTextOnFocus(true);this.$f(new tab.Debouncer(ss.mkdel(this,this.$4),eO.defaultDebounceTimeout));this.disposables.add$1(this.$e())},{add_onValueChanged:function(ni){this.$3$1=ss.delegateCombine(this.$3$1,ni)},remove_onValueChanged:function(ni){this.$3$1=ss.delegateRemove(this.$3$1,ni)},get_shouldSelectTextOnRender:function(){return this.$i},set_shouldSelectTextOnRender:function(ni){this.$i=ni},get_shouldSelectTextOnFocus:function(){return this.$3$2},set_shouldSelectTextOnFocus:function(ni){this.$3$2=ni},get_enabled:function(){return this.$g},set_enabled:function(ni){this.$g=ni;this.incrementProps()},get_allowEmpty:function(){return this.$3$3},set_allowEmpty:function(ni){this.$3$3=ni},$e:function(){return this.$3$4},$f:function(ni){this.$3$4=ni},$c:function(){return this.$h},$d:function(ni){this.$h=ni;this.incrementProps()},$a:function(){return this.$3$5},$b:function(ni){this.$3$5=ni},$8:function(){return this.$3$6},$9:function(ni){this.$3$6=ni},get_hasChangedSinceLastValueCommit:function(){return this.$3$7},set_hasChangedSinceLastValueCommit:function(ni){this.$3$7=ni},updateFromModel:function(ni){this.$b(ni);if(!this.get_hasChangedSinceLastValueCommit()){this.$d(ni)}},insertText:function(ni){if(ss.isNullOrUndefined(this.$8())){return}var nj=this.$8().selectionStart;tab.DomUtil.replaceSelection(this.$8(),ni);if(BrowserSupport.BrowserSupport.SetSelectionRange()){this.$8().selectionStart=this.$8().selectionEnd=nj+ni.length}this.$5(this.$8().value)},selectText:function(){if(ss.isNullOrUndefined(this.$8())){return}this.$8().select()},createUpdatedProps:function(){return{value:this.$c(),enabled:this.get_enabled(),onChangedHandler:ss.mkdel(this,this.$5),onSubmitHandler:ss.mkdel(this,this.$6),onElementUpdatedHandler:ss.mkdel(this,this.$7),onClearTextHandler:ss.mkdel(this,this.$3),shouldSelectTextOnFocus:this.get_shouldSelectTextOnFocus(),testId:this.$j,key:'dti_'+this.$j}},$4:function(){this.set_hasChangedSinceLastValueCommit(false);if(!ss.staticEquals(this.$3$1,null)){this.$3$1(this.$c())}},$3:function(){this.$5('');this.$8().focus()},$7:function(ni){this.$9(ni);if(this.$i){this.selectText();this.set_shouldSelectTextOnRender(false)}},$6:function(){if(tab.MiscUtil.isNullOrEmpty$1(this.$c())&&!this.get_allowEmpty()){this.$d(this.$a())}else if(!ss.referenceEquals(this.$c(),this.$a())){this.$e().invokeActionImmediate()}},$5:function(ni){this.$d(ni);this.set_hasChangedSinceLastValueCommit(true);if(tab.MiscUtil.isNullOrEmpty$1(ni)&&!this.get_allowEmpty()){this.$e().cancel()}else{this.$e().invokeActionDelayed()}}});var eP=global.tab.DeleteDraftCommand=ss.mkType(a,'tab.DeleteDraftCommand',function(){tab.DeleteDraftCmd.call(this)},{get_isEnabled:function(){return tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_isDraft()&&cl.get_instance().get_isDraftStatusSuccess()},get_isVisible:function(){return tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveForNewWorkbooks')&&cl.get_instance().get_autoSaveEnabled()},invoke:function(){return this.fireAndForget(function(){eQ.show()})}});var eQ=global.tab.DeleteDraftDialog=ss.mkType(a,'tab.DeleteDraftDialog',function(){this.$4=null;this.$2$1=null;tab.BaseDisposableDialog.call(this)},{get_props:function(){return this.$2$1},set_props:function(ni){this.$2$1=ni},$3:function(){if(ss.isValue(this.$4)){return}this.parentNode=document.createElement('div');this.set_props({title:tab.Strings.AuthDeleteDraftDialogTitle,secondaryChoiceAction:ss.mkdel(this,this.$0),secondaryChoiceButtonString:tab.Strings.DialogButtonCancel,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.AreYouSureDelete,primaryChoiceAction:ss.mkdel(this,this.$2),primaryChoiceButtonIsDestructive:true,firstMessage:tab.Strings.AuthDeleteDraftDialogBody,secondMessage:null,learnMoreToken:null,buttonClassToFocus:'tab-autosavewarning-secondarybutton'});this.$4=React.createElement(cm,this.get_props());ReactDOM.render(this.$4,this.parentNode)},$2:function(){tab.OnlineAnalyticsClient.logEvent(eQ.logEventType,ss.mkdict(['Event','Delete Draft']));tab.WorkbookDraftsCommands.deleteCurrentDraft().then(ss.mkdel(this,function(){bn.exitAuthoring(tab.ApplicationModel.get_instance().get_workbook());this.$1()}),function(){})},$0:function(){tab.OnlineAnalyticsClient.logEvent(eQ.logEventType,ss.mkdict(['Event','Cancel']));this.$1()},$1:function(){this.$4=null;_.defer(ss.mkdel(this,this.dispose))}},{show:function(){if(ss.isNullOrUndefined(eQ.$1)){eQ.$1=new eQ}eQ.$1.$3();return eQ.$1},close:function(){if(ss.isNullOrUndefined(eQ.$1)){return}eQ.$1.$1();eQ.$1=null}});var eR=global.tab.DeleteSelectedZonesShortcut=ss.mkType(a,'tab.DeleteSelectedZonesShortcut',function(ni,nj){this.$1=null;this.$0=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$1=ni;this.$0=nj},{getAdditionalOptions:function(){var ni=new Object;ni.propagation=2;return ni},getKeyComboOrKeyCombos:function(){return new KeyboardShortcuts.KeyCombos(new KeyboardShortcuts.KeyCombo('Backspace',null))},isAllowed:function(ni){var nj=$(ni.target);var nk=!nj.is('.'+'tab-LayoutTree')&&!nj.is('.'+'tab-LayoutTreeNode');return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,ni)&&nk&&this.$1()},executeShortcut:function(ni){this.$0()},getTelemetryKey:function(){return'Delete Selected Zones'}});var eS=global.tab.DeleteSheetCommandRedirectHandler=ss.mkType(a,'tab.DeleteSheetCommandRedirectHandler',null,null,{$0:function(ni){var nj=$.Deferred();var nk=ni['sheet'.toString()];var nl=tab.ConfirmationViewModel.create(tab.Strings.DeleteSheetWithVizInTooltipDialogMessage,function(nm){if(nm==='confirm'){tab.SheetClientCommands.deleteSheet(nk)}nj.resolve()});nl.set_titleText(tab.Strings.DeleteSheetWithVizInTooltipDialogTitle);nl.set_confirmText(tab.Strings.DeleteSheetWithVizInTooltipDialogButton);nl.set_denyText(tab.Strings.DialogButtonCancel);nl.show();return nj.promise()}});var eT=global.tab.DeleteSheetsCommandRedirectHandler=ss.mkType(a,'tab.DeleteSheetsCommandRedirectHandler',null,null,{$0:function(ni){var nj=$.Deferred();var nk=ni['sheets'.toString()];var nl=tab.ConfirmationViewModel.create(tab.Strings.DeleteSheetsWithVizInTooltipDialogMessage,function(nm){if(nm==='confirm'){tab.SheetClientCommands.deleteSheets(nk)}nj.resolve()});nl.set_titleText(tab.Strings.DeleteSheetsWithVizInTooltipDialogTitle);nl.set_confirmText(tab.Strings.DeleteSheetsWithVizInTooltipDialogButton);nl.set_denyText(tab.Strings.DialogButtonCancel);nl.show();return nj.promise()}});var eU=global.tab.DestroyVQLSessionCommand=ss.mkType(a,'tab.DestroyVQLSessionCommand',function(){tab.DestroyVQLSessionCmd.call(this)},{get_isEnabled:function(){return true},invoke:function(){return this.fireAndForget(function(){tab.SessionServerCommands.destroySessionAndForward(function(){bn.handleExit(null,null)},cl.get_instance().get_autoSaveEnabled())})}});var eV=global.tab.DetailedFieldTooltipComponent=ss.mkType(a,'tab.DetailedFieldTooltipComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){var ni=new tab.WidgetPluginContainerProps;ni.moduleName=eV.$1;ni.initialProps=this.props;return React.createElement(tab.WidgetPluginContainer,ni)}});var eW=global.tab.DetailedFieldTooltipProps=ss.mkType(a,'tab.DetailedFieldTooltipProps',function(){this.triggerElement=null;this.fieldCaption=null;this.isIncompatible=false;this.errorMsg=null;this.comment=null;this.dimensionRelatabilityPresModel=null;this.measureRelatabilityPresModel=null;this.filterShelfRelatabilityPresModel=null;this.tableCalcDescription=null;this.setDimensionalityFieldCaptions=null;this.filterDescription=null;this.filterAppliedWorksheets=null;this.isMappedFilter=false;this.isInfoscentV2=false});var eX=global.tab.DeviceLayoutListComponent=ss.mkType(a,'tab.DeviceLayoutListComponent',function(ni,nj){this.$3=null;React.PureComponent.call(this,ni,nj)},{render:function(){var ni=[this.$2(),this.renderDevicePreviewButton()];var nj=['tab-Section','tab-DeviceLayoutList'].join(' ');if(tabBootstrap.FeatureFlags.isEnabled('EventUtilsEventHandlingRework')){return spiff.DOMElements.div({className:nj,key:'device-layout-list-section',onContextMenu:ss.mkdel(this,function(nl){nl.preventDefault();var nm=new spiff.ShowMenuOptions($(nl.target),false);nm.cursorPosition={left:nl.clientX,top:nl.clientY};var nn=nm;this.$1(nn)})},spiff.DOMElements.div(ej.get_contentHTMLAttr(),ni))}else{var nk=new EventUtils.EventHandleSpec;nk.rightClick=ss.mkdel(this,function(nl){var nm=new spiff.ShowMenuOptions($(nl.target),false);nm.cursorPosition={left:nl.clientX,top:nl.clientY};var nn=nm;this.$1(nn)});return EventUtils.EventForwarder.div(nk,{className:nj,key:'device-layout-list-section'},spiff.DOMElements.div(ej.get_contentHTMLAttr(),ni))}},renderDevicePreviewButton:function(){var ni={handleClick:this.props.setDevicePreviewBarVisibility,buttonType:(this.props.devicePreviewBarIsVisible?2:3),testId:'device-preview',buttonRef:ss.mkdel(this,function(nj){this.$3=nj}),children:tab.Strings.DevicePreview,disabled:this.props.devicePreviewButtonDisabled,selected:this.props.devicePreviewBarIsVisible};return spiff.DOMElements.div({key:'device-preview-button'},spiff.DOMElements.div({className:'tab-DevicePreview',onContextMenu:ss.mkdel(this,function(nj){nj.stopPropagation();nj.preventDefault();var nk=new spiff.ShowMenuOptions($(this.$3),false);nk.cursorPosition={left:nj.clientX,top:nj.clientY};var nl=nk;this.$1(nl)})},React.createElement(SharedWidgets.ButtonWidget,ni)))},$2:function(){if(this.props.modifiedLayouts.length===0){return null}var ni=[this.$0('default')];ss.arrayAddRange(ni,_.map(this.props.modifiedLayouts,ss.mkdel(this,this.$0)));return spiff.DOMElements.div({},spiff.DOMElements.ul({key:'device-list',className:'tab-LayoutList'},ni))},$0:function(ni){return eY.create({dashboardDeviceLayout:ni,isSelected:ni===this.props.currentLayout,isAutoGenerated:ss.contains(this.props.autoGeneratedLayouts,ni),select:this.props.selectDeviceLayout,toggleAutoGenerated:this.props.toggleAutoGenerated,openMoreActionsMenu:this.props.openMoreActionsMenu,moreActionsMenuTargetLayout:this.props.moreActionsMenuTargetLayout,key:'device-layout-list-item-'+ni.toString()})},$1:function(ni){this.props.openDeviceLayoutContextMenu(ni)}});var eY=global.tab.DeviceLayoutListItemComponent=ss.mkType(a,'tab.DeviceLayoutListItemComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.state={}},{render:function(){var ni=this.props.dashboardDeviceLayout;var nj=this.$0(ni);var nk=((ni!=='default')?'tabAuthModifiedDevice':'tabAuthDefaultLayout');var nl=(this.props.isSelected?'selected':'');var nm=(this.$2(ni)?'menuOpened':'');var nn=['tabAuthDevice',nk,nl,nm].join(' ');var no=ni!=='default';if(tabBootstrap.FeatureFlags.isEnabled('EventUtilsEventHandlingRework')){return spiff.DOMElements.li({className:nn,key:nj,onClick:ss.mkdel(this,function(nr){this.$1()})},nj,this.$5(ni),(no?ss.mkdel(this,function(){return this.$6(ni)})():null))}else{var np=spiff.DOMElements.li;var nq=new EventUtils.EventHandleSpec;nq.tap=ss.mkdel(this,function(nr){this.$1()});return np({},EventUtils.EventForwarder.div(nq,{className:nn,key:nj},nj,this.$5(ni),(no?ss.mkdel(this,function(){return this.$6(ni)})():null)))}},$5:function(ni){if(ni==='phone'){var nj=(this.props.isAutoGenerated?'-locked':'-unlocked');var nk=(this.props.isAutoGenerated?tab.Strings.DashboardAuthoringCustomizeLayoutTooltip:tab.Strings.DashboardAuthoringAutoGenerateLayoutTooltip);if(tabBootstrap.FeatureFlags.isEnabled('EventUtilsEventHandlingRework')){return spiff.DOMElements.span({className:'tabAuthAutoGenerateLayoutIcon'+nj,key:'autoGenerateLayout',role:'button',title:nk,onClick:ss.mkdel(this,function(nm){this.props.toggleAutoGenerated(ni)})})}else{var nl=new EventUtils.EventHandleSpec;nl.tap=ss.mkdel(this,function(nm){this.props.toggleAutoGenerated(ni)});return EventUtils.EventForwarder.span.apply(null,[nl,{className:'tabAuthAutoGenerateLayoutIcon'+nj,key:'autoGenerateLayout',role:'button',title:nk}].concat(null))}}return null},$6:function(ni){if(tabBootstrap.FeatureFlags.isEnabled('EventUtilsEventHandlingRework')){return spiff.DOMElements.span({key:'moreActions',role:'button',className:'tabAuthMoreActionsIcon',title:tab.Strings.MoreActions,onClick:ss.mkdel(this,function(nk){this.$3(nk,ni)})})}else{var nj=new EventUtils.EventHandleSpec;nj.tap=ss.mkdel(this,function(nk){this.$4(nk,ni)});return EventUtils.EventForwarder.span.apply(null,[nj,{key:'moreActions',role:'button',className:'tabAuthMoreActionsIcon',title:tab.Strings.MoreActions}].concat(null))}},$1:function(){if(!ss.staticEquals(this.props.select,null)){this.props.select(this.props.dashboardDeviceLayout)}},$4:function(ni,nj){if(!ss.staticEquals(this.props.openMoreActionsMenu,null)){this.props.openMoreActionsMenu(nj,new spiff.ShowMenuOptions($(ni.target),false))}ni.stopPropagation()},$3:function(ni,nj){if(!ss.staticEquals(this.props.openMoreActionsMenu,null)){this.props.openMoreActionsMenu(nj,new spiff.ShowMenuOptions($(ni.target),false))}ni.stopPropagation()},$2:function(ni){return ni===this.props.moreActionsMenuTargetLayout},$0:function(ni){return dT.getUserString(ni)}},{create:function(ni){return React.createElement(eY,ni)}});var eZ=global.tab.DeviceLayoutListTelemetry=ss.mkType(a,'tab.DeviceLayoutListTelemetry',null,null,{logDeleteLayoutEvent:function(ni,nj){var nk=ss.mkdict(['Layout',ni,'IsAutoGenerated',nj]);tab.OnlineAnalyticsClient.logEvent('Authoring_DSD_DeleteLayout',nk)}});var fa=global.tab.DeviceLayoutListViewModel=ss.mkType(a,'tab.DeviceLayoutListViewModel',function(ni){this.$8=null;this.$a=null;this.$9=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$8=ni;this.disposables.add$1(this.$8.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){nj.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nj.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nj.add_currentDeviceLayoutListChanged(ss.mkdel(this,this.incrementProps));nj.add_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){nj.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nj.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nj.remove_currentDeviceLayoutListChanged(ss.mkdel(this,this.incrementProps));nj.remove_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.incrementProps))})))},{selectDeviceLayout:function(ni){if(ni!==this.$8.get_model().get_currentDeviceLayout()){tab.DashboardClientCommands.setDashboardDeviceLayout(ni)}},$3:function(ni){if(ss.isValue(this.$8.get_model())){tab.DashboardClientCommands.newDashboardLayout(this.$8.get_model().get_sheetName(),ni,true)}},setDevicePreviewBarVisibility:function(ni){if(ss.isValue(this.$8.get_model())){this.$9=true;tab.DashboardClientCommands.setIsDevicePreviewVisible(!this.$8.get_model().get_devicePreviewBarIsVisible(),ss.mkdel(this,function(){this.$9=false;this.incrementProps()}));this.incrementProps()}},openMoreActionsMenu:function(ni,nj){var nk=ss.mkdel(this,function(nl){var nm=nl.commands;var nn=tab.WidgetUtil.menuViewModelFromCommands(nm,tab.WidgetUtil.commandMenuItemClicked,ss.mkdel(this,this.$6),null,ss.mkdel(this,function(no){return this.createDropdownMenuCommandHandler(no,ni)}));nn.show(nj)});this.$a=ni;this.incrementProps();tab.DashboardClientCommands.getDeviceLayoutListContextMenu(ni,nk)},openDeviceLayoutContextMenu:function(ni){var nj=this.$4();if(nj.length===0){return}var nk=spiff.MenuViewModel.createForMenu(new spiff.Menu(nj),ss.mkdel(this,function(nl){var nm=nl.data;this.$3(nm)}),null,null);nk.show(ni)},createDropdownMenuCommandHandler:function(ni,nj){var nk=tab.WidgetUtil.createDropdownMenuCommandHandler(ni);var nl=tab.CommandItemWrapper.create(ni);var nm=tab.CommandSerializer.deserialize(nl.get_command(),false);return ss.mkdel(this,function(){if(ss.referenceEquals(nm.commandName,{ns:'tabdoc',cmd:'delete-dashboard-layout'}.cmd)){eZ.logDeleteLayoutEvent(nj,this.$5(nj))}nk()})},$6:function(){this.$a=null;this.incrementProps()},$5:function(ni){var nj=this.$8.get_model();return ss.isValue(nj)&&ss.isValue(nj.get_autoGeneratedDeviceLayouts())&&ss.contains(nj.get_autoGeneratedDeviceLayouts(),ni)},$7:function(ni){tab.DashboardClientCommands.toggleAutomaticLayoutMode(this.$8.get_model().get_sheetName(),ni)},createInitialProps:function(){var ni=this.$8.get_model();var nj=((ss.isValue(ni)&&ss.isValue(ni.get_deviceLayouts()))?ni.get_deviceLayouts():[]);return{autoGeneratedLayouts:nj.filter(ss.mkdel(this,function(nk){return this.$5(nk)})),selectDeviceLayout:ss.mkdel(this,this.selectDeviceLayout),toggleAutoGenerated:ss.mkdel(this,this.$7),openMoreActionsMenu:ss.mkdel(this,this.openMoreActionsMenu),openDeviceLayoutContextMenu:ss.mkdel(this,this.openDeviceLayoutContextMenu),setDevicePreviewBarVisibility:ss.mkdel(this,this.setDevicePreviewBarVisibility),devicePreviewBarIsVisible:ss.isValue(ni)&&ni.get_devicePreviewBarIsVisible(),devicePreviewButtonDisabled:this.$9,hasMaxDeviceLayouts:false,key:'device-layout-list'}},$4:function(){var ni=[];var nj=this.$8.get_model();if(ss.isNullOrUndefined(nj)){return ni}if(ss.isValue(nj.get_deviceLayouts())&&nj.get_deviceLayouts().length!==3){if(!ss.contains(nj.get_deviceLayouts(),'desktop')){ni.push(spiff.MenuItem.newItem('desktop',tab.Strings.AddDesktopLayout,tab.Strings.AddDesktopLayout,null,null,null))}if(!ss.contains(nj.get_deviceLayouts(),'tablet')){ni.push(spiff.MenuItem.newItem('tablet',tab.Strings.AddTabletLayout,tab.Strings.AddTabletLayout,null,null,null))}if(!ss.contains(nj.get_deviceLayouts(),'phone')){ni.push(spiff.MenuItem.newItem('phone',tab.Strings.AddPhoneLayout,tab.Strings.AddPhoneLayout,null,null,null))}}return ni},createUpdatedProps:function(){var ni=this.$8.get_model();if(ss.isNullOrUndefined(ni)){return fa.$1}var nj=ni.get_deviceLayouts()||[];return{modifiedLayouts:nj,autoGeneratedLayouts:nj.filter(ss.mkdel(this,function(nk){return this.$5(nk)})),hasDevices:ss.isValue(ni.get_deviceLayouts())&&ni.get_deviceLayouts().length>0,currentLayout:this.$8.get_model().get_currentDeviceLayout(),moreActionsMenuTargetLayout:this.$a,devicePreviewBarIsVisible:ni.get_devicePreviewBarIsVisible(),devicePreviewButtonDisabled:this.$9,hasMaxDeviceLayouts:ss.isValue(ni.get_deviceLayouts())&&ni.get_deviceLayouts().length===3,key:'device-layout-list'}}});var fb=global.tab.DevicePreviewBarHostComponent=ss.mkType(a,'tab.DevicePreviewBarHostComponent',function(ni){ss.makeGenericType(tab.PureComponentWithAsyncDependencies$3,[Object,Object,Object]).call(this,ni)},{fetchAsyncDependencies:function(){return tab.ModuleManager.load('device-preview-bar',[]).pipe(function(ni){return ni})},renderWhileWaiting:function(){return null},renderWithDependencies:function(ni){if(!this.props.isVisible){return null}var nj=bA.computeSizing({leftAreaWidth:this.props.leftAreaWidth,isMobile:tsConfig.is_mobile,isDevicePreviewBarVisible:true,sheetType:'dashboard'});var nk={currentLayout:this.props.currentLayout,dashboard:tsConfig.current_sheet_name,deviceLayoutList:this.props.deviceLayoutList,existingLayouts:Array.prototype.slice.call(this.props.existingLayouts),isMobileAppChecked:this.props.isMobileAppChromeVisible,isOrientationPortrait:this.props.isPortraitMode,portPreviewList:Array.prototype.slice.call(this.props.previewPortSizeList),overlayPropsOverride:{zIndex:702+1}};return spiff.DOMElements.div({className:fb.devicePreviewBarClass,style:{height:tabBootstrap.VizLayoutConstants.get_authoringDevicePreviewBarHeight(),top:tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()+'px',left:nj.left,right:0}},React.createElement(ni.DevicePreviewBar,nk))}});var fc=global.tab.DevicePreviewBarViewModel=ss.mkType(a,'tab.DevicePreviewBarViewModel',function(ni,nj){this.$3=null;this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=ni;this.$4=nj;this.disposables.add$1(this.$3.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nk){if(nk.get_isDashboard()){nk.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nk.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nk.add_currentDeviceLayoutListChanged(ss.mkdel(this,this.incrementProps));nk.add_currentPreviewLayoutChanged(ss.mkdel(this,this.incrementProps));nk.add_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.incrementProps));nk.add_previewPortSizeListChanged(ss.mkdel(this,this.incrementProps))}}),ss.mkdel(this,function(nk){if(nk.get_isDashboard()){nk.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nk.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nk.remove_currentDeviceLayoutListChanged(ss.mkdel(this,this.incrementProps));nk.remove_currentPreviewLayoutChanged(ss.mkdel(this,this.incrementProps));nk.remove_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.incrementProps));nk.remove_previewPortSizeListChanged(ss.mkdel(this,this.incrementProps))}})))},{update:function(){this.incrementProps()},createInitialProps:function(){return{isVisible:false,leftAreaWidth:this.$4.get_leftAreaWidth(),currentLayout:'default',existingLayouts:[],deviceLayoutList:{},isMobileAppChromeVisible:false,isPortraitMode:true,previewPortSizeList:[]}},createUpdatedProps:function(){var ni=this.$3.get_model();if(ss.isNullOrUndefined(ni)||!ni.get_isDashboard()||ni.isStory()||ss.isNullOrUndefined(ni.get_previewPortSizeList())||ni.get_previewPortSizeList().length===0){return{isVisible:false}}var nj='default';if(ss.isValue(ni)&&ni.get_isDashboard()&&ss.isValue(ni.get_dashboardSize())){nj=((ni.get_currentDeviceLayout()!=='default')?ni.get_currentDeviceLayout():ni.get_currentPreviewLayout())}var nk=ni.previewPortSizeForDeviceLayout(nj);return{isVisible:ni.get_devicePreviewBarIsVisible(),leftAreaWidth:this.$4.get_leftAreaWidth(),currentLayout:nj,existingLayouts:ni.get_deviceLayouts(),deviceLayoutList:ni.get_deviceLayoutInfoList(),isPortraitMode:nk.h>nk.w,isMobileAppChromeVisible:ni.get_isMobileAppChromeVisible(),previewPortSizeList:ni.get_previewPortSizeList()}}});var fd=global.tab.DifferenceTableCalcViewModel=ss.mkType(a,'tab.DifferenceTableCalcViewModel',function(ni){this.$0=null;this.$1=null;mq.call(this);this.$0=ni;this.$0.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$1=new lX(ni.get_referenceModel());this.disposables.add$1(this.$1)},{get_differenceFromComboBoxVM:function(){return this.$1.get_referenceComboBoxVM()},get_computeCompoundedRate:function(){return this.$0.get_computeCompoundedRate()},get_computeCompoundedRateState:function(){return this.$0.get_computeCompoundedRateState()},get_model:function(){return this.$0},get_referenceViewModel:function(){return this.$1},onModelUpdated:function(){},computeCompoundedRateChanged:function(ni){if(ni===this.$0.get_computeCompoundedRate()){return}var nj=new tab.TableCalcSetCompoundRateCmd;nj.set_uiBlocking('immediately');nj.set_isCompoundRate(ni);nj.set_calcNestingLevel(this.get_model().get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.get_model().get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))}});var fe=global.tab.DisplayBuilderEntry=ss.mkType(a,'tab.DisplayBuilderEntry',function(){this.$1$1=0;this.$1$2=0;this.$1$3=null},{get_minutesDisplayIsValid:function(){return this.$1$1},set_minutesDisplayIsValid:function(ni){this.$1$1=ni},get_nextUpdateIntervalMs:function(){return this.$1$2},set_nextUpdateIntervalMs:function(ni){this.$1$2=ni},get_builder:function(){return this.$1$3},set_builder:function(ni){this.$1$3=ni}});var ff=global.tab.DisplayFormatDialog=ss.mkType(a,'tab.DisplayFormatDialog',function(ni){this.$1=null;React.Component.call(this,ni);var nj=new fi;nj.displayFormatPresModel=ni.displayFormatPresModel;nj.stackedOrigin=this.$0(ff.stackedOriginVerticalAlignment,ff.stackedOriginHorizontalAlignment);nj.anchorOrigin=this.$0(ff.anchorOriginVerticalAlignment,ff.anchorOriginHorizontalAlignment);this.state=nj;var nk='doc:update-display-format-dialog-event';this.$1=new tab.NotificationCallbackWithPresModel(nk,ss.mkdel(this,function(nl){var nm=new fi;nm.displayFormatPresModel=nl;this.setState(nm)}));tab.DeferredNotifications.registerHandler(nk,ss.mkdel(this,function(){return this.$1}))},{componentWillUnmount:function(){this.$1=null},render:function(){var ni=React.createElement(SharedWidgets.DialogWidget,{dialogWidth:(fj.isNumberFormatting(this.props.displayFormatPresModel)?410:250),disableAutoFocus:true,getAnchorClientRect:this.props.getAnchorClientRect,handleGlassClick:this.props.closeDialog,isModal:true,isGlassTransparent:true,onCloseRequest:this.props.closeDialog,positioningBehavior:3,showCloseButton:false,testId:'display-formatting',title:tab.Strings.DisplayFormatDialogTitle,type:2,stackedOrigin:this.state.stackedOrigin,anchorOrigin:this.state.anchorOrigin,zIndex:7},React.createElement(fj,{onLoadingStateChange:ss.mkdel(this,function(nj){if(nj===0){var nk=new fi;nk.displayFormatPresModel=this.props.displayFormatPresModel;nk.stackedOrigin=this.$0(ff.stackedOriginVerticalAlignment,ff.stackedOriginHorizontalAlignment);nk.anchorOrigin=this.$0(ff.anchorOriginVerticalAlignment,ff.anchorOriginHorizontalAlignment);this.setState(nk)}}),onChange:ss.mkdel(this,function(nj,nk){var nl=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(this.props.callbackCommandPresModel).get_simpleCommand(),false);if(nj===0){nl.commandParams['numberFormattingOptions']=nk}else{nl.commandParams['valueString']=nk}tab.ServerCommands.executeServerCommand(nl,'immediately',null,null)}),presModel:this.state.displayFormatPresModel,testId:this.props.testId}));return ni},$0:function(ni,nj){var nk=this.props.getAnchorClientRect().y;if(nk>700){return{vertical:ni,horizontal:nj}}else{return null}}});var fg=global.tab.DisplayFormatProps=ss.mkType(a,'tab.DisplayFormatProps',function(){this.callbackCommandPresModel=null;this.closeDialog=null;this.displayFormatPresModel=null;this.getAnchorClientRect=null;this.testId=null});var fh=global.tab.DisplayFormatRedirectHandler=ss.mkType(a,'tab.DisplayFormatRedirectHandler',null,null,{$0:function(ni){var nj=$.Deferred();var nk=ni;if(ss.isNullOrUndefined(nk.displayFormat)){return nj.resolve().promise()}if(ss.isNullOrUndefined(nk.callbackCommand)){return nj.resolve().promise()}var nl=document.createElement('div');var nm=new fg;nm.callbackCommandPresModel=nk.callbackCommand;nm.closeDialog=function(){ReactDOM.unmountComponentAtNode(nl)};nm.displayFormatPresModel=nk.displayFormat;nm.getAnchorClientRect=function(){return cd.get_instance().get_viewModel().get_worksheet().lastClickedPill.get(0).getBoundingClientRect()};nm.testId='display-format-pill';var nn=React.createElement(ff,nm);ReactDOM.render(nn,nl);return nj.resolve().promise()}});var fi=global.tab.DisplayFormatState=ss.mkType(a,'tab.DisplayFormatState',function(){this.displayFormatPresModel=null;this.anchorOrigin=null;this.stackedOrigin=null});var fj=global.tab.DisplayFormattingComponent=ss.mkType(a,'tab.DisplayFormattingComponent',function(ni){this.$0=null;spiff.PureRenderComponent.call(this,ni);var nj=new fk;nj.module=null;this.state=nj;this.$0=tab.ModuleManager.load('display-formatting-widget',[]).pipe(function(nk){return nk})},{render:function(){if(ss.isValue(this.state.module)){return React.createElement(this.state.module.DisplayFormattingWidgetWrapper,this.props)}else{return null}},componentDidMount:function(){this.$0.done(ss.mkdel(this,function(ni){var nj=new fk;nj.module=ni;this.setState(nj)}))},componentDidUpdate:function(ni,nj){if(ss.isValue(this.props.presModel)&&fj.isNumberFormatting(this.props.presModel)&&ss.isNullOrUndefined(nj.module)){$('.numberFormattingWidget [role="listbox"]').focus();this.props.onLoadingStateChange(0)}}},{isNumberFormatting:function(ni){return ss.isValue(ni.numberFormattingOptions)}});var fk=global.tab.DisplayFormattingComponentState=ss.mkType(a,'tab.DisplayFormattingComponentState',function(){this.module=null});var fl=global.tab.DistributionPercentagesComponent=ss.mkType(a,'tab.DistributionPercentagesComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-percentages'},spiff.DOMElements.div({className:'tab-percentagesSection'},spiff.DOMElements.span({className:'tab-percentagesTitle tab-componentLabel'},tab.Strings.AODialogPercentagesLabel),spiff.DOMElements.div({className:'tab-percentagesSectionInner'},React.createElement(eN,this.props.percentagesProps))),spiff.DOMElements.div({className:'tab-percentOfSection'},spiff.DOMElements.span({className:'tab-percentOfTitle tab-componentLabel'},tab.Strings.AODialogPercentOfLabel),spiff.DOMElements.div({className:'tab-percentagesSectionInner'},(this.props.isConstantSelected?React.createElement(eN,this.props.constantValueProps):React.createElement(spiff.ComboBoxComponent,this.props.valueProps)),React.createElement(spiff.ComboBoxComponent,this.props.formulaProps))))}});var fm=global.tab.DistributionPercentagesState=ss.mkType(a,'tab.DistributionPercentagesState',function(){});var fn=global.tab.DistributionPercentagesViewModel=ss.mkType(a,'tab.DistributionPercentagesViewModel',function(ni){fn.$ctor1.call(this,ni,spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel(),new gd(ni.get_fieldPickerCombo()),new eO(fn.percentagesTestId),new eO(fn.constantValueTestId))},{get_percentagesViewModel:function(){return this.$3$1},set_percentagesViewModel:function(ni){this.$3$1=ni},get_constantValueViewModel:function(){return this.$3$2},set_constantValueViewModel:function(ni){this.$3$2=ni},get_distributionPercentagesModel:function(){return this.$3$3},set_distributionPercentagesModel:function(ni){this.$3$3=ni},get_formulaViewModel:function(){return this.$3$4},set_formulaViewModel:function(ni){this.$3$4=ni},get_valueViewModel:function(){return this.$3$5},set_valueViewModel:function(ni){this.$3$5=ni},get_visualId:function(){return this.get_distributionPercentagesModel().get_visualID()},get_referenceLineId:function(){return this.get_distributionPercentagesModel().get_refLineID()},get_isParameterSelected:function(){return this.get_distributionPercentagesModel().get_isParameterSelected()},get_isConstantSelected:function(){return this.get_distributionPercentagesModel().get_formulaType()==='constant'},$8:function(){var ni=[];var nj=null;var nk=this.get_distributionPercentagesModel().get_validFormulaTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.displayText,nm.referenceLineFormulaType,null,null);if(ss.equals(nm.referenceLineFormulaType,this.get_distributionPercentagesModel().get_formulaType())){nj=nn}ni.push(nn)}this.get_formulaViewModel().setItemsWithInitialSelection(ni,nj);this.get_formulaViewModel().set_selectedItem(nj);this.get_formulaViewModel().set_enabled(!this.get_isParameterSelected())},$4:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_percentages(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke().always(ss.mkdel(this,this.$6))},$3:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_constantValue(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke().always(ss.mkdel(this,this.$6))},$7:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(!ss.referenceEquals(nj,this.get_distributionPercentagesModel().get_fieldPickerCombo().get_selectedField())){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_fieldName(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$5:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(nj!==this.get_distributionPercentagesModel().get_formulaType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_formulaType(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$6:function(){this.get_percentagesViewModel().updateFromModel(this.get_distributionPercentagesModel().get_percentages());this.get_constantValueViewModel().updateFromModel(this.get_distributionPercentagesModel().get_formattedConstantValue());this.$8();this.get_valueViewModel().updateDomFromModel();this.incrementProps()},createUpdatedProps:function(){return{percentagesProps:this.get_percentagesViewModel().get_props(),valueProps:this.get_valueViewModel().get_props(),formulaProps:this.get_formulaViewModel().get_props(),isParameterSelected:this.get_isParameterSelected(),isConstantSelected:this.get_isConstantSelected(),constantValueProps:this.get_constantValueViewModel().get_props()}}},{$ctor1:function(ni,nj,nk,nl,nm){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionPercentagesModel(ni);this.set_formulaViewModel(nj);this.get_formulaViewModel().set_dropdownStyleClass(fn.formulaCssClass);this.disposables.add$1(this.addChildViewModel(this.get_formulaViewModel()));this.set_valueViewModel(nk);this.get_valueViewModel().set_dropdownStyleClass(fn.valueCssClass);this.disposables.add$1(this.addChildViewModel(this.get_valueViewModel()));this.set_percentagesViewModel(nl);this.disposables.add$1(this.addChildViewModel(this.get_percentagesViewModel()));this.set_constantValueViewModel(nm);this.disposables.add$1(this.addChildViewModel(this.get_constantValueViewModel()));this.get_distributionPercentagesModel().add_modelUpdated(ss.mkdel(this,this.$6));this.get_percentagesViewModel().add_onValueChanged(ss.mkdel(this,this.$4));this.get_constantValueViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.get_formulaViewModel().add_selectedItemChanged(ss.mkdel(this,this.$5));this.get_valueViewModel().add_selectedItemChanged(ss.mkdel(this,this.$7));this.get_formulaViewModel().set_hasTooltip(false);this.get_valueViewModel().set_hasTooltip(false);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionPercentagesModel().remove_modelUpdated(ss.mkdel(this,this.$6));this.get_percentagesViewModel().remove_onValueChanged(ss.mkdel(this,this.$4));this.get_constantValueViewModel().remove_onValueChanged(ss.mkdel(this,this.$3));this.get_formulaViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$5));this.get_valueViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$7))})))}});var fo=global.tab.DistributionPercentilesComponent=ss.mkType(a,'tab.DistributionPercentilesComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-percentiles'},spiff.DOMElements.div({className:'tab-percentilesSection'},spiff.DOMElements.span({className:'tab-percentilesTitle tab-componentLabel'},tab.Strings.AODialogPercentilesLabel),spiff.DOMElements.div({className:'tab-percentilesSectionInner'},React.createElement(fM,this.props.percentilesProps))))}});var fp=global.tab.DistributionPercentilesState=ss.mkType(a,'tab.DistributionPercentilesState',function(){});var fq=global.tab.DistributionPercentilesViewModel=ss.mkType(a,'tab.DistributionPercentilesViewModel',function(ni){fq.$ctor1.call(this,ni,new fO(ni.get_percentileComboModel(),fq.percentileTestId))},{get_distributionPercentilesModel:function(){return this.$3$1},set_distributionPercentilesModel:function(ni){this.$3$1=ni},get_percentilesComboViewModel:function(){return this.$3$2},set_percentilesComboViewModel:function(ni){this.$3$2=ni},get_visualID:function(){return this.get_distributionPercentilesModel().get_visualID()},get_refLineID:function(){return this.get_distributionPercentilesModel().get_refLineID()},$3:function(){this.incrementProps()},createUpdatedProps:function(){return{percentilesProps:this.get_percentilesComboViewModel().get_props()}},$6:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_referenceParameter(ni);nj.set_visualID(this.get_visualID());nj.set_refLineId(this.get_refLineID());nj.invoke()},$5:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_percentiles(ni);nj.set_visualID(this.get_visualID());nj.set_refLineId(this.get_refLineID());nj.invoke()},$4:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_percentiles(ni);nj.set_visualID(this.get_visualID());nj.set_refLineId(this.get_refLineID());var nk=nj.invoke();var nl=this.get_percentilesComboViewModel();nk.always(ss.mkdel(nl,nl.updateDomFromModel))}},{$ctor1:function(ni,nj){this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionPercentilesModel(ni);this.set_percentilesComboViewModel(nj);this.get_distributionPercentilesModel().add_modelUpdated(ss.mkdel(this,this.$3));this.disposables.add$1(this.addChildViewModel(nj));this.get_percentilesComboViewModel().add_dataValueUpdated(ss.mkdel(this,this.$5));this.get_percentilesComboViewModel().add_customDataValueUpdated(ss.mkdel(this,this.$4));this.get_percentilesComboViewModel().add_parameterSelected(ss.mkdel(this,this.$6));this.get_percentilesComboViewModel().set_hasTooltip(false);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionPercentilesModel().remove_modelUpdated(ss.mkdel(this,this.$3));this.get_percentilesComboViewModel().remove_dataValueUpdated(ss.mkdel(this,this.$5));this.get_percentilesComboViewModel().remove_parameterSelected(ss.mkdel(this,this.$6));this.get_percentilesComboViewModel().remove_customDataValueUpdated(ss.mkdel(this,this.$4))})))}});var fr=global.tab.DistributionQuantilesComponent=ss.mkType(a,'tab.DistributionQuantilesComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-quantiles'},spiff.DOMElements.div({className:'tab-numTilesSection'},spiff.DOMElements.span({className:'tab-numTilesTitle tab-componentLabel'},tab.Strings.AODialogNumberOfTilesLabel),spiff.DOMElements.div({className:'tab-numTilesSectionInner'},React.createElement(fM,this.props.quantilesProps))))}});var fs=global.tab.DistributionQuantilesState=ss.mkType(a,'tab.DistributionQuantilesState',function(){});var ft=global.tab.DistributionQuantilesViewModel=ss.mkType(a,'tab.DistributionQuantilesViewModel',function(ni){ft.$ctor1.call(this,ni,new fO(ni.get_distributionQuantilesCombo(),ft.quantilesTestId))},{get_distributionQuantilesModel:function(){return this.$3$1},set_distributionQuantilesModel:function(ni){this.$3$1=ni},get_quantilesComboViewModel:function(){return this.$3$2},set_quantilesComboViewModel:function(ni){this.$3$2=ni},get_visualID:function(){return this.get_distributionQuantilesModel().get_visualID()},get_refLineID:function(){return this.get_distributionQuantilesModel().get_refLineID()},$3:function(){this.incrementProps()},createUpdatedProps:function(){return{quantilesProps:this.get_quantilesComboViewModel().get_props()}},$5:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_referenceParameter(ni);nj.set_visualID(this.get_visualID());nj.set_refLineId(this.get_refLineID());nj.invoke()},$4:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_quantilesValue(ni);nj.set_visualID(this.get_visualID());nj.set_refLineId(this.get_refLineID());nj.invoke()}},{$ctor1:function(ni,nj){this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionQuantilesModel(ni);this.set_quantilesComboViewModel(nj);this.get_distributionQuantilesModel().add_modelUpdated(ss.mkdel(this,this.$3));this.get_quantilesComboViewModel().add_dataValueUpdated(ss.mkdel(this,this.$4));this.get_quantilesComboViewModel().add_parameterSelected(ss.mkdel(this,this.$5));this.get_quantilesComboViewModel().set_hasTooltip(false);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionQuantilesModel().remove_modelUpdated(ss.mkdel(this,this.$3));this.get_quantilesComboViewModel().remove_dataValueUpdated(ss.mkdel(this,this.$4));this.get_quantilesComboViewModel().remove_parameterSelected(ss.mkdel(this,this.$5))})))}});var fu=global.tab.DistributionStandardDeviationComponent=ss.mkType(a,'tab.DistributionStandardDeviationComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-standardDeviation'},spiff.DOMElements.div({className:'tab-factorsSection'},spiff.DOMElements.span({className:'tab-factorsTitle tab-componentLabel'},tab.Strings.AODialogFactorsLabel),spiff.DOMElements.div({className:'tab-factorsSectionInner'},React.createElement(eN,this.props.factorsProps))),spiff.DOMElements.div({className:'tab-stdDevTypeSection'},spiff.DOMElements.div({className:'tab-stdDevSectionInner'},React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,this.props.stdDevTypeProps))))}});var fv=global.tab.DistributionStandardDeviationState=ss.mkType(a,'tab.DistributionStandardDeviationState',function(){});var fw=global.tab.DistributionStandardDeviationViewModel=ss.mkType(a,'tab.DistributionStandardDeviationViewModel',function(ni){fw.$ctor1.call(this,ni,new eO(fw.factorsTestId))},{get_factorsViewModel:function(){return this.$3$1},set_factorsViewModel:function(ni){this.$3$1=ni},get_distributionStandardDeviationModel:function(){return this.$3$2},set_distributionStandardDeviationModel:function(ni){this.$3$2=ni},get_visualId:function(){return this.get_distributionStandardDeviationModel().get_visualID()},get_referenceLineId:function(){return this.get_distributionStandardDeviationModel().get_refLineID()},$3:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_factors(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke().always(ss.mkdel(this,this.$5))},onStdDevTypeUpdated:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_stDevType(ni);nj.set_visualID(this.get_distributionStandardDeviationModel().get_visualID());nj.set_refLineId(this.get_distributionStandardDeviationModel().get_refLineID());nj.invoke()},$5:function(){this.get_factorsViewModel().updateFromModel(this.get_distributionStandardDeviationModel().get_factors());this.incrementProps()},createUpdatedProps:function(){return{factorsProps:this.get_factorsViewModel().get_props(),stdDevTypeProps:this.$4()}},$4:function(){var ni=[];var nj=0;for(var nk=0;nk<this.get_distributionStandardDeviationModel().get_validStDevTypes().length;nk++){var nl=this.get_distributionStandardDeviationModel().get_validStDevTypes()[nk];ni.push({value:nl.key,label:nl.value,testId:nl.key.toString()});if(nl.key===this.get_distributionStandardDeviationModel().get_stDevType()){nj=nk}}return{buttonList:ni,checkedIndex:nj,handleChange:ss.mkdel(this,function(nm,nn){this.onStdDevTypeUpdated(nm)})}}},{$ctor1:function(ni,nj){this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionStandardDeviationModel(ni);this.set_factorsViewModel(nj);this.disposables.add$1(this.addChildViewModel(this.get_factorsViewModel()));this.get_distributionStandardDeviationModel().add_modelUpdated(ss.mkdel(this,this.$5));this.get_factorsViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionStandardDeviationModel().remove_modelUpdated(ss.mkdel(this,this.$5));this.get_factorsViewModel().remove_onValueChanged(ss.mkdel(this,this.$3))})))}});var fx=global.tab.DownloadDraftErrorDialog=ss.mkType(a,'tab.DownloadDraftErrorDialog',function(){this.$1=null;this.$0=null;tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(fx.$0)){return}this.$1=new kK;this.$0=new kJ;this.parentNode=document.createElement('div');var ni=tab.Strings.DownloadWorkbookErrorContent;var nj={title:tab.Strings.DownloadDraftErrorTitle,secondaryChoiceAction:ss.mkdel(this,this.close),secondaryChoiceButtonString:tab.Strings.DialogButtonCancel,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.DialogButtonPublishChanges,primaryChoiceAction:ss.mkdel(this,function(){if(this.$1.get_isEnabled()){this.$1.invoke().done(ss.mkdel(this,this.close))}else{this.$0.invoke().done(ss.mkdel(this,this.close))}}),secondMessage:ni,dialogWidth:400};fx.$0=React.createElement(cm,nj);ReactDOM.render(fx.$0,this.parentNode)},close:function(){fx.$0=null;_.defer(ss.mkdel(this,this.dispose))}},{showDownloadDraftErrorDialog:function(){(new fx).showDialog()}});var fy=global.tab.DownloadWorkbookCommand=ss.mkType(a,'tab.DownloadWorkbookCommand',function(){tab.DownloadWorkbookCmd.call(this)},{get_isVisible:function(){return tab.ApplicationModel.get_instance().get_workbook().get_uiMode()!=='data-tab'},get_isEnabled:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isEnabled.call(this)&&tsConfig.allow_save_as},invoke:function(){return this.fireAndForget(function(){var ni=tsConfig.downloadURIReadonly;if(!cc.tryShowDownloadOrEditInDesktopErrorDialog(true)){tab.ToolbarServerCommands.downloadWorkbook(ni,null)}})}});var fz=global.tab.DraftExistenceUnknownDialog=ss.mkType(a,'tab.DraftExistenceUnknownDialog',function(){tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(fz.$0)){return}this.parentNode=document.createElement('div');var ni={title:tab.Strings.AuthDraftExistenceUnknownHeader,secondaryChoiceAction:ss.mkdel(this,this.exitAuthoring),secondaryChoiceButtonString:tab.Strings.AuthCloseEditorButton,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.AuthAutoSaveWarningDialogRevert,primaryChoiceAction:ss.mkdel(this,this.revertToPublished),firstMessage:tab.Strings.AuthDraftExistenceUnknownBody,secondMessage:null,learnMoreToken:null,buttonClassToFocus:'tab-autosavewarning-primarybutton'};fz.$0=React.createElement(cm,ni);ReactDOM.render(fz.$0,this.parentNode)},revertToPublished:function(){tab.OnlineAnalyticsClient.logEvent('AutoSave_DraftExistenceUnknown',ss.mkdict(['Event','Revert To Published']));this.close()},exitAuthoring:function(){tab.OnlineAnalyticsClient.logEvent('AutoSave_DraftExistenceUnknown',ss.mkdict(['Event','Exit Authoring']));bn.exitAuthoring(tab.ApplicationModel.get_instance().get_workbook());this.close()},close:function(){tab.OnlineAnalyticsClient.logEvent('AutoSave_DraftExistenceUnknown',ss.mkdict(['Event','Close Draft Existence Unknown Dialog']));fz.$0=null;_.defer(ss.mkdel(this,this.dispose))},shouldShowDialog:function(ni,nj){return nj==='draft-cannot-be-determined'}});var fA=global.tab.DraftNotCurrentDialog=ss.mkType(a,'tab.DraftNotCurrentDialog',function(){tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(fA.$0)){return}this.parentNode=document.createElement('div');var ni=ss.isValue(tsConfig.revisionInfo.newerRevisionAuthor)&&tsConfig.revisionInfo.newerRevisionAuthor!=='';var nj=new Date(tsConfig.revisionInfo.newerRevisionPublishedAt);var nk=tab.LocalizeFormatter.mediumDateTimeWithoutSeconds(nj);var nl={title:tab.Strings.AuthDraftNotCurrentDialogTitle,firstMessage:(ni?tab.Strings.AuthDraftNotCurrentDialogMessage(nk,tsConfig.revisionInfo.newerRevisionAuthor):tab.Strings.AuthDraftNotCurrentDialogMessage_NoUsername(nk)),secondaryChoiceAction:ss.mkdel(this,this.loadNewestRevision),secondaryChoiceButtonString:tab.Strings.AuthDraftNotCurrentDialogEditNewestRevision,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:true,primaryChoiceButtonString:tab.Strings.AuthDraftNotCurrentDialogResumeEditingDraft,primaryChoiceAction:ss.mkdel(this,this.resumeEditing),dialogWidth:700};fA.$0=React.createElement(cm,nl);ReactDOM.render(fA.$0,this.parentNode)},$0:function(){var ni=new Date(tsConfig.revisionInfo.newerRevisionPublishedAt);return tab.LocalizeFormatter.mediumDateTimeWithoutSeconds(ni)},close:function(){fA.$0=null;_.defer(ss.mkdel(this,this.dispose))},loadNewestRevision:function(){tab.OnlineAnalyticsClient.logEvent('AutoSave_DraftNotCurrent',ss.mkdict(['Event','Edit Newest Revision','TimeNewerVersionPublished',this.$0()]));tab.SessionServerCommands.destroySessionAndForward(function(){},false);var ni=tab.VizUriModel.createForCurrentWindowLocation(null);ni.set_loadNewestRevision(true);tab.SessionServerCommands.switchToViz$1(ni,null,null);this.close()},resumeEditing:function(){tab.OnlineAnalyticsClient.logEvent('AutoSave_DraftNotCurrent',ss.mkdict(['Event','Resume Editing My Draft','TimeNewerVersionPublished',this.$0()]));this.close()},shouldShowDialog:function(ni,nj){return nj!=='draft-cannot-be-loaded'&&ss.isValue(tsConfig.revisionInfo)&&tsConfig.revisionInfo.newerRevisionExists}});var fB=global.tab.DraftStatusMonitor=ss.mkType(a,'tab.DraftStatusMonitor',function(){this.$9=[];this.$8=null;this.$1$1=null;this.$1$2=null},{add_draftStatusError:function(ni){this.$1$1=ss.delegateCombine(this.$1$1,ni)},remove_draftStatusError:function(ni){this.$1$1=ss.delegateRemove(this.$1$1,ni)},add_draftStatusSuccess:function(ni){this.$1$2=ss.delegateCombine(this.$1$2,ni)},remove_draftStatusSuccess:function(ni){this.$1$2=ss.delegateRemove(this.$1$2,ni)},get_tokenDates:function(){return this.$9},initializeStatusMonitor:function(){tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().add_draftProducerTokenTimestampChanged(ss.mkdel(this,this.$0));tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().add_draftStatusChanged(ss.mkdel(this,this.$3))},dispose:function(){tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().remove_draftProducerTokenTimestampChanged(ss.mkdel(this,this.$0));tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().remove_draftStatusChanged(ss.mkdel(this,this.$3));this.$8=tab.MiscUtil.clearTimeout(this.$8)},$0:function(ni,nj){this.$9.push({guid:ni,timestamp:nj});this.$8=(ss.isNullOrUndefined(this.$8)?this.$7():this.$8)},$3:function(ni){if(!ni){this.$8=tab.MiscUtil.clearTimeout(this.$8);this.$9=[];this.$2()}},$7:function(){return tab.WindowHelper.setTimeout(ss.mkdel(this,function(){if(this.$9.length>0){var ni=tab.SessionDraftStatusCommands.getDraftStatus(this.$9);ni.then(ss.mkdel(this,function(nj){this.$5(nj)}),ss.mkdel(this,function(nj){this.$4()}))}}),30000)},$5:function(ni){if(tab.DraftStatusResultTypeExtensions.isErrorType(ni.status)){this.$1(ni.status,false);this.$8=null;return}if(!ss.isNullOrEmptyString(ni.checkpointMetadata)){this.$6(ni.checkpointMetadata)}var nj=this.$9.length>0;if(ni.status==='FAILED_UNKNOWN_REASON'&&!nj){this.$1(ni.status,false)}else if(ni.status!=='FAILED_UNKNOWN_REASON'){this.$2()}this.$8=(nj?this.$7():null)},$1:function(ni,nj){if(!ss.staticEquals(this.$1$1,null)){this.$1$1(ni,nj)}},$2:function(){if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}},$6:function(ni){var nj=false;var nk=[];for(var nl=0;nl<this.$9.length;nl++){if(nj){nk.push(this.$9[nl])}if(ss.referenceEquals(ni,this.$9[nl].guid)){nj=true}}this.$9=nk},$4:function(){this.$9=[];this.$1(null,true);this.$8=this.$7()}});var fC=global.tab.DraftSwitchToDataTabFailedDialog=ss.mkType(a,'tab.DraftSwitchToDataTabFailedDialog',function(){tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(fC.$0)){return}this.parentNode=document.createElement('div');var ni={title:tab.Strings.DraftSwitchToDataTabFailedDialogTitle,secondaryChoiceAction:ss.mkdel(this,function(){tab.VizClientCommands.setUIMode('data-tab','DirectNavigation','');this.close()}),secondaryChoiceButtonString:tab.Strings.DraftSwitchToDataTabFailedDialogNavigateButtonMessage,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.DraftSwitchToDataTabFailedDialogCloseButtonMessage,primaryChoiceAction:ss.mkdel(this,function(){this.close()}),primaryChoiceButtonStyle:{maxWidth:200},firstMessage:tab.Strings.DraftSwitchToDataTabFailedDialogMessage,buttonClassToFocus:'tab-autosavewarning-primarybutton'};fC.$0=React.createElement(cm,ni);ReactDOM.render(fC.$0,this.parentNode)},close:function(){fC.$0=null;_.defer(ss.mkdel(this,this.dispose))},shouldShowDialog:function(ni,nj){return ss.isValue(ni.get_draftStatus())&&ni.get_draftStatus().get_isDraft()&&ni.get_draftSwitchToDataTabFailed()}});var fD=global.tab.DraftUnavailableDialog=ss.mkType(a,'tab.DraftUnavailableDialog',function(){tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(fD.$0)){return}this.parentNode=document.createElement('div');var ni={title:tab.Strings.AuthDraftNotAvailableHeader,secondaryChoiceAction:ss.mkdel(this,function(){bn.exitAuthoring(tab.ApplicationModel.get_instance().get_workbook());this.close()}),secondaryChoiceButtonString:tab.Strings.AuthCloseEditorButton,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.AuthAutoSaveWarningDialogRevert,primaryChoiceAction:ss.mkdel(this,function(){tab.WorksheetServerCommands.revert(null);this.close()}),firstMessage:tab.Strings.AuthDraftNotAvailableBody,secondMessage:null,learnMoreToken:null,buttonClassToFocus:'tab-autosavewarning-primarybutton'};fD.$0=React.createElement(cm,ni);ReactDOM.render(fD.$0,this.parentNode)},close:function(){fD.$0=null;_.defer(ss.mkdel(this,this.dispose))},shouldShowDialog:function(ni,nj){return nj==='draft-cannot-be-loaded'}});var fE=global.tab.DraggedSheetItem=ss.mkType(a,'tab.DraggedSheetItem',function(ni,nj){this.sheetName=null;this.addAsFloating=false;this.sheetName=ni;this.addAsFloating=nj});var fF=global.tab.DraggedZoneObject=ss.mkType(a,'tab.DraggedZoneObject',function(ni,nj,nk,nl,nm,nn){this.zoneType=null;this.isHorizontal=false;this.addAsFloating=false;this.objectHandle=null;this.objectState=null;this.objectType=null;this.zoneType=ni;this.isHorizontal=nj;this.addAsFloating=nk;this.objectType=nl;this.objectHandle=nm;this.objectState=nn});var fG=global.tab.DragToShowMeDropTarget=ss.mkType(a,'tab.DragToShowMeDropTarget',function(){this.$9=null;this.dropAreaParent=null;this.$7=null;this.$6=null;this.pillDragAvatar=null;this.$5=null;this.$8=false;this.$9=$('<div></div>').addClass('tabAuth-ShowMe_BarsIcon')},{get_feedbackType:function(){return'dropfeedbackuponentry'},update:function(ni){var nj=fS.get_isEmptyWorksheet();this.dropAreaParent=((nj||tsConfig.is_mobile)?cf.findVizZone():cf.findVizView());this.$5=ss.safeCast(ni,cp);if(ss.isNullOrUndefined(this.$5)||!ss.isInstanceOfType(this.$5.get_dragAvatar(),jc)||ni.get_dragType()!=='dragdrop'||tab.ApplicationModel.get_instance().get_currentSheetType()!=='worksheet'||this.dropAreaParent.length!==1||nj&&this.areAllParameters(this.$5.get_fields())){this.$1();return}this.createDropAreaTarget();EventUtils.DragDropManager.attachDropTarget(this.$7,this);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.dragEnded));if(nj){this.moveTargetBelowTitle()}},dragEnded:function(ni){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.dragEnded));if(ss.isValue(this.$7)&&EventUtils.DragDropManager.isDropTarget(this.$7)){this.$1();this.removeUI();this.$4()}},moveTargetBelowTitle:function(){var ni=cf.findVisibleTitle(false);if(ss.isNullOrUndefined(ni)){return false}var nj=ni.height();this.$7.css('margin-top',nj+'px');this.$7.css('height',this.$7.height()-nj+'px');return true},createDropAreaTarget:function(){this.$4();this.$7=$('<div></div>').addClass('showMeVizDropArea');this.dropAreaParent.append(this.$7)},$4:function(){if(ss.isValue(this.$7)){this.$7.remove()}},areAllParameters:function(ni){return ss.isValue(ni)&&ni.length>0&&ni.filter(function(nj){return!nj.get_isParameter()}).length===0},$0:function(){this.pillDragAvatar=this.$5.get_dragAvatar();this.pillDragAvatar.setCustomLabel(tab.Strings.AuthToolbarShowMe)},removeUI:function(){this.$8=false;if(ss.isValue(this.$6)){this.$6.removeClass('tabAuthPillShowMe')}if(ss.isValue(this.pillDragAvatar)){this.pillDragAvatar.removeCustomLabel();this.$9.remove()}if(ss.isValue(this.$7)){this.$7.removeClass('showMeDropAreaBorder')}},$1:function(){if(ss.isValue(this.$7)){EventUtils.DragDropManager.detachDropTarget(this.$7)}},populateInfoWrapperThenExecute:function(ni){if(ss.isNullOrUndefined(this.$5)){return}var nj=this.$5.hasOnlyFields();var nk=new tab.DragToShowMeInfoWrapper(nj,this.$5.isCopyDrag,this.$5.isShiftDrag);for(var nl=0;nl<ni.length;nl++){var nm=ni[nl];nk.add(new tab.DragToShowMeInfo(nm,'invalid-encoding'))}this.$2(nk)},$2:function(ni){var nj=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(nj)){return}var nk=nj.get_marksCardModel();tab.ShelfClientCommands.executeDragToShowMe(nj.get_visualId(),ni,(ss.isValue(nk)?nk.get_activePaneSpecId():null))},dragOver:function(ni){if(this.$8){return this}this.$8=true;this.$0();this.$6=ni.get_dragAvatar().get_rootElement();this.$6.addClass('tabAuthPillShowMe');this.$6.prepend(this.$9);this.$7.addClass('showMeDropAreaBorder');return this},$3:function(ni){var nj=ss.safeCast(ni,jd);return ss.isValue(nj)&&!nj.get_canDropOnShowMe()},acceptDrop:function(ni){var nj=$.Deferred();if(this.$3(ni)){return nj.resolve(false)}this.$5.get_drop().always(ss.mkdel(this,function(){var nk=this.$5.fieldsToDropOnShelf('encoding-shelf');if(this.$5.shouldGetAggregationOfField(nk)){this.$5.selectAggregationForField('show-me-shelf',nk[0],ss.mkdel(this,function(nl){var nm=[];nm.push(nl.selectedField);this.populateInfoWrapperThenExecute(nm)}))}else{this.populateInfoWrapperThenExecute(nk)}nj.resolve()}));return nj},getDropCursor:function(ni){if(this.$3(ni)){return spiff.CustomCursor.delete$1}return spiff.CustomCursor.copy},getDropTarget:function(ni){return this},dragExit:function(ni){this.removeUI()}});var fH=global.tab.DrillPathRedirectHandler=ss.mkType(a,'tab.DrillPathRedirectHandler',null,null,{$0:function(ni){var nj=$.Deferred();var nk=ni['datasource'];var nl=ni['newDrillPath'];var nm=ni['fieldVector'];var nn=ni['dialogTitle'];var no=ks.new$1(nl,nl,function(np,nq){_.defer(function(){tab.SchemaClientCommands.validateDrillPathName(nk,null,np,nq)})},function(np){tab.SchemaClientCommands.addDrillPath(nk,np,nm);nj.resolve()});no.set_titleUnescaped(nn);no.show();return nj},$1:function(ni){var nj=$.Deferred();var nk=ni['datasource'];var nl=ni['drillPathName'];var nm=ni['newDrillPath'];var nn=ni['dialogTitle'];var no=ks.new$1(nl,nm,function(np,nq){_.defer(function(){tab.SchemaClientCommands.validateDrillPathName(nk,nl,np,nq)})},function(np){if(!ss.referenceEquals(np,nl)){tab.SchemaClientCommands.renameDrillPath(nk,nl,np)}nj.resolve()});no.set_titleUnescaped(nn);no.show();return nj}});var fI=global.tab.DropIndicationState=ss.mkEnum(a,'tab.DropIndicationState',{rest:0,dropInvited:1,dropNotValid:2});var fJ=global.tab.DropTargetWithDropState=ss.mkType(a,'tab.DropTargetWithDropState',function(){this.$2=0;this.$1$1=null;EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$1));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$0))},{add_dropStateChanged:function(ni){this.$1$1=ss.delegateCombine(this.$1$1,ni)},remove_dropStateChanged:function(ni){this.$1$1=ss.delegateRemove(this.$1$1,ni)},get_feedbackType:function(){return'dropfeedbackuponentry'},get_dropState:function(){return this.$2},set_dropState:function(ni){if(this.$2===ni){return}this.$2=ni;if(ss.isValue(this.$1$1)){this.$1$1(this.$2)}},dispose:function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$1));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$0))},$1:function(ni){var nj=ss.safeCast(ni,cp);if(ss.isValue(nj)){nj.get_drop().always(ss.mkdel(this,function(nk){if(!EventUtils.DragDropManager.get_isDragging()){return}this.set_dropState((this.canAccept(nk)?1:2))}))}this.set_dropState((this.canAccept(ni)?1:2))},$0:function(ni){this.set_dropState(0)},canAccept:null,dragOver:null,dragExit:null,acceptDrop:null,getDropTarget:null,getDropCursor:null});var fK=global.tab.DuplicateSheetKeyboardShortcut=ss.mkType(a,'tab.DuplicateSheetKeyboardShortcut',function(){KeyboardShortcuts.CommandKeyboardShortcut.call(this)},{getKeyComboOrKeyCombos:function(){var ni=new Object;ni.alt='required';return new KeyboardShortcuts.KeyCombo('Enter',ni)},getCommandId:function(){return{ns:'tabdoc',cmd:'duplicate-sheet'}}});var fL=global.tab.EdgeWithTargetHandleRenderHelpers=ss.mkType(a,'tab.EdgeWithTargetHandleRenderHelpers',null,null,{$5:function(ni,nj){var nk=fL.$3();return ni>nj&&ni>nk+nj},$8:function(ni,nj){var nk=fL.$3();return ni+nj>nk&&ni>=-ss.idiv(2,2)},$3:function(){var ni=tab.WorkbookView.findDashboardContainer();return tab.DoubleUtil.roundToInt(ni.scrollTop())},$2:function(){var ni=tab.WorkbookView.findDashboardContainer();return tab.DoubleUtil.roundToInt(ni.scrollLeft())},shouldShowTarget:function(ni,nj,nk,nl){var nm=fL.$8(ni,nj);var nn=nm&&nk===2||!nm&&nk===3;nn=nn&&nl;return nn},isTargetInverted:function(ni,nj,nk){return!fL.$5(ni,nj)||nk===3},createLine:function(ni,nj,nk,nl){var nm={x1:ni,y1:nj,x2:nk,y2:nl,stroke:tab.ColorModel.white.toRgb(),strokeWidth:1,strokeLinecap:'round'};return spiff.DOMElements.line(nm)},$6:function(ni,nj,nk){var nl=ni+ss.idiv(nj,2);var nm=nl-ss.idiv(nk,2);var nn=fL.$2();return nn>nm},$7:function(ni,nj,nk,nl,nm){var nn=ni+ss.idiv(nj,2);var no=nn+ss.idiv(nm,2);var np=fL.$2();var nq=fL.$4(nk,nl,np);return nq<no},$0:function(ni,nj,nk){var nl=ni-tab.ZoneChromeConstants.dashContentOffsetLeft;var nm=fL.$2();return Math.min(nm-nl,nj-nk)},$1:function(ni,nj,nk,nl,nm){var nn=ni+nj-tab.ZoneChromeConstants.dashContentOffsetLeft;var no=fL.$2();var np=fL.$4(nk,nl,no);return Math.min(nn-np,nj-nm)},generateZoneChromeStyleProperties:function(ni,nj,nk,nl,nm,nn){var no={left:0,right:0,display:(nn?null:'none')};if(fL.$6(ni,nj,nm)){no.left=fL.$0(ni,nj,nm);no.right=null}else if(fL.$7(ni,nj,nk,nl,nm)){no.right=fL.$1(ni,nj,nk,nl,nm);no.left=null}return no},$4:function(ni,nj,nk){var nl=Math.min(ni,nj+nk);return nl}});var fM=global.tab.EditValueWidgetComponent=ss.mkType(a,'tab.EditValueWidgetComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){return(this.props.textBoxActive?spiff.DOMElements.div({className:'customValueTextDropdown '},React.createElement(eN,this.props.inputProps),React.createElement(spiff.ComboBoxComponent,this.props.comboBoxProps)):React.createElement(spiff.ComboBoxComponent,this.props.comboBoxProps))}});var fN=global.tab.EditValueWidgetProps=ss.mkType(a,'tab.EditValueWidgetProps',function(){this.inputProps=null;this.comboBoxProps=null;this.textBoxActive=false});var fO=global.tab.EditValueWidgetViewModel=ss.mkType(a,'tab.EditValueWidgetViewModel',function(ni,nj){fO.$ctor1.call(this,ni,spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel(),new eO(nj))},{add_dataValueUpdated:function(ni){this.$3$1=ss.delegateCombine(this.$3$1,ni)},remove_dataValueUpdated:function(ni){this.$3$1=ss.delegateRemove(this.$3$1,ni)},add_customDataValueUpdated:function(ni){this.$3$2=ss.delegateCombine(this.$3$2,ni)},remove_customDataValueUpdated:function(ni){this.$3$2=ss.delegateRemove(this.$3$2,ni)},add_parameterSelected:function(ni){this.$3$3=ss.delegateCombine(this.$3$3,ni)},remove_parameterSelected:function(ni){this.$3$3=ss.delegateRemove(this.$3$3,ni)},get_hasTooltip:function(){return this.$f},set_hasTooltip:function(ni){this.$b.set_hasTooltip(ni);this.$f=ni},get_model:function(){return this.$3$4},set_model:function(ni){this.$3$4=ni},get_selectedParameter:function(){return this.get_model().get_selectedParameter()},get_textBoxActive:function(){return this.$3$5},set_textBoxActive:function(ni){this.$3$5=ni},get_enabled:function(){return this.$d},set_enabled:function(ni){this.$b.set_enabled(ni);this.$c.set_enabled(ni);this.$d=ni},onDataValueUpdated:function(ni){this.raiseActionEvent$1(String).call(this,this.$3$1,ni)},onCustomDataValueUpdated:function(ni){this.raiseActionEvent$1(String).call(this,this.$3$2,ni)},onComboSelectedItemChanged:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(!nj.$0){this.$4(nj)}else{this.$3(nj)}this.incrementProps()},$4:function(ni){if(ss.referenceEquals(ni.$1,this.get_model().get_enterValueText())){this.set_textBoxActive(true);this.$c.set_shouldSelectTextOnRender(true);this.incrementProps();this.onCustomDataValueUpdated(this.get_model().get_selectedValue())}else{this.set_textBoxActive(false);this.onDataValueUpdated(ni.$1)}},$3:function(ni){this.set_textBoxActive(false);if(!ss.staticEquals(this.$3$3,null)){this.$3$3(ni.$1)}},updateDomFromModel:function(){if(this.$e||this.get_model().get_precannedValues().length===0){this.set_textBoxActive(this.$7());this.$e=false}this.$9();this.$a();this.incrementProps()},$9:function(){var ni=this.buildPrecannedItems();var nj=ni.concat.apply(ni,this.$8());var nk=this.$5(nj)||new spiff.ComboBoxItem(null,this.get_model().get_selectedValue(),null,null,null);this.$b.setItemsWithInitialSelection(nj,nk)},$a:function(){this.$c.updateFromModel(this.get_model().get_selectedValue())},buildPrecannedItems:function(){var ni=[];if(this.get_model().get_isCustomValueEnabled()){ni.push(this.$6())}return ni.concat.apply(ni,_.map(this.get_model().get_precannedValues(),ss.mkdel(this,function(nj){var nk=new o;nk.$0=false;nk.$1=nj;var nl=nk;return new spiff.ComboBoxItem(null,nj,nl,null,null)})))},$6:function(){var ni=new o;ni.$0=false;ni.$1=this.get_model().get_enterValueText();var nj=ni;return new spiff.ComboBoxItem(null,this.get_model().get_enterValueText(),nj,null,null)},$8:function(){return _.map(this.get_model().get_parameters(),ss.mkdel(this,function(ni){var nj=new o;nj.$0=true;nj.$1=ni.value;var nk=nj;return new spiff.ComboBoxItem(null,ni.key,nk,null,null)}))},$5:function(ni){if(ss.isValue(this.get_model().get_selectedParameter())){return _.find(ni,ss.mkdel(this,function(nj){var nk=nj.get_data();return nk.$0&&ss.referenceEquals(ss.unbox(this.get_model().get_selectedParameter()).value,nk.$1)}))}else{return _.find(ni,ss.mkdel(this,function(nj){var nk=nj.get_data();return!nk.$0&&ss.referenceEquals(nk.$1,this.get_model().get_selectedValue())}))}},$7:function(){if(ss.isValue(this.get_model().get_selectedParameter())){return false}var ni=this.get_model().get_precannedValues();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];if(ss.referenceEquals(nk,this.get_model().get_selectedValue())){return false}}return true},createUpdatedProps:function(){var ni=new fN;ni.comboBoxProps=this.$b.get_props();ni.textBoxActive=this.get_textBoxActive();ni.inputProps=this.$c.get_props();return ni}},{$ctor1:function(ni,nj,nk){this.$b=null;this.$c=null;this.$d=false;this.$e=false;this.$f=true;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[fN]).call(this);this.set_model(ni);this.get_model().add_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.$e=true;this.$b=nj;this.disposables.add$1(this.$b);this.disposables.add$1(this.addChildViewModel(this.$b));this.$c=nk;this.disposables.add$1(this.$c);this.disposables.add$1(this.addChildViewModel(this.$c));this.$b.add_selectedItemChanged(ss.mkdel(this,this.onComboSelectedItemChanged));this.$c.add_onValueChanged(ss.mkdel(this,this.onCustomDataValueUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b.remove_selectedItemChanged(ss.mkdel(this,this.onComboSelectedItemChanged));this.$c.remove_onValueChanged(ss.mkdel(this,this.onCustomDataValueUpdated));this.get_model().remove_modelUpdated(ss.mkdel(this,this.updateDomFromModel))})))}});var fP=global.tab.EditWorkbookInDesktopCommand=ss.mkType(a,'tab.EditWorkbookInDesktopCommand',function(){tab.EditWorkbookInDesktopCmd.call(this)},{get_isVisible:function(){var ni=tsConfig.allow_connected_experience&&!tsConfig.is_desktop;var nj=tabBootstrap.Affordances.isOff('editInDesktop');return ni&&!nj&&!(tabBootstrap.FeatureFlags.isEnabled('MigratePublicToolbar')&&tsConfig.isPublic)},get_isEnabled:function(){return!tab.CurrentLocation.get_isLocationPersonalSpace()},invoke:function(){return this.fireAndForget(ss.mkdel(this,this.$d))},$d:function(){tab.ApplicationModel.get_instance().raiseNotification('doc:edit-in-desktop-button-clicked-event',null,null);if(tab.ApplicationModel.get_instance().get_embeddingModel().suppressDefaultEditBehavior){return}if(cc.tryShowDownloadOrEditInDesktopErrorDialog(false)){return}fP.$0()}},{$3:function(){return{serverHost:tabBootstrap.BaseUrlFormatter.formatBaseUrl(),siteLuid:tsConfig.site_luid,workbookLuid:tsConfig.current_workbook_luid,viewLuid:tsConfig.current_view_luid,size:tsConfig.current_workbook_twbx_size}},$0:function(){var ni={primaryActionButtonLabel:tab.Strings.OpenOnDesktopDialogPrimaryActionLabel,isTableauOnline:tsConfig.is_saas,handlePrimaryAction:function(){tab.WindowHelper.setLocationHref(tab.WindowHelper.get_windowParent(),tsConfig.external_workbook_url)},handlePublishDatasources:function(){var nj={};tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-web-save-datasource-dialog'},nj),'immediately',null,null)},logTelemetry:tab.OnlineAnalyticsClient.logEvent,source:(tsConfig.is_authoring?2:3),workbookInfo:fP.$3()};if(tsConfig.is_authoring){ni.onExitButtonClicked=function(){tab.WindowHelper.reload(tabBootstrap.Utility.get_locationWindow(),false)}}fP.$1(ni)},$1:function(ni){var nj=React.createElement(tab.OpenWorkbookInDesktopDialog,ni);ReactDOM.render(nj,document.createElement('div'))}});var fQ=global.tab.EffectColorPickerViewModel=ss.mkType(a,'tab.EffectColorPickerViewModel',function(ni,nj){this.$4=null;dy.call(this,ni,false);this.$4=nj},{sendColorUpdate:function(){if(ss.isValue(this.get_selectedColor())){this.$4.update(false,false,this.get_selectedColor())}}});var fR=global.tab.EmptyAuthoringWorksheetView=ss.mkType(a,'tab.EmptyAuthoringWorksheetView',function(ni){this.$9=0;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[fS]).call(this,ni,new fW);this.get_viewModel().add_updateVisibility(ss.mkdel(this,this.onUpdateVisibility));tab.WorkbookViewModel.add_workbookResized(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){tab.WorkbookViewModel.remove_workbookResized(ss.mkdel(this,this.$7))}))},{get_scale:function(){return this.$9},set_scale:function(ni){this.$9=ni;this.get_template().domRoot.find('.'+'emptyWorksheetText').css(BrowserSupport.BrowserSupport.CssTransformName(),'scale('+this.$9+')');this.get_template().domRoot.find('.'+'emptyWorksheetText').css(BrowserSupport.BrowserSupport.CssTransitionName(),this.get_transition())},get_transition:function(){return this.$3$1},set_transition:function(ni){this.$3$1=ni},onUpdateVisibility:function(){fR.$0();if(fS.get_isEmptyWorksheet()){var ni='.'+'tabZone-viz'+' .'+'tab-zone-padding';var nj=$(ni);if(nj.length>0){this.addToDom(nj);this.$8()}}},$7:function(){_.defer(ss.mkdel(this,this.$8))},$8:function(){var ni=cf.findVisibleTitle(false);if(ss.isValue(ni)){var nj=ni.height()+'px';var nk=this.get_template().domRoot;nk.css('margin-top',nj);nk.height('calc(100% - '+nj+')')}}},{$0:function(){var ni=document.body.getElementsByClassName('emptyWorksheet');for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];nk.parentElement.removeChild(nk)}}});var fS=global.tab.EmptyAuthoringWorksheetViewModel=ss.mkType(a,'tab.EmptyAuthoringWorksheetViewModel',function(){this.$2$1=null;spiff.BaseViewModel.call(this)},{add_updateVisibility:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_updateVisibility:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},updateIfEmptySheet:function(){this.raiseActionEvent(this.$2$1)}},{get_isEmptyWorksheet:function(){if(tab.ApplicationModel.get_instance().get_currentSheetType()!=='worksheet'){return false}var ni=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(ni)){return false}var nj=ni.get_shelves();if(ss.isNullOrUndefined(nj)){return false}var nk=nj.get_shelves();if(ss.isNullOrUndefined(nk)){return false}if(ss.isValue(ni.pm)&&ni.pm.hasVizExtension){return false}return _.every(nk,function(nl){return nl.get_pills().length===0||nl.get_shelfType()==='filter-shelf'||nl.get_shelfType()==='measures-shelf'})},isDragHintEnabled:function(){return tab.ApplicationModel.get_instance().get_currentSheetType()==='worksheet'}});var fT=global.tab.EmptyDashboardTemplate=ss.mkType(a,'tab.EmptyDashboardTemplate',function(){spiff.Template.call(this,$("<div class='tabEmptyDashboardContainer'><div class='tabEmptyDashboardMessage'></div><div class='tabEmptyDashboardSubMessage'></div></div>"));if(!tsConfig.is_mobile){this.domRoot.find('.'+'tabEmptyDashboardMessage').text(tab.Strings.EmptyDashboardMessage);this.domRoot.find('.'+'tabEmptyDashboardSubMessage').text(tab.Strings.EmptyDashboardSubMessage)}});var fU=global.tab.EmptyDashboardView=ss.mkType(a,'tab.EmptyDashboardView',function(ni){ss.makeGenericType(spiff.BaseView$1,[fV]).call(this,ni,new fT);this.get_viewModel().add_zoneQuantityChanged(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_zoneQuantityChanged(ss.mkdel(this,this.$7))}))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7()},$7:function(){this.get_template().domRoot.toggle(this.get_viewModel().get_dashboardEmpty())}});var fV=global.tab.EmptyDashboardViewModel=ss.mkType(a,'tab.EmptyDashboardViewModel',function(ni){this.$0=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$0=ni;this.disposables.add$1(this.$0.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.handleZoneQuantityChanged)).addEventBinding(ss.mkdel(this,function(nj){nj.zonesModel.add_newZone(ss.mkdel(this,this.handleZoneQuantityChanged$1));nj.zonesModel.add_removedZone(ss.mkdel(this,this.handleZoneQuantityChanged$1))}),ss.mkdel(this,function(nj){nj.zonesModel.remove_newZone(ss.mkdel(this,this.handleZoneQuantityChanged$1));nj.zonesModel.remove_removedZone(ss.mkdel(this,this.handleZoneQuantityChanged$1))})))},{add_zoneQuantityChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_zoneQuantityChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_dashboardEmpty:function(){return this.$0.get_model().get_zoneModels().length<=0},handleZoneQuantityChanged$1:function(ni){this.handleZoneQuantityChanged()},handleZoneQuantityChanged:function(){this.raiseActionEvent(this.$2$1)}});var fW=global.tab.EmptyWorksheetTemplate=ss.mkType(a,'tab.EmptyWorksheetTemplate',function(){spiff.Template.call(this,$("<div class='emptyWorksheet'></div>"));if(tabBootstrap.Affordances.isOn('authoring_EmptyWorksheetHintText')){var ni=ss.formatString("<div class='emptyWorksheetText'>{0}</div>",tab.Strings.DropFieldHintText);this.domRoot.append($(ni))}});var fX=global.tab.EncodingTypeButtonTemplate=ss.mkType(a,'tab.EncodingTypeButtonTemplate',function(){this.name=null;this.nameWrapper=null;this.icon=null;this.button=null;spiff.Template.call(this,$("<span class='tabAuthEncodingButtonArea'><span class='tabAuthEncodingButton'><div class='tabAuthEncodingButtonIcon'></div><span class='tabAuthEncodingButtonNameWrapper'><div class='tabAuthEncodingButtonName'></div></span></span></span>"));this.button=this.getElementBySelector('.tabAuthEncodingButton');this.name=this.getElementBySelector('.tabAuthEncodingButtonName');this.icon=this.getElementBySelector('.tabAuthEncodingButtonIcon');this.nameWrapper=this.getElementBySelector('.tabAuthEncodingButtonNameWrapper')});var fY=global.tab.ExistingZoneDragObject=ss.mkType(a,'tab.ExistingZoneDragObject',function(ni,nj,nk,nl){this.dragged=null;eb.call(this,ni,nj,mT.forNewZone(nl));this.dragged=ni;this.set_dragDropPresModel(nk)},{get_defaultDropCursor:function(){return spiff.CustomCursor.noOp},handleDrop:function(ni,nj,nk,nl,nm){if(this.dragged.get_zoneType()==='viz'){tab.DashboardClientCommands.dropVizZoneOnDashboard(tsConfig.current_sheet_name,this.dragged.get_zoneName(),ni,this.get_isFloating(),this.dragged.get_zoneId()).always(nj)}else{tab.DashboardClientCommands.dropNonVizZoneOnDashboard(tsConfig.current_sheet_name,this.dragged.get_zoneType(),this.dragged.get_direction()==='horizontal',this.get_isFloating(),ni,this.dragged.get_formattedText(),this.dragged.get_zoneParam(),this.dragged.get_zoneName(),this.dragged.get_zoneId(),this.dragged.get_dashboardObjectType()).always(nj)}}},{create:function(ni,nj,nk,nl){var nm=new fY(ni,nj,nk,nl);nm.initialize();return nm}});var fZ=global.tab.FieldDragSource=ss.mkType(a,'tab.FieldDragSource',function(ni,nj,nk){this.$8=null;this.$7=null;this.$6=null;this.$5=null;this.$7=ni;this.$8=nj;this.$6=nk},{$3:function(){return this.$5},$4:function(ni){if(ss.referenceEquals(this.$5,ni)){return}this.$0();this.$5=ni;if(ss.isValue(this.$5)){EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$1));this.$5.add_ctrlStateChanged(ss.mkdel(this,this.$2))}},$1:function(ni){this.$0()},$0:function(){if(ss.isValue(this.$5)){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$1));this.$5.remove_ctrlStateChanged(ss.mkdel(this,this.$2));this.$5=null}},$2:function(){EventUtils.DragDropManager.setDragCursor(this.getDropCursor(EventUtils.DragDropManager.get_currentDrag()))},getDropCursor:function(ni){if(kT.canDropToCopyConvert(ni)){return spiff.CustomCursor.copy}return spiff.CustomCursor.move},startDrag:function(ni){var nj=this.$7();var nk=fZ.concreteFieldsToDragFrom(nj);if(nk.length===0){return null}var nl=nk[0];var nm=(nl.get_isColumn()?nl.asColumn().get_defaultFieldType():'unknown');var nn=new kT(nk,nj,nl.get_description(),nm);nn.isShiftDrag=ni.shiftKey;nn.isRightDrag=ni.get_IsRightMouseEvent();nn.isCopyDrag=ni.get_IsCtrlKey();this.$4(nn);this.updateText(ss.safeCast(this.$3().get_dragAvatar(),jc));var no=tab.ShelfClientCommands.startDrag(nk,tab.EncodingTypeUtils.createInvalid(),tab.ModelUtils.findActivePaneSpecId(),this.$3().isRightDrag,'drag-drop-schema');no.done(ss.mkdel(this,function(np){if(ss.isValue(np.shelfDropModels)&&ss.isValue(this.$3())){this.$3().resolve(np)}}));if(ss.isValue(this.$8)){this.$8()}return this.$3()},acceptsDragType:function(){return 0},updateText:function(ni){var nj=this.$6();if(ss.isValue(nj)){ni.setCustomLabel(nj)}}},{concreteFieldsToDragFrom:function(ni){return ni.filter(function(nj){return nj.get_isDraggable()&&ss.isValue(nj.get_childToSelect())}).map(function(nj){return nj.get_childToSelect()})}});var ga=global.tab.FieldDropTarget=ss.mkType(a,'tab.FieldDropTarget',function(ni,nj,nk,nl){this.$9=null;this.$7=null;this.$6=null;this.$8=null;fJ.call(this);this.$9=ni;this.$7=nj;this.$6=nk;this.$8=nl},{getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.copy},dragOver:function(ni){if(!this.canAccept(ni)){return null}this.$7(this.$9,ni);return this},dragExit:function(ni){this.$6(this.$9,ni)},canAccept:function(ni){if(!ni.get_readyToDrop()){return false}var nj=ss.safeCast(ni,kT);if(ss.isNullOrUndefined(nj)||this.$5(nj)){return false}if(nj.get_fieldsInfo().drillPaths!==0){return false}if(nj.isCopyDrag){return this.$3(nj)}if(this.$9.get_isColumn()){return this.$4(nj)}else if(this.$9.get_isDrillPath()){if(nj.get_fieldsInfo().canAddToDrillPath!==2){return false}}return true},$3:function(ni){if(!tabBootstrap.Affordances.isOn('schemaViewerDropEasyCalc')){return false}if(!ni.isCopyDrag||ni.isRightDrag){return false}if(ni.get_fields().length!==1){return false}var nj=ni.get_fields()[0];if(!this.$9.get_isColumn()||!nj.get_isColumn()){return false}var nk=nj.asColumn().get_baseColumn();if(nk.get_defaultRole()!=='measure'){return false}var nl=this.$9.asColumn().get_baseColumn();if(nl.get_defaultRole()!=='dimension'){return false}return nk.get_canBeInEasyLODCalc()&&nl.get_canBeInEasyLODCalc()},$4:function(ni){if(!this.$9.get_isColumn()){return false}var nj=this.$9.asColumn().get_baseColumn();if(!nj.get_canAddToDrillPath()||ni.get_fieldsInfo().canAddToDrillPath!==2){return false}if(ni.get_fieldsInfo().columnsInDrillPath!==0&&!nj.get_isInDrillPath()){return false}if(nj.get_isInDrillPath()){return true}if(!ss.isNullOrEmptyString(nj.get_parentFolderName())&&!ss.referenceEquals(nj.get_parentFolderName(),ni.get_allFieldsFolderName())){return false}return true},acceptDrop:function(ni){var nj=$.Deferred();this.$6(this.$9,ni);if(!this.canAccept(ni)){return nj.resolve(false)}return nj.resolve(this.$8(this.$9,ni))},$5:function(ni){return ss.isValue(ni)&&ni.get_originalFields().some(ss.mkdel(this,function(nj){return nj.get_isColumn()&&ss.referenceEquals(nj.asColumn().get_baseColumnName(),this.$9.get_globalName())}))}});var gb=global.tab.FieldDropType=ss.mkEnum(a,'tab.FieldDropType',{dimensionColumn:0,measureColumn:1,drillPath:2,drillPathItem:3,unknown:4});var gc=global.tab.FieldFolderCommandRedirectHandler=ss.mkType(a,'tab.FieldFolderCommandRedirectHandler',null,null,{$0:function(ni){var nj=$.Deferred();var nk=ni['datasource'];var nl=ni['folderRole'];var nm=ni['newFieldFolderName'];var nn=ni['fieldVector'];var no=ni['drillpathVector'];var np=ni['dialogTitle'];var nq=ks.new$1(nm,nm,function(nr,ns){_.defer(function(){tab.SchemaClientCommands.validateFieldFolderName(nk,null,nr,nl,ns)})},function(nr){tab.SchemaClientCommands.addFieldFolder(nk,nr,nn,no,nl);nj.resolve()});nq.set_titleUnescaped(np);nq.show();return nj},$1:function(ni){var nj=$.Deferred();var nk=ni['datasource'];var nl=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDataSource(nk);if(ss.isNullOrUndefined(nl)){return nj}var nm=ni['fn'];var nn=ni['folderRole'];var no=nl.getFolderModel(nm,nn);var np=no.get_fieldCaptionForReset();var nq=no.get_displayName();var nr=ks.new$1(nq,np,function(ns,nt){_.defer(function(){tab.SchemaClientCommands.validateFieldFolderName(nl.get_name(),null,ns,nn,nt)})},function(ns){_.defer(function(){tab.SchemaClientCommands.renameFieldFolder(nl.get_name(),nq,ns,nn);nj.resolve()})});nr.set_titleUnescaped(ni['dialogTitle']);nr.show();return nj}});var gd=global.tab.FieldPickerComboViewModel=ss.mkType(a,'tab.FieldPickerComboViewModel',function(ni){this.$E=null;this.$4$1=null;spiff.ComboBoxViewModel.call(this);this.generateProps=true;this.set_model(ni)},{get_model:function(){return this.$4$1},set_model:function(ni){this.$4$1=ni},get_selectedField:function(){return this.$E},get_selectedText:function(){return(ss.isValue(this.get_selectedField())?this.get_selectedField().fieldSummary:null)},get_selectedIconClass:function(){return this.getIconFromField(this.get_selectedField())},updateDomFromModel:function(){var ni=null;this.clearItems();var nj=[];var nk=this.get_model().get_fields();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(this.getIconFromField(nm),nm.fieldCaption,nm.fieldName,null,null);if(ss.equalsT(nm.fieldName,this.get_model().get_selectedField())){ni=nn;this.$E=nm}nj.push(nn)}this.setItemsWithInitialSelection(nj,ni)},getIconFromField:function(ni){if(ss.isNullOrUndefined(ni)){return null}if(ni.isTableCalc&&!ni.isInPrimaryDataSource){return gd.secondaryDSTableCalcIcon}if(ni.isTableCalc){return gd.tableCalcIcon}if(!ni.isInPrimaryDataSource&&!ni.isFieldParameter){return gd.secondaryDSIcon}return null}});var ge=global.tab.FieldPillView=ss.mkType(a,'tab.FieldPillView',function(ni,nj){this.$j=null;this.$m=false;this.$l=null;this.$k=null;this.$n=null;ss.makeGenericType(spiff.BaseView$1,[jh]).call(this,ni,nj);this.$n=nj;this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$n.domRoot[0],ss.mkdel(this,this.handlePillClick)).onRightClick(ss.mkdel(this,this.handleRightClick)).onDoubleClick(ss.mkdel(this,this.handlePillDoubleClick)));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$n.drillIcon[0],ss.mkdel(this,this.handleIconClick)));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$n.menuButton[0],ss.mkdel(this,this.handleMenuButtonClick)));EventUtils.DragDropManager.attachDragSource(this.$n.dragSource,ni);EventUtils.DragDropManager.attachDropTarget(this.$n.domRoot,ni);this.updateDom();this.get_viewModel().add_showDragAccept(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_showDragAccept(ss.mkdel(this,this.$8))})));_.defer(ss.mkdel(this,function(){this.updateLabelSizeForIcons()}))},{get_hasExternalIcon:function(){return this.$m},get_dom:function(){return this.$n},dispose:function(){if(ss.isValue(this.$l)){this.$l.dispose()}ss.makeGenericType(spiff.BaseView$1,[jh]).prototype.dispose.call(this)},handlePillExit:function(ni){$(ni.currentTarget).removeClass('hover');this.$n.icons.css('display','');this.updateLabelSizeForIcons()},handlePillEnter:function(ni){if(EventUtils.DragDropManager.get_isDragging()){return}this.$9();$(ni.currentTarget).addClass('hover');this.$n.icons.css('display','none');this.updateLabelSizeForIcons()},handleRightClick:function(ni){spiff.EventUtil.stopEvent$1(ni);this.get_viewModel().menuButtonClicked(this.$n.content,'right-click')},handleMenuButtonClick:function(ni){spiff.EventUtil.stopEvent$1(ni);this.get_viewModel().menuButtonClicked(this.$n.content,'dropdown-arrow')},handleIconClick:function(ni){spiff.EventUtil.stopEvent$1(ni);this.get_viewModel().iconClicked();this.$g()},handlePillClick:function(ni){spiff.EventUtil.stopEvent$1(ni);this.get_viewModel().pillClicked()},handlePillDoubleClick:function(ni){spiff.EventUtil.stopEvent$1(ni);this.get_viewModel().pillDoubleClicked()},updateDom:function(){this.$d();this.$e();this.$f();this.$g();this.$a();this.$c();this.$b();this.$n.label.text(this.get_viewModel().get_displayName());this.$h();this.$n.domRoot.get(0).id=this.get_viewModel().get_pillIdentifier();spiff.Widget.disableTextSelectionOnElement(this.$n.label)},$h:function(){this.$n.content.attr('title','');if(!tabBootstrap.FeatureFlags.isEnabled('DetailedShelfPillTooltip')){this.$n.label.attr('title',this.get_viewModel().get_pill().get_tooltip())}},$i:function(ni,nj){var nk=nj.objectFieldRelatabilityPresModel;if(ss.isNullOrUndefined(nk)){return ni}if(!ss.isNullOrUndefined(this.get_viewModel().get_pill().get_filterType())&&this.get_viewModel().get_pill().get_filterType()!=='no-filter'){if(gk.shouldAddRelatabilitySectionForFilter(nk.filterShelfRelatabilityPresModel)){ni.filterShelfRelatabilityPresModel=nk.filterShelfRelatabilityPresModel}}else if(this.get_viewModel().get_displayAsDimension()){if(gk.shouldAddRelatabilitySectionForDimension(nk.dimensionRelatabilityPresModel)){ni.dimensionRelatabilityPresModel=nk.dimensionRelatabilityPresModel}}else if(this.get_viewModel().get_displayAsMeasure()){if(gk.shouldAddRelatabilitySectionForMeasure(nk.measureRelatabilityPresModel)){ni.measureRelatabilityPresModel=nk.measureRelatabilityPresModel}}return ni},$9:function(){if(!tabBootstrap.FeatureFlags.isEnabled('DetailedShelfPillTooltip')){return}if(this.$n.label.find('.'+'tabAuthPillLabelTooltipContainer').length!==0){return}var ni=spiff.DomElementFactory.div('tabAuthPillLabelTooltipContainer');this.$n.label.append(ni);var nj=spiff.DOMElements.div({'data-tb-test-id':'tab-pill-label-tooltip-sub-container',title:'',className:'tabAuthPillLabelTooltipSubContainer'});ReactDOM.render(nj,ni);var nk=new eW;nk.triggerElement=nj;nk.isInfoscentV2=tabBootstrap.FeatureFlags.isEnabled('SharedDimensionsInfoscentingVersion2');var nl=nk;var nm=this.get_viewModel().get_pill().get_detailedTooltipPresModel();if(ss.isValue(nm)){nl.fieldCaption=nm.displayText;nl.isIncompatible=nm.isIncompatible;nl.errorMsg=nm.errorMessage;nl.comment=nm.userDescription;nl.tableCalcDescription=nm.tableCalcDescription;nl.setDimensionalityFieldCaptions=nm.columnDisplayNames;nl.filterDescription=nm.filterDescription;nl.filterAppliedWorksheets=nm.filterAppliedWorksheets;nl.isMappedFilter=nm.isMappedFilter;nl=this.$i(nl,nm)}ReactDOM.render(React.createElement(eV,nl),this.$n.label.find('.'+'tabAuthPillLabelTooltipContainer')[0])},updateLabelSizeForIcons:function(){var ni=(this.$n.icons.is(':visible')?tab.DoubleUtil.roundToInt(this.$n.icons.outerWidth(true)):10);this.$n.label.css('padding-right',ss.formatString('{0}px',ni))},$b:function(){if(this.get_viewModel().get_pill().get_alternateEncodings().length===0){return}if(ss.isNullOrUndefined(this.$l)){this.$n.externalIcon.hide();this.$m=true;this.$l=new spiff.ComboBoxViewModel;this.$l.set_theme(1);this.$l.set_showSelectedItem(false);this.$l.set_showDropdownIcon(!tab.EncodingTypeUtils.isValid(this.get_viewModel().get_pill().get_encodingType()));this.$l.set_enabled(!this.get_viewModel().get_pill().get_isMultipleFields());this.$l.add_selectedItemChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.remove_selectedItemChanged(ss.mkdel(this,this.$7))})));this.$k=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$l]);this.$n.encodingType.append(this.$k.element)}this.$l.clearItems();var ni=this.get_viewModel().get_pill().get_alternateEncodings();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];var nl=new spiff.ComboBoxItem(gO.getEncodingTypeIcon(nk.encodingTypePresModel,nk.iconDetails),nk.name,nk.encodingTypePresModel,null,null);this.$l.addItem(nl);if(tab.EncodingTypeUtils.isEqual(nk.encodingTypePresModel,this.get_viewModel().get_pill().get_encodingType())){this.$l.set_selectedItem(nl)}}if(ss.isNullOrUndefined(this.$l.get_selectedItem())){var nm=this.get_viewModel().get_pill().pm.encodingUiItems;for(var nn=0;nn<nm.length;nn++){var no=nm[nn];if(tab.EncodingTypeUtils.isEqual(no.encodingTypePresModel,this.get_viewModel().get_pill().get_encodingType())){var np=new spiff.ComboBoxItem(gO.getEncodingTypeIcon(no.encodingTypePresModel,no.iconDetails),no.name,no.encodingTypePresModel,null,null);this.$l.set_selectedItem(np);break}}}},$7:function(ni){this.get_viewModel().updateEncodingType(ni.get_data())},$c:function(){var ni=gO.getPillFilterTypeIcon(this.get_viewModel().get_pill());this.$m=ss.isValue(ni);if(ss.isValue(ni)){this.$n.externalIcon.addClass('tabAuthPillFilter').addClass(ni);this.$n.externalIcon.attr('title',this.get_viewModel().get_pill().get_sideIconToolip())}},$a:function(){var ni=false;var nj=false;switch(this.get_viewModel().get_item().itemDrawStyle){case'opened':{ni=true;break}case'closed':{nj=true;break}}this.$n.content.toggleClass('tabAuthPillOpened',ni);this.$n.content.toggleClass('tabAuthPillClosed',nj)},$g:function(){this.$n.drillIcon.removeClass(this.$j);var ni=this.get_viewModel().get_shouldShowDrillIcon();if(ni){this.$j=(this.get_viewModel().get_pill().get_shouldDrill()?'tabAuthPillIconDrillDown':'tabAuthPillIconDrillUp')}else{this.$j=''}this.$n.drillIcon.addClass(this.$j);this.$n.content.toggleClass('tabAuthPillHasDrill',ni);this.$n.icons.empty();var nj=gO.getPillIcons(this.get_viewModel().get_pill());for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];this.$n.icons.append($('<span></span>').addClass(nl).addClass('tabAuthPillIcon'))}this.updateLabelSizeForIcons()},$e:function(){this.$n.content.toggleClass('tabAuthPillOrdinal',this.get_viewModel().get_displayAsOrdinal());this.$n.content.toggleClass('tabAuthPillQuantatative',this.get_viewModel().get_displayAsQuantitative());this.$n.content.toggleClass('tabAuthPillNominal',this.get_viewModel().get_displayAsNominal());this.$n.content.toggleClass('tabAuthPillOther',this.get_viewModel().get_displayAsOther());this.$n.content.toggleClass('tabAuthPillMultiple',this.get_viewModel().get_displayAsMultipleFields());this.$n.content.toggleClass('tabAuthPillInvalid',this.get_viewModel().get_displayAsInvalid())},$d:function(){this.$n.content.toggleClass('tabAuthPillDimension',this.get_viewModel().get_displayAsDimension());this.$n.content.toggleClass('tabAuthPillMeasure',this.get_viewModel().get_displayAsMeasure())},$f:function(){this.$n.content.toggleClass('tabAuthPillContext',this.get_viewModel().get_displayAsContext())},$8:function(ni){this.$n.content.toggleClass('tabDropInvited',ni)}});var gf=global.tab.FieldRelatabilityTooltipComponent=ss.mkType(a,'tab.FieldRelatabilityTooltipComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){var ni=new tab.WidgetPluginContainerProps;ni.moduleName=gf.$1;ni.initialProps=this.props;return React.createElement(tab.WidgetPluginContainer,ni)}});var gg=global.tab.FieldRelatabilityTooltipProps=ss.mkType(a,'tab.FieldRelatabilityTooltipProps',function(){this.triggerElement=null;this.dimensionRelatabilityPresModel=null;this.measureRelatabilityPresModel=null;this.filterShelfRelatabilityPresModel=null;this.isSchemaViewerField=false;this.isInfoscentV2=false});var gh=global.tab.FieldRightIconHelper=ss.mkType(a,'tab.FieldRightIconHelper',function(){},null,{addFieldRightIconToNode:function(ni,nj,nk){if(nk.get_iconType()==='none'){return}var nl=ni.getElementsBySelector('.'+'tab-schema-right-icon-container');if(nl.length===0){nl=$('<div></div>').addClass('tab-schema-right-icon-container');ni.getElementBySelector('.tab-schema-field-pill').addClass('has-right-icon').after(nl)}if(nk.get_showOnHover()){ni.getElementBySelector('.tab-schema-field-pill').addClass('right-icon-shows-on-hover')}var nm=new kO;nm.rightIconInfo=nk;nm.fieldDisplayName=nj;nm.nodeTemplate=ni;ReactDOM.render(React.createElement(kN,nm),nl[0])}});var gi=global.tab.FieldRightIconInfoModel=ss.mkType(a,'tab.FieldRightIconInfoModel',function(){this.$1$1=null;this.$1$2=null;this.$1$3=false;this.$1$4=null;this.$1$5=null},{get_iconType:function(){return this.$1$1},set_iconType:function(ni){this.$1$1=ni},get_tooltip:function(){return this.$1$2},set_tooltip:function(ni){this.$1$2=ni},get_showOnHover:function(){return this.$1$3},set_showOnHover:function(ni){this.$1$3=ni},get_dimensionRelatabilityPresModel:function(){return this.$1$4},set_dimensionRelatabilityPresModel:function(ni){this.$1$4=ni},get_measureRelatabilityPresModel:function(){return this.$1$5},set_measureRelatabilityPresModel:function(ni){this.$1$5=ni}});var gj=global.tab.FieldRightIconType=ss.mkEnum(a,'tab.FieldRightIconType',{none:'none',blending:'blending',blendingCandidate:'blendingCandidate',fieldRelatability:'fieldRelatability',hidden:'hidden',stitching:'stitching'},true);var gk=global.tab.FieldRightIconUtils=ss.mkType(a,'tab.FieldRightIconUtils',function(){},null,{buildBlendingCandidateIconInfo:function(ni){var nj=new gi;nj.set_iconType('blendingCandidate');nj.set_tooltip(tab.Strings.UseAsLinkingField(ni));return nj},buildBlendingIconInfo:function(ni){var nj=new gi;nj.set_iconType('blending');nj.set_tooltip(tab.Strings.StopUsingAsLinkingField(ni));return nj},buildHiddenIconInfo:function(){var ni=new gi;ni.set_iconType('hidden');ni.set_tooltip(tab.Strings.Unhide);return ni},buildRelatabilityIconInfo:function(ni,nj){var nk=ni.dimensionRelatabilityPresModel;if(nj==='dimension'&&ss.isValue(nk)){var nl=new gi;nl.set_iconType(gk.$0(nk.showRelatabilityIcon,nk.stitchedFields));nl.set_showOnHover(true);nl.set_dimensionRelatabilityPresModel(nk);return nl}var nm=ni.measureRelatabilityPresModel;if(nj==='measure'&&ss.isValue(nm)){var nn=new gi;nn.set_iconType(gk.$0(nm.showRelatabilityIcon,null));nn.set_showOnHover(true);nn.set_measureRelatabilityPresModel(nm);return nn}var no=new gi;no.set_iconType('none');return no},shouldAddRelatabilitySectionForFilter:function(ni){return!!(ss.isValue(ni)&&ni.showRelatabilityIcon)},shouldAddRelatabilitySectionForDimension:function(ni){return!!(ss.isValue(ni)&&(ni.showRelatabilityIcon||ss.isValue(ni.stitchedFields)&&ni.stitchedFields.length>0))},shouldAddRelatabilitySectionForMeasure:function(ni){return!!(ss.isValue(ni)&&ni.showRelatabilityIcon)},$0:function(ni,nj){if(ni){return'fieldRelatability'}if(ss.isValue(nj)&&nj.length>0){return'stitching'}return'none'}});var gl=global.tab.FieldsInfo=ss.mkType(a,'tab.FieldsInfo',function(ni){this.dimensionColumns=0;this.measureColumns=0;this.schemaCommonRootColumns=0;this.columnsInDrillPath=0;this.columnsInFolder=0;this.canAddToDrillPath=0;this.drillPaths=0;var nj=ni.length;var nk=0;var nl=0;var nm=0;var nn=0;var no=0;var np=0;var nq=0;for(var nr=0;nr<ni.length;nr++){var ns=ni[nr];if(ns.get_isColumn()){var nt=ns.asColumn().get_baseColumn();if(nt.get_defaultRole()==='dimension'){nk++;if(this.$0(ns,5)){nm++}}else if(nt.get_defaultRole()==='measure'){nl++;if(this.$0(ns,6)){nm++}}if(nt.get_isInDrillPath()){nn++}if(nt.get_canAddToDrillPath()){np++}}else if(ns.get_isDrillPath()){nq++;if(this.$0(ns,5)){nm++}}if(!ss.isNullOrEmptyString(ns.get_parentFolderName())){no++}}this.dimensionColumns=this.$2(nk,nj);this.measureColumns=this.$2(nl,nj);this.schemaCommonRootColumns=this.$2(nm,nj);this.columnsInDrillPath=this.$2(nn,nj);this.columnsInFolder=this.$2(no,nj);this.canAddToDrillPath=(tabBootstrap.Affordances.isOn('schemaViewerDropDrillPath')?this.$2(np,nj):0);this.drillPaths=this.$2(nq,nj)},{$1:function(ni,nj){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.rootFieldsNew)){return[]}return ni.rootFieldsNew[nj]},$0:function(ni,nj){if(ss.isNullOrUndefined(ni)){return false}var nk=this.$1(ni.get_fieldsModel(),nj);var nl=_.find(nk,function(nm){if(ss.referenceEquals(ni,nm)){return true}else if(nm.get_isRelationalTable()&&ss.isInstanceOfType(nm,tab.RelationalTableModel)){return _.contains(ss.safeCast(nm,tab.RelationalTableModel).get_columns(),ni)}else if(nm.get_isDrillPath()&&ss.isInstanceOfType(nm,tab.DrillPathModel)){return _.contains(ss.safeCast(nm,tab.DrillPathModel).get_levels(),ni)}return false});return ss.isValue(nl)},$2:function(ni,nj){if(ni>nj){throw new ss.Exception('Count is greater than total')}return((ni===0)?0:((ni===nj)?2:1))}});var gm=global.tab.FieldTemplate=ss.mkType(a,'tab.FieldTemplate',function(){this.expandoIcon=null;this.icon=null;this.iconArea=null;this.name=null;this.labelArea=null;this.children=null;this.pill=null;this.menuButton=null;this.deferredCreateChildren=null;this.$4=null;this.$3=null;this.$1=null;this.$2=null;spiff.Template.call(this,$(gm.template));this.domRoot.data('FieldTemplate',this);this.icon=this.getElementBySelector('.tab-schema-field-icon');this.iconArea=this.getElementBySelector('.tab-schema-field-icon-area');this.name=this.getElementBySelector('.tab-schema-field-label');this.children=this.getElementBySelector('.tab-schema-field-children');this.expandoIcon=this.getElementBySelector('.tab-schema-field-expando-icon');this.labelArea=this.getElementBySelector('.tab-schema-field-label-area');this.pill=this.getElementBySelector('.tab-schema-field-pill');this.menuButton=this.getElementBySelector('.tab-schema-field-pill-menu-btn')},{get_node:function(){return this.domRoot.data('Node')},set_node:function(ni){this.domRoot.data('Node',ni)},firstChild:function(){return gm.fromDom(this.children.find(ss.formatString('.{0}','tab-schema-field')).first())},getMenuClickHandler:function(ni){if(ss.isNullOrUndefined(this.$4)){this.$4=spiff.TableauClickHandler.target(this.menuButton[0]);ni.add$1(this.$4)}return this.$4},getExpandoClickHandler:function(ni){if(ss.isNullOrUndefined(this.$1)){this.$1=spiff.TableauClickHandler.target(this.expandoIcon[0]);ni.add$1(this.$1)}return this.$1},getLabelClickHandler:function(ni){if(ss.isNullOrUndefined(this.$3)){this.$3=spiff.TableauClickHandler.target(this.labelArea[0]);ni.add$1(this.$3)}return this.$3},getIconAreaClickHandler:function(ni){if(ss.isNullOrUndefined(this.$2)){this.$2=spiff.TableauClickHandler.target(this.iconArea[0]);ni.add$1(this.$2)}return this.$2},isExpanded:function(){return this.expandoIcon.hasClass('tab-schema-expanded')}},{fromDom:function(ni){return ni.data('FieldTemplate')}});var gn=global.tab.FloatingDirectedInformationComponent=ss.mkType(a,'tab.FloatingDirectedInformationComponent',function(ni){this.$5=null;this.$4=new tab.DisposableHolder;spiff.PureRenderComponent.call(this,ni);this.$5=_.throttle(ss.mkdel(this,this.handleResize),50,{leading:false,trailing:true})},{$0:function(){var ni=React.createElement('div',{className:'tabAuthFloatingInfoContentClose'});return function(nj){return ni}},handleResize:function(){this.forceUpdate()},componentDidMount:function(){this.$4.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,function(ni){this.$5()})))},componentWillUnmount:function(){this.$4.dispose()},render:function(){var ni=tab.DomUtil.getRectXY($(this.props.anchorElement));return spiff.DOMElements.div({className:'tabAuthFloatingInfoContainer',style:{width:250,left:ni.x+ss.idiv(ni.w,2)-ss.idiv(250,2),top:ni.y+ni.h},'data-tb-test-id':'tabAuthFloatingInfoTestId'},spiff.ReactElement.div$1('tabAuthFloatingInfoArrow',[]),this.$2())},$2:function(){return spiff.DOMElements.div({className:'tabAuthFloatingInfoContent'},this.$3(),this.$1())},$3:function(){var ni=null;if(ss.isValue(this.props.learnMoreToken)){var nj=tab.UriUtil.makeHelpUri(this.props.learnMoreToken,'');ni=spiff.DOMElements.a({href:nj,target:'_blank',className:'tabAuthFloatingInfoContentLearnMore'},tab.Strings.AuthAutosaveLearnMore)}return spiff.DOMElements.div({className:'tabAuthFloatingInfoContentTextContainer'},spiff.DOMElements.div({className:'tabAuthFloatingInfoContentTitle'},this.props.contentTitle),spiff.DOMElements.div({className:'tabAuthFloatingInfoContentText'},this.props.contentText,ni))},$1:function(){return spiff.DOMElements.div({className:'tabAuthFloatingInfoCloseContainer'},React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(ni){this.props.onClose()}),buttonType:10,testId:'tabAuthFloatingInfoCloseContainer',children:'',title:tab.Strings.AuthoringMenuBarCloseButtonLabel,getContent:this.$0()}))}});var go=global.tab.FloatingResizeDragInstance=ss.mkType(a,'tab.FloatingResizeDragInstance',function(ni,nj,nk,nl,nm){this.viewModel=null;spiff.MoveDragInstance.call(this,ni,nk,nl,nm);this.viewModel=nj});var gp=global.tab.FloatingResizeFeedbackComponent=ss.mkType(a,'tab.FloatingResizeFeedbackComponent',function(ni,nj){React.Component.call(this,ni,nj)},{render:function(){var ni=null;if(ss.isValue(this.props.preview)){ni=spiff.DOMElements.rect({x:this.props.preview.x,y:this.props.preview.y,width:this.props.preview.w,height:this.props.preview.h,className:'tab-dashFloatingResizePreview'})}var nj=this.props.dashboardGeometry();return spiff.DOMElements.svg({width:nj.w,height:nj.h,className:'tab-dashDropTargetContainer'},ni)}});var gq=global.tab.FloatingResizeViewModel=ss.mkType(a,'tab.FloatingResizeViewModel',function(ni,nj,nk,nl,nm){this.$9=null;this.$a=null;this.$5=0;this.$6=0;this.$8=null;this.$7=null;this.$3=0;this.$4=0;ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.$8=nj;this.$7=ni;this.$9=nk;this.$3=nl;this.$4=nm},{setOriginalRect:function(ni){this.$8=ni},startDrag:function(ni){this.$a=this.$2(ni);this.updateProps$1({preview:this.$8,dashboardGeometry:tab.DashboardView.dashboardGeometry});if(ss.contains(this.$9,1)){this.$5=Math.max(-1*this.$8.w,-1*(this.$8.w+this.$8.x)+5)}else if(ss.contains(this.$9,0)){this.$5=Math.min(this.$8.w,this.$4-this.$8.x-5)}if(ss.contains(this.$9,3)){this.$6=Math.max(-1*this.$8.h,-1*(this.$8.h+this.$8.y)+5)}else if(ss.contains(this.$9,2)){this.$6=Math.min(this.$8.h,this.$3-this.$8.y-5)}EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$1));return this.createDragIntance(ni)},createDragIntance:function(ni){return new go($(ni.target),this,ss.mkdel(this,this.onMove),ss.mkdel(this,this.onDrop),null)},onMove:function(ni){var nj=this.$2(ni);var nk=nj.x-this.$a.x;var nl=nj.y-this.$a.y;var nm={h:this.$8.h,w:this.$8.w,x:this.$8.x,y:this.$8.y};if(ss.contains(this.$9,1)){nk=Math.max(nk,this.$5);nm.w=this.$8.w+nk}else if(ss.contains(this.$9,0)){nk=Math.min(nk,this.$5);nm.x=this.$8.x+nk;nm.w=this.$8.w-nk}if(ss.contains(this.$9,3)){nl=Math.max(nl,this.$6);nm.h=this.$8.h+nl}else if(ss.contains(this.$9,2)){nl=Math.min(nl,this.$6);nm.y=this.$8.y+nl;nm.h=this.$8.h-nl}this.updateProps$1({dashboardGeometry:this.get_props().dashboardGeometry,preview:nm})},$2:function(ni){var nj=tab.DashboardView.dashboardGeometry();return{x:ni.clientX-nj.l,y:ni.clientY-nj.t}},onDrop:function(ni){this.dispose();if(_.isEqual(this.get_props().preview,this.$8)){return}EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$1));this.$7(this.get_props().preview).done([ss.mkdel(this,this.dispose)]).fail([ss.mkdel(this,this.dispose)])},$1:function(ni){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$1));this.dispose()}});var gr=global.tab.FloatingZoneDragInstanceWithPreview=ss.mkType(a,'tab.FloatingZoneDragInstanceWithPreview',function(ni,nj,nk){mU.call(this,ni,nj,nk,mT.forZoneMove($.Deferred()))},{get_dragType:function(){return'dragmovedrop'},moveTo:function(ni){if(!this.get_isFloating()||this.isShiftDrag){return}var nj=tab.DashboardView.dashboardGeometry();var nk=ni.pageY-nj.t;var nl=ni.pageX-nj.l;var nm=nk-this.grabPoint.y;var nn=nl-this.grabPoint.x;var no=this.get_dragged().get_zoneCommonModel().get_zoneCommonPresModel().y;var np=this.get_dragged().get_zoneCommonModel().get_zoneCommonPresModel().x;var nq=nm-(this.get_dragged().get_y()-no);var nr=nn-(this.get_dragged().get_x()-np);this.get_dragged().updateLocalPropertiesForZonePreview(nr,nq)}},{create:function(ni,nj,nk){var nl=new gr(ni,nj,nk);nl.initialize();return nl}});var gs=global.tab.FormattingPaneComponent=ss.mkType(a,'tab.FormattingPaneComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){gs.$2++;var ni={};ni['openTime']=(new Date).getTime();ni['openCount']=gs.$2;var nj=ni;var nk=new tab.WidgetPluginContainerProps;nk.moduleName=gs.$1;var nl={};nl['presModel']=this.props.formatPanePresModel;nl['originIsWeb']=true;nl['fontList']=function(){tab.FormattingUtil.compatibleFontNameList()};nl['telemetry']=nj;nk.initialProps=nl;return React.createElement(tab.WidgetPluginContainer,nk)}});var gt=global.tab.FormattingPaneProps=ss.mkType(a,'tab.FormattingPaneProps',function(){this.formatPanePresModel=null});var gu=global.tab.FormattingPaneState=ss.mkType(a,'tab.FormattingPaneState',function(){this.formatPanePresModel=null});var gv=global.tab.FormattingSidePaneProxy=ss.mkType(a,'tab.FormattingSidePaneProxy',function(){},null,{get_isShown:function(){return ss.isValue(gv.$1)&&gv.$1.isShown()},handleWebContextChange$1:function(ni,nj,nk){if(ni==='workbook'||gv.get_isShown()&&tab.ApplicationModel.get_instance().get_currentSheetType()==='worksheet'){var nl=ss.isValue(nj);if(ni==='workbook'){window.sessionStorage.setItem('format-update-context','toolbarButton')}else{window.sessionStorage.setItem('format-update-context','leftClickOnElement');window.sessionStorage.setItem('format-has-field-names',nl.toString())}var nm=new tab.OpenFormattingSidePaneCmd;nm.set_formattingContext(ni);nm.set_uiBlocking('none');var nn=nm;if(nl){nn.set_fieldNames(nj)}if(ss.isValue(nk)){nn.set_legendType(nk)}nn.invoke()}},handleWebContextChange:function(ni){if(gv.get_isShown()&&tab.ApplicationModel.get_instance().get_currentSheetType()==='worksheet'){window.sessionStorage.setItem('format-update-context','leftClickOnElement');var nj=new tab.OpenFormattingSidePaneForVizPointCmd;nj.set_point(ni);nj.set_uiBlocking('none');var nk=nj;nk.invoke()}},openCallback:function(ni,nj){var nk=new gt;nk.formatPanePresModel=ni;var nl=React.createElement(gs,nk);ReactDOM.render(nl,nj)},updateCallback:function(ni,nj){},closeCallback:function(){}});var gw=global.tab.FullDateBuilder=ss.mkType(a,'tab.FullDateBuilder',function(ni){this.$1$1=false;this.set_isDraft(ni)},{get_isDraft:function(){return this.$1$1},set_isDraft:function(ni){this.$1$1=ni},buildDisplayTextForDate:function(ni){if(ss.staticEquals(ni,null)){return''}var nj=tab.LocalizeFormatter.mediumDateTimeWithoutSeconds(ni);return(this.get_isDraft()?tab.Strings.AutoSaveEditedAt(nj):tab.Strings.AutoSavePublishedAt(nj))}});var gx=global.tab.FunctionFlyoutControlTemplate=ss.mkType(a,'tab.FunctionFlyoutControlTemplate',function(){spiff.Template.call(this,$("\n<div class='tabCalcEditorFuncFlyoutControl'>\n    <div class='tabCalcEditorFuncFlyoutExpander'></div>\n    <div class='tabCalcEditorFuncFlyoutCollapser'></div>\n    <div class='tabCalcEditorFuncFlyoutControlHit'></div>\n</div>"))});var gy=global.tab.GetCalcDetailsWebCmd=ss.mkType(a,'tab.GetCalcDetailsWebCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return gy.cmdId},get_returnsResult:function(){return true}});var gz=global.tab.GetCalcDetailsWebCmd$ResponseBuilder=ss.mkType(a,'tab.GetCalcDetailsWebCmd$ResponseBuilder',function(ni){this.$1={};this.$1['userCalculationDetails']=ni},{get_userCalculationDetailsPresModel:function(){return this.$1['userCalculationDetails']},set_userCalculationDetailsPresModel:function(ni){this.$1['userCalculationDetails']=ni},withUserCalculationDetailsPresModel:function(ni){this.set_userCalculationDetailsPresModel(ni);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'userCalculationDetails')){throw new ss.Exception("Missing required parameter 'DocParams.UserCalculationDetails'.")}}});var gA=global.tab.GetCalcDetailsWebCommand=ss.mkType(a,'tab.GetCalcDetailsWebCommand',function(){gy.call(this)},{invoke:function(){var ni=$.Deferred();var nj=tab.ApplicationModel.get_instance();var nk=nj.modelInstance(tab.CalculationDialogModel).call(nj);var nl={};if(ss.isValue(nk)){nl.calculationFormula=nk.get_formula();nl.calculationCaption=nk.get_caption();var nm=nk.get_errors();if(nm.length>0){var nn=nm[0];var no=new ss.StringBuilder(nn.errorMessage);var np=Math.min(nm.length,5);for(var nq=1;nq<np;++nq){no.append('|');no.append(nm[nq].errorMessage)}nl.errorMessage=no.toString();nl.startPositionForError=((nm.length===1)?nn.startPositionForError:0)}}var nr=(new gz(nl)).build();ni.resolve(nr);return ni.promise()}});var gB=global.tab.GlassDropTarget=ss.mkType(a,'tab.GlassDropTarget',function(ni){spiff.Glass.call(this,ni,false)},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){return this},dragExit:function(ni){},acceptDrop:function(ni){var nj=ss.safeCast(ni.get_payload(),U);var nk=$.Deferred();var nl=ss.isValue(nj);nk.resolve(nl);if(nl){nj.executeDefaultAddCommand()}return nk},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.copy}});var gC=global.tab.GroupingComponent=ss.mkType(a,'tab.GroupingComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){var ni=(this.props.enableGroupButton?'enabled ':'disabled ');var nj=spiff.DOMElements.div({className:'tab-LayoutGroupIcon'});var nk=React.createElement(SharedWidgets.SingleSelectDropdown,{testId:'LayoutGroupButton',type:3,disabled:!this.props.enableGroupButton,children:nj,'aria-labelledby':'LayoutGroupControl',list:this.$0(),onChange:ss.mkdel(this,function(nl){this.props.selectGroupAction(nl)}),className:ni});return spiff.DOMElements.div({className:'tab-LayoutGroupSection'},[nk,spiff.DOMElements.div({className:ni+'tab-LayoutGroupTitle',id:'LayoutGroupControl'},tab.Strings.DashboardLayoutGroup)])},$0:function(){return React.createElement(SharedWidgets.List,{items:Array.prototype.slice.call(this.props.groupMenuItems),testId:'GroupMenu'})}},{create:function(ni){return React.createElement(gC,ni)}});var gD=global.tab.GroupingDropDownListItemComponent=ss.mkType(a,'tab.GroupingDropDownListItemComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){return spiff.DOMElements.div({className:'groupMenuDropDownItem'},spiff.DOMElements.span({className:'groupMenuDropDownItemName'},this.props.name),spiff.DOMElements.div({className:'groupMenuDropDownItemDescription'},this.props.description))}},{create:function(ni){return React.createElement(gD,ni)}});var gE=global.tab.HeatmapColorOptionView=ss.mkType(a,'tab.HeatmapColorOptionView',function(ni){this.$h=null;ss.makeGenericType(spiff.BaseView$1,[gF]).call(this,ni,new gG);this.$h=this.get_template();this.get_viewModel().add_heatmapSettingsUpdated(ss.mkdel(this,this.$g));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_heatmapSettingsUpdated(ss.mkdel(this,this.$g))}))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$h.heatmapColorLabel.text(tab.Strings.TabAuthColorEditLabel);this.$d();this.disposables.add(ss.mkdel(this,this.$f));this.$h.heatmapIntensityLabel.text(tab.Strings.AuthHeatmapIntensityLabel);this.$c();this.disposables.add(ss.mkdel(this,this.$e));var ni=this.$a();this.disposables.add$1(ni);ni.addToDom(this.$h.transparencyControlContainer);var nj=this.$7();this.disposables.add$1(nj);nj.addToDom(this.$h.colorEffectsContainer)},$a:function(){return tab.ObjectRegistry.newView$1(dA).call(null,dA,[this.get_viewModel().get_colorTransparencyControlViewModel()])},$7:function(){return tab.ObjectRegistry.newView$1(de).call(null,de,[this.get_viewModel().get_colorOptionEffectsViewModel()])},$g:function(){this.$d();this.$c()},$c:function(){var ni=ss.round(tab.DoubleUtil.multiplyBy100(this.get_viewModel().get_intensity()));var nj=this.get_viewModel();var nk=React.createElement(spiff.HorizontalSliderComponent,{minValue:0,maxValue:100,initialValue:ni,disabled:false,width:100,onValueChanged:ss.mkdel(nj,nj.onIntensitySliderChange),showValueTextBox:true,showPercentageSign:true});ReactDOM.render(nk,this.$h.heatmapIntensityHolder.get(0))},$e:function(){ReactDOM.unmountComponentAtNode(this.$h.heatmapIntensityHolder.get(0))},$d:function(){var ni=React.createElement(spiff.DropdownComponent,{styleClass:'tab-ColorPaletteDropdown',resetSelector:true,getDesiredHeight:function(nj){return 350},getMinimumWidth:function(nj){return 230},renderButton:ss.mkdel(this,this.$8)},this.$9());ReactDOM.render(ni,this.$h.heatmapColorHolder.get(0))},$f:function(){ReactDOM.unmountComponentAtNode(this.$h.heatmapColorHolder.get(0))},$8:function(){var ni='';var nj='';if(ss.isValue(this.get_viewModel().get_selectedPalette())){ni='tabAuthPalette-small-'+this.get_viewModel().get_selectedPalette().colorPaletteId;nj=this.get_viewModel().get_selectedPalette().colorPaletteName}return React.createElement(spiff.TextDropdownButtonComponent,{selectionIconClass:ni,selectionText:nj})},$9:function(){var ni=new Object;ni.borders=false;ni.allOption=false;ni.items=this.get_viewModel().getAllPalettes().map(ss.mkdel(this,function(nk){var nl=new spiff.SelectableButtonGroupItem;nl.label=nk.colorPaletteName;nl.getCustomContentBefore=ss.mkdel(this,function(){return this.$b(nk)});return nl}));ni.selection=spiff.SingleSelectGroupSelection.buildSingleSelectGroupSelection$1(Object).call(null,this.get_viewModel().getAllPalettes(),ss.mkdel(this,function(nk){return ss.referenceEquals(nk.colorPaletteId,this.get_viewModel().get_selectedPalette().colorPaletteId)}));ni.showApplyAndCancelButtons=false;ni.onSelectionChanged=ss.mkdel(this,function(nk){var nl=null;nk.mapSelected(Object).call(nk,ss.mkdel(this,function(nm){nl=this.get_viewModel().getAllPalettes()[nm];return nl}));this.get_viewModel().onSelectedPaletteChange((ss.isValue(nl)?nl.colorPaletteId.toString():''))});var nj=ni;return React.createElement(spiff.SelectableButtonGroupComponent,nj)},$b:function(ni){return[(ni.isCustomPalette?du.renderCustomPaletteIcon(ni,false):spiff.DOMElements.div({key:ni.colorPaletteId.toString(),className:'tab-AuthPaletteIcon tabAuthPalette-small-'+ni.colorPaletteId}))]}});var gF=global.tab.HeatmapColorOptionViewModel=ss.mkType(a,'tab.HeatmapColorOptionViewModel',function(ni){this.$4=null;this.$3=null;this.$2=null;this.$1=[];this.$2$1=null;spiff.BaseViewModel.call(this);this.$4=ni;this.$3=new dB(this.$4);this.$2=new df(this.$4);this.$4.add_newMarksCardTabEncoding(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_newMarksCardTabEncoding(ss.mkdel(this,this.$0))})));tab.PaneClientCommands.getHeatmapColorPalettes(this.$4,ss.mkdel(this,function(nj){this.$1=nj;this.$2$1()}))},{add_heatmapSettingsUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_heatmapSettingsUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_colorTransparencyControlViewModel:function(){return this.$3},get_colorOptionEffectsViewModel:function(){return this.$2},get_intensity:function(){return this.$4.get_heatmapSettingsPresModel().densityIntensityPercentage},get_selectedPalette:function(){if(ss.isNullOrUndefined(this.$1)||this.$1.length<=0){return null}var ni=_.find(this.$1,ss.mkdel(this,function(nj){return ss.referenceEquals(nj.colorPaletteId,this.$4.get_heatmapSettingsPresModel().densityColorPalette)}));if(ss.isValue(ni)){return ni}ni=_.find(this.$1,function(nj){return nj.colorPaletteName==='Automatic'});if(ss.isValue(ni)){return ni}return this.$1[0]},get_viewType:function(){return gE},get_viewModel:function(){return this},getAllPalettes:function(){return(ss.isValue(this.$1)?this.$1:[])},disposeViewModel:function(){this.dispose()},dispose:function(){this.$3.dispose();this.$2.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},$0:function(){this.$2$1()},onIntensitySliderChange:function(ni){var nj=ni/100;tab.PaneClientCommands.setDensityIntensity(this.$4,nj)},onSelectedPaletteChange:function(ni){tab.PaneClientCommands.setDensityColorEncoding(this.$4,ni)},updateUberPopupViewModel:function(ni){ni.options.additionalClassNames=['tabAuthHeatmapColorOptionUberPopup']}});var gG=global.tab.HeatmapColorOptionViewTemplate=ss.mkType(a,'tab.HeatmapColorOptionViewTemplate',function(){this.heatmapColorHolder=null;this.heatmapColorLabel=null;this.heatmapIntensityHolder=null;this.heatmapIntensityLabel=null;this.transparencyControlContainer=null;this.colorEffectsContainer=null;spiff.Template.call(this,$("<div class='tabAuthHeatmapColorOptionContent'>\n            <div class='tabAuthHeatmapEffectsContainer'>\n              <div class='tabAuthHeatmapColorControl'>\n                <div class='tabAuthHeatmapColorLabel'></div>\n                <div class='tabAuthHeatmapColorHolder'></div>\n              </div>\n              <div class='tabAuthHeatmapIntensityControl'>\n                <div class='tabAuthHeatmapIntensityLabel'></div>\n                <div class='tabAuthHeatmapIntensityHolder'></div>\n              </div>\n            </div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"));this.heatmapColorLabel=this.getElementBySelector('.tabAuthHeatmapColorLabel');this.heatmapColorHolder=this.getElementBySelector('.tabAuthHeatmapColorHolder');this.heatmapIntensityLabel=this.getElementBySelector('.tabAuthHeatmapIntensityLabel');this.heatmapIntensityHolder=this.getElementBySelector('.tabAuthHeatmapIntensityHolder');this.transparencyControlContainer=this.getElementBySelector('.tabAuthTransparencyControlContainer');this.colorEffectsContainer=this.getElementBySelector('.tabColorEffectsContainer')});var gH=global.tab.HideZoneWithPreviewCommand=ss.mkType(a,'tab.HideZoneWithPreviewCommand',function(){tab.HideZoneWithPreviewCmd.call(this)},{invoke:function(){return this.fireAndForget(ss.mkdel(this,function(){tab.DashboardZoneCommands.hideZone(this.get_zoneID())}))}});var gI=global.tab.IAccordionContent=ss.mkType(a,'tab.IAccordionContent');var gJ=global.tab.IAutosaveDialog=ss.mkType(a,'tab.IAutosaveDialog');var gK=global.tab.ICardContent=ss.mkType(a,'tab.ICardContent');var gL=global.tab.IColorOptionViewModel=ss.mkType(a,'tab.IColorOptionViewModel');var gM=global.tab.IColorPickerViewModel=ss.mkType(a,'tab.IColorPickerViewModel');var gN=global.tab.IColorTransparencyControlViewModel=ss.mkType(a,'tab.IColorTransparencyControlViewModel');var gO=global.tab.IconUtils=ss.mkType(a,'tab.IconUtils',null,null,{getPrimitiveTypeIcon:function(ni){var nj=ni.primitiveType;return'tabAuthPrimitive-'+nj},getFieldIcon$1:function(ni){if(!ss.isValue(ni.fieldIconResource)){return''}return gO.getFieldIcon(ni.fieldIconResource)},getFieldIcon:function(ni){var nj=new ss.StringBuilder('tab-schema-');nj.append(ni);nj.append('-icon');return nj.toString()},getDataSourceIcon:function(ni,nj){if(ss.isNullOrUndefined(ni)){return''}var nk=(ss.keyExists(ni,nj.get_name())?ni[nj.get_name()]:null);if(!ss.isValue(nk)){return''}var nl=new ss.StringBuilder('tab-schema-');nl.append(nk);nl.append('-icon');return nl.toString()},getEncodingTypeIcon:function(ni,nj){switch(ni.encodingType){case'color-encoding':case'size-encoding':case'text-encoding':case'shape-encoding':case'sort-encoding':case'wedge-size-encoding':case'level-of-detail-encoding':case'tooltip-encoding':case'edge-encoding':case'level-encoding':{return'tabAuth-'+ni.encodingType}case'custom-encoding':{return'tabAuth-'+nj+'-encoding'}default:{return'tabAuth-'+'level-of-detail-encoding'}}},getPillFilterTypeIcon:function(ni){if(ss.isNullOrUndefined(ni.get_filterType())){return null}switch(ni.get_filterType()){case'global-filter':{return'tabAuthPillGlobalFilter'}case'shared-filter':{return'tabAuthPillSharedFilter'}case'slice-filter':{return'tabAuthPillSliceFilter'}case'mapped-global-source-filter':{return'tabAuthPillMappedGlobalSourceFilter'}case'mapped-global-target-filter':{return'tabAuthPillMappedGlobalTargetFilter'}case'mapped-shared-source-filter':{return'tabAuthPillMappedSharedSourceFilter'}case'mapped-shared-target-filter':{return'tabAuthPillMappedSharedTargetFilter'}default:{return null}}},getPillIcons:function(ni){var nj=ni.pm.shelfIconTypes;if(ss.isNullOrUndefined(nj)||nj.length===0){return[]}var nk=[];for(var nl=0;nl<nj.length;nl++){var nm=nj[nl];switch(nm){case'secondary-datasource':{nk.push('tabAuthPillIconSecondary');break}case'field-relatability':{nk.push('tabAuthPillIconFieldRelatability');break}case'stitching-field':{nk.push('tabAuthPillIconStitchingField');break}case'table-calc':{nk.push('tabAuthPillIconTableCalc');break}case'table-calc-secondary':{nk.push('tabAuthPillIconTableCalcSecondary');break}case'sort-asc':{nk.push('tabAuthPillIconSortAscending');break}case'sort-desc':{nk.push('tabAuthPillIconSortDescending');break}case'sort-alphabetic-asc':{nk.push('tabAuthPillIconSortAlphabeticAscending');break}case'sort-alphabetic-desc':{nk.push('tabAuthPillIconSortAlphabeticDescending');break}case'forecast':{nk.push('tabAuthPillIconForecast');break}case'remote':{break}}if(nm.toString()==='group'){nk.push('tabAuthPillIconSet')}}return nk},getMarksCardTabIcon:function(ni){return((ss.isValue(ni.get_currentPrimitiveType())&&ni.get_currentPrimitiveType().primitiveType==='multiple')?'':gO.getPrimitiveTypeIcon(ni.get_currentPrimitiveType()))}});var gP=global.tab.IDateModifiedBuilder=ss.mkType(a,'tab.IDateModifiedBuilder');var gQ=global.tab.IFloatingLeftPanel=ss.mkType(a,'tab.IFloatingLeftPanel');var gR=global.tab.IHasScrollableContentHeight=ss.mkType(a,'tab.IHasScrollableContentHeight');var gS=global.tab.InstantAnalyticsViewModel=ss.mkType(a,'tab.InstantAnalyticsViewModel',function(ni){this.$3=false;this.$4=false;this.$5=null;this.$3$1=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$5=ni},{add_instantAnalyticsUpdated:function(ni){this.$3$1=ss.delegateCombine(this.$3$1,ni)},remove_instantAnalyticsUpdated:function(ni){this.$3$1=ss.delegateRemove(this.$3$1,ni)},get_instantAnalyticsEnabled:function(){return this.$3},get_isInstantAnalyticsAllowed:function(){return this.$4},createUpdatedProps:function(){return{label:this.$5,checked:this.$3,handleChange:ss.mkdel(this,this.setIfInstantAnalyticsEnabled),testId:'instant-analytics-checkbox',disabled:!this.get_isInstantAnalyticsAllowed()}},updateFromModel:function(ni,nj){this.$3=ni;this.$4=nj;this.incrementProps()},setIfInstantAnalyticsEnabled:function(ni){this.$3=ni;if(!ss.staticEquals(this.$3$1,null)){this.$3$1(ni)}}});var gT=global.tab.IPaneContentSidebarProvider=ss.mkType(a,'tab.IPaneContentSidebarProvider');var gU=global.tab.IPillStrategy=ss.mkType(a,'tab.IPillStrategy');var gV=global.tab.IReferenceLineDialogTabViewModel=ss.mkType(a,'tab.IReferenceLineDialogTabViewModel');var gW=global.tab.IsAnalyticsAssistantAvailableCmd=ss.mkType(a,'tab.IsAnalyticsAssistantAvailableCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return gW.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'is-analytics-assistant-available'},this.c))}});var gX=global.tab.IsAnalyticsAssistantAvailableCmd$ResponseBuilder=ss.mkType(a,'tab.IsAnalyticsAssistantAvailableCmd$ResponseBuilder',function(ni){this.$1={};this.$1['isAnalyticsAssistantAvailable']=ni},{get_isAnalyticsAssistantAvailable:function(){return this.$1['isAnalyticsAssistantAvailable']},set_isAnalyticsAssistantAvailable:function(ni){this.$1['isAnalyticsAssistantAvailable']=ni},withIsAnalyticsAssistantAvailable:function(ni){this.set_isAnalyticsAssistantAvailable(ni);return this},build:function(){return this.$1},$0:function(){if(!ss.keyExists(this.$1,'isAnalyticsAssistantAvailable')){throw new ss.Exception("Missing required parameter 'DocParams.IsAnalyticsAssistantAvailable'.")}}});var gY=global.tab.ISheetListActionHandler=ss.mkType(a,'tab.ISheetListActionHandler');var gZ=global.tab.ITreeNode$1=ss.mkType(a,'tab.ITreeNode$1',function(ni){var nj=ss.registerGenericInterfaceInstance(gZ,[ni],{get_item:null,get_children:null,get_expanded:null,get_key:null});ss.setMetadata(nj,{variance:[1]});return nj});ss.initGenericInterface(gZ,1);var ha=global.tab.IUpdateCommand$1=ss.mkType(a,'tab.IUpdateCommand$1',function(ni){var nj=ss.registerGenericInterfaceInstance(ha,[ni],{get_updateCommand:null,set_updateCommand:null});return nj});ss.initGenericInterface(ha,1);var hb=global.tab.JustSavedOrPublishedDateBuilder=ss.mkType(a,'tab.JustSavedOrPublishedDateBuilder',function(ni){this.$1$1=null;this.set_displayMessage((ni?tab.Strings.AutoSaveAllChangesSaved:tab.Strings.AutoSaveJustPublished))},{get_displayMessage:function(){return this.$1$1},set_displayMessage:function(ni){this.$1$1=ni},buildDisplayTextForDate:function(ni){return this.get_displayMessage()}});var hc=global.tab.KeyboardResizePreviewViewModel=ss.mkType(a,'tab.KeyboardResizePreviewViewModel',function(ni,nj){this.$g=null;this.$f=null;this.$h=null;this.$d=null;this.$e=null;this.$c=null;this.$b=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$c=ni;this.$b=nj;this.$f={x:0,y:0}},{createUpdatedProps:function(){return{hasPendingResize:ss.isValue(this.$h),pendingZoneGeometry:this.$g}},resetLocalSize:function(ni){this.$6();this.$7();this.$g=null;if(ss.isValue(ni)&&ni.get_isZoneResizable()){this.$g={l:ni.get_x(),t:ni.get_y(),w:ni.get_width(),h:ni.get_height()}}},updatePendingGeometry:function(ni){if(ss.isValue(ni)&&ni.get_isZoneResizable()&&ss.isNullOrUndefined(this.$g)){this.$g={l:ni.get_x(),t:ni.get_y(),w:ni.get_width(),h:ni.get_height()}}this.incrementProps()},delayMoveZoneCall:function(ni,nj,nk,nl){if(ss.isValue(this.$h)){this.$7();this.incrementProps();tab.DashboardZoneCommands.resizeFreeFormZone(ni,this.$g.l,this.$g.t,this.$g.w,this.$g.h)}if(this.$4(nj,nk,0,0,nl)){ni.updateLocalPropertiesForZonePreview(nj,nk);this.$8(ni)}},delayMoveZonesCall:function(ni,nj,nk){if(ss.isValue(this.$h)&&ss.isValue(ni[0])){this.$7();this.incrementProps();tab.DashboardZoneCommands.resizeFreeFormZone(ni[0],this.$g.l,this.$g.t,this.$g.w,this.$g.h)}this.$3(nj,nk);for(var nl=0;nl<ni.length;nl++){var nm=ni[nl];nm.set_blockLocalReset(true);nm.updateLocalPropertiesForZonePreview(nj,nk)}this.$9(ni)},delaySetZoneGeometry:function(ni,nj,nk){this.updatePendingGeometry(ni);var nl=nj.l-this.$g.l;var nm=nj.t-this.$g.t;var nn=nj.w-this.$g.w;var no=nj.h-this.$g.h;var np=nl!==0||nm!==0;var nq=nn!==0||no!==0;if(np&&!nq){this.delayMoveZoneCall(ni,nl,nm,nk)}else{this.delayResizeZoneCall$1(ni,nl,nm,no,nn,nk)}},delayResizeZoneCall:function(ni,nj,nk){this.delayResizeZoneCall$1(ni,0,0,nj,nk,null)},delayResizeZoneCall$1:function(ni,nj,nk,nl,nm,nn){if(ss.isValue(this.$d)){this.$6();tab.DashboardZoneCommands.resizeFreeFormZone(ni,this.$g.l,this.$g.t,this.$g.w,this.$g.h)}if(this.$4(nj,nk,nm,nl,nn)){this.$a(ni)}},$4:function(ni,nj,nk,nl,nm){if(ss.isValue(this.$g)){var nn=this.$g.w+nk;var no=this.$g.h+nl;var np=nn>=1&&nn<=9999;var nq=no>=1&&no<=9999;var nr=np&&nq;if(ss.isNullOrUndefined(nm)){nm={l:0,t:0,w:this.$c(),h:this.$b()}}var ns=tab.RectUtil.intersectsWith({l:this.$g.l+ni,t:this.$g.t+nj,w:nn,h:no},nm);if(nr&&ns){this.$g.w+=nk;this.$g.h+=nl;this.$g.l+=ni;this.$g.t+=nj;return true}}return false},$3:function(ni,nj){this.$f.x+=ni;this.$f.y+=nj},$a:function(ni){this.$7();this.$h=window.setTimeout(ss.mkdel(this,function(){this.$7();this.incrementProps();tab.DashboardZoneCommands.resizeFreeFormZone(ni,this.$g.l,this.$g.t,this.$g.w,this.$g.h)}),1000);this.incrementProps()},$8:function(ni){this.$6();this.$d=window.setTimeout(ss.mkdel(this,function(){this.$6();tab.DashboardZoneCommands.resizeFreeFormZone(ni,this.$g.l,this.$g.t,this.$g.w,this.$g.h)}),1000)},$9:function(ni){var nj=ss.arrayClone(ni);this.$5();this.$e=window.setTimeout(ss.mkdel(this,function(){this.$5();tab.DashboardZoneCommands.moveZones(nj,this.$f,true);this.$f={x:0,y:0}}),1000)},$7:function(){this.$h=tab.MiscUtil.clearTimeout(this.$h)},$6:function(){this.$d=tab.MiscUtil.clearTimeout(this.$d)},$5:function(){this.$e=tab.MiscUtil.clearTimeout(this.$e)}});var hd=global.tab.LaunchAnimationPaneKeyboardShortcut=ss.mkType(a,'tab.LaunchAnimationPaneKeyboardShortcut',function(){KeyboardShortcuts.CommandKeyboardShortcut.call(this)},{getKeyComboOrKeyCombos:function(){var ni=new Object;ni.controlOrCommand='required';ni.alt='required';return new KeyboardShortcuts.KeyCombo('a',ni)},getCommandId:function(){return{ns:'tabdoc',cmd:'launch-animation-side-pane'}},executeShortcut:function(ni){var nj=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'launch-animation-side-pane'},null);tab.ServerCommands.executeServerCommand(nj,'immediately',null,null)},shouldRequireCommandCheck:function(){return false}});var he=global.tab.LayerDragInstance=ss.mkType(a,'tab.LayerDragInstance',function(ni,nj,nk,nl){this.indexOfLayerBeingDragged=-1;this.marksSpecificationId=-1;EventUtils.DragInstance.call(this,ni,nj);this.indexOfLayerBeingDragged=nk;this.marksSpecificationId=nl},{get_defaultDropCursor:function(){return spiff.CustomCursor.delete$1},dropToNowhereAction:function(){var ni={};ni['worksheet']=tsConfig.current_sheet_name;ni['layerIndex']=this.indexOfLayerBeingDragged;var nj=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'remove-layer'},ni);tab.ServerCommands.executeServerCommand(nj,'none',null,null)}});var hf=global.tab.LayerReorderDropTarget=ss.mkType(a,'tab.LayerReorderDropTarget',function(ni){this.$0=null;this.$0=ni},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){var nj=ss.safeCast(ni,he);if(nj.indexOfLayerBeingDragged!==this.$0.reorderIndex||nj.indexOfLayerBeingDragged!==this.$0.reorderIndex+1){this.$0.set_hovering(true)}return this},dragExit:function(ni){this.$0.set_hovering(false)},acceptDrop:function(ni){this.$0.set_hovering(false);var nj=ss.safeCast(ni,he);var nk=$.Deferred();var nl=false;var nm=nj.indexOfLayerBeingDragged;if(nm!==this.$0.reorderIndex||nm!==this.$0.reorderIndex+1){var nn=((nm<this.$0.reorderIndex)?1:0);var no=this.$0.reorderIndex-nn;var np={};np['worksheet']=tsConfig.current_sheet_name;np['paneSpec']=nj.marksSpecificationId;np['layerIndex']=no;var nq=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-layer-index'},np);tab.ServerCommands.executeServerCommand(nq,'none',null,null);this.$0.setLayerIndexClientSideCallback(nm+1,no+1);nl=true}return nk.resolve(nl)},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.move}});var hg=global.tab.LayerReorderDropTargetTemplate=ss.mkType(a,'tab.LayerReorderDropTargetTemplate',function(ni){this.dropTarget=null;this.indicator=null;this.indicatorTop=null;this.indicatorBottom=null;spiff.Template.call(this,$("<div class='layerReorderDropTargetItem'>\n            <div class='layerReorderDropTarget'>\n                <div class='layerReorderDropTargetIndicatorTop'></div>\n                <div class='layerReorderDropTargetIndicator'></div>\n                <div class='layerReorderDropTargetIndicatorBottom'></div>\n            </div>\n        </div>"));this.dropTarget=this.getElementBySelector('.layerReorderDropTarget');this.indicator=this.getElementBySelector('.layerReorderDropTargetIndicator');this.indicatorTop=this.getElementBySelector('.layerReorderDropTargetIndicatorTop');this.indicatorBottom=this.getElementBySelector('.layerReorderDropTargetIndicatorBottom');if(ni>0){this.dropTarget.height(ni+3)}});var hh=global.tab.LayerReorderDropTargetView=ss.mkType(a,'tab.LayerReorderDropTargetView',function(ni,nj){this.$a=null;this.$9=null;this.$8=null;ss.makeGenericType(spiff.BaseView$1,[hi]).call(this,ni,nj);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$7));this.$9=nj;this.$a=ni;this.$8=new hf(this.$a);EventUtils.DragDropManager.attachDropTarget(this.element,this.$8);this.update()},{dispose:function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$7));ss.makeGenericType(spiff.BaseView$1,[hi]).prototype.dispose.call(this)},$7:function(ni){this.dispose()},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[hi]).prototype.onViewModelPropertyChanged.call(this,ni,nj);switch(nj.get_propertyName()){case'LayerReorderHoverProperty':{this.update();break}}},update:function(){if(!this.$a.get_hovering()){this.$9.indicatorTop.hide();this.$9.indicatorBottom.hide();return}if(this.$a.reorderIndex===0){this.$9.indicatorTop.show();this.$9.indicatorBottom.hide()}else if(this.$a.isTopMostDropTarget){this.$9.indicatorTop.hide();this.$9.indicatorBottom.show()}else{this.$9.indicatorTop.show();this.$9.indicatorBottom.show()}}});var hi=global.tab.LayerReorderDropTargetViewModel=ss.mkType(a,'tab.LayerReorderDropTargetViewModel',function(ni,nj){this.setLayerIndexClientSideCallback=null;this.reorderIndex=0;this.isTopMostDropTarget=false;this.$0=false;spiff.BaseViewModel.call(this);this.setLayerIndexClientSideCallback=ni;this.reorderIndex=nj},{get_hovering:function(){return this.$0},set_hovering:function(ni){this.$0=ni;this.notifyPropertyChanged('LayerReorderHoverProperty')}});var hj=global.tab.LayerReorderSpacerDropTarget=ss.mkType(a,'tab.LayerReorderSpacerDropTarget',function(){},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){return this},dragExit:function(ni){return},acceptDrop:function(ni){var nj=$.Deferred();return nj.resolve(true)},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.move}});var hk=global.tab.LayerReorderSpacerDropTargetTemplate=ss.mkType(a,'tab.LayerReorderSpacerDropTargetTemplate',function(ni){this.spacer=null;spiff.Template.call(this,$("<div class='layerReorderSpacerDropTargetContainer'>\n            <div class='layerReorderSpacerDropTarget'></div>\n        </div>"));this.spacer=this.getElementBySelector('.layerReorderSpacerDropTarget');this.spacer.height(ni)});var hl=global.tab.LayerReorderSpacerDropTargetView=ss.mkType(a,'tab.LayerReorderSpacerDropTargetView',function(ni,nj){this.$8=null;ss.makeGenericType(spiff.BaseView$1,[tab.IViewModel]).call(this,ni,nj);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$7));this.$8=new hj;EventUtils.DragDropManager.attachDropTarget(this.element,this.$8)},{dispose:function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$7));ss.makeGenericType(spiff.BaseView$1,[tab.IViewModel]).prototype.dispose.call(this)},$7:function(ni){this.dispose()}});var hm=global.tab.LayersDropTarget=ss.mkType(a,'tab.LayersDropTarget',function(ni){this.$0=null;this.$0=ni},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(ni){this.$0.setHoverState(true);return this},dragExit:function(ni){this.$0.setHoverState(false)},acceptDrop:function(ni){var nj=$.Deferred();var nk=ss.safeCast(ni,jd);if(ss.isNullOrUndefined(nk)){return nj.resolve(false)}var nl=nk.get_fields();var nm=false;for(var nn=0;nn<nl.length;nn++){var no=nl[nn];if(no.get_isGenerated()){continue}var np=no.asColumn();if(np.get_isGeoSpatial()){nm=true;break}}nj.resolve(nm);if(!nm){return nj}this.$0.executeDropCommand(nl);return nj},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.copy}});var hn=global.tab.LayersDropTargetTemplate=ss.mkType(a,'tab.LayersDropTargetTemplate',function(){spiff.Template.call(this,$("<div class='tabLayerDropTarget'><div class='tabAdHeaderRow'><span class='tabAdDropTitle tabAdAxisCell'><div class='tabAdDropInstructionTextPre'></div><div class='tabAdDropLabel'></div><div class='tabAdDropInstructionTextPost'></div></span></div></div>"))},{setDropLabel:function(ni,nj){this.getElementBySelector('.tabAdDropInstructionTextPre').text(ni);this.getElementBySelector('.tabAdDropLabel').text(nj)},addDropIcon:function(ni){var nj=$("<span class='tabAdAreaDropSpot tabAdDropCell'><div class='tabAdAreaDropImage'></div></span>");nj.find('.tabAdAreaDropImage').addClass(ni);this.getElementBySelector('.tabAdHeaderRow').append(nj);return nj}});var ho=global.tab.LayersDropTargetView=ss.mkType(a,'tab.LayersDropTargetView',function(ni){this.$b=null;ss.makeGenericType(spiff.BaseView$1,[hp]).call(this,ni,new hn);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$7));var nj=tab.Strings.AddALayer;var nk=nj.split('|');this.$9().setDropLabel(nk[0],nk[1]);var nl=this.$9().addDropIcon('tabAuthLayersPaneDrop');this.$b=nl;var nm=new hm(this.$a());EventUtils.DragDropManager.attachDropTarget(this.element,nm);this.element.get(0).id=tab.DomUtil.makeHtmlSafeId('tabLayersDropTarget')},{dispose:function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$7));ss.makeGenericType(spiff.BaseView$1,[hp]).prototype.dispose.call(this)},$7:function(ni){this.dispose()},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[hp]).prototype.onViewModelPropertyChanged.call(this,ni,nj);this.$8()},$8:function(){this.$b.toggleClass('tabDirectHover',this.$a().getHoverState());this.$b.toggleClass('tabIndirectHover',this.$a().getHoverState())},$9:function(){return this.get_template()},$a:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.element.css('visibility','visible')},show:function(){this.addToDom(cf.findVizZone())}});var hp=global.tab.LayersDropTargetViewModel=ss.mkType(a,'tab.LayersDropTargetViewModel',function(){this.$0=false;spiff.BaseViewModel.call(this)},{executeDropCommand:function(ni){var nj={};var nk=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(nk)){return}nj['visualIdPresModel']=JSON.stringify(nk.get_visualId());nj['shelfDropContext']='none';nj['isCopy']=false;nj['isDeadDrop']=false;nj['dragSource']='drag-drop-schema';nj['dropTarget']='drag-drop-layers';nj['dragDescription']='';var nl={shelfPosIndex:-1,shelfDropAction:'insert'};nl.shelfType='none-shelf';nj['shelfDragSourcePosition']=nl;nj['shelfDropTargetPosition']={shelfType:'show-me-shelf',shelfPosIndex:0,shelfDropAction:'replace',isFolded:false,isOverlay:true};var nm=_.map(ni,ss.mkdel(this,function(nq){return{fn:nq.get_globalName()}}));nj['fieldEncodings']=JSON.stringify(nm);var nn=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'add-layer-and-drop-on-show-me'},nj);var no=$.Deferred();var np=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-prepare'},nn.commandParams);tab.ServerCommands.executeServerCommand(np,'immediately',function(nq){tab.ServerCommands.executeServerCommand(nn,'immediately',function(nr){no.resolve(nr)},function(nr){no.reject()})},function(nq){})},setHoverState:function(ni){this.$0=ni;this.notifyPropertyChanged('Hover')},getHoverState:function(){return this.$0}},{$0:function(){return tab.Logger.getLoggerWithName(ss.getTypeName(tab.ShelfClientCommands)+tsConfig.layoutid)}});var hq=global.tab.LayoutBackgroundPickerComponent=ss.mkType(a,'tab.LayoutBackgroundPickerComponent',function(ni){this.$6=null;this.$7=null;spiff.PureRenderComponent.call(this,ni);this.state={isOpacityTextBoxEmpty:false};this.$6=ss.mkdel(this,function(nj,nk){this.$0(nj,true)});this.$7=ss.mkdel(this,function(nj){this.$0(nj,false)})},{render:function(){var ni=(this.props.hasBackground?this.props.backgroundColor.toRgbHex():'');var nj=this.$4(ni);var nk=tab.DoubleUtil.roundToInt(this.props.backgroundColor.get_a()*100);var nl=this.$5(nk,this.state.isOpacityTextBoxEmpty);var nm='tab-BackgroundNoneButton'+(this.props.hasBackground?'':ss.formatString(' {0}','selected'));var nn=this.$3(nm);return spiff.DOMElements.div({className:'tabLayoutBackgroundPicker'},React.createElement(spiff.InteractAsButtonWrapperComponent,nn),this.createColorGrid(nj),spiff.DOMElements.div({},tab.Strings.AuthColorTransparencyLabel,spiff.StatelessHorizontalSliderComponent.create(nl)))},$4:function(ni){var nj={handleSwatchClicked:ss.mkdel(this,this.$2),testId:'ZoneBorder',selectedColor:ni,colorsPreset:1};return nj},$3:function(ni){return{buttonContent:ss.mkdel(this,function(){return spiff.DOMElements.div({className:ni},tab.Strings.DashboardSpacingNone)}),handleAllTriggers:ss.mkdel(this,this.$1),ariaLabel:tab.Strings.DashboardSpacingNone}},$5:function(ni,nj){return{disabled:false,commitValue:this.$6,displayValueChanged:this.$7,minValue:0,maxValue:100,value:ni,emptyTextBox:nj,showValueTextBox:true,showPercentageSign:true,width:120,styleClass:'tabLayoutBackgroundOpacity'}},createColorGrid:function(ni){return spiff.DOMElements.div({},React.createElement(SharedWidgets.ColorGridWidget,ni))},$0:function(ni,nj){var nk=(ss.isNullOrUndefined(ni)?0:ss.Nullable$1.mul(ni,0.01));if(this.state.isOpacityTextBoxEmpty!==ss.isNullOrUndefined(ni)){this.setState({isOpacityTextBoxEmpty:ss.isNullOrUndefined(ni)})}var nl=tab.ColorModel.fromColorModelPlusAlpha(this.props.backgroundColor,nk);this.props.handleBackgroundChanged(nl,this.props.hasBackground,nj)},$1:function(){this.props.handleBackgroundChanged(this.props.backgroundColor,false,true)},$2:function(ni){var nj=tab.ColorModel.fromColorCode(ni);if(this.props.backgroundColor.get_a()!==0){nj=tab.ColorModel.fromColorModelPlusAlpha(nj,this.props.backgroundColor.get_a())}this.props.handleBackgroundChanged(nj,true,true)}},{create:function(ni){return React.createElement(hq,ni)}});var hr=global.tab.LayoutBorderPickerComponent=ss.mkType(a,'tab.LayoutBorderPickerComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{$3:function(){var ni=tab.ColorModel.fromColorCode(this.props.currentBorder.color);return ni.toRgbHex()},render:function(){var ni={handleSwatchClicked:ss.mkdel(this,this.handleColorChanged),testId:'ZoneBorder',selectedColor:this.$3()};var nj={showNone:true,handlePatternSelected:ss.mkdel(this,this.$1),selectedPattern:ic.borderStyleToLinePattern(this.props.currentBorder.style)};var nk={handleStrokeWidthSelected:ss.mkdel(this,this.$2),selectedStrokeWidth:this.props.currentBorder.width};return spiff.DOMElements.div({className:'tabLayoutBorderPicker'},hZ.create(nj),lJ.create(nk),this.createColorGrid(ni))},createColorGrid:function(ni){return React.createElement(SharedWidgets.ColorGridWidget,ni)},$2:function(ni){var nj=this.$0(ni,null,null,null);this.props.handleBorderChanged(nj)},$1:function(ni){var nj=this.$0(null,ic.linePatternToBorderStyle(ni),null,null);this.props.handleBorderChanged(nj)},handleColorChanged:function(ni){var nj=this.$0(null,null,ni,null);this.props.handleBorderChanged(nj)},$0:function(ni,nj,nk,nl){var nm=ni;if(ss.isNullOrUndefined(nm)){nm=this.props.currentBorder.width}var nn=nj;if(ss.isNullOrUndefined(nn)){nn=this.props.currentBorder.style}var no=nk||this.props.currentBorder.color;var np=nl;if(ss.isNullOrUndefined(np)){np=this.props.currentBorder.side}return new tab.BorderDefinition(nm,nn,no,np)}},{create:function(ni){return React.createElement(hr,ni)}});var hs=global.tab.LayoutCustomizationToggleViewModel=ss.mkType(a,'tab.LayoutCustomizationToggleViewModel',function(ni){this.$a=null;this.$b=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$a=ni;this.$b=ni.createChildModelHolder(tab.DeviceLayoutMetadataModel).call(ni,function(nj){return nj.deviceLayoutMetadataModel});this.disposables.add$2([this.$b,this.$b.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){nj.add_isLayoutCustomizedChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){nj.remove_isLayoutCustomizedChanged(ss.mkdel(this,this.incrementProps))}))]);this.disposables.add$1(this.$a.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){nj.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nj.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){nj.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nj.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))})))},{$6:function(){return this.$a.get_model()},$7:function(){return this.$b.get_model()},$8:function(){return ss.isValue(this.$6())&&this.$6().get_isCurrentLayoutAutoGenerated()},$9:function(){return ss.isValue(this.$7())&&this.$7().get_isLayoutCustomized()},createUpdatedProps:function(){return{selectedToggle:(this.$9()?1:0),leftToggleText:tab.Strings.LayoutToggleOptionDefault,rightToggleText:tab.Strings.LayoutToggleOptionCustom,handleLeftToggleSelected:ss.mkdel(this,this.$4),handleRightToggleSelected:ss.mkdel(this,this.$3),testId:hs.$1,disabled:this.$8()}},$4:function(){if(ss.isValue(this.$6())){tab.DashboardClientCommands.resetDashboardCurrentLayout(this.$6().get_sheetName(),this.$5(false))}},$3:function(){if(ss.isValue(this.$6())){tab.DashboardClientCommands.editDashboardDeviceLayout(this.$6().get_sheetName(),this.$5(true))}},$5:function(ni){return ss.mkdel(this,function(nj){if(ss.isValue(this.$7())){var nk=nj.makeMutablePresModel(this.$7(),false);nk.isDeviceLayoutCustomized=ni;this.$7().update(nk,nj.modelUpdateContext)}})}});var ht=global.tab.LayoutPaneArrangeViewModel=ss.mkType(a,'tab.LayoutPaneArrangeViewModel',function(ni){this.$7=null;this.$6=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$7=ni;this.$6=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.disposables.add$1(this.$7.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addModelChangedHandler(ss.mkdel(this,this.$4)).addEventBinding(ss.mkdel(this,function(nj){nj.add_activeZoneChanged(ss.mkdel(this,this.$3));nj.add_dashboardTypeChanged(ss.mkdel(this,this.$4));nj.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){nj.remove_activeZoneChanged(ss.mkdel(this,this.$3));nj.remove_dashboardTypeChanged(ss.mkdel(this,this.$4));nj.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$4)).addEventBinding(ss.mkdel(this,function(nj){nj.get_zoneCommonModel().add_changeZoneGroupingState(ss.mkdel(this,this.$4))}),ss.mkdel(this,function(nj){nj.get_zoneCommonModel().remove_changeZoneGroupingState(ss.mkdel(this,this.$4))})))},{createInitialProps:function(){return{}},createUpdatedProps:function(){return{}},$3:function(){var ni=null;if(ss.isValue(this.$7.get_model())){ni=this.$7.get_model().getZone(this.$7.get_model().get_activeZoneID())}this.$6.set_Model(ni);this.$4()},$4:function(){this.incrementProps()},$5:function(){return ss.isValue(this.$7.get_model())&&this.$7.get_model().get_isCurrentLayoutAutoGenerated()}});var hu=global.tab.LayoutPaneComponent=ss.mkType(a,'tab.LayoutPaneComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){return spiff.DOMElements.div({className:'tab-LayoutPane'},this.$2(),this.$3())},$2:function(){return null},$3:function(){this.props.resizablePaneProps.renderScrollHandlers=ss.mkdel(this,this.$4);return ky.create(this.props.resizablePaneProps)},$4:function(ni,nj,nk){var nl=ss.mkdel(this,function(){this.$0(ni)});var nm={onHover:nl,direction:ni,sectionContentClass:nj,shouldRenderScrollHandlers:this.props.shouldRenderScrollHandlers,heightPercent:nk};return hN.create(nm)},$0:function(ni){var nj=$('.'+'layout-tree-section-content');if(nj.length>0){var nk=this.$1(ni,nj);var nl=((ni===0||ni===1)?'scrollTop':'scrollLeft');nj.animate(ss.mkdict([nl,nk]),'fast','swing')}},$1:function(ni,nj){var nk;var nl;if(ni===0||ni===1){var nm=nj[0].clientHeight;nk=nm*0.5*((ni===0)?-1:1);nl=nj.scrollTop()}else{var nn=nj[0].clientWidth;nk=nn*0.5*((ni===2)?-1:1);nl=nj.scrollLeft()}return Math.round(nl+nk)}});var hv=global.tab.LayoutPaneConstants=ss.mkType(a,'tab.LayoutPaneConstants',null,null,{renderInfoItemTitle:function(ni,nj){return spiff.DOMElements.div({className:'tab-ZoneLayoutInfoTitle',id:nj},ni)}});var hw=global.tab.LayoutPaneGeometryComponent=ss.mkType(a,'tab.LayoutPaneGeometryComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){var ni='tab-ZoneLayoutInfoItem';var nj=[ni,'geometrySpace'].join(' ');var nk=hC.create($.extend({},this.props,{key:'position'}));var nl=hD.create(this.props.sizeProps);return spiff.DOMElements.div({className:'tab-ZoneGeometrySection',key:'layout-geometry-section'},[spiff.DOMElements.div({className:nj,key:'layout-position-spinners'},nk),spiff.DOMElements.div({className:nj,key:'layout-size-spinners'},nl)])}},{create:function(ni){return React.createElement(hw,ni)}});var hx=global.tab.LayoutPaneGeometryViewModel=ss.mkType(a,'tab.LayoutPaneGeometryViewModel',function(ni,nj){this.$m=0;this.$l=null;this.$k=null;this.$p=0;this.$q=0;this.$o=0;this.$n=0;this.$r=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$l=ni;this.$k=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.$m=nj;this.disposables.add(ss.mkdel(this,this.$7));this.disposables.add$1(this.$l.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$g)).addEventBinding(ss.mkdel(this,function(nk){nk.add_activeZoneChanged(ss.mkdel(this,this.$g));nk.add_sizeChanged(ss.mkdel(this,this.$h));nk.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nk){nk.remove_activeZoneChanged(ss.mkdel(this,this.$g));nk.remove_sizeChanged(ss.mkdel(this,this.$h));nk.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));this.disposables.add$1(this.$k.newDisposableContext().addEventBinding(ss.mkdel(this,function(nk){nk.get_zoneCommonModel().add_resizeZone(ss.mkdel(this,this.$i));nk.get_zoneCommonModel().add_changeZoneFloatingState(ss.mkdel(this,this.$i));nk.get_zoneCommonModel().add_changeZoneIsFixedSize(ss.mkdel(this,this.$i))}),ss.mkdel(this,function(nk){nk.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.$i));nk.get_zoneCommonModel().remove_changeZoneFloatingState(ss.mkdel(this,this.$i));nk.get_zoneCommonModel().remove_changeZoneIsFixedSize(ss.mkdel(this,this.$i))})))},{createInitialProps:function(){return{changeX:ss.mkdel(this,this.$5),changeY:ss.mkdel(this,this.$6),sizeProps:{changeWidth:ss.mkdel(this,this.$4),changeHeight:ss.mkdel(this,this.$3),fixDimension:ss.mkdel(this,this.$a)}}},createUpdatedProps:function(){var ni=this.$k.get_model();var nj=(ss.isNullOrUndefined(ni)?this.$c():this.$b());return nj},$h:function(){if(ss.isNullOrUndefined(this.$k.get_model())){this.$i()}},$g:function(){var ni=null;if(ss.isValue(this.$l.get_model())){ni=this.$l.get_model().getZone(this.$l.get_model().get_activeZoneID())}this.$k.set_Model(ni);this.$i()},$i:function(){this.$7();var ni=this.$k.get_model();if(ss.isValue(ni)){this.$p=ni.get_zoneCommonModel().get_x();this.$q=ni.get_zoneCommonModel().get_y();this.$o=ni.get_zoneCommonModel().get_width();this.$n=ni.get_zoneCommonModel().get_height()}this.incrementProps()},$c:function(){var ni={x:0,y:0,isZone:false,disablePositionControls:true,shouldRenderPendingGeometry:false,sizeProps:{key:'size',disableHeightControl:true,disableWidthControl:true,showFixWidth:false,showFixHeight:false,isFixedSize:false}};if(ss.isValue(this.$l.get_model())&&ss.isValue(this.$l.get_model().get_dashboardSize())){var nj=this.$l.get_model().get_dashboardSize();ni.sizeProps.width=nj.w;ni.sizeProps.height=nj.h}return ni},$b:function(){var ni=this.$9();return{x:this.$p,y:this.$q,disablePositionControls:!ni||this.$j(),isZone:true,shouldRenderPendingGeometry:ss.isValue(this.$r)&&ni,sizeProps:this.$e()}},$e:function(){var ni=this.$l.get_model();return this.$f()},$f:function(){var ni=this.$9();return{key:'size',changeWidth:ss.mkdel(this,this.$4),changeHeight:ss.mkdel(this,this.$3),fixDimension:ss.mkdel(this,this.$a),width:this.$o,height:this.$n,disableHeightControl:!ni||this.$j(),disableWidthControl:!ni||this.$j(),showFixHeight:false,showFixWidth:false,isFixedSize:false}},$d:function(){var ni=this.$k.get_model();var nj=this.$9();var nk=this.$l.get_model().getZone(ni.get_parentZoneId());var nl=false;return{key:'size',changeWidth:ss.mkdel(this,this.$4),changeHeight:ss.mkdel(this,this.$3),fixDimension:ss.mkdel(this,this.$a),width:this.$o,height:this.$n,disableHeightControl:!(nj||nl&&!nk.get_isHorizontal())||this.$j(),disableWidthControl:!(nj||nl&&nk.get_isHorizontal())||this.$j(),showFixHeight:nl&&!nk.get_isHorizontal(),showFixWidth:nl&&nk.get_isHorizontal(),isFixedSize:ni.get_zoneCommonModel().get_isFixedSize()}},$9:function(){var ni=this.$k.get_model();return ni.get_zoneCommonModel().get_isFloating()},$5:function(ni){var nj=ni-this.$p;this.$p=ni;this.$k.get_model().updateLocalPropertiesForZonePreview(nj,0);this.$8(false)},$6:function(ni){var nj=ni-this.$q;this.$q=ni;this.$k.get_model().updateLocalPropertiesForZonePreview(0,nj);this.$8(false)},$4:function(ni){this.$o=ni;this.$8(true)},$3:function(ni){this.$n=ni;this.$8(true)},$8:function(ni){this.$7();this.$r=window.setTimeout(ss.mkdel(this,function(){this.$7();if(ni){this.incrementProps()}if(this.$9()){tab.DashboardZoneCommands.resizeFreeFormZone(this.$k.get_model(),this.$p,this.$q,this.$o,this.$n)}}),this.$m);if(ni){this.incrementProps()}},$7:function(){this.$r=tab.MiscUtil.clearTimeout(this.$r)},$a:function(){var ni=this.$k.get_model();tab.DashboardZoneCommands.setZoneIsFixedSize(ni.get_zoneId(),!ni.get_zoneCommonModel().get_isFixedSize())},$j:function(){return ss.isValue(this.$l.get_model())&&this.$l.get_model().get_isCurrentLayoutAutoGenerated()}});var hy=global.tab.LayoutPaneSpacingComponent=ss.mkType(a,'tab.LayoutPaneSpacingComponent',function(ni){this.maxSpacingSize=1000;this.$e=null;this.$f=null;this.$9=null;this.$8=null;this.$c=null;this.$d=null;this.$b=null;this.$a=null;spiff.PureRenderComponent.call(this,ni);this.state={showingState:'none'};this.$d=ss.mkdel(this,function(nj){this.$f=nj});this.$c=ss.mkdel(this,function(nj){this.$e=nj});this.$b=ss.mkdel(this,function(nj){this.$9=nj});this.$a=ss.mkdel(this,function(nj){this.$8=nj})},{componentDidMount:function(){EventUtils.GlobalUIEvents.add_DismissTemporaryElements(ss.mkdel(this,this.$2))},componentWillUnmount:function(){EventUtils.GlobalUIEvents.remove_DismissTemporaryElements(ss.mkdel(this,this.$2))},render:function(){return spiff.DOMElements.div({},spiff.DOMElements.div({className:'tab-ZoneLayoutInfoItem',key:'border-section','data-test-id':'tab-Border-Section-Id'},hv.renderInfoItemTitle(tab.Strings.LayoutPaneBorderButtonTitle,'border-title'),this.renderBorderButton()),spiff.DOMElements.div({className:'tab-ZoneLayoutInfoItem',key:'background-color-section','data-test-id':'tab-Background-Color-Section-Id'},hv.renderInfoItemTitle(tab.Strings.LayoutPaneBackgroundColorTitle,'background-title'),this.renderBackgroundColorButton()),spiff.DOMElements.div({className:'tab-ZoneLayoutInfoItem',key:'margin-section','data-test-id':'tab-Margin-Section-Id'},hv.renderInfoItemTitle(tab.Strings.LayoutPaneMarginButtonTitle,'margin-title'),this.renderMarginButton()),spiff.DOMElements.div({className:'tab-ZoneLayoutInfoItem',key:'padding-section','data-test-id':'tab-Padding-Section-Id'},hv.renderInfoItemTitle(tab.Strings.LayoutPanePaddingButtonTitle,'padding-title'),this.renderPaddingButton()),this.$6())},$1:function(){switch(this.state.showingState){case'borderShowing':{return tab.Strings.LayoutPaneBorderButtonTitle}case'backgroundShowing':{return tab.Strings.LayoutPaneBackgroundColorTitle}case'marginShowing':{return tab.Strings.LayoutPaneMarginButtonTitle}case'paddingShowing':{return tab.Strings.LayoutPanePaddingButtonTitle}default:{return null}}},$4:function(ni,nj,nk){return spiff.DOMElements.div({className:'tab-LayoutIconValuePair'+(ss.isValue(nj)?'':(' '+'no-value')),key:nk},ni(nk),hy.$1(nj))},$3:function(ni,nj){return spiff.DOMElements.div({className:'tab-LayoutSpacingButtonContent',key:nj},ni)},renderMarginButton:function(){var ni=hy.$0(this.props.marginLeft,this.props.marginTop,this.props.marginRight,this.props.marginBottom,tab.Strings.LayoutPaneSpacingMarginButtonLabel);return spiff.DOMElements.div({key:'spacing-uber-button-margin',ref:this.$c},spiff.InteractAsButtonWrapperComponent.create({disabled:!this.props.isEnabled,handleAllTriggers:ss.mkdel(this,function(){this.$0('marginShowing')}),ariaLabel:ni,buttonContent:ss.mkdel(this,function(){return spiff.GenericDropdownButtonComponent.create({key:'margin-button-content',isDisabled:!this.props.isEnabled,testId:'tab-Margin-Button-Id',selectionDisplay:ss.mkdel(this,function(){return[this.$3([this.$4(hy.$2,this.props.marginLeft,'Left'),this.$4(hy.$2,this.props.marginTop,'Top'),this.$4(hy.$2,this.props.marginRight,'Right'),this.$4(hy.$2,this.props.marginBottom,'Bottom')],'margin-button')]})})})}))},renderBorderButton:function(){var ni;if(ss.isNullOrUndefined(this.props.border)||this.props.border.width===0||this.props.border.style==='bs-none'){ni=tab.Strings.DashboardSpacingNone}else{ni=spiff.DOMElements.div({style:{borderTopWidth:this.props.border.width+'px',borderTopStyle:tab.BorderDefinition.borderStyleToCss(this.props.border.style),borderTopColor:this.props.border.color}})}return spiff.DOMElements.div({key:'spacing-uber-button-border',ref:this.$b},spiff.InteractAsButtonWrapperComponent.create({disabled:!this.props.isEnabled,handleAllTriggers:ss.mkdel(this,function(){this.$0('borderShowing')}),ariaLabelledBy:'border-title',buttonContent:ss.mkdel(this,function(){return spiff.GenericDropdownButtonComponent.create({key:'border-button-dropdown',isDisabled:!this.props.isEnabled,selectionDisplay:ss.mkdel(this,function(){return[this.$3([spiff.DOMElements.div({key:'border-button-content',className:'tab-LayoutBorderButtonContent'},ni)],'border-button')]})})})}))},renderBackgroundColorButton:function(){var ni;var nj;var nk=null;var nl;var nm;if(ss.isNullOrUndefined(this.props.backgroundColor)||!this.props.hasFill){ni=spiff.DOMElements.div({},tab.Strings.DashboardSpacingNone);nm={backgroundColor:new tab.ColorModel(0,0,0,0)};nk=spiff.DOMElements.div({className:'tab-SwatchDiagonalLine'})}else{nm={backgroundColor:this.props.backgroundColor.toRgb()};var nn=tab.DoubleUtil.roundToInt(this.props.backgroundColor.get_a()*100).toString()+'%';ni=spiff.DOMElements.div({},nn)}nl=spiff.DOMElements.div({className:'tab-LayoutColorOuterCircle'});nj=spiff.DOMElements.div({className:'tab-LayoutColorSwatch',style:nm},nk,nl);return spiff.DOMElements.div({key:'spacing-uber-button-background-color',ref:this.$a},spiff.InteractAsButtonWrapperComponent.create({disabled:!this.props.isEnabled,handleAllTriggers:ss.mkdel(this,function(){this.$0('backgroundShowing')}),ariaLabelledBy:'background-title',buttonContent:ss.mkdel(this,function(){return spiff.GenericDropdownButtonComponent.create({key:'background-color-content',isDisabled:!this.props.isEnabled,disableArrowDown:true,selectionDisplay:ss.mkdel(this,function(){return this.$5(ni,nj)})})})}))},renderPaddingButton:function(){var ni=hy.$0(this.props.paddingLeft,this.props.paddingTop,this.props.paddingRight,this.props.paddingBottom,tab.Strings.LayoutPaneSpacingPaddingButtonLabel);return spiff.DOMElements.div({key:'spacing-uber-button-padding',ref:this.$d},spiff.InteractAsButtonWrapperComponent.create({disabled:!this.props.isEnabled,handleAllTriggers:ss.mkdel(this,function(){this.$0('paddingShowing')}),ariaLabel:ni,buttonContent:ss.mkdel(this,function(){return spiff.GenericDropdownButtonComponent.create({key:'padding-button-content',isDisabled:!this.props.isEnabled,testId:'tab-Padding-Button-Id',selectionDisplay:ss.mkdel(this,function(){return[this.$3([this.$4(hy.$3,this.props.paddingLeft,'Left'),this.$4(hy.$3,this.props.paddingTop,'Top'),this.$4(hy.$3,this.props.paddingRight,'Right'),this.$4(hy.$3,this.props.paddingBottom,'Bottom')],'padding-button')]})})})}))},$5:function(ni,nj){return[this.$3([spiff.DOMElements.div({key:'background-color-button-content',className:'tab-LayoutBackgroundColorButtonContent'},ni,nj)],'background-color-button')]},$6:function(){var ni;var nj={paddingTop:4,paddingBottom:21,paddingLeft:11,paddingRight:11,width:205};switch(this.state.showingState){case'marginShowing':{ni={leftValue:ss.coalesce(this.props.marginLeft,0),rightValue:ss.coalesce(this.props.marginRight,0),bottomValue:ss.coalesce(this.props.marginBottom,0),topValue:ss.coalesce(this.props.marginTop,0),allSidesTheSame:this.props.allMarginTheSame,isEnabled:this.props.isEnabled,changeAllSidesTheSame:this.props.setAllMarginTheSame,setNewValue:this.props.changeMargin,spacingUberType:'marginUber',maxValue:this.maxSpacingSize};return this.$7(this.$e,hE.create(ni),'LayoutMarginSpinners','margin-button-popup',nj)}case'paddingShowing':{ni={leftValue:ss.coalesce(this.props.paddingLeft,0),rightValue:ss.coalesce(this.props.paddingRight,0),topValue:ss.coalesce(this.props.paddingTop,0),bottomValue:ss.coalesce(this.props.paddingBottom,0),allSidesTheSame:this.props.allPaddingTheSame,isEnabled:this.props.isEnabled,changeAllSidesTheSame:this.props.setAllPaddingTheSame,setNewValue:this.props.changePadding,spacingUberType:'paddingUber',maxValue:this.maxSpacingSize};return this.$7(this.$f,hE.create(ni),'LayoutPaddingSpinners','padding-button-popup',nj)}case'borderShowing':{var nk={currentBorder:this.props.border,handleBorderChanged:this.props.changeBorder};return this.$7(this.$9,hr.create(nk),'LayoutBorderControl','border-button-popup',null)}case'backgroundShowing':{var nl={backgroundColor:this.props.backgroundColor,handleBackgroundChanged:this.props.changeBackgroundColor,hasBackground:this.props.hasFill};return this.$7(this.$8,hq.create(nl),'LayoutBackgroundControl','background-button-popup',null)}}return null},$0:function(ni){if(this.props.isEnabled){this.setState({showingState:ni});if(ni==='none'){this.props.commitImmediately()}}},$2:function(){this.$0('none')},$7:function(ni,nj,nk,nl,nm){var nn=React.createElement(SharedWidgets.DialogWidget,{anchorOrigin:{horizontal:'left',vertical:'bottom'},stackedOrigin:{horizontal:'left',vertical:'top'},anchorEl:ni,children:nj,handleGlassClick:ss.mkdel(this,this.$2),onCloseRequest:ss.mkdel(this,this.$2),shouldReturnFocusOnClose:true,isGlassTransparent:true,isModal:true,positioningBehavior:3,testId:nk,key:nl,type:2,title:this.$1(),dialogBodyStyle:nm,zIndex:988});return nn}},{$4:function(ni){return(ss.isValue(ni)?ni.toString():'—')},$1:function(ni){return spiff.DOMElements.div({className:'tab-LayoutSpacingButtonValue',title:ss.formatString('{0}',ni)},hy.$4(ni))},$2:function(ni){return spiff.DOMElements.div({className:'tab-LayoutMargin'+ni})},$3:function(ni){return spiff.DOMElements.div({className:'tab-LayoutPadding'+ni})},$0:function(ni,nj,nk,nl,nm){var nn=ss.coalesce(ni,0);var no=ss.coalesce(nj,0);var np=ss.coalesce(nk,0);var nq=ss.coalesce(nl,0);return nm(nn,no,np,nq)}});var hz=global.tab.LayoutPaneSpacingComponent$AriaId=ss.mkType(a,'tab.LayoutPaneSpacingComponent$AriaId',function(){},{getHashCode:function(){return 0},equals:function(ni){return ss.isInstanceOfType(ni,hz)}});var hA=global.tab.LayoutPaneSpacingViewModel=ss.mkType(a,'tab.LayoutPaneSpacingViewModel',function(ni,nj){this.$u=null;this.$t=null;this.$v=0;this.$C=null;this.$A=null;this.$B=null;this.$y=null;this.$x=null;this.$z=false;this.$w=1;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$v=nj;this.$u=ni;this.$t=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.disposables.add$1(this.$u.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$d)).addEventBinding(ss.mkdel(this,function(nk){nk.add_activeZoneChanged(ss.mkdel(this,this.$d));nk.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nk){nk.remove_activeZoneChanged(ss.mkdel(this,this.$d));nk.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));this.disposables.add$1(this.$t.newDisposableContext().addEventBinding(ss.mkdel(this,function(nk){nk.get_styledBoxModel().add_styleUpdated(ss.mkdel(this,this.$g))}),ss.mkdel(this,function(nk){nk.get_styledBoxModel().remove_styleUpdated(ss.mkdel(this,this.$g))})))},{$s:function(){return(ss.isValue(this.$t.get_model())?this.$t.get_model().get_styledBoxModel():null)},$p:function(){if(ss.isValue(this.$u.get_model())){return this.$u.get_model().get_sheetName()}return''},$o:function(){if(ss.isValue(this.$u.get_model())){return this.$u.get_model().get_activeZoneID()}return 0},$q:function(){return this.$y.get_hasColor()&&this.$y.get_hasStyle()&&this.$y.get_hasWidth()},$r:function(){return ss.isValue(this.$u.get_model())&&this.$u.get_model().get_isCurrentLayoutAutoGenerated()},$d:function(){var ni=null;if(ss.isValue(this.$u.get_model())){ni=this.$u.get_model().getZone(this.$u.get_model().get_activeZoneID())}this.$t.set_Model(ni);this.$g(true)},$g:function(ni){if(ss.isValue(this.$s())){this.$A=this.$s().get_marginDefinition();this.$B=this.$s().get_paddingDefinition();this.$y=this.$s().get_border();this.$x=tab.ColorModel.fromColorCode(this.$s().get_fillColor());this.$z=this.$s().get_hasFill()}if(ni){this.$w=(this.$z?this.$x.get_a():1)}this.$C=tab.MiscUtil.clearTimeout(this.$C);this.incrementProps()},createInitialProps:function(){return{changeMargin:ss.mkdel(this,this.$7),setAllMarginTheSame:ss.mkdel(this,this.$i),changePadding:ss.mkdel(this,this.$8),setAllPaddingTheSame:ss.mkdel(this,this.$j),changeBorder:ss.mkdel(this,this.$6),changeBackgroundColor:ss.mkdel(this,this.$5),commitImmediately:ss.mkdel(this,this.$b)}},createUpdatedProps:function(){if(ss.isValue(this.$s())){return{marginLeft:this.$A.get_leftValue(),marginRight:this.$A.get_rightValue(),marginBottom:this.$A.get_bottomValue(),marginTop:this.$A.get_topValue(),allMarginTheSame:this.$A.get_allSidesTheSame(),paddingLeft:this.$B.get_leftValue(),paddingRight:this.$B.get_rightValue(),paddingBottom:this.$B.get_bottomValue(),paddingTop:this.$B.get_topValue(),border:this.$y,allPaddingTheSame:this.$B.get_allSidesTheSame(),backgroundColor:(this.$z?this.$x:new tab.ColorModel(0,0,0,this.$w)),hasFill:this.$z,isEnabled:!this.$r()}}return{marginLeft:null,marginRight:null,marginBottom:null,marginTop:null,paddingLeft:null,paddingRight:null,paddingBottom:null,paddingTop:null,isEnabled:false,border:null,backgroundColor:null,hasFill:false,allMarginTheSame:false,allPaddingTheSame:false}},$a:function(){this.$C=tab.MiscUtil.clearTimeout(this.$C)},$h:function(ni){this.$C=window.setTimeout(ni,this.$v)},$6:function(ni){if(ss.isNullOrUndefined(this.$s())){return}if(!this.$q()){ni=this.$c(ni)}this.$y=ni;this.$e()},$c:function(ni){var nj=(ni.get_hasColor()?ni.color:tab.ColorModel.black.toRgb());var nk=(ni.get_hasWidth()?ni.width:1);var nl=(ni.get_hasStyle()?ni.style:'bs-solid');return new tab.BorderDefinition(nk,nl,nj,ni.side)},$5:function(ni,nj,nk){if(ss.isNullOrUndefined(this.$s())){return}this.$x=(nj?ni:tab.ColorModel.fromColorCode('rgba(0, 0, 0, 0)'));this.$z=nj;this.$w=ni.get_a();if(nk){this.$4()}this.incrementProps()},$4:function(){var ni=tab.ColorModel.fromColorCode(this.$s().get_fillColor()).toRgba();if(this.$z!==this.$s().get_hasFill()||!ss.referenceEquals(this.$x.toRgba(),ni)){this.$e()}},$8:function(ni,nj){this.$9(ni,nj,this.$B.get_allSidesTheSame(),this.$B);this.$f()},$7:function(ni,nj){this.$9(ni,nj,this.$A.get_allSidesTheSame(),this.$A);this.$f()},$9:function(ni,nj,nk,nl){if(ss.isNullOrUndefined(this.$s())){return}if(nk){nl.set_defaultValue(ni)}else{switch(nj){case 3:{nl.set_bottomValue(ni);break}case 0:{nl.set_leftValue(ni);break}case 1:{nl.set_rightValue(ni);break}case 2:{nl.set_topValue(ni);break}}}},$n:function(){var ni={padding:this.$B.get_defaultValue(),paddingBottom:this.$B.get_bottomValue(),paddingLeft:this.$B.get_leftValue(),paddingRight:this.$B.get_rightValue(),paddingTop:this.$B.get_topValue()};tab.DashboardZoneStyleCommands.modifyPadding(this.$o(),ni,this.$B.get_allSidesTheSame())},$m:function(){var ni={margin:this.$A.get_defaultValue(),marginBottom:this.$A.get_bottomValue(),marginLeft:this.$A.get_leftValue(),marginRight:this.$A.get_rightValue(),marginTop:this.$A.get_topValue()};tab.DashboardZoneStyleCommands.modifyMargins(this.$o(),ni,this.$A.get_allSidesTheSame())},$i:function(ni){this.$k(ni,this.$A)},$j:function(ni){this.$k(ni,this.$B)},$k:function(ni,nj){nj.set_allSidesTheSame(ni);if(ni){this.$e()}else{this.incrementProps()}},$b:function(){if(ss.isValue(this.$C)){this.$e()}},$f:function(){this.$a();this.$h(ss.mkdel(this,this.$l));this.incrementProps()},$e:function(){this.$a();this.$l();this.incrementProps()},$3:function(){var ni=(ss.isValue(this.$s())?this.$s().get_styledBoxPresModel():null);if(ss.isNullOrUndefined(ni)){return null}var nj=this.$A.mergeWithExisitingStyle(ni);nj=this.$B.mergeWithExisitingStyle(nj);var nk={fillColor:this.$x.toRgba255(),hasFill:this.$z};$.extend(nj,this.$y.get_styledBoxPresModel(),nk);return nj},$l:function(){var ni=this.$3();tab.DashboardZoneCommands.setZoneStyle(this.$o(),ni,this.$p())}});var hB=global.tab.LayoutPaneViewModel=ss.mkType(a,'tab.LayoutPaneViewModel',function(ni){this.$7=null;this.$8=false;this.$4=null;this.$6=null;this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$7=ni;this.$4=new ht(this.$7);this.$5=new hP(this.$7);this.$5.add_updateScrollHandlerVisibility(ss.mkdel(this,this.$3));var nj=new kB;nj.sectionKey='layout-tree-section';nj.minSize=45;nj.initialSizePercent=35;nj.sectionContentProvider=new(ss.makeGenericType(kC,[hF,Object,Object]))('layout-tree-section-content',this.$5);var nk=nj;var nl=new kB;nl.sectionKey='selected-item-section';nl.minSize=45;nl.initialSizePercent=65;nl.sectionContentProvider=new(ss.makeGenericType(kC,[lh,li,Object]))('selected-item-section-content',new lj(this.$7));var nm=nl;var nn=[];nn.push(nm);nn.push(nk);var no=nn;this.$6=new kz.$ctor1(no,this.$7);this.disposables.add$2([this.addChildViewModel(this.$6),this.addChildViewModel(this.$4),this.$6,this.$4]);this.$8=false},{get_title:function(){return tab.Strings.AuthLeftLayoutPaneLabel},get_id:function(){return'layout'},get_contentViewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[hB,hu,Object])},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthLayoutPane'},createUpdatedProps:function(){return{resizablePaneProps:this.$6.get_props(),layoutPaneArrangeProps:this.$4.get_props(),shouldRenderScrollHandlers:this.$8}},$3:function(ni){this.$8=ni;this.incrementProps()}});var hC=global.tab.LayoutPositionSpinnersComponent=ss.mkType(a,'tab.LayoutPositionSpinnersComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){var ni={testId:'x-stepper',label:tab.Strings.LayoutPaneXPositionSpinner,min:-9999,max:9999,onValueUpdated:this.props.changeX,disabled:this.props.disablePositionControls,pageDelta:10};var nj={testId:'y-stepper',label:tab.Strings.LayoutPaneYPositionSpinner,min:-9999,max:9999,onValueUpdated:this.props.changeY,disabled:this.props.disablePositionControls,pageDelta:10};if(!this.props.disablePositionControls||this.props.isZone){ni.start=this.props.x;nj.start=this.props.y}var nk=React.createElement(SharedWidgets.IntegerStepperWidget,ni);var nl=React.createElement(SharedWidgets.IntegerStepperWidget,nj);return spiff.DOMElements.div({},spiff.DOMElements.div({className:'tab-LayoutZoneGeometry'},spiff.DOMElements.div({className:'tab-LayoutXPositionSpinner',key:'x-layout-spinner','data-test-id':'tab-LayoutXPositionSpinner'},nk),spiff.DOMElements.div({className:'tab-LayoutYPositionSpinner',key:'y-layout-spinner','data-test-id':'tab-LayoutYPositionSpinner'},nl)))}},{create:function(ni){return React.createElement(hC,ni)}});var hD=global.tab.LayoutSizeSpinnersComponent=ss.mkType(a,'tab.LayoutSizeSpinnersComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){return spiff.DOMElements.div({},spiff.DOMElements.div({className:'tab-LayoutZoneGeometry'},spiff.DOMElements.div({className:'tab-LayoutWidthSpinnerSection',key:'width-layout-spinner','data-test-id':'tab-LayoutWidthSpinnerSection'},this.$3(),this.$1(this.props.showFixWidth)),spiff.DOMElements.div({className:'tab-LayoutHeightSpinnerSection',key:'height-layout-spinner','data-test-id':'tab-LayoutHeightSpinnerSection'},this.$2(),this.$1(this.props.showFixHeight))))},$3:function(){var ni={testId:'width-stepper',label:tab.Strings.LayoutPaneWSizeSpinner,min:1,max:9999,start:this.props.width,onValueUpdated:this.props.changeWidth,disabled:this.props.disableWidthControl,pageDelta:10};return React.createElement(SharedWidgets.IntegerStepperWidget,ni)},$2:function(){return React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'height-stepper',label:tab.Strings.LayoutPaneHSizeSpinner,min:1,max:9999,start:this.props.height,onValueUpdated:this.props.changeHeight,disabled:this.props.disableHeightControl,pageDelta:10})},$1:function(ni){if(ni){var nj=this.$0();var nk=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nl){this.props.fixDimension()}),buttonType:10,testId:'layout-fixed-size-button',children:spiff.DOMElements.div({className:nj}),hidden:!ni});return spiff.DOMElements.div({className:'layoutFixButton',key:'layout-fix-button','data-test-id':'layoutFixButton'},nk)}else{return null}},$0:function(){if(this.props.isFixedSize){return(this.props.showFixHeight?'fixHeightSelected':'fixWidthSelected')}else{return(this.props.showFixHeight?'fixHeightUnselected':'fixWidthUnselected')}}},{create:function(ni){return React.createElement(hD,ni)}});var hE=global.tab.LayoutSpacingSpinnersComponent=ss.mkType(a,'tab.LayoutSpacingSpinnersComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){return spiff.DOMElements.div({className:'tab-LayoutMarginSpinnersSection'},this.$1(),this.$4(2),this.$2(),this.$4(3))},$1:function(){return spiff.DOMElements.div({className:'tab-SpacingPopUp-AllSidesCheckbox'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.LayoutPaneSpacingAllSidesEqual,checked:this.props.allSidesTheSame,handleChange:this.props.changeAllSidesTheSame,testId:this.props.spacingUberType+'AllSidesCheckbox'}))},$2:function(){return spiff.DOMElements.div({className:'tab-LayoutSpinnerLeftRight'},this.$4(0),this.$3(),this.$4(1))},$3:function(){var ni=(this.props.allSidesTheSame?'-locked':'-unlocked');var nj=spiff.DOMElements.div({className:'tab-SpacingPopupLockIcon-'+this.props.spacingUberType+ni});var nk=(this.props.allSidesTheSame?tab.Strings.LayoutPaneSpacingAllSidesEqualLocked:tab.Strings.LayoutPaneSpacingAllSidesEqualUnlocked);return React.createElement(spiff.InteractAsButtonWrapperComponent,{buttonContent:function(){return nj},handleAllTriggers:ss.mkdel(this,function(){this.props.changeAllSidesTheSame(!this.props.allSidesTheSame)}),key:'lock-button',ariaLabel:nk})},$4:function(ni){var nj=this.$0(ni);var nk=ss.mkdel(this,function(nn){this.props.setNewValue(nn,ni)});var nl=this.$5(nj.value,nj.label,nj.classPrefix+this.props.spacingUberType,nk);var nm={className:'tab-LayoutSpinner',key:nj.keyPrefix+this.props.spacingUberType,'data-test-id':nj.classPrefix+this.props.spacingUberType};return spiff.DOMElements.div(nm,nl)},$0:function(ni){var nj=null;switch(ni){case 2:{nj={value:this.props.topValue,label:tab.Strings.LayoutPaneSpacingTop,keyPrefix:'top-layout-spinner-',classPrefix:'tab-LayoutTopSpinner'};break}case 0:{nj={value:this.props.leftValue,label:tab.Strings.LayoutPaneSpacingLeft,keyPrefix:'left-layout-spinner-',classPrefix:'tab-LayoutLeftSpinner'};break}case 3:{nj={value:this.props.bottomValue,label:tab.Strings.LayoutPaneSpacingBottom,keyPrefix:'bottom-layout-spinner-',classPrefix:'tab-LayoutBottomSpinner'};break}case 1:{nj={value:this.props.rightValue,label:tab.Strings.LayoutPaneSpacingRight,keyPrefix:'right-layout-spinner-',classPrefix:'tab-LayoutRightSpinner'};break}}return nj},$5:function(ni,nj,nk,nl){var nm=ss.coalesce(ni,0);return React.createElement(SharedWidgets.IntegerStepperWidget,{testId:nk,start:nm,label:nj,min:0,max:this.props.maxValue,disabled:!this.props.isEnabled,onValueUpdated:nl})}},{create:function(ni){return React.createElement(hE,ni)}});var hF=global.tab.LayoutTreeComponent=ss.mkType(a,'tab.LayoutTreeComponent',function(ni,nj){this.$f=null;React.Component.call(this,ni,nj);this.$f={renderSingleNode:ss.mkdel(this,this.$b),renderToggle:ss.mkdel(this,this.$c),renderReorderAllZonesTarget:ss.mkdel(this,this.$a)}},{render:function(){var ni=new EventUtils.EventHandleSpec;ni.firstTouch=ss.mkdel(this,this.$7);return EventUtils.EventForwarder.div(ni,{className:['tab-LayoutTreeSection',this.$e()].join(' '),key:'layout-tree-section'},this.renderTitleContainer(),this.renderScrollingContent())},renderTitleContainer:function(){var ni=spiff.DOMElements.div({className:'tab-LayoutTreeTitle',key:'layout-tree-title'},this.props.layoutTreeTitle);var nj=$.Deferred();window.setTimeout(ss.mkdel(this,function(){nj.resolve(spiff.DOMElements.div({className:'tab-LayoutTreeSubtitleTooltip'},this.props.layoutTreeSubtitle))}),1000);var nk=React.createElement(SharedWidgets.Tooltip,{getContent:function(){return nj},position:'Bottom',onlyShowWhenClipped:true},spiff.DOMElements.div({className:'tab-LayoutTreeSubtitle',key:'layout-tree-subtitle'},this.props.layoutTreeSubtitle));return spiff.DOMElements.div({className:'tab-LayoutTreeTitleContainer',key:'layout-tree-title-container'},ni,nk)},renderScrollingContent:function(){var ni=[];var nj='LayoutTreeReorderTargetComponent[zoneId: {0}]';if(this.$1()){var nk={zoneId:2147483647,key:ss.formatString.apply(null,[nj].concat(null)),parentId:this.props.moveZoneWithinLayoutTreeProps.get_getParentId()(null),insertBeforeId:this.props.moveZoneWithinLayoutTreeProps.get_getNextSibling()(null),autoExpand:null,parentZoneIsDescendant:this.props.parentZoneIsDescendant,rootTiledZoneId:this.props.rootTiledZoneId,className:'dummy-drop-target',moveZoneInLayoutTree:this.props.moveZoneInLayoutTree};ni.push(hL.create(nk))}else if(this.$0()){ni.push(hM.create(this.$3(0,null)))}for(var nl=0;nl<this.props.rootNodes.length;nl++){var nm=this.props.rootNodes[nl];var nn=this.$5(nm);ni.push(mn.create(tab.LayoutTreeItem).call(null,nn))}var no=['tab-LayoutTree'];if(this.props.disableFeedback){no.push('feedback-disabled')}if(this.props.reorderDragInProgress){no.push('reorder-in-progress')}return spiff.DOMElements.div({className:no.join(' '),onKeyDown:ss.mkdel(this,this.$8),tabIndex:-1,key:'scrolling-layout-tree'},ni)},$b:function(ni){var nj=this.$2(ni,ni.get_zoneID()===this.props.selectedZone&&!this.props.shouldHideSelectionOnDrag);if(this.$1()){return hG.create({renderContent:function(){return hI.create(nj)},layoutTreeItem:ni,dragInstanceFactory:this.props.dragInstanceFactory,reshowSelectionAfterDrag:this.props.reshowSelectionAfterDrag,hideSelectionOnDrag:this.props.hideSelectionOnDrag})}else if(!this.$0()||!ss.keyExists(this.props.floatingOrderMap,ni.get_zoneID())||this.props.inlineEditProps.currentEditingItem===ni.get_zoneID()||this.props.currentLayoutIsAutoGenerated){return hI.create(nj)}return hG.create({renderContent:function(){return hI.create(nj)},floatingOrder:this.props.floatingOrderMap[ni.get_zoneID()],layoutTreeItem:ni,dragInstanceFactory:this.props.dragInstanceFactory})},$a:function(ni){if(this.$1()){var nj=ss.mkdel(this,function(){this.props.toggleExpand(ni.get_zoneID(),true)});var nk={autoExpand:nj,item:ni,getParentId:this.props.moveZoneWithinLayoutTreeProps.get_getParentId(),getNextSibling:this.props.moveZoneWithinLayoutTreeProps.get_getNextSibling(),getItemLevel:this.props.getItemLevel,parentZoneIsDescendant:this.props.parentZoneIsDescendant,rootTiledZoneId:this.props.rootTiledZoneId,moveZoneInLayoutTree:this.props.moveZoneInLayoutTree};return hJ.create(nk)}else{return null}},$7:function(ni){if(!ss.staticEquals(this.props.clearSelectedZone,null)){var nj=$(ni.target);var nk=nj.hasClass('tab-tree-component-node')||nj.parents('.'+'tab-tree-component-node').length>0;if(!nk&&!this.props.currentLayoutIsAutoGenerated){this.props.clearSelectedZone()}}},$d:function(ni){this.props.findPrevOrNextItemAndSelect(ni,false)},$6:function(ni){this.props.findPrevOrNextItemAndSelect(ni,true)},$8:function(ni){switch(ni.which){case 38:{this.$d(this.props.selectedZone);break}case 40:{this.$6(this.props.selectedZone);break}case 37:{this.props.toggleExpand(this.props.selectedZone,false);break}case 39:{this.props.toggleExpand(this.props.selectedZone,true);break}default:{return}}},$0:function(){if(ss.isValue(this.props.floatingOrderMap)){return ss.getKeyCount(this.props.floatingOrderMap)>1}return false},$1:function(){return!this.props.currentLayoutIsAutoGenerated},$c:function(ni,nj){return hO.create(this.$4(ni,nj))},$5:function(ni){return $.extend({rootNode:ni,key:'Tree'+ni.get_item().get_itemKey()},this.$f)},$2:function(ni,nj){var nk=ss.mkdel(this,function(){this.props.selectZone(ni)});var nl=ss.mkdel(this,function(no){this.props.showContextMenu(ni,no)});var nm=ss.mkdel(this,function(no,np){this.props.inlineEditProps.setZoneCustomFriendlyName(no,np)});var nn=ss.mkdel(this,function(){this.props.inlineEditProps.saveEditingItem(ni.get_zoneID())});return{key:ss.formatString('LayoutTreeItemComponent[itemKey: {0}]',ni.get_itemKey()),layoutTreeItem:ni,selected:nj,currentLayoutIsAutoGenerated:this.props.currentLayoutIsAutoGenerated,selectZone:nk,showContextMenu:nl,toggleExpand:this.props.toggleExpand,clearSelectedZone:this.props.clearSelectedZone,layoutTreeItemInlineEditProps:{isEditing:this.$9(ni),saveEditingItem:nn,setZoneCustomFriendlyName:nm,exitInlineEditingMode:this.props.inlineEditProps.exitInlineEditingMode},reorderInProgress:this.props.reorderDragInProgress}},$4:function(ni,nj){return{layoutTreeItem:ni,expanded:nj,toggleExpand:this.props.toggleExpand,key:ss.formatString('LayoutTreeToggleComponent[itemKey: {0}]',ni.get_itemKey())}},$9:function(ni){return this.props.inlineEditProps.currentEditingItem===ni.get_zoneID()},$e:function(){return(this.props.currentLayoutIsAutoGenerated?'disabled':'')},$3:function(ni,nj){return{modifyFloatingOrder:this.props.modifyFloatingOrder,floatingOrder:ni,renderContent:nj,key:ss.formatString('LayoutTreeReorderTargetComponent[floatOrder: {0}]',ni)}}});var hG=global.tab.LayoutTreeDragSourceComponent=ss.mkType(a,'tab.LayoutTreeDragSourceComponent',function(ni,nj){this.$1=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.$1=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}))},{render:function(){return spiff.DOMElements.div({className:'layout-tree-drag-source',ref:this.$1,key:'DragSource'+this.props.layoutTreeItem.get_itemKey(),'data-tb-test-id':'layout-tree-drag-source'+this.props.layoutTreeItem.get_name()},this.$0())},$0:function(){if(!ss.staticEquals(this.props.renderContent,null)){return this.props.renderContent()}return null},startDrag:function(ni){if(!ss.staticEquals(this.props.dragInstanceFactory,null)){if(!ss.isNullOrUndefined(this.props.hideSelectionOnDrag)){this.props.hideSelectionOnDrag()}return this.props.dragInstanceFactory(this.props.layoutTreeItem,this.props.floatingOrder,this.props.reshowSelectionAfterDrag)}return null},acceptsDragType:function(){return 1}},{create:function(ni){return React.createElement(hG,ni)}});var hH=global.tab.LayoutTreeFloatingReorderDragInstance=ss.mkType(a,'tab.LayoutTreeFloatingReorderDragInstance',function(ni,nj,nk,nl){this.floatingOrder=0;this.zoneId=0;this.$2$1=null;EventUtils.DragInstance.call(this,ni,nj);this.floatingOrder=nk;this.zoneId=ni.get_zoneID();this.set_reshowSelectionAction(nl)},{get_dragged:function(){return this.get_payload()},get_reshowSelectionAction:function(){return this.$2$1},set_reshowSelectionAction:function(ni){this.$2$1=ni},dropToNowhereAction:function(){if(ss.isValue(this.get_reshowSelectionAction())){this.get_reshowSelectionAction()()}},cancelDrag:function(){this.$0('current-target');this.$0('tab-ParentContainerHighlight')},$0:function(ni){var nj=$('.'+ni);if(ss.isValue(nj)){nj.removeClass(ni)}}});var hI=global.tab.LayoutTreeItemComponent=ss.mkType(a,'tab.LayoutTreeItemComponent',function(ni){spiff.PureRenderComponent.call(this,ni);this.state={customFriendlyName:this.props.layoutTreeItem.get_name()}},{render:function(){var ni=new EventUtils.EventHandleSpec;ni.tap=ss.mkdel(this,this.$a);ni.rightClick=ss.mkdel(this,this.$0);var nj=ni;var nk=(this.props.selected?'selected':'');var nl=spiff.DOMElements.div({className:'tab-LayoutTreeNodeContent'+' '+this.props.layoutTreeItem.get_zoneID().toString(),key:this.props.layoutTreeItem.get_zoneID().toString(),ref:'tab-LayoutTreeNodeRef'},this.$e(),this.$f());return EventUtils.EventForwarder.div(nj,this.$c(nk),nl)},$c:function(ni){return{className:'tab-LayoutTreeNode'+' '+ni,ref:'tab-LayoutTreeNodeRef',title:this.props.layoutTreeItem.get_name(),tabIndex:0,onKeyPress:ss.mkdel(this,this.$1),'data-test-id':'tab-LayoutTreeNode'}},$1:function(ni){if(ni.which===13&&(ni.metaKey||ni.ctrlKey)){this.props.layoutTreeItemInlineEditProps.saveEditingItem()}},$e:function(){var ni=this.$4();var nj=['tab-LayoutTreeNodeIcon',ni,this.$i()].join(' ');return spiff.DOMElements.div.apply(null,[{key:ss.formatString('LayoutTreeNodeIcon[itemKey: {0}]',this.props.layoutTreeItem.get_itemKey()),className:nj}].concat(null))},$4:function(){var ni=this.props.layoutTreeItem;var nj=ni.get_zoneType();var nk=nj.toString();if(nj==='dashboard-object'){if(ni.get_dashboardObjectType()==='button'){nk=ni.get_iconData().toString()}else{nk=ni.get_dashboardObjectType().toString()}}nk=this.$5(nk);return nk},$5:function(ni){if(this.props.layoutTreeItem.get_zoneType()==='layout-flow'){if(this.props.layoutTreeItem.get_isHorizontal()){ni='horizontal'}else{ni='vertical'}}return ni},$f:function(){return this.$d()},$a:function(ni){if(!ss.staticEquals(this.props.selectZone,null)){this.props.selectZone()}},$i:function(){return(this.props.currentLayoutIsAutoGenerated?'disabled':'')},$0:function(ni){if(!ss.staticEquals(this.props.showContextMenu,null)){var nj=ReactDOM.findDOMNode(this.refs['tab-LayoutTreeNodeRef']);this.props.showContextMenu(new spiff.ShowMenuOptions($(nj),false))}},$g:function(ni,nj){if(ss.isValue(ni)&&!!(ss.isValue(nj)&!this.props.reorderInProgress)){window.setTimeout(function(){var nk=ni.getBoundingClientRect();var nl=nj.getBoundingClientRect();var nm=nk.x<nl.x||nk.y<nl.y||nk.x>nl.x+nl.width||nk.y+nk.height>nl.y+nl.height;if(nm){ni.scrollIntoView()}},0)}},componentDidUpdate:function(){this.$2()},componentDidMount:function(){this.$2()},$2:function(){if(this.props.selected){var ni=ReactDOM.findDOMNode(this.refs['tab-LayoutTreeNodeRef']);var nj=$(ni).closest('.'+'layout-tree-section-content').get(0);this.$g(ni,nj)}},$3:function(){return ss.replaceAllString(this.props.layoutTreeItem.get_name(),' ',' ')},$d:function(){if(ss.isValue(this.props.layoutTreeItemInlineEditProps)){if(this.props.layoutTreeItemInlineEditProps.isEditing){return React.createElement(SharedWidgets.TextFieldWidget,{kind:'outline',className:'tab-EditableLayoutTreeNodeName',key:ss.formatString('LayoutTreeNodeName[itemKey: {0}]',this.props.layoutTreeItem.get_itemKey()),testId:'item-inline-input',autoFocus:true,value:this.state.customFriendlyName,onBlur:ss.mkdel(this,this.$7),onKeyUp:ss.mkdel(this,this.$8),onKeyDown:ss.mkdel(this,this.$6),onChange:ss.mkdel(this,this.$9),selectOnFocus:true})}}return spiff.DOMElements.div({key:ss.formatString('LayoutTreeNodeName[itemKey: {0}]',this.props.layoutTreeItem.get_itemKey()),className:'tab-LayoutTreeNodeName',autoFocus:true,onDoubleClick:ss.mkdel(this,this.$b)},this.state.customFriendlyName)},$b:function(ni){this.props.layoutTreeItemInlineEditProps.saveEditingItem()},$9:function(ni){var nj=ni.target;this.setState({customFriendlyName:nj.value})},$7:function(ni){var nj=ni.target;this.$h();var nk=$(ni.currentTarget);var nl=nk.hasClass('tab-tree-component-node')||nk.parents('.'+'tab-tree-component-node').length>0;if(!nl){this.props.clearSelectedZone()}},$6:function(ni){if(ni.which===13){this.$h()}else if(ni.which===40||ni.which===38){ni.preventDefault();ni.stopPropagation()}},$8:function(ni){if(ni.which===27){this.setState({customFriendlyName:this.props.layoutTreeItem.get_name()});this.props.layoutTreeItemInlineEditProps.exitInlineEditingMode()}},$h:function(){if(ss.referenceEquals(this.state.customFriendlyName,this.props.layoutTreeItem.get_name())){this.props.layoutTreeItemInlineEditProps.exitInlineEditingMode()}else if(tab.MiscUtil.isNullOrEmpty$1(this.state.customFriendlyName)){this.setState({customFriendlyName:this.props.layoutTreeItem.get_name()});this.props.layoutTreeItemInlineEditProps.exitInlineEditingMode()}else{this.props.layoutTreeItemInlineEditProps.setZoneCustomFriendlyName(tsConfig.current_sheet_name,this.state.customFriendlyName)}}},{create:function(ni){return React.createElement(hI,ni)}});var hJ=global.tab.LayoutTreeMultipleReorderTargetsComponent=ss.mkType(a,'tab.LayoutTreeMultipleReorderTargetsComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){var ni=this.$6();return spiff.DOMElements.div({className:'multiple-reorder-targets'},ni)},$6:function(){var ni=[];var nj=this.props.item;if(this.$3(nj)&&nj.get_children().length>0){ni.push(hL.create(this.$1(nj,'no-indicator-target')));ni.push(hL.create(this.$1(nj,'')));return ni}else if(this.$3(nj)&&nj.get_children().length===0){if(nj.get_zoneID()===this.props.rootTiledZoneId){ni.push(hL.create(this.$1(nj,'no-indicator-target')))}ni.push(hL.create(this.$1(nj,'')))}while(nj.get_parentZoneId()!==2147483647){ni.push(hL.create(this.$2(nj,'')));if(!this.$5(nj)){break}if(nj.get_parentZoneId()===this.props.rootTiledZoneId){var nk=hL.create(this.$2(nj,'no-indicator-target'));ni.push(nk)}nj=nj.parent}if(nj.get_parentZoneId()===2147483647&&nj.get_zoneID()!==this.props.rootTiledZoneId){ni.push(hL.create(this.$2(nj,'')))}if(nj.get_zoneID()!==this.props.rootTiledZoneId){var nl=hL.create(this.$2(nj,'no-indicator-target'));ni.push(nl)}ni.reverse();return ni},$3:function(ni){return ni.get_zoneType()==='layout-flow'||ni.get_zoneType()==='layout-basic'},$2:function(ni,nj){return this.$0(ni.get_zoneID(),this.props.getParentId(ni),this.props.getNextSibling(ni),nj)},$1:function(ni,nj){if(ni.get_children().length===0){return this.$0(ni.get_zoneID(),ni.get_zoneID(),2147483647,nj)}return this.$0(ni.get_zoneID(),ni.get_zoneID(),ni.get_children()[0].get_zoneID(),nj)},$5:function(ni){if(ss.isValue(ni.parent)){var nj=ni.parent.get_children();if(nj.length>0){return ss.equals(ni,nj[nj.length-1])}}return false},$0:function(ni,nj,nk,nl){var nm='LayoutTreeReorderTargetComponent[zoneId: {0}] [parentId: {0}] [insertBeforeId: {0}][className: {0}]';return{key:ss.formatString(nm,ni,nj,nk,nl),zoneId:ni,parentId:nj,insertBeforeId:nk,autoExpand:this.props.autoExpand,getItemLevel:((nl==='')?this.$4(ni,nj):0),parentZoneIsDescendant:this.props.parentZoneIsDescendant,rootTiledZoneId:this.props.rootTiledZoneId,className:nl,moveZoneInLayoutTree:this.props.moveZoneInLayoutTree}},$4:function(ni,nj){if(ni===nj){return this.props.getItemLevel(ni)+1}return this.props.getItemLevel(ni)}},{create:function(ni){return React.createElement(hJ,ni)}});var hK=global.tab.LayoutTreeNode=ss.mkType(a,'tab.LayoutTreeNode',function(ni,nj,nk){this.$2=null;this.$1$1=null;this.$1$2=null;this.$0(ni);this.$1(nj);this.$2=nk},{get_item:function(){return this.$1$1},$0:function(ni){this.$1$1=ni},get_children:function(){return this.$1$2},$1:function(ni){this.$1$2=ni},get_expanded:function(){if(ss.isValue(this.$2.get_model())){return this.$2.get_model().isItemExpanded(this.get_item().get_zoneID())}return false},get_key:function(){return this.get_item().get_itemKey()}});var hL=global.tab.LayoutTreeReorderAllZonesTargetComponent=ss.mkType(a,'tab.LayoutTreeReorderAllZonesTargetComponent',function(ni,nj){this.$5=null;this.$6=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.state={currentTarget:false};this.$5=spiff.ReactRefs.attachDropTarget(ss.mkdel(this,function(){return this}))},{get_feedbackType:function(){return'dropfeedbackuponentry'},render:function(){var ni=this.$1();var nj=((this.props.zoneId===2147483647)?this.props.className:ss.formatString('parent-id-{0} insert-id-{1}',this.props.parentId,this.props.insertBeforeId));var nk=['layout-tree-reorder-target-all-zones'];nk.push(this.props.className);if(this.state.currentTarget&&!this.$3()){nk.push('current-target')}return spiff.DOMElements.div({className:nk.join(' '),key:'zoneId-'+this.props.zoneId+', parentId-'+this.props.parentId+', insertId-'+this.props.insertBeforeId,ref:this.$5,'data-tb-test-id':'layout-tree-reorder-target-all-zones'+nj,style:{width:'calc(100% - '+ni+'px)'}})},$1:function(){return this.props.getItemLevel*20},$3:function(){var ni=2147483647;return this.props.zoneId!==ni&&this.props.zoneId===this.props.parentId&&this.props.insertBeforeId===ni},$0:function(){this.$6=tab.MiscUtil.clearTimeout(this.$6)},dragOver:function(ni){if(ss.isInstanceOfType(ni,hH)){var nj=ni;this.$6=window.setTimeout(ss.mkdel(this,function(){if(!ss.staticEquals(this.props.autoExpand,null)&&nj.zoneId!==this.props.zoneId){this.props.autoExpand()}}),400);if(this.$4(ni)){this.shouldHighlightParent(true);this.setState({currentTarget:true});return this}}this.setState({currentTarget:false});return null},dragExit:function(ni){this.$0();var nj=ni;this.shouldHighlightParent(false);this.setState({currentTarget:false})},acceptDrop:function(ni){if(ss.isInstanceOfType(ni,hH)){if(this.$4(ni)){var nj=ni;this.props.moveZoneInLayoutTree(nj.zoneId,this.props.parentId,this.props.insertBeforeId)}}this.shouldHighlightParent(false);this.setState({currentTarget:false});return $.Deferred().resolve(true)},getDropTarget:function(ni){return this},getDropCursor:function(ni){return(this.$2(ni)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},shouldHighlightParent:function(ni){var nj=$('.tab-LayoutTreeNodeContent.'+this.props.parentId);if(ss.isValue(nj)){if(ni){nj.addClass('tab-ParentContainerHighlight')}else{nj.removeClass('tab-ParentContainerHighlight')}}},$2:function(ni){var nj=ni;var nk=nj.get_dragged();return nk.get_zoneID()!==this.props.rootTiledZoneId&&!this.props.parentZoneIsDescendant(nk,this.props.parentId)},$4:function(ni){var nj=ni;var nk=nj.get_dragged();return nj.zoneId!==this.props.insertBeforeId&&nj.zoneId!==this.props.zoneId&&this.$2(ni)}},{create:function(ni){return React.createElement(hL,ni)}});var hM=global.tab.LayoutTreeReorderTargetComponent=ss.mkType(a,'tab.LayoutTreeReorderTargetComponent',function(ni,nj){this.$3=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.state={currentTarget:false};this.$3=spiff.ReactRefs.attachDropTarget(ss.mkdel(this,function(){return this}))},{get_feedbackType:function(){return'dropfeedbackuponentry'},render:function(){return spiff.DOMElements.div({className:'layout-tree-reorder-target-container'},spiff.DOMElements.div({className:'layout-tree-reorder-target'+' '+ss.formatString('float-order-{0}',this.props.floatingOrder),ref:this.$3}),this.$1(),this.$2(this.state.currentTarget))},$2:function(ni){var nj=['layout-tree-reorder-target-indicator'];if(ni){nj.push('current-target')}return spiff.DOMElements.div({key:'indicator',className:nj.join(' ')})},$1:function(){if(!ss.staticEquals(this.props.renderContent,null)){return this.props.renderContent()}return null},dragOver:function(ni){if(ss.isInstanceOfType(ni,hH)){var nj=ni;var nk=this.$0(nj);if(nk!==0){this.setState({currentTarget:true});return this}}this.setState({currentTarget:false});return null},dragExit:function(ni){this.setState({currentTarget:false})},acceptDrop:function(ni){if(ss.isInstanceOfType(ni,hH)){var nj=ni;var nk=this.$0(nj);if(nk!==0&&!ss.staticEquals(this.props.modifyFloatingOrder,null)){this.props.modifyFloatingOrder(nj.get_dragged().get_zoneID(),nk)}}this.setState({currentTarget:false});return $.Deferred().resolve(true)},$0:function(ni){var nj=ni.floatingOrder-this.props.floatingOrder;if(nj>0){nj=nj-1}return nj},getDropTarget:function(ni){return this},getDropCursor:function(ni){return spiff.CustomCursor.move}},{create:function(ni){return React.createElement(hM,ni)}});var hN=global.tab.LayoutTreeScrollHandler=ss.mkType(a,'tab.LayoutTreeScrollHandler',function(ni,nj){this.$5=800;this.$4=false;this.$3=null;this.$6=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.$3=spiff.ReactRefs.attachDropTarget(ss.mkdel(this,function(){return this}));this.$4=false},{get_feedbackType:function(){return'dropfeedbackuponentry'},render:function(){if(this.props.sectionContentClass==='layout-tree-section-content'&&this.props.shouldRenderScrollHandlers){var ni={};if(this.props.heightPercent>0){ni.height=this.props.heightPercent+'%'}return spiff.DOMElements.div({className:'layoutTreeScrollHandler'+' '+this.$2(),style:ni,ref:this.$3})}return null},dragOver:function(ni){if(!this.$1(ni)){return null}if(this.$4){return this}this.$4=true;if(!ss.staticEquals(this.props.onHover,null)){this.props.onHover()}if(!ss.isValue(this.$6)){this.$6=tab.WindowHelper.setInterval(this.props.onHover,this.$5)}return this},dragExit:function(ni){this.$4=false;this.$0(ni)},acceptDrop:function(ni){this.$0(ni);return $.Deferred().resolve(true)},getDropTarget:function(ni){return this},getDropCursor:function(ni){return(this.$1(ni)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},$1:function(ni){var nj=ss.safeCast(ni,hH);return ss.isValue(nj)},$0:function(ni){if(!this.$1(ni)){return}this.$6=tab.MiscUtil.clearInterval(this.$6);$('.'+'layout-tree-section-content').stop()},$2:function(){var ni='';switch(this.props.direction){case 0:{ni='scrollUp';break}case 1:{ni='scrollDown';break}case 2:{ni='scrollLeft';break}case 3:{ni='scrollRight';break}}return ni}},{create:function(ni){return React.createElement(hN,ni)}});var hO=global.tab.LayoutTreeToggleComponent=ss.mkType(a,'tab.LayoutTreeToggleComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){var ni=new EventUtils.EventHandleSpec;ni.tap=ss.mkdel(this,this.handleTap);var nj=ni;var nk=(this.props.expanded?'expanded':'collapsed');var nl=ss.coalesce(this.props.layoutTreeItem.get_name(),'');return EventUtils.EventForwarder.div(nj,{key:'expandIcon',className:'tab-LayoutTreeExpandButton'+' '+nk,'data-tb-test-id':'tab-LayoutTreeExpandButton'+nl})},handleTap:function(ni){if(!ss.staticEquals(this.props.toggleExpand,null)){this.props.toggleExpand(this.props.layoutTreeItem.get_zoneID(),null)}}},{create:function(ni){return React.createElement(hO,ni)}});var hP=global.tab.LayoutTreeViewModel=ss.mkType(a,'tab.LayoutTreeViewModel',function(ni){this.$r=null;this.$t=null;this.$w=null;this.$u=null;this.$s=false;this.$q=null;this.$v=false;this.$3$1=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$r=ni;this.$t=this.$r.createChildModelHolder(tab.LayoutTreeModel).call(this.$r,function(nj){return nj.layoutTreeModel});this.$u=[];this.$w=null;this.$s=false;this.$v=false;EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$c));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$b));this.disposables.add$1(this.$t);this.disposables.add$1(this.$r.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$o)).addModelChangedHandler(ss.mkdel(this,this.$e)).addEventBinding(ss.mkdel(this,function(nj){nj.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nj.add_activeZoneChanged(ss.mkdel(this,this.$o));nj.add_dashboardNameChanged(ss.mkdel(this,this.$e));nj.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){nj.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nj.remove_activeZoneChanged(ss.mkdel(this,this.$o));nj.remove_dashboardNameChanged(ss.mkdel(this,this.$e));nj.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));this.disposables.add$1(this.$t.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$i)).addEventBinding(ss.mkdel(this,function(nj){nj.add_layoutTreeUpdated(ss.mkdel(this,this.$i))}),ss.mkdel(this,function(nj){nj.remove_layoutTreeUpdated(ss.mkdel(this,this.$i))})));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$c));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$b))}))},{add_updateScrollHandlerVisibility:function(ni){this.$3$1=ss.delegateCombine(this.$3$1,ni)},remove_updateScrollHandlerVisibility:function(ni){this.$3$1=ss.delegateRemove(this.$3$1,ni)},$e:function(){this.$q='';var ni=this.$r.get_model();if(ss.isValue(ni)&&ni.get_isDashboard()){this.$q=ni.get_sheetName()}this.incrementProps()},createInitialProps:function(){return{modifyFloatingOrder:ss.mkdel(this,this.$d),dragInstanceFactory:hP.$0,toggleExpand:ss.mkdel(this,this.$m),selectZone:ss.mkdel(this,this.selectZone),showContextMenu:ss.mkdel(this,this.showContextMenu),findPrevOrNextItemAndSelect:ss.mkdel(this,this.findPrevOrNextItemAndSelect),key:'layout-tree',clearSelectedZone:ss.mkdel(this,this.$4),moveZoneWithinLayoutTreeProps:new iI(ss.mkdel(this,this.$a),ss.mkdel(this,this.$9)),currentLayoutIsAutoGenerated:this.$p(),getItemLevel:ss.mkdel(this,this.$7),parentZoneIsDescendant:ss.mkdel(this,this.$h),shouldHideSelectionOnDrag:false,hideSelectionOnDrag:ss.mkdel(this,this.$f),reshowSelectionAfterDrag:ss.mkdel(this,this.$j),moveZoneInLayoutTree:ss.mkdel(this,this.moveZoneInLayoutTree)}},createUpdatedProps:function(){var ni=false;var nj=0;var nk=null;if(ss.isValue(this.$r.get_model())){ni=this.$r.get_model().get_currentDeviceLayout()!=='default'||this.$p();nj=this.$r.get_model().get_activeZoneID()}if(ss.isValue(this.$t.get_model())){nk=this.$t.get_model().floatingOrderMap}return{disableFeedback:ni,reorderDragInProgress:this.$s,selectedZone:nj,rootNodes:this.$u,rootTiledZoneId:this.getRootTiledZoneId(),floatingOrderMap:nk,layoutTreeTitle:tab.Strings.LayoutTreeSectionTitle,layoutTreeSubtitle:this.$q,inlineEditProps:{currentEditingItem:this.$6(),saveEditingItem:ss.mkdel(this,this.$k),setZoneCustomFriendlyName:ss.mkdel(this,this.$l),exitInlineEditingMode:ss.mkdel(this,this.$5)},moveZoneWithinLayoutTreeProps:new iI(ss.mkdel(this,this.$a),ss.mkdel(this,this.$9)),currentLayoutIsAutoGenerated:this.$p(),getItemLevel:ss.mkdel(this,this.$7),parentZoneIsDescendant:ss.mkdel(this,this.$h),shouldHideSelectionOnDrag:this.$v,hideSelectionOnDrag:ss.mkdel(this,this.$f),reshowSelectionAfterDrag:ss.mkdel(this,this.$j),moveZoneInLayoutTree:ss.mkdel(this,this.moveZoneInLayoutTree)}},$i:function(){if(ss.isValue(this.$t.get_model())){this.$u=this.$t.get_model().rootNodes.map(ss.mkdel(this,this.$n));this.$w=this.$t.get_model().get_zoneCommonList()}this.incrementProps()},$7:function(ni){if(ss.isValue(this.$t.get_model())&&ni!==2147483647){return this.$t.get_model().getItemLevel(ni)}return 0},$a:function(ni){if(ss.isNullOrUndefined(ni)){return 2147483647}return ni.get_parentZoneId()},getRootTiledZoneId:function(){for(var ni=0;ni<this.$u.length;ni++){var nj=this.$u[ni];if(!nj.get_item().get_isFloating()){return nj.get_item().get_zoneID()}}return 2147483647},$9:function(ni){if(ss.isNullOrUndefined(ni)){if(ss.isNullOrUndefined(this.$t.get_model())||tab.MiscUtil.isNullOrEmpty$4(this.$t.get_model().rootNodes)){return 2147483647}return this.$t.get_model().rootNodes[0].get_zoneID()}else{var nj=this.$8(ni);return(ss.isNullOrUndefined(nj)?2147483647:nj.get_zoneID())}},$8:function(ni){if(ni.get_parentZoneId()===2147483647&&ss.isValue(this.$t.get_model())){var nj=this.$t.get_model().floatingOrderMap;var nk=nj[ni.get_zoneID()];var nl=new ss.ObjectEnumerator(nj);try{while(nl.moveNext()){var nm=nl.current();if(nm.value===nk+1){return this.$t.get_model().getItemFromIndex(nm.key)}}}finally{nl.dispose()}}else if(ss.isValue(ni.parent)){var nn=ni.parent.get_children();for(var no=0;no<nn.length;no++){if(nn[no].get_zoneID()===ni.get_zoneID()){if(no+1<nn.length){return nn[no+1]}}}}return null},$6:function(){if(ss.isValue(this.$t.get_model())){return this.$t.get_model().currentEditingItem}return 2147483647},$n:function(ni){return new hK(ni,_.map(ni.get_children(),ss.mkdel(this,this.$n)),this.$t)},selectZone:function(ni){if(!this.$p()){tab.SelectionClientCommands.setActiveZone(ni.get_zoneID(),'replace',null)}},showContextMenu:function(ni,nj){if(!this.$p()){var nk=function(nl){var nm=nl.commands;var nn=tab.WidgetUtil.menuViewModelFromCommands(nm,tab.WidgetUtil.commandMenuItemClicked,null,null,null);nn.show(nj)};tab.SheetClientCommands.getLayoutTreeContextMenu(this.$r.get_model().get_sheetName(),ni.get_zoneID(),nk);tab.SelectionClientCommands.setActiveZone(ni.get_zoneID(),'replace',null)}},moveZoneInLayoutTree:function(ni,nj,nk){tab.DashboardZoneCommands.moveZoneWithinLayoutTree(ni,nj,nk).done(ss.mkdel(this,this.$j))},findPrevOrNextItemAndSelect:function(ni,nj){var nk=null;for(var nl=0;nl<this.$w.length;nl++){if(this.$w[nl].zoneId===ni){if(nj&&nl+1<this.$w.length){nk=this.$t.get_model().getItemFromIndex(this.$w[nl+1].zoneId)}if(!nj&&nl>1){nk=this.$t.get_model().getItemFromIndex(this.$w[nl-1].zoneId)}}}if(ss.isValue(nk)){this.selectZone(nk)}},$g:function(){return ss.isValue(this.$r.get_model())&&this.$r.get_model().get_currentDeviceLayout()==='default'},$o:function(){this.$3();this.incrementProps()},$j:function(){if(this.$v){this.$v=false;this.incrementProps()}},$f:function(){if(!this.$v){this.$v=true;this.incrementProps()}},$c:function(ni){var nj=ss.isInstanceOfType(ni,hH);if(this.$s!==nj){this.$s=nj;this.incrementProps()}this.raiseActionEvent$1(Boolean).call(this,this.$3$1,true)},$b:function(ni){if(this.$s){this.$s=false;this.incrementProps()}this.raiseActionEvent$1(Boolean).call(this,this.$3$1,false);if(ni.canceled){this.$j()}},$m:function(ni,nj){if(!this.$p()){var nk=this.$t.get_model();var nl=nk.getItemFromIndex(ni);if(nl.get_children().length>0&&ss.isValue(this.$r.get_model())&&ss.isValue(nk)){var nm=nj;if(ss.isNullOrUndefined(nm)){nm=!nk.isItemExpanded(ni)}var nn=nm;nk.saveExpandedState(nl.get_zoneID(),nn);this.incrementProps()}}},$k:function(ni){if(!this.$p()){var nj=this.$t.get_model();nj.saveCurrentEditingItem(ni);this.incrementProps()}},$d:function(ni,nj){tab.DashboardZoneCommands.modifyZoneZOrder(ni,'rel-pos',nj)},$3:function(){if(ss.isValue(this.$t.get_model())){this.$t.get_model().expandTreeToCurrent(this.$r.get_model().get_activeZoneID())}},$4:function(){tab.SelectionClientCommands.clearActiveZone()},$p:function(){return ss.isValue(this.$r.get_model())&&this.$r.get_model().get_isCurrentLayoutAutoGenerated()},$h:function(ni,nj){if(ni.get_zoneID()===nj){return true}if(ni.get_zoneType()==='layout-flow'||ni.get_zoneType()==='layout-basic'||ss.isValue(ni.get_children())&&ni.get_children().length>0){var nk=ni.get_children();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(this.$h(nm,nj)){return true}}}return false},$l:function(ni,nj){var nk=this.$6();if(nk!==2147483647){var nl=this.$r.get_model().getZone(nk).get_zoneCommonModel();var nm=function(nn){var no=nn.makeMutablePresModel(nl,false);no.name=nj};tab.DashboardZoneCommands.setZoneCustomFriendlyName(nk,ni,nj,nm)}this.$5()},$5:function(){this.$t.get_model().saveCurrentEditingItem(2147483647);this.incrementProps()}},{$0:function(ni,nj,nk){var nl=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[c,hI,Object])).call(null,[new c(ni)]);return new hH(ni,nl,nj,nk)}});var hQ=global.tab.LeftHybridSidePaneProxy=ss.mkType(a,'tab.LeftHybridSidePaneProxy');var hR=global.tab.LeftHybridSidePaneProxyHelper=ss.mkType(a,'tab.LeftHybridSidePaneProxyHelper',function(ni,nj,nk,nl,nm,nn,no){tab.BaseHybridSidePaneProxyHelper.call(this,ni,nj,nk,nl,nm,nn,no)},{get_containerClass:function(){return'tabAuthLeftPane'},openPane:function(ni){if(this.isShown()||ss.isNullOrUndefined(cd.get_instance())){return}var nj=$('<div></div>').addClass(this.get_containerClass());cd.get_instance().get_leftArea().get_viewModel().set_sidePaneExpansionState('expanded');cd.get_instance().get_leftArea().get_floatingLeftPanel().addFloatingPanelToDom$1(nj);cd.get_instance().get_leftArea().get_floatingLeftPanel().add_contentChanged(ss.mkdel(this,this.closePane));nj.get(0).setAttribute(this.sidePaneIdAttr,this.sidePaneId);this.openCallback(ni,nj.get(0))},updatePane:function(ni){if(!this.isShown()){return}this.updateCallback(ni,this.getContainer().get(0))},closePane:function(){if(!this.isShown()){return}var ni=this.getContainer();ReactDOM.unmountComponentAtNode(ni.get(0));ni.remove();cd.get_instance().get_leftArea().get_floatingLeftPanel().remove_contentChanged(ss.mkdel(this,this.closePane));this.closeCallback()}});var hS=global.tab.LeftPanelView=ss.mkType(a,'tab.LeftPanelView',function(ni){ss.makeGenericType(spiff.BaseView$1,[hT]).call(this,ni,new spiff.Template($("<div class='tabAuthLeftPanel'></div>")))});var hT=global.tab.LeftPanelViewModel=ss.mkType(a,'tab.LeftPanelViewModel',function(){this.$4=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.set_currentSheetType(tab.ApplicationModel.get_instance().get_workbook().get_sheetType());this.$4={};this.$4['worksheet']={};this.$4['dashboard']={};this.$4['story']={};this.set_paneTypesForSheet({});this.get_paneTypesForSheet()['worksheet']=[0,1];this.get_paneTypesForSheet()['dashboard']=[2,5];this.get_paneTypesForSheet()['story']=[3,4];this.$1()},{add_sheetTypeChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_sheetTypeChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_currentSheetType:function(){return this.$2$2},set_currentSheetType:function(ni){this.$2$2=ni},get_paneTypesForSheet:function(){return this.$2$3},set_paneTypesForSheet:function(ni){this.$2$3=ni},get_schemaViewerViewModel:function(){return this.$0(0)},get_analyticsPaneViewModel:function(){return this.$0(1)},get_dashboardPaneViewModel:function(){return this.$0(2)},get_layoutPaneViewModel:function(){return this.$0(5)},get_storyContentPaneViewModel:function(){return this.$0(3)},get_storyLayoutPaneViewModel:function(){return this.$0(4)},get_paneViewModels:function(){return this.$4},get_activePanes:function(){var ni=this.get_currentSheetType();var nj=[];var nk=this.get_paneTypesForSheet()[ni];for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nj.push(this.get_paneViewModels()[ni][nm])}return nj},dispose:function(){this.$2('worksheet');this.$2('dashboard');this.$2('story');ss.clearKeys(this.get_paneViewModels());spiff.BaseViewModel.prototype.dispose.call(this)},$2:function(ni){var nj=this.get_paneViewModels()[ni];if(ss.isNullOrUndefined(nj)||ss.getKeyCount(nj)===0){return}var nk=this.get_paneTypesForSheet()[ni];for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nj[nm].done(function(nn){if(ss.isValue(nn)){tab.MiscUtil.dispose$1(nn.get_contentViewModel())}})}},$1:function(){var ni=ss.Enum.getValues(bv);for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];var nl={};if(this.$3(nk,nl)){this.$4[nl.$][nk]=$.Deferred()}}},updatePaneForSheetType:function(ni){this.set_currentSheetType(ni);this.raiseActionEvent$1(Object).call(this,this.$2$1,ni)},setPaneViewModel:function(ni,nj){var nk={};var nl=this.$3(ni,nk);if(nl){this.$4[nk.$][ni].resolve(nj)}},$0:function(ni){var nj={};var nk=this.$3(ni,nj);if(!nk){var nl=$.Deferred();var nm=null;nl.resolve(nm);return nl.promise()}return this.get_paneViewModels()[nj.$][ni]},$3:function(ni,nj){var nk=_.keys(this.get_paneTypesForSheet());for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(_.contains(this.get_paneTypesForSheet()[nm],ni)){nj.$=nm;return true}}nj.$='worksheet';return false}});var hU=global.tab.LegacyEdgeWithTargetHandleRender=ss.mkType(a,'tab.LegacyEdgeWithTargetHandleRender',function(ni,nj,nk,nl,nm,nn){this.$2=null;this.$3=null;tab.ZoneChromeEdgeRender.call(this);this.$3=ni;this.chromeRect=nj;this.className=nk;this.side=nl;this.$2=nm;this.zindex=nn},{render:function(){return this.renderEdge(this.$1())},$1:function(){var ni=fL.createLine(5,3,50-5,3);var nj=fL.createLine(5,3+3+1,50-5,3+3+1);var nk=fL.isTargetInverted(this.chromeRect.t,10,this.side);var nl=(nk?'tabAuthZoneDragTarget-inverted':'');var nm=spiff.DOMElements.svg({className:'DragHandle-svg',height:11,width:50},ni,nj);var nn=fL.shouldShowTarget(this.chromeRect.t,10,this.side,this.$3.dragEnabled);var no=fL.generateZoneChromeStyleProperties(this.chromeRect.l,this.chromeRect.w,this.$3.dashWidth,this.$3.dashboardContentWidth,38,nn);var np={className:[nl,'tabAuthZoneDragTarget'].join(' '),style:no};var nq={className:'tabAuthZoneDragTargetIcon',key:this.side.toString(),ref:this.$2};return this.$0(np,nq,nm)},$0:function(ni,nj,nk){if(!this.$3.areMultipleZonesSelected){var nl=new EventUtils.EventHandleSpec;nl.doubleTap=ss.mkdel(this,function(nm){this.$3.selectParent()});return EventUtils.EventForwarder.div(nl,ni,spiff.DOMElements.div(nj,nk))}else{return spiff.DOMElements.div(ni,spiff.DOMElements.div(nj,nk))}}});var hV=global.tab.LevelComboBoxUpdater=ss.mkType(a,'tab.LevelComboBoxUpdater',function(){this.fieldNames=null;this.fieldCaptions=null;this.selectionIndex=0;this.isSelectionInvalid=false;this.invalidFieldCaption=null;this.specialCaption=null;this.specialValue=null},{update:function(ni){this.$0();var nj=[];var nk=!ss.isNullOrEmptyString(this.specialCaption);if(nk){nj.push(new spiff.ComboBoxItem(null,this.specialCaption,this.specialValue,null,null))}for(var nl=0,nm=this.fieldNames.length;nl<nm;nl++){nj.push(new spiff.ComboBoxItem(null,this.fieldCaptions[nl],this.fieldNames[nl],null,null))}ni.setItems(nj);if(this.isSelectionInvalid){ni.set_selectedItem(new spiff.ComboBoxItem(null,this.invalidFieldCaption,null,null,null))}else if(nk||this.selectionIndex>=0){ni.set_selectedItem(ni.get_items()[this.selectionIndex+(nk?1:0)])}ni.set_isSelectionInvalid(this.isSelectionInvalid);ni.set_enabled(true)},$0:function(){tab.Param.verifyValue(this.fieldNames,'FieldNames');tab.Param.verifyValue(this.fieldCaptions,'FieldCaptions');tab.Param.verifyValue(this.selectionIndex,'SelectionIndex');if(!ss.isNullOrEmptyString(this.specialCaption)){}if(this.isSelectionInvalid){}}});var hW=global.tab.LevelSettingsView=ss.mkType(a,'tab.LevelSettingsView',function(ni){this.$d=null;ss.makeGenericType(spiff.BaseView$1,[hX]).call(this,ni,new hY);this.$d=this.get_template();this.get_viewModel().add_modelUpdated(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_modelUpdated(ss.mkdel(this,this.$7))}))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$d.labelWidth.text(tab.Strings.AuthLevelWidthLabel);this.$d.labelPadding.text(tab.Strings.AuthLevelPaddingLabel);this.$9();this.disposables.add(ss.mkdel(this,this.$b));this.disposables.add(ss.mkdel(this,this.$a))},$9:function(){var ni=React.createElement(spiff.HorizontalSliderComponent,{minValue:0,maxValue:100,initialValue:ss.round(this.get_viewModel().get_currentWidthFraction()*100),disabled:false,width:200,onValueChanged:ss.mkdel(this,this.$c),showValueTextBox:false,showPercentageSign:false});ReactDOM.render(ni,this.$d.sliderWidth.get(0));var nj=React.createElement(spiff.HorizontalSliderComponent,{minValue:0,maxValue:100,initialValue:ss.round(this.get_viewModel().get_currentPaddingFraction()*100),disabled:false,width:200,onValueChanged:ss.mkdel(this,this.$8),showValueTextBox:false,showPercentageSign:false});ReactDOM.render(nj,this.$d.sliderPadding.get(0))},$b:function(){ReactDOM.unmountComponentAtNode(this.$d.sliderWidth.get(0))},$a:function(){ReactDOM.unmountComponentAtNode(this.$d.sliderPadding.get(0))},$7:function(){this.$9()},$c:function(ni){this.get_viewModel().set_currentWidthFraction(ni/100)},$8:function(ni){this.get_viewModel().set_currentPaddingFraction(ni/100)}});var hX=global.tab.LevelSettingsViewModel=ss.mkType(a,'tab.LevelSettingsViewModel',function(ni){this.$1=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$1=ni;this.$1.add_newLevelWidth(ss.mkdel(this,this.$0));this.disposables.add(ss.mkdel(this,function(){this.$1.remove_newLevelWidth(ss.mkdel(this,this.$0))}))},{add_modelUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_modelUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_viewType:function(){return hW},get_viewModel:function(){return this},get_currentWidthFraction:function(){return this.$1.get_currentWidthSliderFraction()},set_currentWidthFraction:function(ni){var nj=this.$1.get_widthTransform().fractionToValue(ni);if(Math.abs(this.$1.get_currentLevelWidth()-nj)>=1){var nk=new tab.SetLevelWidthCmd;nk.set_levelWidth(nj);nk.set_marksSpecId(this.$1.get_parentModel().get_id());nk.invoke()}},get_currentPaddingFraction:function(){return this.$1.get_currentPaddingSliderFraction()},set_currentPaddingFraction:function(ni){var nj=this.$1.get_paddingTransform().fractionToValue(ni);if(Math.abs(this.$1.get_currentLevelPadding()-nj)>0.1){var nk=new tab.SetLevelPaddingCmd;nk.set_levelPadding(nj);nk.set_marksSpecId(this.$1.get_parentModel().get_id());nk.invoke()}},$0:function(){this.$2$1()},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ni){}});var hY=global.tab.LevelSettingsViewTemplate=ss.mkType(a,'tab.LevelSettingsViewTemplate',function(){this.labelWidth=null;this.sliderWidth=null;this.labelPadding=null;this.sliderPadding=null;spiff.Template.call(this,$("<div class='tabAuthLevelSettingsContent'>\n            <div class='tabAuthLevelWidthLabel'></div>\n            <div class='tabAuthLevelWidthSlider'></div>\n            <div class='tabAuthLevelPaddingLabel'></div>\n            <div class='tabAuthLevelPaddingSlider'></div>\n        </div>"));this.labelWidth=this.getElementBySelector('.tabAuthLevelWidthLabel');this.sliderWidth=this.getElementBySelector('.tabAuthLevelWidthSlider');this.labelPadding=this.getElementBySelector('.tabAuthLevelPaddingLabel');this.sliderPadding=this.getElementBySelector('.tabAuthLevelPaddingSlider')});var hZ=global.tab.LinePatternPickerComponent=ss.mkType(a,'tab.LinePatternPickerComponent',function(ni,nj){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[ia,Object,Object]).call(this,tab.ObjectRegistry.newView(ia).call(null,[new ib(ni)]),ni,nj)},{handleWidgetPropertyChanged:function(ni,nj){},updateWidgetState:function(ni){this.get_widget().update(ni)}},{create:function(ni){return React.createElement(hZ,ni)}});var ia=global.tab.LinePatternPickerView=ss.mkType(a,'tab.LinePatternPickerView',function(ni){this.$a=['solid','dashed','dotted'];ss.makeGenericType(lM,[ib]).call(this,ni,spiff.Template.fromHtml("<div class='tabLinePatternPicker'></div>"))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.updateContent()},createPicker:function(){var ni=this.get_viewModel().get_props().disabled;this.element.toggleClass(ia.disabledClassName,ni).attr('title',(ni?this.get_viewModel().get_props().disabledTooltipText:null));if(ss.isValue(this.get_viewModel().get_props().headerText)){this.$8()}this.$7()},$8:function(){var ni=$('<div></div>').addClass(ia.$2).appendTo(this.element);$('<div></div>').addClass(ia.labelClassName).text(this.get_viewModel().get_props().headerText).appendTo(ni)},$7:function(){var ni=this.get_viewModel().get_props().disabled;var nj=$('<div></div>').addClass(ia.$1).appendTo(this.element);if(this.get_viewModel().get_props().showNone){var nk=$('<div></div>').html(tab.Strings.LinePatternNone).addClass(ia.textButtonClassName).addClass('tabStylePickerButton').toggleClass(ia.disabledClassName,ni).toggleClass(ia.selectedClassName,'none'===this.get_viewModel().get_props().selectedPattern).appendTo(nj);if(!ni){spiff.ClickHandler.targetAndClick(nk,this.$9('none'))}}for(var nl=0;nl<this.$a.length;nl++){var nm=this.$a[nl];var nn=ia.patternToSpriteName(nm);var no=ia.patternToTooltipText(nm);var np=$('<div></div>').attr('title',(ni?null:no)).addClass('tabStylePickerButton').toggleClass(ia.disabledClassName,ni).toggleClass(ia.selectedClassName,nm===this.get_viewModel().get_props().selectedPattern).appendTo(nj);$('<div></div>').addClass(nn).appendTo(np);if(!ni){spiff.ClickHandler.targetAndClick(np,this.$9(nm))}}},$9:function(ni){return ss.mkdel(this,function(){this.get_viewModel().get_props().handlePatternSelected(ni)})},update:function(ni){this.get_viewModel().update(ni);this.updateContent()},updateContent:function(){this.removePicker();this.createPicker()},removePicker:function(){this.element.children().remove()}},{patternToSpriteName:function(ni){return'linepattern-'+ni.toString()},patternToTooltipText:function(ni){switch(ni){case'solid':{return tab.Strings.AuthoringLinePatternLabelSolid}case'dotted':{return tab.Strings.AuthoringLinePatternLabelDotted}case'dashed':{return tab.Strings.AuthoringLinePatternLabelDashed}default:{return null}}}});var ib=global.tab.LinePatternPickerViewModel=ss.mkType(a,'tab.LinePatternPickerViewModel',function(ni){ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.updateProps$1(ni)},{update:function(ni){this.updateProps$1(ni)}});var ic=global.tab.LinePatternUtils=ss.mkType(a,'tab.LinePatternUtils',null,null,{linePatternToBorderStyle:function(ni){switch(ni){case'none':{return'bs-none'}case'solid':{return'bs-solid'}case'dotted':{return'bs-dotted'}case'dashed':{return'bs-dashed'}}return'bs-none'},borderStyleToLinePattern:function(ni){switch(ni){case'bs-dashed':{return'dashed'}case'bs-dotted':{return'dotted'}case'bs-none':{return'none'}case'bs-solid':{return'solid'}}return'none'}});var id=global.tab.LineTypeComponent=ss.mkType(a,'tab.LineTypeComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tabAuthLineTypeContainer'},spiff.DOMElements.div({className:'tabAuthPrimitiveOptionHeader'},spiff.DOMElements.div({className:'tabAuthPrimitiveOptionLabel'},tab.Strings.LineTypeHeading)),spiff.DOMElements.div({className:'tabAuthLineTypesChoices'},this.$1()))},$1:function(){var ni=[];this.props.items.forEach(ss.mkdel(this,function(nj){if(nj.isVisible){ni.push(this.$0(nj))}}));return Array.prototype.slice.call(ni)},$0:function(ni){var nj=id.getClassNameForMode(ni.interpolationMode);var nk=nj;if(ni.isSelected){nj+=' '+'selected'}if(!ni.isEnabled){nj+=' '+'disabled'}var nl=new EventUtils.EventHandleSpec;nl.tap=ss.mkdel(this,function(nm){this.$2(ni.interpolationMode)});return EventUtils.EventForwarder.div(nl,{className:nj,title:ni.tooltip,key:nk},spiff.DOMElements.div({className:'tab-Icon',key:'tab-Icon'}),spiff.DOMElements.div({className:'tab-HitTestArea',key:'tab-HitTestArea'}))},$2:function(ni){if(this.props.items.filter(function(nj){return nj.interpolationMode===ni&&nj.isEnabled}).length===1){this.props.onChangeLineInterpolationMode(ni)}}},{getClassNameForMode:function(ni){var nj='';switch(ni){case'lim-linear':{nj='tabAuthPrimitiveOptionLinear';break}case'lim-step':{nj='tabAuthPrimitiveOptionStep';break}case'lim-jump':{nj='tabAuthPrimitiveOptionJump';break}default:{break}}return nj}});var ie=global.tab.LineTypeViewModel=ss.mkType(a,'tab.LineTypeViewModel',function(ni){this.$3=null;ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.$3=ni;this.$1(null)},{update:function(ni){this.$3=ni;this.$1(null);this.updateProps()},$2:function(ni){this.$1(ni);this.updateProps();var nj=new tab.ChangeLineInterpolationCmd;nj.set_lineInterpolationMode(ni);nj.set_paneSpecificationId(this.$3.get_id());nj.invoke()},$1:function(ni){var nj=this.$3.get_sortEncodingOptions();var nk=nj.lineInterpolationModeUiItemSet;var nl=nk.length;var nm=new Array(nl);for(var nn=0;nn<nl;nn++){var no=nk[nn];nm[nn]={interpolationMode:no.lineInterpolationMode,isEnabled:no.isEnabled,isSelected:(ss.isValue(ni)?(no.lineInterpolationMode===ss.unbox(ni)):no.isSelected),isVisible:no.isVisible,tooltip:no.tooltipText}}this.set_Props({items:nm,onChangeLineInterpolationMode:ss.mkdel(this,this.$2)})}});var ig=global.tab.MapLayersPaneComponent=ss.mkType(a,'tab.MapLayersPaneComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){var ni=new tab.WidgetPluginContainerProps;ni.moduleName=ig.$1;var nj={};nj['presModel']=this.props.mapLayersPanePresModel;nj['originIsWeb']=true;ni.initialProps=nj;return React.createElement(tab.WidgetPluginContainer,ni)}});var ih=global.tab.MapLayersPaneProps=ss.mkType(a,'tab.MapLayersPaneProps',function(){this.mapLayersPanePresModel=null});var ii=global.tab.MapLayersPaneProxy=ss.mkType(a,'tab.MapLayersPaneProxy',function(){new hR(ii.id,ss.mkdel(this,this.openCallback),null,ss.mkdel(this,this.closeCallback),'doc:open-map-layers-pane-event',null,'doc:close-map-layers-pane-event')},{openCallback:function(ni,nj){var nk=new ih;nk.mapLayersPanePresModel=ni;var nl=React.createElement(ig,nk);ReactDOM.render(nl,nj)},closeCallback:function(){var ni=new tab.CloseMapLayersPaneCmd;ni.invoke()}});var ij=global.tab.MapOptionsCheckBoxEventProperties=ss.mkType(a,'tab.MapOptionsCheckBoxEventProperties');var ik=global.tab.MapOptionsComponent=ss.mkType(a,'tab.MapOptionsComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){var ni=this.$0();var nj=React.createElement(SharedWidgets.DialogWidget,ni);return nj},$0:function(){var ni={testId:'mapOptionsDialog',isModal:true,type:0,dialogWidth:200,showCloseButton:true,title:this.props.dialogTitle,positioningBehavior:2,zIndex:1000,handleGlassClick:ss.mkdel(this,this.$1),isGlassTransparent:true,onCloseRequest:ss.mkdel(this,this.$1)};var nj=[this.$5(),this.$6('MapSearch-LayerControl'),this.$3(),this.$6('LayerControl-ZoomControl'),this.$8(),this.$6('ZoomControl-MapScale'),this.$4(),this.$7()];ni.children=nj;return ni},$2:function(){var ni=[];ni.push({label:tab.Strings.MapVizNavCheckBox,checked:this.props.isToggleVisToolbarChecked,handleChange:this.props.setAllowPanAndZoom,testId:'MapVizNavToolbarVis'});if(this.props.isGeoSearchVisible){ni.push({label:tab.Strings.MapGeoSearchVizCheckBox,checked:this.props.isGeoSearchChecked,handleChange:this.props.setMapSearchVisibility,testId:'MapGeoSearchVis'})}ni.push({label:tab.Strings.MapFloatingToolbarVizCheckBox,checked:this.props.isFloatingToolbarChecked,handleChange:this.props.setFloatingToolbarVisibility,testId:'MapFloatingToolbarVis'});if(this.props.isMapScaleVisible){ni.push({label:tab.Strings.MapScaleVizibilityCheckBox,checked:this.props.isMapScaleChecked,handleChange:this.props.setMapScaleVisibility,testId:'MapScaleVis'})}for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];nk.containerStyle={marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace}}var nl={checkBoxWithLabelPropsList:ni};nl.key='mapOptionsCheckboxPropsList';return React.createElement(SharedWidgets.CheckBoxWithLabelGroupWidget,nl)},$6:function(ni){return spiff.DOMElements.hr({className:'mapOptionsDialogSeparator_'+ni,style:{marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace,border:'none',backgroundColor:SharedWidgets.TabStyles.Colors.L5,height:'1px'},key:'MapOptionsDialogSeparator_'+ni})},$5:function(){if(!this.props.isGeoSearchVisible){return null}var ni={label:tab.Strings.MapGeoSearchVizCheckBox,checked:this.props.isGeoSearchChecked,handleChange:this.props.setMapSearchVisibility,testId:'MapGeoSearchVis',containerStyle:{marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace},removeLeftMargin:true,key:'MapGeoSearchVis'};return React.createElement(SharedWidgets.CheckBoxWithLabelWidget,ni)},$3:function(){var ni={label:tab.Strings.MapOptionsLayerControlCheckbox,checked:this.props.isLayerControlChecked,handleChange:this.props.setLayerControlVisibility,testId:'LayerControlToggle',containerStyle:{marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace},removeLeftMargin:true,key:'LayerControlToggle'};return React.createElement(SharedWidgets.CheckBoxWithLabelWidget,ni)},$8:function(){var ni=[];ni.push({label:tab.Strings.MapFloatingToolbarVizCheckBox,checked:this.props.isFloatingToolbarChecked,handleChange:this.props.setFloatingToolbarVisibility,testId:'MapFloatingToolbarVis'});ni.push({label:tab.Strings.MapVizNavCheckBox,checked:this.props.isToggleVisToolbarChecked,handleChange:this.props.setAllowPanAndZoom,testId:'MapVizNavToolbarVis'});for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];nk.containerStyle={marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace};nk.removeLeftMargin=true;nk.key=nk.testId}var nl={checkBoxWithLabelPropsList:ni};nl.key='mapOptionsCheckboxPropsList';return React.createElement(SharedWidgets.CheckBoxWithLabelGroupWidget,nl)},$4:function(){if(!this.props.isMapScaleVisible){return null}var ni={label:tab.Strings.MapScaleVizibilityCheckBox,checked:this.props.isMapScaleChecked,handleChange:this.props.setMapScaleVisibility,testId:'MapScaleVis',removeLeftMargin:true,key:'MapScaleVis'};return React.createElement(SharedWidgets.CheckBoxWithLabelWidget,ni)},$7:function(){if(!this.props.isMapUnitsVisible){return null}var ni={disabled:false,dropdownType:0,menuItemInfos:this.props.unitsMenuOptions,selectedValue:this.props.selectedUnitsOption,onSelect:this.props.unitOptionsChangedAction,label:tab.Strings.MapOptionsDropDownLabel,maxHeight:200,testId:'UnitsDropDown',zIndex:1031,containerStyle:{marginTop:SharedWidgets.TabStyles.Spacing.DefaultSpace}};ni.key='mapOptionsDropdownLabelProps';var nj={key:'mapOptionsUnitsContainerProps'};return spiff.DOMElements.div(nj,React.createElement(SharedWidgets.DropdownWidget,ni))},$1:function(){_.defer(ss.mkdel(this,function(){this.props.onCloseDialog()}))}});var il=global.tab.MapOptionsProxy=ss.mkType(a,'tab.MapOptionsProxy',null,null,{$0:function(){var ni=new tab.MapOptionsInfoModel;ni.add_updatedMapOptionsInfo(function(){il.handleModelUpdated(ni)});return ni},handleModelUpdated:function(ni){var nj=new io(ni);var nk=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[io,ik,Object])).call(null,[nj]);nk.get_rootElement()[0].id='mapOptionsDialog';nk.addToDom($(document.body))}});var im=global.tab.MapOptionsTelemetry=ss.mkType(a,'tab.MapOptionsTelemetry',null,null,{trackCheckboxAction:function(ni,nj){tab.OnlineAnalyticsClient.logEvent('Viz_MapOptions',ss.mkdict(['MapOptionName',ni,'OptionSetTo',nj]))}});var io=global.tab.MapOptionsViewModel=ss.mkType(a,'tab.MapOptionsViewModel',function(ni){this.mapOptionsInfoModel=null;this.isMapScaleAllowed=false;this.isMapScaleChecked=false;this.isGeoSearchAllowed=false;this.isGeoSearchChecked=false;this.isMapUnitsAllowed=false;this.isFloatingToolbarChecked=false;this.isToggleVisToolbarChecked=false;this.unitsOptionValue=null;this.isLayerControlChecked=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.mapOptionsInfoModel=ni;this.disposables.add(ss.mkdel(ni,ni.detachNotifications));this.mapOptionsInfoModel.add_updatedMapOptionsInfo(ss.mkdel(this,this.$4));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.mapOptionsInfoModel.remove_updatedMapOptionsInfo(ss.mkdel(this,this.$4))})));this.isMapScaleAllowed=this.mapOptionsInfoModel.get_canToggleMapScale();this.isMapScaleChecked=this.mapOptionsInfoModel.get_shouldShowMapScale();this.isGeoSearchAllowed=this.mapOptionsInfoModel.get_canToggleGeographicSearch();this.isGeoSearchChecked=this.mapOptionsInfoModel.get_shouldShowGeographicSearch();this.isMapUnitsAllowed=this.mapOptionsInfoModel.get_canSetMapUnit();this.isFloatingToolbarChecked=this.mapOptionsInfoModel.get_shouldShowFloatingZoomToolbar();this.isToggleVisToolbarChecked=this.mapOptionsInfoModel.get_shouldAllowPanZoom();this.unitsOptionValue=this.mapOptionsInfoModel.get_mapUnitSelection().toString();this.isLayerControlChecked=this.mapOptionsInfoModel.get_shouldShowLayerControl()},{createInitialProps:function(){return{onCloseDialog:ss.mkdel(this,this.onClose),setMapScaleVisibility:ss.mkdel(this,this.$7),setMapSearchVisibility:ss.mkdel(this,this.$8),setFloatingToolbarVisibility:ss.mkdel(this,this.$6),setAllowPanAndZoom:ss.mkdel(this,this.$5),unitOptionsChangedAction:ss.mkdel(this,this.$3),setLayerControlVisibility:ss.mkdel(this,this.$9)}},createUpdatedProps:function(){var ni=this.isMapScaleAllowed;var nj=this.isMapScaleChecked;var nk=this.isGeoSearchAllowed;var nl=this.isGeoSearchChecked;var nm=this.isMapUnitsAllowed;var nn=this.isFloatingToolbarChecked;var no=this.isToggleVisToolbarChecked;var np=this.unitsOptionValue;var nq=io.generateUnitsMenuOptions();var nr=this.isLayerControlChecked;return{isMapScaleVisible:ni,isMapScaleChecked:nj,isGeoSearchVisible:nk,isGeoSearchChecked:nl,isMapUnitsVisible:nm,isFloatingToolbarChecked:nn,isToggleVisToolbarChecked:no,dialogTitle:this.mapOptionsInfoModel.get_dialogTitle(),selectedUnitsOption:np,unitsMenuOptions:nq,isLayerControlChecked:nr}},onClose:function(){this.dispose()},$7:function(ni){var nj={};nj['mapScaleVisibility']='off';if(ni){nj['mapScaleVisibility']='on'}nj['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nk=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'map-scale-visibility'},nj);this.isMapScaleChecked=ni;tab.ServerCommands.executeServerCommand(nk,'immediately',null,null);im.trackCheckboxAction('SetMapScaleVisibility',ni);this.incrementProps()},$8:function(ni){var nj={};nj['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nk=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'geographic-search-toggle-visibility'},nj);this.isGeoSearchChecked=ni;tab.ServerCommands.executeServerCommand(nk,'immediately',null,null);im.trackCheckboxAction('SetMapSearchVisibility',ni);this.incrementProps()},$6:function(ni){var nj={};nj['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nk=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'zoom-controls-toggle'},nj);this.isFloatingToolbarChecked=ni;tab.ServerCommands.executeServerCommand(nk,'immediately',null,null);im.trackCheckboxAction('SetFloatingToolbarVisibility',ni);this.incrementProps()},$5:function(ni){var nj={};nj['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nk=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-viz-navigation-setting'},nj);this.isToggleVisToolbarChecked=ni;tab.ServerCommands.executeServerCommand(nk,'immediately',null,null);im.trackCheckboxAction('SetAllowPanAndZoom',ni);this.incrementProps()},$3:function(ni){this.unitsOptionValue=ni;var nj={};nj['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();nj['defaultMapUnitEnum']='automatic';if(ni==='metric'){nj['defaultMapUnitEnum']='metric'}else if(ni==='us'){nj['defaultMapUnitEnum']='us'}var nk=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'default-map-unit-selection'},nj);tab.ServerCommands.executeServerCommand(nk,'immediately',null,null);this.incrementProps()},$9:function(ni){var nj={};nj['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nk=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-layer-control-toolbar-button-visibility'},nj);this.isLayerControlChecked=ni;tab.ServerCommands.executeServerCommand(nk,'immediately',null,null);this.incrementProps()},$4:function(){this.isMapScaleAllowed=this.mapOptionsInfoModel.get_canToggleMapScale();this.isMapScaleChecked=this.mapOptionsInfoModel.get_shouldShowMapScale();this.isGeoSearchAllowed=this.mapOptionsInfoModel.get_canToggleGeographicSearch();this.isGeoSearchChecked=this.mapOptionsInfoModel.get_shouldShowGeographicSearch();this.isMapUnitsAllowed=this.mapOptionsInfoModel.get_canSetMapUnit();this.isFloatingToolbarChecked=this.mapOptionsInfoModel.get_shouldShowFloatingZoomToolbar();this.isToggleVisToolbarChecked=this.mapOptionsInfoModel.get_shouldAllowPanZoom();this.unitsOptionValue=this.mapOptionsInfoModel.get_mapUnitSelection().toString();this.isLayerControlChecked=this.mapOptionsInfoModel.get_shouldShowLayerControl();this.incrementProps()}},{generateUnitsMenuOptions:function(){var ni=[];ni.push({displayValue:tab.Strings.MapOptionsUnitAutomatic,value:'automatic'.toString()});ni.push({displayValue:tab.Strings.MapOptionsUnitMetric,value:'metric'.toString()});ni.push({displayValue:tab.Strings.MapOptionsUnitUS,value:'us'.toString()});return ni}});var ip=global.tab.MarkLabelsEditButtonComponent=ss.mkType(a,'tab.MarkLabelsEditButtonComponent',function(){React.Component.call(this)},{render:function(){var ni=React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:this.props.launchMarkLabelsRichTextEditor,testId:'tabEditMarkLabels',children:this.props.text,disabled:!this.props.buttonEnabled,title:this.props.tooltip,className:'tabEditLabelButton'});return spiff.DOMElements.div({className:'tabEditMarkLabelsButtonControl'},spiff.DOMElements.div({className:'tabEditMarkLabelsButtonHolder'},ni))}});var iq=global.tab.MarkLabelsEditButtonViewModel=ss.mkType(a,'tab.MarkLabelsEditButtonViewModel',function(ni,nj,nk,nl){this.$4=false;this.$5=null;this.$8=null;this.$6=null;this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=nj;this.$5=ni;this.$6=nk;this.$7=nl},{createInitialProps:function(){return{launchMarkLabelsRichTextEditor:ss.mkdel(this,this.$3),buttonEnabled:this.$4,text:this.$6,tooltip:this.$7}},createUpdatedProps:function(){if(this.get_props().buttonEnabled!==this.$4||!ss.staticEquals(this.get_props().launchMarkLabelsRichTextEditor,ss.mkdel(this,this.$3))||!ss.referenceEquals(this.get_props().text,this.$6)||!ss.referenceEquals(this.get_props().tooltip,this.$7)){return{buttonEnabled:this.$4,launchMarkLabelsRichTextEditor:ss.mkdel(this,this.$3),text:this.$6,tooltip:this.$7}}else{return null}},setButtonEnabledState:function(ni,nj){this.$4=ni;this.$7=nj;this.incrementProps()},$3:function(ni){this.setButtonEnabledState(false,null);tab.RichTextClientCommands.callRichTextEditingCommand(this.$5);this.$8.hide(false)},get_viewType:function(){return ip},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ni){this.$8=ni}});var ir=global.tab.MarksCardHeaderDropdownMenuProps=ss.mkType(a,'tab.MarksCardHeaderDropdownMenuProps',null,null,{getMenuData:function(ni){var nj=[{value:'disableSelection',displayValue:tab.Strings.MarksCardDropdownDisableSelection,disabled:false,checked:ni.get_isLayerSelectionDisabled()},{value:'addToZoom',displayValue:tab.Strings.MarksCardDropdownAddZoom,disabled:false,checked:ni.get_isInExtent()},{isDivider:true},{value:'moveUp',displayValue:tab.Strings.MarksCardDropdownMoveUp,disabled:ni.get_layerIndex()+1>=ni.get_totalLayerCount()},{value:'moveDown',displayValue:tab.Strings.MarksCardDropdownMoveDown,disabled:ni.get_layerIndex()===0},{isDivider:true},{value:'renameLayer',displayValue:tab.Strings.MarksCardDropdownRename,disabled:false},{value:'hideLayer',displayValue:tab.Strings.MarksCardDropdownHide,disabled:false,checked:ni.get_isHidden()},{isDivider:true},{value:'removeLayer',displayValue:tab.Strings.MarksCardDropdownRemove,disabled:false}];return Array.prototype.slice.call(nj)}});var it=global.tab.MarksCardTabEncodingTemplate=ss.mkType(a,'tab.MarksCardTabEncodingTemplate',function(){this.encodingButtonsRow0=null;this.encodingButtonsRow1=null;this.encodingShelf=null;this.configButtonContainer=null;this.primitives=null;this.primitivesOptions=null;spiff.Template.call(this,$("\n<div class='tabAuthMarksCardTabEncoding'>\n    <div class='tabAuthMarksCardTabEncodingPrimitivesContainer'>\n        <div class='tabAuthMarksCardTabEncodingPrimitives'></div>\n    </div>\n    <div class='tabAuthMarksCardTabEncodingButtonRow'></div>\n    <div class='tabAuthMarksCardTabEncodingButtonRow'></div>\n    <div class='tabAuthMarksCardTabConfigButtonContainer'></div>\n    <div class='tabAuthMarksCardTabEncodingShelf'></div>\n</div>"));this.primitives=this.getElementBySelector('.tabAuthMarksCardTabEncodingPrimitives');this.encodingButtonsRow0=this.getElementsBySelector('.tabAuthMarksCardTabEncodingButtonRow').first();this.encodingButtonsRow1=this.getElementsBySelector('.tabAuthMarksCardTabEncodingButtonRow').slice(1);this.encodingShelf=this.getElementsBySelector('.tabAuthMarksCardTabEncodingShelf');this.configButtonContainer=this.getElementsBySelector('.tabAuthMarksCardTabConfigButtonContainer')},{get_encodingButtons:function(){return this.getElementsBySelector('.tabAuthEncodingButtonArea')}});var iu=global.tab.MarksCardTabEncodingView=ss.mkType(a,'tab.MarksCardTabEncodingView',function(ni){this.marksCardTabViewModel=null;this.$r=null;this.$q=null;ss.makeGenericType(spiff.BaseView$1,[iv]).call(this,ni,new it);this.$q=[];this.marksCardTabViewModel=ni;this.marksCardTabViewModel.add_modelChanged(ss.mkdel(this,this.$g));this.marksCardTabViewModel.add_dragOverEncodingChanged(ss.mkdel(this,this.$f));this.marksCardTabViewModel.add_validDropEncodingsChanged(ss.mkdel(this,this.$o));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.marksCardTabViewModel.remove_modelChanged(ss.mkdel(this,this.$g));this.marksCardTabViewModel.remove_dragOverEncodingChanged(ss.mkdel(this,this.$f));this.marksCardTabViewModel.remove_validDropEncodingsChanged(ss.mkdel(this,this.$o))})));this.marksCardTabViewModel.get_encodingShelf().add_shelfChanged(ss.mkdel(this,this.$h));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.marksCardTabViewModel.get_encodingShelf().remove_shelfChanged(ss.mkdel(this,this.$h))})));this.marksCardTabViewModel.add_popupHidden(ss.mkdel(this,this.$i));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.marksCardTabViewModel.remove_popupHidden(ss.mkdel(this,this.$i))})));this.$r=tab.ObjectRegistry.newView(lv).call(null,[this.marksCardTabViewModel.get_encodingShelf()]);this.disposables.add$1(this.$r);this.get_dom().encodingShelf.append(this.$r.element);if(this.addedToDom){this.$r.onAddedToDom()}this.updateEncodingButtons();this.$k()},{get_dom:function(){return this.get_template()},$p:function(){var ni=this.marksCardTabViewModel.get_marksCardTabEncoding().get_extensionPresModel();if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(this.marksCardTabViewModel.get_marksCardTabEncoding().get_currentPrimitiveType())||this.marksCardTabViewModel.get_marksCardTabEncoding().get_currentPrimitiveType().actualPrimitiveType!=='viz-extension'){return null}var nj=ni.addInRegistrationPresModel.extensionContextMenuItemPresModelList.filter(function(nk){return nk.extensionContextMenuId==='configure'});return((nj.length>0)?nj[0]:null)},dispose:function(){this.$m();this.$b();ss.makeGenericType(spiff.BaseView$1,[iv]).prototype.dispose.call(this)},$b:function(){this.$q.forEach(function(ni){ni.dispose()});ss.clear(this.$q)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$l();if(ss.isValue(this.$r)){this.$r.onAddedToDom()}},updateEncodingButtons:function(){this.get_dom().get_encodingButtons().off(this.get_eventNamespace());this.$b();this.get_dom().encodingButtonsRow0.children().remove();this.get_dom().encodingButtonsRow1.children().remove();var ni=((ss.isValue(this.marksCardTabViewModel.get_marksCardTabEncoding())&&ss.isValue(this.marksCardTabViewModel.get_marksCardTabEncoding().get_encodings()))?this.marksCardTabViewModel.get_marksCardTabEncoding().get_encodings():[]);for(var nj=0;nj<6;nj++){var nk;if(ni.length>nj){var nl=ni[nj].encodingTypePresModel;var nm=new fX;nm.domRoot.addClass('tabAuthEncodingButtonType-'+nl.encodingType);nm.name.text(ni[nj].name);nm.button.addClass(this.$7(nl));switch(nl.encodingType){case'text-encoding':case'size-encoding':case'color-encoding':case'shape-encoding':case'sort-encoding':case'wedge-size-encoding':case'level-of-detail-encoding':case'tooltip-encoding':case'edge-encoding':case'level-encoding':case'custom-encoding':{nm.icon.addClass(gO.getEncodingTypeIcon(nl,ni[nj].iconDetails));break}default:{nm.domRoot.addClass('tabAuthEncodingButtonNoIcon');break}}EventUtils.DragDropManager.attachDropTarget(nm.domRoot,this.marksCardTabViewModel.createEncodingButtonDropTarget(nl));nm.domRoot.data('tabAuthEncodingType',nl);var nn=new spiff.Button(nm.domRoot);nn.set_hoverTooltipText(ni[nj].tooltipText);var no=nn;no.add_click(this.$a(nl,nm.button));if(this.marksCardTabViewModel.isEncodingClickable(nl)){nm.domRoot.addClass('clickable')}this.$q.push(no);nk=nm.domRoot}else{nk=$("<span class='tabAuthEncodingButtonArea'><span class='tabAuthEmptyEncodingButton'></span></span>")}((nj<3)?this.get_dom().encodingButtonsRow0:this.get_dom().encodingButtonsRow1).append(nk)}this.$o(null)},$d:function(ni){return spiff.DOMElements.div({className:'tabAuthMarksCardTabEncodingPrimitive',title:ni.name},spiff.DOMElements.div({key:this.marksCardTabViewModel.getPrimitiveIdentifier(ni),className:gO.getPrimitiveTypeIcon(ni)}),spiff.DOMElements.span({className:'tabAuthMarksCardTabEncodingPrimitiveLabel'},ni.name))},$e:function(ni){var nj=[];nj.push({separator:true});nj.push({group:true,value:tab.Strings.AuthMarksCardVizExtensionsGroup,content:spiff.DOMElements.span({className:'tabAuthMarksCardTabEncodingPrimitive'},tab.Strings.AuthMarksCardVizExtensionsGroup)});var nk=nj;ss.arrayAddRange(nk,this.$9(ni));return nk},$9:function(ni){return ni.map(ss.mkdel(this,function(nj){return{value:this.marksCardTabViewModel.getPrimitiveIdentifier(nj),content:this.$d(nj)}}))},$n:function(ni){var nj=8;var nk=window.innerHeight;var nl=this.get_dom().primitives.get(0).getBoundingClientRect();var nm=nl.top>nk-nl.bottom;var nn=(nm?(''+(nl.top-nj)+'px'):('calc(100vh - '+(nl.bottom+nj)+'px)'));ni.props.list.props.style.maxHeight=nn},$c:function(){if(!tabBootstrap.FeatureFlags.isEnabled('VizExtensionsUI')){return null}var ni=spiff.DOMElements.div({className:'tabAuthMarksCardAddExtension'},spiff.DOMElements.div({className:'tabAuthPrimitive-add-extension'}),spiff.DOMElements.span({className:'tabAuthMarksCardAddExtensionLabel'},tab.Strings.AuthMarksCardAddVizExtension));return React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nj){this.marksCardTabViewModel.loadVizExtension()}),buttonType:3,testId:'load-viz-extension',children:ni,className:'tabAuthMarksCardAddExtensionButton'})},$l:function(){var ni=this.marksCardTabViewModel.get_marksCardTabEncoding().get_primitiveTypes().filter(function(nn){return nn.actualPrimitiveType!=='viz-extension'});var nj=this.$9(ni);if(tabBootstrap.FeatureFlags.isEnabled('VizExtensionsUI')){var nk=this.marksCardTabViewModel.get_marksCardTabEncoding().get_primitiveTypes().filter(function(nn){return nn.actualPrimitiveType==='viz-extension'});ss.arrayAddRange(nj,this.$e(nk))}var nl=ss.mkdel(this,function(nn){return spiff.DOMElements.div({id:'tabMarksCardDropdownCustomizedList'},React.createElement(SharedWidgets.List,nn),spiff.DOMElements.div({className:'tabAuthMarksCardAddExtensionButtonContainer'},this.$c()))});var nm=React.createElement(SharedWidgets.SingleSelectDropdown,{'aria-controls':'tabMarksCardDropdownCustomizedList',type:0,list:React.createElement(nl,{items:Array.prototype.slice.call(nj),style:{}}),value:this.marksCardTabViewModel.getPrimitiveIdentifier(this.marksCardTabViewModel.get_marksCardTabEncoding().get_currentPrimitiveType()),onChange:ss.mkdel(this,this.$j),testId:'marksCardTabEncodingPrimitivesDropdown',stackingRootId:'window'});ReactDOM.render(nm,this.get_dom().primitives.get(0));this.$n(nm)},$k:function(){if(!tabBootstrap.FeatureFlags.isEnabled('VizExtensionsUI')||ss.isNullOrUndefined(this.$p())){return}var ni=spiff.DOMElements.div({className:'tab-format-extension-icon',style:{marginRight:'5px'}});var nj=spiff.DOMElements.div({style:{display:'flex',justifyContent:'center'}},ni,tab.Strings.FormatExternsionButtonLabel);var nk=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,this.$8),buttonType:3,testId:'marksCardTabEncodingConfigButton',children:nj,density:'medium',style:{width:'100%'}});var nl=spiff.DOMElements.div({className:'tabAuthMarksCardTabConfigButton'},nk);ReactDOM.render(nl,this.get_dom().configButtonContainer.get(0))},$8:function(ni){var nj=this.$p();var nk=this.marksCardTabViewModel.get_marksCardTabEncoding().get_extensionPresModel();if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nj)){return}var nl=new lk;nl.set_addInLocator(nk.addInLocatorPresModel);nl.set_extensionContextMenuId(nj.extensionContextMenuId);nl.set_extensionContextMenuText(nj.extensionContextMenuText);nl.set_uiBlocking('immediately');nl.invoke()},$m:function(){ReactDOM.unmountComponentAtNode(this.get_dom().primitives.get(0))},$h:function(ni){this.updateEncodingButtons();this.$k()},$g:function(ni){this.$l();this.updateEncodingButtons();this.$k()},$7:function(ni){return'tabAuthEncodingButton-'+ni.encodingType},$a:function(ni,nj){var nk='.'+this.$7(ni);return ss.mkdel(this,function(){nj.parent().addClass('pressed');var nl=ss.mkdel(this,function(){return $(nk,this.element)});this.marksCardTabViewModel.encodingTypeClicked(ni,nl)})},$i:function(ni){ni().parent().removeClass('pressed')},$j:function(ni){if(ss.referenceEquals(ni,this.marksCardTabViewModel.addVizExtensionPrimitiveType)){this.marksCardTabViewModel.loadVizExtension();return}var nj=this.marksCardTabViewModel.get_marksCardTabEncoding().get_primitiveTypes().filter(ss.mkdel(this,function(nk){return ss.referenceEquals(this.marksCardTabViewModel.getPrimitiveIdentifier(nk),ni)}));if(tab.MiscUtil.isNullOrEmpty$4(nj)||ss.isNullOrUndefined(nj[0])||nj[0].isSelected){return}this.marksCardTabViewModel.updatePrimitive(nj[0])},$o:function(ni){if(ss.isNullOrUndefined(ni)){this.get_dom().get_encodingButtons().toggleClass('tabDropInvalid',false).toggleClass('tabDropInvited',false)}else{this.get_dom().get_encodingButtons().each(function(nj,nk){var nl=$(nk);var nm=nl.data('tabAuthEncodingType');var nn=ss.isValue(_.find(ni,function(no){return tab.EncodingTypeUtils.isEqual(no,nm)}));nl.toggleClass('tabDropInvalid',!nn).toggleClass('tabDropInvited',nn)})}},$f:function(ni){this.get_dom().get_encodingButtons().each(function(nj,nk){var nl=$(nk);nl.toggleClass('tabDragOver',tab.EncodingTypeUtils.isEqual(nl.data('tabAuthEncodingType'),ni))})}});var iv=global.tab.MarksCardTabViewModel=ss.mkType(a,'tab.MarksCardTabViewModel',function(){this.marksCardTabEncoding=null;this.$j=new lw;this.$i=tab.EncodingTypeUtils.createInvalid();this.$k=null;this.addVizExtensionPrimitiveType='ADD_VIZ_EXTENSION';this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.dragEnded))},{add_modelChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_modelChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_dragOverEncodingChanged:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_dragOverEncodingChanged:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_validDropEncodingsChanged:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_validDropEncodingsChanged:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},add_popupHidden:function(ni){this.$2$4=ss.delegateCombine(this.$2$4,ni)},remove_popupHidden:function(ni){this.$2$4=ss.delegateRemove(this.$2$4,ni)},get_validDropEncodings:function(){return this.$k},set_validDropEncodings:function(ni){this.$k=ni;if(ss.isValue(this.$2$3)){this.$2$3(this.$k)}},get_marksCardTabEncoding:function(){return this.marksCardTabEncoding},get_encodingShelf:function(){return this.$j},get_dragOverEncoding:function(){return this.$i},set_dragOverEncoding:function(ni){if(ss.referenceEquals(this.$i,ni)){return}this.$i=ni;if(ss.isValue(this.$2$2)){this.$2$2(this.$i)}},get_hasSortEncodingOptions:function(){return ss.isValue(this.marksCardTabEncoding)&&ss.isValue(this.marksCardTabEncoding.get_sortEncodingOptions())},$g:function(){return ss.isValue(this.marksCardTabEncoding)&&this.marksCardTabEncoding.get_hasLevelEncodingOptions()},$h:function(){return ss.isValue(this.marksCardTabEncoding)&&ss.isValue(this.marksCardTabEncoding.get_sizeEncodingOptions())},dispose:function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.dragEnded));this.$j.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},createEncodingButtonDropTarget:function(ni){return new n(this,ss.mkdel(this,function(){this.set_dragOverEncoding(ni)}),ss.mkdel(this,function(){this.set_dragOverEncoding(tab.EncodingTypeUtils.createInvalid())}),ni)},getDropPositionPresModel:function(ni,nj){var nk=ss.safeCast(ni,cp);if(ss.isNullOrUndefined(nk)){return null}var nl=null;if(nk.get_drop().state()==='resolved'){if(tab.EncodingTypeUtils.isValid(nj)){var nm=this.$j.matchingDropsFrom(nk);if(ss.isValue(nm)){nl=_.find(nm.shelfDropPositions,function(nn){return tab.EncodingTypeUtils.isEqual(nn.encodingTypePresModel,nj)})}}}return nl},acceptDrop:function(ni,nj){var nk=$.Deferred();if(!ss.isInstanceOfType(ni,cp)){nk.resolve(false);return nk}var nl=ss.mkdel(this,function(nm){var nn=ss.safeCast(nm,cp);var no=this.getDropPositionPresModel(ni,nj);var np=ss.isValue(no);if(np){if(nn.hasOnlyPills()){var nq=nn.get_pill();tab.ShelfClientCommands.movePillToEncoding(nq.shelfVM.get_shelf(),this.get_encodingShelf().get_shelf(),nj,nq.get_pill(),nn.isCopyDrag,no)}else if(nn.hasOnlyFields()){var nr=nn.fieldsToDropOnShelf(this.get_encodingShelf().get_shelfType());if(nn.shouldGetAggregationOfField(nr)){nn.selectAggregationForField(this.get_encodingShelf().get_shelfType(),nr[0],ss.mkdel(this,function(ns){var nt=this.get_encodingShelf();var nu=[];nu.push(ns.selectedField);nn.addEncodingFields(nt,nu,nj,no,ns.isRelativeDate)}))}else{nn.addEncodingFields(this.get_encodingShelf(),nr,nj,no,false)}}}nk.resolve(np)});if(ni.get_drop().state()==='resolved'){nl(ni)}else{ni.get_drop().done(nl)}return nk},init:function(ni){this.marksCardTabEncoding=ni;this.$4()},isColorEncodingClickable:function(){if(!this.$0(tab.EncodingTypeUtils.create('color-encoding'))){return true}if(ss.isNullOrUndefined(this.get_marksCardTabEncoding())||ss.isNullOrUndefined(this.get_marksCardTabEncoding().get_colorEncodingDropdown())){return false}return ss.isValue(this.get_marksCardTabEncoding().get_colorEncodingDropdown().quantitativeColor)||ss.isValue(this.get_marksCardTabEncoding().get_colorEncodingDropdown().categoricalColor)},isSortEncodingButtonClickable:function(){return this.get_hasSortEncodingOptions()&&this.marksCardTabEncoding.get_sortEncodingOptions().actualPrimitiveType==='line'},$1:function(){return this.$g()},$2:function(){return this.$h()},isEncodingClickable:function(ni){switch(ni.encodingType){case'color-encoding':{return this.isColorEncodingClickable()}case'text-encoding':{return ss.isValue(this.get_marksCardTabEncoding())&&ss.isValue(this.get_marksCardTabEncoding().get_textEncodingDropdown())}case'tooltip-encoding':{return true}case'shape-encoding':{return!this.$0(ni)}case'size-encoding':{return this.$2()}case'sort-encoding':{return this.isSortEncodingButtonClickable()}case'level-encoding':{return this.$1()}default:{return false}}},encodingTypeClicked:function(ni,nj){if(this.isEncodingClickable(ni)){switch(ni.encodingType){case'size-encoding':{this.$a(nj);break}case'shape-encoding':{this.$9(nj);break}case'color-encoding':{this.$7(nj);break}case'tooltip-encoding':{this.$d(nj);break}case'text-encoding':{this.$c(nj);break}case'sort-encoding':{this.$b(nj);break}case'level-encoding':{this.$8(nj);this.$5(ni);break}}}},updatePrimitive:function(ni){var nj=this.marksCardTabEncoding.get_currentPrimitiveType().actualPrimitiveType;var nk=ni.actualPrimitiveType;tab.PaneClientCommands.setPanePrimitive(this.marksCardTabEncoding,ni);if(this.$6(nj,nk)){var nl={};nl['from_marktype']=nj.toString();nl['to_marktype']=nk.toString();nl['encodings_set']=this.$j.get_pills().length>0;tab.OnlineAnalyticsClient.logEvent('vizart_marktype_transition',nl)}},loadVizExtension:function(){(new tab.LaunchChooseExtensionDialogForWorksheetCmd).invoke()},dragEnded:function(ni){this.set_validDropEncodings(null);this.set_dragOverEncoding(tab.EncodingTypeUtils.createInvalid())},dragStarted:function(ni){var nj=ss.safeCast(ni,cp);if(ss.isNullOrUndefined(nj)){return}nj.get_drop().always(ss.mkdel(this,this.$f));if(ni.get_readyToDrop()){var nk=[];if(ss.isValue(this.marksCardTabEncoding)&&ss.isValue(this.marksCardTabEncoding.get_encodings())){var nl=this.marksCardTabEncoding.get_encodings();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];nk.push(nn.encodingTypePresModel)}}this.set_validDropEncodings(nk)}},getPrimitiveIdentifier:function(ni){if(ni.actualPrimitiveType==='viz-extension'){return ni.vizExtensionId+ni.vizExtensionUrl+ni.vizExtensionVersion}return ni.actualPrimitiveType.toString()},$e:function(ni,nj,nk){var nl=ss.mkdel(this,function(){if(ss.isValue(this.$2$4)){this.$2$4(nj)}});var nm=spiff.UberPopupViewModel.createForContent(ni,nj,nl,true);nm.options.glassZIndex=spiff.UberPopupShowOptions.startingGlassZIndex+1;nm.options.horizontalAlign=nk;nm.options.additionalClassNames=['tabMarksCardUberPopup'];nm.show();return nm},$a:function(ni){var nj=new iA(this.get_marksCardTabEncoding().get_markSizeModel());this.$e(nj,ni,0)},$9:function(ni){tab.PaneClientCommands.getDefaultShapeType(this.marksCardTabEncoding,ss.mkdel(this,function(nj){var nk=new lo;if(ss.isValue(nj)){nk.set_selectedShape(nj)}nk.add_propertyChanged(ss.mkdel(this,function(nl,nm){tab.PaneClientCommands.setDefaultShapeType(this.marksCardTabEncoding,nk.get_selectedShape())}));this.$e(nk,ni,0)}))},$0:function(ni){return _.any(this.$j.get_pills(),function(nj){return iv.$0(nj,ni)})},$7:function(ni){var nj=this.get_marksCardTabEncoding().get_currentPrimitiveType().actualPrimitiveType;if(nj==='heatmap'){var nk=new gF(this.get_marksCardTabEncoding());this.$e(nk,ni,0);return}if(nj==='sankey'||nj==='sunburst'){var nl=new iR(this.get_marksCardTabEncoding());this.$e(nl,ni,0);return}var nm=!this.$0(tab.EncodingTypeUtils.create('color-encoding'));if(!nm){if(ss.isValue(this.get_marksCardTabEncoding().get_colorEncodingDropdown().quantitativeColor)){var nn=new ju(this.get_marksCardTabEncoding());this.$e(nn,ni,0)}else if(tabBootstrap.Affordances.isOff('categoricalColorDialog')){nm=true}else if(ss.isValue(this.get_marksCardTabEncoding().get_colorEncodingDropdown().categoricalColor)){var no=new cT(this.get_marksCardTabEncoding());this.$e(no,ni,0)}}if(nm){tab.PaneClientCommands.getDefaultColor(this.marksCardTabEncoding,ss.mkdel(this,function(np){var nq=new iO(this.get_marksCardTabEncoding());if(ss.isValue(np)){nq.get_colorPicker().update(np)}this.$e(nq,ni,0)}))}},$d:function(ni){if(!tsConfig.is_mobile){if(ss.isValue(this.$2$4)){this.$2$4(ni)}var nj=this.marksCardTabEncoding;var nk=(ss.isValue(nj)?nj.get_id():0);tab.RichTextClientCommands.launchCustomTooltipRichTextEditor(nk)}else{var nl=new ml(this.get_marksCardTabEncoding());nl.add_resetClicked(ss.mkdel(this,this.$4));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){nl.remove_resetClicked(ss.mkdel(this,this.$4))})));this.$e(nl,ni,0)}},$c:function(ni){var nj=new mg(this.marksCardTabEncoding);var nk=this.$e(nj,ni,0);nj.updateUberPopupViewModel(nk)},$b:function(ni){var nj=new lD(this.marksCardTabEncoding);this.$e(nj,ni,0)},$8:function(ni){var nj=new hX(this.get_marksCardTabEncoding().get_levelSettingsModel());this.$e(nj,ni,0)},$4:function(){if(ss.isNullOrUndefined(this.$2$1)){return}this.$2$1(this)},$f:function(ni){if(!EventUtils.DragDropManager.get_isDragging()){return}var nj=this.$j.matchingDropsFrom(ni);if(ss.isValue(nj)){this.set_validDropEncodings(_.filter(nj.encodingTypePresModels,ss.mkdel(this,function(nk){return _.any(this.get_marksCardTabEncoding().get_encodings(),function(nl){return tab.EncodingTypeUtils.isEqual(nl.encodingTypePresModel,nk)&&nl.isEnabled})})))}else{this.set_validDropEncodings(null)}},$6:function(ni,nj){return(tabBootstrap.FeatureFlags.isEnabled('VizArtSankey')||tabBootstrap.FeatureFlags.isEnabled('VizArtSunburst'))&&this.$3(ni,nj)},$3:function(ni,nj){return ni==='sankey'||ni==='sunburst'||(nj==='sankey'||nj==='sunburst')},$5:function(ni){var nj={};nj['mark_type']=this.marksCardTabEncoding.get_currentPrimitiveType().actualPrimitiveType.toString();nj['encoding']=ni.toString();tab.OnlineAnalyticsClient.logEvent('vizart_marks_submenu_open',nj)}},{$0:function(ni,nj){return tab.EncodingTypeUtils.isEqual(ni.get_item().encodingTypePresModel,nj)}});var iw=global.tab.MarksContentTemplate=ss.mkType(a,'tab.MarksContentTemplate',function(){spiff.Template.call(this,$("<div class='tabAuthMarksContent' id='tabAuthMarksContentStackingId'></div>"))});var ix=global.tab.MarksContentView=ss.mkType(a,'tab.MarksContentView',function(ni,nj){this.$o=null;this.$q=null;this.$j=32;this.$p=3;this.$l=null;this.$k=null;this.$n=null;this.$m=null;ss.makeGenericType(cH,[iy]).call(this,ni,nj);this.$q=ni;this.$q.add_marksCardTabsChanged(ss.mkdel(this,this.handleMarksCardTabsChanged));this.$o=nj},{get_scrollContent:function(){if(this.$q.get_marksCardTabViewModels().length===0){return $('')}return this.$o.domRoot.find('.tabAuthMarksContent')},get_scrollableContentPreferredHeight:function(){var ni=this.get_scrollContent().find('.tabAccordionItem').length;var nj=this.$j;var nk=ni*nj;nk+=tab.DoubleUtil.roundToInt(this.get_scrollContent().find('.tabAccordionItemContent:visible').height());return((nk>0)?nk:tab.DoubleUtil.roundToInt(this.$o.domRoot.outerHeight(true)))},get_maxMarksCardTabsToDisplay:function(){return 7},$g:function(){if(ss.isNullOrUndefined(this.$k)){this.$k=tab.ObjectRegistry.newView(D).call(null,[this.$h()])}return this.$k},$h:function(){if(ss.isNullOrUndefined(this.$l)){this.$l=new E;this.$l.add_slideDownTriggered(ss.mkdel(this.$q,this.$q.triggerUpdateScrollContentAction));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){if(ss.isValue(this.$l)){this.$l.remove_slideDownTriggered(ss.mkdel(this.$q,this.$q.triggerUpdateScrollContentAction))}})));this.$l.add_propertyChanged(ss.mkdel(this,function(ni,nj){if(nj.get_propertyName()!=='ActiveItem'){return}var nk=this.$l.get_activeItem();if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_content().get_viewModel();this.$q.selectMarksCardTab(nl)}))}return this.$l},$i:function(){if(ss.isNullOrUndefined(this.$m)){this.$m=$("<div class='tabAuthMarksContentMore'></div>");this.$m.append($('<span></span>').text(tab.Strings.AuthMarksCardChooseField));this.$m.append($('<span></span>').addClass('tabAuthMarksContentMoreIcon'));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$m[0],ss.mkdel(this,this.$9)))}return this.$m},dispose:function(){this.$q.remove_marksCardTabsChanged(ss.mkdel(this,this.handleMarksCardTabsChanged));if(ss.isValue(this.$k)){this.$k.dispose();this.$k=null}if(ss.isValue(this.$l)){this.$l.dispose();this.$l=null}if(ss.isValue(this.$n)){this.$n.dispose();this.$n=null}ss.makeGenericType(spiff.BaseView$1,[iy]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$b()},$b:function(){if(!this.addedToDom){return}if(ss.isValue(this.$n)){this.$n.onAddedToDom()}if(ss.isValue(this.$k)){this.$k.onAddedToDom()}},setScrollableContentActualHeight:function(ni){this.$g().element.css({'overflow-y':'auto','max-height':(ss.isValue(ni)?(ss.unbox(ni)+'px'):'none')});this.$7()},$7:function(){var ni=this.$g().element.height()<this.$g().element.get(0).scrollHeight;if(!ni){return}var nj=this.$g().element.find('.tabAuthMarksCardTabEncodingButtonRow:visible');if(nj.length===0){return}var nk=nj[0].clientWidth;var nl=nk-SharedWidgets.TabStyles.Spacing.DefaultSpace*this.$p;var nm=ss.idiv(nl,this.$p)-SharedWidgets.TabStyles.Spacing.SmallSpace-2;this.$g().element.find('.tabAuthEncodingButtonArea').each(ss.mkdel(this,function(nn,no){$(no).css({'max-width':nm+'px'})}))},onViewModelPropertyChanged:function(ni,nj){if(nj.get_propertyName()==='CurrentLayer'){this.$a()}ss.makeGenericType(spiff.BaseView$1,[iy]).prototype.onViewModelPropertyChanged.call(this,ni,nj)},handleMarksCardTabsChanged:function(){if(ss.isValue(this.$n)){this.$n.dispose();this.$n=null}if(this.$q.get_marksCardTabViewModels().length===1){this.$n=tab.ObjectRegistry.newView(iu).call(null,[this.$q.get_currentMarksCardTab()]);if(ss.isValue(this.$k)){this.$k.dispose();this.$k=null}}else{this.$f()}this.$e()},$f:function(){this.$h().set_defaultMarksSpecId(this.$q.get_marksModel().get_defaultMarksSpecId());this.$h().set_isLayered(this.$q.get_marksModel().get_isLayered());if(this.$h().get_isLayered()||this.$q.get_marksCardTabViewModels().length<=this.get_maxMarksCardTabsToDisplay()){var ni=(this.$h().get_isLayered()?(this.$q.get_marksCardTabViewModels().length-1):1);var nj=[];for(var nk=0;nk<this.$q.get_marksCardTabViewModels().length;++nk){var nl=((nk>0&&this.$h().get_isLayered())?(nk-1):0);nj.push(this.$8(this.$q.get_marksCardTabViewModels()[nk],nl,ni))}this.$h().updateItems(nj)}else{this.$h().updateItems([this.$8(this.$q.get_currentMarksCardTab(),0,1)])}this.$c()},$8:function(ni,nj,nk){var nl=new A(this.$l,ni.get_marksCardTabEncoding(),new f(ni),nj,nk);return nl},$c:function(){this.$h().set_activeItem(_.find(this.$h().get_items(),ss.mkdel(this,function(ni){var nj=ni.get_content();return nj.$0()===this.$q.get_currentMarksCardTab().get_marksCardTabEncoding().get_id()})));this.raiseScrollContentChanged()},$a:function(){if(this.$q.get_marksCardTabViewModels().length===1){this.handleMarksCardTabsChanged()}else if(this.$h().get_isLayered()||this.$q.get_marksCardTabViewModels().length<=this.get_maxMarksCardTabsToDisplay()){this.$c()}else{this.$f()}},$e:function(){this.$o.domRoot.children().detach();if(this.$q.get_marksCardTabViewModels().length===0){return}if(this.$q.get_marksCardTabViewModels().length===1){this.$o.domRoot.append(this.$n.element)}else{this.$o.domRoot.append(this.$g().element);if(!this.$h().get_isLayered()&&this.$q.get_marksCardTabViewModels().length>this.get_maxMarksCardTabsToDisplay()){this.$o.domRoot.append(this.$i())}}this.$b();this.raiseScrollContentChanged()},$9:function(ni){var nj=[];var nk=this.$q.get_marksCardTabViewModels();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=(new spiff.MenuItemBuilder).data(nm).name(nm.get_marksCardTabEncoding().get_name()).iconClass(gO.getMarksCardTabIcon(nm.get_marksCardTabEncoding())).iconClassTwo(null).enabled(true).build();if(ss.referenceEquals(nm,this.$q.get_currentMarksCardTab())){nn.itemClass='tabMenuSelectedItem'}if(nm.get_marksCardTabEncoding().get_isTableCalc()){nn.iconClassTwo='tabAuthPillIconTableCalc'}nj.push(nn)}var no=$(ni.target);var np=new spiff.ShowMenuOptions(no,true);var nq=new spiff.Menu(nj);var nr=spiff.MenuViewModel.createForMenu(nq,ss.mkdel(this,this.$d),null,null);nr.set_theme(new spiff.ComboBoxMenuTheme);nr.show(np)},$d:function(ni){this.$q.selectMarksCardTab(ni.data)}});var iy=global.tab.MarksContentViewModel=ss.mkType(a,'tab.MarksContentViewModel',function(ni){this.$8=null;this.$4=null;this.$7=[];this.$6={};this.$5=0;this.$9=true;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.$8=ni;this.$8.add_newMarksCard(ss.mkdel(this,this.$3));this.$8.add_activePaneSpecIdChanged(ss.mkdel(this,this.$2));var nj=tab.PluginPresentationLayer.get_instance().registerNotificationHandler('doc:active-marks-card-tab-changed-event',ss.mkdel(this,this.$1));this.disposables.add(nj);this.$3()},{add_dropStateChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_dropStateChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_marksCardTabsChanged:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_marksCardTabsChanged:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_visibleChanged:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_visibleChanged:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},add_primitiveChanged:function(ni){this.$2$4=ss.delegateCombine(this.$2$4,ni)},remove_primitiveChanged:function(ni){this.$2$4=ss.delegateRemove(this.$2$4,ni)},get_isVisible:function(){return this.$9},set_IsVisible:function(ni){if(this.$9===ni){return}this.$9=ni;this.raiseActionEvent(this.$2$3)},get_dropState:function(){return this.$5},set_DropState:function(ni){this.$5=ni;if(ss.isValue(this.$2$1)){this.$2$1(this.$5)}},get_currentMarksCardTab:function(){return this.$4},set_currentMarksCardTab:function(ni){if(ss.referenceEquals(this.$4,ni)){return}this.$4=ni;this.notifyPropertyChanged('CurrentLayer')},get_currentPaneSpecId:function(){if(ss.isValue(this.$4)){return this.$4.get_marksCardTabEncoding().get_id()}return null},get_marksCardTabViewModels:function(){return this.$7},get_marksModel:function(){return this.$8},get_dropTarget:function(){return null},get_title:function(){return tab.Strings.AuthCardTitleMarks},get_cardBackgroundColor:function(){return null},get_name:function(){return'marks'},get_collapsedTitleDetail:function(){return''},get_viewType:function(){return ix},get_viewModel:function(){return this},dispose:function(){this.$8.remove_newMarksCard(ss.mkdel(this,this.$3));this.$8.remove_activePaneSpecIdChanged(ss.mkdel(this,this.$2));this.$0();spiff.BaseViewModel.prototype.dispose.call(this)},addEncodingShelf:function(ni){this.$6[ni.get_paneId().toString()]=ni;if(this.$7.length===1){this.$7[0].get_encodingShelf().set_shelf(ni)}else{for(var nj=0;nj<this.$7.length;nj++){var nk=this.$7[nj];if(nk.get_marksCardTabEncoding().get_id()===ni.get_paneId()){nk.get_encodingShelf().set_shelf(ni);return}}}},triggerUpdateScrollContentAction:function(){this.$4.get_encodingShelf().triggerUpdateScrollContentAction()},$0:function(){for(var ni=0;ni<this.$7.length;ni++){var nj=this.$7[ni];nj.dispose()}ss.clear(this.$7)},$3:function(){this.$0();var ni=this.$8.get_marksCardTabEncodingModels();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];var nl=new iv;nl.init(nk);if(ss.getKeyCount(this.$6)===1){var nm=_.first(Object.keys(this.$6));nl.get_encodingShelf().set_shelf(this.$6[nm])}else if(ss.keyExists(this.$6,nk.get_id().toString())){nl.get_encodingShelf().set_shelf(this.$6[nk.get_id().toString()])}this.$7.push(nl)}this.$4=_.find(this.$7,ss.mkdel(this,function(nn){return nn.get_marksCardTabEncoding().get_id()===this.$8.get_activePaneSpecId()}));if(ss.isValue(this.$2$2)){this.$2$2()}if(ss.isValue(this.$2$4)){this.$2$4()}},$2:function(){var ni=_.find(this.$7,ss.mkdel(this,function(nj){return nj.get_marksCardTabEncoding().get_id()===this.$8.get_activePaneSpecId()}));if(ss.isValue(ni)){this.set_currentMarksCardTab(ni)}},$1:function(ni){this.$8.set_activePaneSpecId(ni.paneSpec)},selectMarksCardTab:function(ni){this.$8.set_activePaneSpecId(ni.get_marksCardTabEncoding().get_id())}},{createFakeViewModelForRender:function(){var ni=new tab.MarksCardModel(null);ni.update(tab.MarksCardModel.defaultMarksCardPresModel.value(),tab.NoopModelEventsHandler.get_noopContext());var nj=new iy(ni);nj.set_IsVisible(true);var nk=nj;tab.StartupUtils.callAfterModelsInitialized(function(){tab.MiscUtil.dispose$1(nk)});return nk}});var iz=global.tab.MarkSizePickerView=ss.mkType(a,'tab.MarkSizePickerView',function(ni){this.$b=tab.DomUtil.generateUniqueId();this.$c=null;ss.makeGenericType(spiff.BaseView$1,[iA]).call(this,ni,new iB);this.$c=this.get_template();this.get_viewModel().add_modelUpdated(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_modelUpdated(ss.mkdel(this,this.$7))}))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$c.label.text(tab.Strings.AuthMarkSizeLabel).attr('id',this.$b);this.$8();this.disposables.add(ss.mkdel(this,this.$a))},$8:function(){var ni=React.createElement(spiff.HorizontalSliderComponent,{ariaLabelledBy:this.$b,minValue:0,maxValue:100,initialValue:ss.round(this.get_viewModel().get_currentFraction()*100),disabled:false,width:200,onValueChanged:ss.mkdel(this,this.$9),showValueTextBox:true,showPercentageSign:true});ReactDOM.render(ni,this.$c.slider.get(0))},$a:function(){ReactDOM.unmountComponentAtNode(this.$c.slider.get(0))},$7:function(){this.$8()},$9:function(ni){this.get_viewModel().set_currentFraction(ni/100)}});var iA=global.tab.MarkSizePickerViewModel=ss.mkType(a,'tab.MarkSizePickerViewModel',function(ni){this.$1=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$1=ni;this.$1.add_newMarkSize(ss.mkdel(this,this.$0));this.disposables.add(ss.mkdel(this,function(){this.$1.remove_newMarkSize(ss.mkdel(this,this.$0))}))},{add_modelUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_modelUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_viewType:function(){return iz},get_viewModel:function(){return this},get_currentFraction:function(){return this.$1.get_currentSliderFraction()},set_currentFraction:function(ni){var nj=this.$1.get_transform().fractionToValue(ni);if(Math.abs(this.$1.get_currentMarkSize()-nj)>0.001){if(this.$1.get_parentModel().get_currentPrimitiveType().actualPrimitiveType==='heatmap'){tab.PaneClientCommands.setDensityKernelSize(this.$1.get_parentModel(),nj)}else{tab.PaneClientCommands.setMarkSize(this.$1.get_parentModel(),nj)}}},$0:function(){this.$2$1()},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ni){}});var iB=global.tab.MarkSizePickerViewTemplate=ss.mkType(a,'tab.MarkSizePickerViewTemplate',function(){this.label=null;this.slider=null;spiff.Template.call(this,$("<div class='tabAuthMarkSizePickerContent'>\n            <div class='tabAuthMarkSizeLabel'></div>\n            <div class='tabAuthMarkSizeSlider'></div>\n        </div>"));this.label=this.getElementBySelector('.tabAuthMarkSizeLabel');this.slider=this.getElementBySelector('.tabAuthMarkSizeSlider')});var iC=global.tab.MarksToLabelComponent=ss.mkType(a,'tab.MarksToLabelComponent',function(ni){this.$n=null;this.$m=null;this.$o=null;spiff.PureRenderComponent.call(this,ni);var nj=new iE;nj.marksToLabelDropdownEnabled=ni.marksToLabelDropdownEnabled;nj.marksToLabelCurrentMode=ni.marksToLabelCurrentMode;nj.currentScope=ni.currentScope;nj.currentFieldCaption=ni.currentFieldCaption;nj.lineEndsFirstChecked=ni.lineEndFirstChecked;nj.lineEndsLastChecked=ni.lineEndLastChecked;nj.minMaxStartChecked=ni.minMaxStartChecked;nj.minMaxEndChecked=ni.minMaxEndChecked;nj.allowLabelOverlapChecked=ni.allowLabelOverlapChecked;this.state=nj;this.$n=this.$0(this.props.marksToLabelEnabledModes);this.$m=this.$0(this.props.enabledScopes);this.$o=this.$0(this.props.fieldsCaptions)},{$0:function(ni){var nj=[];for(var nk=0;nk<ni.length;nk++){var nl=ni[nk];nj.push({value:nl})}return nj},$l:function(){return ss.equalsT(tab.Strings.MarksToLabelModeRange,this.state.marksToLabelCurrentMode)||ss.equalsT(tab.Strings.MarksToLabelModeMostRecent,this.state.marksToLabelCurrentMode)},$h:function(){return ss.equalsT(tab.Strings.MarksToLabelModeRange,this.state.marksToLabelCurrentMode)},$j:function(){return ss.equalsT(tab.Strings.MarksToLabelModeRange,this.state.marksToLabelCurrentMode)},$i:function(){return ss.equalsT(tab.Strings.MarksToLabelModeLineEnds,this.state.marksToLabelCurrentMode)},$k:function(){return this.props.shouldShowAllowLabelOverlapCheckbox||this.$i()||this.$j()},$3:function(){return React.createElement(SharedWidgets.SingleSelectDropdown,{className:'tabMarksToLabelModeDropdownContainer',label:tab.Strings.MarksToLabelControlLabel,type:1,disabled:!this.state.marksToLabelDropdownEnabled,list:React.createElement(SharedWidgets.List,{items:Array.prototype.slice.call(this.$n)}),value:this.state.marksToLabelCurrentMode,onChange:ss.mkdel(this,this.$a),testId:'MarksToLabelModeDropdown'})},$5:function(){if(!this.$l()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelScopeContainer'},React.createElement(SharedWidgets.SingleSelectDropdown,{label:tab.Strings.MarksToLabelScopeLabel,type:1,disabled:!this.state.marksToLabelDropdownEnabled,list:React.createElement(SharedWidgets.List,{items:Array.prototype.slice.call(this.$m)}),value:this.state.currentScope,onChange:ss.mkdel(this,this.$d),testId:'MarksToLabelScopeDropdown'}))}},$2:function(){if(!this.$h()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelFieldsContainer'},React.createElement(SharedWidgets.SingleSelectDropdown,{label:tab.Strings.MarksToLabelFieldLabel,type:1,disabled:!this.state.marksToLabelDropdownEnabled,list:React.createElement(SharedWidgets.List,{items:Array.prototype.slice.call(this.$o)}),value:this.state.currentFieldCaption,onChange:ss.mkdel(this,this.$7),testId:'MarksToLabelFieldsDropdown'}))}},$g:function(){if(!this.$j()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelCheckboxContainer'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelLabelMinValueLabel,checked:this.state.minMaxStartChecked,testId:'MarksToLabelMinMaxCheckboxShowStart',handleChange:ss.mkdel(this,this.$c),disabled:!this.state.marksToLabelDropdownEnabled}),React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelLabelMaxValueLabel,checked:this.state.minMaxEndChecked,testId:'MarksToLabelMinMaxCheckboxShowEnd',handleChange:ss.mkdel(this,this.$b),disabled:!this.state.marksToLabelDropdownEnabled}))}},$f:function(){if(!this.$i()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelCheckboxContainer'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelLabelStartOfLine,checked:this.state.lineEndsFirstChecked,testId:'MarksToLabelLineEndsShowFirst',handleChange:ss.mkdel(this,this.$8),disabled:!this.state.marksToLabelDropdownEnabled}),React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelLabelEndOfLine,checked:this.state.lineEndsLastChecked,testId:'MarksToLabelLineEndsShowLast',handleChange:ss.mkdel(this,this.$9),disabled:!this.state.marksToLabelDropdownEnabled}))}},$e:function(){if(!this.props.shouldShowAllowLabelOverlapCheckbox){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelCheckboxContainer'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelAllowOverlapLabel,checked:this.state.allowLabelOverlapChecked,testId:'MarksToLabelAllowOverlap',handleChange:ss.mkdel(this,this.$6),disabled:!this.state.marksToLabelDropdownEnabled}))}},$4:function(){if(!this.$k()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelOptionsContainer'},spiff.DOMElements.span({},tab.Strings.MarksToLabelOptionsLabel),spiff.DOMElements.div({className:'tabMarksToLabelCheckboxesContainer'},this.$e(),this.$g(),this.$f()))}},render:function(){return spiff.DOMElements.div({},spiff.DOMElements.hr({className:'tabMarksToLabelComponentSeparator'}),this.$3(),this.$5(),this.$2(),this.$4())},$1:function(){var ni=new iE;ni.allowLabelOverlapChecked=this.state.allowLabelOverlapChecked;ni.marksToLabelCurrentMode=this.state.marksToLabelCurrentMode;ni.marksToLabelDropdownEnabled=this.state.marksToLabelDropdownEnabled;ni.currentScope=this.state.currentScope;ni.currentFieldCaption=this.state.currentFieldCaption;ni.minMaxStartChecked=this.state.minMaxStartChecked;ni.minMaxEndChecked=this.state.minMaxEndChecked;ni.lineEndsFirstChecked=this.state.lineEndsFirstChecked;ni.lineEndsLastChecked=this.state.lineEndsLastChecked;return ni},$d:function(ni){var nj=this.$1();nj.currentScope=ni;this.setState(nj);this.props.scopeChanged(ni)},$7:function(ni){var nj=this.$1();nj.currentFieldCaption=ni;this.setState(nj);this.props.fieldCaptionChanged(ni)},$8:function(ni){var nj=this.$1();nj.lineEndsFirstChecked=ni;this.setState(nj);this.props.lineEndsFirstChanged(ni)},$9:function(ni){var nj=this.$1();nj.lineEndsLastChecked=ni;this.setState(nj);this.props.lineEndsLastChanged(ni)},$c:function(ni){var nj=this.$1();nj.minMaxStartChecked=ni;this.setState(nj);this.props.minMaxStartChanged(ni)},$b:function(ni){var nj=this.$1();nj.minMaxEndChecked=ni;this.setState(nj);this.props.minMaxEndChanged(ni)},$6:function(ni){var nj=this.$1();nj.allowLabelOverlapChecked=ni;this.setState(nj);this.props.allowLabelOverlapChanged(ni)},$a:function(ni){var nj=this.$1();nj.marksToLabelCurrentMode=ni;this.setState(nj);this.props.marksToLabelModeChanged(ni)}});var iD=global.tab.MarksToLabelProps=ss.mkType(a,'tab.MarksToLabelProps',function(){this.marksToLabelDropdownEnabled=false;this.marksToLabelEnabledModes=null;this.marksToLabelCurrentMode=null;this.marksToLabelModeChanged=null;this.enabledScopes=null;this.currentScope=null;this.scopeChanged=null;this.fieldsCaptions=null;this.currentFieldCaption=null;this.fieldCaptionChanged=null;this.lineEndFirstChecked=false;this.lineEndLastChecked=false;this.lineEndsFirstChanged=null;this.lineEndsLastChanged=null;this.minMaxStartChecked=false;this.minMaxEndChecked=false;this.minMaxStartChanged=null;this.minMaxEndChanged=null;this.allowLabelOverlapChecked=false;this.allowLabelOverlapChanged=null;this.shouldShowAllowLabelOverlapCheckbox=false});var iE=global.tab.MarksToLabelState=ss.mkType(a,'tab.MarksToLabelState',function(){this.marksToLabelDropdownEnabled=false;this.marksToLabelCurrentMode=null;this.currentScope=null;this.currentFieldCaption=null;this.lineEndsFirstChecked=false;this.lineEndsLastChecked=false;this.minMaxStartChecked=false;this.minMaxEndChecked=false;this.allowLabelOverlapChecked=false});var iF=global.tab.MenuBarBuilder=ss.mkType(a,'tab.MenuBarBuilder',function(){},{buildMenuItems:function(){var ni=[];ni.push({itemId:'file',title:tab.Strings.AuthMenuBarFile,cssClassName:'fileMenu'});ni.push({itemId:'data',title:tab.Strings.AuthMenuBarData,cssClassName:'dataMenu'});this.addModeSpecificMenus(ni);ni.push({itemId:'help',title:tab.Strings.AuthMastheadHelp,cssClassName:'helpMenu'});return ni},addModeSpecificMenus:null,buildHelpMenu:function(ni,nj,nk,nl,nm){ni.additionalMenuClass='tabHelpContextMenu';var nn=[];nn.push((new spiff.MenuItemBuilder).isTextInput(true).data(nk).enabled(true).description(tab.Strings.AuthMastheadHelpSearch).build());var no=nn;this.addModeSpecificHelpItems(nj,no);iF.$0(no);var np=spiff.MenuViewModel.createForMenu(new spiff.Menu(no),function(nq){var nr=_.indexOf(no,nq);bx.$3('Help',nq,nr);tab.WidgetUtil.commandMenuItemClicked(nq)},nl,null);np.set_shouldAnimateOnClose(false);return np},addModeSpecificHelpItems:null},{create:function(){return iF.create$1('document')},create$1:function(ni){if(ni==='data-tab'){return new eK}else if(ni==='document'){return new ms}else{return new ms}},$0:function(ni){if(tsConfig.is_saas){ss.add(ni,iF.newMenuLink(tab.Strings.HelpMenuItemContactSupport,tsConfig.contact_support_uri,'_blank',null,'Support'))}else if(!tsConfig.isPublic){var nj=(tsConfig.useOfflineHelp?tab.UriUtil.getOfflineHelpHref(''):ss.formatString('{0}/support','https://www.tableau.com'));ss.add(ni,iF.newMenuLink(tab.Strings.HelpMenuItemContactSupport,nj,'_blank',null,'Support'))}},$1:function(){var ni=tab.ApplicationModel.get_instance().get_workbook();return ss.isValue(ni)&&ni.get_isEditingPublishedDatasource()},newMenuLink:function(ni,nj,nk,nl,nm){var nn=new spiff.MenuItem;nn.data=function(){tab.WindowHelper.open(nj,nk)};nn.name=ni;nn.readId=nm;nn.enabled=ss.isValue(nj);nn.description=nl;var no=nn;return no},makeWebAuthorHelpUri:function(ni){if(tsConfig.isPublic&&!tabBootstrap.FeatureFlags.isEnabled('PublicWebAuthoring_M3')){return tab.UriUtil.getPublicHelpHref()}var nj=by.$0[ni-1];var nk=ss.formatString('server-webauthor{0}',ni);if(iF.$1()){nk='server-edit-data';return tab.UriUtil.makeHelpUri(nk,'')}return tab.UriUtil.makeHelpUri(nk,nj)}});var iG=global.tab.MonotonicallyIncreasingKeyFactory=ss.mkType(a,'tab.MonotonicallyIncreasingKeyFactory',function(){this.$0=0},{generate:function(ni){this.$0++;return this.$0.toString()}});var iH=global.tab.MoveSelectedZoneShortcut=ss.mkType(a,'tab.MoveSelectedZoneShortcut',function(ni,nj){this.$0=null;this.$1=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=ni;this.$1=nj},{getAdditionalOptions:function(){var ni=new Object;ni.propagation=2;return ni},getKeyComboOrKeyCombos:function(){return new KeyboardShortcuts.KeyCombos(iH.$0('ArrowLeft'),iH.$0('ArrowRight'),iH.$0('ArrowUp'),iH.$0('ArrowDown'))},isAllowed:function(ni){var nj=$(ni.target);var nk=!nj.is('.'+'tab-LayoutTree')&&!nj.is('.'+'tab-LayoutTreeNode');return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,ni)&&nk&&this.$0()},executeShortcut:function(ni){var nj=(ni.shiftKey?10:1);var nk=ni.which;switch(nk){case 39:{this.$1(nj,0);break}case 37:{this.$1(-nj,0);break}case 40:{this.$1(0,nj);break}case 38:{this.$1(0,-nj);break}default:{return}}},getTelemetryKey:function(){return'Move Selected Zone'}},{$0:function(ni){var nj=new Object;nj.shift='optional';return new KeyboardShortcuts.KeyCombo(ni,nj)}});var iI=global.tab.MoveZoneWithinLayoutTreeProps=ss.mkType(a,'tab.MoveZoneWithinLayoutTreeProps',function(ni,nj){this.$1$1=null;this.$1$2=null;this.set_getParentId(ni);this.set_getNextSibling(nj)},{get_getParentId:function(){return this.$1$1},set_getParentId:function(ni){this.$1$1=ni},get_getNextSibling:function(){return this.$1$2},set_getNextSibling:function(ni){this.$1$2=ni}});var iJ=global.tab.NewDashboardButtonModel=ss.mkType(a,'tab.NewDashboardButtonModel',function(ni){lP.call(this,tab.Strings.NewDashboardName,'tabAuthTabNewDashboardBtn','tabAuthNewDashboardIcon',function(){ni.createNewDashboard(true)},null)});var iK=global.tab.NewStoryboardButtonModel=ss.mkType(a,'tab.NewStoryboardButtonModel',function(ni){lP.call(this,tab.Strings.NewStoryName,'tabAuthTabNewStoryBtn','tabAuthNewStoryIcon',function(){ni.createNewStoryboard(true)},null)});var iL=global.tab.NewWorksheetButtonModel=ss.mkType(a,'tab.NewWorksheetButtonModel',function(ni){lP.call(this,tab.Strings.NewWorksheetName,'tabAuthTabNewWorksheetBtn','tabAuthNewWorksheetIcon',function(){ni.createNewWorksheet(true)},iM.keyCombo.getHintText())});var iM=global.tab.NewWorksheetKeyboardShortcut=ss.mkType(a,'tab.NewWorksheetKeyboardShortcut',function(ni){this.$0=null;KeyboardShortcuts.CommandKeyboardShortcut.call(this);this.$0=ni},{shouldRequireCommandCheck:function(){return false},executeShortcut:function(ni){this.$0.createNewWorksheet(false)},getCommandId:function(){return{ns:'tabdoc',cmd:'new-worksheet'}},getKeyComboOrKeyCombos:function(){return iM.keyCombo}});var iN=global.tab.NoFieldColorOptionView=ss.mkType(a,'tab.NoFieldColorOptionView',function(ni){this.$8=null;this.$7=null;this.dom=null;ss.makeGenericType(spiff.BaseView$1,[iO]).call(this,ni,new iP);this.dom=this.get_template();this.$8=tab.ObjectRegistry.newView(dx).call(null,[this.get_viewModel().get_colorPicker()]);this.disposables.add$1(this.$8);this.$7=tab.ObjectRegistry.newView(de).call(null,[this.get_viewModel().get_colorOptionEffectsViewModel()]);this.disposables.add$1(this.$7)},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$8.addToDom(this.dom.colorPickerContainer);this.$7.addToDom(this.dom.colorEffectsContainer)}});var iO=global.tab.NoFieldColorOptionViewModel=ss.mkType(a,'tab.NoFieldColorOptionViewModel',function(ni){this.$2=null;this.$1=null;this.$0=null;spiff.BaseViewModel.call(this);this.$2=ni;this.$1=new dy(this.$2,true);this.$0=new df(this.$2)},{get_colorPicker:function(){return this.$1},get_colorOptionEffectsViewModel:function(){return this.$0},get_viewType:function(){return iN},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},dispose:function(){this.$1.dispose();this.$0.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},updateUberPopupViewModel:function(ni){}});var iP=global.tab.NoFieldColorOptionViewTemplate=ss.mkType(a,'tab.NoFieldColorOptionViewTemplate',function(){this.colorPickerContainer=null;this.colorEffectsContainer=null;spiff.Template.call(this,$("<div class='tabAuthNoFieldsColorOptionContent'>\n            <div class='tabColorPickerContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"));this.colorPickerContainer=this.getElementBySelector('.tabColorPickerContainer');this.colorEffectsContainer=this.getElementBySelector('.tabColorEffectsContainer')});var iQ=global.tab.NonEncodedColorPaletteOptionView=ss.mkType(a,'tab.NonEncodedColorPaletteOptionView',function(ni){this.$a=null;ss.makeGenericType(spiff.BaseView$1,[iR]).call(this,ni,new iS);this.$a=this.get_template();this.get_viewModel().add_colorPaletteSettingsUpdated(ss.mkdel(this,this.$8));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_colorPaletteSettingsUpdated(ss.mkdel(this,this.$8))}))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$a.nonEncodedColorPaletteLabel.text(tab.Strings.TabAuthColorEditLabel);this.$8();this.disposables.add(ss.mkdel(this,this.$9))},$8:function(){var ni=this.get_viewModel().get_selectedPalette();var nj=this.get_viewModel().getAllPalettes();var nk=false;if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(nj)||nj.length<=0){nk=true;ni={colorPaletteId:'DISABLED',colorPaletteName:''};nj=[ni]}var nl=React.createElement(SharedWidgets.List,{items:nj.map(ss.mkdel(this,function(np){return{value:np.colorPaletteId.toString(),content:this.$7(np)}})),style:{maxHeight:'350px'}});var nm=ni.colorPaletteId.toString();var nn=this.get_viewModel();var no=React.createElement(SharedWidgets.SingleSelectDropdown,{type:0,list:nl,value:nm,disabled:nk,onChange:ss.mkdel(nn,nn.onSelectedPaletteChange),testId:'nonEncodedColorPaletteColorPaletteDropdown'});ReactDOM.render(no,this.$a.nonEncodedColorPaletteDropdown.get(0))},$9:function(){ReactDOM.unmountComponentAtNode(this.$a.nonEncodedColorPaletteDropdown.get(0))},$7:function(ni){return spiff.DOMElements.div({style:{display:'flex',flexDirection:'row'}},spiff.DOMElements.div({key:ni.colorPaletteId.toString(),className:'tab-AuthPaletteIcon tabAuthPalette-small-'+ni.colorPaletteId.toString()}),spiff.DOMElements.span({style:{marginLeft:'6px'}},ni.colorPaletteName))}});var iR=global.tab.NonEncodedColorPaletteOptionViewModel=ss.mkType(a,'tab.NonEncodedColorPaletteOptionViewModel',function(ni){this.$3=null;this.$1=[];this.$2='tableau20_10_0';this.$2$1=null;spiff.BaseViewModel.call(this);this.$3=ni;this.$3.add_newMarksCardTabEncoding(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_newMarksCardTabEncoding(ss.mkdel(this,this.$0))})));(new tab.GetSankeyColorPalettesCmd).invoke().done(ss.mkdel(this,function(nj){this.$1=nj.colorPalettes;this.$2$1()}))},{add_colorPaletteSettingsUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_colorPaletteSettingsUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_selectedPalette:function(){if(this.getAllPalettes().length<=0){return null}var ni=this.$3.get_colorEncodingDropdown().categoricalColor;if(ss.isValue(ni)){var nj=ni.colorPaletteId||this.$2;var nk=_.find(this.$1,function(nl){return ss.referenceEquals(nl.colorPaletteId,nj)});if(ss.isValue(nk)){return nk}}return this.$1[0]},get_viewType:function(){return iQ},get_viewModel:function(){return this},getAllPalettes:function(){return this.$1||[]},disposeViewModel:function(){this.dispose()},$0:function(){this.$2$1()},onSelectedPaletteChange:function(ni){var nj=new tab.SetSankeyColorPaletteCmd;nj.set_colorPalette(ni);nj.set_marksSpec(this.$3.get_id());nj.invoke()},updateUberPopupViewModel:function(ni){ni.options.additionalClassNames=['tabAuthNonEncodedColorPaletteOptionUberPopup']}});var iS=global.tab.NonEncodedColorPaletteOptionViewTemplate=ss.mkType(a,'tab.NonEncodedColorPaletteOptionViewTemplate',function(){this.nonEncodedColorPaletteDropdown=null;this.nonEncodedColorPaletteLabel=null;spiff.Template.call(this,$("<div class='tabAuthNonEncodedColorPaletteOptionContent'>\n            <div class='tabAuthNonEncodedColorPaletteControl'>\n              <div class='tabAuthNonEncodedColorPaletteLabel'></div>\n              <div class='tabAuthNonEncodedColorPaletteDropdown'></div>\n            </div>\n          </div>"));this.nonEncodedColorPaletteLabel=this.getElementBySelector('.tabAuthNonEncodedColorPaletteLabel');this.nonEncodedColorPaletteDropdown=this.getElementBySelector('.tabAuthNonEncodedColorPaletteDropdown')});var iT=global.tab.NotificationCommandRedirectHandler=ss.mkType(a,'tab.NotificationCommandRedirectHandler',null,null,{$0:function(ni){var nj=$.Deferred();var nk=ni['notificationPresModel'.toString()];var nl=$('<div></div>').append($('<div></div>').text(nk.notificationMsg).css('white-space','pre-wrap'));var nm=nl.html();tab.ConfirmationViewModel.showNotification(nm,function(){nj.resolve()});return nj.promise()}});var iU=global.tab.NumericBinEditProxy=ss.mkType(a,'tab.NumericBinEditProxy');var iV=global.tab.OrderingAddressingListItemViewModel=ss.mkType(a,'tab.OrderingAddressingListItemViewModel',function(){this.$1$1=null;this.$1$2=null},{get_addressingName:function(){return this.$1$1},set_addressingName:function(ni){this.$1$1=ni},get_addressingValue:function(){return this.$1$2},set_addressingValue:function(ni){this.$1$2=ni}});var iW=global.tab.OrderingTypeListItemCreator=ss.mkType(a,'tab.OrderingTypeListItemCreator',function(){},{createListItemContent:function(ni){var nj="<span class='tab-list-item-label'></span>";var nk=$(nj);var nl=ni.get_data();if(ss.isValue(nl)){nk.text(nl.get_orderingTypeCaption())}return nk}});var iX=global.tab.OrderingTypeListItemViewModel=ss.mkType(a,'tab.OrderingTypeListItemViewModel',function(){this.$1$1=null;this.$1$2=null},{get_orderingTypeCaption:function(){return this.$1$1},set_orderingTypeCaption:function(ni){this.$1$1=ni},get_orderingTypeValue:function(){return this.$1$2},set_orderingTypeValue:function(ni){this.$1$2=ni}});var iY=global.tab.PalettePage=ss.mkType(a,'tab.PalettePage',function(){this.$1$1=null;this.$1$2=null;this.set_paletteGroups([])},{get_warningPageModel:function(){return this.$1$1},set_warningPageModel:function(ni){this.$1$1=ni},get_paletteGroups:function(){return this.$1$2},set_paletteGroups:function(ni){this.$1$2=ni},get_isWarningPage:function(){return ss.isValue(this.get_warningPageModel())},addGroup:function(ni){this.get_paletteGroups().push(new dn(ni))}});var iZ=global.tab.PanelControlMode=ss.mkEnum(a,'tab.PanelControlMode',{dataAnalytics:0});var ja=global.tab.PaneView$1=ss.mkType(a,'tab.PaneView$1',function(ni){var nj=ss.registerGenericClassInstance(ja,[ni],function(nk){this.$8=null;this.$7=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[ni]).call(this,nk,new h);this.$8=this.get_template();var nl=ss.safeCast(nk,tab.IPaneContent);this.$8.$2.text(nl.get_title());this.$7=tab.ObjectRegistry.newView$1(ss.makeGenericType(tab.IView$1,[tab.IViewModel])).call(null,nl.get_contentViewType(),[nl.get_contentViewModel()]);if(!ss.isNullOrEmptyString(nl.get_additionalContentViewClass())){this.$7.get_rootElement().addClass(nl.get_additionalContentViewClass())}},{get_paneContents:function(){return[this.get_viewModel()]},get_activePaneTitle:function(){return this.$3$1},set_activePaneTitle:function(nk){this.$3$1=nk},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7.addToDom(this.$8.$1)},dispose:function(){this.$7.dispose();ss.makeGenericType(spiff.BaseView$1,[ni]).prototype.dispose.call(this)}},null,function(){return ss.makeGenericType(spiff.BaseView$1,[ni])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[ni]),ss.IDisposable,tab.IAppendableView,gT]});tab.ObjectRegistry.registerType(nj,nj).call(null);return nj});ss.initGenericClass(ja,1);var jb=global.tab.PercentTotalTableCalcViewModel=ss.mkType(a,'tab.PercentTotalTableCalcViewModel',function(ni){this.$0=null;mq.call(this);this.$0=ni;this.$0.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})))},{get_allPages:function(){return this.$0.get_allPages()},get_allPagesState:function(){return this.$0.get_allPagesState()},get_model:function(){return this.$0},onModelUpdated:function(){},allPagesChanged:function(ni){if(ni===this.get_allPages()){return}var nj=new tab.TableCalcSetPercentTotalOptionsCmd;nj.set_uiBlocking('immediately');nj.set_allPages(ni);nj.set_calcNestingLevel(this.get_model().get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.get_model().get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))}});var jc=global.tab.PillDragAvatar=ss.mkType(a,'tab.PillDragAvatar',function(ni,nj){this.$7=null;this.$5=null;this.$6=false;spiff.Widget.call(this,$("\n<span class='tabAuthPillAvatar'>\n    <div class='tabAuthPillAvatarLabel'>{0}</div>\n</span>"));this.set_label(ni);this.set_fieldType(nj)},{get_rootElement:function(){return this.element},get_viewModel:function(){return null},get_label:function(){return this.$7},set_label:function(ni){this.$7=ni;if(!this.$6){this.$4(null)}},get_fieldType:function(){return this.$5},set_fieldType:function(ni){this.$5=ni;var nj=false;var nk=false;var nl=false;var nm=false;switch(this.$5){case'ordinal':{nj=true;break}case'quantitative':{nk=true;break}case'nominal':{nl=true;break}default:{nm=true;break}}this.element.toggleClass('tabAuthPillOrdinal',nj);this.element.toggleClass('tabAuthPillQuantatative',nk);this.element.toggleClass('tabAuthPillNominal',nl);this.element.toggleClass('tabAuthPillOther',nm)},$4:function(ni){var nj=this.element.find('.'+'tabAuthPillAvatarLabel');var nk=ni;if(ss.isNullOrUndefined(nk)){nk=this.get_label()}nj.text(nk)},setCustomLabel:function(ni){this.$6=true;this.$4(ni)},removeCustomLabel:function(){if(this.$6){this.$4(null)}this.$6=false}});var jd=global.tab.PillDragInstance=ss.mkType(a,'tab.PillDragInstance',function(ni,nj,nk,nl){this.$1=null;this.$2=null;this.$4$1=false;cp.call(this,ni,new jc(nj,nk));this.$1=this.get_dragAvatar();this.$2=nl||je.noOp},{get_fields:function(){if(this.hasOnlyFields()){return this.draggedObject}else if(this.hasOnlyPills()){var ni=_.map(this.draggedObject,function(nj){return nj.get_field()});return ni}return null},get_fieldNames:function(){return _.map(this.get_fields(),function(ni){return ni.get_globalName()})},get_pills:function(){return(this.hasOnlyPills()?this.draggedObject:null)},get_pill:function(){var ni=this.get_pills();return ni[0]},get_defaultDropCursor:function(){return this.$2.cursor(this.isCopyDrag)},get_readyToDrop:function(){return this.finalDrop.state()==='resolved'},get_canDropOnShowMe:function(){return this.$4$1},set_canDropOnShowMe:function(ni){this.$4$1=ni},hasOnlyFields:function(){if(ss.isInstanceOfType(this.draggedObject,Array)){var ni=this.draggedObject;return _.every(ni,function(nj){return ss.isInstanceOfType(nj,tab.FieldModel)})}return ss.isInstanceOfType(this.draggedObject,tab.FieldModel)},hasOnlyPills:function(){if(ss.isInstanceOfType(this.draggedObject,Array)){var ni=this.draggedObject;return _.every(ni,function(nj){return ss.isInstanceOfType(nj,jh)})}return ss.isInstanceOfType(this.draggedObject,jh)},resolve:function(ni){if(this.finalDrop.state()==='resolved'||ss.isNullOrUndefined(ni)){return}this.drag=ni;this.set_canDropOnShowMe(this.drag.canDropOnShowme);if(this.hasOnlyFields()){this.updateDraggedFieldFromServer(this.drag)}if(ss.isValue(EventUtils.DragDropManager.get_currentTarget())){var nj=EventUtils.DragDropManager.get_currentTarget().getDropCursor(this);EventUtils.DragDropManager.setDragCursor(nj)}this.finalDrop.resolve(this)},updateDraggedFieldFromServer:function(ni){var nj=[];var nk=this.get_fields();var nl=true;for(var nm=0;nm<ni.shelfDropModels.length;nm++){var nn=ni.shelfDropModels[nm];if(nn.fieldEncodings.length===0){continue}for(var no=0;no<nn.fieldEncodings.length;no++){var np=nn.fieldEncodings[no];var nq={$:np.fn};nl=nl&&_.any(nk,ss.mkdel({newGlobalName:nq},function(nt){return ss.referenceEquals(nt.get_globalName(),this.newGlobalName.$)}));if(ss.isValue(nq.$)){var nr=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();var ns=nr.findField(nq.$);if(ss.isValue(ns)&&!ss.contains(nj,ns)){nj.push(ns)}}}break}if(nj.length>0&&!nl){this.draggedObject=nj;this.$1.set_label(nj[0].get_description())}},reject:function(ni){if(this.finalDrop.state()==='resolved'||!ss.isNullOrUndefined(ni)){return}if(ss.isNullOrUndefined(this.drag)){this.drag=ni}this.finalDrop.reject(this)},dropToNowhereAction:function(){this.$2.action(this.isCopyDrag)}});var je=global.tab.PillDropDefaultAction=ss.mkType(a,'tab.PillDropDefaultAction',function(){this.action=null;this.cursor=null});var jf=global.tab.PillTelemetry=ss.mkType(a,'tab.PillTelemetry',null,null,{logPillMenuItemEvent:function(ni,nj,nk,nl,nm){var nn=new tab.MenuItemTelemetryConfigOptions;nn.set_commands(nk);nn.menuItems=nl;nn.set_menuItem(nm);nn.set_menuPrefix('');nn.set_menuTextMayBeSensitive(false);var no=nn;var np=tab.CommandsTelemetryUtils.getMenuItemTelemetryInfoFromMenuAndCommands(no);var nq=ss.mkdict(['TriggerMethod',nj,'ShelfType',ni.shelfVM.get_shelfType(),'EncodingType',ni.get_pill().get_encodingType(),'FieldRole',ni.get_role(),'FieldType',ni.get_field().get_fieldType(),'Command',(ss.isValue(np)?np.get_commandName():''),'FullName',(ss.isValue(np)?np.fullMenuItemName:nm.name)]);var nr=ni.get_field().pm;if(ss.isValue(nr)){nq['DataType']=nr.dataType;nq['Aggregation']=nr.aggregation}if(ni.get_field().get_isParameter()){nq['IsParameter']=true}if(ni.get_field().get_isInvalid()){nq['IsInvalid']=true}if(nm.checkState!==0){nq['CurrentCheckState']=true}tab.OnlineAnalyticsClient.logEvent('Authoring_PillMenu',nq)}});var jg=global.tab.PillView=ss.mkType(a,'tab.PillView',function(ni,nj){this.pillStrategy=null;ss.makeGenericType(spiff.BaseView$1,[jh]).call(this,ni,nj);this.pillStrategy=new ge(ni,nj)},{get_hasExternalIcon:function(){return this.pillStrategy.get_hasExternalIcon()},get_dom:function(){return this.pillStrategy.get_dom()},dispose:function(){this.pillStrategy.dispose();ss.makeGenericType(spiff.BaseView$1,[jh]).prototype.dispose.call(this)}});var jh=global.tab.PillViewModel=ss.mkType(a,'tab.PillViewModel',function(ni){this.$d=null;this.$c=null;this.$2$1=null;this.$2$2=null;this.shelfVM=null;spiff.BaseViewModel.call(this);this.shelfVM=ni;EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$4));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$4))}))},{add_pillChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_pillChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_showDragAccept:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_showDragAccept:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},get_pill:function(){return this.$d},set_pill:function(ni){if(ss.referenceEquals(this.$d,ni)){return}this.$d=ni;this.handlePillChanged()},get_item:function(){return this.$d.pm},get_field:function(){return this.$d.get_column()},get_indexInShelf:function(){return ss.indexOf(this.shelfVM.get_pills(),this)},get_displayName:function(){return this.$d.get_displayName()},get_role:function(){return this.$d.get_column().get_role()},get_displayAsMultipleFields:function(){return this.$d.get_isMultipleFields()},get_displayAsInvalid:function(){return!!this.get_item().isInvalid},get_displayAsOrdinal:function(){return this.$b()&&this.get_field().get_fieldType()==='ordinal'},get_displayAsQuantitative:function(){return this.$b()&&this.get_field().get_fieldType()==='quantitative'},get_displayAsNominal:function(){return this.$b()&&this.get_field().get_fieldType()==='nominal'},get_displayAsOther:function(){return this.$b()&&!this.get_displayAsOrdinal()&&!this.get_displayAsQuantitative()&&!this.get_displayAsNominal()},get_displayAsMeasure:function(){return this.$d.get_column().get_role()==='measure'},get_displayAsDimension:function(){var ni=this.$d.get_column().get_role()==='dimension';var nj=this.$d.get_column().get_role()==='unknown';return ni||nj},get_feedbackType:function(){return'dropfeedbackuponentry'},get_displayAsContext:function(){return!!this.$d.get_isContextFilter()},get_pillIdentifier:function(){return'tabPill'+this.get_item().shelfItemId},get_shouldShowDrillIcon:function(){if(tabBootstrap.Affordances.isOff('drill')){return false}return this.get_pill().get_hasDrill()},$b:function(){return!this.get_item().isInvalid&&!this.$d.get_isMultipleFields()},$9:function(){return this.$c},$a:function(ni){if(ss.referenceEquals(this.$c,ni)){return}this.$3();this.$c=ni;if(ss.isValue(this.$c)){this.$c.add_ctrlStateChanged(ss.mkdel(this,this.$8))}},dispose:function(){this.$3();spiff.BaseViewModel.prototype.dispose.call(this)},$4:function(ni){this.$3()},$3:function(){if(ss.isValue(this.$c)){this.$c.remove_ctrlStateChanged(ss.mkdel(this,this.$8));this.$c=null}},dragOver:function(ni){var nj=this.$1(ni);if(nj){this.$5(true);return this}return this.shelfVM.createPillDividerDropTarget(this.get_indexInShelf())},dragExit:function(ni){this.$5(false)},$5:function(ni){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(ni)}},acceptDrop:function(ni){var nj=$.Deferred();if(ss.isInstanceOfType(ni,cp)){var nk=ss.mkdel(this,function(nl){var nm=ss.safeCast(nl,cp);var nn=this.$1(nm);if(!nn){}else if(nm.hasOnlyPills()){var no=nm.get_pill();var np=nm.dropPositionToReplacePill(this);if(this.shelfVM.get_shelfType()==='filter-shelf'){var nq={shelfType:no.shelfVM.get_shelfType(),shelfPosIndex:no.get_indexInShelf(),shelfDropAction:'replace'};tab.ShelfClientCommands.launchFilterDialog(no.get_pill().get_column().get_globalName(),'drag-drop-shelf',np,nq,false,nm.isCopyDrag)}else{tab.ShelfClientCommands.replaceShelfPill(no.shelfVM.get_shelf(),no.get_pill(),this.shelfVM.get_shelf(),this.$d,np,nm.isCopyDrag)}}else if(nm.hasOnlyFields()){var nr=lw.filterFieldsToDropUsingShelfConfig(nm,this.shelfVM.get_shelfType(),this.shelfVM.get_pills().length,true);var ns=nm.dropPositionToReplacePill(this);if(this.shelfVM.get_shelfType()==='filter-shelf'&&nr.length===1){tab.ShelfClientCommands.launchFilterDialog(nr[0].get_globalName(),'drag-drop-schema',ns,null,nm.isRightDrag,nm.isCopyDrag)}else if(nm.shouldGetAggregationOfField(nr)){nm.selectAggregationForField(this.shelfVM.get_shelfType(),nr[0],ss.mkdel(this,function(nt){var nu=this.shelfVM.get_shelf();var nv=this.$d;var nw=[];nw.push(nt.selectedField);tab.ShelfClientCommands.replaceShelfPillWithField(nu,nv,nw,ns,nt.isRelativeDate)}))}else{tab.ShelfClientCommands.replaceShelfPillWithField(this.shelfVM.get_shelf(),this.$d,nr,ns,false)}}nj.resolve(nn)});if(ni.get_drop().state()==='resolved'){nk(ni)}else{ni.get_drop().done(nk)}}else{nj.resolve(false)}return nj},getDropTarget:function(ni){return this},getDropCursor:function(ni){if(this.$2(ni)){return spiff.CustomCursor.copy}return this.shelfVM.getDropCursor(ni)},$8:function(){EventUtils.DragDropManager.setDragCursor(this.getDropCursor(EventUtils.DragDropManager.get_currentDrag()))},$2:function(ni){if(!ss.isInstanceOfType(ni,cp)){return false}var nj=lw.filterFieldsToDropUsingShelfConfig(ni,this.shelfVM.get_shelfType(),this.shelfVM.get_pills().length,true);return nj.length>0},startDrag:function(ni){var nj=new jd([this],this.get_displayName(),this.get_field().get_fieldType(),(ss.isValue(this.shelfVM)?this.shelfVM.getPillDropDefaultAction(this):je.noOp));nj.isCopyDrag=ni.get_IsCtrlKey();this.$a(nj);var nk=tab.ShelfClientCommands.startDrag([this.$d.get_column()],this.$d.get_encodingType(),tab.ModelUtils.findActivePaneSpecId(),false,'drag-drop-none');nk.done(ss.mkdel(this,function(nl){if(ss.isNullOrUndefined(this.$9())){return}if(ss.isValue(nl)&&ss.isValue(nl.shelfDropModels)){this.$9().resolve(nl)}else{this.$9().reject(nl)}}));return this.$9()},acceptsDragType:function(){return 1},menuButtonClicked:function(ni,nj){tab.ShelfClientCommands.getShelfItemContextMenu(this.$d.pm.shelfItemId,this.shelfVM.get_shelfType(),this.shelfVM.get_shelf().get_paneId()).done(ss.mkdel(this,function(nk){if(ni.parents().find(document.body).length===0){ni=$('#'+this.get_pillIdentifier())}if(ni.length>0){var nl=nk.commands;this.$6(nl,ni,nj);this.setWorksheetLastPillClickedProperty(ni)}else{this.setWorksheetLastPillClickedProperty(null)}}))},$6:function(ni,nj,nk){var nl=this.$0(ni);var nm=spiff.MenuViewModel.createForMenu(nl,ss.mkdel(this,function(nn){jf.logPillMenuItemEvent(this,nk,ni,nl.menuItems,nn);tab.WidgetUtil.commandMenuItemClicked(nn)}),null,null);nm.show(new spiff.ShowMenuOptions(nj,true))},setWorksheetLastPillClickedProperty:function(ni){if(ss.isValue(cd.get_instance().get_viewModel().get_worksheet())){cd.get_instance().get_viewModel().get_worksheet().lastClickedPill=ni}},iconClicked:function(){if(this.get_shouldShowDrillIcon()){tab.ShelfClientCommands.drillOnPill(this.shelfVM.get_shelf(),this.get_pill(),this.get_indexInShelf())}},pillClicked:function(){},pillDoubleClicked:function(){this.$7(this.$d.get_defaultMenuCommand())},$7:function(ni){var nj=this.$0(ni);var nk=nj.defaultItem;if(ss.isValue(nk)){jf.logPillMenuItemEvent(this,'double-click',ni,nj.menuItems,nk);tab.WidgetUtil.commandMenuItemClicked(nk)}},updateEncodingType:function(ni){if(tab.EncodingTypeUtils.isEqual(ni,this.$d.get_encodingType())){return}tab.ShelfClientCommands.setItemEncodingType(this.shelfVM.get_shelf(),this.$d,ni)},handlePillChanged:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(this)}},$1:function(ni){if(!ni.get_hasPayload()||!ss.isInstanceOfType(ni,cp)){return false}if(this.shelfVM.get_dropState()===2&&!ni.payloadEquals(this)){return false}var nj=ni.dropPositionToReplacePill(this);return ss.isValue(nj)},$0:function(ni){var nj=[];if(ss.isValue(ni)){tab.WidgetUtil.newMenuItemsFromCommands(nj,ni,tab.WidgetUtil.createDropdownMenuCommandHandler,false,null)}return new spiff.Menu(nj)}});var ji=global.tab.PillViewTemplate=ss.mkType(a,'tab.PillViewTemplate',function(ni){this.drillIcon=null;this.icons=null;this.label=null;this.menuButton=null;this.dragSource=null;this.content=null;this.externalIcon=null;this.encodingType=null;spiff.Template.call(this,$(ni));var nj=ss.mkdel(this,this.getElementBySelector);this.drillIcon=nj('.tabAuthPillDrillIcon');this.icons=nj('.tabAuthPillIcons');this.label=nj('.tabAuthPillLabel');this.menuButton=nj('.tabAuthPillMenuBtn');this.content=nj('.tabAuthPillContent');this.externalIcon=nj('.tabAuthPillExternalIcon');this.encodingType=nj('.tabAuthPillEncodingType');this.dragSource=this.domRoot});var jj=global.tab.PlaceholderToolbarItems=ss.mkType(a,'tab.PlaceholderToolbarItems',null,null,{get_items:function(){return jj.$2},$0:function(){var ni=jj.$2;var nj=new tab.CommandItemWrapper(null);nj.set_commandsType('item');nj.set_name('Undo');nj.set_enabled(false);nj.set_iconRes('undo'.toString());ni.push(nj.get_item());var nk=jj.$2;var nl=new tab.CommandItemWrapper(null);nl.set_commandsType('item');nl.set_name('Redo');nl.set_enabled(false);nl.set_iconRes('redo'.toString());nk.push(nl.get_item());var nm=jj.$2;var nn=new tab.CommandItemWrapper(null);nn.set_commandsType('item');nn.set_name('Save');nn.set_enabled(false);nn.set_iconRes('save'.toString());nm.push(nn.get_item());var no=jj.$2;var np=new tab.CommandItemWrapper(null);np.set_commandsType('separator');no.push(np.get_item());var nq=jj.$2;var nr=new tab.CommandItemWrapper(null);nr.set_commandsType('item');nr.set_name('New Data Source');nr.set_enabled(false);nr.set_iconRes('new-connect'.toString());nq.push(nr.get_item());var ns=jj.$2;var nt=new tab.CommandItemWrapper(null);nt.set_commandsType('item');nt.set_name('Pause Auto Updates');nt.set_enabled(false);nt.set_iconRes('pause-updates'.toString());ns.push(nt.get_item());var nu=jj.$2;var nv=new tab.CommandItemWrapper(null);nv.set_commandsType('separator');nu.push(nv.get_item());var nw=jj.$2;var nx=new tab.CommandItemWrapper(null);nx.set_commandsType('item');nx.set_name('New Worksheet');nx.set_enabled(false);nx.set_iconRes('new-sheet'.toString());nw.push(nx.get_item());var ny=jj.$2;var nz=new tab.CommandItemWrapper(null);nz.set_commandsType('item');nz.set_name('Duplicate');nz.set_enabled(false);nz.set_iconRes('duplicate-sheet'.toString());ny.push(nz.get_item());var nA=jj.$2;var nB=new tab.CommandItemWrapper(null);nB.set_commandsType('item');nB.set_name('Clear Sheet');nB.set_enabled(false);nB.set_iconRes('clear-sheet'.toString());nA.push(nB.get_item());var nC=jj.$2;var nD=new tab.CommandItemWrapper(null);nD.set_commandsType('separator');nC.push(nD.get_item());var nE=jj.$2;var nF=new tab.CommandItemWrapper(null);nF.set_commandsType('item');nF.set_name('Swap Rows and Columns');nF.set_enabled(false);nF.set_iconRes('swap'.toString());nE.push(nF.get_item());var nG=jj.$2;var nH=new tab.CommandItemWrapper(null);nH.set_commandsType('item');nH.set_name('Sort Ascending');nH.set_enabled(false);nH.set_iconRes('sort-ascending'.toString());nG.push(nH.get_item());var nI=jj.$2;var nJ=new tab.CommandItemWrapper(null);nJ.set_commandsType('item');nJ.set_name('Sort Descending');nJ.set_enabled(false);nJ.set_iconRes('sort-descending'.toString());nI.push(nJ.get_item());var nK=jj.$2;var nL=new tab.CommandItemWrapper(null);nL.set_commandsType('item');nL.set_name('Totals');nL.set_enabled(false);nL.set_iconRes('totals'.toString());nK.push(nL.get_item());var nM=jj.$2;var nN=new tab.CommandItemWrapper(null);nN.set_commandsType('separator');nM.push(nN.get_item());var nO=jj.$2;var nP=new tab.CommandItemWrapper(null);nP.set_commandsType('item');nP.set_name('Highlight');nP.set_enabled(false);nP.set_iconRes('highlight-enable'.toString());nO.push(nP.get_item());var nQ=jj.$2;var nR=new tab.CommandItemWrapper(null);nR.set_commandsType('item');nR.set_name('Show Labels');nR.set_enabled(false);nR.set_iconRes('show-labels'.toString());nQ.push(nR.get_item());var nS=jj.$2;var nT=new tab.CommandItemWrapper(null);nT.set_commandsType('item');nT.set_name('Format Workbook');nT.set_enabled(false);nT.set_iconRes('format-workbook'.toString());nS.push(nT.get_item());var nU=jj.$2;var nV=new tab.CommandItemWrapper(null);nV.set_commandsType('item');nV.set_name('Fit');nV.set_enabled(false);nV.set_iconRes('viewsize'.toString());nU.push(nV.get_item());var nW=jj.$2;var nX=new tab.CommandItemWrapper(null);nX.set_commandsType('separator');nW.push(nX.get_item());var nY=jj.$2;var nZ=new tab.CommandItemWrapper(null);nZ.set_commandsType('item');nZ.set_name('Show/Hide Cards');nZ.set_enabled(false);nZ.set_iconRes('window-options'.toString());nY.push(nZ.get_item());var oa=jj.$2;var ob=new tab.CommandItemWrapper(null);ob.set_commandsType('separator');oa.push(ob.get_item());var oc=jj.$2;var od=new tab.CommandItemWrapper(null);od.set_commandsType('item');od.set_name('Download');od.set_enabled(false);od.set_iconRes('export'.toString());oc.push(od.get_item());var oe=jj.$2;var of=new tab.CommandItemWrapper(null);of.set_commandsType('item');of.set_name('Open in Desktop');of.set_enabled(false);of.set_iconRes('open-on-desktop'.toString());oe.push(of.get_item());var og=jj.$2;var oh=new tab.CommandItemWrapper(null);oh.set_commandsType('item');oh.set_name('Show Me');oh.set_enabled(false);oh.set_iconRes('showme'.toString());oh.set_command('tabdoc:web-show-me');og.push(oh.get_item())}});var jk=global.tab.PluggableCardItemView$1=ss.mkType(a,'tab.PluggableCardItemView$1',function(ni){var nj=ss.registerGenericClassInstance(jk,[ni],function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[ni]).call(this,nk,nl)},{appendToParentCardView:null},null,function(){return ss.makeGenericType(spiff.BaseView$1,[ni])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[ni]),ss.IDisposable,tab.IAppendableView]});return nj});ss.initGenericClass(jk,1);var jl=global.tab.PublishOption=ss.mkType(a,'tab.PublishOption',function(ni,nj,nk){this.displayName=null;this.onExecute=null;this.isEnabled=false;this.displayName=ni;this.onExecute=nj;this.isEnabled=nk});var jm=global.tab.PublishToastAfterPublishAs=ss.mkType(a,'tab.PublishToastAfterPublishAs',null,null,{showToastIfNeeded:function(){var ni=(ss.isValue(window.sessionStorage)?window.sessionStorage.getItem(jm.publishToastLocation):null);if(!tab.MiscUtil.isNullOrEmpty$1(ni)){window.sessionStorage.removeItem(jm.publishToastLocation);if(tsConfig.isPublic&&ni==='public'){jm.$1();return}var nj=tab.Strings.AuthoringToastMessagePublishedWorkbookToLocation(tsConfig.workbookName,ni);var nk=tab.Strings.AuthoringToastActionMessageGoToWorkbook;jm.$0(nj,nk)}},$0:function(ni,nj){var nk=tab.URIUtil.get_workbookViewsUri();SharedWidgets.ToastWidget.show({message:ni,toastType:'success',actionMessage:nj,actionHref:nk})},$1:function(){var ni=tab.Strings.AuthoringToastMessagePublishedWorkbook(tsConfig.workbookName);SharedWidgets.ToastWidget.show({message:ni,toastType:'success'})}});var jn=global.tab.PublishUploadedFileDialog=ss.mkType(a,'tab.PublishUploadedFileDialog',function(){this.$1=null;this.$0=null;tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(jn.$0)){return}this.$1=new kK;this.$0=new kJ;this.parentNode=document.createElement('div');var ni={title:tab.Strings.AuthPublishUploadedFileDialogTitle,secondaryChoiceAction:ss.mkdel(this,this.close),secondaryChoiceButtonString:((this.$1.get_isEnabled()||this.$0.get_isEnabled())?tab.Strings.AuthAutoSaveWarningDialogCancel:tab.Strings.DialogButtonOK),primaryChoiceButtonIsAvailable:this.$1.get_isEnabled()||this.$0.get_isEnabled(),doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.AuthAutoSaveWarningDialogPublishButton,primaryChoiceAction:ss.mkdel(this,function(){if(this.$1.get_isEnabled()){this.$1.invoke().done(ss.mkdel(this,this.close))}else{this.$0.invoke().done(ss.mkdel(this,this.close))}}),firstMessage:tab.Strings.AuthPublishUploadedFileDialogPublish};jn.$0=React.createElement(cm,ni);ReactDOM.render(jn.$0,this.parentNode)},close:function(){jn.$0=null;_.defer(ss.mkdel(this,this.dispose))}},{showPublishUploadedFileDialog:function(){(new jn).showDialog()}});var jo=global.tab.QuantitativeColorEditorComponent=ss.mkType(a,'tab.QuantitativeColorEditorComponent',function(ni,nj){this.$F=1;React.Component.call(this,ni,nj);this.state=this.$2(this.props)},{componentWillReceiveProps:function(ni){this.setState(this.$2(ni))},componentDidUpdate:function(){if(this.state.dropdownOpen){var ni=$('.tab-quantitativeColorEditor .tab-Dropdown .tab-vScrollable');var nj=ni.innerHeight();var nk=ni.children().outerHeight(true);this.$F=Math.floor(nj/nk);var nl=ni.find('.selected');if(nl.length===1){var nm=nl.position().top;var nn=nm+nk;if(nm<0){nl.get(0).scrollIntoView(true)}else if(nn>nj){nl.get(0).scrollIntoView(false)}}}},$2:function(ni){var nj=ni.stepsValue;if(ss.isNullOrUndefined(this.state)){var nk=false;if(!ni.stepsEnabled||nj===0){nj=5}if(ni.canShowAdvancedSettings){if(ni.startChecked||ni.centerChecked||ni.endChecked){nk=true}}return{dropdownOpen:false,paletteGroupSelection:null,stepsValue:nj,showAdvancedOptions:nk}}var nl={};if(ni.stepsEnabled&&nj!==0){nl.stepsValue=nj}return nl},$0:function(){var ni=this.props.colorPalettes[this.props.selectedColorPaletteIndex];return spiff.SingleSelectGroupSelection.buildSingleSelectGroupSelection$1(Object).call(null,Array.prototype.slice.call(this.props.colorPalettes),function(nj){return ss.equals(nj,ni)})},render:function(){return spiff.ReactElement.div$1('tab-quantitativeColorEditor',[this.$e('tab-quantitativeColorPaletteSelector',[this.$v()]),this.$e('tab-quantitativeColorCustomization',[this.$o()]),this.$e('tab-quantitativeColorOptions',[this.$r()]),(this.props.canShowAdvancedSettings?ss.mkdel(this,function(){return this.$e('tab-quantitativeColorAdvancedToggle',[this.$k()])})():null),this.$e('tab-quantitativeColorReset',[this.$w()])])},$e:function(ni,nj){return spiff.DOMElements.div({className:ni,key:ni},nj)},$v:function(){return[this.$e('tab-quantitativeColorPaletteLabel',[tab.Strings.QuantitativeColorPaletteLabel]),this.$s()]},$s:function(){var ni;if(this.props.selectedColorPaletteIndex>=0){ni=this.props.selectedPalette}else{ni={colorPaletteId:'',colorPaletteName:tab.Strings.AuthColorPaletteLegacy}}if(!this.state.dropdownOpen&&ss.isValue(this.state.paletteGroupSelection)){var nj=this.state.paletteGroupSelection.mapSelected(ss.Int32).call(this.state.paletteGroupSelection,function(nl){return nl})[0];ni=this.props.colorPalettes[nj]}var nk=new Object;nk.styleClass='tab-ColorPaletteDropdown';nk.isSelecting=this.state.dropdownOpen;nk.getDesiredHeight=function(nl){return 190};nk.renderButton=ss.mkdel(this,function(){return React.createElement(spiff.TextDropdownButtonComponent,{selectionIconClass:'tabAuthPalette-small-'+ni.colorPaletteId,selectionText:ni.colorPaletteName,key:ni.colorPaletteId.toString()})});nk.onFocusLost=ss.mkdel(this,this.$f);nk.onSelectorToggled=ss.mkdel(this,this.$h);nk.onKeyDown=ss.mkdel(this,this.$g);nk.key='tab-quantitativeColorPaletteDropdown';return React.createElement(spiff.StatelessDropdownComponent,nk,this.$u())},$h:function(){this.$B(!this.state.dropdownOpen)},$f:function(){this.$5()},$5:function(){if(this.state.dropdownOpen||ss.isValue(this.state.paletteGroupSelection)){var ni={dropdownOpen:false,paletteGroupSelection:null};this.setState(ni)}},$6:function(){if(ss.isValue(this.state.paletteGroupSelection)){this.$4(this.state.paletteGroupSelection)}this.$B(false)},$B:function(ni){this.setState({dropdownOpen:ni})},$g:function(ni){var nj=ni.which;var nk=this.state.dropdownOpen;switch(nj){case 38:case 40:{if(ni.altKey){this.$B(!nk)}else{this.$c(nj)}break}case 36:case 35:case 33:case 34:{this.$c(nj);break}case 13:{this.$6();break}case 27:{this.$5();if(!nk){return}break}case 32:{this.$B(true);break}case 9:{this.$5();if(!nk){return}break}default:{return}}ni.stopPropagation();ni.preventDefault()},$c:function(ni){var nj;if(ss.isNullOrUndefined(this.state.paletteGroupSelection)){nj=this.$0()}else{nj=this.state.paletteGroupSelection.clone()}switch(ni){case 38:{nj.selectPrevious(1);break}case 40:{nj.selectNext(1);break}case 36:{nj.selectFirst();break}case 35:{nj.selectLast();break}case 33:{nj.selectPrevious(this.$F);break}case 34:{nj.selectNext(this.$F);break}default:{return}}this.setState({paletteGroupSelection:nj})},$u:function(){return React.createElement(spiff.SelectableButtonGroupComponent,this.$1())},$1:function(){var ni=this.state.paletteGroupSelection||this.$0();var nj=new Object;nj.allOption=false;nj.borders=false;nj.showApplyAndCancelButtons=false;nj.items=_.map(this.props.colorPalettes,ss.mkdel(this,function(nk){var nl=new spiff.SelectableButtonGroupItem;nl.label=nk.colorPaletteName;nl.getCustomContentBefore=ss.mkdel(this,function(){return this.$9(nk)});return nl}));nj.selection=ni;nj.onSelectionChanged=ss.mkdel(this,this.$i);return nj},$9:function(ni){return[(ni.isCustomPalette?du.renderCustomPaletteIcon(ni,this.props.stepsEnabled):spiff.DOMElements.div({key:ni.colorPaletteId.toString(),className:'tab-AuthPaletteIcon tabAuthPalette-small-'+ni.colorPaletteId}))]},$o:function(){return[((this.props.isDiverging||this.props.reverse)?ss.mkdel(this,function(){return this.$n(true)})():null),this.$e('tab-quantitativeColorCustomizationPalette',[this.$p()]),((this.props.isDiverging||!this.props.reverse)?ss.mkdel(this,function(){return this.$n(false)})():null)]},$n:function(ni){var nj=(ni?'tab-quantitativeColorSwatchMin':'tab-quantitativeColorSwatchMax');var nk=(ni?this.props.minColor:this.props.maxColor);var nl=(ni?tab.Strings.QuantitativeColorStartSwatch(nk):tab.Strings.QuantitativeColorEndSwatch(nk));var nm=React.createRef();return React.createElement(dQ,{color:nk,label:(ni?tab.Strings.QuantitativeColorStart:tab.Strings.QuantitativeColorEnd),onConfirm:(ni?this.props.setMinColor:this.props.setMaxColor),popoverRef:nm,triggerElement:spiff.DOMElements.button({className:nj,style:{backgroundColor:nk},title:nl,key:nj})})},$p:function(){return[React.createElement(jv,{stepped:this.props.stepsEnabled,colors:this.props.colors,key:'tab-quantitativeColorCustomPalette'}),this.$e('tab-quantitativeColorCustomPaletteMinMaxContainer',[this.$t()])]},$t:function(){return[this.$e('tab-quantitativeColorPaletteMin',[this.props.minValue]),this.$e('tab-quantitativeColorPaletteMax',[this.props.maxValue])]},$r:function(){return[this.$e('tab-quantitativeColorSteps',[this.$y()]),this.$e('tab-quantitativeReverse',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorReverse,checked:this.props.reverse,handleChange:ss.mkdel(this,this.$A),testId:'Reverse',disabled:false,key:'Reverse'})]),this.$e('tab-quantitativeFullColorRange',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorFullColorRange,checked:this.props.fullColorRange,handleChange:ss.mkdel(this,this.$8),testId:'FullColorRange',disabled:!this.props.canUseFullColorRange,key:'FullColorRange'})]),this.$e('tab-quantitativeIncludeTotals',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorIncludeTotals,checked:this.props.includeTotals,handleChange:ss.mkdel(this,this.$d),testId:'IncludeTotals',disabled:!this.props.includeTotalsOptionEnabled,key:'IncludeTotals'})])]},$y:function(){return[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorEnableSteps,checked:this.props.stepsEnabled,handleChange:ss.mkdel(this,this.$D),testId:'Steps',disabled:false,key:'Steps'}),React.createElement(SharedWidgets.IntegerStepperWidget,{containerStyle:{width:'48px',paddingLeft:SharedWidgets.TabStyles.Spacing.DefaultSpace,paddingRight:SharedWidgets.TabStyles.Spacing.DefaultSpace},start:this.state.stepsValue,max:255,min:2,onValueUpdated:ss.mkdel(this,this.$E),disabled:!this.props.stepsEnabled,testId:'StepsSpinner'}),React.createElement(SharedWidgets.InputLabelWidget,{testId:'StepsLabel',key:'StepsLabel'},tab.Strings.QuantitativeColorSteps)]},$k:function(){var ni={isExpanded:this.state.showAdvancedOptions,onExpand:ss.mkdel(this,this.$b),onCollapse:ss.mkdel(this,this.$a),direction:1,testId:'find-show-advanced-test-id',key:'tab-quantitativeColorExpandoWidget',label:(this.state.showAdvancedOptions?tab.Strings.QuantitativeColorHideAdvanced:tab.Strings.QuantitativeColorShowAdvanced)};return React.createElement(SharedWidgets.ExpandoWidget,ni,this.$j())},$j:function(){return this.$e('tab-quantitativeColorAdvancedItems',[this.$l()])},$l:function(){return[this.$e('tab-quantitativeColorStartAndEndContainer',[this.$e('tab-quantitativeColorStart',[this.$x()]),this.$e('tab-quantitativeColorEnd',[this.$q()])]),this.$e('tab-quantitativeColorCenterContainer',[this.$e('tab-quantitativeColorCenter',[this.$m()])])]},$x:function(){return[this.$e('tab-quantitativeColorAdvancedCheckBox',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorStart,checked:this.props.startChecked,handleChange:ss.mkdel(this,this.$C),testId:'Start',disabled:false,key:'Start'})]),this.$e('tab-quantitativeColorAdvancedInput',[React.createElement(eN,this.props.startValueInputProps)])]},$q:function(){return[this.$e('tab-quantitativeColorAdvancedCheckBox',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorEnd,checked:this.props.endChecked,handleChange:ss.mkdel(this,this.$7),testId:'End',disabled:false,key:'End'})]),this.$e('tab-quantitativeColorAdvancedInput',[React.createElement(eN,this.props.endValueInputProps)])]},$m:function(){return[this.$e('tab-quantitativeColorAdvancedCheckBox',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorCenter,checked:this.props.centerChecked,handleChange:ss.mkdel(this,this.$3),testId:'Center',disabled:!this.props.canEnableCenter,key:'Center'})]),this.$e('tab-quantitativeColorAdvancedInput',[React.createElement(eN,this.props.centerValueInputProps)])]},$w:function(){var ni=[this.$e('tab-quantitativeColorResetIcon',['']),this.$e('tab-quantitativeColorResetLabel',[tab.Strings.QuantitativeColorReset])];return React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,this.$z),buttonType:9,testId:'Reset',children:ni,disabled:false,key:'Reset',density:'high',style:{display:'flex',alignItems:'center',justifyContent:'center'}})},$i:function(ni){var nj=ni;this.$5();this.$4(nj)},$4:function(ni){var nj=ni.mapSelected(ss.Int32).call(ni,function(nk){return nk})[0];this.props.setSelectedPaletteIndex(nj)},$A:function(ni){this.props.reverseChanged(ni)},$D:function(ni){this.props.stepsEnabledChanged(ni,this.state.stepsValue)},$E:function(ni){this.props.stepsValueChanged(ni)},$8:function(ni){this.props.fullColorRangeChanged(ni)},$d:function(ni){this.props.includeTotalsChanged(ni)},$b:function(){this.setState({showAdvancedOptions:true})},$a:function(){this.setState({showAdvancedOptions:false})},$C:function(ni){this.props.startCheckedChanged(ni)},$7:function(ni){this.props.endCheckedChanged(ni)},$3:function(ni){this.props.centerCheckedChanged(ni)},$z:function(ni){this.props.resetValues()}});var jp=global.tab.QuantitativeColorEditorDialog=ss.mkType(a,'tab.QuantitativeColorEditorDialog',function(ni,nj){this.$3=null;this.$2=null;this.$1=null;React.Component.call(this);this.$2=document.createElement('div');this.$1=ss.mkdel(this,function(){this.$3=null;var nk=this.$2;this.$2=null;_.defer(function(){ReactDOM.unmountComponentAtNode(nk)});var nl=new tab.ReleaseComponentCmd;nl.set_componentID(ni);nl.invoke();nj()})},{removeFromDOM:function(){this.$1()},showOrUpdate:function(ni){var nj={title:tab.Strings.QuantitativeColorDialogTitle(ni.title),onClose:ss.mkdel(this,function(){this.removeFromDOM()}),editorProps:ni};this.$3=React.createElement(jp,nj);ReactDOM.render(this.$3,this.$2)},$0:function(){var ni=React.createElement(jo,this.props.editorProps);var nj={testId:'tab-quantitativeColorDialog',isModal:true,type:0,isGlassTransparent:true,showCloseButton:true,title:this.props.title,positioningBehavior:2,dialogWidth:400,showFooter:false,shouldReturnFocusOnClose:false,children:ni,onCloseRequest:this.props.onClose,zIndex:1000,shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile};return nj},render:function(){var ni=this.$0();return React.createElement(SharedWidgets.DialogWidget,ni)}});var jq=global.tab.QuantitativeColorEditorDialogNotificationProxy=ss.mkType(a,'tab.QuantitativeColorEditorDialogNotificationProxy');var jr=global.tab.QuantitativeColorEditorDialogViewModel=ss.mkType(a,'tab.QuantitativeColorEditorDialogViewModel',function(ni){this.$p=null;this.$o=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$o=ni;ni.add_modelUpdated(ss.mkdel(this,this.$d));this.set_startValueInputViewModel(new eO('StartInput'));this.disposables.add$1(this.addChildViewModel(this.get_startValueInputViewModel()));this.set_endValueInputViewModel(new eO('EndInput'));this.disposables.add$1(this.addChildViewModel(this.get_endValueInputViewModel()));this.set_centerValueInputViewModel(new eO('CenterInput'));this.disposables.add$1(this.addChildViewModel(this.get_centerValueInputViewModel()));this.get_startValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$m));this.get_endValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$8));this.get_centerValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$5));this.add_propsUpdated(ss.mkdel(this,this.$k));this.disposables.add(ss.mkdel(this,function(){this.get_component().removeFromDOM();ni.remove_modelUpdated(ss.mkdel(this,this.$d));this.get_startValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$m));this.get_endValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$8));this.get_centerValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$5));this.remove_propsUpdated(ss.mkdel(this,this.$k))}))},{get_component:function(){return this.$3$1},set_component:function(ni){this.$3$1=ni},get_startValueInputViewModel:function(){return this.$3$2},set_startValueInputViewModel:function(ni){this.$3$2=ni},get_endValueInputViewModel:function(){return this.$3$3},set_endValueInputViewModel:function(ni){this.$3$3=ni},get_centerValueInputViewModel:function(){return this.$3$4},set_centerValueInputViewModel:function(ni){this.$3$4=ni},cleanUp:function(){this.$o.detachNotifications()},$a:function(){var ni=this.$o.get_colorPalettes();var nj=ni.length;var nk=this.$o.get_selectedColorPalette();var nl=nk.colorPaletteId;for(var nm=0;nm<nj;nm++){var nn=ni[nm];if(ss.referenceEquals(nn.colorPaletteId,nl)){if(ss.referenceEquals(nn.colorPaletteName,nk.colorPaletteName)){return nm}}}return-1},$9:function(ni){var nj=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);nj.commandParams={};nj.commandParams['encodingFieldVector']=this.$o.get_encodingFields();nj.commandParams['sendNotifications']=true;ni(nj);tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(nj,'immediately',null,ss.mkdel(this,function(nk){this.get_component().removeFromDOM()})))},$i:function(ni){var nj=this.$o.get_colorPalettes()[ni];if(!ss.isNullOrEmptyString(nj.colorPaletteId)||!nj.isCustomPalette){this.$9(function(nk){nk.commandParams['colorPaletteId']=nj.colorPaletteId})}else{this.$9(ss.mkdel(this,function(nk){if(nj.colorPaletteType==='palette-ordered-diverging'){nk.commandParams['color1']=this.$o.get_minColor();nk.commandParams['color2']=this.$o.get_maxColor()}else if(this.$o.get_reverse()){nk.commandParams['color1']=this.$o.get_minColor()}else{nk.commandParams['color2']=this.$o.get_maxColor()}}))}},$3:function(ni,nj){var nk=tab.ColorModel.fromColorCode(ni);var nl=tab.ColorModel.fromColorCode(nj);return ss.equals(nk,nl)},$h:function(ni){if(!this.$3(ni,this.$o.get_minColor())){this.$9(ss.mkdel(this,function(nj){nj.commandParams['color1']=ni;if(this.$o.get_isDiverging()){nj.commandParams['color2']=this.$o.get_maxColor()}}))}},$g:function(ni){if(!this.$3(ni,this.$o.get_maxColor())){this.$9(ss.mkdel(this,function(nj){nj.commandParams['color2']=ni;if(this.$o.get_isDiverging()){nj.commandParams['color1']=this.$o.get_minColor()}}))}},$f:function(ni){this.$9(function(nj){nj.commandParams['isReversed']=ni})},$j:function(ni,nj){if(ni===true){this.$9(function(nk){nk.commandParams['steps']=nj})}else{this.$9(function(nk){nk.commandParams['steps']=0})}},$n:function(ni){this.$6();this.$p=window.setTimeout(ss.mkdel(this,function(){this.$9(function(nj){nj.commandParams['steps']=ni})}),500)},$6:function(){this.$p=tab.MiscUtil.clearTimeout(this.$p)},$b:function(ni){this.$9(function(nj){nj.commandParams['useFullColorRange']=ni})},$c:function(ni){this.$9(function(nj){nj.commandParams['totalsInclusionValue']=(ni?'include-totals':'exclude-totals')})},$l:function(ni){this.$9(ss.mkdel(this,function(nj){nj.commandParams['useStartValue']=ni;nj.commandParams['startValue']=this.$o.get_startValue()}))},$m:function(ni){this.$9(function(nj){nj.commandParams['useStartValue']=true;nj.commandParams['startValue']=ni})},$7:function(ni){this.$9(ss.mkdel(this,function(nj){nj.commandParams['useEndValue']=ni;nj.commandParams['endValue']=this.$o.get_endValue()}))},$8:function(ni){this.$9(function(nj){nj.commandParams['useEndValue']=true;nj.commandParams['endValue']=ni})},$4:function(ni){this.$9(ss.mkdel(this,function(nj){nj.commandParams['useCenterValue']=ni;nj.commandParams['centerValue']=this.$o.get_centerValue()}))},$5:function(ni){this.$9(function(nj){nj.commandParams['useCenterValue']=true;nj.commandParams['centerValue']=ni})},$e:function(){var ni=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'reset-quantitative-color'},null);ni.commandParams={};ni.commandParams['encodingFieldVector']=this.$o.get_encodingFields();ni.commandParams['sendNotifications']=true;tab.CommandController.SendCommand(tab.ClientCommand.createRemoteOnly(ni,'immediately',null,null))},$d:function(){this.get_startValueInputViewModel().updateFromModel(this.$o.get_startValue());this.get_startValueInputViewModel().set_enabled(this.$o.get_startChecked());this.get_endValueInputViewModel().updateFromModel(this.$o.get_endValue());this.get_endValueInputViewModel().set_enabled(this.$o.get_endChecked());this.get_centerValueInputViewModel().updateFromModel(this.$o.get_centerValue());this.get_centerValueInputViewModel().set_enabled(this.$o.get_centerChecked()&&this.$o.get_canEnableCenter());this.incrementProps()},createInitialProps:function(){return{setSelectedPaletteIndex:ss.mkdel(this,this.$i),setMinColor:ss.mkdel(this,this.$h),setMaxColor:ss.mkdel(this,this.$g),reverseChanged:ss.mkdel(this,this.$f),stepsEnabledChanged:ss.mkdel(this,this.$j),stepsValueChanged:ss.mkdel(this,this.$n),fullColorRangeChanged:ss.mkdel(this,this.$b),includeTotalsChanged:ss.mkdel(this,this.$c),startCheckedChanged:ss.mkdel(this,this.$l),endCheckedChanged:ss.mkdel(this,this.$7),centerCheckedChanged:ss.mkdel(this,this.$4),resetValues:ss.mkdel(this,this.$e)}},createUpdatedProps:function(){var ni=this.get_startValueInputViewModel().get_props();var nj=this.get_endValueInputViewModel().get_props();var nk=this.get_centerValueInputViewModel().get_props();var nl={title:this.$o.get_title(),selectedPalette:this.$o.get_selectedColorPalette(),selectedColorPaletteIndex:this.$a(),colorPalettes:this.$o.get_colorPalettes(),minColor:this.$o.get_minColor(),maxColor:this.$o.get_maxColor(),colors:this.$o.get_rampColors(),isDiverging:this.$o.get_isDiverging(),minValue:this.$o.get_minValue(),maxValue:this.$o.get_maxValue(),reverse:this.$o.get_reverse(),stepsEnabled:this.$o.get_stepsEnabled(),stepsValue:this.$o.get_stepsValue(),canUseFullColorRange:this.$o.get_canUseFullColorRange(),fullColorRange:this.$o.get_useFullColorRange(),includeTotalsOptionEnabled:this.$o.get_includeTotalsOptionEnabled(),includeTotals:this.$o.get_includeTotals(),startChecked:this.$o.get_startChecked(),startValueInputProps:ni,endChecked:this.$o.get_endChecked(),endValueInputProps:nj,centerChecked:this.$o.get_centerChecked(),centerValueInputProps:nk,canEnableCenter:this.$o.get_canEnableCenter(),canShowAdvancedSettings:this.$o.get_canShowAdvancedSettings()};return nl},$k:function(){if(ss.isNullOrUndefined(this.get_component())){this.set_component(new jp(this.$o.get_componentID(),ss.mkdel(this,this.cleanUp)))}this.get_component().showOrUpdate(this.get_props())}});var js=global.tab.QuantitativeColorOptionTemplate=ss.mkType(a,'tab.QuantitativeColorOptionTemplate',function(){this.transparencyControlContainer=null;this.colorEffectsContainer=null;this.colorEditButtonContainer=null;spiff.Template.call(this,$("<div class='tabAuthQuantitativeColorOptionContent'>\n            <div class='tabColorEditButtonContainer'></div>\n            <div class='tabAuthDivider'></div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"));this.colorEditButtonContainer=this.getElementBySelector('.tabColorEditButtonContainer');this.transparencyControlContainer=this.getElementBySelector('.tabAuthTransparencyControlContainer');this.colorEffectsContainer=this.getElementBySelector('.tabColorEffectsContainer')});var jt=global.tab.QuantitativeColorOptionView=ss.mkType(a,'tab.QuantitativeColorOptionView',function(ni){this.$d=0;this.$b=null;this.$c={};ss.makeGenericType(spiff.BaseView$1,[ju]).call(this,ni,new js);this.$b=this.get_template();this.$c[tab.Strings.AuthReverseColorLabel]=4;this.$c[tab.Strings.AuthSteppedColorLabel]=5;this.$c[tab.Strings.AuthIncludeTotalsLabel]=7;this.$d=8},{$7:function(){this.$9();this.$b.domRoot.addClass('tabAuthColorEditingHideContinuousControls')},$9:function(){var ni=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[cZ,cX,Object])).call(null,[this.get_viewModel().get_colorOptionEditButtonViewModel()]);ni.addToDom(this.$b.colorEditButtonContainer);this.disposables.add$1(ni)},$a:function(){var ni=tab.ObjectRegistry.newView$1(dA).call(null,dA,[this.get_viewModel().get_colorTransparencyControlViewModel()]);ni.tabIndex(this.$d);ni.addToDom(this.$b.transparencyControlContainer);this.disposables.add$1(ni)},$8:function(){var ni=tab.ObjectRegistry.newView(de).call(null,[this.get_viewModel().get_colorOptionEffectsViewModel()]);ni.addToDom(this.$b.colorEffectsContainer);this.disposables.add$1(ni)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7();this.$a();this.$8()}});var ju=global.tab.QuantitativeColorOptionViewModel=ss.mkType(a,'tab.QuantitativeColorOptionViewModel',function(ni){this.$3=null;this.$7=0;this.$6=false;this.$5=false;this.$4=false;this.$8=null;dm.call(this,ni);this.$7=ni.get_colorEncodingDropdown().quantitativeColor.steps;this.$6=this.$7>=2;this.$5=ni.get_colorEncodingDropdown().quantitativeColor.isReversed;this.$4=ni.get_colorEncodingDropdown().quantitativeColor.canEditLegendColor;this.$8=ni.get_colorEncodingDropdown().quantitativeColor.totalsInclusionValue;if(!this.$6){this.$7=5}this.$3=new cZ(this.get_marksCardTabEncodingModel(),1,this.get_isColorEditingEnabled())},{get_viewType:function(){return jt},get_colorOptionEditButtonViewModel:function(){return this.$3},get_isStepped:function(){return this.$6},set_isStepped:function(ni){if(this.$6===ni){return}this.$6=ni},get_stepCount:function(){return this.$7},set_stepCount:function(ni){if(ju.$0(ni)&&this.$7!==ni){this.$7=ni;tab.PaneClientCommands.setSteppedColor(this.get_marksCardTabEncodingModel(),this.$7)}},get_totalsInclusionValue:function(){return this.$8},set_totalsInclusionValue:function(ni){if(this.$8===ni){return}this.$8=ni},get_areTotalsUsed:function(){return this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().quantitativeColor.areTotalsUsed},get_isReversed:function(){return this.$5},set_isReversed:function(ni){if(this.$5===ni){return}this.$5=ni},get_isColorEditingEnabled:function(){return this.$4},get_selectedColorPalette:function(){return this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().quantitativeColor.colorPaletteId},set_selectedColorPalette:function(ni){tab.PaneClientCommands.setQuantColorPalette(this.get_marksCardTabEncodingModel(),ni)},get_selectedPaletteflags:function(){return this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().quantitativeColor.paletteFlagsVal},get_viewModel:function(){return this},toggleTotalsInEncoding:function(){this.set_totalsInclusionValue(((this.get_totalsInclusionValue()==='include-totals')?'exclude-totals':'include-totals'));tab.PaneClientCommands.setTotalsInEncoding(this.get_marksCardTabEncodingModel(),this.get_totalsInclusionValue())},toggleColorReversal:function(){tab.PaneClientCommands.reverseColor(this.get_marksCardTabEncodingModel(),!this.get_isReversed())},toggleIsStepped:function(){this.set_isStepped(!this.get_isStepped());tab.PaneClientCommands.setSteppedColor(this.get_marksCardTabEncodingModel(),(this.get_isStepped()?this.get_stepCount():0))},disposeViewModel:function(){this.dispose()},dispose:function(){this.$3.dispose();dm.prototype.dispose.call(this)},updateUberPopupViewModel:function(ni){}},{$0:function(ni){return ss.isValue(ni)&&ni>0&&isFinite(ni)}});var jv=global.tab.QuantitativeColorRampComponent=ss.mkType(a,'tab.QuantitativeColorRampComponent',function(ni){this.$0='canvasContainer';this.$1='canvas';this.$3=null;this.$2=50;React.PureComponent.call(this,ni)},{componentDidMount:function(){this.$3=tab.MiscUtil.clearTimeout(this.$3);this.drawIfReady()},componentWillUnmount:function(){this.$3=tab.MiscUtil.clearTimeout(this.$3)},componentDidUpdate:function(){this.draw()},render:function(){return spiff.DOMElements.div({className:'tab-quantitativeColorRamp',ref:this.$0},spiff.DOMElements.canvas({ref:this.$1,height:0,width:0}))},drawIfReady:function(){this.$3=null;var ni=ReactDOM.findDOMNode(this.refs[this.$0]);var nj=ni.clientWidth;var nk=ni.clientHeight;if(nj!==0&&nk!==0){this.draw()}else{this.$3=window.setTimeout(ss.mkdel(this,this.drawIfReady),this.$2)}},draw:function(){var ni=ReactDOM.findDOMNode(this.refs[this.$0]);var nj=ReactDOM.findDOMNode(this.refs[this.$1]);nj.height=0;nj.width=0;nj.style.width='0';nj.style.height='0';var nk=ni.clientWidth;var nl=ni.clientHeight;var nm=tab.CanvasRenderer.getRenderContext(nj,'opaque');var nn={w:nk,h:nl};tab.CanvasUtil.sizeCanvasWithHighDPISupport(nj,nm,nn);nm.clearRect(0,0,nk,nl);nm.save();if(this.props.stepped){this.drawStepped(nm,nk,nl)}else{this.drawGradient(nm,nk,nl)}nm.restore()},drawStepped:function(ni,nj,nk){var nl=ss.arrayFromEnumerable(Object.keys(this.props.colors));var nm=nl.length;var nn=0;var no=nj/nm;for(var np=0;np<nm;np++){var nq=Math.round((np+1)*no);var nr=nq-nn+1;ni.set_shapeFillStyle(this.props.colors[nl[np]]);ni.fillRect(nn,0,nr,nk);nn=nq}},drawGradient:function(ni,nj,nk){var nl=ss.arrayFromEnumerable(Object.keys(this.props.colors));var nm=ni.createLinearGradient(0,0,nj,0);for(var nn=0;nn<nl.length;nn++){var no=nl[nn];var np=tab.DoubleUtil.parseDouble(no);if(ss.isValue(np)){nm.addColorStop(ss.unbox(np),this.props.colors[no])}}ni.set_shapeFillStyle(nm);ni.fillRect(0,0,nj,nk)}});var jw=global.tab.Quantity=ss.mkEnum(a,'tab.Quantity',{none:0,some:1,all:2});var jx=global.tab.QuickSortAscendingCommand=ss.mkType(a,'tab.QuickSortAscendingCommand',function(){tab.QuickSortAscendingCmd.call(this)},{get_isVisible:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isVisible.call(this)&&!tsConfig.is_guest},invoke:function(){return this.fireAndForget(function(){tab.SortServerCommands.quickSort('asc')})}});var jy=global.tab.QuickSortDescendingCommand=ss.mkType(a,'tab.QuickSortDescendingCommand',function(){tab.QuickSortDescendingCmd.call(this)},{get_isVisible:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isVisible.call(this)&&!tsConfig.is_guest},invoke:function(){return this.fireAndForget(function(){tab.SortServerCommands.quickSort('desc')})}});var jz=global.tab.RankTableCalcViewModel=ss.mkType(a,'tab.RankTableCalcViewModel',function(ni){this.$4=null;this.$5=null;this.$6=null;mq.call(this);this.$4=ni;this.$4.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$5=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$5.add_selectedItemChanged(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_selectedItemChanged(ss.mkdel(this,this.$2));this.$5.dispose()})));this.$6=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$6.add_selectedItemChanged(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_selectedItemChanged(ss.mkdel(this,this.$3));this.$6.dispose()})))},{get_model:function(){return this.$4},get_rankType:function(){return this.$4.get_rankType()},get_rankTypeState:function(){return this.$4.get_rankTypeState()},get_rankComboBoxVM:function(){return this.$5},get_sortDirection:function(){return this.$4.get_sortDirection()},get_sortDirectionComboBoxVM:function(){return this.$6},onModelUpdated:function(){this.$0();this.$1()},$0:function(){var ni=[];for(var nj=0,nk=this.$4.get_rankTypeValues().length;nj<nk;nj++){ni.push(new spiff.ComboBoxItem(null,this.$4.get_rankTypeCaptions()[nj],this.$4.get_rankTypeValues()[nj],null,null))}this.$5.setItems(ni);if(this.$4.get_rankTypeIndex()>=0&&this.$4.get_rankTypeIndex()<ni.length){this.$5.set_selectedItem(this.$5.get_items()[this.$4.get_rankTypeIndex()])}},$1:function(){var ni=[];for(var nj=0,nk=this.$4.get_sortDirectionValues().length;nj<nk;nj++){ni.push(new spiff.ComboBoxItem(null,this.$4.get_sortDirectionCaptions()[nj],this.$4.get_sortDirectionValues()[nj],null,null))}this.$6.setItems(ni);this.$6.set_selectedItem(this.$6.get_items()[this.$4.get_sortDirectionIndex()])},$2:function(ni){var nj=ni.get_data();if(nj===this.get_rankType()){return}var nk=new tab.TableCalcSetRankTypeCmd;nk.set_rankType(nj);nk.set_calcNestingLevel(this.get_model().get_tableCalcIdentifier().get_nestingLevel());nk.set_nestedCalcField(this.get_model().get_tableCalcIdentifier().get_fieldName());nk.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))},$3:function(ni){var nj=ni.get_data();if(nj===this.get_sortDirection()){return}var nk=new tab.TableCalcSetRankSortDirectionCmd;nk.set_sortDirection(nj);nk.set_calcNestingLevel(this.get_model().get_tableCalcIdentifier().get_nestingLevel());nk.set_nestedCalcField(this.get_model().get_tableCalcIdentifier().get_fieldName());nk.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))}});var jA=global.tab.ReferenceItemData=ss.mkType(a,'tab.ReferenceItemData',function(ni){this.set=null;this.relativeAddress=null;this.fixedTupleIndex=0;this.parameterName=null;this.set='reference-options-set-parameter';this.parameterName=ni},null,{$ctor2:function(ni){this.set=null;this.relativeAddress=null;this.fixedTupleIndex=0;this.parameterName=null;this.set='reference-options-set-relative';this.relativeAddress=ni},$ctor1:function(ni){this.set=null;this.relativeAddress=null;this.fixedTupleIndex=0;this.parameterName=null;this.set='reference-options-set-fixed';this.fixedTupleIndex=ni}});var jB=global.tab.ReferenceLineConstantValueEditorView=ss.mkType(a,'tab.ReferenceLineConstantValueEditorView',function(ni){this.$g=null;this.$h=null;ss.makeGenericType(spiff.BaseView$1,[jC]).call(this,ni,new i);this.$a()},{$f:function(){return this.get_viewModel()},$e:function(){return this.get_template()},$7:function(){this.$f().commitConstantValue(this.$e().$1.val());this.$8()},$9:function(){this.$7()},$a:function(){this.$e().$1.attr('tabindex','1');this.$e().$1.attr('value',this.$f().get_constantValue());this.$g=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$7),tab.Strings.DialogButtonOK,'refLineConstantValueEditorButton',0,2);this.$g.addToDom(this.element);this.disposables.add$1(this.$g);this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.element,'keydown',ss.mkdel(this,this.$b)))},$8:function(){this.$f().dispose()},$b:function(ni){switch(ni.which){case 27:{this.$8();break}case 108:case 13:{this.$7();break}}},onAddedToDom:function(){this.$d();tab.CommandController.get().add_undoCommand(ss.mkdel(this,this.dispose));this.$e().$1.focus();tab.DomUtil.selectAllInputText(this.$e().$1);spiff.Widget.prototype.onAddedToDom.call(this)},$d:function(){if(ss.isNullOrUndefined(this.$h)){this.$h=new spiff.Glass(null,false);this.$h.set_zIndex(988);this.$h.add_click(ss.mkdel(this,this.$9))}this.$h.show()},$c:function(){if(ss.isValue(this.$h)){this.$h.remove_click(ss.mkdel(this,this.$9));this.$h.dispose();this.$h=null}},dispose:function(){this.element.remove();this.$c();tab.CommandController.get().remove_undoCommand(ss.mkdel(this,this.dispose));ss.makeGenericType(spiff.BaseView$1,[jC]).prototype.dispose.call(this)}},{show:function(ni){var nj=new jB(ni);nj.addToDom($(document.body));var nk=tab.PointUtil.add(tab.DomUtil.getElementPosition(nj.element),tab.DomUtil.getElementPosition($('.dashboardSpacer')));tab.DomUtil.setElementPosition(nj.element,nk.x,nk.y,null,null)}});var jC=global.tab.ReferenceLineConstantValueEditorViewModel=ss.mkType(a,'tab.ReferenceLineConstantValueEditorViewModel',function(ni){this.$0=null;spiff.BaseViewModel.call(this);this.$0=ni},{get_constantValue:function(){return this.$0.formattedValue},get_refLineId:function(){return this.$0.refLineId},commitConstantValue:function(ni){if(!ss.referenceEquals(ni,this.get_constantValue())){tab.PaneClientCommands.setReferenceLineConstantValue(ni,this.get_refLineId())}}});var jD=global.tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler=ss.mkType(a,'tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler',null,null,{$0:function(ni){var nj=$.Deferred();if(ss.isValue(ni)){var nk=ni['referenceLine'];if(ss.isValue(nk)){jB.show(new jC(nk))}nj.resolve()}return nj.promise()}});var jE=global.tab.ReferenceLineDialogBandTabComponent=ss.mkType(a,'tab.ReferenceLineDialogBandTabComponent',function(){React.Component.call(this)},{render:function(){var ni=spiff.DOMElements.div;var nj=spiff.DOMElements.div;var nk=new ke;nk.viewModel=this.props.scopeViewModel;return ni({className:'tab-referenceBandTab'},nj({className:'tab-scopeWrapper'},React.createElement(kd,nk)),spiff.DOMElements.div({className:'tab-editReferenceLineLineSection'},spiff.DOMElements.span({className:'tab-sectionTitle'},tab.Strings.AODialogBandTabTitle),spiff.DOMElements.div({className:'tab-editReferenceLineLineSectionInner'},spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-fromValueComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogFromValueLabel),(this.props.isFromConstantSelected?React.createElement(eN,this.props.fromConstantValueProps):React.createElement(spiff.ComboBoxComponent,this.props.fromValueProps))),spiff.DOMElements.div({className:'tab-fromComputationComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogComputationLabel),React.createElement(spiff.ComboBoxComponent,this.props.fromFormulaProps))),React.createElement(ka,this.props.fromLabelProps),React.createElement(kj,this.props.fromTooltipProps),spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-toValueComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogToValueLabel),(this.props.isToConstantSelected?React.createElement(eN,this.props.toConstantValueProps):React.createElement(spiff.ComboBoxComponent,this.props.toValueProps))),spiff.DOMElements.div({className:'tab-toComputationComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogComputationLabel),React.createElement(spiff.ComboBoxComponent,this.props.toFormulaProps))),React.createElement(ka,this.props.toLabelProps),React.createElement(kj,this.props.toTooltipProps))),spiff.DOMElements.div({className:'tab-instantAnalytics'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.instantAnalyticsProps)))}});var jF=global.tab.ReferenceLineDialogBandTabProps=ss.mkType(a,'tab.ReferenceLineDialogBandTabProps',function(){this.fromValueProps=null;this.fromLabelProps=null;this.fromTooltipProps=null;this.fromFormulaProps=null;this.toValueProps=null;this.toLabelProps=null;this.toTooltipProps=null;this.toFormulaProps=null;this.fromConstantValueProps=null;this.toConstantValueProps=null;this.instantAnalyticsProps=null;this.isFromConstantSelected=false;this.isToConstantSelected=false;this.scopeViewModel=null});var jG=global.tab.ReferenceLineDialogBandTabState=ss.mkType(a,'tab.ReferenceLineDialogBandTabState',function(){});var jH=global.tab.ReferenceLineDialogBandTabViewModel=ss.mkType(a,'tab.ReferenceLineDialogBandTabViewModel',function(ni){var nj=new jI;nj.set_scopeViewModel(new ki);nj.set_fromLabelViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_fromTooltipViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_fromCustomLabelTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_fromCustomTooltipTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_fromValueViewModel(new gd(ni.get_fromFieldPickerCombo()));nj.set_fromFormulaViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_toLabelViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_toTooltipViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_toCustomLabelTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_toCustomTooltipTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_toValueViewModel(new gd(ni.get_toFieldPickerCombo()));nj.set_toFormulaViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_instantAnalyticsViewModel(new gS(jH.$1));nj.set_fromConstantValueInputViewModel(new eO('FromConstantValue'));nj.set_toConstantValueInputViewModel(new eO('ToConstantValue'));var nk=new eO('FromCustomLabel');nk.set_allowEmpty(true);nk.set_shouldSelectTextOnFocus(false);nj.set_fromCustomLabelInputViewModel(nk);var nl=new eO('FromCustomTooltip');nl.set_allowEmpty(true);nl.set_shouldSelectTextOnFocus(false);nj.set_fromCustomTooltipInputViewModel(nl);var nm=new eO('ToCustomLabel');nm.set_allowEmpty(true);nm.set_shouldSelectTextOnFocus(false);nj.set_toCustomLabelInputViewModel(nm);var nn=new eO('ToCustomTooltip');nn.set_allowEmpty(true);nn.set_shouldSelectTextOnFocus(false);nj.set_toCustomTooltipInputViewModel(nn);jH.$ctor1.call(this,ni,nj)},{get_bandModel:function(){return this.$3$1},set_bandModel:function(ni){this.$3$1=ni},get_scopeViewModel:function(){return this.$3$2},set_scopeViewModel:function(ni){this.$3$2=ni},get_fromLabelViewModel:function(){return this.$3$3},set_fromLabelViewModel:function(ni){this.$3$3=ni},get_fromTooltipViewModel:function(){return this.$3$4},set_fromTooltipViewModel:function(ni){this.$3$4=ni},get_fromCustomLabelTagViewModel:function(){return this.$3$5},set_fromCustomLabelTagViewModel:function(ni){this.$3$5=ni},get_fromCustomTooltipTagViewModel:function(){return this.$3$6},set_fromCustomTooltipTagViewModel:function(ni){this.$3$6=ni},get_fromValueViewModel:function(){return this.$3$7},set_fromValueViewModel:function(ni){this.$3$7=ni},get_fromFormulaViewModel:function(){return this.$3$8},set_fromFormulaViewModel:function(ni){this.$3$8=ni},get_toLabelViewModel:function(){return this.$3$9},set_toLabelViewModel:function(ni){this.$3$9=ni},get_toTooltipViewModel:function(){return this.$3$10},set_toTooltipViewModel:function(ni){this.$3$10=ni},get_toCustomLabelTagViewModel:function(){return this.$3$11},set_toCustomLabelTagViewModel:function(ni){this.$3$11=ni},get_toCustomTooltipTagViewModel:function(){return this.$3$12},set_toCustomTooltipTagViewModel:function(ni){this.$3$12=ni},get_toValueViewModel:function(){return this.$3$13},set_toValueViewModel:function(ni){this.$3$13=ni},get_toFormulaViewModel:function(){return this.$3$14},set_toFormulaViewModel:function(ni){this.$3$14=ni},get_instantAnalyticsViewModel:function(){return this.$3$15},set_instantAnalyticsViewModel:function(ni){this.$3$15=ni},get_fromConstantValueInputViewModel:function(){return this.$3$16},set_fromConstantValueInputViewModel:function(ni){this.$3$16=ni},get_toConstantValueInputViewModel:function(){return this.$3$17},set_toConstantValueInputViewModel:function(ni){this.$3$17=ni},get_fromCustomLabelInputViewModel:function(){return this.$3$18},set_fromCustomLabelInputViewModel:function(ni){this.$3$18=ni},get_fromCustomTooltipInputViewModel:function(){return this.$3$19},set_fromCustomTooltipInputViewModel:function(ni){this.$3$19=ni},get_toCustomLabelInputViewModel:function(){return this.$3$20},set_toCustomLabelInputViewModel:function(ni){this.$3$20=ni},get_toCustomTooltipInputViewModel:function(){return this.$3$21},set_toCustomTooltipInputViewModel:function(ni){this.$3$21=ni},get_isFromCustomLabelSelected:function(){return this.get_bandModel().get_fromLabelType()==='custom'},get_isFromCustomTooltipSelected:function(){return this.get_bandModel().get_fromTooltipType()==='custom'},get_isToCustomLabelSelected:function(){return this.get_bandModel().get_toLabelType()==='custom'},get_isToCustomTooltipSelected:function(){return this.get_bandModel().get_toTooltipType()==='custom'},get_isFromConstantSelected:function(){return this.get_bandModel().get_fromFormulaType()==='constant'},get_isToConstantSelected:function(){return this.get_bandModel().get_toFormulaType()==='constant'},get_isFromParameterSelected:function(){return this.get_bandModel().get_isParameterSelectedOnFrom()},get_isToParameterSelected:function(){return this.get_bandModel().get_isParameterSelectedOnTo()},get_isInstantAnalyticsAllowed:function(){return this.get_bandModel().get_isInstantAnalyticsAllowed()},get_visualId:function(){return this.get_bandModel().get_visualId()},get_referenceLineId:function(){return this.get_bandModel().get_refLineId()},$r:function(){var ni=null;this.get_fromFormulaViewModel().clearItems();var nj=[];var nk=this.get_bandModel().get_validFormulaTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.displayText,nm.referenceLineFormulaType,null,null);if(ss.equals(nm.referenceLineFormulaType,this.get_bandModel().get_fromFormulaType())){ni=nn}nj.push(nn)}this.get_fromFormulaViewModel().setItemsWithInitialSelection(nj,ni);this.get_fromFormulaViewModel().set_enabled(!this.get_isFromParameterSelected())},$w:function(){var ni=null;this.get_toFormulaViewModel().clearItems();var nj=[];var nk=this.get_bandModel().get_validPairedFormulaTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.displayText,nm.referenceLineFormulaType,null,null);if(ss.equals(nm.referenceLineFormulaType,this.get_bandModel().get_toFormulaType())){ni=nn}nj.push(nn)}this.get_toFormulaViewModel().setItemsWithInitialSelection(nj,ni);this.get_toFormulaViewModel().set_enabled(!this.get_isToParameterSelected())},$u:function(){this.get_fromValueViewModel().updateDomFromModel()},$z:function(){this.get_toValueViewModel().updateDomFromModel()},$s:function(){var ni=null;var nj=[];var nk=this.get_bandModel().get_validLabelTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_bandModel().get_fromLabelType())){ni=nn}}this.get_fromLabelViewModel().setItemsWithInitialSelection(nj,ni)},$t:function(){var ni=null;var nj=[];var nk=this.get_bandModel().get_validTooltipTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_bandModel().get_fromTooltipType())){ni=nn}}this.get_fromTooltipViewModel().setItemsWithInitialSelection(nj,ni)},$x:function(){var ni=null;var nj=[];var nk=this.get_bandModel().get_validLabelTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_bandModel().get_toLabelType())){ni=nn}}this.get_toLabelViewModel().setItemsWithInitialSelection(nj,ni)},$y:function(){var ni=null;var nj=[];var nk=this.get_bandModel().get_validTooltipTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_bandModel().get_toTooltipType())){ni=nn}}this.get_toTooltipViewModel().setItemsWithInitialSelection(nj,ni)},$o:function(){var ni=_.map(this.get_bandModel().get_validCustomLabelTags(),function(nj){return new spiff.ComboBoxItem(null,nj,ss.formatString('<{0}>',nj),null,null)});this.get_fromCustomLabelTagViewModel().setItemsWithInitialSelection(ni,null);this.get_toCustomLabelTagViewModel().setItemsWithInitialSelection(ni,null)},$q:function(){var ni=_.map(this.get_bandModel().get_validCustomLabelTags(),function(nj){return new spiff.ComboBoxItem(null,nj,ss.formatString('<{0}>',nj),null,null)});this.get_fromCustomTooltipTagViewModel().setItemsWithInitialSelection(ni,null);this.get_toCustomTooltipTagViewModel().setItemsWithInitialSelection(ni,null)},$g:function(){if(this.get_scopeViewModel().get_selectedScope()!==this.get_bandModel().get_scopeType()){var ni=new tab.UpdateReferenceLineCmd;ni.set_uiBlocking('immediately');ni.set_scopeType(this.get_scopeViewModel().get_selectedScope());ni.set_visualID(this.get_visualId());ni.set_refLineId(this.get_bandModel().get_refLineId());ni.invoke()}},$b:function(ni){if(ss.isValue(ni)){var nj=ni.get_data();if(nj!==this.get_bandModel().get_fromFormulaType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_formulaType(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_bandModel().get_refLineId());nk.invoke()}}},$j:function(ni){if(ss.isValue(ni)){var nj=ni.get_data();if(nj!==this.get_bandModel().get_toFormulaType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_formulaType(nj);nk.set_refLineId(this.get_bandModel().get_pairedId());nk.set_visualID(this.get_visualId());nk.invoke()}}},$c:function(ni){this.$v(ni,this.get_bandModel().get_fromLabelType(),this.get_bandModel().get_refLineId())},$k:function(ni){this.$v(ni,this.get_bandModel().get_toLabelType(),this.get_bandModel().get_pairedId())},$v:function(ni,nj,nk){if(ss.isNullOrUndefined(ni)){return}var nl=ni.get_data();if(nl!==nj){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.set_labelType(nl);nm.set_refLineId(nk);nm.set_visualID(this.get_visualId());nm.invoke()}},$d:function(ni){this.$A(ni,this.get_bandModel().get_fromTooltipType(),this.get_bandModel().get_refLineId())},$l:function(ni){this.$A(ni,this.get_bandModel().get_toTooltipType(),this.get_bandModel().get_pairedId())},$A:function(ni,nj,nk){if(ss.isNullOrUndefined(ni)){return}var nl=ni.get_data();if(nl!==nj){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.set_tooltipType(nl);nm.set_visualID(this.get_visualId());nm.set_refLineId(nk);nm.invoke()}},$9:function(ni){this.get_fromCustomLabelInputViewModel().insertText(ni.get_data())},$a:function(ni){this.get_fromCustomTooltipInputViewModel().insertText(ni.get_data())},$h:function(ni){this.get_toCustomLabelInputViewModel().insertText(ni.get_data())},$i:function(ni){this.get_toCustomTooltipInputViewModel().insertText(ni.get_data())},$e:function(ni){if(ss.isValue(ni)){var nj=ni.get_data();if(!ss.referenceEquals(nj,this.get_bandModel().get_fromFieldPickerCombo().get_selectedField())){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_fieldName(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_bandModel().get_refLineId());nk.invoke()}}},$m:function(ni){if(ss.isValue(ni)){var nj=ni.get_data();if(!ss.referenceEquals(nj,this.get_bandModel().get_toFieldPickerCombo().get_selectedField())){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_fieldName(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_bandModel().get_pairedId());nk.invoke()}}},$f:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_enableInstantAnalytics(ni);nj.set_visualID(this.get_bandModel().get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()},$3:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_constantValue(ni);nj.set_refLineId(this.get_bandModel().get_refLineId());nj.set_visualID(this.get_visualId());nj.invoke().always(ss.mkdel(this,this.updateDomFromModel))},$6:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_constantValue(ni);nj.set_refLineId(this.get_bandModel().get_pairedId());nj.set_visualID(this.get_visualId());nj.invoke().always(ss.mkdel(this,this.updateDomFromModel))},$4:function(ni){this.$n(ni,this.get_bandModel().get_fromCustomLabel(),this.get_bandModel().get_refLineId())},$7:function(ni){this.$n(ni,this.get_bandModel().get_toCustomLabel(),this.get_bandModel().get_pairedId())},$n:function(ni,nj,nk){if(ss.equalsT(ni,nj)){return}var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.set_customLabel(ni);nl.set_refLineId(nk);nl.set_visualID(this.get_visualId());nl.invoke()},$5:function(ni){this.$p(ni,this.get_bandModel().get_fromCustomTooltip(),this.get_bandModel().get_refLineId())},$8:function(ni){this.$p(ni,this.get_bandModel().get_toCustomTooltip(),this.get_bandModel().get_pairedId())},$p:function(ni,nj,nk){if(ss.equalsT(ni,nj)){return}var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.set_customTooltip(ni);nl.set_refLineId(nk);nl.set_visualID(this.get_visualId());nl.invoke()},updateDomFromModel:function(){if(ss.isValue(this.get_bandModel().get_refBandPresModel())){this.get_scopeViewModel().updateFromModel(this.get_bandModel().get_scopeType());this.get_instantAnalyticsViewModel().updateFromModel(this.get_bandModel().get_instantAnalyticsEnabled(),this.get_isInstantAnalyticsAllowed());this.$r();this.$w();this.$u();this.$z();this.$s();this.$t();this.$x();this.$y();this.$o();this.$q();this.get_fromConstantValueInputViewModel().updateFromModel(this.get_bandModel().get_fromFormattedConstantValue());this.get_toConstantValueInputViewModel().updateFromModel(this.get_bandModel().get_toFormattedConstantValue());this.get_fromCustomLabelInputViewModel().updateFromModel(this.get_bandModel().get_fromCustomLabel());this.get_toCustomLabelInputViewModel().updateFromModel(this.get_bandModel().get_toCustomLabel());this.get_fromCustomTooltipInputViewModel().updateFromModel(this.get_bandModel().get_fromCustomTooltip());this.get_toCustomTooltipInputViewModel().updateFromModel(this.get_bandModel().get_toCustomTooltip())}},createUpdatedProps:function(){var ni=new jF;ni.scopeViewModel=this.get_scopeViewModel();ni.fromFormulaProps=this.get_fromFormulaViewModel().get_props();ni.fromValueProps=this.get_fromValueViewModel().get_props();var nj=new kb;nj.labelDropdownProps=this.get_fromLabelViewModel().get_props();nj.isCustomLabelSelected=this.get_isFromCustomLabelSelected();nj.customLabelInputProps=this.get_fromCustomLabelInputViewModel().get_props();nj.customLabelTagProps=this.get_fromCustomLabelTagViewModel().get_props();nj.cssClass='tab-fromLabelComponent';ni.fromLabelProps=nj;var nk=new kk;nk.tooltipDropdownProps=this.get_fromTooltipViewModel().get_props();nk.isCustomTooltipSelected=this.get_isFromCustomTooltipSelected();nk.customTooltipInputProps=this.get_fromCustomTooltipInputViewModel().get_props();nk.customTooltipTagProps=this.get_fromCustomTooltipTagViewModel().get_props();nk.cssClass='tab-fromLabelComponent';ni.fromTooltipProps=nk;ni.toFormulaProps=this.get_toFormulaViewModel().get_props();ni.toValueProps=this.get_toValueViewModel().get_props();var nl=new kb;nl.labelDropdownProps=this.get_toLabelViewModel().get_props();nl.isCustomLabelSelected=this.get_isToCustomLabelSelected();nl.customLabelInputProps=this.get_toCustomLabelInputViewModel().get_props();nl.customLabelTagProps=this.get_toCustomLabelTagViewModel().get_props();nl.cssClass='tab-toLabelComponent';ni.toLabelProps=nl;var nm=new kk;nm.tooltipDropdownProps=this.get_toTooltipViewModel().get_props();nm.isCustomTooltipSelected=this.get_isToCustomTooltipSelected();nm.customTooltipInputProps=this.get_toCustomTooltipInputViewModel().get_props();nm.customTooltipTagProps=this.get_toCustomTooltipTagViewModel().get_props();nm.cssClass='tab-toLabelComponent';ni.toTooltipProps=nm;ni.isFromConstantSelected=this.get_isFromConstantSelected();ni.fromConstantValueProps=this.get_fromConstantValueInputViewModel().get_props();ni.toConstantValueProps=this.get_toConstantValueInputViewModel().get_props();ni.isToConstantSelected=this.get_isToConstantSelected();ni.instantAnalyticsProps=this.get_instantAnalyticsViewModel().get_props();return ni}},{$ctor1:function(ni,nj){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;this.$3$8=null;this.$3$9=null;this.$3$10=null;this.$3$11=null;this.$3$12=null;this.$3$13=null;this.$3$14=null;this.$3$15=null;this.$3$16=null;this.$3$17=null;this.$3$18=null;this.$3$19=null;this.$3$20=null;this.$3$21=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[jF]).call(this);this.set_bandModel(ni);this.set_scopeViewModel(nj.get_scopeViewModel());this.disposables.add$1(this.get_scopeViewModel());this.set_fromLabelViewModel(nj.get_fromLabelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromLabelViewModel()));this.set_fromTooltipViewModel(nj.get_fromTooltipViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromTooltipViewModel()));this.set_fromCustomLabelTagViewModel(nj.get_fromCustomLabelTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromCustomLabelTagViewModel()));this.set_fromCustomTooltipTagViewModel(nj.get_fromCustomTooltipTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromCustomTooltipTagViewModel()));this.set_fromValueViewModel(nj.get_fromValueViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromValueViewModel()));this.set_fromFormulaViewModel(nj.get_fromFormulaViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromFormulaViewModel()));this.set_toLabelViewModel(nj.get_toLabelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toLabelViewModel()));this.set_toTooltipViewModel(nj.get_toTooltipViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toTooltipViewModel()));this.set_toCustomLabelTagViewModel(nj.get_toCustomLabelTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toCustomLabelTagViewModel()));this.set_toCustomTooltipTagViewModel(nj.get_toCustomTooltipTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toCustomTooltipTagViewModel()));this.set_toValueViewModel(nj.get_toValueViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toValueViewModel()));this.set_toFormulaViewModel(nj.get_toFormulaViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toFormulaViewModel()));this.set_instantAnalyticsViewModel(nj.get_instantAnalyticsViewModel());this.disposables.add$1(this.addChildViewModel(this.get_instantAnalyticsViewModel()));this.set_fromConstantValueInputViewModel(nj.get_fromConstantValueInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromConstantValueInputViewModel()));this.set_toConstantValueInputViewModel(nj.get_toConstantValueInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toConstantValueInputViewModel()));this.set_fromCustomLabelInputViewModel(nj.get_fromCustomLabelInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromCustomLabelInputViewModel()));this.set_fromCustomTooltipInputViewModel(nj.get_fromCustomTooltipInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromCustomTooltipInputViewModel()));this.set_toCustomLabelInputViewModel(nj.get_toCustomLabelInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toCustomLabelInputViewModel()));this.set_toCustomTooltipInputViewModel(nj.get_toCustomTooltipInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toCustomTooltipInputViewModel()));this.get_bandModel().add_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().add_scopeUpdated(ss.mkdel(this,this.$g));this.get_fromFormulaViewModel().add_selectedItemChanged(ss.mkdel(this,this.$b));this.get_toFormulaViewModel().add_selectedItemChanged(ss.mkdel(this,this.$j));this.get_fromLabelViewModel().add_selectedItemChanged(ss.mkdel(this,this.$c));this.get_fromTooltipViewModel().add_selectedItemChanged(ss.mkdel(this,this.$d));this.get_toLabelViewModel().add_selectedItemChanged(ss.mkdel(this,this.$k));this.get_toTooltipViewModel().add_selectedItemChanged(ss.mkdel(this,this.$l));this.get_fromValueViewModel().add_selectedItemChanged(ss.mkdel(this,this.$e));this.get_toValueViewModel().add_selectedItemChanged(ss.mkdel(this,this.$m));this.get_instantAnalyticsViewModel().add_instantAnalyticsUpdated(ss.mkdel(this,this.$f));this.get_fromCustomLabelTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$9));this.get_fromCustomTooltipTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$a));this.get_toCustomLabelTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$h));this.get_toCustomTooltipTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$i));this.get_fromConstantValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.get_toConstantValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$6));this.get_fromCustomLabelInputViewModel().add_onValueChanged(ss.mkdel(this,this.$4));this.get_fromCustomTooltipInputViewModel().add_onValueChanged(ss.mkdel(this,this.$5));this.get_toCustomLabelInputViewModel().add_onValueChanged(ss.mkdel(this,this.$7));this.get_toCustomTooltipInputViewModel().add_onValueChanged(ss.mkdel(this,this.$8));this.get_fromLabelViewModel().set_hasTooltip(false);this.get_fromTooltipViewModel().set_hasTooltip(false);this.get_fromCustomLabelTagViewModel().set_hasTooltip(false);this.get_fromCustomTooltipTagViewModel().set_hasTooltip(false);this.get_fromValueViewModel().set_hasTooltip(false);this.get_fromFormulaViewModel().set_hasTooltip(false);this.get_toLabelViewModel().set_hasTooltip(false);this.get_toTooltipViewModel().set_hasTooltip(false);this.get_toCustomLabelTagViewModel().set_hasTooltip(false);this.get_toCustomTooltipTagViewModel().set_hasTooltip(false);this.get_toValueViewModel().set_hasTooltip(false);this.get_toFormulaViewModel().set_hasTooltip(false);this.disposables.add$2([this.get_scopeViewModel(),this.get_fromLabelViewModel(),this.get_fromTooltipViewModel(),this.get_toLabelViewModel(),this.get_toTooltipViewModel(),this.get_fromCustomLabelTagViewModel(),this.get_fromCustomTooltipTagViewModel(),this.get_toCustomLabelTagViewModel(),this.get_toCustomTooltipTagViewModel(),this.get_fromValueViewModel(),this.get_toValueViewModel(),this.get_fromFormulaViewModel(),this.get_toFormulaViewModel(),this.get_fromConstantValueInputViewModel(),this.get_toConstantValueInputViewModel(),this.get_fromCustomLabelInputViewModel(),this.get_fromCustomTooltipInputViewModel(),this.get_toCustomLabelInputViewModel(),this.get_toCustomTooltipInputViewModel(),this.get_instantAnalyticsViewModel(),new tab.CallOnDispose(ss.mkdel(this,function(){this.get_bandModel().remove_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_fromFormulaViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$b));this.get_toFormulaViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$j));this.get_fromLabelViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$c));this.get_fromTooltipViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$d));this.get_toLabelViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$k));this.get_toTooltipViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$l));this.get_scopeViewModel().remove_scopeUpdated(ss.mkdel(this,this.$g));this.get_fromValueViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$e));this.get_toValueViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$m));this.get_instantAnalyticsViewModel().remove_instantAnalyticsUpdated(ss.mkdel(this,this.$f));this.get_fromCustomLabelTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$9));this.get_fromCustomTooltipTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$a));this.get_toCustomLabelTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$h));this.get_toCustomTooltipTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$i));this.get_fromConstantValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$3));this.get_toConstantValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$6));this.get_fromCustomLabelInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$4));this.get_fromCustomTooltipInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$5));this.get_toCustomLabelInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$7));this.get_toCustomTooltipInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$8))}))])}});var jI=global.tab.ReferenceLineDialogBandTabViewModels=ss.mkType(a,'tab.ReferenceLineDialogBandTabViewModels',function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null;this.$1$10=null;this.$1$11=null;this.$1$12=null;this.$1$13=null;this.$1$14=null;this.$1$15=null;this.$1$16=null;this.$1$17=null;this.$1$18=null;this.$1$19=null;this.$1$20=null},{get_scopeViewModel:function(){return this.$1$1},set_scopeViewModel:function(ni){this.$1$1=ni},get_fromLabelViewModel:function(){return this.$1$2},set_fromLabelViewModel:function(ni){this.$1$2=ni},get_fromTooltipViewModel:function(){return this.$1$3},set_fromTooltipViewModel:function(ni){this.$1$3=ni},get_fromCustomLabelTagViewModel:function(){return this.$1$4},set_fromCustomLabelTagViewModel:function(ni){this.$1$4=ni},get_fromCustomTooltipTagViewModel:function(){return this.$1$5},set_fromCustomTooltipTagViewModel:function(ni){this.$1$5=ni},get_fromValueViewModel:function(){return this.$1$6},set_fromValueViewModel:function(ni){this.$1$6=ni},get_fromFormulaViewModel:function(){return this.$1$7},set_fromFormulaViewModel:function(ni){this.$1$7=ni},get_toLabelViewModel:function(){return this.$1$8},set_toLabelViewModel:function(ni){this.$1$8=ni},get_toTooltipViewModel:function(){return this.$1$9},set_toTooltipViewModel:function(ni){this.$1$9=ni},get_toCustomLabelTagViewModel:function(){return this.$1$10},set_toCustomLabelTagViewModel:function(ni){this.$1$10=ni},get_toCustomTooltipTagViewModel:function(){return this.$1$11},set_toCustomTooltipTagViewModel:function(ni){this.$1$11=ni},get_toValueViewModel:function(){return this.$1$12},set_toValueViewModel:function(ni){this.$1$12=ni},get_toFormulaViewModel:function(){return this.$1$13},set_toFormulaViewModel:function(ni){this.$1$13=ni},get_instantAnalyticsViewModel:function(){return this.$1$14},set_instantAnalyticsViewModel:function(ni){this.$1$14=ni},get_fromConstantValueInputViewModel:function(){return this.$1$15},set_fromConstantValueInputViewModel:function(ni){this.$1$15=ni},get_toConstantValueInputViewModel:function(){return this.$1$16},set_toConstantValueInputViewModel:function(ni){this.$1$16=ni},get_fromCustomLabelInputViewModel:function(){return this.$1$17},set_fromCustomLabelInputViewModel:function(ni){this.$1$17=ni},get_fromCustomTooltipInputViewModel:function(){return this.$1$18},set_fromCustomTooltipInputViewModel:function(ni){this.$1$18=ni},get_toCustomLabelInputViewModel:function(){return this.$1$19},set_toCustomLabelInputViewModel:function(ni){this.$1$19=ni},get_toCustomTooltipInputViewModel:function(){return this.$1$20},set_toCustomTooltipInputViewModel:function(ni){this.$1$20=ni}});var jJ=global.tab.ReferenceLineDialogDistributionPopupComponent=ss.mkType(a,'tab.ReferenceLineDialogDistributionPopupComponent',function(ni,nj){React.Component.call(this,ni,nj)},{render:function(){var ni=React.createElement(spiff.DropdownComponent,this.$0(),spiff.DOMElements.div({className:'tabDistributionPopup'},spiff.DOMElements.div({className:'tabDistributionTypeButtons'},React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,this.props.radioProps)),spiff.DOMElements.div({className:'tabDistributionActivePane'},this.$1())));return ni},$1:function(){switch(this.props.distributionType){case'percentages':{return React.createElement(fl,this.props.activePaneProps)}case'percentiles':{return React.createElement(fo,this.props.activePaneProps)}case'quantiles':{return React.createElement(fr,this.props.activePaneProps)}case'standard-deviation':{return React.createElement(fu,this.props.activePaneProps)}default:{return spiff.DOMElements.div({})}}},$0:function(){return{getDesiredHeight:jJ.$0,getMinimumWidth:jJ.$1,tabIndex:-1,renderButton:ss.mkdel(this,function(){return React.createElement(spiff.TextDropdownButtonComponent,this.props.dropdownButtonProps)})}}},{$1:function(ni){return 360},$0:function(ni){return 137}});var jK=global.tab.ReferenceLineDialogDistributionPopupComponentConstants=ss.mkType(a,'tab.ReferenceLineDialogDistributionPopupComponentConstants');var jL=global.tab.ReferenceLineDialogDistributionPopupViewModel=ss.mkType(a,'tab.ReferenceLineDialogDistributionPopupViewModel',function(ni){jL.$ctor1.call(this,ni,new fn(ni.get_distributionPercentagesModel()),new fq(ni.get_distributionPercentilesModel()),new ft(ni.get_distributionQuantilesModel()),new fw(ni.get_distributionStandardDeviationModel()))},{get_distributionModel:function(){return this.$3$1},set_distributionModel:function(ni){this.$3$1=ni},get_distributionPercentagesViewModel:function(){return this.$3$2},set_distributionPercentagesViewModel:function(ni){this.$3$2=ni},get_distributionPercentilesViewModel:function(){return this.$3$3},set_distributionPercentilesViewModel:function(ni){this.$3$3=ni},get_distributionQuantilesViewModel:function(){return this.$3$4},set_distributionQuantilesViewModel:function(ni){this.$3$4=ni},get_distributionStandardDeviationViewModel:function(){return this.$3$5},set_distributionStandardDeviationViewModel:function(ni){this.$3$5=ni},get_visualId:function(){return this.get_distributionModel().get_visualId()},get_isPercentilesAllowed:function(){return this.get_distributionModel().get_isPercentilesAllowed()},get_isQuantilesAllowed:function(){return this.get_distributionModel().get_isQuantilesAllowed()},get_isStandardDeviationAllowed:function(){return this.get_distributionModel().get_isStandardDeviationAllowed()},createUpdatedProps:function(){return{dropdownButtonProps:{styleClass:'tab-unification-line-arrow-dropdown',selectionText:this.get_distributionModel().get_selectedText()},radioProps:{checkedIndex:this.getIndexFromDistributionType(this.get_distributionModel().get_distributionType()),buttonList:this.$3(),handleChange:ss.mkdel(this,function(ni,nj){this.$5(ni)})},distributionType:this.get_distributionModel().get_distributionType(),activePaneProps:this.$4(this.get_distributionModel().get_distributionType())}},$4:function(ni){switch(ni){case'percentages':{return this.get_distributionPercentagesViewModel().get_props()}case'percentiles':{return this.get_distributionPercentilesViewModel().get_props()}case'quantiles':{return this.get_distributionQuantilesViewModel().get_props()}case'standard-deviation':{return this.get_distributionStandardDeviationViewModel().get_props()}default:{return null}}},getIndexFromDistributionType:function(ni){return ss.indexOf(jL.distributionTypes,ni)},$3:function(){var ni=[];for(var nj=0;nj<jL.distributionTypes.length;nj++){var nk=jL.distributionTypes[nj];ni.push({value:nk,label:jL.distributionTypeStrings[nk].item1,testId:jL.distributionTypeStrings[nk].item2,disabled:this.$6(nk)})}return ni},$6:function(ni){return ni==='percentiles'&&!this.get_isPercentilesAllowed()||ni==='quantiles'&&!this.get_isQuantilesAllowed()||ni==='standard-deviation'&&!this.get_isStandardDeviationAllowed()},$5:function(ni){if(ni!==this.get_distributionModel().get_distributionType()){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_distributionType(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_distributionModel().get_refLineId());nj.invoke()}}},{$ctor1:function(ni,nj,nk,nl,nm){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionModel(ni);this.addChildViewModel(nj);this.set_distributionPercentagesViewModel(nj);this.addChildViewModel(nk);this.set_distributionPercentilesViewModel(nk);this.addChildViewModel(nl);this.set_distributionQuantilesViewModel(nl);this.addChildViewModel(nm);this.set_distributionStandardDeviationViewModel(nm);this.get_distributionModel().add_modelUpdated(ss.mkdel(this,this.incrementProps));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionModel().remove_modelUpdated(ss.mkdel(this,this.incrementProps))})))}});var jM=global.tab.ReferenceLineDialogDistributionState=ss.mkType(a,'tab.ReferenceLineDialogDistributionState',function(){});var jN=global.tab.ReferenceLineDialogDistributionTabComponent=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-distributionTab'},(this.props.enabled?ss.mkdel(this,function(){var ni=spiff.DOMElements.div;var nj=spiff.DOMElements.div;var nk=new ke;nk.viewModel=this.props.scopeViewModel;return ni({},nj({className:'tab-scopeWrapper'},React.createElement(kd,nk)),spiff.DOMElements.div({className:'tab-editReferenceLineLineSection'},spiff.DOMElements.span({className:'tab-sectionTitle'},tab.Strings.AODialogDistributionTabTitle),spiff.DOMElements.div({className:'tab-editReferenceLineLineSectionInner'},spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-distrValueComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogValueLabel),React.createElement(jJ,this.props.popupProps))),React.createElement(ka,this.props.labelProps),React.createElement(kj,this.props.tooltipProps))),spiff.DOMElements.div({className:'tab-instantAnalytics'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.instantAnalyticsProps)))})():null))}});var jO=global.tab.ReferenceLineDialogDistributionTabProps=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabProps',function(){this.enabled=false;this.popupProps=null;this.labelProps=null;this.tooltipProps=null;this.instantAnalyticsProps=null;this.scopeViewModel=null});var jP=global.tab.ReferenceLineDialogDistributionTabState=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabState',function(){});var jQ=global.tab.ReferenceLineDialogDistributionTabViewModel=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabViewModel',function(ni){var nj=new jR;nj.set_scopeViewModel(new ki);nj.set_labelViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_tooltipViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_customLabelTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_customTooltipTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_popupViewModel(new jL(ni));nj.set_instantAnalyticsViewModel(new gS(jQ.$3));var nk=new eO('CustomLabel');nk.set_allowEmpty(true);nk.set_shouldSelectTextOnFocus(false);nj.set_customLabelInputViewModel(nk);var nl=new eO('CustomTooltip');nl.set_allowEmpty(true);nl.set_shouldSelectTextOnFocus(false);nj.set_customTooltipInputViewModel(nl);jQ.$ctor1.call(this,ni,nj)},{get_distributionModel:function(){return this.$3$1},set_distributionModel:function(ni){this.$3$1=ni},get_scopeViewModel:function(){return this.$3$2},set_scopeViewModel:function(ni){this.$3$2=ni},get_labelViewModel:function(){return this.$3$3},set_labelViewModel:function(ni){this.$3$3=ni},get_tooltipViewModel:function(){return this.$3$4},set_tooltipViewModel:function(ni){this.$3$4=ni},get_customLabelTagViewModel:function(){return this.$3$5},set_customLabelTagViewModel:function(ni){this.$3$5=ni},get_customTooltipTagViewModel:function(){return this.$3$6},set_customTooltipTagViewModel:function(ni){this.$3$6=ni},get_popupViewModel:function(){return this.$3$7},set_popupViewModel:function(ni){this.$3$7=ni},get_instantAnalyticsViewModel:function(){return this.$3$8},set_instantAnalyticsViewModel:function(ni){this.$3$8=ni},get_customLabelInputViewModel:function(){return this.$3$9},set_customLabelInputViewModel:function(ni){this.$3$9=ni},get_customTooltipInputViewModel:function(){return this.$3$10},set_customTooltipInputViewModel:function(ni){this.$3$10=ni},get_isCustomLabelSelected:function(){return this.get_distributionModel().get_labelType()==='custom'},get_isCustomTooltipSelected:function(){return this.get_distributionModel().get_tooltipType()==='custom'},get_isValid:function(){return this.get_distributionModel().get_isValid()},get_isInstantAnalyticsAllowed:function(){return this.get_distributionModel().get_isInstantAnalyticsAllowed()},get_visualId:function(){return this.get_distributionModel().get_visualId()},get_referenceLineId:function(){return this.get_distributionModel().get_refLineId()},$d:function(){var ni=null;var nj=[];var nk=this.get_distributionModel().get_validLabelTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_distributionModel().get_labelType())){ni=nn}}this.get_labelViewModel().setItemsWithInitialSelection(nj,ni)},$e:function(){var ni=null;var nj=[];var nk=this.get_distributionModel().get_validTooltipTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_distributionModel().get_tooltipType())){ni=nn}}this.get_tooltipViewModel().setItemsWithInitialSelection(nj,ni)},$8:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(nj!==this.get_distributionModel().get_labelType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_labelType(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$a:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(nj!==this.get_distributionModel().get_tooltipType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_tooltipType(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$b:function(){var ni=_.map(this.get_distributionModel().get_validCustomLabelTags(),function(nj){return new spiff.ComboBoxItem(null,nj,ss.formatString('<{0}>',nj),null,null)});this.get_customLabelTagViewModel().setItemsWithInitialSelection(ni,null)},$c:function(){var ni=_.map(this.get_distributionModel().get_validCustomLabelTags(),function(nj){return new spiff.ComboBoxItem(null,nj,ss.formatString('<{0}>',nj),null,null)});this.get_customTooltipTagViewModel().setItemsWithInitialSelection(ni,null)},$3:function(ni){if(ss.equalsT(ni,this.get_distributionModel().get_customLabel())){return}var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_customLabel(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()},$4:function(ni){if(ss.equalsT(ni,this.get_distributionModel().get_customTooltip())){return}var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_customTooltip(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()},$5:function(ni){this.get_customLabelInputViewModel().insertText(ni.get_data())},$6:function(ni){this.get_customTooltipInputViewModel().insertText(ni.get_data())},$9:function(){if(this.get_scopeViewModel().get_selectedScope()!==this.get_distributionModel().get_scopeType()){var ni=new tab.UpdateReferenceLineCmd;ni.set_uiBlocking('immediately');ni.set_scopeType(this.get_scopeViewModel().get_selectedScope());ni.set_visualID(this.get_distributionModel().get_visualId());ni.set_refLineId(this.get_distributionModel().get_refLineId());ni.invoke()}},$7:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_enableInstantAnalytics(ni);nj.set_visualID(this.get_distributionModel().get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()},updateDomFromModel:function(){if(ss.isValue(this.get_distributionModel().get_distributionPresModel())){this.get_scopeViewModel().updateFromModel(this.get_distributionModel().get_scopeType());this.get_instantAnalyticsViewModel().updateFromModel(this.get_distributionModel().get_instantAnalyticsEnabled(),this.get_isInstantAnalyticsAllowed());this.get_customLabelInputViewModel().updateFromModel(this.get_distributionModel().get_customLabel());this.get_customTooltipInputViewModel().updateFromModel(this.get_distributionModel().get_customTooltip());this.$d();this.$e();this.$b();this.$c()}},createUpdatedProps:function(){var ni=new jO;ni.enabled=this.get_distributionModel().get_isValid();ni.scopeViewModel=this.get_scopeViewModel();ni.popupProps=this.get_popupViewModel().get_props();var nj=new kb;nj.cssClass='tab-distrLabelComponentWrapper';nj.labelDropdownProps=this.get_labelViewModel().get_props();nj.isCustomLabelSelected=this.get_isCustomLabelSelected();nj.customLabelInputProps=this.get_customLabelInputViewModel().get_props();nj.customLabelTagProps=this.get_customLabelTagViewModel().get_props();ni.labelProps=nj;var nk=new kk;nk.cssClass='tab-distrTooltipComponentWrapper';nk.tooltipDropdownProps=this.get_tooltipViewModel().get_props();nk.isCustomTooltipSelected=this.get_isCustomTooltipSelected();nk.customTooltipInputProps=this.get_customTooltipInputViewModel().get_props();nk.customTooltipTagProps=this.get_customTooltipTagViewModel().get_props();ni.tooltipProps=nk;ni.instantAnalyticsProps=this.get_instantAnalyticsViewModel().get_props();return ni}},{$ctor1:function(ni,nj){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;this.$3$8=null;this.$3$9=null;this.$3$10=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[jO]).call(this);this.set_distributionModel(ni);this.set_scopeViewModel(nj.get_scopeViewModel());this.set_labelViewModel(nj.get_labelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_labelViewModel()));this.set_tooltipViewModel(nj.get_tooltipViewModel());this.disposables.add$1(this.addChildViewModel(this.get_tooltipViewModel()));this.set_customLabelTagViewModel(nj.get_customLabelTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customLabelTagViewModel()));this.set_customTooltipTagViewModel(nj.get_customTooltipTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customTooltipTagViewModel()));this.set_popupViewModel(nj.get_popupViewModel());this.disposables.add$1(this.addChildViewModel(this.get_popupViewModel()));this.set_instantAnalyticsViewModel(nj.get_instantAnalyticsViewModel());this.disposables.add$1(this.addChildViewModel(this.get_instantAnalyticsViewModel()));this.set_customLabelInputViewModel(nj.get_customLabelInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customLabelInputViewModel()));this.set_customTooltipInputViewModel(nj.get_customTooltipInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customTooltipInputViewModel()));this.get_distributionModel().add_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().add_scopeUpdated(ss.mkdel(this,this.$9));this.get_labelViewModel().add_selectedItemChanged(ss.mkdel(this,this.$8));this.get_tooltipViewModel().add_selectedItemChanged(ss.mkdel(this,this.$a));this.get_customLabelTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$5));this.get_customTooltipTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$6));this.get_instantAnalyticsViewModel().add_instantAnalyticsUpdated(ss.mkdel(this,this.$7));this.get_customLabelInputViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.get_customTooltipInputViewModel().add_onValueChanged(ss.mkdel(this,this.$4));this.get_labelViewModel().set_hasTooltip(false);this.get_tooltipViewModel().set_hasTooltip(false);this.get_customLabelTagViewModel().set_hasTooltip(false);this.get_customTooltipTagViewModel().set_hasTooltip(false);this.disposables.add$2([this.get_scopeViewModel(),this.get_labelViewModel(),this.get_tooltipViewModel(),this.get_customLabelTagViewModel(),this.get_customTooltipTagViewModel(),this.get_popupViewModel(),this.get_instantAnalyticsViewModel(),this.get_customLabelInputViewModel(),this.get_customTooltipInputViewModel(),new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionModel().remove_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().remove_scopeUpdated(ss.mkdel(this,this.$9));this.get_labelViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$8));this.get_tooltipViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$a));this.get_customLabelTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$5));this.get_customTooltipTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$6));this.get_instantAnalyticsViewModel().remove_instantAnalyticsUpdated(ss.mkdel(this,this.$7));this.get_customLabelInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$3));this.get_customTooltipInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$4))}))])}});var jR=global.tab.ReferenceLineDialogDistributionTabViewModels=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabViewModels',function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null},{get_scopeViewModel:function(){return this.$1$1},set_scopeViewModel:function(ni){this.$1$1=ni},get_labelViewModel:function(){return this.$1$2},set_labelViewModel:function(ni){this.$1$2=ni},get_tooltipViewModel:function(){return this.$1$3},set_tooltipViewModel:function(ni){this.$1$3=ni},get_customLabelTagViewModel:function(){return this.$1$4},set_customLabelTagViewModel:function(ni){this.$1$4=ni},get_customTooltipTagViewModel:function(){return this.$1$5},set_customTooltipTagViewModel:function(ni){this.$1$5=ni},get_popupViewModel:function(){return this.$1$6},set_popupViewModel:function(ni){this.$1$6=ni},get_instantAnalyticsViewModel:function(){return this.$1$7},set_instantAnalyticsViewModel:function(ni){this.$1$7=ni},get_customLabelInputViewModel:function(){return this.$1$8},set_customLabelInputViewModel:function(ni){this.$1$8=ni},get_customTooltipInputViewModel:function(){return this.$1$9},set_customTooltipInputViewModel:function(ni){this.$1$9=ni}});var jS=global.tab.ReferenceLineDialogLineTabComponent=ss.mkType(a,'tab.ReferenceLineDialogLineTabComponent',function(){React.Component.call(this)},{render:function(){var ni=spiff.DOMElements.div;var nj=spiff.DOMElements.div;var nk=new ke;nk.viewModel=this.props.scopeViewModel;return ni({className:'tab-referenceLineTab'},nj({className:'tab-scopeWrapper'},React.createElement(kd,nk)),spiff.DOMElements.div({className:'tab-editReferenceLineLineSection'},spiff.DOMElements.span({className:'tab-sectionTitle'},tab.Strings.AODialogLineTabTitle),spiff.DOMElements.div({className:'tab-editReferenceLineLineSectionInner'},spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-valueComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogValueLabel),(this.props.isConstantSelected?React.createElement(eN,this.props.constantValueProps):React.createElement(spiff.ComboBoxComponent,this.props.valueProps))),spiff.DOMElements.div({className:'tab-computationComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogComputationLabel),React.createElement(spiff.ComboBoxComponent,this.props.formulaProps))),React.createElement(ka,this.props.labelProps),React.createElement(kj,this.props.tooltipProps),spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-confidenceIntervalStateComponentWrapper tab-componentWrapper'},React.createElement(spiff.ComboBoxComponent,this.props.confidenceIntervalStateProps)),spiff.DOMElements.div({className:'tab-percentileComponentWrapper tab-componentWrapper'},React.createElement(fM,this.props.confidenceLevelProps))))),spiff.DOMElements.div({className:'tab-instantAnalytics'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.instantAnalyticsProps)))}});var jT=global.tab.ReferenceLineDialogLineTabProps=ss.mkType(a,'tab.ReferenceLineDialogLineTabProps',function(){this.valueProps=null;this.formulaProps=null;this.labelProps=null;this.tooltipProps=null;this.confidenceIntervalStateProps=null;this.confidenceLevelProps=null;this.constantValueProps=null;this.instantAnalyticsProps=null;this.isConstantSelected=false;this.isConfidenceIntervalAllowed=false;this.scopeViewModel=null});var jU=global.tab.ReferenceLineDialogLineTabState=ss.mkType(a,'tab.ReferenceLineDialogLineTabState',function(){});var jV=global.tab.ReferenceLineDialogLineTabViewModel=ss.mkType(a,'tab.ReferenceLineDialogLineTabViewModel',function(ni){var nj=new jW;nj.set_scopeViewModel(new ki);nj.set_labelViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_tooltipViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_customLabelTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_customTooltipTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_valueViewModel(new gd(ni.get_fieldPickerCombo()));nj.set_formulaViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_confidenceIntervalStateViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nj.set_confidenceLevelViewModel(new fO(ni.get_confidenceLevelCombo(),'ConfidenceLevel'));nj.set_instantAnalyticsCheckboxViewModel(new gS(jV.$5));nj.set_constantValueInputViewModel(new eO('ConstantValue'));var nk=new eO('CustomLabel');nk.set_allowEmpty(true);nk.set_shouldSelectTextOnFocus(false);nj.set_customLabelInputViewModel(nk);var nl=new eO('CustomTooltip');nl.set_allowEmpty(true);nl.set_shouldSelectTextOnFocus(false);nj.set_customTooltipInputViewModel(nl);jV.$ctor1.call(this,ni,nj)},{get_lineModel:function(){return this.$3$1},set_lineModel:function(ni){this.$3$1=ni},get_scopeViewModel:function(){return this.$3$2},set_scopeViewModel:function(ni){this.$3$2=ni},get_labelViewModel:function(){return this.$3$3},set_labelViewModel:function(ni){this.$3$3=ni},get_tooltipViewModel:function(){return this.$3$4},set_tooltipViewModel:function(ni){this.$3$4=ni},get_customLabelTagViewModel:function(){return this.$3$5},set_customLabelTagViewModel:function(ni){this.$3$5=ni},get_customTooltipTagViewModel:function(){return this.$3$6},set_customTooltipTagViewModel:function(ni){this.$3$6=ni},get_valueViewModel:function(){return this.$3$7},set_valueViewModel:function(ni){this.$3$7=ni},get_formulaViewModel:function(){return this.$3$8},set_formulaViewModel:function(ni){this.$3$8=ni},get_confidenceIntervalStateViewModel:function(){return this.$3$9},set_confidenceIntervalStateViewModel:function(ni){this.$3$9=ni},get_confidenceLevelViewModel:function(){return this.$3$10},set_confidenceLevelViewModel:function(ni){this.$3$10=ni},get_instantAnalyticsViewModel:function(){return this.$3$11},set_instantAnalyticsViewModel:function(ni){this.$3$11=ni},get_constantValueInputViewModel:function(){return this.$3$12},set_constantValueInputViewModel:function(ni){this.$3$12=ni},get_customLabelInputViewModel:function(){return this.$3$13},set_customLabelInputViewModel:function(ni){this.$3$13=ni},get_customTooltipInputViewModel:function(){return this.$3$14},set_customTooltipInputViewModel:function(ni){this.$3$14=ni},get_isConstantSelected:function(){return this.get_lineModel().get_formulaType()==='constant'},get_isParameterSelected:function(){return this.get_lineModel().get_isParameterSelected()},get_isCustomLabelSelected:function(){return this.get_lineModel().get_labelType()==='custom'},get_isCustomTooltipSelected:function(){return this.get_lineModel().get_tooltipType()==='custom'},get_isConfidenceIntervalAllowed:function(){return this.get_lineModel().get_isConfidenceIntervalAllowed()},get_isInstantAnalyticsAllowed:function(){return this.get_lineModel().get_isInstantAnalyticsAllowed()},get_visualId:function(){return this.get_lineModel().get_visualId()},get_referenceLineId:function(){return this.get_lineModel().get_refLineId()},$j:function(){var ni=this.get_lineModel().get_isConfidenceIntervalAllowed()&&this.get_lineModel().get_confidenceIntervalSelectedState()!=='line-only';this.get_confidenceLevelViewModel().set_enabled(ni)},$m:function(){var ni=null;this.get_formulaViewModel().clearItems();var nj=[];var nk=this.get_lineModel().get_validFormulaTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.displayText,nm.referenceLineFormulaType,null,null);if(ss.equals(nm.referenceLineFormulaType,this.get_lineModel().get_formulaType())){ni=nn}nj.push(nn)}this.get_formulaViewModel().setItemsWithInitialSelection(nj,ni);this.get_formulaViewModel().set_selectedItem(ni);this.get_formulaViewModel().set_enabled(!this.get_isParameterSelected())},$p:function(){this.get_valueViewModel().updateDomFromModel()},$n:function(){var ni=null;var nj=[];var nk=this.get_lineModel().get_validLabelTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_lineModel().get_labelType())){ni=nn}}this.get_labelViewModel().setItemsWithInitialSelection(nj,ni)},$o:function(){var ni=null;var nj=[];var nk=this.get_lineModel().get_validTooltipTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_lineModel().get_tooltipType())){ni=nn}}this.get_tooltipViewModel().setItemsWithInitialSelection(nj,ni)},$k:function(){var ni=_.map(this.get_lineModel().get_validCustomLabelTags(),function(nj){return new spiff.ComboBoxItem(null,nj,ss.formatString('<{0}>',nj),null,null)});this.get_customLabelTagViewModel().setItemsWithInitialSelection(ni,null)},$l:function(){var ni=_.map(this.get_lineModel().get_validCustomLabelTags(),function(nj){return new spiff.ComboBoxItem(null,nj,ss.formatString('<{0}>',nj),null,null)});this.get_customTooltipTagViewModel().setItemsWithInitialSelection(ni,null)},$i:function(){var ni=null;var nj=[];var nk=this.get_lineModel().get_confidenceIntervalStates();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(null,nm.value,nm.key,null,null);nj.push(nn);if(ss.equals(nm.key,this.get_lineModel().get_confidenceIntervalSelectedState())){ni=nn}}this.get_confidenceIntervalStateViewModel().setItemsWithInitialSelection(nj,ni);this.get_confidenceIntervalStateViewModel().set_enabled(this.get_lineModel().get_isConfidenceIntervalAllowed())},$f:function(){if(this.get_scopeViewModel().get_selectedScope()!==this.get_lineModel().get_scopeType()){var ni=new tab.UpdateReferenceLineCmd;ni.set_uiBlocking('immediately');ni.set_scopeType(this.get_scopeViewModel().get_selectedScope());ni.set_visualID(this.get_visualId());ni.set_refLineId(this.get_referenceLineId());ni.invoke()}},$d:function(ni){if(ni!==this.get_lineModel().get_instantAnalyticsEnabled()){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_enableInstantAnalytics(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()}},$c:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(nj!==this.get_lineModel().get_formulaType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_formulaType(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$e:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(nj!==this.get_lineModel().get_labelType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_labelType(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$g:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(nj!==this.get_lineModel().get_tooltipType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_tooltipType(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$a:function(ni){this.get_customLabelInputViewModel().insertText(ni.get_data())},$b:function(ni){this.get_customTooltipInputViewModel().insertText(ni.get_data())},$h:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(!ss.referenceEquals(nj,this.get_lineModel().get_fieldPickerCombo().get_selectedField())){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_fieldName(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$6:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(nj!==this.get_lineModel().get_confidenceIntervalSelectedState()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.set_confidenceIntervalState(nj);nk.set_visualID(this.get_visualId());nk.set_refLineId(this.get_referenceLineId());nk.invoke()}},$9:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_referenceParameter(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()},$8:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_confidenceLevelValue(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()},$7:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_confidenceLevelValue(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());var nk=nj.invoke();var nl=this.get_confidenceLevelViewModel();nk.always(ss.mkdel(nl,nl.updateDomFromModel))},$3:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_constantValue(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke().always(ss.mkdel(this,this.updateDomFromModel))},$4:function(ni){if(ss.equalsT(ni,this.get_lineModel().get_customLabel())){return}var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_customLabel(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()},$5:function(ni){if(ss.equalsT(ni,this.get_lineModel().get_customTooltip())){return}var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('afterDelay');nj.set_customTooltip(ni);nj.set_visualID(this.get_visualId());nj.set_refLineId(this.get_referenceLineId());nj.invoke()},updateDomFromModel:function(){if(ss.isValue(this.get_lineModel().get_refLinePresModel())){this.get_scopeViewModel().updateFromModel(this.get_lineModel().get_scopeType());this.get_instantAnalyticsViewModel().updateFromModel(this.get_lineModel().get_instantAnalyticsEnabled(),this.get_isInstantAnalyticsAllowed());this.get_constantValueInputViewModel().updateFromModel(this.get_lineModel().get_formattedConstantValue());this.get_customLabelInputViewModel().updateFromModel(this.get_lineModel().get_customLabel());this.get_customTooltipInputViewModel().updateFromModel(this.get_lineModel().get_customTooltip());this.$m();this.$p();this.$n();this.$o();this.$k();this.$l();this.$i();this.$j()}},createUpdatedProps:function(){var ni=new jT;ni.scopeViewModel=this.get_scopeViewModel();ni.isConstantSelected=this.get_isConstantSelected();ni.isConfidenceIntervalAllowed=this.get_isConfidenceIntervalAllowed();ni.constantValueProps=this.get_constantValueInputViewModel().get_props();ni.formulaProps=this.get_formulaViewModel().get_props();ni.valueProps=this.get_valueViewModel().get_props();var nj=new kb;nj.labelDropdownProps=this.get_labelViewModel().get_props();nj.isCustomLabelSelected=this.get_isCustomLabelSelected();nj.customLabelInputProps=this.get_customLabelInputViewModel().get_props();nj.customLabelTagProps=this.get_customLabelTagViewModel().get_props();ni.labelProps=nj;var nk=new kk;nk.tooltipDropdownProps=this.get_tooltipViewModel().get_props();nk.isCustomTooltipSelected=this.get_isCustomTooltipSelected();nk.customTooltipInputProps=this.get_customTooltipInputViewModel().get_props();nk.customTooltipTagProps=this.get_customTooltipTagViewModel().get_props();ni.tooltipProps=nk;ni.confidenceIntervalStateProps=this.get_confidenceIntervalStateViewModel().get_props();ni.confidenceLevelProps=this.get_confidenceLevelViewModel().get_props();ni.instantAnalyticsProps=this.get_instantAnalyticsViewModel().get_props();return ni}},{$ctor1:function(ni,nj){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;this.$3$8=null;this.$3$9=null;this.$3$10=null;this.$3$11=null;this.$3$12=null;this.$3$13=null;this.$3$14=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[jT]).call(this);this.set_lineModel(ni);this.set_scopeViewModel(nj.get_scopeViewModel());this.set_labelViewModel(nj.get_labelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_labelViewModel()));this.set_tooltipViewModel(nj.get_tooltipViewModel());this.disposables.add$1(this.addChildViewModel(this.get_tooltipViewModel()));this.set_customLabelTagViewModel(nj.get_customLabelTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customLabelTagViewModel()));this.set_customTooltipTagViewModel(nj.get_customTooltipTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customTooltipTagViewModel()));this.set_valueViewModel(nj.get_valueViewModel());this.disposables.add$1(this.addChildViewModel(this.get_valueViewModel()));this.set_formulaViewModel(nj.get_formulaViewModel());this.disposables.add$1(this.addChildViewModel(this.get_formulaViewModel()));this.set_confidenceIntervalStateViewModel(nj.get_confidenceIntervalStateViewModel());this.disposables.add$1(this.addChildViewModel(this.get_confidenceIntervalStateViewModel()));this.set_confidenceLevelViewModel(nj.get_confidenceLevelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_confidenceLevelViewModel()));this.set_instantAnalyticsViewModel(nj.get_instantAnalyticsCheckboxViewModel());this.disposables.add$1(this.addChildViewModel(this.get_instantAnalyticsViewModel()));this.set_constantValueInputViewModel(nj.get_constantValueInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_constantValueInputViewModel()));this.set_customLabelInputViewModel(nj.get_customLabelInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customLabelInputViewModel()));this.set_customTooltipInputViewModel(nj.get_customTooltipInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customTooltipInputViewModel()));this.get_lineModel().add_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().add_scopeUpdated(ss.mkdel(this,this.$f));this.get_formulaViewModel().add_selectedItemChanged(ss.mkdel(this,this.$c));this.get_valueViewModel().add_selectedItemChanged(ss.mkdel(this,this.$h));this.get_labelViewModel().add_selectedItemChanged(ss.mkdel(this,this.$e));this.get_tooltipViewModel().add_selectedItemChanged(ss.mkdel(this,this.$g));this.get_customLabelTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$a));this.get_customTooltipTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$b));this.get_confidenceIntervalStateViewModel().add_selectedItemChanged(ss.mkdel(this,this.$6));this.get_confidenceLevelViewModel().add_dataValueUpdated(ss.mkdel(this,this.$8));this.get_confidenceLevelViewModel().add_customDataValueUpdated(ss.mkdel(this,this.$7));this.get_confidenceLevelViewModel().add_parameterSelected(ss.mkdel(this,this.$9));this.get_instantAnalyticsViewModel().add_instantAnalyticsUpdated(ss.mkdel(this,this.$d));this.get_constantValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.get_customLabelInputViewModel().add_onValueChanged(ss.mkdel(this,this.$4));this.get_customTooltipInputViewModel().add_onValueChanged(ss.mkdel(this,this.$5));this.get_labelViewModel().set_hasTooltip(false);this.get_customLabelTagViewModel().set_hasTooltip(false);this.get_tooltipViewModel().set_hasTooltip(false);this.get_customTooltipTagViewModel().set_hasTooltip(false);this.get_valueViewModel().set_hasTooltip(false);this.get_formulaViewModel().set_hasTooltip(false);this.get_confidenceIntervalStateViewModel().set_hasTooltip(false);this.get_confidenceLevelViewModel().set_hasTooltip(false);this.disposables.add$2([this.get_scopeViewModel(),this.get_labelViewModel(),this.get_tooltipViewModel(),this.get_customLabelTagViewModel(),this.get_customTooltipTagViewModel(),this.get_valueViewModel(),this.get_formulaViewModel(),this.get_confidenceIntervalStateViewModel(),this.get_confidenceLevelViewModel(),this.get_instantAnalyticsViewModel(),this.get_constantValueInputViewModel(),this.get_customLabelInputViewModel(),this.get_customTooltipInputViewModel(),new tab.CallOnDispose(ss.mkdel(this,function(){this.get_lineModel().remove_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().remove_scopeUpdated(ss.mkdel(this,this.$f));this.get_formulaViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$c));this.get_valueViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$h));this.get_labelViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$e));this.get_tooltipViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$g));this.get_customLabelTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$a));this.get_customTooltipTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$b));this.get_confidenceIntervalStateViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$6));this.get_confidenceLevelViewModel().remove_dataValueUpdated(ss.mkdel(this,this.$8));this.get_confidenceLevelViewModel().remove_customDataValueUpdated(ss.mkdel(this,this.$7));this.get_confidenceLevelViewModel().remove_parameterSelected(ss.mkdel(this,this.$9));this.get_instantAnalyticsViewModel().remove_instantAnalyticsUpdated(ss.mkdel(this,this.$d));this.get_constantValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$3));this.get_customLabelInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$4));this.get_customTooltipInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$5))}))])}});var jW=global.tab.ReferenceLineDialogLineTabViewModels=ss.mkType(a,'tab.ReferenceLineDialogLineTabViewModels',function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null;this.$1$10=null;this.$1$11=null;this.$1$12=null;this.$1$13=null},{get_scopeViewModel:function(){return this.$1$1},set_scopeViewModel:function(ni){this.$1$1=ni},get_labelViewModel:function(){return this.$1$2},set_labelViewModel:function(ni){this.$1$2=ni},get_tooltipViewModel:function(){return this.$1$3},set_tooltipViewModel:function(ni){this.$1$3=ni},get_customLabelTagViewModel:function(){return this.$1$4},set_customLabelTagViewModel:function(ni){this.$1$4=ni},get_customTooltipTagViewModel:function(){return this.$1$5},set_customTooltipTagViewModel:function(ni){this.$1$5=ni},get_valueViewModel:function(){return this.$1$6},set_valueViewModel:function(ni){this.$1$6=ni},get_formulaViewModel:function(){return this.$1$7},set_formulaViewModel:function(ni){this.$1$7=ni},get_confidenceIntervalStateViewModel:function(){return this.$1$8},set_confidenceIntervalStateViewModel:function(ni){this.$1$8=ni},get_confidenceLevelViewModel:function(){return this.$1$9},set_confidenceLevelViewModel:function(ni){this.$1$9=ni},get_instantAnalyticsCheckboxViewModel:function(){return this.$1$10},set_instantAnalyticsCheckboxViewModel:function(ni){this.$1$10=ni},get_constantValueInputViewModel:function(){return this.$1$11},set_constantValueInputViewModel:function(ni){this.$1$11=ni},get_customLabelInputViewModel:function(){return this.$1$12},set_customLabelInputViewModel:function(ni){this.$1$12=ni},get_customTooltipInputViewModel:function(){return this.$1$13},set_customTooltipInputViewModel:function(ni){this.$1$13=ni}});var jX=global.tab.ReferenceLineDialogTemplate=ss.mkType(a,'tab.ReferenceLineDialogTemplate',function(ni){this.$2=null;this.$1=null;spiff.Template.call(this,ni||$("<div><div class='tab-editReferenceLineTabs'></div><div class='tab-editReferenceLineTabContentArea'></div></div>"));this.$2=this.getElementBySelector('.tab-editReferenceLineTabs');this.$1=this.getElementBySelector('.tab-editReferenceLineTabContentArea')},{get_root:function(){return this.domRoot},get_tabs:function(){return this.$2},get_contentArea:function(){return this.$1},createTabLabel:function(ni,nj){return new p(ni,nj)}});var jY=global.tab.ReferenceLineDialogView=ss.mkType(a,'tab.ReferenceLineDialogView',function(ni){this.$n=null;this.$j=null;this.$m=null;this.$k=null;this.$l=null;this.defaultStartingPosition=null;ss.makeGenericType(spiff.BaseView$1,[jZ]).call(this,ni,new jX(null));this.get_viewModel().add_updated(ss.mkdel(this,this.$e));this.get_viewModel().add_activate(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_updated(ss.mkdel(this,this.$e));this.get_viewModel().remove_activate(ss.mkdel(this,this.$a))})))},{get_dialog:function(){return this.$j},$h:function(){return this.get_template()},$i:function(){return this.get_viewModel().get_dialogPosition()||this.defaultStartingPosition},dispose:function(){this.$7();ss.makeGenericType(spiff.BaseView$1,[jZ]).prototype.dispose.call(this)},$9:function(){this.$n=new spiff.TabControl(this.get_template());this.$m=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[jV,jS,jT])).call(null,[this.get_viewModel().get_lineTabViewModel()]);this.$m.addToDom(this.$h().get_contentArea());this.$k=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[jH,jE,jF])).call(null,[this.get_viewModel().get_bandTabViewModel()]);this.$k.addToDom(this.$h().get_contentArea());this.$n.addTab('line'.toString(),tab.Strings.AODialogLineTabTitle,this.$m,true);this.$n.addTab('band'.toString(),tab.Strings.AODialogBandTabTitle,this.$k,true);this.$l=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[jQ,jN,jO])).call(null,[this.get_viewModel().get_distributionTabViewModel()]);this.$l.addToDom(this.$h().get_contentArea());this.$n.addTab('distribution'.toString(),tab.Strings.AODialogDistributionTabTitle,this.$l,this.get_viewModel().get_distributionTabViewModel().get_isValid());this.$n.selectTab(this.get_viewModel().get_currentTab().toString());this.$n.add_tabChanged(ss.mkdel(this,this.$d))},$d:function(){this.get_viewModel().onTabChanged(this.$n.get_activeTabId())},$e:function(){if(ss.isValue(this.get_viewModel().get_model())&&this.get_viewModel().get_model().get_isEditing()){if(ss.isNullOrUndefined(this.$j)){this.createDialog()}else{this.$g();this.$f()}if(!this.$j.get_isShown()){this.onAddedToDom();this.$j.set_setFocusOnShow(!tsConfig.is_mobile);this.get_dialog().show()}this.$n.enableTab('distribution'.toString(),this.get_viewModel().get_distributionTabViewModel().get_isValid())}else{this.$7()}},$f:function(){if(!ss.referenceEquals(this.$n.get_activeTabId(),this.get_viewModel().get_currentTab().toString())){this.$n.remove_tabChanged(ss.mkdel(this,this.$d));this.$n.selectTab(this.get_viewModel().get_currentTab().toString());this.$n.add_tabChanged(ss.mkdel(this,this.$d))}},createDialog:function(){var ni=new spiff.Dialog('',this.element);ni.set_stayInWindow(true);this.$j=ni;if(ss.isValue(this.$i())){this.$j.set_startingPositionX(this.$i().x);this.$j.set_startingPositionY(this.$i().y)}this.$j.add_propertyChanged(ss.mkdel(this,this.$c));this.$j.get_dialogElement().addClass('tabReferenceLineEditDialog');this.$j.disableTextSelection();this.$j.get_dialogElement().addClass('tabSuppressVizTooltipsAndOverlays');this.$j.configMoveDragSource(spiff.Dialog.defaultDraggableDialogConfigurer);this.$j.add_closed(ss.mkdel(this,this.$b));this.$g();this.$9()},$a:function(){if(ss.isValue(this.$j)){this.$j.moveToTop()}},$g:function(){this.$j.set_titleUnescaped(tab.Strings.AODialogTitleString(jY.getTitleStringFromTab(this.get_viewModel().get_currentTab())))},$c:function(ni,nj){if(nj.get_propertyName()==='position'){this.get_viewModel().set_dialogPosition(this.$j.get_position())}},$7:function(){if(ss.isNullOrUndefined(this.$j)){return}this.$8();this.$j.remove_closed(ss.mkdel(this,this.$b));this.$j.remove_propertyChanged(ss.mkdel(this,this.$c));this.$j=tab.MiscUtil.dispose$1(this.$j)},$8:function(){if(ss.isValue(this.$m)){this.$m.dispose();this.$m=null}if(ss.isValue(this.$k)){this.$k.dispose();this.$k=null}if(ss.isValue(this.$l)){this.$l.dispose();this.$l=null}if(ss.isValue(this.$n)){this.$n.remove_tabChanged(ss.mkdel(this,this.$d));this.$n.dispose();this.$n=null}},$b:function(ni,nj){this.get_viewModel().endEdit()}},{getTitleStringFromTab:function(ni){switch(ni){case'line':{return tab.Strings.AODialogLineTabTitle}case'band':{return tab.Strings.AODialogBandTabTitle}case'distribution':{return tab.Strings.AODialogDistributionTabTitle}default:{return''}}}});var jZ=global.tab.ReferenceLineEditorViewModel=ss.mkType(a,'tab.ReferenceLineEditorViewModel',function(ni){this.$2=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;spiff.BaseViewModel.call(this);this.$2=ni;ni.add_modelUpdated(ss.mkdel(this,this.$0));var nj=[{ns:'tabdoc',cmd:'show-reference-line-editor'},{ns:'tabdoc',cmd:'set-reference-line-formula'}];var nk=tab.CommandInterceptors.addPreCommandListener$1(nj,ss.mkdel(this,function(nl){this.raiseActionEvent(this.$2$2)}));this.set_lineTabViewModel(new jV(ni.get_lineModel()));this.set_bandTabViewModel(new jH(ni.get_bandModel()));this.set_distributionTabViewModel(new jQ(ni.get_distributionModel()));this.disposables.add(ss.mkdel(this,function(){this.$2.remove_modelUpdated(ss.mkdel(this,this.$0));tab.CommandInterceptors.removePreCommandListener$1(nj,nk)}))},{add_updated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_updated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_activate:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_activate:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},get_model:function(){return this.$2},get_dialogPosition:function(){return this.$2$3},set_dialogPosition:function(ni){this.$2$3=ni},get_currentTab:function(){return this.$2.get_activePane()},get_currentTabViewModel:function(){switch(this.get_currentTab()){case'line':{return this.get_lineTabViewModel()}case'band':{return this.get_bandTabViewModel()}case'distribution':{return this.get_distributionTabViewModel()}default:{return null}}},get_lineTabViewModel:function(){return this.$2$4},set_lineTabViewModel:function(ni){this.$2$4=ni},get_bandTabViewModel:function(){return this.$2$5},set_bandTabViewModel:function(ni){this.$2$5=ni},get_distributionTabViewModel:function(){return this.$2$6},set_distributionTabViewModel:function(ni){this.$2$6=ni},$0:function(){this.raiseActionEvent(this.$2$1)},endEdit:function(){var ni=new tab.CloseRefLineEditorCmd;ni.set_visualID(this.get_lineTabViewModel().get_lineModel().get_visualId());ni.invoke()},onTabChanged:function(ni){var nj=new tab.UpdateReferenceLineCmd;nj.set_uiBlocking('immediately');nj.set_visualID(this.get_currentTabViewModel().get_visualId());nj.set_refLineId(this.get_currentTabViewModel().get_referenceLineId());nj.set_formulaGroup(this.$1(ni));nj.invoke()},$1:function(ni){return jZ.$1[ni]},dispose:function(){this.get_lineTabViewModel().dispose();this.get_bandTabViewModel().dispose();this.get_distributionTabViewModel().dispose();spiff.BaseViewModel.prototype.dispose.call(this)}},{new$1:function(ni){return new jZ(ni)}});var ka=global.tab.ReferenceLineLabelComponent=ss.mkType(a,'tab.ReferenceLineLabelComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:ss.coalesce('tab-dialogRow '+this.props.cssClass,'')},spiff.DOMElements.div({className:'tab-labelTypeComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogLabelLabel),React.createElement(spiff.ComboBoxComponent,this.props.labelDropdownProps)),(!this.props.isCustomLabelSelected?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-customLabelComponentWrapper tab-componentWrapper'},'')})():null),(this.props.isCustomLabelSelected?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-customLabelComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogCustomLabelLabel),spiff.DOMElements.div({className:'tab-customLabelInput'},React.createElement(eN,this.props.customLabelInputProps),React.createElement(spiff.ComboBoxComponent,this.props.customLabelTagProps)))})():null))}});var kb=global.tab.ReferenceLineLabelProps=ss.mkType(a,'tab.ReferenceLineLabelProps',function(){this.customLabelInputProps=null;this.labelDropdownProps=null;this.customLabelTagProps=null;this.isCustomLabelSelected=false;this.cssClass=null});var kc=global.tab.ReferenceLineLabelState=ss.mkType(a,'tab.ReferenceLineLabelState',function(){});var kd=global.tab.ReferenceLineScopeComponent=ss.mkType(a,'tab.ReferenceLineScopeComponent',function(ni,nj){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[kh,ke,kf]).call(this,new kh(ni.viewModel,null),ni,nj)},{handleWidgetPropertyChanged:function(ni,nj){},updateWidgetState:function(ni){this.get_widget().onUpdatedFromModel()}});var ke=global.tab.ReferenceLineScopeProperties=ss.mkType(a,'tab.ReferenceLineScopeProperties',function(){this.viewModel=null});var kf=global.tab.ReferenceLineScopeState=ss.mkType(a,'tab.ReferenceLineScopeState',function(){});var kg=global.tab.ReferenceLineScopeTemplate=ss.mkType(a,'tab.ReferenceLineScopeTemplate',function(ni){spiff.Template.call(this,ni||$("<div class='tab-editReferenceLineScopeSection'>\n              </div>"))});var kh=global.tab.ReferenceLineScopeView=ss.mkType(a,'tab.ReferenceLineScopeView',function(ni,nj){this.$9={};this.$a=null;ss.makeGenericType(spiff.BaseView$1,[ki]).call(this,ni,nj||new kg(null));this.$a=new spiff.SelectableGroup;var nk=ni.get_referenceLineScopeOptions();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=spiff.LabelToggleButton.newRadioButton(this.$7(nm),false);nn.set_selectionId(nm.toString());nn.addToDom(this.element);nn.addClass(nm.toString());this.disposables.add$1(nn);this.$a.addItem(nn);this.$9[nm.toString()]=nn}this.onUpdatedFromModel();this.$a.add_selectionChanged(ss.mkdel(this,this.$8));this.get_viewModel().add_updatedFromModel(ss.mkdel(this,this.onUpdatedFromModel));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$a.remove_selectionChanged(ss.mkdel(this,this.$8));this.get_viewModel().remove_updatedFromModel(ss.mkdel(this,this.onUpdatedFromModel))})))},{$8:function(){this.get_viewModel().setSelectedScope(this.$a.get_selectedItem().get_selectionId())},onUpdatedFromModel:function(){this.$a.selectItem(this.$9[this.get_viewModel().get_selectedScope().toString()])},$7:function(ni){switch(ni){case'per-table':{return tab.Strings.AODialogTableScope}case'per-pane':{return tab.Strings.AODialogPaneScope}case'per-cell':{return tab.Strings.AODialogCellScope}default:{throw new ss.ArgumentException('Unexpected scopeType value','scopeType')}}}});var ki=global.tab.ReferenceLineScopeViewModel=ss.mkType(a,'tab.ReferenceLineScopeViewModel',function(){this.$0=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);var ni=[];ni.push('per-table');ni.push('per-pane');ni.push('per-cell');this.set_referenceLineScopeOptions(ni);this.$0='per-table'},{add_updatedFromModel:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_updatedFromModel:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_scopeUpdated:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_scopeUpdated:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},get_referenceLineScopeOptions:function(){return this.$2$3},set_referenceLineScopeOptions:function(ni){this.$2$3=ni},get_selectedScope:function(){return this.$0},updateFromModel:function(ni){this.$0=ni;if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}},setSelectedScope:function(ni){this.$0=ni;if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}}});var kj=global.tab.ReferenceLineTooltipComponent=ss.mkType(a,'tab.ReferenceLineTooltipComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:ss.coalesce('tab-dialogRow '+this.props.cssClass,'')},spiff.DOMElements.div({className:'tab-labelTypeComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogTooltipLabel),React.createElement(spiff.ComboBoxComponent,this.props.tooltipDropdownProps)),(!this.props.isCustomTooltipSelected?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-customTooltipComponentWrapper tab-componentWrapper'},'')})():null),(this.props.isCustomTooltipSelected?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-customTooltipComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogCustomTooltipLabel),spiff.DOMElements.div({className:'tab-customLabelInput'},React.createElement(eN,this.props.customTooltipInputProps),React.createElement(spiff.ComboBoxComponent,this.props.customTooltipTagProps)))})():null))}});var kk=global.tab.ReferenceLineTooltipProps=ss.mkType(a,'tab.ReferenceLineTooltipProps',function(){this.customTooltipInputProps=null;this.tooltipDropdownProps=null;this.customTooltipTagProps=null;this.isCustomTooltipSelected=false;this.cssClass=null});var kl=global.tab.RefreshDataServerKeyboardShortcut=ss.mkType(a,'tab.RefreshDataServerKeyboardShortcut',function(){KeyboardShortcuts.CommandKeyboardShortcut.call(this)},{getKeyComboOrKeyCombos:function(){var ni=new Object;ni.alt='required';var nj=new KeyboardShortcuts.KeyCombo('F5',ni);var nk=new Object;nk.alt='required';var nl=new KeyboardShortcuts.KeyCombo('r',nk);return new KeyboardShortcuts.KeyCombos(nj,nl)},getCommandId:function(){return{ns:'tabsrv',cmd:'refresh-data-server'}},getHintText:function(){return((tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='data-tab')?KeyboardShortcuts.KeyCombos.CoerceToKeyCombos(this.getKeyComboOrKeyCombos()).getHintText():null)},isAllowed:function(ni){return KeyboardShortcuts.CommandKeyboardShortcut.prototype.isAllowed.call(this,ni)&&tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='data-tab'}});var km=global.tab.RemoveZoneFromDeviceLayoutWithPreviewCommand=ss.mkType(a,'tab.RemoveZoneFromDeviceLayoutWithPreviewCommand',function(){tab.RemoveZoneFromDeviceLayoutWithPreviewCmd.call(this)},{invoke:function(){return this.fireAndForget(ss.mkdel(this,function(){tab.DashboardClientCommands.removeZoneFromDeviceLayout(this.get_dashboard(),this.get_zoneID())}))}});var kn=global.tab.RenameCalcKeyboardShortcut=ss.mkType(a,'tab.RenameCalcKeyboardShortcut',function(ni){this.$0=null;KeyboardShortcuts.BaseKeyboardShortcut.call(this);this.$0=ni},{getKeyComboOrKeyCombos:function(){return ss.applyConstructor(KeyboardShortcuts.KeyCombo,['F2',null].concat(null))},getElement:function(){return this.$0.get_rootElement().get(0)},isAllowed:function(ni){return this.$0.addedToDom&&this.$0.get_dialog().get_isShown()&&this.$0.get_dialog().get_isActive()},executeShortcut:function(ni){this.$0.get_editableCaption().edit()},getTelemetryKey:function(){return'Rename Calculated Field'}});var ko=global.tab.RenameCommandRedirectHandler=ss.mkType(a,'tab.RenameCommandRedirectHandler',null,null,{handleRenameField:function(ni){var nj=$.Deferred();var nk=ni.get_globalName();var nl=ni.get_fieldCaptionForReset();var nm=ni.get_displayName();ks.new$1(nm,nl,function(nn,no){_.defer(function(){tab.SchemaClientCommands.validateFieldCaption(nk,nn,no)})},function(nn){_.defer(function(){tab.SchemaClientCommands.editFieldCaption(nk,nn,ni);nj.resolve()})}).show();return nj.promise()},$0:function(ni){var nj=ni['uniqueName'];var nk=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findField(nj);return ko.handleRenameField(nk)},$1:function(ni){var nj=$.Deferred();var nk=ni['sheet'.toString()];var nl=tab.ApplicationModel.get_instance().get_workbook().get_sheetsInfo().map(function(nm){return nm.sheet});kv.new$1(nk,nl,function(){nj.resolve()}).show();return nj.promise()}});var kp=global.tab.RenameDatasourceCaptionDialog=ss.mkType(a,'tab.RenameDatasourceCaptionDialog',function(ni){this.$1=null;this.$0=null;this.$1=ni},{show:function(){this.$0=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[kr,kq,Object])).call(null,[this.$1]);this.$0.addToDom($(document.body))},dispose:function(){this.$1=tab.MiscUtil.dispose$1(this.$1)}},{createRenameDatasourceCaptionDialog:function(ni,nj,nk){var nl=new kr(ni,nj,nk);return new kp(nl)}});var kq=global.tab.RenameDatasourceCaptionDialogComponent=ss.mkType(a,'tab.RenameDatasourceCaptionDialogComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.state=new Object},{render:function(){return React.createElement(SharedWidgets.DialogWidget,{testId:'RenameDatasourceCaption',isModal:true,title:tab.Strings.AuthRenameDatasourceAliasHeader,showCloseButton:false,type:0,positioningBehavior:0,onCloseRequest:this.props.cancel,children:this.$1(),footerContent:this.$0(),showFooter:true,shouldReturnFocusOnClose:true,dialogWidth:350,isGlassTransparent:true,zIndex:988,shouldAdjustPositionOnWindowResize:true})},$0:function(){var ni={marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace};var nj={handleClick:ss.mkdel(this,function(nl){_.defer(this.props.cancel)}),buttonType:3,testId:'Cancel',children:tab.Strings.DialogButtonCancel,style:ni,key:'cancel-button'};var nk={handleClick:ss.mkdel(this,function(nl){_.defer(this.props.submit)}),buttonType:2,testId:'Submit',children:tab.Strings.DialogButtonOK,style:ni,key:'submit-button',disabled:!this.props.valid};return spiff.DOMElements.div({className:'tab-renameDataSourceCaptionDialogButtons',key:'buttons',style:{display:'flex',justifyContent:'flex-end'}},React.createElement(SharedWidgets.ButtonWidget,nj),React.createElement(SharedWidgets.ButtonWidget,nk))},$1:function(){var ni={text:this.props.text,handleChange:this.props.changeText,handleEnter:ss.mkdel(this,function(){_.defer(this.props.submit)}),testId:'RenameDatasourceCaptionInput',key:'text-input',containerStyle:{width:'100%',minHeight:'60px'},errorText:this.props.errorText};return spiff.DOMElements.div({className:'tab-renameDatasourceCaptionDialogInputs',key:'inputs'},spiff.ReactElement.div$1('tab-renameDatasourceCaptionDialogInfo',[tab.Strings.AuthRenameDatasourceInfoMessage]),spiff.ReactElement.br(null),React.createElement(SharedWidgets.LineTextFieldWidget,ni))}});var kr=global.tab.RenameDatasourceCaptionViewModel=ss.mkType(a,'tab.RenameDatasourceCaptionViewModel',function(ni,nj,nk){this.$7=null;this.$b=null;this.$8=null;this.$9=null;this.$a=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$a=ni;this.$7=nk;this.$9=nj;this.set_text(ni.get_caption())},{get_text:function(){return this.$b},set_text:function(ni){this.$b=ni;if(!this.$3(ni)&&ss.contains(this.$9,ni.trim())){this.$6(tab.Strings.AuthRenameDatasourceError)}else{this.$6('')}this.incrementProps()},$5:function(){return this.$8},$6:function(ni){this.$8=ni;this.incrementProps()},$3:function(ni){return ss.referenceEquals(ni.trim(),this.$a.get_caption())},submit:function(){var ni=this.get_text().trim();if(!this.$3(ni)&&tab.SchemaUtils.isValidNewDatasourceCaption(this.$a.get_caption(),this.$9,ni)){tab.SchemaClientCommands.renameDataSource(this.$a.get_name(),ni,null)}this.$7()},$4:function(){return this.$3(this.get_text())||tab.SchemaUtils.isValidNewDatasourceCaption(this.$a.get_caption(),this.$9,this.get_text())},createInitialProps:function(){return{submit:ss.mkdel(this,this.submit),cancel:this.$7,changeText:ss.mkdel(this,function(ni){this.set_text(((ni.length<=254)?ni:this.get_text()))}),clearText:ss.mkdel(this,function(){this.set_text('')}),valid:this.$4()}},createUpdatedProps:function(){return{text:this.get_text(),errorText:this.$5(),valid:this.$4()}}});var ks=global.tab.RenameFieldDialog=ss.mkType(a,'tab.RenameFieldDialog',function(ni,nj,nk,nl){this.$Y=null;this.$X=null;this.$Z=null;this.$10=null;this.validateAction=null;this.dom=null;this.resetButton=null;this.$11=0;spiff.ModalDialog.call(this,ni,new kt);this.dom=this.template;this.$Y=ni;this.$X=nj;this.$Z=nl;this.validateAction=nk;this.$11=0;this.$R();this.$Q();this.$10=new tab.Debouncer(ss.mkdel(this,function(){this.$U()}),ks.debounceTimeoutMs);this.disposables.add$1(this.$10)},{$V:function(){return this.dom.statusMessage.text()},$W:function(ni){this.dom.statusMessage.text(ni);this.dom.statusMessage.prop('title',ni)},show:function(){spiff.Dialog.prototype.show.call(this);this.dom.inputField.select();if(!BrowserSupport.BrowserSupport.IsTouch()){this.dom.inputField.focus()}},$T:function(){var ni=this.dom.inputField.val();if(!ss.isNullOrEmptyString(this.$X)&&!ss.referenceEquals(ni,this.$X)){this.resetButton.element.show();this.dom.inputField.addClass('tab-rename-input-field-button-padding')}else{this.resetButton.element.hide();this.dom.inputField.removeClass('tab-rename-input-field-button-padding')}},$K:function(ni){if(ni.which===13){this.$M()}if(ni.which===27){this.$J()}},$L:function(ni){this.$T();this.$10.invokeActionDelayed()},$M:function(){this.dom.inputField.attr('disabled','');var ni=this.dom.inputField.val();this.validateAction(ni,ss.mkdel(this,function(nj){this.$O(ni,nj)}))},$J:function(){this.closeAndDispose()},$N:function(){this.dom.inputField.val(this.$X);this.$T();this.$U()},$O:function(ni,nj){if(nj.isValid){this.$W('');this.$Z(ni);this.closeAndDispose()}else{this.$W(nj.errorMessage);this.dom.inputField.removeAttr('disabled');this.dom.inputField.focus();this.$S()}},$P:function(ni){this.$11--;if(ni.isValid){this.$W('')}else if(this.$11===0){this.$W(ni.errorMessage)}this.$S()},$U:function(){this.$11++;var ni=this.dom.inputField.val();_.defer(ss.mkdel(this,function(){this.validateAction(ni,ss.mkdel(this,this.$P))}))},$R:function(){this.dom.inputField.keydown(ss.mkdel(this,this.$K));this.dom.inputField.keyup(ss.mkdel(this,this.$L));this.resetButton=new spiff.IconButton;this.resetButton.setIcon('tab-schema-name-reset-icon');this.resetButton.set_hoverTooltipText(tab.Strings.DialogButtonReset);this.resetButton.addClass('tab-schema-name-reset');this.resetButton.add_click(ss.mkdel(this,this.$N));this.dom.inputField.parent().append(this.resetButton.element);this.disposables.add$1(this.resetButton);this.$S()},$S:function(){var ni={handleClick:ss.mkdel(this,function(nk){this.$J()}),buttonType:3,testId:'cancel',key:'cancelFieldRename',children:tab.Strings.DialogButtonCancel};var nj={handleClick:ss.mkdel(this,function(nk){this.$M()}),buttonType:2,testId:'commit',key:'commitFieldRename',children:tab.Strings.DialogButtonOK,style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace},disabled:this.$V()!==''};ReactDOM.render(spiff.DOMElements.div({key:'buttons',style:{display:'flex',justifyContent:'flex-end'}},React.createElement(SharedWidgets.ButtonWidget,ni),React.createElement(SharedWidgets.ButtonWidget,nj)),this.dom.dialogActionArea.get(0))},$Q:function(){this.set_closeButtonVisible(false);this.set_titleUnescaped(tab.Strings.AuthRenameField);this.dom.inputField.val(this.$Y);this.set_setFocusOnShow(false);this.$W('');this.$T()}},{new$1:function(ni,nj,nk,nl){return new ks(ni,nj,nk,nl)}});var kt=global.tab.RenameFieldDialogTemplate=ss.mkType(a,'tab.RenameFieldDialogTemplate',function(){this.inputField=null;this.statusMessage=null;this.dialogActionArea=null;spiff.Template.call(this,$(kt.renameTemplate));this.inputField=this.getElementBySelector('.tab-rename-input-field');this.statusMessage=this.getElementBySelector('.tab-dialog-status-msg');this.dialogActionArea=this.getElementBySelector('.tab-dialog-actions-top-spacing')});var ku=global.tab.RenameFieldKeyboardShortcut=ss.mkType(a,'tab.RenameFieldKeyboardShortcut',function(ni){this.$0=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=ni},{getKeyComboOrKeyCombos:function(){return ss.applyConstructor(KeyboardShortcuts.KeyCombo,['F2',null].concat(null))},isAllowed:function(ni){var nj=$(ni.target);var nk=nj.is('body')||nj.hasClass('tab-schema-field-label');return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,ni)&&this.$0.get_selectedFields().length===1&&this.$0.get_selectedFields()[0].get_isColumn()&&!this.$0.get_selectedFields()[0].get_isGenerated()&&nk},executeShortcut:function(ni){var nj=this.$0.get_selectedFields()[0];ko.handleRenameField(nj)},getTelemetryKey:function(){return'Rename Field'}});var kv=global.tab.RenameSheetDialog=ss.mkType(a,'tab.RenameSheetDialog',function(ni,nj,nk){this.$O=null;this.$N=null;this.$P=null;this.$Q=null;this.$R=null;this.$K=false;spiff.ModalDialog.$ctor1.call(this,ni,$(kv.renameTemplate));this.$O=ni;this.$N=nj;this.$P=nk;this.set_closeButtonVisible(false);this.set_titleUnescaped(tab.Strings.AuthRenameSheet);this.$J();this.$Q=this.get_body().find('.newSheetName');this.$Q.val(this.$O);this.$Q.on('change keyup paste',ss.mkdel(this,function(nl){window.setTimeout(ss.mkdel(this,function(){var nm=this.$Q.val();this.$K=!tab.SheetClientCommands.validateNewSheetName(ni,nm.trim(),nj);this.$J()}),50)}));this.$Q.keydown(ss.mkdel(this,function(nl){if(nl.which===13){this.handleRename()}}));this.$R=this.get_body().find('.tab-dialog-status-msg');this.$R.hide();this.set_setFocusOnShow(false)},{$L:function(){return(ss.isValue(this.$R)?this.$R.text():null)},$M:function(ni){this.$R.text(ni);if(ss.isNullOrUndefined(ni)){this.$R.hide()}else{this.$R.show()}},$J:function(){var ni=this.element.find('.tab-dialog-actions-top-spacing').get(0);if(ss.isNullOrUndefined(ni)){return}var nj={handleClick:ss.mkdel(this,function(nl){this.handleCancel()}),buttonType:3,testId:'cancel',key:'cancelSheetRename',children:tab.Strings.DialogButtonCancel};var nk={handleClick:ss.mkdel(this,function(nl){this.handleRename()}),buttonType:2,testId:'commit',key:'commitSheetRename',children:tab.Strings.DialogButtonOK,style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace},disabled:this.$K};ReactDOM.render(spiff.DOMElements.div({key:'buttons',style:{display:'flex',justifyContent:'flex-end'}},React.createElement(SharedWidgets.ButtonWidget,nj),React.createElement(SharedWidgets.ButtonWidget,nk)),ni)},handleRename:function(){var ni=this.$Q.val();var nj=ss.isValue(cd.get_instance())&&ss.isValue(cd.get_instance().get_viewModel())&&ss.isValue(cd.get_instance().get_viewModel().get_authoringTabNavViewModel());if(nj){cd.get_instance().get_viewModel().get_authoringTabNavViewModel().get_selectionHandler().handleRename(this.$O,ni)}var nk=ss.mkdel(this,function(nl){if(nj){cd.get_instance().get_viewModel().get_authoringTabNavViewModel().get_selectionHandler().handleRename(ni,this.$O)}});if(!tab.SheetClientCommands.tryRenameSheet(this.$O,ni,this.$N,null,nk)){nk(null);this.$M(tab.Strings.AuthRenameSheetError);this.$K=true;this.$J()}else{this.$M(null);if(!ss.staticEquals(this.$P,null)){this.$P()}this.closeAndDispose()}},handleCancel:function(){this.closeAndDispose()},show:function(){spiff.Dialog.prototype.show.call(this);this.$Q.select();if(!BrowserSupport.BrowserSupport.IsTouch()){this.$Q.focus()}}},{new$1:function(ni,nj,nk){return new kv(ni,nj,nk)}});var kw=global.tab.ReplaceZoneEventData=ss.mkType(a,'tab.ReplaceZoneEventData',function(){this.currentZoneType=null;this.newZoneType=null;this.isFloating=false;this.currentDeviceLayout=null;this.numOfZonesInDashboard=0;this.isSheetHidden=false});var kx=global.tab.ReplaceZoneTelemetry=ss.mkType(a,'tab.ReplaceZoneTelemetry',null,null,{logReplaceZoneEvent:function(ni){kx.$1('DashboardAuthoring_ReplaceZone',kx.$0(ni))},$0:function(ni){var nj={};nj['CurrentZoneType']=(ss.isNullOrUndefined(ni.currentZoneType)?'':ni.currentZoneType.toString());nj['NewZoneType']=(ss.isNullOrUndefined(ni.newZoneType)?'':ni.newZoneType.toString());nj['IsFloatingZone']=ni.isFloating;nj['DeviceLayoutType']=(ss.isNullOrUndefined(ni.currentDeviceLayout)?'':ni.currentDeviceLayout.toString());nj['NumOfZonesInDashboard']=ni.numOfZonesInDashboard;nj['IsSheetHidden']=ni.isSheetHidden;return nj},$1:function(ni,nj){tab.OnlineAnalyticsClient.logEvent(ni,nj)}});var ky=global.tab.ResizablePaneComponent=ss.mkType(a,'tab.ResizablePaneComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){var ni=[];for(var nj=0;nj<this.props.sections.length;nj++){this.props.sections[nj].renderScrollHandlers=this.props.renderScrollHandlers;ni.push(kA.create(this.props.sections[nj]));if(nj<this.props.sections.length-1){ni.push(le.create({resizerIndex:nj,dragInstanceFactory:this.props.dragInstanceFactory,key:'section-resizer-'+nj}))}}var nk=spiff.DOMElements.div({ref:this.props.onPaneMountOrUnmount,className:'resizable-pane',key:'resizable-pane-component'},ni);return spiff.DOMElements.div({className:'resizable-pane-container',key:'resizable-pane-container'},nk)}},{create:function(ni){return React.createElement(ky,ni)}});var kz=global.tab.ResizablePaneViewModel=ss.mkType(a,'tab.ResizablePaneViewModel',function(){kz.$ctor1.call(this,[],new(ss.makeGenericType(tab.ModelHolder$1,[tab.DashboardModel])))},{createInitialProps:function(){return{onPaneMountOrUnmount:ss.mkdel(this,this.$9),dragInstanceFactory:ss.mkdel(this,this.$6)}},createUpdatedProps:function(){return{sections:this.$j.map(ss.mkdel(this,this.$c))}},$3:function(ni){this.disposables.add$1(this.addChildViewModel(ni.sectionContentProvider));this.$j.push({sizePercent:ni.initialSizePercent,resizableSectionMetadata:ni})},$b:function(ni,nj){this.$i[ni]=nj},$9:function(ni){this.$h=ni},$c:function(ni){var nj=ni.resizableSectionMetadata.sectionContentProvider.get_props();return $.extend({},this.$f,{sizePercent:ni.sizePercent,sectionKey:ni.resizableSectionMetadata.sectionKey,sectionContentProps:nj,key:'resizable-'+ni.resizableSectionMetadata.sectionKey})},$a:function(ni,nj){var nk=this.$7(ni);var nl=ni;var nm=[];var nn=nj-nk;if(nn>0){nm=kz.$0(this.$j,ni+1)}else if(nn<0){nl=ni+1;nm=kz.$1(this.$j,ni)}var no=this.$e(nm,Math.abs(nn));this.$j[nl].sizePercent+=no;this.$d();this.incrementProps()},$e:function(ni,nj){var nk=0;var nl=ss.getEnumerator(ni);try{while(nl.moveNext()){var nm=nl.current();var nn=nm.sizePercent;var no=nm.resizableSectionMetadata.minSize;var np=this.$5(no);if(nn>np){var nq=this.$4(nm,nj);var nr=nm.sizePercent-nq;nk+=nr;nm.sizePercent=nq;nj-=nr;if(nj<=0){break}}}}finally{nl.dispose()}return nk},$4:function(ni,nj){var nk=ni.resizableSectionMetadata.minSize;var nl=this.$5(nk);var nm=ni.sizePercent-nl;var nn=nl;if(nj<nm){nn=ni.sizePercent-nj}return nn},$7:function(ni){var nj=0;for(var nk=0;nk<=ni;nk++){nj+=this.$j[nk].sizePercent}return nj},$5:function(ni){var nj=this.$8(this.$h);return ss.idiv(100*ni,nj)},$d:function(){var ni=_.reduce(this.$j,function(nl,nm){return nl+nm.sizePercent},0);for(var nj=0;nj<this.$j.length;nj++){var nk=this.$j[nj];nk.sizePercent=ss.idiv(100*nk.sizePercent,ni)}},$8:function(ni){var nj=$(ni);return ss.round(nj.height())},$6:function(ni,nj){return new spiff.MoveDragInstance.$ctor1($(ni),ss.mkdel(this,function(nk){var nl=tab.DomUtil.getPageOffset$1($(this.$h));var nm=ss.round(nk.pageY-nl.top);this.$a(nj,this.$5(nm))}),function(nk){},function(){},null)}},{$ctor1:function(ni,nj){this.$i=null;this.$j=null;this.$f=null;this.$g=null;this.$h=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$f={onMountOrUnmount:ss.mkdel(this,this.$b)};this.$j=[];this.$i={};this.$g=nj;for(var nk=0;nk<ni.length;nk++){var nl=ni[nk];this.$3(nl)}},$1:function(ni,nj){return new ss.IteratorBlockEnumerable(function(){return(function(ni,nj){var nk,nl=0,nm;return new ss.IteratorBlockEnumerator(function(){$sm1:for(;;){switch(nl){case 0:{nl=-1;nm=nj;nl=1;continue $sm1}case 1:{nl=-1;if(!(nm>=0)){nl=-1;break $sm1}nk=ni[nm];nl=2;return true}case 2:{nl=-1;nm--;nl=1;continue $sm1}default:{break $sm1}}}return false},function(){return nk},null,this)}).call(this,ni,nj)},this)},$0:function(ni,nj){return new ss.IteratorBlockEnumerable(function(){return(function(ni,nj){var nk,nl=0,nm;return new ss.IteratorBlockEnumerator(function(){$sm1:for(;;){switch(nl){case 0:{nl=-1;nm=nj;nl=1;continue $sm1}case 1:{nl=-1;if(!(nm<ni.length)){nl=-1;break $sm1}nk=ni[nm];nl=2;return true}case 2:{nl=-1;nm++;nl=1;continue $sm1}default:{break $sm1}}}return false},function(){return nk},null,this)}).call(this,ni,nj)},this)}});var kA=global.tab.ResizableSectionComponent=ss.mkType(a,'tab.ResizableSectionComponent',function(ni,nj){this.$1=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.$1=ss.mkdel(this,function(nk){this.props.onMountOrUnmount(this.props.sectionKey,nk)})},{render:function(){return spiff.DOMElements.div({ref:this.$1,className:'resizable-section',style:{flexBasis:this.props.sizePercent+'%'}},this.props.renderScrollHandlers(2,this.props.sectionContentProps.sectionContentClass,this.props.sizePercent),this.$0(),this.props.renderScrollHandlers(3,this.props.sectionContentProps.sectionContentClass,this.props.sizePercent))},$0:function(){var ni=spiff.DOMElements.div({className:'resizable-section-content'+' '+this.props.sectionContentProps.sectionContentClass,key:'resizable-'+this.props.sectionKey+'-content'},this.props.sectionContentProps.children);return spiff.DOMElements.div({className:'resizable-content-container'},this.props.renderScrollHandlers(0,this.props.sectionContentProps.sectionContentClass,-1),ni,this.props.renderScrollHandlers(1,this.props.sectionContentProps.sectionContentClass,-1))}},{create:function(ni){return React.createElement(kA,ni)}});var kB=global.tab.ResizableSectionMetadata=ss.mkType(a,'tab.ResizableSectionMetadata',function(){this.sectionKey=null;this.sectionContentProvider=null;this.minSize=0;this.initialSizePercent=0});var kC=global.tab.ResizableSectionViewModel$3=ss.mkType(a,'tab.ResizableSectionViewModel$3',function(ni,nj,nk){var nl=ss.registerGenericClassInstance(kC,[ni,nj,nk],function(nm,nn){this.$4=null;this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=nm;this.$3=nn;this.disposables.add$1(this.addChildViewModel(nn))},{createInitialProps:function(){return{sectionContentClass:this.$4}},createUpdatedProps:function(){return{children:React.createElement(ni,this.$3.get_props())}}},null,function(){return ss.makeGenericType(spiff.BaseReactViewModel$1,[Object])},function(){return[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]});return nl});ss.initGenericClass(kC,3);var kD=global.tab.ResizeActiveZoneCommand=ss.mkType(a,'tab.ResizeActiveZoneCommand',function(){tab.ResizeActiveZoneCmd.call(this)},{invoke:function(){var ni={l:this.get_zoneRectangle().x,t:this.get_zoneRectangle().y,w:this.get_zoneRectangle().w,h:this.get_zoneRectangle().h};var nj=-9999;var nk=9999;var nl={l:nj,t:nj,w:nk-nj+this.get_zoneRectangle().w,h:nk-nj+this.get_zoneRectangle().h};return this.fireAndForget(function(){cd.get_instance().get_viewModel().get_dashboard().setFloatingZoneGeometry(ni,nl)})}});var kE=global.tab.ResizeFeedbackComponent=ss.mkType(a,'tab.ResizeFeedbackComponent',function(ni,nj){React.Component.call(this,ni,nj)},{render:function(){if(ss.isNullOrUndefined(this.props.edge)){return null}var ni=[];var nj=this.props.splitOnEdgeSnap&&ss.isValue(this.props.container)&&ss.isValue(this.props.currentSnapPoint)&&this.props.currentSnapPoint.zoneEdgeMoveType==='edge-snap-align';if(nj){if(ss.isValue(this.props.container)){ss.arrayAddRange(ni,this.$2())}}else{ni.push(this.$0());if(ss.isValue(this.props.container)){ni.push(spiff.DOMElements.rect({x:this.props.container.x,y:this.props.container.y,width:this.props.container.w,height:this.props.container.h,className:'tab-dashContainerGuideBorder',key:'container feedback'}))}}if(ss.isValue(this.props.snapPoints)){ss.arrayAddRange(ni,this.props.snapPoints.map(ss.mkdel(this,this.$1)))}var nk=this.props.dashboardGeometry();return spiff.DOMElements.svg({width:nk.w,height:nk.h,className:'tab-dashDropTargetContainer'},ni)},$2:function(){var ni=[];var nj=this.props.container.x;var nk=this.props.container.y;var nl=nj+this.props.container.w;var nm=nk+this.props.container.h;var nn,no,np,nq;if(this.props.dragHorz){nn=this.props.currentSnapPoint.snapLocation-2;no=nm;np=this.props.currentSnapPoint.snapLocation+2;nq=nk}else{nn=nl;no=this.props.currentSnapPoint.snapLocation-2;np=nj;nq=this.props.currentSnapPoint.snapLocation+2}ni.push(spiff.DOMElements.rect({x:nj,y:nk,width:nn-nj,height:no-nk,className:'tab-dashContainerGuideBorder',key:'split container 1 feedback'}));ni.push(spiff.DOMElements.rect({x:np,y:nq,width:nl-np,height:nm-nq,className:'tab-dashContainerGuideBorder',key:'split container 2 feedback'}));return ni},$0:function(){if(this.props.dragHorz){return spiff.DOMElements.line({x1:this.props.position,y1:this.props.edge.y,x2:this.props.position,y2:this.props.edge.y+this.props.edge.h,className:'tab-dashZoneEdgeResizer',key:'edge feedback'})}return spiff.DOMElements.line({x1:this.props.edge.x,y1:this.props.position,x2:this.props.edge.x+this.props.edge.w,y2:this.props.position,className:'tab-dashZoneEdgeResizer',key:'edge feedback'})},$1:function(ni){if(ni.zoneEdgeMoveType!=='edge-snap-align'){return null}var nj='';var nk=[];switch(ni.zoneSide){case'left':{var nl=this.props.edge.x;var nm=ni.snapLocation;nj='tab-snapPointLeft';nk.push({x:nl-5,y:nm-5});nk.push({x:nl,y:nm});nk.push({x:nl-5,y:nm+5});break}case'top':{var nn=ni.snapLocation;var no=this.props.edge.y;nj='tab-snapPointTop';nk.push({x:nn-5,y:no-5});nk.push({x:nn,y:no});nk.push({x:nn+5,y:no-5});break}case'right':{var np=this.props.edge.x+this.props.edge.w;var nq=ni.snapLocation;nj='tab-snapPointRight';nk.push({x:np+5,y:nq-5});nk.push({x:np,y:nq});nk.push({x:np+5,y:nq+5});break}case'bottom':{var nr=ni.snapLocation;var ns=this.props.edge.y+this.props.edge.h;nj='tab-snapPointBottom';nk.push({x:nr-5,y:ns+5});nk.push({x:nr,y:ns});nk.push({x:nr+5,y:ns+5});break}}var nt=nk.map(function(nu){return ss.formatString('{0},{1}',nu.x,nu.y)}).join(' ');return spiff.DOMElements.polygon({className:'tab-snapPointIndicator'+' '+nj,points:nt,key:nt})}});var kF=global.tab.ResizeSelectedZoneShortcut=ss.mkType(a,'tab.ResizeSelectedZoneShortcut',function(ni,nj){this.$0=null;this.$1=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=ni;this.$1=nj},{getKeyComboOrKeyCombos:function(){return new KeyboardShortcuts.KeyCombos(kF.$0('ArrowLeft'),kF.$0('ArrowRight'),kF.$0('ArrowUp'),kF.$0('ArrowDown'))},isAllowed:function(ni){return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,ni)&&this.$0()},executeShortcut:function(ni){var nj=(ni.shiftKey?10:1);if(kF.$1(ni,'ArrowRight')){this.$1(0,nj)}else if(kF.$1(ni,'ArrowLeft')){this.$1(0,-nj)}else if(kF.$1(ni,'ArrowDown')){this.$1(nj,0)}else if(kF.$1(ni,'ArrowUp')){this.$1(-nj,0)}else{}},getTelemetryKey:function(){return'Resize Selected Zone'}},{$0:function(ni){var nj=new Object;nj.alt='required';nj.shift='optional';return new KeyboardShortcuts.KeyCombo(ni,nj)},$1:function(ni,nj){return ss.staticEquals(KeyboardShortcuts.KeyboardUtilities.NormalizeKey(ni.key),nj)}});var kG=global.tab.RestartEveryComboBoxUpdater=ss.mkType(a,'tab.RestartEveryComboBoxUpdater',function(){this.fieldNames=null;this.fieldCaptions=null;this.selectionIndex=0;this.specialCaption=null;this.specialValue=null;this.isSelectionInvalid=false},{update:function(ni){this.$0();var nj=[];nj.push(new spiff.ComboBoxItem(null,this.specialCaption,this.specialValue,null,null));var nk=nj;for(var nl=0,nm=this.fieldNames.length;nl<nm;nl++){nk.push(new spiff.ComboBoxItem(null,this.fieldCaptions[nl],this.fieldNames[nl],null,null))}ni.setItems(nk);if(this.isSelectionInvalid){ni.set_selectedItem(new spiff.ComboBoxItem(null,tab.Strings.TableCalcInvalidRestartEveryField,null,null,null))}else{ni.set_selectedItem(ni.get_items()[this.selectionIndex+1])}ni.set_isSelectionInvalid(this.isSelectionInvalid);ni.set_enabled(true)},$0:function(){tab.Param.verifyValue(this.fieldNames,'FieldNames');tab.Param.verifyValue(this.fieldCaptions,'FieldCaptions');tab.Param.verifyValue(this.selectionIndex,'SelectionIndex');tab.Param.verifyValue(this.specialCaption,'SpecialCaption');tab.Param.verifyValue(this.specialValue,'SpecialValue')}});var kH=global.tab.RevertToPublishedCommand=ss.mkType(a,'tab.RevertToPublishedCommand',function(){tab.RevertToPublishedCmd.call(this)},{get_isEnabled:function(){return true},invoke:function(){return this.fireAndForget(function(){if(!tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')||!cl.get_instance().get_autoSaveEnabled()){tab.WorksheetServerCommands.revert(null)}else{kI.showRevertToPublishedDialog()}})}});var kI=global.tab.RevertToPublishedDialog=ss.mkType(a,'tab.RevertToPublishedDialog',function(){tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(kI.$0)){return}this.parentNode=document.createElement('div');var ni={title:tab.Strings.AuthRevertToPublishedDialogTitle,secondaryChoiceAction:ss.mkdel(this,this.cancelRevert),secondaryChoiceButtonString:tab.Strings.DialogButtonCancel,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.AuthAutoSaveWarningDialogRevert,primaryChoiceAction:ss.mkdel(this,this.revertToPublished),primaryChoiceButtonIsDestructive:true,firstMessage:tab.Strings.AuthRevertToPublishedDialogBody,secondMessage:null,learnMoreToken:null,buttonClassToFocus:'tab-autosavewarning-secondarybutton'};kI.$0=React.createElement(cm,ni);ReactDOM.render(kI.$0,this.parentNode)},revertToPublished:function(){tab.OnlineAnalyticsClient.logEvent('AutoSave_RevertToPublished',ss.mkdict(['Event','Revert To Published']));tab.WorksheetServerCommands.revert(null);this.close()},cancelRevert:function(){tab.OnlineAnalyticsClient.logEvent('AutoSave_RevertToPublished',ss.mkdict(['Event','Cancel']));this.close()},close:function(){kI.$0=null;_.defer(ss.mkdel(this,this.dispose))}},{showRevertToPublishedDialog:function(){(new kI).showDialog()}});var kJ=global.tab.SaveAsCommand=ss.mkType(a,'tab.SaveAsCommand',function(){tab.SaveAsCmd.call(this)},{get_isEnabled:function(){return tab.SavingUtil.isSaveAsEnabled()},invoke:function(){return this.fireAndForget(function(){if(tab.SavingUtil.isSaveAsEnabled()){tab.SavingUtil.saveWorkbookAs(function(ni){cl.get_instance().onPublishSuccess()},null)}else{tab.NotificationViewModel.showNotification(tab.Strings.SaveAsFailedMessage,null)}})}});var kK=global.tab.SaveCommand=ss.mkType(a,'tab.SaveCommand',function(){tab.SaveCmd.call(this)},{get_isEnabled:function(){return tab.SavingUtil.isSaveEnabled()},invoke:function(){return this.fireAndForget(function(){tab.SavingUtil.saveWorkbook(function(ni){cl.get_instance().onPublishSuccess()},null)})}});var kL=global.tab.SaveGoneDialog=ss.mkType(a,'tab.SaveGoneDialog',function(){this.$1=null;this.$0=null;tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isNullOrUndefined(kL.instanceElement)){this.$1=new kK;this.$0=new kJ;this.parentNode=document.createElement('div');var ni=tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthorNewWorkbookUri();var nj=((ni&&!tabBootstrap.FeatureFlags.isEnabled('WebAuthoringAutoSaveForNewWorkbooks'))?cl.get_instance().get_willAutoSaveEnableOnPublish():cl.get_instance().get_autoSaveEnabled());var nk=this.$1.get_isEnabled()||this.$0.get_isEnabled();var nl={title:(nj?tab.Strings.AutoSaveIsOnDialogTitle:tab.Strings.WhereDidSaveGoDialogTitle),secondaryChoiceAction:ss.mkdel(this,this.close),secondaryChoiceButtonString:(nk?tab.Strings.AuthAutoSaveWarningDialogCancel:tab.Strings.DialogButtonOK),primaryChoiceButtonIsAvailable:nk,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.AuthAutoSaveWarningDialogPublishButton,primaryChoiceAction:ss.mkdel(this,function(){if(this.$1.get_isEnabled()){this.$1.invoke().done(ss.mkdel(this,this.close))}else{this.$0.invoke().done(ss.mkdel(this,this.close))}}),firstMessage:(nj?tab.Strings.AuthSaveGoneDialogContentAutosaveOn:tab.Strings.AuthSaveGoneDialogContentExplainPublish),secondMessage:(nj?null:tab.Strings.AuthSaveGoneDialogContentNotPublished),learnMoreToken:(nj?'server-autosave-publish':null),buttonClassToFocus:'tab-autosavewarning-primarybutton'};kL.instanceElement=React.createElement(cm,nl);ReactDOM.render(kL.instanceElement,this.parentNode)}},close:function(){kL.instanceElement=null;_.defer(ss.mkdel(this,this.dispose))}},{showSaveGoneDialog:function(){(new kL).showDialog()}});var kM=global.tab.SaveOrSaveAsCommand=ss.mkType(a,'tab.SaveOrSaveAsCommand',function(){tab.SaveOrSaveAsCmd.call(this)},{get_isEnabled:function(){return tab.SavingUtil.isSaveEnabled()||tab.SavingUtil.isSaveAsEnabled()},invoke:function(){return this.fireAndForget(function(){if(tab.SavingUtil.isSaveEnabled()){tab.SavingUtil.saveWorkbook(function(ni){cl.get_instance().onPublishSuccess()},null)}else if(tab.SavingUtil.isSaveAsEnabled()){tab.SavingUtil.saveWorkbookAs(null,null)}else{tab.NotificationViewModel.showNotification(tab.Strings.SaveAsFailedMessage,null)}})}});var kN=global.tab.SchemaFieldRightIconComponent=ss.mkType(a,'tab.SchemaFieldRightIconComponent',function(){React.Component.call(this)},{render:function(){switch(this.props.rightIconInfo.get_iconType()){case'blending':{return this.$2('tab-schema-blending-icon',ss.mkdel(this,this.$0))}case'blendingCandidate':{return this.$2('tab-schema-blending-candidate-icon',ss.mkdel(this,this.$0))}case'hidden':{return this.$2('tab-schema-hidden-icon',ss.mkdel(this,this.$1))}case'fieldRelatability':{return this.$3('tab-schema-relatability-icon')}case'stitching':{return this.$3('tab-schema-stitching-icon')}default:{return null}}},$3:function(ni){var nj=spiff.DOMElements.div({className:ni});var nk=spiff.DOMElements.div;var nl=new gg;nl.triggerElement=nj;nl.dimensionRelatabilityPresModel=this.props.rightIconInfo.get_dimensionRelatabilityPresModel();nl.measureRelatabilityPresModel=this.props.rightIconInfo.get_measureRelatabilityPresModel();nl.isSchemaViewerField=true;nl.isInfoscentV2=tabBootstrap.FeatureFlags.isEnabled('SharedDimensionsInfoscentingVersion2');return nk({'data-tb-test-id':'tab-schema-field-right-icon',title:'',className:'icon-sub-container'},React.createElement(gf,nl))},$2:function(ni,nj){return React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nk){nj(this.props.nodeTemplate)}),buttonType:10,testId:'tab-schema-field-right-icon',title:this.props.rightIconInfo.get_tooltip(),children:spiff.DOMElements.div({className:ni}),className:'tab-schema-right-icon-button'})},$1:function(ni){if(ni.get_node().isObject){tab.SchemaClientCommands.unhideSchemaObject(ni.get_node().localName,ni.get_node().dataSourceName,null)}else{tab.SchemaClientCommands.unhideHiddenField(ni.get_node().globalFieldName,null)}},$0:function(ni){tab.SchemaClientCommands.toggleFieldBlending(ni.get_node().globalFieldName,ss.mkdel(this,function(nj){var nk=((this.props.rightIconInfo.get_iconType()==='blending')?gk.buildBlendingCandidateIconInfo(ni.get_node().displayName):gk.buildBlendingIconInfo(ni.get_node().displayName));gh.addFieldRightIconToNode(ni,ni.get_node().globalFieldName,nk)}))}});var kO=global.tab.SchemaFieldRightIconProps=ss.mkType(a,'tab.SchemaFieldRightIconProps',function(){this.nodeTemplate=null;this.rightIconInfo=null;this.fieldDisplayName=null});var kP=global.tab.SchemaHeaderDrag=ss.mkType(a,'tab.SchemaHeaderDrag',function(ni){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.set_dragSource(ni);EventUtils.DragDropManager.attachDragSource(this.get_dragSource(),this)},{get_debugName:function(){return this.$1$1},set_debugName:function(ni){this.$1$1=ni},get_dragSource:function(){return this.$1$2},set_dragSource:function(ni){this.$1$2=ni},get_paneAbove:function(){return this.$1$3},set_paneAbove:function(ni){this.$1$3=ni},get_paneBelow:function(){return this.$1$4},set_paneBelow:function(ni){this.$1$4=ni},get_dragBarAbove:function(){return this.$1$5},set_dragBarAbove:function(ni){this.$1$5=ni},get_dragBarBelow:function(){return this.$1$6},set_dragBarBelow:function(ni){this.$1$6=ni},get_onDragMove:function(){return this.$1$7},set_onDragMove:function(ni){this.$1$7=ni},get_onDragComplete:function(){return this.$1$8},set_onDragComplete:function(ni){this.$1$8=ni},dispose:function(){EventUtils.DragDropManager.removeDragSource(this.get_dragSource());this.set_dragSource(null);this.set_paneAbove(null);this.set_paneBelow(null);this.set_onDragMove(null);this.set_onDragComplete(null)},startDrag:function(ni){var nj=ni.clientY;return new spiff.MoveDragInstance(this.get_dragSource(),ss.mkdel(this,function(nk){var nl=nk.clientY;var nm=nl-nj;if(nm<0){this.$4(-nm)}else if(nm>0){this.$3(nm)}nj=nl;if(!ss.staticEquals(this.get_onDragMove(),null)){this.get_onDragMove()()}}),ss.mkdel(this,function(nk){if(!ss.staticEquals(this.get_onDragComplete(),null)){this.get_onDragComplete()()}}),null)},acceptsDragType:function(){return 1},$4:function(ni){var nj=new k(this.get_paneBelow());var nk=this.$0(this.$1());this.$5(ni,nj,nk)},$3:function(ni){var nj=new k(this.get_paneAbove());var nk=this.$0(this.$2());this.$5(ni,nj,nk)},$5:function(ni,nj,nk){if(ni===0||nj.$4()||ss.isNullOrUndefined(nk)){return}var nl=nk.$2()-nk.$7();if(nl<1){return}var nm=Math.min(ni,nl);var nn=nk.$2()+nj.$2();var no=nk.$0()+nj.$0();var np=nm/nn;var nq=no*np;var nr=nk.$0()-nq;var ns=nj.$0()+nq;nk.$1(nr);nj.$1(ns)},$0:function(ni){var nj=_.find(ni,function(nk){var nl=nk.height();var nm=tab.DoubleUtil.tryParseDouble(nk.css('min-height'),0);var nn=nl-nm;return nn>1});return(ss.isNullOrUndefined(nj)?null:new k(nj))},$1:function(){var ni=[this.get_paneAbove()];if(ss.isValue(this.get_dragBarAbove())){ss.arrayAddRange(ni,this.get_dragBarAbove().$1())}return ni},$2:function(){var ni=[this.get_paneBelow()];if(ss.isValue(this.get_dragBarBelow())){ss.arrayAddRange(ni,this.get_dragBarBelow().$2())}return ni}});var kQ=global.tab.SchemaNode=ss.mkType(a,'tab.SchemaNode',function(ni,nj){this.canHaveChildren=false;this.children=[];this.numNodesIfTopLevelExpanded=0;this.childToSelect=null;this.dataSourceName=null;this.fieldIconResource=null;this.fieldType=null;this.globalFieldName=null;this.hasFilteredChildren=false;this.instanceType=null;this.isCalculated=false;this.isCustomCalculation=false;this.canChangeDataType=false;this.canChangeSemanticRole=false;this.isColumn=false;this.isCubeFolder=false;this.isDerived=false;this.isLayered=false;this.isDraggable=false;this.isDrillPath=false;this.isFolder=false;this.isGenerated=false;this.isGroup=false;this.isHidden=false;this.isInvalid=false;this.isObject=false;this.isTableType=false;this.isOrphaned=false;this.isAutoHidden=false;this.isHierarchy=false;this.isHierarchyRoot=false;this.isMeasureNamesOrValues=false;this.isSelectable=false;this.hasContextMenu=false;this.isUnsortedContainer=false;this.hierarchyName=null;this.localName=null;this.ordinal=0;this.tooltip=null;this.userDescription=null;this.displayName=null;this.schemaViewerDisplayName=null;this.role=null;this.schemaSection=0;this.schemaItemLocator=null;this.section=null;this.qualifiedNameObjectId=null;this.schemaSection=nj;if(!ss.isValue(ni)){this.isHidden=true;return}this.canHaveChildren=ni.get_canHaveChildren();if(ss.isValue(ni.get_childToSelect())){this.childToSelect=ni.get_childToSelect().get_globalName()}this.dataSourceName=ni.get_dataSourceName();this.displayName=ni.get_displayName();this.schemaViewerDisplayName=ni.get_schemaViewerDisplayName();this.fieldIconResource=ni.get_fieldIconResource();this.fieldType=ni.get_defaultFieldType();this.globalFieldName=ni.get_globalName();this.instanceType=ni.get_instanceType();this.isCalculated=ni.get_isColumn()&&ni.asColumn().get_isCalculated();this.isCustomCalculation=ni.get_isColumn()&&ni.asColumn().get_isCustomCalculation();this.canChangeDataType=ni.get_isColumn()&&ni.asColumn().get_canChangeDataType();this.canChangeSemanticRole=ni.get_isColumn()&&ni.asColumn().get_canChangeSemanticRole();this.isColumn=ni.get_isColumn();this.isCubeFolder=ni.get_isCubeFolder();this.isDerived=ni.get_isDerived();this.isLayered=ni.get_isLayered();this.isDraggable=ni.get_isDraggable();this.isDrillPath=ni.get_isDrillPath();this.isFolder=ni.get_isFolder()||ni.get_isFolderNew();this.isGenerated=ni.get_isGenerated();this.isGroup=ni.get_isGroup();this.isHidden=ni.get_isHidden();this.isInvalid=ni.get_isInvalid();this.isObject=ni.get_isObject();this.isTableType=ni.get_isTableType();this.isOrphaned=ni.get_isOrphaned();this.isAutoHidden=ni.get_isAutoHidden();this.qualifiedNameObjectId=this.$1(ni);this.schemaItemLocator=ni.getSchemaItemLocator();if(ni.get_isCubeDimension()||ni.get_isCubeBaseDimension()){this.isHierarchyRoot=true}if(ni.get_isDrillPath()||ni.get_isCubeHierarchy()||ni.get_isCubeDimension()||ni.get_isCubeStandardDimension()){this.isHierarchy=true;this.hierarchyName=ni.get_displayName()}this.isMeasureNamesOrValues=ni.get_isMeasureNamesOrValues();this.isSelectable=ni.get_isSelectable();this.hasContextMenu=ni.get_isSelectable()||ni.get_isFolder()||ni.get_isObject();this.isUnsortedContainer=ni.get_isUnsortedContainer();this.localName=ni.get_localName();this.ordinal=ni.get_ordinal();this.tooltip=ni.get_tooltip();this.userDescription=ni.get_userDescription();this.role=ni.get_defaultRole()},{get_comparisonKey:function(){return this.dataSourceName+this.localName+ss.coalesce(this.section,'')},findPath:function(ni,nj){var nk=new Array;nk.push(new kS(null,this));while(nk.length>0){var nl=nk.shift();if(this.$0(nl.get_node(),nj,ni)){return nl}var nm=nl.get_node().children;for(var nn=0;nn<nm.length;nn++){var no=nm[nn];nk.push(nl.createChildPath(no))}}return null},$0:function(ni,nj,nk){switch(nk.schemaItemLocatorType){case'folder':{return ni.isFolder&&ss.referenceEquals(nj,nk.datasource)&&ss.referenceEquals(ni.globalFieldName,nk.fn)}case'drillpath':{return ni.isDrillPath&&ss.referenceEquals(nj,nk.datasource)&&ss.referenceEquals(ni.globalFieldName,nk.fn)}case'field':default:{return ss.referenceEquals(ni.globalFieldName,nk.fn)}}},equals$1:function(ni){return ss.referenceEquals(this.globalFieldName,ni.globalFieldName)&&ss.referenceEquals(this.localName,ni.localName)&&this.section===ni.section},$1:function(ni){if(ni.get_isObject()){return'['+ni.get_localName()+']'}else if(ni.get_isColumn()){return ni.asColumn().get_objectID()}return null}});var kR=global.tab.SchemaNodeFactory=ss.mkType(a,'tab.SchemaNodeFactory',null,null,{create:function(ni,nj,nk,nl,nm){var nn=[];var no=ni.showHiddenFields;var np=0;nk=lc.filterFieldsForViewing(nk,no);for(var nq=0;nq<nk.length;nq++){var nr=nk[nq];if(nr.get_isCubeBaseDimension()&&nr.asCubeBaseDimension().get_dimensionIsEffectivelyEmpty()){continue}var ns=new kQ(nr,nj);switch(nr.get_instanceType()){case'drillPath':{var nt=nr.asDrillPath().get_levels();nt=kR.$n(tab.FieldColumnModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.FieldColumnModel).call(null,nt),no));for(var nu=0;nu<nt.length;nu++){var nv=nt[nu];var nw=new kQ(nv,nj);ns.children.push(nw)}break}case'folderNew':{kR.$6(nr.asFolderNew(),ns,no);break}case'fieldContainer':{kR.$5(nr.asFieldContainer(),ns,no);break}case'relationalTable':{var nx=nr.asRelationalTable().get_columns();nx=kR.$n(tab.FieldColumnModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.FieldColumnModel).call(null,nx),no));if(nx.length===0){continue}for(var ny=0;ny<nx.length;ny++){var nz=nx[ny];var nA=new kQ(nz,nj);ns.children.push(nA)}break}case'cubeFolder':{var nB=nr.asCubeFolder();kR.$2(ns,nB,nl,no);break}case'cubeStandardDimension':{var nC=nr.asCubeStandardDimension();kR.$c(ns,nC,nl,no);break}case'cubeAttributeDimension':{var nD=nr.asCubeAttributeDimension();kR.$0(ns,nD,nl,no);break}case'structuredMeasure':{var nE=nr.asStructuredMeasure();kR.$d(nE,ns,no);break}case'column':case'cubeDimension':case'group':case'cubeHierarchy':case'folder':case'multiple':case'level':default:{break}}np+=ns.children.length+1;if(ss.isValue(nm)){var nF=kR.$f(ns,nm);if(nF){nn.push(ns)}}else{nn.push(ns)}}var nG=new kQ(null,nj);nG.numNodesIfTopLevelExpanded=np;ss.arrayAddRange(nG.children,nn);return nG},$f:function(ni,nj){var nk=kR.$i(ni,nj);var nl=[];var nm=false;for(var nn=0;nn<ni.children.length;nn++){var no=ni.children[nn];if(ni.isObject&&no.isTableType){if(!kR.$i(no,nj)){nl.push(no)}else if(!nk){nm=true}continue}var np=kR.$f(no,nj);if(np){nm=true}else{nl.push(no)}}if(nm){kR.$g(ni,nl)}return nm||nk},$g:function(ni,nj){ni.hasFilteredChildren=true;for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];ss.remove(ni.children,nl)}},$i:function(ni,nj){if(kR.$l(ni,nj.filterType)){return kR.$j(ni,nj)}return kR.$k(ni.displayName,nj.fullSearchString)},$j:function(ni,nj){if(nj.filterType==='comment'){return kR.$h(ni.userDescription,nj.parsedSearchString)||kR.$k(ni.displayName,nj.fullSearchString)}return kR.$k(ni.displayName,nj.parsedSearchString)},$l:function(ni,nj){if(ni.schemaSection===3){return'comment'===nj}switch(nj){case'calculation':{return ni.isCustomCalculation}case'dimension':{return ni.role==='dimension'}case'measure':{return ni.role==='measure'}case'comment':{return true}default:{return false}}},$h:function(ni,nj){return!tab.MiscUtil.isNullOrEmpty$1(ni)&&ni.toLowerCase().indexOf(nj)!==-1},$k:function(ni,nj){return ni.toLowerCase().indexOf(nj)!==-1},$m:function(ni){return function(nj){return nj}},$n:function(ni){return function(nj){return nj}},$3:function(ni,nj,nk,nl){var nm=nj.get_cubeFolders();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new kQ(no,ni.schemaSection);ni.children.push(np);kR.$2(np,no,nk,nl)}},$2:function(ni,nj,nk,nl){var nm=nj.get_hierarchies();nm=kR.$n(tab.CubeHierarchyModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.CubeHierarchyModel).call(null,nm),nl));for(var nn=0;nn<nm.length;nn++){var no=nm[nn];kR.$7(ni,no,nk,nl)}var np=nj.get_columns();np=kR.$n(tab.FieldColumnModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.FieldColumnModel).call(null,np),nl));for(var nq=0;nq<np.length;nq++){var nr=np[nq];var ns=new kQ(nr,ni.schemaSection);ni.children.push(ns)}kR.$1(ni,nj.get_hierarchies(),nl)},$9:function(ni,nj,nk,nl){if(nj.get_hasOnlyOneHierarchy()){kR.$8(ni,nj.get_defaultCubeHierarchy(),nk,nl)}else{var nm=nj.get_cubeHierarchies();nm=kR.$n(tab.CubeHierarchyModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.CubeHierarchyModel).call(null,nm),nl));for(var nn=0;nn<nm.length;nn++){var no=nm[nn];kR.$7(ni,no,nk,nl)}}},$7:function(ni,nj,nk,nl){if(nj.get_isAttributeHierarchy()&&nj.get_levels().length===1){return}var nm=new kQ(nj,ni.schemaSection);ni.children.push(nm);kR.$8(nm,nj,nk,nl);kR.$e(nm,nj,nl)},$b:function(ni,nj,nk){if(nj.get_hasOnlyOneHierarchy()){return}kR.$1(ni,nj.get_cubeHierarchies(),nk)},$1:function(ni,nj,nk){var nl=kR.$n(tab.CubeHierarchyModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.CubeHierarchyModel).call(null,nj),nk));for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];if(nn.get_isAttributeHierarchy()&&nn.get_levels().length===1){kR.$a(ni,nn,nk)}}},$8:function(ni,nj,nk,nl){var nm=kR.$n(tab.FieldColumnModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.FieldColumnModel).call(null,nj.get_levels()),nl));for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new kQ(no,ni.schemaSection);ni.children.push(np);if(no.get_isLevel()){var nq=kR.$n(tab.CubeAttributeDimensionModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.CubeAttributeDimensionModel).call(null,no.asLevel().get_linkedAttributes()),nl));for(var nr=0;nr<nq.length;nr++){var ns=nq[nr];kR.$0(np,ns,nk,nl)}}}},$a:function(ni,nj,nk){var nl=[];nl.push(nj);if(lc.filterFieldsForViewing(kR.$m(tab.CubeHierarchyModel).call(null,nl),nk).length===0){return}var nm=new kQ(nj.get_levels()[0],ni.schemaSection);ni.children.push(nm)},$e:function(ni,nj,nk){var nl=kR.$n(tab.GroupModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.GroupModel).call(null,nj.get_userDefinedAttributes()),nk));for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=new kQ(nn,ni.schemaSection);ni.children.push(no)}},$0:function(ni,nj,nk,nl){if(nj.get_dimensionIsEffectivelyEmpty()){return}var nm=nj.get_defaultCubeHierarchy();if(nm.get_levels().length===1){kR.$a(ni,nm,nl);return}var nn=new kQ(nj,ni.schemaSection);ni.children.push(nn);kR.$4(nn,nj,nk,nl)},$c:function(ni,nj,nk,nl){kR.$4(ni,nj,nk,nl);var nm=kR.$n(tab.CubeAttributeDimensionModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.CubeAttributeDimensionModel).call(null,nj.asCubeStandardDimension().get_cubeAttributeDimensions()),nl));for(var nn=0;nn<nm.length;nn++){var no=nm[nn];kR.$0(ni,no,nk,nl)}},$4:function(ni,nj,nk,nl){if(nk.get_canUseMultipleHierarchies()){kR.$3(ni,nj,nk,nl);kR.$9(ni,nj,nk,nl);kR.$b(ni,nj,nl)}else{var nm=nj.get_defaultCubeHierarchy();kR.$8(ni,nm,nk,nl);kR.$e(ni,nm,nl)}if(nj.get_isTimeIntelligence()){var nn=nj.get_timeIntelligenceColumn();var no=new kQ(nn,ni.schemaSection);ni.children.push(no)}},$d:function(ni,nj,nk){var nl=ni.get_measures();nl=kR.$n(tab.StructuredMeasureModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.StructuredMeasureModel).call(null,nl),nk));for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=new kQ(nn,1);nj.children.push(no);if(nn.get_measures().length>0){kR.$d(nn,no,nk)}}},$5:function(ni,nj,nk){var nl=ni.get_fields();if(ss.isValue(nl)){nl=lc.filterFieldsForViewing(nl,nk)}for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=new kQ(nn,nj.schemaSection);nj.children.push(no);if(nn.get_isDrillPath()){var np=nn.asDrillPath().get_levels();np=kR.$n(tab.FieldColumnModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.FieldColumnModel).call(null,np),nk));for(var nq=0;nq<np.length;nq++){var nr=np[nq];var ns=new kQ(nr,nj.schemaSection);no.children.push(ns)}}}},$6:function(ni,nj,nk){var nl=ni.get_fields();if(ss.isValue(nl)){nl=lc.filterFieldsForViewing(nl,nk)}for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=new kQ(nn,nj.schemaSection);nj.children.push(no);if(nn.get_isDrillPath()){var np=nn.asDrillPath().get_levels();np=kR.$n(tab.FieldColumnModel).call(null,lc.filterFieldsForViewing(kR.$m(tab.FieldColumnModel).call(null,np),nk));for(var nq=0;nq<np.length;nq++){var nr=np[nq];var ns=new kQ(nr,nj.schemaSection);no.children.push(ns)}}}}});var kS=global.tab.SchemaNodePath=ss.mkType(a,'tab.SchemaNodePath',function(ni,nj){this.$1$1=null;this.$1$2=null;this.set_node(nj);this.set_path(ni||[])},{get_path:function(){return this.$1$1},set_path:function(ni){this.$1$1=ni},get_node:function(){return this.$1$2},set_node:function(ni){this.$1$2=ni},createChildPath:function(ni){return new kS(this.get_path().concat(this.get_node()),ni)},forEachParentNode:function(ni){var nj=this.get_path();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];ni(nl)}},getTopmostAncestor:function(){return((this.get_path().length>1)?this.get_path()[1]:this.get_node())}});var kT=global.tab.SchemaPillDragInstance=ss.mkType(a,'tab.SchemaPillDragInstance',function(ni,nj,nk,nl){this.$5$1=null;this.$5$2=null;this.$5$3=false;this.$5$4=null;jd.call(this,ni,nk,nl,null);this.set_originalFields(nj);this.set_fieldsInfo(new gl(nj));this.set_allowSchemaConversionToDimOrMeas(false);this.set_allFieldsFolderName('');if(nj.length>0){this.set_allFieldsFolderName(nj[0].get_parentFolderName());for(var nm=1,nn=nj.length;nm<nn;nm++){if(!ss.referenceEquals(nj[nm].get_parentFolderName(),this.get_allFieldsFolderName())){this.set_allFieldsFolderName('');break}}}},{get_originalFields:function(){return this.$5$1},set_originalFields:function(ni){this.$5$1=ni},get_fieldsInfo:function(){return this.$5$2},set_fieldsInfo:function(ni){this.$5$2=ni},get_allowSchemaConversionToDimOrMeas:function(){return this.$5$3},set_allowSchemaConversionToDimOrMeas:function(ni){this.$5$3=ni},get_allowSchemaCopyConversion:function(){return tabBootstrap.Affordances.isOn('schemaViewerDropCopyConvert')&&this.get_allowSchemaConversionToDimOrMeas()&&this.get_fieldsInfo().dimensionColumns!==0},get_canDropToConvert:function(){if(this.isCopyDrag){return this.get_allowSchemaCopyConversion()}return tabBootstrap.Affordances.isOn('schemaViewerDropConversionToDimOrMeas')&&this.get_allowSchemaConversionToDimOrMeas()&&this.get_fieldsInfo().columnsInDrillPath!==2},get_allFieldsFolderName:function(){return this.$5$4},set_allFieldsFolderName:function(ni){this.$5$4=ni},updateDraggedFieldFromServer:function(ni){jd.prototype.updateDraggedFieldFromServer.call(this,ni);this.set_allowSchemaConversionToDimOrMeas(ni.canDropToConvert);if(this.drag.canAddToNewLayer){var nj=new hp;var nk=new ho(nj);nk.show()}}},{canDropToCopyConvert:function(ni){var nj=ss.safeCast(ni,kT);if(ss.isNullOrUndefined(nj)){return false}return nj.isCopyDrag&&nj.get_allowSchemaCopyConversion()}});var kU=global.tab.SchemaSearchComponent=ss.mkType(a,'tab.SchemaSearchComponent',function(ni){this.$k=SharedWidgets.TabStyles.Spacing.DefaultSpace+SharedWidgets.TabStyles.Spacing.SmallSpace;this.$h=null;this.$m=null;this.$g=null;this.$i=null;this.$e=null;this.$j=null;this.$f=false;this.$n={flexGrow:1,width:'100%'};this.$b={marginLeft:'3px',paddingLeft:'2px'};this.$l=spiff.DOMElements.div({key:'searchFilterIcon',className:'tabSchemaViewerFilterIcon-xsmall'});this.$c={minWidth:'22px',display:'inline-block'};this.$d={display:'inline-block'};spiff.PureRenderComponent.call(this,ni);this.state={searchText:''};this.$e=this.$2();this.$h=ss.mkdel(this,function(nj){this.$m=nj});this.$g=ss.mkdel(this,function(nj){this.$i=$(nj)})},{$2:function(){var ni=[];this.props.searchFilterHelper.forEach(ss.mkdel(this,function(nj,nk){ni.push(this.$1(nj.toUpperCase(),nk.caption,nk.value))}));return ni},$1:function(ni,nj,nk){var nl=spiff.DOMElements.div({},spiff.DOMElements.div({style:this.$c},nk),spiff.DOMElements.div({style:this.$d},nj));return{testId:'schema-search-filter-item-'+ni,content:nl,value:nk}},render:function(){return spiff.DOMElements.div({className:'tab-schema-search-and-filter-component',id:'schema-search-id'},React.createElement(SharedWidgets.TextFieldWidget,this.$5()),React.createElement(SharedWidgets.DropdownButton,this.$0(),this.$l),spiff.DOMElements.div({className:'vertical-separator'}))},$5:function(){return{testId:'Search-text-input',kind:'search',placeholder:tab.Strings.AuthSchemaViewerSearchPlaceholderText,onChange:ss.mkdel(this,this.$6),onClear:ss.mkdel(this,this.$7),value:this.state.searchText,style:this.$n,ref:this.$h}},$0:function(){return{'aria-controls':'schemaSearchPopupId','aria-haspopup':'listbox',testId:'schema-search-filter-button',type:3,style:this.$b,focusOnClose:false,closeOnPopupBlur:'true',onOpen:ss.mkdel(this,this.$9),onClose:ss.mkdel(this,this.$8),popupContent:this.$4(),stackingRootId:'stackToTheBodyUsingThisMagicNonExistantId',title:tab.Strings.SchemaSearchFilterTitle,zIndex:1000}},$4:function(){return spiff.DOMElements.div({id:'schemaSearchPopupId',role:'listbox',className:'tabSchemaSearchFilterPopup',ref:this.$g},spiff.DOMElements.div({className:'tabSchemaSearchFilterPopupTitle'},tab.Strings.SchemaSearchFilterTitle),React.createElement(SharedWidgets.List,this.$3()))},$3:function(){return{id:'tab-shared-widget-schemaSearchListId',items:this.$e,testId:'schema-search-filter-list',onSelect:ss.mkdel(this,this.$a),selectOnEnterKey:true}},$6:function(ni){var nj=ni.target.value;this.setState({searchText:nj});this.props.handleChange(nj)},$7:function(){this.setState({searchText:''});this.props.handleClear()},$9:function(ni,nj){this.$j=ni;var nk=nj.right-this.$k+SharedWidgets.TabStyles.Sizing.BorderWidth*2;this.$i.css('min-width',nk);var nl=this.$i.closest("div[data-tb-test-id*='DropdownOverlay-Root']");if(nl.length===1){nl.addClass('tabSchemaSearchFilterPopupRoot')}},$8:function(){if(this.$f){this.$m.focus();this.$f=false}this.$j=null},$a:function(ni){var nj=this.props.searchFilterHelper.addFilterToText(this.state.searchText,ni);this.setState({searchText:nj});this.props.handleChange(nj);this.$f=true;this.$j()}});var kV=global.tab.SchemaSearchInfo=ss.mkType(a,'tab.SchemaSearchInfo',function(ni,nj){this.fullSearchString='';this.parsedSearchString='';this.filterType='unknown';if(ss.isValue(ni)){this.fullSearchString=ni.toLowerCase();this.parsedSearchString=nj.getSearchText(this.fullSearchString).trim();this.filterType=nj.getFilterType(ni)}});var kW=global.tab.SchemaViewerDragFeedback=ss.mkType(a,'tab.SchemaViewerDragFeedback',function(ni){this.$2=null;this.fieldDragOver=null;this.fieldDragExit=null;this.$3=null;this.$0=null;this.$1=null;this.$2=ni;this.$3=new dN;this.$0=new dM('dimensions');this.$1=new dM('measure')},{get_unnamedFieldsDropTarget:function(){return this.$3},get_dimensionsDropTarget:function(){return this.$0},get_measuresDropTarget:function(){return this.$1},createFieldDragSource:function(){var ni=ss.mkdel(this,function(){return this.$2.get_selectedFields()});var nj=ss.mkdel(this,function(){return this.$2.get_firstSelectedHierarchyName()});return new fZ(ni,ss.mkdel(this.$2,this.$2.clearSelection),nj)},tryCreateFieldDropTarget:function(ni){var nj=this.$2.findFieldModel(ni);if(ss.isNullOrUndefined(nj)||nj.get_isRelationalTable()||nj.get_isObject()){return null}var nk=ss.mkdel(this,function(nm,nn){if(!ss.staticEquals(this.fieldDragOver,null)){this.fieldDragOver(ni,kW.$0(nm),nn.isCopyDrag)}});var nl=ss.mkdel(this,function(nm,nn){if(!ss.staticEquals(this.fieldDragExit,null)){this.fieldDragExit(ni,kW.$0(nm))}});return new ga(nj,nk,nl,kW.$3)},dispose:function(){this.$3.dispose()}},{$3:function(ni,nj){var nk=ss.safeCast(nj,kT);if(ss.isNullOrUndefined(nk)){return false}var nl=ni.get_fieldsModel().get_dataSource();var nm=nk.get_originalFields();var nn=function(no){if(ss.isValue(no)){var np=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(no).get_simpleCommand(),false);var nq=tab.CommandUtils.createCommandRedirectSuccessHandler(null);tab.ServerCommands.executeServerCommand(np,'immediately',nq,null)}};if(ni.get_isDrillPath()){tab.SchemaClientCommands.dropOnSchemaDrillPath(nl.get_name(),nm,ni.asDrillPath(),nn)}else if(nk.isCopyDrag){tab.SchemaClientCommands.dropOnSchemaFieldWithCopyDrag(nl.get_name(),nm,ni,nn)}else{tab.SchemaClientCommands.dropOnSchemaField(nl.get_name(),nm,ni,nn)}return true},dropOnSchemaSection:function(ni,nj,nk,nl,nm){if(nl){kW.$2(ni,nj,nk)}else{kW.$1(ni,nj,nk,nm)}},$1:function(ni,nj,nk,nl){tab.SchemaClientCommands.dropOnSchemaSection(ni,nj,nk,nl,function(nm){if(ss.isValue(nm)){var nn=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nm).get_simpleCommand(),false);tab.ServerCommands.executeServerCommand(nn,'immediately',null,null)}})},$2:function(ni,nj,nk){if(nk==='dimensions'){return}var nl=[];for(var nm=0;nm<nj.length;nm++){var nn=nj[nm];if(!nn.get_isDrillPath()&&!nn.get_isObject()&&!nn.get_isFolder()){nl.push(nn.get_globalName())}}tab.SchemaClientCommands.dropOnSchemaSectionWithCopyDrag(ni,nl)},createContainerSectionDropTarget:function(ni,nj,nk,nl,nm){return new dJ(ni,nj,nk,nl,nm)},$0:function(ni){if(ni.get_isColumn()){var nj=ni.asColumn().get_baseColumn();if(nj.get_isInDrillPath()){return 3}else if(nj.get_defaultRole()==='dimension'){return 0}else if(nj.get_defaultRole()==='measure'){return 1}}else if(ni.get_isDrillPath()){return 2}return 4}});var kX=global.tab.SchemaViewerPaneType=ss.mkEnum(a,'tab.SchemaViewerPaneType',{common:0,dimensions:1,measures:2,sets:3,parameters:4});var kY=global.tab.SchemaViewerSearchFilter=ss.mkType(a,'tab.SchemaViewerSearchFilter',function(){this.$2={};this.$1=null;var ni=this.$2;var nj=new kZ;nj.value='C:';nj.filterType='calculation';nj.caption=tab.Strings.SchemaSearchFilterCalculation;ni['c']=nj;var nk=this.$2;var nl=new kZ;nl.value='D:';nl.filterType='dimension';nl.caption=tab.Strings.SchemaSearchFilterDimension;nk['d']=nl;var nm=this.$2;var nn=new kZ;nn.value='M:';nn.filterType='measure';nn.caption=tab.Strings.SchemaSearchFilterMeasure;nm['m']=nn;var no=this.$2;var np=new kZ;np.value='F:';np.filterType='comment';np.caption=tab.Strings.SchemaSearchFilterComment;no['f']=np;this.$1=this.$0()},{$0:function(){var ni='';var nj=ss.getEnumerator(Object.keys(this.$2));try{while(nj.moveNext()){var nk=nj.current();ni+=nk+nk.toUpperCase()}}finally{nj.dispose()}return new RegExp('^(['+ni+']):')},forEach:function(ni){var nj=ss.getEnumerator(Object.keys(this.$2));try{while(nj.moveNext()){var nk=nj.current();ni(nk,this.$2[nk])}}finally{nj.dispose()}},getFilterType:function(ni){var nj=ni.match(this.$1);if(ss.isValue(nj)&&nj.length>1){var nk=nj[1].toLowerCase();return this.$2[nk].filterType}return'unknown'},getSearchText:function(ni){return ni.replace(this.$1,'')},addFilterToText:function(ni,nj){if(tab.MiscUtil.isNullOrEmpty$1(nj)){return ni}return nj+' '+ni}});var kZ=global.tab.SchemaViewerSearchFilter$SchemaSearchFilter=ss.mkType(a,'tab.SchemaViewerSearchFilter$SchemaSearchFilter',function(){this.value=null;this.filterType=null;this.caption=null});var la=global.tab.SchemaViewerTemplate=ss.mkType(a,'tab.SchemaViewerTemplate',function(){this.aboveSearchResizeHandle=null;this.sourcesCombo=null;eH.call(this,la.template);this.$1();this.$3();this.$4();this.$2();this.aboveSearchResizeHandle=this.getElementBySelector('.tab-aboveSearchResizeHandle');this.sourcesCombo=this.getElementBySelector('.tab-dataSourcesCombo')},{$1:function(){this.headers[4]=this.getElementBySelector('.tab-schemaPane.tab-schemaCommon .tab-schemaPane-header');this.headers[0]=this.getElementBySelector('.tab-schemaDimensions-Header');this.headers[1]=this.getElementBySelector('.tab-schemaMeasuresHeader');this.headers[2]=this.getElementBySelector('.tab-schemaSetsHeader');this.headers[3]=this.getElementBySelector('.tab-schemaParametersHeader')},$3:function(){this.panes[0]=this.getElementBySelector('.tab-schemaPane.tab-schemaCommon');this.panes[1]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaDimensions'));this.panes[2]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaMeasures'));this.panes[3]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaSets'));this.panes[4]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaParameters'))},$4:function(){this.sections[4]=this.getElementBySelector('#tab-schemaFieldContainers > .tab-schemaSection-content');this.sections[5]=this.getElementBySelector('#tab-schemaCommonDimensions > .tab-schemaSection-content');this.sections[6]=this.getElementBySelector('#tab-schemaCommonMeasures > .tab-schemaSection-content');this.sections[0]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaDimensions'));this.sections[1]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaMeasures'));this.sections[2]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaSets'));this.sections[3]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaParameters'))},$2:function(){this.getElementBySelector('.separatorLabel.dimLabel .separatorLabelText').text(tab.Strings.AuthSchemaViewerHeaderDimensions);this.getElementBySelector('.separatorLabel.measLabel .separatorLabelText').text(tab.Strings.AuthSchemaViewerHeaderMeaures)}});var lb=global.tab.SchemaViewerView=ss.mkType(a,'tab.SchemaViewerView',function(ni){this.$22=null;this.$24=[];this.$23=null;this.$4$1=null;eI.call(this,ni,new la);this.$1R();var nj=this.get_schemaSearch();this.renderSearchBox(nj[0]);this.initializeContextMenu(nj);this.$1S();this.$1z();this.setUpDataPaneEmptySpaceEventListener();if(ss.isValue(this.get_schemaViewerViewModel().get_selectedDataSource())){this.initFromModel()}else{this.layoutSections()}this.$1N();this.get_schemaViewerViewModel().add_selectedDataSourceChanged(ss.mkdel(this,this.$1I));this.disposables.add(ss.mkdel(this,function(){this.get_schemaViewerViewModel().remove_selectedDataSourceChanged(ss.mkdel(this,this.$1I))}));this.disposables.add(ss.mkdel(this,function(){this.$1C()}))},{get_dataTypeIcon:function(){return this.$4$1},set_dataTypeIcon:function(ni){this.$4$1=ni},$21:function(){return this.get_schemaViewerViewModel().get_selectableDataSources().length},$1S:function(){this.disposables.add$1(new spiff.HoverBehavior(this,'.tab-schema-field-label-area',ss.mkdel(this,this.$1H),lb.$3));this.disposables.add$1(new spiff.HoverBehavior(this,'.'+'tab-dataSource',ss.mkdel(this,this.$1H),lb.$3))},$1z:function(){var ni=new spiff.ComboBoxViewModel;ni.set_theme(2);ni.set_menuTheme(0);this.$23=ni;this.$23.add_selectedItemChanged(ss.mkdel(this,this.$1J));this.disposables.add(ss.mkdel(this,this.$1B));tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$23]).addToDom(this.dom.sourcesCombo)},$1B:function(){if(ss.isValue(this.$23)){this.$23.remove_selectedItemChanged(ss.mkdel(this,this.$1J));this.$23=tab.MiscUtil.dispose$1(this.$23)}},$1O:function(ni){this.$23.set_selectedItem(_.find(this.$23.get_items(),function(nj){var nk=nj.get_data();return ss.referenceEquals(ni,nk)}))},$1J:function(ni){if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data();if(!ss.referenceEquals(nj,this.get_schemaViewerViewModel().get_selectedDataSource())){tab.SchemaClientCommands.setActiveDataSourceName(nj.get_name(),false)}},$1L:function(){var ni=this.get_schemaViewerViewModel().get_currentSheetSchema();if(ss.isNullOrUndefined(ni)){return}var nj=ni.datasourceIcons;this.$23.clearItems();var nk=null;var nl=this.$1E();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=new spiff.ComboBoxItem(gO.getDataSourceIcon(nj,nn),nn.get_caption(),nn,null,null);this.$23.addItem(no);if(ss.referenceEquals(nn,this.get_schemaViewerViewModel().get_selectedDataSource())){nk=no}}this.$23.set_selectedItem(nk)},$1E:function(){var ni=ss.arrayClone(this.get_schemaViewerViewModel().get_selectableDataSources());ni.sort(function(nj,nk){return nj.get_caption().toString().localeCompare(nk.get_caption().toString())});return ni},$1P:function(){var ni=this.get_sources().height();if(ni===0){return}var nj=lb.singleDataSourceTitleDisplayHeight*2-2;if(this.$21()>1&&ni<nj){this.$1V()}else{this.$1W();this.scrollSelectedDataSourceIntoView()}this.$1Q()},$1V:function(){this.get_sources().addClass('showInCombo')},$1W:function(){this.get_sources().removeClass('showInCombo')},scrollSelectedDataSourceIntoView:function(){var ni=this.$1D();if(ss.isValue(ni)){ni.scrollIntoView(false)}},$1D:function(){var ni=this.get_schemaViewerViewModel().get_selectedDataSource();if(ss.isValue(ni)){var nj=ni.get_caption();nj=nj.replace(new RegExp('"','g'),'\\"');var nk=ss.formatString('[title="{0}"]',nj);var nl=this.get_sourceTitles().find(nk);if(nl.length>0){return nl.get(0)}}return null},$1K:function(){this.$1P()},$1I:function(){if(ss.isValue(this.$23)){this.$1O(this.get_schemaViewerViewModel().get_selectedDataSource())}this.layoutSections()},initFromModel:function(){this.perInitDisposables.dispose();this.initDataSources();this.$1L();this.$1Q();var ni=this.shouldExpandTopLevelNodes();var nj=false;var nk=ss.mkdel(this,function(){lc.sectionsInOrder.forEach(ss.mkdel(this,function(nl){if(this.initSection(nl,ni)){nj=true;this.$20(nl)}}));if(nj){this.layoutSections()}else{this.updateVisibilityOfPanesForViewType()}this.$1U()});this.$1Z();this.get_schemaViewerViewModel().get_dataSchema().updateWorkbookDataCatalogMetadata(nk)},initDataSources:function(){var ni=ss.isNullOrUndefined(this.get_dataSourceTitles())||this.get_dataSourceTitles().length===0;eI.prototype.initDataSources.call(this);if(ni&&this.get_dataSourceTitles().length>0){this.$1N()}window.setTimeout(ss.mkdel(this,this.$1P),0)},$1Q:function(){this.get_sources().css('max-height',this.$21()*lb.singleDataSourceTitleDisplayHeight+2)},layoutSections:function(){this.$1R();this.updateVisibilityOfPanesForViewType();this.$1T();this.$1P();this.initTopLevelDragDrop()},$1T:function(){this.$1C();var ni=ss.isValue(this.get_viewModel().get_selectedDataSource())&&this.get_viewModel().get_selectedDataSource().get_isHierarchical();var nj=this.$24;var nk=new kP(this.dom.aboveSearchResizeHandle);nk.set_debugName('DataSources dragBar');nk.set_paneAbove(this.get_sources());nk.set_paneBelow((ni?this.get_panes()[1]:this.get_panes()[0]));nk.set_onDragMove(ss.mkdel(this,this.$1K));nj.push(nk);if(ni){var nl=this.$24[this.$24.length-1];var nm=new kP(this.get_headers()[1]);nm.set_debugName('Measures dragBar');nm.set_paneAbove(nl.get_paneBelow());nm.set_paneBelow(this.get_sections()[1]);nm.set_dragBarAbove(nl);nm.set_onDragMove(ss.mkdel(this,this.$1K));var nn=nm;nl.set_dragBarBelow(nn);this.$24.push(nn)}if(ni&&this.isCurrentlyVisible(2)){var no=this.$24[this.$24.length-1];var np=new kP(this.get_headers()[2]);np.set_debugName('Groups(Sets) dragBar');np.set_paneAbove(no.get_paneBelow());np.set_paneBelow(this.get_sections()[2]);np.set_dragBarAbove(no);np.set_onDragMove(ss.mkdel(this,this.$1K));var nq=np;no.set_dragBarBelow(nq);this.$24.push(nq)}if(this.isCurrentlyVisible(3)){var nr=this.$24[this.$24.length-1];var ns=new kP(this.get_headers()[3]);ns.set_debugName('Parameters dragBar');ns.set_paneAbove(nr.get_paneBelow());ns.set_paneBelow(this.get_sections()[3]);ns.set_dragBarAbove(nr);ns.set_onDragMove(ss.mkdel(this,this.$1K));var nt=ns;nr.set_dragBarBelow(nt);this.$24.push(nt)}},$1C:function(){this.$24.forEach(function(ni){ni.dispose()});ss.clear(this.$24)},$1R:function(){var ni=this.get_schemaViewerViewModel().get_currentLayout().showStructure;var nj=(ss.isValue(this.get_schemaViewerViewModel().get_selectedDataSource())?this.get_schemaViewerViewModel().get_selectedDataSource().get_measuresHeaderName():tab.Strings.AuthSchemaViewerHeaderMeaures);this.get_headers()[4].text((ni?tab.Strings.AuthSchemaViewerHeaderTables:tab.Strings.AuthSchemaViewerHeaderFolders));this.get_headers()[2].text(tab.Strings.AuthSchemaViewerHeaderSets);this.get_headers()[3].text(tab.Strings.AuthSchemaViewerHeaderParameters);this.get_headers()[0].text(tab.Strings.AuthSchemaViewerHeaderDimensions);this.get_headers()[1].text(nj)},$1N:function(){var ni=this.get_schemaViewerViewModel().getNodeCountForPane(0);var nj=this.get_schemaViewerViewModel().getNodeCountForPane(1);var nk=this.get_schemaViewerViewModel().getNodeCountForPane(2);var nl=this.get_schemaViewerViewModel().getNodeCountForPane(4);var nm=this.get_schemaViewerViewModel().getNodeCountForPane(3);var nn=ni+nj+nk+nl+nm;var no=nm/nn*100;var np=nl/nn*100;var nq=nj/nn*100;var nr=100-no-np-nq;var ns=100-np;if(no<10&&nm>0||np<10&&nl>0){no=((nm>0)?15:0);np=((nl>0)?15:0);nq=35;nr=100-nq-np-no;ns=100-np}this.get_panes()[3].css('flex-grow',no+'');this.get_panes()[4].css('flex-grow',np+'');this.get_panes()[1].css('flex-grow',nq+'');this.get_panes()[2].css('flex-grow',nr+'');this.get_panes()[0].css('flex-grow',ns+'')},$20:function(ni){if(ni!==2&&ni!==3){return}var nj=((ni===2)?3:4);var nk=((ni===2)?15:15);var nl=((this.get_schemaViewerViewModel().getNodeCountForPane(nj)>0)?nk:0);this.get_panes()[nj].css('flex-grow',nl+'');var nm=parseFloat(this.get_panes()[2].css('flex-grow'));var nn=parseFloat(this.get_panes()[3].css('flex-grow'));var no=parseFloat(this.get_panes()[4].css('flex-grow'));var np=100-nm-nn-no;var nq=100-no;this.get_panes()[1].css('flex-grow',np+'');this.get_panes()[0].css('flex-grow',nq+'')},initContent:function(){this.$22={};lc.sectionsInOrder.forEach(ss.mkdel(this,function(ni){this.$22[ni]=new eG}))},getScrollerPaneForSection:function(ni){var nj=ss.isValue(this.get_viewModel().get_selectedDataSource())&&this.get_viewModel().get_selectedDataSource().get_isHierarchical();if(nj){return this.dom.sections[ni]}else if(ni===3){return this.dom.sections[3]}else{return this.dom.panes[0]}},scrollFieldIntoView:function(ni){var nj=this.getScrollerPaneForSection(ni.schemaSection);var nk=tab.DoubleUtil.roundToInt(tab.DomUtil.getPageOffset$1(nj).top);var nl=tab.DoubleUtil.roundToInt(nj.height());var nm=this.getScrollTopValueForNode(ni,nj[0].scrollTop,nk,nl);if(ss.isValue(nm)){nj[0].scrollTop=ss.unbox(nm)}},$1H:function(ni){if(EventUtils.DragDropManager.get_isDragging()){return}var nj=$(ni.currentTarget);this.$1M(nj);this.$1A(ni);nj.addClass('hover')},$1M:function(ni){if(!tabBootstrap.FeatureFlags.isEnabled('ObjectModelSharedDimensions')){return}if(ni.find('.'+'tab-schema-right-icon-container').length!==0){return}var nj=ni.prop('SchemaItemLocator');if(ss.isNullOrUndefined(nj)){return}this.renderRightSideRelatabilityIcon(this.findFieldTemplate(this.get_schemaViewerViewModel().findNode(nj)))},attachFieldEventHandlers:function(ni,nj,nk,nl){eI.prototype.attachFieldEventHandlers.call(this,ni,nj,nk,nl);if(ni.hasContextMenu){nk.getMenuClickHandler(this.perInitDisposables).onClick(ss.mkdel(this,function(nm){this.$1G(nk)}));nk.getLabelClickHandler(this.perInitDisposables).onRightClick(ss.mkdel(this,function(nm){this.$1G(nk)}))}nk.getIconAreaClickHandler(this.perInitDisposables).onClick(ss.mkdel(this,function(nm){this.handleDataTypeButton(nk,nm)}));nk.getIconAreaClickHandler(this.perInitDisposables).onRightClick(ss.mkdel(this,function(nm){this.handleDataTypeButton(nk,nm)}))},$1G:function(ni){this.get_schemaViewerViewModel().showFieldContextMenu(ni.get_node(),ni.pill)},handleDataTypeButton:function(ni,nj){if(!ni.get_node().canChangeDataType&&!ni.get_node().canChangeSemanticRole){return}if(nj.ctrlKey||nj.shiftKey||this.get_schemaViewerViewModel().get_selectedNodes().length>1){this.get_schemaViewerViewModel().clearAllAndSelect(ni.get_node())}this.get_schemaViewerViewModel().showChangeDataTypeContextMenu(ni.get_node(),ni.icon,ss.mkdel(this,this.$1F));this.set_dataTypeIcon(ni.iconArea);this.get_dataTypeIcon().toggleClass('tab-active',true)},$1F:function(){this.get_dataTypeIcon().toggleClass('tab-active',false)},$1Z:function(){var ni=this.get_schemaViewerViewModel().get_selectedDataSource();var nj=this.get_schemaViewerViewModel().get_dataSchema();var nk=ss.isValue(nj)&&ss.isValue(ni)&&ss.isValue(ni.get_name())&&ss.isValue(ni.get_caption())&&ni.get_name()!=='Parameters'&&ss.isNullOrUndefined(nj.getMetadataForDatasourceByName(ni.get_name()));if(nk){nj.set_latestDSRequiringMetdataUpdate(new tab.DataSourceNameAndCaption(ni.get_name(),ni.get_caption()))}},$1U:function(){if(tabBootstrap.FeatureFlags.isEnabled('LabelsInWebAuthoring')){if(ss.isNullOrUndefined(this.get_viewModel().get_selectedDataSource())){return}var ni=this.get_viewModel().get_selectedDataSource();if(!!(ss.isValue(lb.$8)&ss.referenceEquals(ni.get_name(),lb.$9))){return}else if(ss.isValue(lb.$8)){SharedWidgets.ToastWidget.dismiss(lb.$8);lb.$9=null;lb.$8=null}var nj=this.get_viewModel().get_dataSchema().getMetadataForDatasourceByCaption(ni.get_caption());if(ss.isValue(nj)){var nk=nj.getElevatedLabelStatus();var nl=((nk.hasElevatedWarning&&nk.hasElevatedSensitivity)?tab.Strings.DataCatalogSevereLabelsToast:(nk.hasElevatedWarning?tab.Strings.DataCatalogSevereWarningToast:(nk.hasElevatedSensitivity?tab.Strings.DataCatalogSevereSensitivityToast:null)));if(ss.isValue(nl)){lb.$9=ni.get_name();lb.$8=SharedWidgets.ToastWidget.show({actionMessage:tab.Strings.DataCatalogSevereLabelsAction,autoDismiss:false,message:nl,onAction:ss.mkdel(this,function(){var nm=new mu;nm.set_dataSource(this.get_viewModel().get_selectedDataSource().get_name());nm.invoke()}),onCloseRequest:function(){lb.$9=null},toastType:'warning'})}}}},$1Y:function(ni){var nj=ni.currentTarget.parentElement;if(ss.isNullOrUndefined(lb.$7)){var nk=ni.currentTarget.getElementsByClassName('tab-schema-field-pill-menu-icon');if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk[0])){return}lb.$5=nk[0].appendChild(document.createElement('div'));var nl=nj.getAttribute('fieldname');var nm=nj.getAttribute('datasourcename');var nn=this.get_schemaViewerViewModel().get_dataSchema().getMetadataForDatasourceByName(nm);var no=(ss.isValue(nn)?nn.getFieldMetadata(nl):null);if(ss.isNullOrUndefined(no)){return}var np=eF.getProbablyCollectionForLabels(no.get_labels());var nq={renderMode:eF.labelsPanelModePopover,testId:eF.labelsPanelFieldTestId,catalogEnabled:true,elevatedPanel:false,close:function(){lb.$2(null)},dismiss:function(){lb.$2(null)},apolloClient:tab.ApolloClientSingleton.get_instance(),siteLuid:tsConfig.site_luid,siteUrlName:tsConfig.site_url_name,anchorEl:lb.$5,includeParented:true,includeUpstream:no.get_type()!==7,description:no.get_description(),isParentCertified:no.get_isParentCertified(),parentName:no.get_parentName(),parentType:eF.getDataCatalogAssetTypeString(no.get_parentType()),inheritedName:no.get_inheritedColumnName(),content:{contentId:no.get_id(),contentLuid:no.get_luid(),contentName:no.get_name(),contentType:eF.getContentTypeString(no.get_type()),subjectArea:eF.getDataCatalogAssetTypeString(no.get_type()),remoteType:no.get_remoteType()},probablyOrEager:np};lb.$7=React.createElement(ConnectPanePluginTableauServer.LabelsPanelDialog,nq);ReactDOM.render(lb.$7,lb.$5)}},$1X:function(ni){var nj=ni.currentTarget.parentElement;if(ss.isNullOrUndefined(lb.$6)){lb.$5=ni.currentTarget.appendChild(document.createElement('div'));var nk={anchorEl:lb.$5,assetParent:{contentType:nj.getAttribute('parentcontenttype'),isCertified:/^\s*true\s*$/i.test(nj.getAttribute('parentiscertified')),name:nj.getAttribute('parentname')},description:nj.getAttribute('inheriteddescription'),fieldName:nj.getAttribute('fieldname'),inheritedColumnName:nj.getAttribute('inheritedcolumnname'),siteLuid:tsConfig.site_luid,tableauVersion:tsConfig.version,telemetryEnvironment:(tsConfig.is_saas?3:2),onClose:function(){return}};lb.$6=React.createElement(ConnectPanePluginTableauServer.DescriptionPanel,nk);ReactDOM.render(lb.$6,lb.$5)}},$1A:function(ni){if(ss.equalsT('tab-schema-field-label-area tabDropTarget',ni.currentTarget.getAttribute('class'))){var nj=ni.currentTarget.parentElement;if(ss.isValue(nj)){if(tabBootstrap.FeatureFlags.isEnabled('LabelsInWebAuthoring')&&!tab.MiscUtil.isNullOrEmpty$1(nj.getAttribute('datasourcename'))){this.loadOnDemandModulesForDatacatMetadata().done(ss.mkdel(this,function(nk){this.$1Y(ni)}))}else if(!tab.MiscUtil.isNullOrEmpty$1(nj.getAttribute('inheriteddescription'))){this.loadOnDemandModulesForDatacatMetadata().done(ss.mkdel(this,function(nk){this.$1X(ni)}))}}}}},{$3:function(ni){lb.$0(ni);$(ni.currentTarget).removeClass('hover')},$0:function(ni){if(ss.equalsT('tab-schema-field-label-area tabDropTarget hover',ni.currentTarget.getAttribute('class'))){var nj=ni.currentTarget.parentElement;if(tabBootstrap.FeatureFlags.isEnabled('LabelsInWebAuthoring')&&ss.isValue(nj)&&!tab.MiscUtil.isNullOrEmpty$1(nj.getAttribute('datasourcename'))){lb.$2(ni)}else if(ss.isValue(nj)&&!tab.MiscUtil.isNullOrEmpty$1(nj.getAttribute('inheriteddescription'))){lb.$1()}}},$1:function(){lb.$6=null;if(ss.isValue(lb.$5)){ReactDOM.unmountComponentAtNode(lb.$5);$(lb.$5).remove()}},$2:function(ni){if(ss.isValue(ni)&&ss.isValue(ni.relatedTarget)&&ss.equalsT('Labels-Panel-Dialog-Body',ni.relatedTarget.getAttribute('data-tb-test-id'))){return}lb.$7=null;if(ss.isValue(lb.$5)){ReactDOM.unmountComponentAtNode(lb.$5);$(lb.$5).remove()}}});var lc=global.tab.SchemaViewerViewModel=ss.mkType(a,'tab.SchemaViewerViewModel',function(){this.$L={};this.$F={};this.$G={};this.$H={};this.$M=[];this.$I=null;this.$O=null;this.$D=null;this.$C=null;this.$E=false;this.$K=null;this.$N=null;this.$J=new kY;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=null;this.$2$11=false;this.$2$12=null;this.$2$13=0;spiff.BaseViewModel.call(this);this.$I=new(ss.makeGenericType(tab.ModelHolder$1,[tab.DataSchemaModel]));this.$I.addModelChangedHandler(ss.mkdel(this,this.handleModelChanged)).addEventBinding(ss.mkdel(this,function(ni){ni.add_newDataSchema(ss.mkdel(this,this.$c));ni.add_newDataSourceAdded(ss.mkdel(this,this.$a));ni.add_newDataSourceAddedCatalog(ss.mkdel(this,this.$b))}),ss.mkdel(this,function(ni){ni.remove_newDataSchema(ss.mkdel(this,this.$c));ni.remove_newDataSourceAdded(ss.mkdel(this,this.$a));ni.remove_newDataSourceAddedCatalog(ss.mkdel(this,this.$b))}));this.$O=this.$O||new tab.WorkbookDataCatalogMetadata;this.$N=_.debounce(ss.mkdel(this,this.$w),300);this.set_dragFeedback(new kW(this));this.$f()},{add_dataSchemaModified:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_dataSchemaModified:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_newDataSourceAdded:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_newDataSourceAdded:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_selectedDataSourceChanged:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_selectedDataSourceChanged:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},add_dataSourceListChanged:function(ni){this.$2$4=ss.delegateCombine(this.$2$4,ni)},remove_dataSourceListChanged:function(ni){this.$2$4=ss.delegateRemove(this.$2$4,ni)},add_scrollToNodes:function(ni){this.$2$5=ss.delegateCombine(this.$2$5,ni)},remove_scrollToNodes:function(ni){this.$2$5=ss.delegateRemove(this.$2$5,ni)},add_expandNodes:function(ni){this.$2$6=ss.delegateCombine(this.$2$6,ni)},remove_expandNodes:function(ni){this.$2$6=ss.delegateRemove(this.$2$6,ni)},add_expandAllContainers:function(ni){this.$2$7=ss.delegateCombine(this.$2$7,ni)},remove_expandAllContainers:function(ni){this.$2$7=ss.delegateRemove(this.$2$7,ni)},add_collapseAllContainers:function(ni){this.$2$8=ss.delegateCombine(this.$2$8,ni)},remove_collapseAllContainers:function(ni){this.$2$8=ss.delegateRemove(this.$2$8,ni)},add_dataSchemaModelChanged:function(ni){this.$2$9=ss.delegateCombine(this.$2$9,ni)},remove_dataSchemaModelChanged:function(ni){this.$2$9=ss.delegateRemove(this.$2$9,ni)},add_newDataSourceAddedCatalog:function(ni){this.$2$10=ss.delegateCombine(this.$2$10,ni)},remove_newDataSourceAddedCatalog:function(ni){this.$2$10=ss.delegateRemove(this.$2$10,ni)},get_doubleClicking:function(){return this.$2$11},set_doubleClicking:function(ni){this.$2$11=ni},get_isSearching:function(){return!ss.isNullOrEmptyString(this.$K)},get_title:function(){return tab.Strings.AuthSchemaViewerHeaderData},get_id:function(){return'data'},get_contentViewType:function(){return eI},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return null},get_dataSchema:function(){return this.$I.get_model()},set_dataSchema:function(ni){this.$I.set_Model(ni)},get_currentSheetSchema:function(){if(ss.isNullOrUndefined(this.get_dataSchema().get_dataSchemaPresModel())||ss.isNullOrUndefined(this.get_dataSchema().get_dataSchemaPresModel().worksheetDataSchemaMap)){return null}return this.get_dataSchema().get_dataSchemaPresModel().worksheetDataSchemaMap[lc.$3()]},get_selectedDataSource:function(){if(ss.isNullOrUndefined(this.$I.get_model())){return null}if(ss.isNullOrUndefined(this.$L[lc.$3()])){this.$L[lc.$3()]=this.$I.get_model().getDefaultDataSourceForSheet(lc.$3())}return this.$L[lc.$3()]},set_selectedDataSource:function(ni){var nj=this.$z(ni,false);if(nj){tab.SchemaClientCommands.setActiveDataSourceName((ss.isNullOrUndefined(ni)?'':ni.get_name().toString()),false)}},get_selectableDataSources:function(){var ni=[];if(ss.isValue(this.$I.get_model())){var nj=this.$I.get_model().get_dataSourcesList();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];if(!ss.referenceEquals(nl,this.$I.get_model().get_parametersDataSource())){ni.push(nl)}}}return ni},get_selectedNodes:function(){return this.$M},get_selectedFields:function(){return this.$M.map(ss.mkdel(this,this.findFieldModel)).filter(ss.isValue)},get_selectedFieldNames:function(){var ni=[];var nj=this.get_selectedFields();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];var nm=nl.get_globalName();if(ss.isValue(nm)&&!ss.contains(ni,nm)){ni.push(nm)}}return ni},get_firstSelectedHierarchyName:function(){if(ss.isNullOrUndefined(this.get_selectedNodes())||this.get_selectedNodes().length===0){return null}var ni=this.get_selectedNodes()[0];return(ni.isHierarchy?ni.hierarchyName:null)},get_lastSelection:function(){if(ss.isValue(this.$M)&&this.$M.length===0){return null}else{return this.$M[this.$M.length-1]}},get_lastSelectedFieldName:function(){return(ss.isNullOrUndefined(this.get_lastSelection())?null:this.get_lastSelection().globalFieldName)},get_currentLayout:function(){if(ss.isNullOrUndefined(this.get_selectedDataSource())){return{dsoDimensionSortOrder:'dso-alphabetic',dsoMeasureSortOrder:'dso-alphabetic',showHiddenFields:false,showStructure:true}}return this.get_selectedDataSource().get_dataSourceLayoutPresModel()},get_dragFeedback:function(){return this.$2$12},set_dragFeedback:function(ni){this.$2$12=ni},get_numNodesIfTopLevelExpanded:function(){return this.$2$13},set_numNodesIfTopLevelExpanded:function(ni){this.$2$13=ni},get_searchFilterHelper:function(){return this.$J},handleModelChanged:function(){this.$I.get_model().set_workbookDataCatalogMetadata(this.$O);this.$c();if(!ss.staticEquals(this.$2$9,null)){this.$2$9(this.get_dataSchema())}},getFieldNodeRightIconInfo:function(ni){if(ni.isHidden&&tabBootstrap.FeatureFlags.isEnabled('ObjectModelSharedDimensions')){return gk.buildHiddenIconInfo()}if(ss.contains(this.$I.get_model().get_currentBlendingFields(),ni.globalFieldName)){return gk.buildBlendingIconInfo(ni.displayName)}if(ss.contains(this.$I.get_model().get_blendingFieldCandidates(),ni.globalFieldName)){return gk.buildBlendingCandidateIconInfo(ni.displayName)}if(!ni.isObject&&this.$s(ni)){return gk.buildRelatabilityIconInfo(this.$4(ni),ni.role)}var nj=new gi;nj.set_iconType('none');nj.set_tooltip(null);return nj},$f:function(){tab.ApplicationModel.get_instance().registerNotificationHandler('doc:expand-all-containers-event',ss.mkdel(this,this.$9));tab.ApplicationModel.get_instance().registerNotificationHandler('doc:collapse-all-containers-event',ss.mkdel(this,this.$7));tab.ApplicationModel.get_instance().registerNotificationHandler('doc:editor-commit-ended-event',ss.mkdel(this,this.$8));if(tabBootstrap.FeatureFlags.isEnabled('ObjectModelSharedDimensions')){tab.ApplicationModel.get_instance().registerNotificationHandler('doc:update-field-relatability-event',ss.mkdel(this,this.$d))}this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.ApplicationModel.get_instance().unRegisterNotificationHandler('doc:expand-all-containers-event',ss.mkdel(this,this.$9));tab.ApplicationModel.get_instance().unRegisterNotificationHandler('doc:collapse-all-containers-event',ss.mkdel(this,this.$7));tab.ApplicationModel.get_instance().unRegisterNotificationHandler('doc:editor-commit-ended-event',ss.mkdel(this,this.$8));if(tabBootstrap.FeatureFlags.isEnabled('ObjectModelSharedDimensions')){tab.ApplicationModel.get_instance().unRegisterNotificationHandler('doc:update-field-relatability-event',ss.mkdel(this,this.$d))}})))},getNodeForSection:function(ni){return(ss.keyExists(this.$G,ni)?this.$G[ni]:null)},nodeTreeForSection:function(ni){return(ss.keyExists(this.$G,ni)?this.$G[ni].children:null)},getNodeCountForPane:function(ni){return(!ss.keyExists(this.$H,ni)?0:this.$H[ni])},$3:function(ni){var nj=this.nodeTreeForSection(ni);return(ss.isValue(nj)?nj.length:0)},canSearchCurrentDataSource:function(){return ss.isValue(this.get_selectedDataSource())},hasSelection:function(){return ss.isValue(this.$M)&&this.$M.length>0},isSelected:function(ni){return _.any(this.$M,function(nj){return ni.equals$1(nj)})},$i:function(){this.notifyPropertyChanged('SelectedField');if(tab.ApplicationModel.get_instance().get_currentSheetType()==='worksheet'){this.$A()}},$A:function(){if(ss.isNullOrUndefined(this.get_selectedDataSource())){return}var ni=this.get_selectedFieldNames();tab.SelectionClientCommands.updateShowMeCommandsForSelectedFields(ni,this.get_selectedDataSource().get_name(),ss.mkdel(this,function(nj){if(_.isEqual(this.get_selectedFieldNames(),ni)){var nk=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_showMeModel();tab.Model.nonWorldUpdate(function(nm){nl.forceUpdate(nj,nm)},null);nl.set_shouldUpdate(ni.length===0)}}))},addNodeToSelection:function(ni){if(!this.isSelected(ni)){this.$M.push(ni);this.$i()}},addNodesToSelection:function(ni){var nj=false;for(var nk=0;nk<ni.length;nk++){var nl=ni[nk];if(!this.isSelected(nl)){this.$M.push(nl);nj=true}}if(nj){this.$i()}},clearAllAndSelect:function(ni){this.$0();if(ss.isValue(ni)){this.$M.push(ni)}this.$i()},deSelectNode:function(ni){if(ss.remove(this.$M,ni)){this.$i()}},deSelectNodes:function(ni){var nj=false;for(var nk=0;nk<ni.length;nk++){var nl=ni[nk];if(ss.remove(this.$M,nl)){nj=true}}if(nj){this.$i()}},clearSelection:function(){if(this.$M.length!==0){this.$0();this.$i()}},$8:function(ni,nj){var nk=ni.schemaItemSelection;if(ss.isNullOrUndefined(nk)){return}var nl=null;nl=ss.mkdel(this,function(){this.$o(nk.schemaItemLocators);tab.CommandController.get().remove_commandQueueComplete(nl)});tab.CommandController.get().add_commandQueueComplete(nl)},$4:function(ni){if(!ss.keyExists(this.$F,ni.dataSourceName)){return null}var nj=this.$F[ni.dataSourceName];if(!ss.keyExists(nj,ni.qualifiedNameObjectId)){return null}return nj[ni.qualifiedNameObjectId]},$s:function(ni){var nj=this.$4(ni);if(ss.isNullOrUndefined(nj)){return false}return true},shouldGrayOutField:function(ni){if(ni.isDrillPath&&ni.children.length>0){for(var nj=0;nj<ni.children.length;nj++){var nk=ni.children[nj];if(!this.shouldGrayOutField(nk)){return false}}return true}if(this.$s(ni)){return this.$t(ni)}return false},$t:function(ni){if(ni.isFolder||ni.isCubeFolder){return false}var nj=this.$4(ni);var nk=ss.isValue(nj.measureRelatabilityPresModel)&&nj.measureRelatabilityPresModel.shouldGrayOut;var nl=ss.isValue(nj.dimensionRelatabilityPresModel)&&nj.dimensionRelatabilityPresModel.shouldGrayOut;if(ni.isObject){return nl&&nk}if(ni.role==='measure'){return nk}if(ni.role==='dimension'){return nl}return false},$d:function(ni,nj){var nk=ni;if(ss.isNullOrUndefined(nk)){return}var nl=null;nl=ss.mkdel(this,function(){this.$y(nk);tab.CommandController.get().remove_commandQueueComplete(nl)});tab.CommandController.get().add_commandQueueComplete(nl)},$y:function(ni){var nj={};for(var nk=0;nk<ni.dataSourceFieldRelatabilityPresModels.length;nk++){var nl=ni.dataSourceFieldRelatabilityPresModels[nk];var nm={};for(var nn=0;nn<nl.objectFieldRelatabilityPresModels.length;nn++){var no=nl.objectFieldRelatabilityPresModels[nn];if(ss.isValue(no)){nm[no.objectIdQualifiedName]=no}}nj[nl.datasource]=nm}if(!_.isEqual(nj,this.$F)){this.$F=nj;this.$l(true)}},$o:function(ni){this.$0();var nj=this.$r(ni);this.$i();this.raiseActionEvent$1(Object).call(this,this.$2$5,nj)},$r:function(ni){var nj=[];if(ss.isNullOrUndefined(this.$I.get_model())){return nj}for(var nk=0;nk<ni.length;nk++){var nl=ni[nk];var nm=this.$I.get_model().findItemDataSource(nl);if(ss.isValue(nm)){if(nm.get_isParametersDataSource()||ss.referenceEquals(nm,this.get_selectedDataSource())){this.$q(nl,nm,nj)}}}return nj},$9:function(ni,nj){this.raiseActionEvent(this.$2$7)},$7:function(ni,nj){this.raiseActionEvent(this.$2$8)},updateSearchText:function(ni,nj){this.$K=ni;if(nj){this.$w()}else{this.$N()}},findNode:function(ni){var nj=this.get_dataSchema().findDataSourceByName(ni.datasource);var nk=this.findNodePath$1(ni,nj);if(ss.isValue(nk)){return nk.get_node()}return null},findNodePath$1:function(ni,nj){if(ss.isNullOrUndefined(nj)){return null}if(nj.get_isParametersDataSource()){return this.$G[3].findPath(ni,nj.get_name())}var nk=new ss.ObjectEnumerator(this.$G);try{while(nk.moveNext()){var nl=nk.current();if(nl.key===3){continue}var nm=nl.value.findPath(ni,nj.get_name());if(ss.isValue(nm)){return nm}}}finally{nk.dispose()}return null},findNodePath:function(ni){if(ss.isNullOrUndefined(ni)){return null}var nj=ni.schemaItemLocator;var nk=this.get_dataSchema().findDataSourceByName(ni.dataSourceName);return this.findNodePath$1(nj,nk)},findFieldModel:function(ni){var nj=this.get_dataSchema().findDataSourceByName(ni.dataSourceName);if(ss.isNullOrUndefined(nj)){return null}switch(ni.instanceType){case'drillPath':{return nj.findDrillPath(ni.globalFieldName)}case'folderNew':{return nj.findFolderNew(ni.globalFieldName)}case'relationalTable':{return nj.findRelationalTable(ni.globalFieldName)}case'cubeFolder':{return nj.findCubeFolder(ni.globalFieldName)}}return nj.findField(ni.globalFieldName)},launchEditingUI:function(ni){if(!this.get_doubleClicking()){this.set_doubleClicking(true);var nj=new tab.ShowFieldEditingUICmd;nj.set_fieldName(ni);var nk=nj;nk.invoke().done(ss.mkdel(this,function(){this.set_doubleClicking(false)}))}},addFieldToSheet:function(ni){if(tabBootstrap.Affordances.isOn('authoring_AddFieldToSheetViaDoubleClick')&&!this.get_doubleClicking()){this.set_doubleClicking(true);tab.SchemaClientCommands.addFieldToSheet(ni,ss.mkdel(this,function(){this.set_doubleClicking(false)}))}},showContextMenu:function(ni,nj){if(ss.isNullOrUndefined(this.get_selectedDataSource())){if(ss.isValue(nj)){nj()}return}tab.SchemaClientCommands.requestSchemaContextMenu(this.get_selectedDataSource().get_name(),'common',true,function(nk){var nl=tab.WidgetUtil.menuViewModelFromCommands(nk,lc.$1,nj,null,null);if(ss.isValue(nl)){nl.show(new spiff.ShowMenuOptions(ni,false))}})},showEmptySpaceContextMenu:function(ni,nj,nk){if(ss.isNullOrUndefined(this.get_selectedDataSource())){if(ss.isValue(nk)){nk()}return}var nl=new spiff.ShowMenuOptions($(ni.target),false);nl.cursorPosition={left:ni.clientX,top:ni.clientY};var nm=nl;tab.SchemaClientCommands.requestSchemaContextMenu(this.get_selectedDataSource().get_name(),nj,false,function(nn){tab.WidgetUtil.showMenu(nn,nm)})},showChangeDataTypeContextMenu:function(ni,nj,nk){if(ss.isNullOrUndefined(ni)||!ni.canChangeDataType&&!ni.canChangeSemanticRole){return}var nl=[ni.globalFieldName];tab.SchemaClientCommands.requestSchemaFieldChangeDataTypeMenu(ni.dataSourceName,nl,function(nm){var nn=tab.WidgetUtil.menuViewModelFromCommands(nm.commands,function(no){if($.isFunction(no.data)){no.data()}},nk,null,null);if(ss.isValue(nn)&&nn.get_menu().menuItems.length>0){nn.show(new spiff.ShowMenuOptions(nj,true))}})},showFieldContextMenu:function(ni,nj){var nk=function(nm){var nn=tab.WidgetUtil.menuViewModelFromCommands(nm,lc.$1,null,null,null);if(ss.isValue(nn)&&nn.hasMenuItems()){nn.show(new spiff.ShowMenuOptions(nj,true))}};var nl=!this.isSelected(ni)||this.get_selectedNodes().length===1;if(nl){this.$v(ni,nk)}else{this.$u(ni,nk)}},$v:function(ni,nj){var nk=function(np){nj(np.commands)};if(ni.isDrillPath){var nl=ni.hierarchyName;tab.SchemaClientCommands.requestSchemaDrillPathContextMenu(this.get_selectedDataSource().get_name(),nl,nj)}else if(ni.isFolder){var nm=ni.localName;var nn=lc.$0(ni.schemaSection);tab.SchemaClientCommands.requestSchemaFieldFolderContextMenu(ni.dataSourceName,nm,nn,nj)}else if(ni.isObject){tab.ObjectClientCommands.requestObjectContextMenu(this.get_selectedDataSource().get_name(),ni.localName,ni.globalFieldName,nk)}else{var no=ni.globalFieldName;tab.SchemaClientCommands.requestSchemaFieldContextMenu(this.get_selectedDataSource().get_name(),no,nj)}},$u:function(ni,nj){if(ni.isDrillPath||ni.isFolder||ni.isObject){return}var nk=this.$6();tab.SchemaClientCommands.requestSchemaMultipleFieldsContextMenu(this.get_selectedDataSource().get_name(),nk,nj)},$6:function(){var ni=[];var nj=this.get_selectedFields();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];if(nl.get_isDrillPath()||nl.get_isObject()||nl.get_isFolder()){continue}ni.push(nl.get_globalName())}return ni},$0:function(){ss.clear(this.$M)},$1:function(ni,nj){if(ss.isNullOrUndefined(this.$I.get_model())){return false}var nk=this.$I.get_model().findDataSourceFromGlobalFieldName(ni);if(ss.isNullOrUndefined(nk)){return false}if(nk.get_isParametersDataSource()){return true}return ss.referenceEquals(nk,nj)},$h:function(ni,nj,nk){if(ss.isNullOrUndefined(this.$I.get_model())||ss.isNullOrUndefined(nj)){return false}if(nj.get_isParametersDataSource()){return true}return ss.referenceEquals(nj,nk)},$q:function(ni,nj,nk){var nl=this.findNodePath$1(ni,nj);if(ss.isValue(nl)){if(ni.bool){this.raiseActionEvent$1(Object).call(this,this.$2$6,[nl])}this.$M.push(nl.get_node());nk.push(nl)}},$p:function(ni){var nj=this.get_selectableDataSources();var nk=this.get_selectedDataSource();var nl=null;for(var nm=0;nm<ni.length;nm++){var nn=ni[nm];var no=this.$I.get_model().findDataSourceFromGlobalFieldName(nn);if(ss.isNullOrUndefined(no)){continue}if(ss.referenceEquals(no,nk)){nl=nk;break}if(no.get_isParametersDataSource()){continue}if(ss.isNullOrUndefined(nl)&&ss.contains(nj,no)){nl=no}}if(ss.isValue(nl)){this.set_selectedDataSource(nl)}},$e:function(ni){if(ss.isNullOrUndefined(ni)){return false}if(!ss.keyExists(this.$L,lc.$3())){return true}var nj=this.$L[lc.$3()];if(ss.isNullOrUndefined(nj)){return false}if(!ss.referenceEquals(nj.get_name(),ni.get_name())){return true}if(this.$E!==ni.get_dataSourceLayoutPresModel().showStructure){return true}if(!_.isEqual(nj.get_rootFieldsNew(),ni.get_rootFieldsNew())){return true}return false},$z:function(ni,nj){if(!this.$e(ni)&&!nj){return false}this.clearSelection();this.$L[lc.$3()]=ni;this.$w();this.raiseActionEvent(this.$2$3);return true},$a:function(ni){this.raiseActionEvent(this.$2$2);var nj=_.find(this.get_selectableDataSources(),function(nk){return ss.referenceEquals(nk.get_name(),ni)});if(ss.isValue(nj)){this.$z(nj,false)}},$b:function(){if(!ss.staticEquals(this.$2$10,null)){this.$2$10()}},$c:function(){var ni=null;if(ss.isValue(this.get_dataSchema())){ni=this.get_dataSchema().get_activeDataSource();this.get_dataSchema().updatePublishedDsPermissions()}var nj=this.get_selectableDataSources();var nk=false;var nl=Object.keys(this.$L);_.each(nl,ss.mkdel(this,function(np){var nq=this.$L[np];if(ss.isValue(nq)&&!_.any(nj,function(nr){return ss.referenceEquals(nr.get_name(),nq.get_name())})){nk=true;delete this.$L[np]}}));var nm=ni||(this.$L[lc.$3()]||this.get_dataSchema().getDefaultDataSourceForSheet(lc.$3()));var nn=false;if(ss.isNullOrUndefined(nm)){if(!nk){return}nn=this.$z(null,true)}if(ss.isValue(nm)){var no=_.find(nj,function(np){return ss.referenceEquals(np.get_name(),nm.get_name())});if(ss.isValue(no)){nn=this.$z(no,false)}}if(!nn){this.$w()}},$w:function(){var ni=tabBootstrap.MetricsController.createContext('Update DataSchema',32,null);{this.$E=!ss.isNullOrUndefined(this.get_selectedDataSource())&&this.get_selectedDataSource().get_dataSourceLayoutPresModel().showStructure;if(ss.isValue(this.get_selectedDataSource())){this.$E=this.get_selectedDataSource().get_dataSourceLayoutPresModel().showStructure}var nj=this.$2();nj[3]=this.$5();var nk=this.$n(nj);this.$m();nk=this.$x(nk);this.$B();this.$l(nk)}ni.dispose()},$m:function(){var ni={};ni[0]=this.$3(4)+this.$3(5)+this.$3(6);ni[1]=this.$3(0);ni[2]=this.$3(1);ni[3]=this.$3(2);ni[4]=this.$3(3);this.$H=ni},$g:function(){return ss.isValue(this.get_selectedDataSource())&&this.get_selectedDataSource().get_shouldShowInSchemaViewer()},$2:function(){var ni={};lc.sectionsInOrder.forEach(function(nl){ni[nl]=[]});if(this.$g()){for(var nj=0;nj<lc.sectionsInOrder.length;nj++){var nk=lc.sectionsInOrder[nj];if(ss.isValue(this.get_selectedDataSource().get_rootFieldsNew()[nk])){ss.arrayAddRange(ni[nk],this.get_selectedDataSource().get_rootFieldsNew()[nk])}}}return ni},$5:function(){var ni=[];var nj=(ss.isValue(this.$I.get_model())?this.$I.get_model().get_parametersDataSource():null);if(ss.isValue(nj)){ss.arrayAddRange(ni,nj.get_rootFieldsNew()[3])}return ni},$n:function(ni){var nj=false;this.set_numNodesIfTopLevelExpanded(0);var nk=(ss.isValue(this.$K)?new kV(this.$K,this.get_searchFilterHelper()):null);lc.sectionsInOrder.forEach(ss.mkdel(this,function(nl){var nm=kR.create(this.get_currentLayout(),nl,ni[nl],this.get_selectedDataSource(),nk);if(nl!==2&&nl!==3){this.set_numNodesIfTopLevelExpanded(this.get_numNodesIfTopLevelExpanded()+nm.numNodesIfTopLevelExpanded)}if(!nj&&!_.isEqual(this.$G[nl],nm)){nj=true}this.$G[nl]=nm}));return nj},$x:function(ni){if(ss.isNullOrUndefined(this.$I.get_model())){return false}ni=ni||!_.isEqual(this.$D,this.$I.get_model().get_currentBlendingFields())||!_.isEqual(this.$C,this.$I.get_model().get_blendingFieldCandidates());this.$D=this.$I.get_model().get_currentBlendingFields();this.$C=this.$I.get_model().get_blendingFieldCandidates();return ni},$B:function(){if(ss.isValue(this.$I.get_model())&&!ss.contains(this.get_selectableDataSources(),this.get_selectedDataSource())){this.set_selectedDataSource(this.$I.get_model().getDefaultDataSourceForSheet(lc.$3()))}},$l:function(ni){if(ni){this.$j()}else{this.$k()}},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);this.get_dragFeedback().dispose()},$j:function(){this.raiseActionEvent(this.$2$1)},$k:function(){this.raiseActionEvent(this.$2$4)}},{$3:function(){return tsConfig.current_sheet_name},filterFieldsForViewing:function(ni,nj){return ni.filter(function(nk){return!nk.get_isUnnamedCalc()&&(!nk.get_isOrphaned()||!nk.get_isHidden())&&(!nk.get_isHidden()||!nk.get_isAutoHidden()&&nj)})},showDataSourceContextMenu:function(ni,nj){tab.SchemaClientCommands.requestSchemaDataSourceContextMenu(ni.get_name(),function(nk){var nl=tab.WidgetUtil.menuViewModelFromCommands(nk,lc.$1,null,null,null);if(ss.isValue(nl)){nl.show(new spiff.ShowMenuOptions(nj,true))}})},$0:function(ni){switch(ni){case 4:{return'common'}case 0:{return'dimensions'}case 1:{return'measure'}case 2:{return'groups'}case 3:{return'parameters'}case 5:case 6:default:{throw new ss.Exception('No FolderRole mapping available for DataSourceFieldSection '+ni)}}},$1:function(ni){if($.isFunction(ni.data)){ni.data()}}});var ld=global.tab.ScrollDirection=ss.mkEnum(a,'tab.ScrollDirection',{scrollUp:0,scrollDown:1,scrollLeft:2,scrollRight:3});var le=global.tab.SectionResizerComponent=ss.mkType(a,'tab.SectionResizerComponent',function(ni,nj){this.$0=null;this.$1=null;this.$2=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.$0=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}));this.$1=ss.mkdel(this,function(nk){this.$2=nk;this.$0(nk)})},{render:function(){return spiff.DOMElements.div({ref:this.$1,className:'resizer'})},startDrag:function(ni){if(!ss.staticEquals(this.props.dragInstanceFactory,null)){return this.props.dragInstanceFactory(this.$2,this.props.resizerIndex)}return null},acceptsDragType:function(){return 1}},{create:function(ni){return React.createElement(le,ni)}});var lf=global.tab.SegmentStatusProxy=ss.mkType(a,'tab.SegmentStatusProxy',null,null,{$1:function(ni){var nj=ni;tab.Application.get_commonBannerProvider().showSuccessBanner(nj.segmentCreationMessage,tab.Strings.DataCloudSegmentViewInSalesforce,function(){window.open(nj.segmentRedirectUrl,'_blank')},false)},$0:function(ni){var nj=ni;var nk=tab.UriUtil.makeHelpUri('online-segments','');tab.Application.get_commonBannerProvider().showErrorBanner(ss.formatString('{0} {1}',tab.Strings.DataCloudSegmentError,nj.segmentCreationMessage),tab.Strings.SegmentsLearnMoreLink,function(){window.open(nk,'_blank')},false)}});var lg=global.tab.SegmentValidationProxy=ss.mkType(a,'tab.SegmentValidationProxy',null,null,{$0:function(ni){var nj=ni;var nk=tab.UriUtil.makeHelpUri('online-segments','');tab.Application.get_commonBannerProvider().showErrorBanner(nj.segmentValidationError,tab.Strings.SegmentsLearnMoreLink,function(){window.open(nk,'_blank')},false)}});var lh=global.tab.SelectedItemSectionComponent=ss.mkType(a,'tab.SelectedItemSectionComponent',function(ni,nj){spiff.PureRenderComponent.$ctor1.call(this,ni,nj)},{render:function(){var ni=[this.$5(),this.$0(),this.$2(),this.$3(),this.$7(),this.$4()];return spiff.DOMElements.div({className:'tab-SectionSelectedItem',key:'selected-item-section'},ni)},$5:function(){return spiff.DOMElements.div({className:'tab-SelectedItemSectionTitle',key:'selected-item-title'},tab.Strings.LayoutPaneSelectedItemTitle)},$1:function(ni){return spiff.DOMElements.div({className:['tab-ZoneLayoutInfoItem','lessSpace'].join(' '),key:'layout-checkboxes'},ni)},$2:function(){var ni;if(tabBootstrap.FeatureFlags.isEnabled('DataDrivenZoneVisibility')){ni=[this.$6(),this.$8(),this.$b()]}else{ni=[this.$6(),this.$8()]}return this.$1(ni)},$4:function(){if(this.props.layoutPaneGeometryProps.shouldRenderPendingGeometry){return tab.RemoteComponent.renderZoneRectPreview({l:this.props.layoutPaneGeometryProps.x,t:this.props.layoutPaneGeometryProps.y,w:this.props.layoutPaneGeometryProps.sizeProps.width,h:this.props.layoutPaneGeometryProps.sizeProps.height},'pending-geometry')}return null},$0:function(){var ni='';if(ss.isValue(this.props.activeZoneDescription)){ni=ss.replaceAllString(this.props.activeZoneDescription,' ',' ')}return spiff.DOMElements.div({className:'tab-ZoneDescription',key:'layout-zone-description',title:this.props.activeZoneDescription},ni)},$7:function(){return React.createElement(hy,$.extend({key:'layout-spacing-section'},this.props.layoutPaneSpacingProps))},$3:function(){return hw.create($.extend({key:'layout-geometry-section'},this.props.layoutPaneGeometryProps))},$8:function(){var ni=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.zoneFloatingCheckboxProps);return spiff.DOMElements.div({className:'tab-SubSectionFloating',key:'toggle-zone-float-subsection'},ni)},$6:function(){var ni=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.zoneTitleCheckboxProps);return spiff.DOMElements.div({className:'tab-SubSectionShowTitle',key:'show-zone-title-subsection'},ni)},$b:function(){var ni=this.$9();var nj=this.$a();return spiff.DOMElements.div({className:'tab-SubSectionVisibilityFromField',key:'toggle-zone-visibility-from-value-subsection'},ni,nj)},$9:function(){var ni={label:this.props.zoneVisibilityFromFieldProps.label,checked:this.props.zoneVisibilityFromFieldProps.checked,handleChange:this.props.zoneVisibilityFromFieldProps.handleCheckboxToggle,testId:this.props.zoneVisibilityFromFieldProps.testId,disabled:this.props.zoneVisibilityFromFieldProps.disabled};var nj=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,ni);return spiff.DOMElements.div({className:'tab-SubSectionVisibilityFromFieldCheckbox',key:'toggle-zone-visibility-from-value-checkbox'},nj)},$a:function(){if(!this.props.zoneVisibilityFromFieldProps.checked){return null}var ni={selectedFieldNameAndCaption:this.props.zoneVisibilityFromFieldProps.selectedFieldNameAndCaption,fieldCaptionPairs:this.props.zoneVisibilityFromFieldProps.singleValueFieldCaptionPairs,handleSelect:this.props.zoneVisibilityFromFieldProps.handleFieldSelection,disabled:this.props.zoneVisibilityFromFieldProps.disabled,errorMessage:this.props.zoneVisibilityFromFieldProps.errorMessage};return React.createElement(ng,ni)}});var li=global.tab.SelectedItemSectionProps=ss.mkType(a,'tab.SelectedItemSectionProps',function(){this.zoneTitleCheckboxProps=null;this.zoneFloatingCheckboxProps=null;this.zoneVisibilityFromFieldProps=null;this.activeZoneDescription=null;this.layoutPaneGeometryProps=null;this.layoutPaneSpacingProps=null;this.clearSelectedZone=null;this.resizeProps=null});var lj=global.tab.SelectedItemSectionViewModel=ss.mkType(a,'tab.SelectedItemSectionViewModel',function(ni){this.$a=null;this.$9=null;this.$7=null;this.$6=null;this.$8=null;this.$4=null;this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[li]).call(this);this.$a=ni;this.$7=new ne(ni);this.$6=new mW(ni);this.$8=new nh(ni);this.$4=new hx(ni,1000);this.$5=new hA(ni,1000);this.disposables.add$2([this.addChildViewModel(this.$7),this.addChildViewModel(this.$6),this.addChildViewModel(this.$8),this.addChildViewModel(this.$4),this.addChildViewModel(this.$5),this.$7,this.$6,this.$8,this.$4,this.$5,this.$a.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addEventBinding(ss.mkdel(this,function(nj){nj.add_activeZoneChanged(ss.mkdel(this,this.$3));nj.add_activeZoneNameChanged(ss.mkdel(this,this.$3))}),ss.mkdel(this,function(nj){nj.remove_activeZoneChanged(ss.mkdel(this,this.$3));nj.remove_activeZoneNameChanged(ss.mkdel(this,this.$3))}))])},{$3:function(){this.$9='';var ni=this.$a.get_model();if(ss.isNullOrUndefined(ni)||!ni.get_isDashboard()){return}if(ni.get_hasActiveZone()){var nj=ni.getZone(ni.get_activeZoneID());if(ss.isValue(nj)){this.$9=nj.get_zoneDescription()}}else{this.$9=ni.get_sheetName()}this.incrementProps()},createUpdatedProps:function(){var ni=this.$a.get_model();var nj=new li;nj.zoneTitleCheckboxProps=this.$7.get_props();nj.zoneFloatingCheckboxProps=this.$6.get_props();nj.zoneVisibilityFromFieldProps=this.$8.get_props();nj.activeZoneDescription=this.$9;nj.layoutPaneGeometryProps=this.$4.get_props();nj.layoutPaneSpacingProps=this.$5.get_props();return nj}});var lk=global.tab.SendContextMenuEventCmd=ss.mkType(a,'tab.SendContextMenuEventCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return lk.cmdId},get_addInLocator:function(){return this.c['addInLocatorPresModel']},set_addInLocator:function(ni){this.c['addInLocatorPresModel']=ni},get_extensionContextMenuId:function(){return this.c['extensionContextMenuId']},set_extensionContextMenuId:function(ni){this.c['extensionContextMenuId']=ni},get_extensionContextMenuText:function(){return this.c['extensionContextMenuText']},set_extensionContextMenuText:function(ni){this.c['extensionContextMenuText']=ni},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'send-context-menu-event'},this.c))}});var ll=global.tab.SendContextMenuEventCmd$ResponseBuilder=ss.mkType(a,'tab.SendContextMenuEventCmd$ResponseBuilder',function(){this.$1={}},{build:function(){return this.$1},$0:function(){}});var lm=global.tab.ShapePickerTemplate=ss.mkType(a,'tab.ShapePickerTemplate',function(){this.rows=null;spiff.Template.call(this,$("<div class='tabAuthShapePicker'><div class='tabAuthShapePickerRows'></div></div>"));this.rows=this.getElementBySelector('.tabAuthShapePickerRows')});var ln=global.tab.ShapePickerView=ss.mkType(a,'tab.ShapePickerView',function(ni,nj){this.dom=null;this.shapePickerViewModel=null;ss.makeGenericType(spiff.BaseView$1,[lo]).call(this,ni,nj);this.dom=nj;this.shapePickerViewModel=ni},{onViewModelPropertyChanged:function(ni,nj){this.updateContent()},updateContent:function(){this.dom.rows.children().remove();var ni=null;var nj=0;var nk=this.shapePickerViewModel.get_shapes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(ss.isNullOrUndefined(ni)||nj===this.shapePickerViewModel.get_shapesPerRow()){ni=$("<div class='tabAuthShapePickerRow'></div>");this.dom.rows.append(ni);nj=0}spiff.ClickHandler.targetAndClick($("<span class='tabAuthShapePickerItem'></span>").addClass(ln.$0(nm)).toggleClass('tabAuthShapeSelected',nm.equals$1(this.shapePickerViewModel.get_selectedShape())).data('tabShape',nm).appendTo(ni),this.$7(nm));nj++}},$7:function(ni){return ss.mkdel(this,function(){this.shapePickerViewModel.set_selectedShape(ni)})}},{$0:function(ni){return'tabShape-'+(ss.isValue(ni.get_palette())?ni.get_palette().toString():'def')+'-'+ni.get_shapeType()}});var lo=global.tab.ShapePickerViewModel=ss.mkType(a,'tab.ShapePickerViewModel',function(){this.$1=[];this.$0=new tab.ShapeModel('filled','square');spiff.BaseViewModel.call(this);var ni=ss.mkdel(this,function(nj){this.$1.push(new tab.ShapeModel(nj,'circle'));this.$1.push(new tab.ShapeModel(nj,'square'));this.$1.push(new tab.ShapeModel(nj,'plus'));this.$1.push(new tab.ShapeModel(nj,'times'));this.$1.push(new tab.ShapeModel(nj,'asterisk'));this.$1.push(new tab.ShapeModel(nj,'diamond'));this.$1.push(new tab.ShapeModel(nj,'triangle'));this.$1.push(new tab.ShapeModel(nj,'down-triangle'));this.$1.push(new tab.ShapeModel(nj,'left-triangle'));this.$1.push(new tab.ShapeModel(nj,'right-triangle'))});ni(null);ni('filled')},{get_shapesPerRow:function(){return 5},get_shapes:function(){return this.$1},get_selectedShape:function(){return this.$0},set_selectedShape:function(ni){if(ss.referenceEquals(this.$0,ni)){return}this.$0=ni;this.notifyPropertyChanged('selectedShape')},get_viewType:function(){return ln},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ni){}});var lp=global.tab.SheetDragInstance=ss.mkType(a,'tab.SheetDragInstance',function(ni,nj,nk){this.dragged=null;eb.call(this,ni,ni.addAsFloating,mT.forNewZone(nk));this.dragged=ni;this.set_dragDropPresModel(nj)},{get_defaultDropCursor:function(){return spiff.CustomCursor.noOp},handleDrop:function(ni,nj,nk,nl,nm){tab.DashboardClientCommands.dropSheetOnDashboard(this.dragged.sheetName,ni,this.get_isFloating()).always(nj)}},{create:function(ni,nj,nk){var nl=new lp(ni,nj,nk);nl.initialize();return nl}});var lq=global.tab.SheetListItemComponent=ss.mkType(a,'tab.SheetListItemComponent',function(ni,nj){this.$f=null;this.$g=null;this.$e=false;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);var nk=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}));this.$f=ss.mkdel(this,function(nl){nk(nl);if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails')){this.$g=nl}});this.state={thumbnailVisible:false,thumbnail:'',replaceIconVisible:false};this.$e=false},{startDrag:function(ni){this.$c(ni);return this.props.actions.getDragInstance(this.props.sheet)},acceptsDragType:function(){return 1},render:function(){var ni=this.props.sheet;var nj=new EventUtils.EventHandleSpec;nj.doubleTap=ss.mkdel(this,this.$0);nj.tap=ss.mkdel(this,this.$c);nj.rightClick=ss.mkdel(this,this.$1);nj.hover=ss.mkdel(this,function(no){this.$5()});var nk=nj;if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails')){nk.hoverDelay=200}var nl=((this.state.thumbnailVisible&&tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails'))?ss.mkdel(this,this.$b)():null);var nm=((this.state.replaceIconVisible&&this.props.isReplaceSheetSource)?ss.mkdel(this,this.$a)():null);var nn=spiff.DOMElements.div({ref:this.$f},EventUtils.EventForwarder.div(nk,{className:'tabAuthSheetListItem'+(this.props.selected?' selected':''),title:ni.name,key:'key'+ni.name,onMouseLeave:ss.mkdel(this,this.$6)},nl,this.$8(ni),this.$9(ni.name),nm,this.$7()));return nn},$9:function(ni){return spiff.DOMElements.span({key:'name',className:'tabAuthSheetListItemName'},ni)},$8:function(ni){return spiff.DOMElements.span.apply(null,[{key:'icon',className:'tabAuthSheetListItemIcon'+(ni.isDashboard?' dashboard':'')+(ni.isIncluded?' included':'')}].concat(null))},$7:function(){var ni=new EventUtils.EventHandleSpec;ni.tap=ss.mkdel(this,this.$4);return EventUtils.EventForwarder.span.apply(null,[ni,{key:'goto',className:'goToSheetIcon',title:tab.Strings.GoToSheet}].concat(null))},$a:function(){var ni=new EventUtils.EventHandleSpec;ni.tap=ss.mkdel(this,this.$d);return EventUtils.EventForwarder.span.apply(null,[ni,{key:'replaceSheet',className:'replaceSheetIcon',title:tab.Strings.SwapSheets}].concat(null))},$d:function(ni){this.props.actions.replaceSheet(this.props.sheet);ni.stopPropagation()},$4:function(ni){this.props.actions.goToSheet(this.props.sheet);ni.stopPropagation()},$c:function(ni){this.props.actions.select(this.props.sheet)},$0:function(ni){this.props.actions.doubleClick(this.props.sheet)},$1:function(ni){var nj=ReactDOM.findDOMNode(this);var nk=this.props.actions.showContextMenu;var nl=this.props.sheet;var nm=new spiff.ShowMenuOptions($(nj),false);nm.cursorPosition={left:ni.clientX,top:ni.clientY};nk(nl,nm)},$5:function(){this.$e=true;this.setState({replaceIconVisible:true});if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails')){if(ss.isValue(this.props.sheet)&&!this.state.thumbnailVisible){var ni=this.props.sheet.name;var nj=this.props.actions.getThumbnail(ni);nj.done(ss.mkdel(this,function(nk){this.$3(nk)})).fail(ss.mkdel(this,function(){}))}}},$6:function(ni){this.$e=false;if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails')){if(this.state.thumbnailVisible){this.setState({thumbnailVisible:false})}}},$b:function(){var ni={isDashboard:this.props.sheet.isDashboard,isHidden:this.props.sheet.isHidden,name:this.props.sheet.name};var nj={anchorElement:this.$g,anchorOrigin:{vertical:'top',horizontal:'right'},stackedOrigin:{vertical:'top',horizontal:'left'}};var nk=mh.createThumbnailOverlayProps(nj,ni,this.state.thumbnail);return React.createElement(SharedWidgets.Overlay,nk)},$3:function(ni){if(tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_HoverPreviewThumbnails')&&this.$e){this.setState({thumbnailVisible:true,thumbnail:ni})}},$2:function(){if(this.props.selected){var ni=ReactDOM.findDOMNode(this);var nj=$(ni).closest("[role='listbox']").get(0);spiff.ScrollTo.elementInContainer(ni,nj)}},componentDidUpdate:function(){this.$2()},componentDidMount:function(){this.$2()}});var lr=global.tab.SheetListViewModel=ss.mkType(a,'tab.SheetListViewModel',function(ni,nj,nk){this.$h=null;this.$i=null;this.$g=null;this.$k=null;this.$j=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$j=null;this.$i=nj;this.$h=ni;this.$g=nk;tab.ApplicationModel.get_instance().registerNotificationHandler('doc:set-add-sheet-is-floating-notification-event',ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){tab.ApplicationModel.get_instance().unRegisterNotificationHandler('doc:set-add-sheet-is-floating-notification-event',ss.mkdel(this,this.$7))}));this.disposables.add$1(this.$h.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$c)).addEventBinding(ss.mkdel(this,function(nl){if(ss.isValue(nl.sheetListModel)){nl.sheetListModel.add_sheetListUpdated(ss.mkdel(this,this.$c));nl.add_activeZoneChanged(ss.mkdel(this,this.$9))}if(ss.isValue(nl.get_flipboardNavModel())){nl.get_flipboardNavModel().add_newFlipboardNav(ss.mkdel(this,this.$a))}}),ss.mkdel(this,function(nl){if(ss.isValue(nl.sheetListModel)){nl.sheetListModel.remove_sheetListUpdated(ss.mkdel(this,this.$c));nl.remove_activeZoneChanged(ss.mkdel(this,this.$9))}if(ss.isValue(nl.get_flipboardNavModel())){nl.get_flipboardNavModel().remove_newFlipboardNav(ss.mkdel(this,this.$a))}})))},{get_selectedSheet:function(){return this.$g.getSelectedSheet(this.$j)},set_selectedSheet:function(ni){var nj=this.$g.determineSelectedSheet(this.$j,ni);if(!ss.referenceEquals(nj,this.$j)){this.$j=nj;this.incrementProps()}},get_addAsFloating:function(){return ss.isValue(this.$i)&&this.$i.get_addNewZoneAsFloating()},$f:function(){return ss.isValue(this.$h.get_model())&&ss.isValue(this.$h.get_model().pm)&&this.$h.get_model().pm.isStory},createInitialProps:function(){return{actions:{doubleClick:ss.mkdel(this,this.$6),getDragInstance:ss.mkdel(this,this.$4),goToSheet:ss.mkdel(this,this.$5),replaceSheet:ss.mkdel(this,this.$d),select:ss.mkdel(this,function(ni){this.set_selectedSheet(ni)}),clearSelection:ss.mkdel(this,function(){this.set_selectedSheet(null)}),showContextMenu:ss.mkdel(this,this.$e),getThumbnail:function(ni){return ce.get_thumbnailCache().getThumbnail(ni)}}}},createUpdatedProps:function(){return{selectedSheet:this.get_selectedSheet(),items:this.$k,hasReplaceableSheet:this.$8()}},$c:function(){if(ss.isValue(this.$h.get_model())&&ss.isValue(this.$h.get_model().sheetListModel)){this.$k=_.map(this.$h.get_model().sheetListModel.get_sheets(),ss.mkdel(this,function(ni){return{data:ni.pm}}))}else{this.$k=[]}this.set_selectedSheet(this.$g.onUpdatedSheetList(this.get_selectedSheet()));this.incrementProps()},$9:function(){var ni=this.$g.onActiveZoneChanged(this.get_selectedSheet());this.$j=ni;this.incrementProps()},$a:function(){var ni=this.$g.onNewFlipboardNav(this.get_selectedSheet());if(!ss.referenceEquals(ni,this.get_selectedSheet())){this.set_selectedSheet(ni);this.incrementProps()}},$6:function(ni){this.$g.onDoubleClicked(ni,this.get_addAsFloating())},$5:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrEmptyString(ni.name)){return}tab.SheetClientCommands.goToSheet(ni.name,null,null)},$d:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrEmptyString(ni.name)){return}if(ss.isNullOrUndefined(this.$h.get_model())||this.$h.get_model().get_activeZoneID()===0){return}var nj=this.$h.get_model().get_activeZoneID();this.$b(ni);tab.DashboardZoneCommands.replaceZone(nj,ni.name)},$b:function(ni){var nj=this.$h.get_model();var nk=this.$3();if(ss.isNullOrUndefined(nj)||nj.get_activeZoneID()===0||ss.isNullOrUndefined(nk)){return}var nl=new kw;nl.currentDeviceLayout=nj.get_currentDeviceLayout();nl.newZoneType='viz';nl.isSheetHidden=ni.isHidden;nl.numOfZonesInDashboard=(ss.isValue(nj.zonesModel)?nj.zonesModel.numOfZones():0);nl.currentZoneType=nk.get_zoneType();nl.isFloating=nk.get_isFloating();var nm=nl;kx.logReplaceZoneEvent(nm)},$3:function(){if(ss.isValue(this.$h.get_model())&&this.$h.get_model().get_activeZoneID()!==0){return this.$h.get_model().getZone(this.$h.get_model().get_activeZoneID())}return null},$8:function(){var ni=this.$3();return!this.$f()&&(ss.isValue(ni)&&ni.get_zoneType()==='viz')},$e:function(ni,nj){var nk=function(nl){var nm=nl.commands;var nn=tab.WidgetUtil.menuViewModelFromCommands(nm,tab.WidgetUtil.commandMenuItemClicked,null,null,null);nn.show(nj)};tab.SheetClientCommands.getSheetListContextMenu(ni.name,this.get_addAsFloating(),nk)},$4:function(ni){return this.$g.getDragInstance(ni)},$7:function(ni,nj){var nk=ni;this.$i.set_addNewZoneAsFloating(nk.isFloating)}},{findSheetListItemByName:function(ni,nj){return _.find(ni,function(nk){return ss.referenceEquals(nk.get_name(),nj)})}});var ls=global.tab.SheetTabTypeExtensions=ss.mkType(a,'tab.SheetTabTypeExtensions',null,null,{toSheetType:function(ni){switch(ni){case'dashboard':{return'dashboard'}case'story':{return'story'}default:{return'worksheet'}}}});var lt=global.tab.ShelfCardTemplate=ss.mkType(a,'tab.ShelfCardTemplate',function(){this.pillHolder=null;this.pillContent=null;this.dropTarget=null;spiff.Template.call(this,$(lt.template));this.pillHolder=this.getElementBySelector('.tabAuthShelfPills');this.pillContent=this.getElementBySelector('.tabAuthShelfPillsContent');this.dropTarget=this.getElementBySelector('.tabAuthShelfDropTarget')},{get_dividers:function(){return this.getElementsBySelector('.tabAuthShelfPillDivider')},get_clickSpacer:function(){return this.getElementsBySelector('.tabAuthShelfClickArea')},placeholdersIn:function(ni){return ni.find('.tabAuthShelfPillDividerPlaceholder')}});var lu=global.tab.ShelfItemDragInstance=ss.mkType(a,'tab.ShelfItemDragInstance',function(ni,nj){this.finalDrop=$.Deferred();this.drag=null;EventUtils.DragInstance.call(this,ni,nj);this.finalDrop.fail(ss.mkdel(this,function(nk){EventUtils.DragDropManager.cancelDrag(this)}))},{get_dropPresModels:function(){return((this.finalDrop.state()==='resolved')?this.drag.shelfDropModels:[])},get_drop:function(){return this.finalDrop}});var lv=global.tab.ShelfView=ss.mkType(a,'tab.ShelfView',function(ni){this.shelfViewModel=null;this.dom=null;this.$t=new tab.DisposableHolder;this.$y=null;this.$s=[];this.$z=null;this.$u=0;this.$v=0;this.$x=null;this.$w=null;this.$r=null;ss.makeGenericType(cH,[lw]).call(this,ni,new lt);this.shelfViewModel=ni;this.shelfViewModel.add_shelfChanged(ss.mkdel(this,this.initFromModel));this.shelfViewModel.add_dropStateChanged(ss.mkdel(this,this.$c));this.shelfViewModel.add_dragOverDropPositionChanged(ss.mkdel(this,this.$b));this.shelfViewModel.add_openTypeInPill(ss.mkdel(this,this.$e));this.shelfViewModel.add_updateScrollContent(ss.mkdel(this,this.updateScroller));this.shelfViewModel.add_updateShelfLayout(ss.mkdel(this,this.updateShelfLayout));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.shelfViewModel.remove_shelfChanged(ss.mkdel(this,this.initFromModel));this.shelfViewModel.remove_dropStateChanged(ss.mkdel(this,this.$c));this.shelfViewModel.remove_dragOverDropPositionChanged(ss.mkdel(this,this.$b));this.shelfViewModel.remove_openTypeInPill(ss.mkdel(this,this.$e));this.shelfViewModel.remove_updateScrollContent(ss.mkdel(this,this.updateScroller));this.shelfViewModel.remove_updateShelfLayout(ss.mkdel(this,this.updateShelfLayout))})));if(tabBootstrap.Affordances.isOn('authoring_TypeInPill')){this.disposables.add$1(spiff.TableauClickHandler.target(this.element[0]).onDoubleClick(function(){ni.insertAdHocCalc()}))}this.dom=this.get_template();EventUtils.DragDropManager.attachDropTarget(this.dom.dropTarget,ni);this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,this.handleWindowResize)));this.$x=new l;this.initFromModel(ni)},{get_preferredWidth:function(){if(this.$v===0){this.$l()}return this.$v},get_scrollableContentPreferredHeight:function(){if(this.$u===0){this.$l()}return this.$u},get_typeInPillView:function(){return this.$z},get_scrollContainerSize:function(){return((this.shelfViewModel.get_orientation()===0)?tab.DoubleUtil.roundToInt(this.dom.pillHolder.outerHeight()):tab.DoubleUtil.roundToInt(this.dom.pillHolder.outerWidth()))},get_scroll:function(){return((this.shelfViewModel.get_orientation()===0)?tab.DoubleUtil.roundToInt(this.dom.pillHolder.scrollTop()):tab.DoubleUtil.roundToInt(this.dom.pillHolder.scrollLeft()))},set_scroll:function(ni){var nj=this.$p();var nk=Math.min(Math.max(ni,nj.min),nj.max);if(this.shelfViewModel.get_orientation()===0){this.dom.pillHolder.scrollTop(nk)}else{this.dom.pillHolder.scrollLeft(nk)}this.updateScroller()},$p:function(){var ni=this.get_scrollContainerSize();var nj=this.$q();var nk={};nk.max=0;nk.min=0;if(nj>ni){nk.max=nj-ni}return nk},$q:function(){return((this.shelfViewModel.get_orientation()===0)?this.get_scrollableContentPreferredHeight():this.get_preferredWidth())},$o:function(){return this.get_scroll()>0},$n:function(){return this.get_scroll()<this.$p().max},updateShelfLayout:function(){if(this.shelfViewModel.get_orientation()===1){this.$l();this.$k();this.$m()}this.$8();this.updateScroller()},updateScroller:function(){var ni=this.get_scrollContainerSize();var nj=this.$q();if(ni<nj){this.$w.set_disabled(!this.$o());this.$r.set_disabled(!this.$n());this.element.addClass('hasScroll');this.$x.domRoot.show()}else{this.element.removeClass('hasScroll');this.$x.domRoot.hide()}},setScrollableContentActualHeight:function(ni){this.dom.pillHolder.css('height',(ss.isValue(ni)?(ni+'px'):''));this.$8();this.updateScroller()},$8:function(){this.set_scroll(0)},dispose:function(){$(window).off(this.get_eventNamespace());this.$x.dispose();this.$t.dispose();if(ss.isValue(this.$z)){this.$z.dispose();this.$z=null}ss.makeGenericType(spiff.BaseView$1,[lw]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$j();this.updateScroller()},ensureItemInView:function(ni){var nj=this.shelfViewModel.get_orientation()===1;var nk=(nj?tab.DoubleUtil.roundToInt(ni.position().left):tab.DoubleUtil.roundToInt(ni.position().top));var nl=nk+(nj?tab.DoubleUtil.roundToInt(ni.outerWidth(true)):tab.DoubleUtil.roundToInt(ni.outerHeight(true)));var nm=this.get_scrollContainerSize();if(nk<0){this.set_scroll(nk)}else if(nl>nm){this.set_scroll(this.get_scroll()+(nl-nm+32))}},$j:function(){if(!this.addedToDom){return}if(ss.isValue(this.$z)){this.$z.onAddedToDom()}this.$l();this.$k();this.$m();this.raiseScrollContentChanged();if(ss.isValue(this.$z)){this.ensureItemInView(this.$z.element)}},$7:function(ni){if(this.shelfViewModel.canAddMorePills()){var nj=$(lt.templatePillDivider);if(ni===0){nj.addClass('tabAuthShelfPillDividerFirst')}this.dom.pillContent.append(nj);this.$s.push(nj);EventUtils.DragDropManager.attachDropTarget(nj,this.shelfViewModel.createPillDividerDropTarget(ni))}},initFromModel:function(ni){var nj=this.get_scroll();if(!ss.isValue(ni.get_pills())){return}this.$t.dispose();this.dom.pillContent.toggleClass('tabAuthPillsHorizOverflow',false);this.dom.get_clickSpacer().remove();this.dom.get_dividers().remove();ss.clear(this.$s);var nk=false;var nl=-1;var nm=false;if(this.shelfViewModel.get_hasTypeInPill()){nl=this.shelfViewModel.get_typeInPillCalculation().get_shelfPosition();if(ss.isNullOrUndefined(this.$z)){nm=true;this.$z=tab.ObjectRegistry.newView(mp).call(null,[this.shelfViewModel.get_typeInPillCalculation()])}}else if(ss.isValue(this.$z)){this.$z.dispose();this.$z=null}var nn=0;var no=ni.get_pills();for(var np=0;np<no.length;np++){var nq=no[np];this.$7(nn);if(nn===nl){if(nm){this.$z.addToDom(this.dom.pillContent)}this.$z.set_pillViewModel(nq)}else{var nr=tab.ObjectRegistry.newView(jg).call(null,[nq]);this.$t.add$1(nr);if(nn<nl&&!nm){nr.element.insertBefore(this.$z.element)}else{this.dom.pillContent.append(nr.element)}nk=nk||nr.get_hasExternalIcon()}nn++}this.$7(nn);if(ss.isValue(ni.get_shelf())){this.dom.domRoot.attr('title',ni.get_shelf().get_tooltip())}if(nl>=nn){if(nm){this.$z.addToDom(this.dom.pillContent)}this.$z.set_pillViewModel(null)}if(this.shelfViewModel.canAddMorePills()){var ns=$(lt.templateClickSpacer);this.dom.pillContent.append(ns)}this.dom.get_dividers().hide();this.dom.pillContent.toggleClass('tabHasExternalIcon',nk);this.$j();this.set_scroll(nj);this.updateScroller();if(ss.isNullOrUndefined(this.$w)){this.$w=this.$9(this.$x.$2,ss.mkdel(this,this.$f));this.$w.element.html(((ni.get_orientation()===0)?'&#9650':'&#9664'))}if(ss.isNullOrUndefined(this.$r)){this.$r=this.$9(this.$x.$1,ss.mkdel(this,this.$d));this.$r.element.html(((ni.get_orientation()===0)?'&#9660':'&#9654'))}this.element.append(this.$x.domRoot)},$9:function(ni,nj){var nk=new spiff.Button(ni);nk.add_click(nj);this.disposables.add$1(new tab.CallOnDispose(function(){nk.remove_click(nj);nk.dispose()}));return nk},$d:function(){if(!this.$n()){return}this.$a(true)},$f:function(){if(!this.$o()){return}this.$a(false)},$a:function(ni){var nj=((this.shelfViewModel.get_orientation()===0)?40:100);var nk=nj*(ni?1:-1);this.set_scroll(this.get_scroll()+nk)},$e:function(ni){if(ss.isNullOrUndefined(this.$z)){return}if(ni&&this.shelfViewModel.get_orientation()===1){this.$l();this.$z.animateOpen(this.$i(),this.$h(),this.$g())}else{this.$z.onOpenCompleted()}this.ensureItemInView(this.$z.element)},$l:function(){this.dom.pillHolder.css('position','absolute');this.$u=tab.DoubleUtil.roundToInt(this.dom.pillContent.outerHeight(true));this.$v=tab.DoubleUtil.roundToInt(this.dom.pillContent.outerWidth(true));this.dom.pillHolder.css('position','relative')},$b:function(ni){if(ss.isValue(ni)&&(ni.shelfDropAction||'insert')==='insert'){if(ss.isValue(ni.shelfPosIndex)&&ni.shelfPosIndex<this.$s.length){var nj=this.$s[ni.shelfPosIndex];if(ss.referenceEquals(this.$y,nj)){return}if(ss.isValue(this.$y)){this.dom.placeholdersIn(this.$y).hide()}this.dom.placeholdersIn(nj).show();this.$y=nj}}else{this.$y=null;this.dom.placeholdersIn(this.dom.pillHolder).hide()}},$c:function(ni){switch(ni){case 0:case 2:{if(ss.isValue(this.$y)){this.dom.placeholdersIn(this.$y).toggle('fast');this.$y=null}this.dom.get_dividers().hide();break}case 1:{this.dom.get_dividers().css('display','');break}}},handleWindowResize:function(ni){this.updateShelfLayout()},$k:function(){var ni=this.dom.pillContent.hasClass('tabAuthPillsHorizOverflow');var nj=0;if(ss.isValue(this.shelfViewModel.get_pills())){nj=this.shelfViewModel.get_pills().length;if(ss.isValue(this.$z)&&this.shelfViewModel.get_typeInPillCalculation().get_shelfPosition()<this.shelfViewModel.get_pills().length){nj--}}var nk=this.get_preferredWidth()+(ni?(nj*50):0);var nl=this.shelfViewModel.get_orientation()===1&&nk>this.dom.pillHolder.outerWidth();this.dom.pillContent.toggleClass('tabAuthPillsHorizOverflow',nl);if(ni!==nl){this.$l()}},$m:function(){if(ss.isNullOrUndefined(this.$z)){return}if(this.shelfViewModel.get_orientation()===1){var ni=this.$h();var nj=this.$g();if(this.shelfViewModel.get_animateTypeInPillPending()){var nk=this.$i();ni=nk;nj=nk}this.$z.setMinMaxWidth(ni,nj,true);this.$l()}},$g:function(){var ni=this.get_preferredWidth();if(ss.isValue(this.$z)){ni-=tab.DoubleUtil.roundToInt(this.$z.get_dom().domRoot.outerWidth())}var nj=tab.DoubleUtil.roundToInt(this.dom.pillContent.outerWidth())-ni-tab.DoubleUtil.roundToInt(this.dom.get_clickSpacer().outerWidth());return Math.max(nj,108)},$h:function(){return Math.min(this.$g(),250)},$i:function(){var ni=12;var nj=ss.isValue(this.shelfViewModel.get_pills())&&this.shelfViewModel.get_typeInPillCalculation().get_shelfPosition()<this.shelfViewModel.get_pills().length;if(nj){var nk=this.dom.domRoot.find('.tabAuthShelfPill');ni=((ss.isValue(nk)&&nk.length>0)?tab.DoubleUtil.roundToInt(nk.first().outerWidth()):150)}return ni}});var lw=global.tab.ShelfViewModel=ss.mkType(a,'tab.ShelfViewModel',function(){this.$j=[];this.$k=null;this.$l=null;this.$m=null;this.$n=null;this.$i=false;this.$d=false;this.$g=0;this.$f=null;this.$o=true;this.$e=false;this.$h=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;spiff.BaseViewModel.call(this);this.$l='none-shelf';EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.dragEnded));var ni=tab.ApplicationModel.get_instance();this.$m=cB.new$1(ni.modelInstance(tab.TypeInCalculationModel).call(ni));this.$m.set_isAdhocVM(true);this.$m.add_calculationEdited(ss.mkdel(this,this.$3));this.$m.add_calculationCanceled(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$m.remove_calculationEdited(ss.mkdel(this,this.$3));this.$m.remove_calculationCanceled(ss.mkdel(this,this.$2));this.$m=tab.MiscUtil.dispose$1(this.$m)})));this.$c()},{add_updateScrollContent:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_updateScrollContent:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_updateShelfLayout:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_updateShelfLayout:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},add_shelfChanged:function(ni){this.$2$3=ss.delegateCombine(this.$2$3,ni)},remove_shelfChanged:function(ni){this.$2$3=ss.delegateRemove(this.$2$3,ni)},add_visibleChanged:function(ni){this.$2$4=ss.delegateCombine(this.$2$4,ni)},remove_visibleChanged:function(ni){this.$2$4=ss.delegateRemove(this.$2$4,ni)},add_dropStateChanged:function(ni){this.$2$5=ss.delegateCombine(this.$2$5,ni)},remove_dropStateChanged:function(ni){this.$2$5=ss.delegateRemove(this.$2$5,ni)},add_dragOverDropPositionChanged:function(ni){this.$2$6=ss.delegateCombine(this.$2$6,ni)},remove_dragOverDropPositionChanged:function(ni){this.$2$6=ss.delegateRemove(this.$2$6,ni)},add_openTypeInPill:function(ni){this.$2$7=ss.delegateCombine(this.$2$7,ni)},remove_openTypeInPill:function(ni){this.$2$7=ss.delegateRemove(this.$2$7,ni)},get_isVisible:function(){return this.$o},set_IsVisible:function(ni){if(this.$o===ni){return}this.$o=ni;this.raiseActionEvent(this.$2$4)},get_dropTarget:function(){return this},get_title:function(){var ni=tabBootstrap.ShelfConfigurations.getShelfConfig(this.get_shelfType());if(ss.isValue(ni)&&ss.isValue(ni.titleStringId)){return tab.Strings.getString(ni.titleStringId)}return''},get_cardBackgroundColor:function(){var ni=tabBootstrap.ShelfConfigurations.getShelfConfig(this.get_shelfType());if(ss.isValue(ni)&&ss.isValue(ni.backgroundColor)){return ni.backgroundColor}return null},get_name:function(){var ni=this.get_shelfType().toString();return ss.replaceAllString(ni,'-shelf','')},get_viewModel:function(){return this},get_collapsedTitleDetail:function(){return(ss.isValue(this.$j)?this.$j.length.toString():'')},get_viewType:function(){return lv},get_pills:function(){return this.$j},get_shelfType:function(){if(ss.isNullOrUndefined(this.$k)){return this.$l}return this.$k.get_shelfType()},set_shelfType:function(ni){this.$l=ni},get_orientation:function(){switch(this.get_shelfType()){case'columns-shelf':case'rows-shelf':{return 1}default:{return 0}}},get_shelf:function(){return this.$k},set_shelf:function(ni){if(ss.isValue(this.$k)){this.$k.remove_shelfChanged(ss.mkdel(this,this.$a))}this.$k=ni;if(ss.isValue(this.$m)){this.$m.set_viewModelShelfType(this.get_shelfType())}if(ss.isValue(this.$k)){this.$k.add_shelfChanged(ss.mkdel(this,this.$a));this.$c();this.updatePills();this.set_IsVisible(this.$k.get_isVisible())}},get_typeInPillCalculation:function(){return(this.get_hasTypeInPill()?this.$m:null)},get_dropState:function(){return this.$g},$0:function(ni){if(this.$g===ni){return}this.$g=ni;if(ss.isValue(this.$2$5)){this.$2$5(this.$g)}},get_dragOverDropPosition:function(){return this.$f},set_dragOverDropPosition:function(ni){if(ss.referenceEquals(this.$f,ni)){return}this.$f=ni;if(ss.isValue(this.$2$6)){this.$2$6(ni)}},get_feedbackType:function(){return'dropfeedbackuponentry'},get_hasTypeInPill:function(){return ss.isValue(this.$m)&&this.$m.get_hasCalculation()&&this.$m.get_shelfType()===this.get_shelfType()&&(this.get_shelfType()!=='encoding-shelf'||this.$k.get_paneId()===this.$m.get_shelfPaneSpecId())},get_animateTypeInPillPending:function(){return this.$d},canAddMorePills:function(){var ni=tabBootstrap.ShelfConfigurations.getShelfConfig(this.get_shelfType());if(ss.isValue(ni)&&ss.isValue(ni.maxPills)&&ss.Nullable$1.ge(this.get_pills().length,ni.maxPills)){return false}switch(this.get_shelfType()){case'columns-shelf':case'rows-shelf':case'pages-shelf':case'filter-shelf':case'encoding-shelf':case'measures-shelf':{return true}default:{return false}}},createPillDividerDropTarget:function(ni){return new q(this,ni)},matchingDropsFrom:function(ni){var nj=_.find(ni.get_dropPresModels(),ss.mkdel(this,function(nk){return nk.shelfType===this.get_shelfType()}));if(ss.isValue(nj)){if(ss.isInstanceOfType(ni,jd)&&!lw.canAcceptPillDragInstance(ni,this.get_shelfType())){return null}else if(ss.isInstanceOfType(ni,cr)&&tabBootstrap.Affordances.isOff('authoring_DragAndDrop_CalcText')){return null}}return nj},canAccept:function(ni,nj){var nk=ss.safeCast(ni,lu);if(!ni.get_hasPayload()||ss.isNullOrUndefined(nk)){return false}if(nk.get_drop().state()!=='resolved'){this.set_dragOverDropPosition(null);if(ss.isInstanceOfType(nk,jd)){return lw.canAcceptPillDragInstance(nk,this.get_shelfType())}else if(ss.isInstanceOfType(nk,cr)){return tabBootstrap.Affordances.isOn('authoring_DragAndDrop_CalcText')}else if(ss.isInstanceOfType(nk,be)){return true}return false}var nl=this.matchingDropsFrom(nk);if(ss.isNullOrUndefined(nl)){this.set_dragOverDropPosition(null);return false}var nm=this.$6(nl,nj);this.set_dragOverDropPosition(nm);return ss.isValue(nm)},dragOver:function(ni){return this.dragOver$1(ni,null)},dragOver$1:function(ni,nj){this.$e=true;this.$h=nj;var nk=this.canAccept(ni,nj);if(!nk){return null}if(ss.isValue(this.$f)&&this.$f.shelfDropAction==='replace'&&this.$f.shelfPosIndex<this.$j.length){return this.$j[this.$f.shelfPosIndex]}return this},dragExit:function(ni){this.$e=false;this.$h=null;this.set_dragOverDropPosition(null)},getDropTarget:function(ni){return this},acceptDrop:function(ni){return this.acceptDrop$1(ni,null)},acceptDrop$1:function(ni,nj){var nk=$.Deferred();if(!ss.isInstanceOfType(ni,cp)){return nk.resolve(false)}ni.get_drop().done(ss.mkdel(this,function(nl){var nm=ss.safeCast(nl,cp);var nn=this.canAccept(nm,nj);var no=this.matchingDropsFrom(nm);var np=this.$6(no,nj);var nq=-1;if(ss.isValue(np)){nq=np.shelfPosIndex}if(!nn){}else if(nm.hasOnlyPills()){var nr=nm.get_pill();if(nr.shelfVM.get_shelfType()===this.get_shelfType()){var ns=nr.get_indexInShelf();var nt=nq===ns+1&&!ni.isCopyDrag;if(ns>=0&&(nq===ns||nt)){nn=false}}var nu=lw.filterFieldsToDropUsingShelfConfig(nm,this.get_shelfType(),this.$j.length,false);if(nu.length===0){nn=false}if(nn){var nv=nm.dropPositionForShelf(this,nq);if(this.get_shelfType()==='filter-shelf'){var nw={shelfType:nr.shelfVM.get_shelfType(),shelfPosIndex:nr.get_indexInShelf(),shelfDropAction:'insert',paneSpec:nr.shelfVM.get_shelf().get_paneId()};nv.shelfDropAction='insert';tab.ShelfClientCommands.launchFilterDialog(nr.get_pill().get_column().get_globalName(),'drag-drop-shelf',nv,nw,false,nm.isCopyDrag)}else{tab.ShelfClientCommands.moveShelfPill(nr.shelfVM.get_shelf(),this.get_shelf(),nr.get_pill(),nv,nm.isCopyDrag)}}}else if(nm.hasOnlyFields()){var nx=lw.filterFieldsToDropUsingShelfConfig(nm,this.get_shelfType(),this.$j.length,false);if(nx.length===0){nn=false}else{var ny=nm.dropPositionForShelf(this,nq);if(this.get_shelfType()==='filter-shelf'&&nx.length===1){ny.shelfDropAction='insert';tab.ShelfClientCommands.launchFilterDialog(nx[0].get_globalName(),'drag-drop-schema',ny,null,nm.isRightDrag,nm.isCopyDrag)}else if(nm.shouldGetAggregationOfField(nx)){nm.selectAggregationForField(this.get_shelfType(),nx[0],ss.mkdel(this,function(nz){var nA=[];nA.push(nz.selectedField);nm.addShelfField(this,nA,tab.EncodingTypeUtils.createInvalid(),ny,nz.isRelativeDate)}))}else{nm.addShelfField(this,nx,tab.EncodingTypeUtils.createInvalid(),ny,false)}}}nk.resolve(nn)})).fail(function(nl){nk.reject(false)});return nk},getDropCursor:function(ni){if(!ss.isInstanceOfType(ni,cp)){return spiff.CustomCursor.noOp}var nj=ni;var nk=lw.filterFieldsToDropUsingShelfConfig(nj,this.get_shelfType(),this.$j.length,false);if(ss.isNullOrUndefined(nk)||nk.length===0){return spiff.CustomCursor.noOp}else if(nj.hasOnlyPills()&&!ni.isCopyDrag){return spiff.CustomCursor.move}return spiff.CustomCursor.copy},dispose:function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.dragEnded));if(ss.isValue(this.$k)){this.$k.remove_shelfChanged(ss.mkdel(this,this.$a))}this.$4();spiff.BaseViewModel.prototype.dispose.call(this)},dragEnded:function(ni){this.$e=false;this.$h=null;this.$0(0)},dragStarted:function(ni){if(ni.get_dragType()==='dragdrop'){if(ss.isInstanceOfType(ni,lu)){ni.get_drop().always(ss.mkdel(this,this.$7));if(ni.get_readyToDrop()){this.$0((this.canAccept(ni,null)?1:2))}}}else{this.$0(0)}},insertAdHocCalc:function(){var ni=$.Deferred();if(this.get_hasTypeInPill()||!this.get_shelf().get_canHaveTypeInPill()){ni.resolve();return ni}cc.selectedDataSourceNameAsync().done(ss.mkdel(this,function(nj){tab.CalculationCommands.createAdHocCalculation(nj,this.$k.get_shelfType(),this.$j.length,this.$k.get_paneId());ni.resolve()}));return ni},editPill:function(ni,nj){tab.CalculationCommands.editPill(ni,this.get_shelfType(),nj,this.get_shelf().get_paneId())},triggerUpdateScrollContentAction:function(){this.raiseActionEvent(this.$2$1)},triggerUpdateShelfLayoutAction:function(){this.raiseActionEvent(this.$2$2)},$1:function(){return this.$j.length===0},removePill:function(ni){tab.ShelfClientCommands.removeShelfPill(this.$k,ni.get_pill());this.$5()},hasPill:function(ni){return ss.contains(this.$j,ni)},updatePills:function(){if(ss.isNullOrUndefined(this.$k)){return}this.$4();if(ss.isValue(this.$k.get_pills())){var ni=this.$k.get_pills();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];var nl=new jh(this);nl.set_pill(nk);var nm=nl;nm.add_disposed(ss.mkdel(this,this.$9));this.$j.push(nm)}}this.$5()},$6:function(ni,nj){if(ss.isNullOrUndefined(ni)){return null}var nk=ss.mkdel(this,function(nn){var no=nn.shelfPosIndex;var np=nj;if(ss.isNullOrUndefined(np)){np=this.$j.length}return Math.abs(no-np)});var nl=function(nn){return nn.shelfPosIndex===ss.unbox(nj)};var nm=null;if(ss.isValue(nj)){nm=_.find(ni.shelfDropPositions,nl)}if(ss.isNullOrUndefined(nm)){nm=_.min(ni.shelfDropPositions,nk)}return nm},$c:function(){this.$n=null;if(this.get_hasTypeInPill()){this.$n=this.$m.get_shelfPosition()}},$8:function(){if(this.$i){this.$i=false;tab.StartupUtils.remove_clientFullyLoaded(ss.mkdel(this,this.$8));tab.CommandController.get().remove_commandQueueComplete(ss.mkdel(this,this.$8));if(ss.isValue(this.$2$7)){this.$2$7(this.$d);this.$d=false}}},$b:function(){if(this.get_hasTypeInPill()&&ss.isValue(this.$m.get_shelfPosition())){if(!ss.isValue(this.$n)||ss.unbox(this.$n)!==this.$m.get_shelfPosition()){this.$d=true}if(!this.$i){this.$i=true;tab.CommandController.get().add_commandQueueComplete(ss.mkdel(this,this.$8));tab.StartupUtils.add_clientFullyLoaded(ss.mkdel(this,this.$8))}}this.$c()},$a:function(ni){this.$b();this.updatePills();this.set_IsVisible(ni.get_isVisible())},$4:function(){for(var ni=0;ni<this.$j.length;ni++){var nj=this.$j[ni];nj.remove_disposed(ss.mkdel(this,this.$9));nj.dispose()}ss.clear(this.$j)},$7:function(ni){if(!EventUtils.DragDropManager.get_isDragging()){this.$0(0);return}var nj=this.matchingDropsFrom(ni);this.$0((ss.isValue(nj)?1:2));if(!this.$e){return}this.canAccept(ni,this.$h)},$9:function(ni){ss.remove(this.$j,ni);this.$5()},$3:function(){if(!this.get_hasTypeInPill()){return}this.$b();this.$5()},$2:function(){if(ss.isNullOrUndefined(this.$n)){return}this.$c();this.$5()},$5:function(){if(ss.isValue(this.$2$3)){this.$2$3(this)}},getPillDropDefaultAction:function(ni){var nj=new je;nj.action=ss.mkdel(this,function(nk){if(!nk){this.removePill(ni)}});nj.cursor=ss.mkdel(this,function(nk){if(!nk){if(this.hasPill(ni)){return spiff.CustomCursor.delete$1}return spiff.CustomCursor.noOp}return spiff.CustomCursor.noOp});return nj}},{canAcceptPillDragInstance:function(ni,nj){if(!ss.isInstanceOfType(ni,jd)){return false}var nk=ni.get_fields();if(ss.isNullOrUndefined(nk)||nk.length===0){return false}var nl=tabBootstrap.ShelfConfigurations.getShelfConfig(nj);if(ss.isValue(nl)){if(nl.disallowGeneratedFields){nk=nk.filter(function(nm){return!nm.get_isGenerated()});if(nk.length===0){return false}}if(ss.isValue(nl.validDataTypes)&&!tab.ListExtensions.any(tab.FieldModel).call(null,nk,function(nm){return nl.validDataTypes.indexOf(nm.get_baseDataType())>=0})){return false}}return true},filterFieldsToDropUsingShelfConfig:function(ni,nj,nk,nl){var nm=ni.fieldsToDropOnShelf(nj);var nn=tabBootstrap.ShelfConfigurations.getShelfConfig(nj);if(ss.isValue(nn)){if(nn.disallowGeneratedFields){nm=nm.filter(function(np){return!np.get_isGenerated()})}if(ss.isValue(nn.validDataTypes)){nm=nm.filter(function(np){return nn.validDataTypes.indexOf(np.get_baseDataType())>=0})}if(ss.isValue(nn.maxPills)){var no=Math.max(ss.Nullable$1.sub(ss.Nullable$1.sub(nk+nm.length,nn.maxPills),(nl?1:0)),0);nm=nm.slice(no)}}return nm}});var lx=global.tab.ShowActionListDialogForDashboardShortcut=ss.mkType(a,'tab.ShowActionListDialogForDashboardShortcut',function(ni){this.$0=null;KeyboardShortcuts.CommandKeyboardShortcut.call(this);this.$0=ni},{shouldRequireCommandCheck:function(){return false},executeShortcut:function(ni){this.$0()},getCommandId:function(){return{ns:'tabdoc',cmd:'show-action-list-dialog-for-dashboard'}},getKeyComboOrKeyCombos:function(){return lx.keyCombo},getTelemetryKey:function(){return'Show Action List Dialog On Dashboard'}});var ly=global.tab.ShowActionListDialogForWorksheetShortcut=ss.mkType(a,'tab.ShowActionListDialogForWorksheetShortcut',function(ni){this.$0=null;KeyboardShortcuts.CommandKeyboardShortcut.call(this);this.$0=ni},{shouldRequireCommandCheck:function(){return false},executeShortcut:function(ni){this.$0()},getCommandId:function(){return{ns:'tabdoc',cmd:'show-action-list-dialog-for-worksheet'}},getKeyComboOrKeyCombos:function(){return ly.keyCombo},getTelemetryKey:function(){return'Show Action List Dialog On Worksheet'}});var lz=global.tab.ShowMeView=ss.mkType(a,'tab.ShowMeView',function(ni){this.smViewModel=null;this.perUpdateDisposables=new tab.DisposableHolder;this.summaryDom=null;this.buttonsDom=null;ss.makeGenericType(spiff.BaseView$1,[lA]).call(this,ni,new spiff.Template($('<div></div>').addClass('tabAuthShowMe')));this.smViewModel=ni;this.smViewModel.initialize();this.smViewModel.add_propertyChanged(ss.mkdel(this,this.onViewModelPropertyChanged));this.smViewModel.set_closeOnInteraction(false)},{onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[lA]).prototype.onViewModelPropertyChanged.call(this,ni,nj);if(nj.get_propertyName()==='ShowMeCommands'){this.updateCommands()}},initContent:function(){this.summaryDom=$('<div></div>').addClass('tabAuthShowMeSummary');this.buttonsDom=$('<div></div>').addClass('tabAuthShowMeButtons');this.updateCommands();this.element.append(this.buttonsDom);this.element.append(this.summaryDom)},updateCommands:function(){if(ss.isNullOrUndefined(this.buttonsDom)){return}this.perUpdateDisposables.dispose();var ni=null;if(ss.isValue(this.smViewModel)){ni=tab.CommandsPresModelWrapper.create(this.smViewModel.get_showMeCommands())}if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_defaultItem()||0;var nk=-1;var nl=this.element.get(0);var nm=null;var nn=$(nl).find('.tabAuthShowMeRow').length>0;var no=$(nl).find('.tabAuthShowMeButtonRecommended');if(nn&&!ss.isNullOrUndefined(no)){no.removeClass('tabAuthShowMeButtonRecommended')}var np=ni.get_commandItems();for(var nq=0;nq<np.length;nq++){var nr=np[nq];var ns=tab.CommandItemWrapper.create(nr);nk++;if(ns.get_commandsType()==='separator'){$('<div></div>').addClass('tabAuthShowMeDivider').appendTo(this.buttonsDom);continue}if(!nn){nm=$('<div></div>').addClass('tabAuthShowMeRow').appendTo(this.buttonsDom)}if(ss.isNullOrUndefined(ns.get_commands())){continue}var nt=tab.CommandsPresModelWrapper.create(ns.get_commands());var nu=-1;var nv=nt.get_defaultItem()||0;var nw=nt.get_commandItems();for(var nx=0;nx<nw.length;nx++){var ny=nw[nx];nu++;var nz;if(nn){var nA=$(nl).find('.tabAuthShowMeRow').get(nk).children[nu];nz=$(nA)}else{nz=$('<span></span>').addClass('tabAuthShowMeButton').appendTo(nm)}if(nu===nv&&nk===nj){nz.addClass('tabAuthShowMeButtonRecommended');nz.attr('title',tab.Strings.AuthShowMeRecommended)}this.attachEventHandlers(ny,nz);this.setCommandIcon(ny,nz,nn)}}},updateDescription:function(ni){this.summaryDom.children().remove().end().append(this.$8(tab.CommandItemWrapper.create(ni).get_descriptionText()));if(BrowserSupport.BrowserSupport.IsIE()){var nj=$(document.body);nj.css('z-index','1').css('z-index','0')}},attachEventHandlers:null,setActiveItem:function(ni,nj){this.element.find('.active').removeClass('active');nj.addClass('active');this.updateDescription(ni)},setCommandIcon:function(ni,nj,nk){var nl=this.$7(tab.CommandItemWrapper.create(ni).get_iconRes());if(ss.isValue(nl)){var nm=this.smViewModel.isCommandEnabled(ni);if(!nk){nj.addClass('tabAuth-'+nl)}nj.toggleClass('disabled',!nm)}},$8:function(ni){ni=ss.replaceAllString(ni,'<img','<span');ni=ss.replaceAllString(ni,'</img>','</span>');var nj=$(ni);nj.find('[src]').each(ss.mkdel(this,function(nk,nl){var nm=$(nl);nm.removeAttr('width').removeAttr('height').removeAttr('style');var nn=nl.attributes['src'].value;if(nn.indexOf('TQRC')!==-1){var no=this.$7(nn);nm.addClass('tabAuthShowMeIcon-'+no)}else if(ss.endsWithString(nn,'Pill')){nm.addClass('tabAuthShowMePill').addClass(nn);if(ss.startsWithString(nn,'single')){nm.text(((nn.indexOf('Dimension')!==-1)?tab.Strings.AuthShowMeSingleDimension:tab.Strings.AuthShowMeSingleMeasure))}else{nm.text(((nn.indexOf('Dimension')!==-1)?tab.Strings.AuthShowMeMultipleDimensions:tab.Strings.AuthShowMeMultipleMeasures))}}}));return nj},$7:function(ni){var nj=new RegExp('/(\\w+)(@2x)?\\.png');var nk=tab.TabResources.lookupFullResourceAlias(ni).match(nj);if(ss.isValue(nk)&&nk.length>=2){return nk[1]}return null}});var lA=global.tab.ShowMeViewModel=ss.mkType(a,'tab.ShowMeViewModel',function(){this.$1=null;this.$2=null;spiff.BaseViewModel.call(this)},{get_viewType:function(){return lz},get_viewModel:function(){return this},get_showMeCommands:function(){if(ss.isNullOrUndefined(this.$1)){return null}return this.$1.get_commands()},get_closeOnInteraction:function(){return ss.isValue(this.$2)&&this.$2.get_mode()===0},set_closeOnInteraction:function(ni){if(ss.isNullOrUndefined(this.$2)){return}this.$2.set_mode((ni?0:2))},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);if(ss.isValue(this.$1)){this.$1.remove_commandsChanged(ss.mkdel(this,this.$0))}tab.ApplicationModel.get_instance().get_workbook().removeDashboardHandler(ss.mkdel(this,this.updateDashboard))},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ni){this.$2=ni},updateUberPopupPosition:function(){this.$2.updatePosition()},isCommandEnabled:function(ni){var nj=tab.CommandItemWrapper.create(ni);return nj.get_enabled()||ss.isNullOrUndefined(nj.get_enabled())},applyShowMeCommand:function(ni){if(ss.isValue(ni)&&this.isCommandEnabled(ni)){tab.ServerCommands.executeServerCommand(tab.CommandSerializer.deserialize(tab.CommandItemWrapper.create(ni).get_command(),false),'immediately',null,null)}},close:function(){if(ss.isNullOrUndefined(this.$2)){return}this.$2.hide(false)},initialize:function(){tab.ApplicationModel.get_instance().get_workbook().addDashboardUpdatedHandler(ss.mkdel(this,this.updateDashboard))},updateDashboard:function(ni){if(ss.isValue(this.$1)){this.$1.remove_commandsChanged(ss.mkdel(this,this.$0));this.$1=null}var nj=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isValue(ni.get_activeVisual())&&ss.isValue(nj)){this.$1=nj.get_showMeModel()}else{this.$1=ni.emptyShowMeModel}if(ss.isValue(this.$1)){this.$1.add_commandsChanged(ss.mkdel(this,this.$0))}this.$0(null)},$0:function(ni){this.notifyPropertyChanged('ShowMeCommands')}});var lB=global.tab.SortEncodingOptionsTemplate=ss.mkType(a,'tab.SortEncodingOptionsTemplate',function(){spiff.Template.call(this,$("<div class='tabAuthPrimitiveOptionsContainer'></div>"))});var lC=global.tab.SortEncodingOptionsView=ss.mkType(a,'tab.SortEncodingOptionsView',function(ni){this.sortEncodingOptionViewModel=null;this.DOM=null;ss.makeGenericType(spiff.BaseView$1,[lD]).call(this,ni,new lB);this.DOM=this.get_template();this.sortEncodingOptionViewModel=ni;var nj=ni.get_views();var nk=nj.length;for(var nl=0;nl<nk;nl++){nj[nl].addToDom(this.get_template().domRoot)}});var lD=global.tab.SortEncodingOptionsViewModel=ss.mkType(a,'tab.SortEncodingOptionsViewModel',function(ni){this.$5=null;this.$4=null;this.$3=null;spiff.BaseViewModel.call(this);this.$5=ni;this.$5.add_newMarksCardTabEncoding(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_newMarksCardTabEncoding(ss.mkdel(this,this.$2))})));if(ss.isValue(ni)&&ss.isValue(ni.get_sortEncodingOptions())){if(ni.get_sortEncodingOptions().actualPrimitiveType==='line'){this.$4=new ie(ni);this.$3=new ib(this.$0())}}},{get_views:function(){var ni=[];if(ss.isValue(this.$4)){ni.push(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ie,id,Object])).call(null,[this.$4]))}if(ss.isValue(this.$3)&&tabBootstrap.FeatureFlags.isEnabled('PatternedLineMarks')){ni.push(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ib,hZ,Object])).call(null,[this.$3]))}return ni},get_viewType:function(){return lC},get_viewModel:function(){return this},disposeViewModel:function(){if(ss.isValue(this.$4)){this.$4.dispose()}if(ss.isValue(this.$3)){this.$3.dispose()}this.dispose()},updateUberPopupViewModel:function(ni){},$1:function(ni){var nj=new tab.ChangeLinePatternCmd;nj.set_linePattern(ni);nj.set_paneSpecificationId(this.$5.get_id());nj.invoke()},$0:function(){var ni=this.$5.get_sortEncodingOptions().linePatternSelector;return{showNone:false,headerText:tab.Strings.LinePatternHeading,selectedPattern:ni.linePattern,handlePatternSelected:ss.mkdel(this,this.$1),disabled:!ni.linePatternSelectionIsEnabled,disabledTooltipText:ni.linePatternTooltipWarningMessage}},$2:function(){if(ss.isValue(this.$4)){this.$4.update(this.$5)}if(ss.isValue(this.$3)){this.$3.update(this.$0())}}});var lE=global.tab.SortFieldsComboBoxUpdater=ss.mkType(a,'tab.SortFieldsComboBoxUpdater',function(){this.fieldNames=null;this.fieldCaptions=null;this.selectionIndex=0;this.isSelectionInvalid=false},{update:function(ni){tab.Param.verifyValue(this.fieldNames,'fieldNames');tab.Param.verifyValue(this.fieldCaptions,'fieldCaptions');tab.Param.verifyValue(this.selectionIndex,'selectionIndex');var nj=[];for(var nk=0,nl=this.fieldNames.length;nk<nl;nk++){nj.push(new spiff.ComboBoxItem(null,this.fieldCaptions[nk],this.fieldNames[nk],null,null))}ni.setItems(nj);if(this.isSelectionInvalid){ni.set_selectedItem(new spiff.ComboBoxItem(null,tab.Strings.TableCalcMissingSortField,null,null,null))}else{ni.set_selectedItem(ni.get_items()[this.selectionIndex])}ni.set_isSelectionInvalid(this.isSelectionInvalid);ni.set_enabled(true)}});var lF=global.tab.SpecificDimensionsListItemCreator=ss.mkType(a,'tab.SpecificDimensionsListItemCreator',function(){},{createListItemContent:function(ni){var nj="<div class='tabCheckboxListItem tab-icon-toggle tab-unification-check'>\n    <span class='icon'><span class='innerIcon tab-img-check'></span></span>\n    <span class='label'></span>\n<div class='tab-drag-thumb'><div class='tab-drag-thumb-icon'></div></div>\n</div>";var nk=$(nj);var nl=ni.get_data();if(ss.isValue(nl)){nk.find('.label').text(nl.get_addressingName()).attr('title',nl.get_addressingName())}return nk},createListItemDragAvatar:function(ni){return new I(ni)}});var lG=global.tab.StepperControlTemplate=ss.mkType(a,'tab.StepperControlTemplate',function(ni){this.decrementButton=null;this.incrementButton=null;this.valueText=null;spiff.Template.call(this,$(ni))});var lH=global.tab.StepperControlView=ss.mkType(a,'tab.StepperControlView',function(ni,nj){this.$a=null;this.$b=null;this.dom=null;ss.makeGenericType(spiff.BaseView$1,[lI]).call(this,ni,nj);this.dom=nj;this.set_stepperViewModel(ni);this.dom.valueText.addClass(this.get_stepperViewModel().textClass);this.dom.valueText.val(ni.get_value().toString());this.dom.valueText.keydown(tableau.util.preventNonNumericInput);this.dom.valueText.keyup(ss.mkdel(this,this.$8)).blur(ss.mkdel(this,function(nk){this.commitStepValueText()}));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.dom.incrementButton.get(0),ss.mkdel(this,function(nk){this.$7(this.get_stepperViewModel().get_step())})));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.dom.decrementButton.get(0),ss.mkdel(this,function(nk){this.$7(-this.get_stepperViewModel().get_step())})));this.$a=_.debounce(ss.mkdel(this,function(nk){this.$b.set_value(nk);this.dom.valueText.val(this.get_stepperViewModel().get_value().toString())}),1000);this.$9();this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled());this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled())},{get_stepperViewModel:function(){return this.$b},set_stepperViewModel:function(ni){this.$b=ni},tabIndex:function(ni){this.dom.valueText.attr('tabindex',ni.toString())},$7:function(ni){if(!this.get_stepperViewModel().get_isEnabled()){return}var nj=parseInt(this.dom.valueText.val());if(ss.isValue(nj)&&!isNaN(nj)){var nk=nj+ni;if(this.get_stepperViewModel().isValueWithinRange(nk)){this.dom.valueText.val(nk.toString());this.$a(nk)}}},commitStepValueText:function(){if(!this.get_stepperViewModel().get_isEnabled()){return}var ni=parseInt(this.dom.valueText.val());if(this.get_stepperViewModel().get_value()===ni){return}else if(ss.isValue(ni)&&!isNaN(ni)){this.get_stepperViewModel().set_value(ni)}},$8:function(ni){if(!this.get_stepperViewModel().get_isEnabled()){return}if(ni.which===13){this.commitStepValueText()}},$9:function(){if(this.get_stepperViewModel().get_isEnabled()){this.dom.valueText.prop('disabled',false)}else{this.dom.valueText.prop('disabled',true)}},onViewModelPropertyChanged:function(ni,nj){ss.makeGenericType(spiff.BaseView$1,[lI]).prototype.onViewModelPropertyChanged.call(this,ni,nj);if(nj.get_propertyName()==='Value'){this.dom.valueText.val(this.get_stepperViewModel().get_value().toString())}else if(nj.get_propertyName()==='IsEnabled'){this.$9()}else if(nj.get_propertyName()==='IsIncrementEnabled'){this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled())}else if(nj.get_propertyName()==='IsDecrementEnabled'){this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled())}}});var lI=global.tab.StepperControlViewModel=ss.mkType(a,'tab.StepperControlViewModel',function(ni,nj,nk,nl){this.$5=0;this.$4=0;this.$6=0;this.$0=0;this.$7=0;this.$2=false;this.textClass=null;this.$3=false;this.$1=false;spiff.BaseViewModel.call(this);this.$5=ni;this.$4=nj;this.$6=nk;this.$7=nl;this.$0=nl;this.$2=true;this.$3=this.$7<this.$4;this.$1=this.$7>this.$5},{get_isEnabled:function(){return this.$2},set_isEnabled:function(ni){if(this.$2!==ni){this.$2=ni;if(!this.$2){this.set_isIncrementEnabled(false);this.set_isDecrementEnabled(false)}else{this.set_value((ss.isValue(this.get_value())?this.get_value():this.get_initValue()));this.set_isIncrementEnabled(this.get_value()<this.get_max());this.set_isDecrementEnabled(this.get_value()>this.get_min())}this.notifyPropertyChanged('IsEnabled')}},get_isIncrementEnabled:function(){return this.$3},set_isIncrementEnabled:function(ni){if(this.$3!==ni){this.$3=ni;this.notifyPropertyChanged('IsIncrementEnabled')}},get_isDecrementEnabled:function(){return this.$1},set_isDecrementEnabled:function(ni){if(this.$1!==ni){this.$1=ni;this.notifyPropertyChanged('IsDecrementEnabled')}},get_min:function(){return this.$5},get_max:function(){return this.$4},get_initValue:function(){return this.$0},get_step:function(){return this.$6},get_value:function(){return this.$7},set_value:function(ni){if(!this.$2){return}if(this.$7!==ni){if(ss.isValue(ni)&&!isNaN(ni)&&this.isValueWithinRange(ni)){this.$7=ni;this.set_isIncrementEnabled(this.$7<this.get_max());this.set_isDecrementEnabled(this.$7>this.get_min())}this.notifyPropertyChanged('Value')}},isValueWithinRange:function(ni){return ni>=this.$5&&ni<=this.$4},increment:function(){this.set_value(this.get_value()+this.get_step())},decrement:function(){this.set_value(this.get_value()-this.get_step())}});var lJ=global.tab.StrokeWidthPickerComponent=ss.mkType(a,'tab.StrokeWidthPickerComponent',function(ni,nj){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[lK,Object,Object]).call(this,tab.ObjectRegistry.newView(lK).call(null,[new lL]),ni,nj);this.get_widget().get_viewModel().set_selectedStrokeWidth(ni.selectedStrokeWidth);this.get_widget().get_viewModel().addUpdated(ni.handleStrokeWidthSelected)},{handleWidgetPropertyChanged:function(ni,nj){},updateWidgetState:function(ni){this.get_widget().get_viewModel().set_selectedStrokeWidth(ni.selectedStrokeWidth)}},{create:function(ni){return React.createElement(lJ,ni)}});var lK=global.tab.StrokeWidthPickerView=ss.mkType(a,'tab.StrokeWidthPickerView',function(ni){ss.makeGenericType(lM,[lL]).call(this,ni,spiff.Template.fromHtml("<div class='tabStrokeWidthPicker'></div>"))},{$9:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.updateContent()},onViewModelPropertyChanged:function(ni,nj){this.updateContent()},createPicker:function(){for(var ni=1;ni<=5;ni++){this.$7(ni)}},$7:function(ni){spiff.ClickHandler.targetAndClick($('<div></div>').addClass(lK.buildSpriteName(ni)).addClass('tabStrokeWidth').addClass('tabStylePickerButton').toggleClass('tabStylePickerButtonSelected',ni===this.$9().get_selectedStrokeWidth()).appendTo(this.element),this.$8(ni))},$8:function(ni){return ss.mkdel(this,function(){this.$9().set_selectedStrokeWidth(ni)})},updateContent:function(){this.removePicker();this.createPicker()},removePicker:function(){this.element.children().remove()}},{buildSpriteName:function(ni){return'strokewidth'+ni}});var lL=global.tab.StrokeWidthPickerViewModel=ss.mkType(a,'tab.StrokeWidthPickerViewModel',function(){this.$0=1;this.$2$1=null;spiff.BaseViewModel.call(this)},{add_selectedStrokeWidthUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_selectedStrokeWidthUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_selectedStrokeWidth:function(){return this.$0},set_selectedStrokeWidth:function(ni){if(this.$0===ni){return}this.$0=ni;this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$1,ni);this.notifyPropertyChanged('SelectedStrokeWidth')},addUpdated:function(ni){this.add_selectedStrokeWidthUpdated(ni);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_selectedStrokeWidthUpdated(ni)})))}});var lM=global.tab.StylePickerView$1=ss.mkType(a,'tab.StylePickerView$1',function(ni){var nj=ss.registerGenericClassInstance(lM,[ni],function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[ni]).call(this,nk,nl)},{createPicker:null,updateContent:null,removePicker:null},null,function(){return ss.makeGenericType(spiff.BaseView$1,[ni])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[ni]),ss.IDisposable,tab.IAppendableView]});nj.stylePickerButtonClassName='tabStylePickerButton';nj.stylePickerSelectedButtonClassName='tabStylePickerButtonSelected';return nj});ss.initGenericClass(lM,1);var lN=global.tab.TabbedPaneView=ss.mkType(a,'tab.TabbedPaneView',function(ni){this.$a=null;this.$9=null;this.$8=null;this.$b=null;ss.makeGenericType(spiff.BaseView$1,[lO]).call(this,ni,new m);this.$a=tab.ObjectRegistry.resolve(spiff.TabControl).call(null,[this.get_template()])},{get_paneContents:function(){return this.get_viewModel().get_paneViewModels()},get_activePaneTitle:function(){return this.$8},set_activePaneTitle:function(ni){this.$8=ni;this.$a.selectTab(this.$b[ni])},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7()},dispose:function(){this.$a.dispose();tab.MiscUtil.dispose(this.$9);ss.makeGenericType(spiff.BaseView$1,[lO]).prototype.dispose.call(this)},$7:function(){this.$9=[];this.$b={};var ni=this.get_viewModel().get_paneViewModels();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];var nl=nk;if(ss.isValue(nl)){var nm=tab.ObjectRegistry.newView$1(ss.makeGenericType(tab.IView$1,[tab.IViewModel])).call(null,nl.get_contentViewType(),[nl.get_contentViewModel()]);if(!ss.isNullOrEmptyString(nl.get_additionalContentViewClass())){nm.get_rootElement().addClass(nl.get_additionalContentViewClass())}this.$9.push(nm);this.$b[nl.get_title()]=nl.get_id();this.$a.addTab(nl.get_id(),nl.get_title(),nm,true)}}this.set_activePaneTitle(this.get_viewModel().get_paneViewModels()[0].get_title())},selectNextTab:function(){if(this.get_viewModel().get_paneViewModels().length<2){return false}var ni=-1;for(var nj=0;nj<this.get_viewModel().get_paneViewModels().length;nj++){if(ss.referenceEquals(this.get_viewModel().get_paneViewModels()[nj].get_title(),this.get_activePaneTitle())){ni=nj;break}}if(ni!==-1){if(ni===this.get_viewModel().get_paneViewModels().length-1){ni=0}else{ni++}this.set_activePaneTitle(this.get_viewModel().get_paneViewModels()[ni].get_title());return true}return false}});var lO=global.tab.TabbedPaneViewModel=ss.mkType(a,'tab.TabbedPaneViewModel',function(ni){this.$0=null;spiff.BaseViewModel.call(this);this.$0=ni},{get_paneViewModels:function(){return this.$0}});var lP=global.tab.TabButtonModel=ss.mkType(a,'tab.TabButtonModel',function(ni,nj,nk,nl,nm){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.set_sheetName(ni);this.set_buttonClass(nj);this.set_iconClass(nk);this.set_onClick(nl);this.$1(nm)},{get_sheetName:function(){return this.$1$1},set_sheetName:function(ni){this.$1$1=ni},get_buttonClass:function(){return this.$1$2},set_buttonClass:function(ni){this.$1$2=ni},get_iconClass:function(){return this.$1$3},set_iconClass:function(ni){this.$1$3=ni},get_onClick:function(){return this.$1$4},set_onClick:function(ni){this.$1$4=ni},get_titleText:function(){return this.get_sheetName()+(ss.isNullOrUndefined(this.$0())?'':(' ('+this.$0()+')'))},$0:function(){return this.$1$5},$1:function(ni){this.$1$5=ni}});var lQ=global.tab.TabControlButtonModelsFactory=ss.mkType(a,'tab.TabControlButtonModelsFactory',null,null,{controlButtons:function(ni){if(tsConfig.is_mobile){var nj=[];nj.push(new iL(ni));return nj}var nk=[];nk.push(new iL(ni));nk.push(new iJ(ni));nk.push(new iK(ni));return nk}});var lR=global.tab.TableCalcDialogTemplate=ss.mkType(a,'tab.TableCalcDialogTemplate',function(ni){this.$1=null;this.$2=null;spiff.Template.call(this,ni||$("<div class='tabTableCalcDialogBody'>\n        <div class='tabPrimaryTableCalcEditor'></div>\n        <div class='tabSecondaryTableCalcEditor'></div>\n    </div>"));this.$1=this.getElementBySelector('.tabPrimaryTableCalcEditor');this.$2=this.getElementBySelector('.tabSecondaryTableCalcEditor')},{get_primaryEditorBody:function(){return this.$1},get_secondaryEditorBody:function(){return this.$2}});var lS=global.tab.TableCalcDialogView=ss.mkType(a,'tab.TableCalcDialogView',function(ni){this.$p=null;this.$q=null;this.$r=null;this.$t=null;this.$s=null;this.$o=null;this.$n=null;this.$u=null;this.defaultStartingPosition=null;ss.makeGenericType(spiff.BaseView$1,[dD]).call(this,ni,new lR(null));this.get_viewModel().add_tableCalcsUpdated(ss.mkdel(this,this.$g));this.get_viewModel().add_tableCalcsClosed(ss.mkdel(this,this.$f));this.get_viewModel().add_activate(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_tableCalcsUpdated(ss.mkdel(this,this.$g));this.get_viewModel().remove_tableCalcsClosed(ss.mkdel(this,this.$f));this.get_viewModel().remove_activate(ss.mkdel(this,this.$a))})));this.$s=$("<div class='tabButtonArea addSecondaryCalculation'></div>");this.$o=$("<div class='tabButtonArea showCalculationAssistance'></div>");this.initDom()},{get_dialog:function(){return this.$p},$l:function(){return this.get_template()},$m:function(){return this.get_viewModel().get_dialogPosition()||this.defaultStartingPosition},get_primaryEditor:function(){return this.$r},get_secondaryEditor:function(){return this.$t},dispose:function(){this.$9();ss.makeGenericType(spiff.BaseView$1,[dD]).prototype.dispose.call(this)},$a:function(){if(ss.isValue(this.$p)){this.$p.moveToTop()}},updateDomFromModel:function(){this.$j();this.$k();this.$i()},$g:function(){if(!this.get_viewModel().get_hasTableCalc()){return}if(ss.isNullOrUndefined(this.$p)){this.createDialog()}else{this.updateDomFromModel()}if(!this.$p.get_isShown()){this.onAddedToDom();this.get_dialog().show();this.updateScrollers();this.get_dialog().ensureOnScreen()}},initDom:function(){if(this.get_viewModel().get_hasTableCalc()){this.$g()}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.$r)&&!this.$r.addedToDom){this.$r.addToDom(this.$l().get_primaryEditorBody());this.$l().get_primaryEditorBody().append(this.$s);this.$l().get_primaryEditorBody().append(this.$o)}if(ss.isValue(this.$t)&&!this.$t.addedToDom){this.$t.addToDom(this.$l().get_secondaryEditorBody())}},updateScrollers:function(){if(ss.isValue(this.$r)){this.$r.adjustSizesBasedOnContent()}if(ss.isValue(this.$t)){this.$t.adjustSizesBasedOnContent()}},createDialog:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_primaryTableCalcViewModel())){return}var ni=new spiff.Dialog('',this.element);ni.set_stayInWindow(true);this.$p=ni;if(ss.isValue(this.$m())){this.$p.set_startingPositionX(this.$m().x);this.$p.set_startingPositionY(this.$m().y)}this.$p.add_propertyChanged(ss.mkdel(this,this.$d));this.$p.get_dialogElement().addClass('tabTableCalcEditDialog');this.$p.set_titleUnescaped(tab.Strings.TableCalcDialogTitle);this.$q=$("<span class='tabTableCalcFieldCaption'></span>").appendTo(this.$p.get_titleElement());this.$j();this.$p.disableTextSelection();this.$p.get_dialogElement().addClass('tabSuppressVizTooltipsAndOverlays');this.$p.configMoveDragSource(spiff.Dialog.defaultDraggableDialogConfigurer);this.$p.add_closed(ss.mkdel(this,this.$c));this.$r=tab.ObjectRegistry.newView(lU).call(null,[this.get_viewModel().get_primaryTableCalcViewModel()]);this.$k();this.$7();this.$i()},$7:function(){if(ss.isValue(this.$u)){return}this.$u=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcShowCalculationAssistance,false);this.$u.addToDom(this.$o);this.$u.add_propertyChanged(ss.mkdel(this,this.$e))},$i:function(){this.$u.set_selected(this.get_viewModel().get_isCalcAssistanceEnabled());this.$u.set_disabled(this.get_viewModel().get_isCalcAssistanceWidgetDisabled())},$d:function(ni,nj){if(nj.get_propertyName()==='position'){this.get_viewModel().set_dialogPosition(this.$p.get_position())}if(nj.get_propertyName()==='isActive'){this.get_viewModel().set_isActive(this.$p.get_isActive())}},$9:function(){if(ss.isNullOrUndefined(this.$p)){return}this.$p.remove_closed(ss.mkdel(this,this.$c));this.$p.remove_propertyChanged(ss.mkdel(this,this.$d));this.$r=null;this.$t=null;this.$8();this.$p=tab.MiscUtil.dispose$1(this.$p)},$j:function(){if(ss.isNullOrUndefined(this.$q)){return}if(ss.isNullOrEmptyString(this.get_viewModel().get_fieldCaption())){this.$q.text('');this.$q.removeAttr('title');return}this.$q.text(this.get_viewModel().get_fieldCaption());this.$q.attr('title',this.get_viewModel().get_fieldCaption())},$k:function(){var ni=this.get_viewModel().get_allowSecondaryTableCalc();var nj=this.get_viewModel().get_hasSecondaryTableCalc();if(nj&&ni){if(ss.isNullOrUndefined(this.$t)){this.$t=tab.ObjectRegistry.newView(lU).call(null,[this.get_viewModel().get_secondaryTableCalcViewModel()]);if(this.addedToDom){this.$t.addToDom(this.$l().get_secondaryEditorBody())}}this.$l().get_secondaryEditorBody().toggleClass('showSecondary',true);this.$t.adjustSizesBasedOnContent();this.$p.ensureOnScreen()}else{this.$l().get_secondaryEditorBody().toggleClass('showSecondary',false);this.$t=null}if(ni){this.$h();this.$n.set_selected(nj)}else{this.$8()}},$h:function(){if(ss.isValue(this.$n)){return}this.$n=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcAddSecondary,this.get_viewModel().get_hasSecondaryTableCalc());this.$n.addToDom(this.$s);this.$n.add_propertyChanged(ss.mkdel(this,this.$b))},$8:function(){if(ss.isNullOrUndefined(this.$n)){return}this.$n.remove_propertyChanged(ss.mkdel(this,this.$b));this.$n.dispose();this.$n=null},$c:function(ni,nj){this.get_viewModel().closeTableCalcs()},$f:function(){this.$9()},$b:function(ni,nj){if(nj.get_propertyName()==='selected'){if(this.$n.get_selected()){this.get_viewModel().addSecondaryTableCalc()}else{this.get_viewModel().removeSecondaryTableCalc()}}},$e:function(ni,nj){if(nj.get_propertyName()!=='selected'){return}this.get_viewModel().setCalculationAssistanceState(this.$u.get_selected())}});var lT=global.tab.TableCalcEditorTemplate=ss.mkType(a,'tab.TableCalcEditorTemplate',function(ni){this.$5=null;this.$k=null;this.$j=null;this.$6=null;this.$7=null;this.$4=null;this.$e=null;this.$a=null;this.$h=null;this.$g=null;this.$i=null;this.$3=null;this.$b=null;this.$c=null;this.$8=null;this.$l=null;this.$9=null;this.$f=null;this.$d=null;this.$2$1=null;this.$2$2=null;spiff.Template.call(this,ni||$("<div class='tabTableCalcEditor'>\n        <div class='tabTableCalcTypeArea'>\n            <div class='tabTableCalcTitle tabHeader3'></div>\n            <div class='tabTableCalcType tabRow comboRow'></div>\n            <div class='tabTableCalcNestedLabel tabHeader3 hide'></div>\n            <div class='tabTableCalcNested tabRow comboRow hide'></div>\n            <div class='tabTableCalcSortDirection tabRow comboRow hide'></div>\n            <div class='tabTableCalcRankType tabRow comboRow hide'></div>\n            <div class='tabTableCalcAggregation tabRow comboRow hide'></div>\n            <div class='tabTableCalcAllPages tabRow checkRow hide'></div>\n            <div class='tabTableCalcNullSetting tabRow checkRow hide'></div>\n            <div class='tabTableCalcWindowOptions tabRow comboRow hide'></div>\n            <div class='tabTableCalcComputeCompound tabRow checkRow hide'></div>\n        </div>\n        <div class='tabTableCalcComputeUsing'>\n            <span class='label tabTableCalcComputeUsingHeader tabHeader3'></span>\n            <div class='tabTableCalcOrdering tabRow'></div>\n            <div class='tabTableCalcSpecificDim hide tabRow'></div>\n        </div>\n        <div class='tabTableCalcAtTheLevel tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcDifferenceFrom tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcRelativeTo tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcRestartEvery tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcSort tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n    </div>"));this.$5=this.getElementBySelector('.tabTableCalcTitle');this.$k=this.getElementBySelector('.tabTableCalcTypeArea');this.$j=this.getElementBySelector('.tabTableCalcType');this.$6=this.getElementsBySelector('.tabTableCalcNested');this.$7=this.getElementBySelector('.tabTableCalcNestedLabel');this.$4=this.getElementBySelector('.tabTableCalcDifferenceFrom');this.$h=this.getElementBySelector('.tabTableCalcAtTheLevel');this.$e=this.getElementBySelector('.tabTableCalcSortDirection');this.$a=this.getElementBySelector('.tabTableCalcRankType');this.$g=this.getElementBySelector('.tabTableCalcAllPages');this.$i=this.getElementBySelector('.tabTableCalcComputeCompound');this.$3=this.getElementBySelector('.tabTableCalcAggregation');this.$b=this.getElementBySelector('.tabTableCalcRelativeTo');this.$c=this.getElementBySelector('.tabTableCalcRestartEvery');this.$8=this.getElementBySelector('.tabTableCalcNullSetting');this.$l=this.getElementBySelector('.tabTableCalcWindowOptions');this.$d=this.getElementBySelector('.tabTableCalcSort');this.$9=this.getElementBySelector('.tabTableCalcOrdering');this.$f=this.getElementBySelector('.tabTableCalcSpecificDim');this.$7.text(tab.Strings.TableCalcNestedCalculations);this.$h.find('.label').text(tab.Strings.TableCalcAtTheLevel);this.$4.find('.label').text(tab.Strings.TableCalcRelativeTo);this.$b.find('.label').text(tab.Strings.TableCalcRelativeTo);this.$c.find('.label').text(tab.Strings.TableCalcRestartingEvery);this.$d.find('.label').text(tab.Strings.TableCalcSortOrder);this.getElementBySelector('.tabTableCalcComputeUsing .label').text(tab.Strings.TableCalcComputeUsing);this.set_variableElements([this.$7,this.$6,this.$4,this.$e,this.$a,this.$h,this.$g,this.$i,this.$3,this.$b,this.$c,this.$8,this.$l,this.$d]);this.set_variableWidthComboboxElements([this.$h,this.$4,this.$b,this.$c,this.$d])},{get_variableElements:function(){return this.$2$1},set_variableElements:function(ni){this.$2$1=ni},get_variableWidthComboboxElements:function(){return this.$2$2},set_variableWidthComboboxElements:function(ni){this.$2$2=ni},get_editorTitleElem:function(){return this.$5},get_tableCalcTypeAreaElem:function(){return this.$k},get_tableCalcTypeElem:function(){return this.$j},get_nestedTableCalcsElem:function(){return this.$6},get_nestedTableCalcsLabelElem:function(){return this.$7},get_differenceFromElem:function(){return this.$4},get_sortDirectionElem:function(){return this.$e},get_rankTypeElem:function(){return this.$a},get_tableCalcAtTheLevelElem:function(){return this.$h},get_tableCalcAllPagesElem:function(){return this.$g},get_tableCalcComputeCompoundElem:function(){return this.$i},get_aggregationElem:function(){return this.$3},get_relativeToElem:function(){return this.$b},get_restartEveryElem:function(){return this.$c},get_nullIfIncompleteElem:function(){return this.$8},get_windowOptionsElem:function(){return this.$l},get_orderingElem:function(){return this.$9},get_specificDimensionsElem:function(){return this.$f},get_sortElem:function(){return this.$d},adjustCssBasedOnContent:function(){this.$1();this.$2()},$1:function(){var ni=0;var nj=this.$k.children().get();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];if(!$(nl).hasClass('hide')){ni=9;break}}this.$k.css('margin-bottom',ni)},$2:function(){var ni=this.get_variableWidthComboboxElements();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];nk.find('.label').css('min-width','')}var nl=_.filter(this.get_variableWidthComboboxElements(),function(ns){return ns.is(':visible')});if(nl.length<=1){return}var nm=0;for(var nn=0;nn<nl.length;nn++){var no=nl[nn];var np=tab.DoubleUtil.roundToInt(no.find('.label').width());if(np>nm){nm=np}}for(var nq=0;nq<nl.length;nq++){var nr=nl[nq];nr.find('.label').css('min-width',nm+'px')}}});var lU=global.tab.TableCalcEditorView=ss.mkType(a,'tab.TableCalcEditorView',function(ni,nj){this.$H=null;this.$J=null;this.$F=null;this.$E=null;this.$K=null;this.$I=null;this.$D=null;this.$G=null;this.$L=null;this.$M=null;ss.makeGenericType(spiff.BaseView$1,[lV]).call(this,ni,nj||new lT(null));this.$H=this.get_template();this.get_viewModel().add_tableCalcUpdated(ss.mkdel(this,this.$d));this.get_viewModel().add_tableCalcTitleUpdated(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_tableCalcUpdated(ss.mkdel(this,this.$d));this.get_viewModel().remove_tableCalcTitleUpdated(ss.mkdel(this,this.$c))})))},{get_dom:function(){return this.$H},get_orderingAddressingListView:function(){return this.$I},get_maxVisibleOrderingAddressingItems:function(){return 10},$d:function(){if(this.get_viewModel().get_tableCalcType()!==this.$F){this.$b()}this.$A(this.get_viewModel().get_tableCalcType())},$c:function(){this.$H.get_editorTitleElem().text(this.get_viewModel().get_title())},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$H.get_editorTitleElem().text(this.get_viewModel().get_title());this.$A(this.get_viewModel().get_tableCalcType())},adjustSizesBasedOnContent:function(){this.$p();this.$H.adjustCssBasedOnContent()},$b:function(){this.$H.get_variableElements().forEach(lU.$1)},$A:function(ni){this.$F=ni;this.$z();switch(ni){case'diff':case'pct-diff':case'pct-value':{this.$l();break}case'pct-total':{this.$r();break}case'rank':case'pct-rank':{this.$s();break}case'window':{this.$B();break}case'cumulative':{this.$j();break}case'custom':{this.$k();break}default:{break}}this.$H.adjustCssBasedOnContent()},$l:function(){this.$m();this.$f();if(this.get_viewModel().get_tableCalcType()==='pct-diff'){this.$g()}this.$i();this.$x()},$r:function(){this.$f();this.$h(this.get_viewModel().get_allPagesState(),this.get_viewModel().get_allPages());this.$i();this.$x()},$s:function(){this.$w();this.$t();this.$i()},$j:function(){this.$e();this.$v();this.$i();this.$x()},$B:function(){this.$C();this.$i();this.$x()},$k:function(){this.$n();this.$f();this.$u();this.$v();this.$o();this.$h(this.get_viewModel().get_customAllPagesState(),this.get_viewModel().get_customAllPages());this.$i();this.$x()},$z:function(){if(this.get_viewModel().get_tableCalcTypeWidgetState()==='widget-state-hidden'){lU.$1(this.$H.get_editorTitleElem());lU.$1(this.$H.get_tableCalcTypeElem());return}lU.$2(this.$H.get_editorTitleElem());lU.$2(this.$H.get_tableCalcTypeElem());lU.$0(this.$H.get_tableCalcTypeElem(),'tableCalcTypeCombo',this.get_viewModel().get_tableCalcTypeComboBoxVM())},$n:function(){if(this.get_viewModel().get_nestedCalcsWidgetState()==='widget-state-hidden'){lU.$1(this.$H.get_nestedTableCalcsLabelElem());lU.$1(this.$H.get_nestedTableCalcsElem());return}lU.$2(this.$H.get_nestedTableCalcsLabelElem());lU.$2(this.$H.get_nestedTableCalcsElem());lU.$0(this.$H.get_nestedTableCalcsElem(),'nestedCalcsCombo',this.get_viewModel().get_nestedCalcsComboBoxVM())},$m:function(){lU.$2(this.$H.get_differenceFromElem());lU.$0(this.$H.get_differenceFromElem().find('.tabTableCalcLabeledCombo'),'diffCombo',this.get_viewModel().get_differenceFromComboBoxVM())},$e:function(){lU.$2(this.$H.get_aggregationElem());lU.$0(this.$H.get_aggregationElem(),'aggrCombo',this.get_viewModel().get_aggregationComboBoxVM())},$f:function(){if(this.get_viewModel().get_atTheLevelState()==='widget-state-hidden'){lU.$1(this.$H.get_tableCalcAtTheLevelElem());return}lU.$2(this.$H.get_tableCalcAtTheLevelElem());lU.$0(this.$H.get_tableCalcAtTheLevelElem().find('.tabTableCalcLabeledCombo'),'atTheLevelCombo',this.get_viewModel().get_atTheLevelComboBoxVM());lU.$3(this.$H.get_tableCalcAtTheLevelElem().find('.label'),this.get_viewModel().get_atTheLevelState()==='widget-state-disabled')},$g:function(){if(this.get_viewModel().get_computeCompoundedRateState()==='widget-state-hidden'){lU.$1(this.$H.get_tableCalcComputeCompoundElem());return}lU.$2(this.$H.get_tableCalcComputeCompoundElem());if(ss.isNullOrUndefined(this.$E)){this.$E=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcComputeCompoundedRate,this.get_viewModel().get_computeCompoundedRate());this.$E.addToDom(this.$H.get_tableCalcComputeCompoundElem());this.$E.add_propertyChanged(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$E.remove_propertyChanged(ss.mkdel(this,this.$8));this.$E.dispose()})))}this.$E.set_selected(this.get_viewModel().get_computeCompoundedRate());this.$E.set_disabled(this.get_viewModel().get_computeCompoundedRateState()==='widget-state-disabled')},$h:function(ni,nj){if(ni==='widget-state-hidden'){lU.$1(this.$H.get_tableCalcAllPagesElem());return}lU.$2(this.$H.get_tableCalcAllPagesElem());if(ss.isNullOrUndefined(this.$D)){this.$D=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcComputeTotalAcrossPages,nj);this.$D.addToDom(this.$H.get_tableCalcAllPagesElem());this.$D.add_propertyChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$D.remove_propertyChanged(ss.mkdel(this,this.$7));this.$D=tab.MiscUtil.dispose$1(this.$D)})))}this.$D.set_selected(nj);this.$D.set_disabled(ni==='widget-state-disabled')},$i:function(){this.$q();this.$y()},$q:function(){lU.$2(this.$H.get_orderingElem());if(ss.isNullOrUndefined(this.$K)){this.$K=spiff.ListView.createListView(this.get_viewModel().get_orderingTypeListVM(),new iW);this.disposables.add$1(this.$K);this.$H.get_orderingElem().append(this.$K.element)}},$y:function(){var ni=this.get_viewModel().get_orderingAddressingListVM();if(ss.isNullOrUndefined(ni.get_collection())||ni.get_collection().length<=0){lU.$1(this.$H.get_specificDimensionsElem());return}lU.$2(this.$H.get_specificDimensionsElem());if(ss.isNullOrUndefined(this.$I)){this.$9()}this.$p()},$9:function(){var ni=new lF;this.$I=spiff.ListView.createListView(this.get_viewModel().get_orderingAddressingListVM(),ni);this.$I.element.addClass('tabCheckboxList');this.disposables.add$1(this.$I);this.$I.addToDom(this.$H.get_specificDimensionsElem());var nj=new spiff.ListViewDragSortFeedback;nj.set_avatarCreator(ni);var nk=nj;this.$I.set_dragFeedback(nk);this.disposables.add$1(nk)},dispose:function(){this.$J=tab.MiscUtil.dispose$1(this.$J);ss.makeGenericType(spiff.BaseView$1,[lV]).prototype.dispose.call(this)},$p:function(){if(ss.isNullOrUndefined(this.get_orderingAddressingListView())){return}var ni=this.get_viewModel().get_orderingAddressingListVM().get_collection().length>this.get_maxVisibleOrderingAddressingItems();if(ni){if(ss.isNullOrUndefined(this.$J)){this.get_orderingAddressingListView().element.detach();var nj=new spiff.ScrollableViewModel.$ctor1(true);nj.set_content(this.get_orderingAddressingListView().element[0]);nj.set_scrollY(true);this.$J=nj;var nk=spiff.ScrollableView.createScrollableView(this.$J);nk.addToDom(this.get_dom().get_specificDimensionsElem());this.get_orderingAddressingListView().useScrollableView(nk)}this.updateSpecificDimensionsHeight();this.$J.triggerRefresh()}else{if(ss.isValue(this.$J)){this.get_orderingAddressingListView().element.detach();this.$J=tab.MiscUtil.dispose$1(this.$J);this.get_orderingAddressingListView().addToDom(this.get_dom().get_specificDimensionsElem());this.get_orderingAddressingListView().set_scrollHandler(null)}this.updateSpecificDimensionsHeight()}},updateSpecificDimensionsHeight:function(){if(ss.isNullOrUndefined(this.$I)){return}var ni=this.$I.get_itemViews()[0].element.outerHeight(true);this.$H.get_specificDimensionsElem().css({height:ni*this.get_viewModel().get_orderingAddressingListVM().get_collection().length+3+'px','max-height':ni*this.get_maxVisibleOrderingAddressingItems()+3+'px'})},$x:function(){if(this.get_viewModel().get_sortState()==='widget-state-hidden'){lU.$1(this.$H.get_sortElem());return}lU.$2(this.$H.get_sortElem());if(ss.isNullOrUndefined(this.$L)){var ni=new spiff.ComboBoxTemplate;ni.domRoot.addClass(spiff.ComboBoxView.classesForTheme[3]).addClass(spiff.ComboBoxView.noIconClass);this.$L=new spiff.Button(ni.domRoot);this.$L.onClick(ss.mkdel(this,function(){this.get_viewModel().showSortOptions(this.$L.element)}));this.$H.get_sortElem().find('.tabTableCalcLabeledCombo').append(this.$L.element);this.disposables.add$1(this.$L);this.disposables.add$1(ni)}var nj=this.$L.element.find('.tabComboBoxName');nj.text(this.get_viewModel().get_sortModeCaption()).attr('title',this.get_viewModel().get_sortModeCaption());this.$L.set_disabled(this.get_viewModel().get_sortState()==='widget-state-disabled');this.$L.element.toggleClass('invalid',this.get_viewModel().get_tableCalcSortOptionVM().get_shouldShowSortFieldSelectionAsInvalid());lU.$3(this.$H.get_sortElem().find('.label'),this.get_viewModel().get_sortState()==='widget-state-disabled')},$t:function(){if(this.get_viewModel().get_rankTypeState()==='widget-state-hidden'){lU.$1(this.$H.get_rankTypeElem());return}lU.$2(this.$H.get_rankTypeElem());lU.$0(this.$H.get_rankTypeElem(),'rankCombo',this.get_viewModel().get_rankTypeComboBoxVM())},$w:function(){lU.$2(this.$H.get_sortDirectionElem());lU.$0(this.$H.get_sortDirectionElem(),'sortDirCombo',this.get_viewModel().get_sortDirectionComboBoxVM())},$u:function(){if(this.get_viewModel().get_customRelativeToState()==='widget-state-hidden'){lU.$1(this.$H.get_relativeToElem());return}lU.$2(this.$H.get_relativeToElem());lU.$0(this.$H.get_relativeToElem().find('.tabTableCalcLabeledCombo'),'relativeToCombo',this.get_viewModel().get_customRelativeToComboBoxVM());lU.$3(this.$H.get_relativeToElem().find('.label'),this.get_viewModel().get_customRelativeToState()==='widget-state-disabled')},$v:function(){if(this.get_viewModel().get_restartEveryState()==='widget-state-hidden'){lU.$1(this.$H.get_restartEveryElem());return}lU.$2(this.$H.get_restartEveryElem());lU.$0(this.$H.get_restartEveryElem().find('.tabTableCalcLabeledCombo'),'restartEveryCombo',this.get_viewModel().get_restartEveryComboBoxVM());lU.$3(this.$H.get_restartEveryElem().find('.label'),this.get_viewModel().get_restartEveryState()==='widget-state-disabled')},$o:function(){if(this.get_viewModel().get_customNullIfIncompleteState()==='widget-state-hidden'){lU.$1(this.$H.get_nullIfIncompleteElem());return}if(ss.isNullOrUndefined(this.$G)){this.$G=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcWindowNullSetting,this.get_viewModel().get_customNullIfIncomplete());this.$G.addToDom(this.$H.get_nullIfIncompleteElem());this.$G.add_propertyChanged(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$G.remove_propertyChanged(ss.mkdel(this,this.$a));this.$G=tab.MiscUtil.dispose$1(this.$G)})))}lU.$2(this.$H.get_nullIfIncompleteElem());this.$G.set_selected(this.get_viewModel().get_customNullIfIncomplete());this.$G.set_disabled(this.get_viewModel().get_customNullIfIncompleteState()==='widget-state-disabled')},$C:function(){lU.$2(this.$H.get_windowOptionsElem());if(ss.isNullOrUndefined(this.$M)){var ni=new spiff.ComboBoxTemplate;ni.domRoot.addClass(spiff.ComboBoxView.classesForTheme[3]).addClass(spiff.ComboBoxView.noIconClass);this.$M=new spiff.Button(ni.domRoot);var nj=this.get_viewModel().get_typeSpecificTableCalcVM();this.$M.onClick(ss.mkdel(this,function(nl){nj.showWindowOptions(this.$M.element)}));this.$H.get_windowOptionsElem().append(this.$M.element);this.disposables.add$1(this.$M);this.disposables.add$1(ni)}var nk=this.$M.element.find('.tabComboBoxName');nk.text(this.get_viewModel().get_summaryCaption())},$8:function(ni,nj){if(nj.get_propertyName()==='selected'){this.get_viewModel().computeCompoundedRateChanged(this.$E.get_selected())}},$7:function(ni,nj){if(ss.isNullOrUndefined(this.$D)){return}var nk=this.$D.get_selected();this.get_viewModel().allPagesChanged(nk)},$a:function(ni,nj){if(ss.isNullOrUndefined(this.$G)){return}var nk=this.$G.get_selected();this.get_viewModel().customNullIfIncompleteChanged(nk)}},{$2:function(ni){if(ss.isNullOrUndefined(ni)){return}ni.toggleClass('hide',false)},$1:function(ni){if(ss.isNullOrUndefined(ni)){return}ni.toggleClass('hide',true)},$3:function(ni,nj){if(ss.isNullOrUndefined(ni)){return}ni.toggleClass('disabled',nj)},$0:function(ni,nj,nk){if(ni.find('.'+nj).length===0){var nl=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[nk]).element;nl.addClass(nj);ni.append(nl)}}});var lV=global.tab.TableCalcEditorViewModel=ss.mkType(a,'tab.TableCalcEditorViewModel',function(ni){this.$3=null;this.$6=null;this.$4=null;this.$5=null;this.$8=null;this.$7=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$3=ni;this.$4=new lW(this.$3.get_tableCalcOrderingModel());this.$5=new ma(this.$3.get_tableCalcOrderingModel());this.$3.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$6=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$6.add_selectedItemChanged(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_selectedItemChanged(ss.mkdel(this,this.$1));this.$6.dispose()})));this.onModelUpdated()},{add_tableCalcUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_tableCalcUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},add_tableCalcTitleUpdated:function(ni){this.$2$2=ss.delegateCombine(this.$2$2,ni)},remove_tableCalcTitleUpdated:function(ni){this.$2$2=ss.delegateRemove(this.$2$2,ni)},get_title:function(){return this.$7},set_title:function(ni){if(ss.isValue(this.$7)&&ss.referenceEquals(this.$7,ni)){return}this.$7=ni;this.raiseActionEvent(this.$2$2)},get_hasTableCalc:function(){return this.$3.get_hasTableCalc()},get_tableCalcTypeWidgetState:function(){return this.$3.get_tableCalcTypeWidgetState()},get_tableCalcType:function(){return this.$3.get_tableCalcType()},get_tableCalcTypeComboBoxVM:function(){return this.$6},get_tableCalcSortOptionVM:function(){return this.$5},get_atTheLevelComboBoxVM:function(){return this.$4.get_atTheLevelComboBoxVM()},get_restartEveryComboBoxVM:function(){return this.$4.get_restartEveryComboBoxVM()},get_orderingType:function(){return this.$4.get_orderingType()},get_orderingTypeListVM:function(){return this.$4.get_orderingTypeListVM()},get_orderingAddressingListVM:function(){return this.$4.get_addressingListVM()},get_addressingIndexes:function(){return this.$4.get_addressingIndexes()},get_atTheLevelState:function(){return this.$4.get_atTheLevelState()},get_restartEveryState:function(){return this.$4.get_restartEveryState()},get_sortState:function(){return this.$5.get_sortState()},get_sortModeCaption:function(){return this.$5.get_sortModeCaption()},get_isSortFieldInvalid:function(){return this.$5.get_isSortFieldInvalid()},get_specificDimensionEnabled:function(){return this.$4.get_specificDimensionEnabled()},get_differenceFromComboBoxVM:function(){return this.$8.get_differenceFromComboBoxVM()},get_computeCompoundedRate:function(){return this.$8.get_computeCompoundedRate()},get_computeCompoundedRateState:function(){return this.$8.get_computeCompoundedRateState()},get_rankTypeComboBoxVM:function(){return this.$8.get_rankComboBoxVM()},get_rankTypeState:function(){return this.$8.get_rankTypeState()},get_sortDirectionComboBoxVM:function(){return this.$8.get_sortDirectionComboBoxVM()},get_aggregationComboBoxVM:function(){return this.$8.get_aggComboBoxVM()},get_typeSpecificTableCalcVM:function(){return this.$8},get_allPages:function(){return this.$8.get_allPages()},get_allPagesState:function(){return this.$8.get_allPagesState()},get_customRelativeToState:function(){return this.$8.get_relativeToState()},get_customRelativeToComboBoxVM:function(){return this.$8.get_relativeToComboBoxVM()},get_customNullIfIncomplete:function(){return this.$8.get_nullIfIncomplete()},get_customNullIfIncompleteState:function(){return this.$8.get_nullIfIncompleteState()},get_customAllPages:function(){return this.$8.get_allPages()},get_customAllPagesState:function(){return this.$8.get_allPagesState()},get_nestedCalcsWidgetState:function(){return this.$8.get_nestedCalcsWidgetState()},get_nestedCalcsComboBoxVM:function(){return this.$8.get_nestedCalcsComboBoxVM()},get_summaryCaption:function(){return this.$8.get_windowModel().get_summaryCaption()},dispose:function(){if(ss.isValue(this.$3.get_typeSpecificTableCalcModel())){this.$8.remove_typeSpecificViewModelUpdated(ss.mkdel(this,this.$0));this.$8=tab.MiscUtil.dispose$1(this.$8)}this.$4.dispose();this.$5.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},onModelUpdated:function(){if(!this.get_hasTableCalc()){return}this.$2();if(this.createTypeSpecificTableCalcViewModel()){this.$8.onModelUpdated()}this.raiseActionEvent(this.$2$1)},showSortOptions:function(ni){spiff.UberPopupViewModel.createForContent$1(this.$5,ni,null,false).show()},$2:function(){var ni=[];for(var nj=0,nk=this.$3.get_tableCalcTypeValues().length;nj<nk;nj++){ni.push(new spiff.ComboBoxItem(null,this.$3.get_tableCalcTypeCaptions()[nj],this.$3.get_tableCalcTypeValues()[nj],null,null))}this.$6.setItems(ni);this.$6.set_selectedItem(this.$6.get_items()[this.$3.get_tableCalcTypeIndex()])},createTypeSpecificTableCalcViewModel:function(){var ni=null;switch(this.$3.get_tableCalcType()){case'diff':case'pct-diff':case'pct-value':{ni=fd;break}case'pct-total':{ni=jb;break}case'rank':case'pct-rank':{ni=jz;break}case'cumulative':{ni=dP;break}case'window':{ni=mO;break}case'custom':{ni=dR;break}default:{break}}if(ss.isNullOrUndefined(ni)||ss.isValue(this.$8)&&ss.referenceEquals(ss.getInstanceType(this.$8),ni)){return false}if(ss.isValue(this.$8)){this.$8.remove_typeSpecificViewModelUpdated(ss.mkdel(this,this.$0));this.$8=tab.MiscUtil.dispose$1(this.$8)}this.$8=new ni(this.$3.get_typeSpecificTableCalcModel());this.$8.add_typeSpecificViewModelUpdated(ss.mkdel(this,this.$0));return true},$1:function(ni){if(ni.get_data()===this.get_tableCalcType()){return}var nj=new tab.TableCalcChangeTypeCmd;nj.set_uiBlocking('immediately');nj.set_newCalcType(ni.get_data());nj.set_calcNestingLevel(this.$3.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$3.get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(nk){this.$2()}))},$0:function(){this.raiseActionEvent(this.$2$1)},allPagesChanged:function(ni){if(this.get_tableCalcType()==='custom'){this.$8.allPagesChanged(ni);return}this.$8.allPagesChanged(ni)},customNullIfIncompleteChanged:function(ni){this.$8.customNullIfIncompleteChanged(ni)},computeCompoundedRateChanged:function(ni){this.$8.computeCompoundedRateChanged(ni)}},{new$1:function(ni){return new lV(ni)}});var lW=global.tab.TableCalcOrderingViewModel=ss.mkType(a,'tab.TableCalcOrderingViewModel',function(ni){this.$g=null;this.$f=null;this.$j=null;this.$i=null;this.$h=null;this.$e=null;this.$d=null;spiff.BaseViewModel.call(this);this.$g=ni;this.$g.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$h=[];this.$i=new spiff.ListViewModel(this.$h,0);this.$i.add_selectionChanged(ss.mkdel(this,this.$3));this.$f=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$f.add_selectedItemChanged(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_selectedItemChanged(ss.mkdel(this,this.$2));this.$f.dispose()})));this.$j=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$j.add_selectedItemChanged(ss.mkdel(this,this.$5));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.remove_selectedItemChanged(ss.mkdel(this,this.$5));this.$j.dispose()})));this.$d=[];this.$e=new spiff.ListViewModel(this.$d,2);this.$e.add_selectionChanged(ss.mkdel(this,this.orderingAddressingSelectionChanged));this.$e.add_itemMoved(ss.mkdel(this,this.$1));this.onModelUpdated()},{get_orderingType:function(){return this.$g.get_orderingTypeValues()[this.$g.get_orderingTypeIndex()]},get_addressingListItemVMs:function(){return this.$d},get_atTheLevelState:function(){return this.$g.get_atTheLevelState()},get_restartEveryState:function(){return this.$g.get_restartEveryState()},get_sortState:function(){return this.$g.get_sortState()},get_atTheLevelComboBoxVM:function(){return this.$f},get_orderingTypeListVM:function(){return this.$i},get_restartEveryComboBoxVM:function(){return this.$j},get_addressingListVM:function(){return this.$e},get_addressingIndexes:function(){return this.$g.get_addressingIndexes()},get_specificDimensionEnabled:function(){return this.$g.get_addressingState()==='widget-state-enabled'},dispose:function(){this.$i.remove_selectionChanged(ss.mkdel(this,this.$3));this.$i.dispose();this.$h=tab.MiscUtil.dispose(this.$h);this.$e.remove_selectionChanged(ss.mkdel(this,this.orderingAddressingSelectionChanged));this.$e.remove_itemMoved(ss.mkdel(this,this.$1));this.$e.dispose();this.$d=tab.MiscUtil.dispose(this.$d);spiff.BaseViewModel.prototype.dispose.call(this)},onModelUpdated:function(){if(!this.$g.get_hasOrdering()){return}this.$a();this.$7();this.$8();this.$b()},$a:function(){var ni=this.$g.get_orderingTypeValues().length;var nj=ni!==this.$h.length;for(var nk=0;!nj&&nk<ni;nk++){nj=this.$h[nk].get_data().get_orderingTypeValue()!==this.$g.get_orderingTypeValues()[nk]}if(!nj){this.$i.selectItemAtIndex(this.$g.get_orderingTypeIndex());return}this.$h=tab.MiscUtil.dispose(this.$h);this.$h=[];for(var nl=0;nl<ni;nl++){var nm=new iX;nm.set_orderingTypeCaption(this.$g.get_orderingTypeCaptions()[nl]);nm.set_orderingTypeValue(this.$g.get_orderingTypeValues()[nl]);var nn=nm;var no=this.$g.get_orderingTypeIndex()===nl;var np=spiff.ListItemViewModel.newListItem('orderType_'+nl,nn,no,false,nn.get_orderingTypeValue()==='field');this.$h.push(np)}this.$i.update(this.$h)},$7:function(){if(this.$0()){this.$4()}else{this.$6()}this.$e.set_enabled(this.get_specificDimensionEnabled())},$4:function(){this.$d=tab.MiscUtil.dispose(this.$d);var ni=new J;ni.addressingFieldNames=this.$g.get_addressingValues();ni.addressingCaptions=this.$g.get_addressingCaptions();ni.selectedAddressingIndexes=this.$g.get_addressingIndexes();ni.invalidAddressingIndexes=this.$g.get_addressingInvalidIndexes();var nj=ni;this.$d=nj.create();this.$e.update(this.$d)},$6:function(){this.$e.setSelectedItems(this.$g.get_addressingIndexes());this.$e.setInvalidItems(this.$g.get_addressingInvalidIndexes())},$0:function(){var ni=this.$g.get_addressingValues();var nj=this.$g.get_addressingCaptions();if(this.$e.get_collection().length!==ni.length){return true}for(var nk=0,nl=ni.length;nk<nl;nk++){var nm=this.$e.get_collection()[nk].get_data();if(!ss.referenceEquals(nm.get_addressingValue(),ni[nk])||!ss.referenceEquals(nm.get_addressingName(),nj[nk])){return true}}return false},$8:function(){if(this.$g.get_atTheLevelState()!=='widget-state-enabled'){this.$f.clearItems();this.$f.set_enabled(false);return}this.$9()},$9:function(){var ni=new hV;ni.fieldNames=this.$g.get_atTheLevelValues();ni.fieldCaptions=this.$g.get_atTheLevelCaptions();ni.selectionIndex=this.$g.get_atTheLevelIndex();ni.isSelectionInvalid=this.$g.get_isAtTheLevelFieldInvalid();ni.invalidFieldCaption=this.$g.get_atTheLevelInvalidFieldCaption();ni.specialCaption=this.$g.get_atTheLevelSpecialCaption();ni.specialValue=this.$g.get_atTheLevelSpecialValue();var nj=ni;nj.update(this.$f)},$b:function(){if(this.$g.get_restartEveryState()!=='widget-state-enabled'){this.$j.clearItems();this.$j.set_enabled(false);return}this.$c()},$c:function(){var ni=new kG;ni.fieldNames=this.$g.get_restartEveryValues();ni.fieldCaptions=this.$g.get_restartEveryCaptions();ni.selectionIndex=this.$g.get_restartEveryIndex();ni.isSelectionInvalid=this.$g.get_isRestartEveryFieldInvalid();ni.specialCaption=this.$g.get_restartEverySpecialCaption();ni.specialValue=this.$g.get_restartEverySpecialValue();var nj=ni;nj.update(this.$j)},$3:function(){var ni=this.$i.get_firstSelectedItem();if(ss.isNullOrUndefined(ni)){return}var nj=ni.get_data().get_orderingTypeValue();if(nj===this.get_orderingType()){return}var nk=new tab.TableCalcSetOrderingTypeCmd;nk.set_uiBlocking('immediately');nk.set_orderingType(nj);nk.set_calcNestingLevel(this.$g.get_tableCalcIdentifier().get_nestingLevel());nk.set_nestedCalcField(this.$g.get_tableCalcIdentifier().get_fieldName());nk.invoke().fail(ss.mkdel(this,function(nl){this.$a()}))},orderingAddressingSelectionChanged:function(){var ni=this.$e.get_selectedItems().map(function(nk){return nk.get_data().get_addressingValue()});var nj=new tab.TableCalcSetAddressingFieldsCmd;nj.set_uiBlocking('immediately');nj.set_addressingFields(ni);nj.set_calcNestingLevel(this.$g.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$g.get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(nk){this.$7()}))},$1:function(ni,nj){var nk=this.$e.get_collection().map(function(nn){return nn.get_data().get_addressingValue()});var nl=this.$e.get_selectedItems().map(function(nn){return nn.get_data().get_addressingValue()});var nm=new tab.TableCalcSetAddressingFieldsOrderCmd;nm.set_uiBlocking('immediately');nm.set_availableAddressingFields(nk);nm.set_addressingFields(nl);nm.set_calcNestingLevel(this.$g.get_tableCalcIdentifier().get_nestingLevel());nm.set_nestedCalcField(this.$g.get_tableCalcIdentifier().get_fieldName());nm.invoke().fail(ss.mkdel(this,function(nn){this.$7()}))},$2:function(ni){if(!lW.$0(ni,this.$g.get_atTheLevelValue(),this.$g.get_isAtTheLevelFieldInvalid())){return}var nj=new tab.TableCalcSetAtTheLevelFieldCmd;nj.set_uiBlocking('immediately');nj.set_atTheLevelField(ni.get_data());nj.set_calcNestingLevel(this.$g.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$g.get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(nk){this.$8()}))},$5:function(ni){if(!lW.$0(ni,this.$g.get_restartEveryValue(),this.$g.get_isRestartEveryFieldInvalid())){return}var nj=new tab.TableCalcSetRestartEveryFieldCmd;nj.set_uiBlocking('immediately');nj.set_restartEveryField(ni.get_data());nj.set_calcNestingLevel(this.$g.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$g.get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(nk){this.$b()}))}},{$0:function(ni,nj,nk){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.get_data())){return false}if(nk){return true}return!ss.referenceEquals(ni.get_data(),nj)}});var lX=global.tab.TableCalcReferenceViewModel=ss.mkType(a,'tab.TableCalcReferenceViewModel',function(ni){this.$2=null;this.$3=null;this.$4=0;spiff.BaseViewModel.call(this);this.$2=ni;this.get_model().add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_model().remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$3=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$3.add_selectedItemChanged(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_selectedItemChanged(ss.mkdel(this,this.$1));this.$3.dispose()})));this.onModelUpdated()},{get_model:function(){return this.$2},get_referenceComboBoxVM:function(){return this.$3},get_referenceWidgetState:function(){return this.get_model().get_referenceWidgetState()},onModelUpdated:function(){this.$4=this.$2.get_selectionIndex();if(this.$2.get_referenceWidgetState()!=='widget-state-enabled'){this.$3.clearItems();this.$3.set_enabled(false);return}this.$3.set_enabled(true);var ni=[];for(var nj=0,nk=this.$2.get_referenceOptionsSets().length;nj<nk;nj++){var nl=[];var nm=[];switch(this.$2.get_referenceOptionsSets()[nj]){case'reference-options-set-relative':{nl=this.$2.get_relativeCaptions();for(var nn=0,no=this.$2.get_relativeValues().length;nn<no;nn++){nm.push(new jA.$ctor2(this.$2.get_relativeValues()[nn]))}break}case'reference-options-set-fixed':{nl=this.$2.get_fixedCaptions();for(var np=0,nq=this.$2.get_fixedValues().length;np<nq;np++){nm.push(new jA.$ctor1(this.$2.get_fixedValues()[np]))}break}case'reference-options-set-parameter':{nl=this.$2.get_paramCaptions();for(var nr=0,ns=this.$2.get_paramValues().length;nr<ns;nr++){nm.push(new jA(this.$2.get_paramValues()[nr]))}break}default:{break}}var nt=nm.length;if(ni.length>0&&nt>0){if(this.$4>=ni.length){this.$4++}ni.push(new spiff.DividerComboBoxItem)}for(var nu=0;nu<nt;nu++){ni.push(new spiff.ComboBoxItem(null,nl[nu],nm[nu],null,null))}}if(ni.length>0){this.$3.setItems(ni);this.$3.set_selectedItem(this.$0())}else{this.$3.clearItems()}},$0:function(){return((this.$4>=0)?this.get_referenceComboBoxVM().get_items()[this.$4]:null)},$1:function(ni){if(ss.isNullOrUndefined(ni)){return}if(ss.referenceEquals(ni,this.$0())){return}var nj=new tab.TableCalcSetReferenceOptionsCmd;nj.set_uiBlocking('immediately');nj.set_calcNestingLevel(this.$2.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$2.get_tableCalcIdentifier().get_fieldName());var nk=nj;var nl=ni.get_data();switch(nl.set){case'reference-options-set-relative':{nk.set_relativeAddress(nl.relativeAddress);break}case'reference-options-set-fixed':{nk.set_fixedTupleIndex(nl.fixedTupleIndex);break}case'reference-options-set-parameter':{nk.set_paramName(nl.parameterName);break}default:{break}}nk.invoke().fail(ss.mkdel(this,function(){this.get_referenceComboBoxVM().set_selectedItem(this.$0())}))}});var lY=global.tab.TableCalcSortOptionTemplate=ss.mkType(a,'tab.TableCalcSortOptionTemplate',function(){this.$3=null;this.$4=null;this.$6=null;this.$1=null;this.$5=null;this.$2=null;spiff.Template.call(this,$("\n<div class='tabSortOptionRoot'>\n    <div class='tabSortOptionMode tabRow'>\n        <span class='tabAutomatic'></span>\n        <span class='tabCustom'></span>\n    </div>\n    <div class='tabSortOptionFieldAgg tabRow'>\n        <span class='tabField'></span>\n        <span class='tabAgg'></span>\n    </div>\n    <div class='tabSortOptionAscDesc tabRow'>\n        <span class='tabDesc'></span>\n        <span class='tabAsc'></span>\n    </div>\n</div>"));this.$3=this.getElementBySelector('.tabAutomatic');this.$4=this.getElementBySelector('.tabCustom');this.$6=this.getElementBySelector('.tabField');this.$1=this.getElementBySelector('.tabAgg');this.$5=this.getElementBySelector('.tabDesc');this.$2=this.getElementBySelector('.tabAsc')},{get_automaticDom:function(){return this.$3},get_customDom:function(){return this.$4},get_fieldDom:function(){return this.$6},get_aggDom:function(){return this.$1},get_descDom:function(){return this.$5},get_ascDom:function(){return this.$2}});var lZ=global.tab.TableCalcSortOptionView=ss.mkType(a,'tab.TableCalcSortOptionView',function(ni){this.$g=null;this.$h=null;this.$l=null;this.$k=null;this.$e=null;this.$i=null;this.$f=null;this.$j=null;ss.makeGenericType(spiff.BaseView$1,[ma]).call(this,ni,new lY);this.get_viewModel().add_modelUpdated(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_modelUpdated(ss.mkdel(this,this.$b))})));this.$8();this.$7();this.$k=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.get_viewModel().get_fieldComboBoxVM()]);this.$e=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.get_viewModel().get_aggComboBoxVM()]);this.$b()},{get_dom:function(){return this.get_template()},$8:function(){this.$g=spiff.LabelToggleButton.newRadioButton(tab.Strings.TableCalcSortAutomatic,false);this.disposables.add$1(this.$g);this.$h=spiff.LabelToggleButton.newRadioButton(tab.Strings.TableCalcSortCustom,false);this.disposables.add$1(this.$h);this.$l=new spiff.SelectableGroup;this.$l.addItem(this.$g);this.$l.addItem(this.$h);this.$l.add_selectionChanged(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.remove_selectionChanged(ss.mkdel(this,this.$a))})));this.disposables.add$1(this.$l)},$a:function(){var ni=this.$g.get_selected();this.get_viewModel().sortModeChanged(ni)},$7:function(){this.$i=spiff.LabelToggleButton.newRadioButton(tab.Strings.TableCalcSortDescending,false);this.disposables.add$1(this.$i);this.$f=spiff.LabelToggleButton.newRadioButton(tab.Strings.TableCalcSortAscending,false);this.disposables.add$1(this.$f);this.$j=new spiff.SelectableGroup;this.$j.addItem(this.$i);this.$j.addItem(this.$f);this.$j.add_selectionChanged(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.remove_selectionChanged(ss.mkdel(this,this.$9))})));this.disposables.add$1(this.$j)},$9:function(){var ni=(this.$f.get_selected()?'asc':'desc');this.get_viewModel().$0(ni)},$b:function(){this.$d();this.$c()},onViewModelPropertyChanged:function(ni,nj){if(nj.get_propertyName()==='SortMode'){this.$d()}else if(nj.get_propertyName()==='SortDirection'){this.$c()}},$d:function(){if(this.get_viewModel().get_sortModeIsAuto()){this.$l.selectItem(this.$g)}else{this.$l.selectItem(this.$h)}},$c:function(){this.$i.set_disabled(this.get_viewModel().get_sortModeIsAuto());this.$f.set_disabled(this.get_viewModel().get_sortModeIsAuto());if(this.get_viewModel().get_sortDirection()==='desc'){this.$j.selectItem(this.$i)}else if(this.get_viewModel().get_sortDirection()==='asc'){this.$j.selectItem(this.$f)}else{}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.get_dom().get_automaticDom().append(this.$g.element);this.get_dom().get_customDom().append(this.$h.element);this.get_dom().get_fieldDom().append(this.$k.element);if(this.get_viewModel().get_sortAggState()!=='widget-state-hidden'){this.get_dom().get_aggDom().append(this.$e.element)}this.get_dom().get_descDom().append(this.$i.element);this.get_dom().get_ascDom().append(this.$f.element)}});var ma=global.tab.TableCalcSortOptionViewModel=ss.mkType(a,'tab.TableCalcSortOptionViewModel',function(ni){this.$9=null;this.$8=null;this.$7=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$9=ni;this.$9.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$9.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$8=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$8.add_selectedItemChanged(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.remove_selectedItemChanged(ss.mkdel(this,this.$2));this.$8.dispose()})));this.$7=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$7.add_selectedItemChanged(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_selectedItemChanged(ss.mkdel(this,this.$1));this.$7.dispose()})));this.onModelUpdated()},{add_modelUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_modelUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_tableCalcOrderingModel:function(){return this.$9},get_viewModel:function(){return this},get_viewType:function(){return lZ},get_fieldComboBoxVM:function(){return this.$8},get_aggComboBoxVM:function(){return this.$7},get_sortState:function(){return this.$9.get_sortState()},get_sortModeIsAuto:function(){return this.$9.get_sortModeIsAuto()},get_sortModeCaption:function(){return this.$9.get_sortModeCaption()},get_sortField:function(){return this.$9.get_sortField()},get_isSortFieldInvalid:function(){return this.$9.get_isSortFieldInvalid()},get_sortAggState:function(){return this.$9.get_sortAggState()},get_sortAgg:function(){return this.$9.get_sortAgg()},get_sortDirection:function(){return this.$9.get_sortDirectionValues()[this.$9.get_sortDirectionIndex()]},get_shouldShowSortFieldSelectionAsInvalid:function(){return!this.get_sortModeIsAuto()&&this.get_isSortFieldInvalid()},onModelUpdated:function(){if(!this.$9.get_hasOrdering()){return}if(this.$9.get_sortState()!=='widget-state-enabled'){return}this.$5();if(this.$9.get_sortAggState()!=='widget-state-hidden'){this.$3()}this.raiseActionEvent(this.$2$1)},$6:function(){this.notifyPropertyChanged('SortMode')},$5:function(){var ni=[];if(this.$9.get_sortModeIsAuto()){ni.push(new spiff.ComboBoxItem(null,tab.Strings.SelectText,null,null,null));this.$8.setItems(ni);this.$8.set_selectedItem(this.$8.get_items()[0]);this.$8.set_enabled(false)}else{var nj=new lE;nj.fieldNames=this.$9.get_sortFieldValues();nj.fieldCaptions=this.$9.get_sortFieldCaptions();nj.selectionIndex=this.$9.get_sortFieldIndex();nj.isSelectionInvalid=this.$9.get_isSortFieldInvalid();var nk=nj;nk.update(this.$8)}},$3:function(){var ni=[];if(this.$9.get_sortModeIsAuto()){ni.push(new spiff.ComboBoxItem(null,tab.Strings.SelectText,null,null,null));this.$7.setItems(ni);this.$7.set_selectedItem(this.$7.get_items()[0]);this.$7.set_enabled(false)}else{for(var nj=0,nk=this.$9.get_sortAggValues().length;nj<nk;nj++){ni.push(new spiff.ComboBoxItem(null,this.$9.get_sortAggCaptions()[nj],this.$9.get_sortAggValues()[nj],null,null))}this.$7.setItems(ni);this.$7.set_selectedItem(this.$7.get_items()[this.$9.get_sortAggIndex()]);this.$7.set_enabled(true)}},$4:function(){this.notifyPropertyChanged('SortDirection')},updateUberPopupViewModel:function(ni){},disposeViewModel:function(){this.dispose()},sortModeChanged:function(ni){if(ni===this.get_sortModeIsAuto()){return}var nj=new tab.TableCalcSetSortModeCmd;nj.set_sortModeIsAuto(ni);nj.set_calcNestingLevel(this.$9.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$9.get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(nk){this.$6()}))},$2:function(ni){if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(ni.get_data())||ss.referenceEquals(ni.get_data(),this.get_sortField())){return}var nj=new tab.TableCalcSetSortFieldCmd;nj.set_uiBlocking('immediately');nj.set_sortField(ni.get_data());nj.set_calcNestingLevel(this.$9.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$9.get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(nk){this.$5()}))},$1:function(ni){if(ss.isNullOrUndefined(ni)||ni.get_data()===this.get_sortAgg()){return}var nj=new tab.TableCalcSetSortAggregationCmd;nj.set_sortAggregation(ni.get_data());nj.set_calcNestingLevel(this.$9.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$9.get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(nk){if(this.$9.get_sortAggState()!=='widget-state-hidden'){this.$3()}}))},$0:function(ni){if(ni===this.get_sortDirection()){return}var nj=new tab.TableCalcSetSortDirectionCmd;nj.set_sortDirection(ni);nj.set_calcNestingLevel(this.$9.get_tableCalcIdentifier().get_nestingLevel());nj.set_nestedCalcField(this.$9.get_tableCalcIdentifier().get_fieldName());nj.invoke().fail(ss.mkdel(this,function(nk){this.$4()}))}});var mb=global.tab.TableCalcWindowOptionTemplate=ss.mkType(a,'tab.TableCalcWindowOptionTemplate',function(){this.$1=null;this.$2=null;this.$4=null;this.$5=null;this.$3=null;spiff.Template.call(this,$("\n<div class='tabWindowOptionRoot'>\n    <div class='tabWindowOptionTitle tabRow'></div>\n    <div class='tabWindowOptionAgg tabRow'></div>\n    <div class='tabWindowOptionPreviousValues tabRow'>\n        <span class='tabLabel'></span><span class='tabSpinner'></span>\n    </div>\n    <div class='tabWindowOptionNextValues tabRow'>\n        <span class='tabLabel'></span><span class='tabSpinner'></span>\n    </div>\n    <div class='tabWindowOptionCurrentValue tabRow'></div>\n    <div class='tabWindowOptionNullSetting tabRow'></div>\n</div>"));this.$1=this.getElementBySelector('.tabWindowOptionAgg');this.$2=this.getElementBySelector('.tabWindowOptionCurrentValue');this.$4=this.getElementBySelector('.tabWindowOptionNullSetting');this.$5=this.getElementBySelector('.tabWindowOptionPreviousValues .tabSpinner');this.$3=this.getElementBySelector('.tabWindowOptionNextValues .tabSpinner');this.getElementBySelector('.tabWindowOptionTitle').text(tab.Strings.WindowTableCalcSummarizeUsing);var ni=this.getElementBySelector('.tabWindowOptionPreviousValues .tabLabel');ni.text(tab.Strings.WindowTableCalcPreviousValuesLabel);var nj=this.getElementBySelector('.tabWindowOptionNextValues .tabLabel');nj.text(tab.Strings.WindowTableCalcNextValuesLabel)},{get_aggDom:function(){return this.$1},get_currentValueDom:function(){return this.$2},get_nullSettingDom:function(){return this.$4},get_previousValuesSpinnerDom:function(){return this.$5},get_nextValuesSpinnerDom:function(){return this.$3}});var mc=global.tab.TableCalcWindowOptionView=ss.mkType(a,'tab.TableCalcWindowOptionView',function(ni){this.$e=null;this.$f=null;this.$g=null;ss.makeGenericType(spiff.BaseView$1,[md]).call(this,ni,new mb);this.get_viewModel().add_modelUpdated(ss.mkdel(this,function(){this.$9()}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_modelUpdated(ss.mkdel(this,this.$9))})));this.$e=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.get_viewModel().get_aggComboBoxVM()]);this.$f=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcWindowCurrentValue,true);this.$f.add_propertyChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_propertyChanged(ss.mkdel(this,this.$7));this.$f=tab.MiscUtil.dispose$1(this.$f)})));this.$g=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcWindowNullSetting,false);this.$g.add_propertyChanged(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_propertyChanged(ss.mkdel(this,this.$8));this.$g=tab.MiscUtil.dispose$1(this.$g)})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){ReactDOM.unmountComponentAtNode(this.$d().get_previousValuesSpinnerDom().get(0));ReactDOM.unmountComponentAtNode(this.$d().get_nextValuesSpinnerDom().get(0))})));this.$9()},{$d:function(){return this.get_template()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$d().get_aggDom().append(this.$e.element);this.$d().get_currentValueDom().append(this.$f.element);this.$d().get_nullSettingDom().append(this.$g.element)},onViewModelPropertyChanged:function(ni,nj){},$9:function(){this.$c();this.$a();this.$b()},$c:function(){ReactDOM.render(React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'previousValues',start:this.get_viewModel().get_tableCalcWindowOptionModel().get_numberOfPrevValues(),min:this.get_viewModel().get_tableCalcWindowOptionModel().get_minPrevOrNextValues(),max:this.get_viewModel().get_tableCalcWindowOptionModel().get_maxPrevOrNextValues(),onValueUpdated:ss.mkdel(this,function(ni){this.get_viewModel().numberOfPrevValuesChanged(ni)})}),this.$d().get_previousValuesSpinnerDom().get(0));ReactDOM.render(React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'nextValues',start:this.get_viewModel().get_tableCalcWindowOptionModel().get_numberOfNextValues(),min:this.get_viewModel().get_tableCalcWindowOptionModel().get_minPrevOrNextValues(),max:this.get_viewModel().get_tableCalcWindowOptionModel().get_maxPrevOrNextValues(),onValueUpdated:ss.mkdel(this,function(ni){this.get_viewModel().numberOfNextValuesChanged(ni)})}),this.$d().get_nextValuesSpinnerDom().get(0))},$a:function(){this.$f.set_selected(this.get_viewModel().get_tableCalcWindowOptionModel().get_includeCurrentValue())},$b:function(){this.$g.set_selected(this.get_viewModel().get_tableCalcWindowOptionModel().get_nullIfIncomplete())},$7:function(ni,nj){if(ss.isNullOrUndefined(this.$f)){return}var nk=this.$f.get_selected();this.get_viewModel().includeCurrentValueChanged(nk)},$8:function(ni,nj){if(ss.isNullOrUndefined(this.$g)){return}var nk=this.$g.get_selected();this.get_viewModel().nullIfIncompleteChanged(nk)}});var md=global.tab.TableCalcWindowOptionViewModel=ss.mkType(a,'tab.TableCalcWindowOptionViewModel',function(ni){this.$4=null;this.$3=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$4=ni;this.$4.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$3=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.disposables.add$1(this.$3);this.$3.add_selectedItemChanged(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_selectedItemChanged(ss.mkdel(this,this.$0));this.$3.dispose()})));this.onModelUpdated()},{add_modelUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_modelUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_tableCalcWindowOptionModel:function(){return this.$4},get_viewModel:function(){return this},get_viewType:function(){return mc},get_aggComboBoxVM:function(){return this.$3},onModelUpdated:function(){this.$2();this.raiseActionEvent(this.$2$1)},updateUberPopupViewModel:function(ni){},disposeViewModel:function(){this.dispose()},includeCurrentValueChanged:function(ni){if(ni===this.$4.get_includeCurrentValue()){return}var nj=this.$1();nj.set_includeCurrent(ni);nj.invoke().fail(ss.mkdel(this,function(nk){this.raiseActionEvent(this.$2$1)}))},nullIfIncompleteChanged:function(ni){if(ni===this.$4.get_nullIfIncomplete()){return}var nj=this.$1();nj.set_nullIfIncomplete(ni);nj.invoke().fail(ss.mkdel(this,function(nk){this.raiseActionEvent(this.$2$1)}))},numberOfPrevValuesChanged:function(ni){if(ni===this.$4.get_numberOfPrevValues()){return}var nj=this.$1();nj.set_numberOfPrevValues(ni);nj.invoke().fail(ss.mkdel(this,function(nk){this.raiseActionEvent(this.$2$1)}))},numberOfNextValuesChanged:function(ni){if(ni===this.$4.get_numberOfNextValues()){return}var nj=this.$1();nj.set_numberOfNextValues(ni);nj.invoke().fail(ss.mkdel(this,function(nk){this.raiseActionEvent(this.$2$1)}))},$0:function(ni){if(ss.isNullOrUndefined(ni)||ni.get_data()===this.get_tableCalcWindowOptionModel().get_aggregation()){return}var nj=this.$1();nj.set_aggType(ni.get_data());nj.invoke().fail(ss.mkdel(this,function(nk){this.$2()}))},$2:function(){var ni=[];var nj=this.get_tableCalcWindowOptionModel();for(var nk=0,nl=nj.get_aggregationValues().length;nk<nl;nk++){ni.push(new spiff.ComboBoxItem(null,this.get_tableCalcWindowOptionModel().get_aggregationCaptions()[nk],nj.get_aggregationValues()[nk],null,null))}this.$3.setItems(ni);var nm=ss.indexOf(nj.get_aggregationValues(),ss.unbox(nj.get_aggregation()));this.$3.set_selectedItem(this.$3.get_items()[nm]);this.$3.set_enabled(true)},$1:function(){var ni=new tab.TableCalcSetWindowOptionsCmd;ni.set_aggType(ss.unbox(this.get_tableCalcWindowOptionModel().get_aggregation()));ni.set_includeCurrent(this.get_tableCalcWindowOptionModel().get_includeCurrentValue());ni.set_nullIfIncomplete(this.get_tableCalcWindowOptionModel().get_nullIfIncomplete());ni.set_numberOfPrevValues(this.get_tableCalcWindowOptionModel().get_numberOfPrevValues());ni.set_numberOfNextValues(this.get_tableCalcWindowOptionModel().get_numberOfNextValues());ni.set_calcNestingLevel(this.get_tableCalcWindowOptionModel().get_tableCalcIdentifier().get_nestingLevel());ni.set_nestedCalcField(this.get_tableCalcWindowOptionModel().get_tableCalcIdentifier().get_fieldName());return ni}});var me=global.tab.TextEncodingOptionTemplate=ss.mkType(a,'tab.TextEncodingOptionTemplate',function(){this.toggleMarkLabelsCheckboxContainer=null;this.editMarkLabelsButtonContainer=null;this.marksToLabelModeSelectionContainer=null;spiff.Template.call(this,$("<div class='tabAuthTextOptionContent'>\n            <div class='tabToggleMarkLabelsCheckboxContainer'></div>\n            <div class='tabEditMarkLabelsButtonContainer'></div>\n            <div class='tabMarksToLabelContainer'></div>\n        </div>"));this.toggleMarkLabelsCheckboxContainer=this.getElementBySelector('.tabToggleMarkLabelsCheckboxContainer');this.editMarkLabelsButtonContainer=this.getElementBySelector('.tabEditMarkLabelsButtonContainer');this.marksToLabelModeSelectionContainer=this.getElementBySelector('.tabMarksToLabelContainer')});var mf=global.tab.TextEncodingOptionView=ss.mkType(a,'tab.TextEncodingOptionView',function(ni){this.$d=null;this.$a=null;this.$c=null;this.$b=null;ss.makeGenericType(spiff.BaseView$1,[mg]).call(this,ni,new me);this.$a=this.get_template();this.$d=ni},{handlePropertyChanged:function(ni,nj){if(nj.get_propertyName()==='selected'&&this.$c.get_selected()!==this.get_viewModel().get_showMarkLabelsIsChecked()){this.$d.toggleLabels(this.$c.get_selected())}},handleLabelsOnChanged:function(ni){this.$c.set_selected(ni);var nj=this.$b;var nk=new iE;nk.marksToLabelDropdownEnabled=this.get_viewModel().get_showMarkLabelsIsChecked();nk.marksToLabelCurrentMode=this.get_viewModel().get_marksToLabelCurrentMode();nk.currentScope=this.get_viewModel().get_marksToLabelCurrentScope();nk.lineEndsFirstChecked=this.get_viewModel().get_showLineEndsFirstIsChecked();nk.lineEndsLastChecked=this.get_viewModel().get_showLineEndsLastIsChecked();nk.minMaxStartChecked=this.get_viewModel().get_showMinMaxStartIsChecked();nk.minMaxEndChecked=this.get_viewModel().get_showMinMaxEndIsChecked();nk.allowLabelOverlapChecked=this.get_viewModel().get_allowLabelsToOverlapMarksChecked();nk.currentFieldCaption=this.get_viewModel().get_marksToLabelCurrentFieldCaption();nj.setState(nk)},$7:function(){if(ss.isNullOrUndefined(this.$d.get_markLabelsEditButtonViewModel())){return}var ni=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[iq,ip,Object])).call(null,[this.$d.get_markLabelsEditButtonViewModel()]);ni.addToDom(this.$a.editMarkLabelsButtonContainer);this.disposables.add$1(ni)},$8:function(){this.$d.add_labelsOnChanged(ss.mkdel(this,this.handleLabelsOnChanged));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$d.remove_labelsOnChanged(ss.mkdel(this,this.handleLabelsOnChanged))})));this.$c=spiff.LabelToggleButton.newCheckbox(this.$d.get_controlLabel(),this.$d.get_showMarkLabelsIsChecked());this.$c.add_propertyChanged(ss.mkdel(this,this.handlePropertyChanged));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c.remove_propertyChanged(ss.mkdel(this,this.handlePropertyChanged));this.$c.dispose()})));this.$c.tabIndex(3);this.$c.addToDom(this.$a.toggleMarkLabelsCheckboxContainer)},$9:function(){var ni=[];if(ss.isValue(this.get_viewModel().get_fieldsCaptionToNameMap())){ss.arrayAddRange(ni,Object.keys(this.get_viewModel().get_fieldsCaptionToNameMap()))}var nj=new iD;nj.marksToLabelDropdownEnabled=this.get_viewModel().get_showMarkLabelsIsChecked();nj.marksToLabelEnabledModes=this.get_viewModel().get_marksToLabelEnabledModes();nj.marksToLabelCurrentMode=this.get_viewModel().get_marksToLabelCurrentMode();nj.marksToLabelModeChanged=ss.mkdel(this,this.modeChanged);nj.enabledScopes=this.get_viewModel().get_marksToLabelEnabledScopes();nj.currentScope=this.get_viewModel().get_marksToLabelCurrentScope();nj.scopeChanged=ss.mkdel(this,this.scopeChanged);nj.fieldsCaptions=ni;nj.currentFieldCaption=this.get_viewModel().get_marksToLabelCurrentFieldCaption();var nk=this.get_viewModel();nj.fieldCaptionChanged=ss.mkdel(nk,nk.marksToLabelFieldCaptionChanged);nj.minMaxStartChanged=ss.mkdel(this,this.minMaxStartChanged);nj.minMaxEndChanged=ss.mkdel(this,this.minMaxEndChanged);nj.lineEndsFirstChanged=ss.mkdel(this,this.lineEndsFirstChanged);nj.lineEndsLastChanged=ss.mkdel(this,this.lineEndsLastChanged);nj.allowLabelOverlapChanged=ss.mkdel(this,this.allowLabelOverlapChanged);nj.minMaxStartChecked=this.get_viewModel().get_showMinMaxStartIsChecked();nj.minMaxEndChecked=this.get_viewModel().get_showMinMaxEndIsChecked();nj.lineEndFirstChecked=this.get_viewModel().get_showLineEndsFirstIsChecked();nj.lineEndLastChecked=this.get_viewModel().get_showLineEndsLastIsChecked();nj.allowLabelOverlapChecked=this.get_viewModel().get_allowLabelsToOverlapMarksChecked();nj.shouldShowAllowLabelOverlapCheckbox=this.get_viewModel().get_allowLabelsToOverlapIsVisible();this.$b=ReactDOM.render(React.createElement(iC,nj),this.$a.marksToLabelModeSelectionContainer.get(0))},modeChanged:function(ni){this.get_viewModel().marksToLabelModeChanged(ni)},scopeChanged:function(ni){this.get_viewModel().marksToLabelScopeChanged(ni)},fieldCaptionChanged:function(ni){this.get_viewModel().marksToLabelFieldCaptionChanged(ni)},minMaxStartChanged:function(ni){this.get_viewModel().marksToLabelMinMaxStartCheckboxChanged(ni)},minMaxEndChanged:function(ni){this.get_viewModel().marksToLabelMinMaxEndCheckboxChanged(ni)},lineEndsFirstChanged:function(ni){this.get_viewModel().marksToLabelLineEndFirstCheckboxChanged(ni)},lineEndsLastChanged:function(ni){this.get_viewModel().marksToLabelLineEndLastCheckboxChanged(ni)},allowLabelOverlapChanged:function(ni){this.get_viewModel().marksToLabelAllowOverlapCheckboxChanged(ni)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(this.$d.get_showMarkLabelsIsEnabled()){this.$8();this.$9()}this.$7()}});var mg=global.tab.TextEncodingOptionViewModel=ss.mkType(a,'tab.TextEncodingOptionViewModel',function(ni){this.$9=null;this.$6=null;this.$a=false;this.$b=false;this.$7=null;this.$c=null;this.$8=null;this.$d=null;this.$5=null;this.$4=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$0();this.$1();this.$9=ni;this.$9.add_newMarksCardTabEncoding(ss.mkdel(this,this.update));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$9.remove_newMarksCardTabEncoding(ss.mkdel(this,this.update))})));this.$4=this.$9.get_textEncodingDropdown();this.$b=this.$4.showMarkLabelsIsEnabled;this.$a=this.$4.showMarkLabelsIsChecked;if(ss.isValue(this.$4.callbackCommand)){var nj=tab.SimpleCommandsPresModelWrapper.create(this.$4.callbackCommand);var nk=tab.CommandSerializer.deserialize(nj.get_simpleCommand(),false);var nl=!this.$a&&this.$4.showMarkLabelsIsEnabled;var nm=(this.$4.showMarkLabelsIsEnabled?tab.Strings.TabAuthEditLabelButton:tab.Strings.TabAuthEditTextButton);this.$6=new iq(nk,!nl,nm,this.get_buttonTooltip())}else if(!this.$4.showMarkLabelsIsEnabled){this.$6=new iq(null,false,tab.Strings.TabAuthEditTextButton,tab.Strings.AuthLabelEditingDisabledDrag)}else{this.$6=null}this.$2()},{add_labelsOnChanged:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_labelsOnChanged:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_marksCardTabEncodingModel:function(){return this.$9},get_showMarkLabelsIsChecked:function(){return this.$a},set_showMarkLabelsIsChecked:function(ni){if(this.$a!==ni){this.$a=ni;if(ss.isValue(this.$6)){this.$6.setButtonEnabledState(this.$a,this.get_buttonTooltip())}if(ss.isValue(this.$2$1)){this.$2$1(this.$a)}}},get_allowLabelsToOverlapIsVisible:function(){return this.$4.allowMarksLabelsOverlapIsVisible},get_allowLabelsToOverlapMarksChecked:function(){return this.$4.allowMarksLabelsIsEnabled},get_showMinMaxStartIsChecked:function(){return this.$4.labelMinimumValueIsChecked},get_showMinMaxEndIsChecked:function(){return this.$4.labelMaximumValueIsChecked},get_showLineEndsFirstIsChecked:function(){return this.$4.labelStartOfLineIsChecked},get_showLineEndsLastIsChecked:function(){return this.$4.labelEndOfLineIsChecked},get_controlLabel:function(){return this.$9.get_textEncodingDropdown().showMarkLabelsControlLabel},$3:function(){return(ss.isValue(this.get_marksCardTabEncodingModel())?this.get_marksCardTabEncodingModel().get_id():0)},marksToLabelModeChanged:function(ni){var nj=this.$c[ni];tab.PaneClientCommands.updateMarkLabelsMode(this.$4,this.$3(),nj)},get_marksToLabelEnabledModes:function(){var ni=[];var nj=this.$9.get_textEncodingDropdown().marksToLabelEnabledModes;for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];ni.push(this.$7[nl])}return ni},get_marksToLabelCurrentMode:function(){var ni=this.get_marksCardTabEncodingModel().get_textEncodingDropdown().markLabelsMode;return(ss.keyExists(this.$7,ni)?this.$7[ni]:this.$7['mlm-all'])},marksToLabelScopeChanged:function(ni){var nj=this.$d[ni];tab.PaneClientCommands.updateMarkLabelsScope(this.$4,this.$3(),nj)},marksToLabelFieldCaptionChanged:function(ni){var nj=this.$5[ni];tab.PaneClientCommands.updateMarkLabelsMinMaxFieldChanged(this.$4,this.$3(),nj)},get_marksToLabelEnabledScopes:function(){var ni=[];for(var nj=0;nj<this.$4.marksToLabelEnabledScopes.length;nj++){var nk=this.$4.marksToLabelEnabledScopes[nj];ni.push(this.$8[nk])}return ni},get_marksToLabelCurrentScope:function(){var ni=this.$4.markLabelsScope;return(ss.keyExists(this.$8,ni)?this.$8[ni]:this.$8['mls-default'])},get_marksToLabelCurrentFieldCaption:function(){var ni=this.$4.fieldPickerCombo.fn;var nj=new ss.ObjectEnumerator(this.$5);try{while(nj.moveNext()){var nk=nj.current();if(ss.referenceEquals(ni,nk.value)){return nk.key}}}finally{nj.dispose()}return''},$2:function(){this.$5={};if(ss.isValue(this.$4)&&ss.isValue(this.$4.fieldPickerCombo)){var ni=this.$4.fieldPickerCombo.fieldPickerFields;for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];this.$5[nk.fieldCaption]=nk.fn}}},marksToLabelMinMaxStartCheckboxChanged:function(ni){tab.PaneClientCommands.updateMarkLabelsMinMaxStartCheckboxChanged(this.$4,this.$3(),ni)},marksToLabelMinMaxEndCheckboxChanged:function(ni){tab.PaneClientCommands.updateMarkLabelsMinMaxEndCheckboxChanged(this.$4,this.$3(),ni)},marksToLabelLineEndFirstCheckboxChanged:function(ni){tab.PaneClientCommands.updateMarkLabelsLineEndFirstCheckboxChanged(this.$4,this.$3(),ni)},marksToLabelLineEndLastCheckboxChanged:function(ni){tab.PaneClientCommands.updateMarkLabelsLineEndLastCheckboxChanged(this.$4,this.$3(),ni)},marksToLabelAllowOverlapCheckboxChanged:function(ni){tab.PaneClientCommands.updateMarkLabelsAllowLabelOverlapCheckboxChanged(this.$4,this.$3(),ni)},get_buttonTooltip:function(){if(ss.isValue(this.$9.get_textEncodingDropdown().callbackCommand)){return((this.$b&&!this.$a)?tab.Strings.AuthLabelEditingDisabledShow:null)}return tab.Strings.AuthLabelEditingDisabledDrag},get_viewType:function(){return mf},get_viewModel:function(){return this},get_markLabelsEditButtonViewModel:function(){return this.$6},get_showMarkLabelsIsEnabled:function(){return this.$b},get_fieldsCaptionToNameMap:function(){return this.$5},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ni){if(ss.isValue(this.$6)){this.$6.updateUberPopupViewModel(ni)}},toggleLabels:function(ni){tab.PaneClientCommands.toggleMarkLabels(this.$4,ni,this.$3())},update:function(){this.$4=this.$9.get_textEncodingDropdown();this.set_showMarkLabelsIsChecked(this.$4.showMarkLabelsIsChecked)},$0:function(){var ni={};ni['mlm-default']=tab.Strings.MarksToLabelModeAll;ni['mlm-all']=tab.Strings.MarksToLabelModeAll;ni['mlm-highlight']=tab.Strings.MarksToLabelModeHighlight;ni['mlm-line-ends']=tab.Strings.MarksToLabelModeLineEnds;ni['mlm-most-recent']=tab.Strings.MarksToLabelModeMostRecent;ni['mlm-range']=tab.Strings.MarksToLabelModeRange;ni['mlm-selection']=tab.Strings.MarksToLabelModeSelection;this.$7=ni;var nj={};nj[tab.Strings.MarksToLabelModeAll]='mlm-all';nj[tab.Strings.MarksToLabelModeHighlight]='mlm-highlight';nj[tab.Strings.MarksToLabelModeLineEnds]='mlm-line-ends';nj[tab.Strings.MarksToLabelModeMostRecent]='mlm-most-recent';nj[tab.Strings.MarksToLabelModeRange]='mlm-range';nj[tab.Strings.MarksToLabelModeSelection]='mlm-selection';this.$c=nj},$1:function(){var ni={};ni['mls-default']=tab.Strings.MarksToLabelScopeDefault;ni['mls-cell']=tab.Strings.MarksToLabelScopeCell;ni['mls-pane']=tab.Strings.MarksToLabelScopePane;ni['mls-table']=tab.Strings.MarksToLabelScopeTable;ni['mls-multimark']=tab.Strings.MarksToLabelScopeMultiMark;this.$8=ni;var nj={};nj[tab.Strings.MarksToLabelScopeDefault]='mls-default';nj[tab.Strings.MarksToLabelScopeCell]='mls-cell';nj[tab.Strings.MarksToLabelScopePane]='mls-pane';nj[tab.Strings.MarksToLabelScopeTable]='mls-table';nj[tab.Strings.MarksToLabelScopeMultiMark]='mls-multimark';this.$d=nj}});var mh=global.tab.ThumbnailViewModel=ss.mkType(a,'tab.ThumbnailViewModel',function(ni,nj,nk){this.$3=null;this.$5=null;this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=ni;this.$4=nj;this.$5=nk},{createInitialProps:function(){return mh.createThumbnailOverlayProps(this.$3,this.$4,this.$5)}},{createThumbnailOverlayProps:function(ni,nj,nk){var nl=mh.$0(nk);var nm=mh.$1(nl,nj);var nn=spiff.DOMElements.img({src:nl,className:'tabAuthSheetThumbnail'+nm,style:{backgroundColor:'white'}});var no={anchorEl:ni.anchorElement,anchorOrigin:ni.anchorOrigin,stackedOrigin:ni.stackedOrigin,zIndex:988,allowAutoPosition:true,children:nn,key:'thumbnail'+nj.name};return no},$1:function(ni,nj){var nk='';if(tab.MiscUtil.isNullOrEmpty$1(ni)){if(nj.isHidden){nk=' hiddenSheet'}else{nk=' notExist'}if(nj.isDashboard){nk=' dashboard'}}return nk},$0:function(ni){var nj='';if(!ss.isNullOrEmptyString(ni)){nj='data:image/jpeg;base64,'+ni}return nj}});var mi=global.tab.ToggleFreeFormZoneWithPreviewCommand=ss.mkType(a,'tab.ToggleFreeFormZoneWithPreviewCommand',function(){tab.ToggleFreeFormZoneWithPreviewCmd.call(this)},{invoke:function(){return this.fireAndForget(ss.mkdel(this,function(){tab.DashboardZoneCommands.toggleFreeFormZone(this.get_zoneID())}))}});var mj=global.tab.ToggleINDJoinSemanticsWrapperCommand=ss.mkType(a,'tab.ToggleINDJoinSemanticsWrapperCommand',function(){tab.ToggleINDJoinSemanticsWrapperCmd.call(this)},{get_isVisible:function(){return tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='data-tab'},invoke:function(){return this.fireAndForget(function(){tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-ind-join-semantics'},null),'afterDelay',null,null)})}});var mk=global.tab.TooltipContentView=ss.mkType(a,'tab.TooltipContentView',function(ni){this.tooltipContentViewModel=null;ss.makeGenericType(spiff.BaseView$1,[ml]).call(this,ni,spiff.Template.fromHtml("<div class='tabTooltipContent'></div>"));this.tooltipContentViewModel=ni;var nj=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$7),tab.Strings.AuthResetTooltip,'tabTooltipContentReset',2,1);this.disposables.add$1(nj);this.element.append(nj.element)},{$7:function(){this.tooltipContentViewModel.resetTooltip()}});var ml=global.tab.TooltipContentViewModel=ss.mkType(a,'tab.TooltipContentViewModel',function(ni){this.$1=null;this.$2=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$1=ni;this.add_resetClicked(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_resetClicked(ss.mkdel(this,this.$0))})))},{add_resetClicked:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_resetClicked:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_viewType:function(){return mk},get_viewModel:function(){return this},disposePopupViewModel:function(){if(ss.isValue(this.$2)){this.$2.dispose();this.$2=null}},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ni){this.$2=ni},resetTooltip:function(){this.$2$1();this.disposePopupViewModel()},$0:function(){tab.PaneClientCommands.resetTooltip(this.$1)}});var mm=global.tab.TreeComponent$1=ss.mkType(a,'tab.TreeComponent$1',function(ni){var nj=ss.registerGenericClassInstance(mm,[ni],function(nk,nl){React.Component.call(this,nk,nl)},{render:function(){var nk=this.props.rootNode;var nl=ss.isValue(nk.get_children())&&ss.getEnumerator(nk.get_children()).moveNext();var nm=null;if(nl){nm=this.$3(nk.get_item(),nk.get_expanded())}var nn=this.$1(this.props.rootNode.get_item());var no=null;if(nl&&nk.get_expanded()){var np=[];var nq=ss.getEnumerator(nk.get_children());try{while(nq.moveNext()){var nr=nq.current();np.push(this.$2(nj.$0(this.props,nr)))}}finally{nq.dispose()}no=spiff.DOMElements.div({className:'tab-child-tree-component'},np)}return spiff.DOMElements.div({className:'tab-tree-component'},spiff.DOMElements.div({className:'tab-tree-component-node'},this.$0(this.props.rootNode.get_item()),spiff.DOMElements.div({className:'tab-tree-component-toggle'},nm),spiff.DOMElements.div({className:'tab-tree-component-node-content'},nn)),no)},$3:function(nk,nl){return(!ss.staticEquals(this.props.renderToggle,null)?this.props.renderToggle(nk,nl):null)},$1:function(nk){return this.props.renderSingleNode(nk)},$2:function(nk){return React.createElement(nj,nk)},$0:function(nk){if(!ss.isNullOrUndefined(this.props.renderReorderAllZonesTarget)){return this.props.renderReorderAllZonesTarget(nk)}return null}},{$0:function(nk,nl){return $.extend(false,{},nk,{rootNode:nl,key:nl.get_key()})}},function(){return React.Component});return nj});ss.initGenericClass(mm,1);var mn=global.tab.TreeComponentHelper=ss.mkType(a,'tab.TreeComponentHelper',null,null,{create:function(ni){return function(nj){return React.createElement(ss.makeGenericType(mm,[ni]),nj)}},buildTree:function(ni,nj,nk){return function(nl,nm,nn,no,np){var nq={};var nr=[];for(var ns=0;ns<nl.length;ns++){var nt=nl[ns];var nu=no(nt);if(_.isEqual(no(nt),nm)){nr.push(nt)}else{if(ss.isNullOrUndefined(nq[nu])){nq[nu]=[]}nq[nu].push(nt)}}var nv=null;nv=function(nw){var nx=nn(nw);if(!ss.keyExists(nq,nx)){return np(nw,[])}var ny=[];var nz=nq[nx];for(var nA=0;nA<nz.length;nA++){var nB=nz[nA];ny.push(nv(nB))}return np(nw,ny)};return _.map(nr,nv)}}});var mo=global.tab.TypeInPillTemplate=ss.mkType(a,'tab.TypeInPillTemplate',function(){cz.call(this,$("<span class='tabTypeInPill' title=''><div class='tabTypeInPillCmHolder'></div></span>"))},{get_dragSource:function(){return this.getElementBySelector('.tabTypeInPillCmHolder')},get_dropTarget:function(){return this.getElementBySelector('.tabTypeInPillCmHolder')},get_formulaEditorHolder:function(){return this.getElementBySelector('.tabTypeInPillCmHolder')},get_dropInviteBorder:function(){return this.domRoot}});var mp=global.tab.TypeInPillView=ss.mkType(a,'tab.TypeInPillView',function(ni){this.$s=null;this.$t=false;this.$r=false;this.$q=false;this.$p=false;cA.call(this,ni,new mo);this.initDom()},{get_pillViewModel:function(){return this.$s},set_pillViewModel:function(ni){if(ss.referenceEquals(this.$s,ni)){return}this.$s=ni},dispose:function(){this.$n();ss.makeGenericType(spiff.BaseView$1,[cB]).prototype.dispose.call(this)},addToDom:function(ni){ni.append(this.element)},onAddedToDom:function(){this.get_autoCompleteHelper().set_validFormulaTooltip((BrowserSupport.BrowserSupport.IsMac()?tab.Strings.CalcEditorApplyTooltipMac:tab.Strings.CalcEditorApplyTooltip));cA.prototype.onAddedToDom.call(this);this.focusEditor()},initDom:function(){cA.prototype.initDom.call(this);this.$h()},onOpenCompleted:function(){if(!this.get_hasEditor()){return}this.get_editor().execCommand('goDocEnd')},createCodeMirrorOptions:function(){var ni=cA.prototype.createCodeMirrorOptions.call(this);ni.extraKeys['Esc']=ss.mkdel(this,this.$m);return ni},$m:function(){this.calcViewModel.cancelCalculation()},$h:function(){this.$o();this.$n();EventUtils.GlobalUIEvents.add_FirstTouch(ss.mkdel(this,this.$i));EventUtils.GlobalUIEvents.add_Press(ss.mkdel(this,this.$i));EventUtils.GlobalUIEvents.add_Tap(ss.mkdel(this,this.$j));EventUtils.GlobalUIEvents.add_RightClick(ss.mkdel(this,this.$k));EventUtils.GlobalUIEvents.add_DragEnd(ss.mkdel(this,this.$l))},$n:function(){EventUtils.GlobalUIEvents.remove_FirstTouch(ss.mkdel(this,this.$i));EventUtils.GlobalUIEvents.remove_Press(ss.mkdel(this,this.$i));EventUtils.GlobalUIEvents.remove_Tap(ss.mkdel(this,this.$j));EventUtils.GlobalUIEvents.remove_RightClick(ss.mkdel(this,this.$k));EventUtils.GlobalUIEvents.remove_DragEnd(ss.mkdel(this,this.$l))},$o:function(){this.$r=false;this.$q=false;this.$p=false;this.$t=false},$l:function(ni,nj){if(this.$p){return}var nk=EventUtils.DragDropManager.findDropTarget(ni);this.$q=ss.referenceEquals(nk,this);this.$j(null,nj)},$i:function(ni,nj){this.$o();this.$t=true;this.$r=this.isEqualOrAncestorOf(ni.target)},$k:function(ni,nj){this.$t=true;this.$j(ni,nj)},$j:function(ni,nj){if(!this.$t||this.$r||this.$q){return}if(ss.isNullOrUndefined(ni)||!this.isEqualOrAncestorOf(ni.target)){if(ss.isValue(nj)){nj(true)}if(!this.$p){this.$p=true;this.calcViewModel.applyCalculation(this.get_pillViewModel(),true)}}},addExtraKeys:function(ni){ni['Enter']=ss.mkdel(this,function(){this.$p=true;this.calcViewModel.applyCalculation(this.get_pillViewModel(),true)})},animateOpen:function(ni,nj,nk){this.setMinMaxWidth(ni,ni,false);window.setTimeout(ss.mkdel(this,function(){var nl=this.get_editor().getScrollInfo().width+30;var nm=Math.max(nj,Math.min(nk,nl));this.element.addClass('tabAnimationTransition');this.setMinMaxWidth(nm,nm,false);window.setTimeout(ss.mkdel(this,function(){this.element.removeClass('tabAnimationTransition');this.setMinMaxWidth(nm,nk,true);this.onOpenCompleted()}),300)}),1)},setMinMaxWidth:function(ni,nj,nk){this.element.css(ss.mkdict(['min-width',ni+'px','max-width',nj+'px']));if(nk){this.get_editor().refresh();this.get_editor().scrollIntoView(null,null)}}});var mq=global.tab.TypeSpecificTableCalcViewModel=ss.mkType(a,'tab.TypeSpecificTableCalcViewModel',function(){this.$2$1=null;spiff.BaseViewModel.call(this)},{add_typeSpecificViewModelUpdated:function(ni){this.$2$1=ss.delegateCombine(this.$2$1,ni)},remove_typeSpecificViewModelUpdated:function(ni){this.$2$1=ss.delegateRemove(this.$2$1,ni)},get_model:null,onModelUpdated:null,raiseViewModelUpdated:function(){this.raiseActionEvent(this.$2$1)}});var mr=global.tab.ViewMode=ss.mkEnum(a,'tab.ViewMode',{tabsView:0,filmstripView:1});var ms=global.tab.VizAuthoringMenuBarBuilder=ss.mkType(a,'tab.VizAuthoringMenuBarBuilder',function(){iF.call(this)},{addModeSpecificMenus:function(ni){var nj=tab.ApplicationModel.get_instance().get_workbook();if(!ms.$1()){ni.push({itemId:'worksheet',title:tab.Strings.AuthMenuBarWorksheet,cssClassName:'worksheetMenu'})}if(!tsConfig.is_mobile&&!ms.$1()){ni.push({itemId:'dashboard',title:tab.Strings.AuthMenuBarDashboard,cssClassName:'dashboardMenu'})}if(ms.get_shouldShowAnalysisMenu()){ni.push({itemId:'analysis',title:tab.Strings.AuthMenuBarAnalysis,cssClassName:'analysisMenu'})}if(ms.$2()){ni.push({itemId:'map',title:tab.Strings.AuthMenuBarMap,cssClassName:'mapMenu'})}if(!ms.$1()){ni.push({itemId:'format',title:tab.Strings.AuthMenuBarFormat,cssClassName:'formatMenu'})}if(tabBootstrap.FeatureFlags.isEnabled('GotoSheetDialog')){ni.push({itemId:'window',title:tab.Strings.AuthMenuBarWindow,cssClassName:'windowMenu'})}},addModeSpecificHelpItems:function(ni,nj){var nk=(ms.$1()?tab.Strings.HelpMenuItemWebDataSource:tab.Strings.HelpMenuItemWebAuthor);nj.push(iF.newMenuLink(nk,iF.makeWebAuthorHelpUri(2),'_blank',ni.getHintText(),'Web Authoring Help'))}},{get_shouldShowAnalysisMenu:function(){switch(tab.ApplicationModel.get_instance().get_currentSheetType()){case'story':{return false}case'worksheet':{return true}case'dashboard':{return ss.isValue(ms.$0())}default:{return false}}},$2:function(){return tab.ApplicationModel.get_instance().get_currentSheetType()!=='story'},$0:function(){var ni=tab.ModelUtils.findContentDashboard(null);if(ss.isNullOrUndefined(ni)){return null}var nj=ni.get_activeVisual();var nk;if(ss.isValue(nj)){var nl=[];nl.push(nj.get_worksheetName());nk=nl}else{nk=ni.get_worksheetsOnDashboard()}var nm=nk;var nn=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDefaultDatasourceNamesForSheets(nm);return((nn.length===1)?nn[0]:null)},$1:function(){var ni=tab.ApplicationModel.get_instance().get_workbook();return ss.isValue(ni)&&ni.get_isEditingPublishedDatasource()}});var mt=global.tab.WarningPageModel=ss.mkType(a,'tab.WarningPageModel',function(ni,nj,nk){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.set_title(ni);this.set_message(nj);this.set_selectedPalette(nk)},{get_title:function(){return this.$1$1},set_title:function(ni){this.$1$1=ni},get_message:function(){return this.$1$2},set_message:function(ni){this.$1$2=ni},get_selectedPalette:function(){return this.$1$3},set_selectedPalette:function(ni){this.$1$3=ni}});var mu=global.tab.WebCatalogDetailsDialogCommand=ss.mkType(a,'tab.WebCatalogDetailsDialogCommand',function(){tab.WebCatalogDetailsDialogCmd.call(this)},{$e:function(){var ni=this.c['datasource'];var nj=mu.$1().getDataSource(ni);return mu.$1().getMetadataForDatasourceByCaption(nj.get_caption())},invoke:function(){return this.fireAndForget(ss.mkdel(this,this.$d))},get_isVisible:function(){var ni=this.$e();return ss.isValue(ni)&&ni.hasValidMetadata()},$d:function(){var ni=this.$e();var nj=ni.getPrimaryAssetProps();var nk=eF.getProbablyCollectionForLabels(eF.flattenLabels(ni));var nl=ss.isValue(nk.warning)&&nk.warning.severe||ss.isValue(nk.sensitivity)&&nk.sensitivity.severe;var nm=$('<div></div>')[0];var nn=function(){ReactDOM.unmountComponentAtNode(nm);$(nm).remove()};tab.ModuleManager.load$1(tab.IConnectPanePluginTableauServerFactory).call(null,[]).done(ss.mkdel(this,function(no){var np={renderMode:eF.labelsPanelModePanel,testId:eF.labelsPanelModePopover,catalogEnabled:true,elevatedPanel:nl,close:nn,dismiss:nn,apolloClient:tab.ApolloClientSingleton.get_instance(),siteLuid:tsConfig.site_luid,siteUrlName:tsConfig.site_url_name,includeUpstream:true,includeParented:true,description:nj.get_description(),modifiedDateTime:nj.get_lastUpdated(),ownerName:nj.get_ownerDisplayName(),content:{contentId:nj.get_id(),contentLuid:nj.get_luid(),contentName:nj.get_name(),subjectArea:eF.getDataCatalogAssetTypeString(nj.get_type()),contentType:eF.getContentTypeString(nj.get_type())},probablyOrEager:nk};var nq=React.createElement(ConnectPanePluginTableauServer.LabelsPanelDialog,np);ReactDOM.render(nq,nm)}))}},{$1:function(){return tab.ApplicationModel.get_instance().get_workbook().get_dataSchema()}});var mv=global.tab.WebConnectDataCommand=ss.mkType(a,'tab.WebConnectDataCommand',function(){tab.WebConnectDataCmd.call(this)},{get_isVisible:function(){return!tsConfig.isPublic||tsConfig.features['PublicWebAuthoring_M3']},get_isEnabled:function(){return!tsConfig.is_guest&&(!tsConfig.isPublic||tsConfig.features['PublicWebAuthoring_M3'])},invoke:function(){return this.fireAndForget(ss.mkdel(this,this.$d))},$d:function(){if(this.get_isEnabled()){tab.DataSourceExtractController.commitPendingExtractAction().done(function(){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(function(ni){ni.showCreateConnectionDialog('')})})}}});var mw=global.tab.WebCreateMetricFromFieldCommand=ss.mkType(a,'tab.WebCreateMetricFromFieldCommand',function(){tab.WebCreateMetricFromFieldCmd.call(this)},{get_isVisible:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isVisible.call(this)&&mw.$0()},$d:function(ni){var nj=this.get_measure()+' based on '+this.get_timeDimension();var nk='A metric showing '+this.get_aggregation().toString().toUpperCase()+'('+this.get_measure()+') over time based on '+this.get_timeDimension();var nl=tab.CreateCoreMetricRequestData.$ctor();nl.schema_version='0.1.0';nl.name=nj;nl.description=nk;var nm=tab.CoreMetricDefinition.$ctor();var nn=tab.CoreMetricDatasource.$ctor();nn.id=ni;nn.type='tableau-file';nm.datasource=nn;var no=tab.CoreMetricMeasure.$ctor();no.field=this.get_measure();no.aggregation=this.get_aggregation().toString();nm.measure=no;var np=tab.CoreMetricTimeDimension.$ctor();np.field=this.get_timeDimension();nm.time_dimension=np;nl.definition=nm;var nq=tab.CoreMetricScopingParameters.$ctor();nq.dimensions=[''];nl.scoping_parameters=nq;return nl},$f:function(){SharedWidgets.ToastWidget.show({message:'Failed to create metric for measure: '+this.get_measure(),toastType:'warning'})},$g:function(ni){var nj=(ss.isNullOrEmptyString(tsConfig.site_url_name)?'':('/site/'+tsConfig.site_url_name));var nk=ss.formatString('{0}{1}/{2}/{3}',tabBootstrap.BaseUrlFormatter.formatBaseUrl(),nj,'ntbue/#/edit',ni.metadata.id);SharedWidgets.ToastWidget.show({message:'Your new metric named "'+ni.metadata.name+'" was created successfully.',toastType:'success',actionMessage:'Edit Metric...',actionHref:nk})},$e:function(ni){var nj=this.$d(ni);var nk=new tab.TagEndpoint.$ctor1('metricservice','coreMetrics','POST','json','application/json;charset=UTF-8');tab.TagClient.sendTagRequest$1(nk,nj,ss.mkdel(this,function(nl){var nm=nl;this.$g(nm)}),ss.mkdel(this,function(nl){this.$f()}))},invoke:function(){return this.fireAndForget(ss.mkdel(this,function(){tab.WorkgroupServerCommands.fetchDatasourceLuidByRepositoryUrl(this.get_datasourceRepositoryUrl()).then(ss.mkdel(this,this.$e),ss.mkdel(this,function(ni){this.$f()}))}))}},{$0:function(){return tsConfig.is_saas&&tabBootstrap.FeatureFlags.isEnabled('AnalyticsAuthoringMetrics')}});var mx=global.tab.WebDashboardDesignCommand=ss.mkType(a,'tab.WebDashboardDesignCommand',function(){tab.WebDashboardDesignCmd.call(this)},{invoke:function(){return this.fireAndForget(function(){tab.DashboardModel.set_designModeEnabled(!tab.DashboardModel.get_designModeEnabled())})}});var my=global.tab.WebEditDataSourceCommand=ss.mkType(a,'tab.WebEditDataSourceCommand',function(){tab.WebEditDataSourceCmd.call(this)},{get_isVisible:function(){return tab.ApplicationModel.get_instance().get_workbook().get_uiMode()!=='data-tab'&&tabBootstrap.Affordances.isOn('authoring_DataTab')},get_isEnabled:function(){return my.$1().getDataSourceCount(false)>0&&this.$e().get_isDataTabViewSupported()},$e:function(){var ni=my.$1().getDataSource(this.$d())||tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().get_activeDataSource();return ni},$d:function(){return this.c['datasourceId']},invoke:function(){return this.fireAndForget(ss.mkdel(this,function(){if(!ss.equals(my.$1().get_activeDataSource(),this.$e())){tab.SchemaClientCommands.setActiveDataSourceName(this.$e().get_name(),false)}tab.VizClientCommands.setUIMode('data-tab','EditDataSource','')}))}},{$1:function(){return tab.ApplicationModel.get_instance().get_workbook().get_dataSchema()}});var mz=global.tab.WebEditObjectCaptionCommand=ss.mkType(a,'tab.WebEditObjectCaptionCommand',function(){tab.WebEditObjectCaptionCmd.call(this)},{get_isVisible:function(){return true},get_isEnabled:function(){return!tsConfig.is_guest},invoke:function(){return this.fireAndForget(ss.mkdel(this,this.$d))},$d:function(){if(this.get_isEnabled()){var ni=$.Deferred();var nj=this.get_dataSource();var nk=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDataSource(nj);if(ss.isNullOrUndefined(nk)){return}var nl=this.get_objectId();var nm=nk.findFieldContainer(ss.formatString('[object].[{0}]',nl));var nn=nm.get_fieldCaptionForReset();var no=nm.get_displayName();var np=tab.Strings.AuthRenameObject;var nq=ks.new$1(no,nn,function(nr,ns){_.defer(function(){tab.ObjectClientCommands.validateObjectCaption(nj,nl,nr,ns)})},function(nr){_.defer(function(){tab.ObjectClientCommands.editObjectCaption(nl,nr);ni.resolve()})});nq.set_titleUnescaped(np);nq.show()}}});var mA=global.tab.WebEPDSPublishCommand=ss.mkType(a,'tab.WebEPDSPublishCommand',function(){tab.WebEPDSPublishCmd.call(this);this.set_parentProjectId(0);this.set_pagingStartRow(0);this.set_pagingEndRow(1000);this.set_projectsSortAscendingOrder(true)},{get_isEnabled:function(){return((this.get_isPublishAs().toString().toLowerCase()==='true')?mA.$1().get_publishedDsSaveAsPermission():mA.$1().get_publishedDsSavePermission())},get_isVisible:function(){return tabBootstrap.Affordances.isOn('saveDataSource')},invoke:function(){return this.fireAndForget(ss.mkdel(this,this.$d))},$d:function(){tab.DataSourceExtractController.commitPendingExtractAction().done(ss.mkdel(this,function(){var ni={};ni['isPublishAs']=this.get_isPublishAs();ni['publishdsdialogParentProjectId']=this.get_parentProjectId();ni['publishdsdialogPagingStartRow']=this.get_pagingStartRow();ni['publishdsdialogPagingEndRow']=this.get_pagingEndRow();ni['publishdsdialogProjectSortAscendingOrder']=this.get_projectsSortAscendingOrder();var nj=ni;if(!ss.isNullOrEmptyString(this.get_datasource())){nj['datasource']=this.get_datasource()}tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-web-save-datasource-dialog'},nj),'immediately',null,null)}))}},{$ctor1:function(ni,nj,nk,nl,nm){tab.WebEPDSPublishCmd.call(this);this.set_isPublishAs(ni);this.set_parentProjectId(nj);this.set_pagingStartRow(nk);this.set_pagingEndRow(nl);this.set_projectsSortAscendingOrder(nm)},$1:function(){return tab.ApplicationModel.get_instance().get_workbook().get_dataSchema()}});var mB=global.tab.WebFilterDialogCommandWaiter=ss.mkType(a,'tab.WebFilterDialogCommandWaiter',function(){this.$3=null;this.$2=null},{handleCommandStarted:function(ni){this.$3=ni},handleCommandCompleted:function(ni){},handleCommandError:function(){},handleCancel:function(ni){var nj=this.$3.get_primaryRemoteCommand();this.$2=ni;tab.CancelCommands.cancelRunningCommand(nj,ss.mkdel(this,this.$0),ss.mkdel(this,this.$1))},$0:function(ni){this.$2.resolve()},$1:function(){this.$2.reject()}});var mC=global.tab.WebFilterDialogDomainCancelCommand=ss.mkType(a,'tab.WebFilterDialogDomainCancelCommand',function(){tab.WebFilterDialogDomainCancelCmd.call(this)},{$d:function(){var ni=$.Deferred();var nj=tab.CommandController.get().get_remoteExecutingCommands();var nk=((nj.length>0)?nj[0].get_primaryRemoteCommandId():null);if(ss.isNullOrUndefined(nk)||!mC.$0(nk)){ni.resolve()}else{var nl=tab.WebCommandRegistry.get_instance().getCommandLocalOptions(nk).commandWaiter;if(ss.isValue(nl)){var nm=ss.safeCast(nl,tab.IWaitForCommandsWithCancel);nm.handleCancel(ni)}}return ni.promise()},invoke:function(){var ni=$.Deferred();this.$d().done([function(){ni.resolve()}]).fail([function(){ni.reject()}]);return ni.promise()}},{$0:function(ni){return tab.CommandUtils.idEquals({ns:'tabdoc',cmd:'categorical-filter-init-with-domain'},ni)||tab.CommandUtils.idEquals({ns:'tabdoc',cmd:'categorical-filter-set-range-type-deferred'},ni)}});var mD=global.tab.WebFormatPaneCommand=ss.mkType(a,'tab.WebFormatPaneCommand',function(){tab.WebFormatPaneCmd.call(this)},{invoke:function(){return this.fireAndForget(ss.mkdel(this,function(){gv.handleWebContextChange$1(this.get_context(),this.get_fieldNames(),this.get_legendType())}))}});var mE=global.tab.WebFormatPaneForVizPointCommand=ss.mkType(a,'tab.WebFormatPaneForVizPointCommand',function(){tab.WebFormatPaneForVizPointCmd.call(this)},{invoke:function(){return this.fireAndForget(ss.mkdel(this,function(){gv.handleWebContextChange(this.get_point())}))}});var mF=global.tab.WebRemoveShelfPillCommand=ss.mkType(a,'tab.WebRemoveShelfPillCommand',function(){tab.WebRemoveShelfPillCmd.call(this)},{invoke:function(){return this.fireAndForget(ss.mkdel(this,this.$d))},$d:function(){var ni=this.c['shelfType'];var nj=this.c['shelfItemId'];if(ss.isNullOrUndefined(ni)||ss.isNullOrUndefined(nj)||!tsConfig.is_authoring||tab.ApplicationModel.get_instance().get_workbook().get_uiMode()!=='document'||tab.ApplicationModel.get_instance().get_currentSheetType()!=='worksheet'){return}var nk=mF.$1(ni);var nl=mF.$0(nk,parseInt(ss.safeCast(nj,String)));if(ss.isNullOrUndefined(nl)||ss.isNullOrUndefined(nl.item1)||ss.isNullOrUndefined(nl.item2)){return}tab.ShelfClientCommands.removeShelfPill(nl.item1,nl.item2)}},{$1:function(ni){var nj=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(nj)){return null}var nk=nj.get_shelves();return _.filter(nk.get_shelves(),function(nl){return nl.get_shelfType()===ni})},$0:function(ni,nj){if(ss.isNullOrUndefined(ni)){return null}for(var nk=0;nk<ni.length;nk++){var nl=ni[nk];var nm=nl.findPill(nj);if(ss.isValue(nm)){return{item1:nl,item2:nm}}}return null}});var mG=global.tab.WebRenameDatasourceDialogCommand=ss.mkType(a,'tab.WebRenameDatasourceDialogCommand',function(){this.$f=null;tab.WebRenameDatasourceDialogCmd.call(this)},{get_isEnabled:function(){return tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDataSourceCount(false)>0},invoke:function(){return this.fireAndForget(ss.mkdel(this,this.$e))},$e:function(){var ni=this.c['datasourceId'];var nj=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().get_dataSourcesList();var nk=nj.map(function(nm){return nm.get_caption().toString()});var nl=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDataSource(ni)||tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().get_activeDataSource();this.$f=kp.createRenameDatasourceCaptionDialog(nl,nk,ss.mkdel(this,this.$d));this.$f.show()},$d:function(){this.$f=tab.MiscUtil.dispose$1(this.$f)}});var mH=global.tab.WebShowFieldCatalogDetailsCommand=ss.mkType(a,'tab.WebShowFieldCatalogDetailsCommand',function(){tab.WebShowFieldCatalogDetailsCmd.call(this)},{$e:function(){var ni=this.c['datasource'];var nj=this.c['fieldName'];var nk=mH.$1().getDataSource(ni);var nl=mH.$1().getMetadataForDatasourceByCaption(nk.get_caption());return(ss.isValue(nl)?nl.getFieldMetadata(nj):null)},invoke:function(){return this.fireAndForget(ss.mkdel(this,this.$d))},get_isVisible:function(){var ni=this.$e();return ss.isValue(ni)&&ss.isValue(ni.get_labels())&&ni.get_labels().length>0},$d:function(){var ni=this.$e();var nj=eF.getProbablyCollectionForLabels(ni.get_labels());var nk=ss.isValue(nj.warning)&&nj.warning.severe||ss.isValue(nj.sensitivity)&&nj.sensitivity.severe;var nl=$('<div></div>')[0];var nm=function(){ReactDOM.unmountComponentAtNode(nl);$(nl).remove()};tab.ModuleManager.load$1(tab.IConnectPanePluginTableauServerFactory).call(null,[]).done(ss.mkdel(this,function(nn){var no={renderMode:eF.labelsPanelModePanel,testId:eF.labelsPanelFieldTestId,catalogEnabled:true,elevatedPanel:nk,close:nm,dismiss:nm,apolloClient:tab.ApolloClientSingleton.get_instance(),siteLuid:tsConfig.site_luid,siteUrlName:tsConfig.site_url_name,includeParented:true,includeUpstream:ni.get_type()!==7,description:ni.get_description(),isParentCertified:ni.get_isParentCertified(),parentName:ni.get_parentName(),parentType:((ni.get_parentType()===4)?'table':'datasource'),inheritedName:ni.get_inheritedColumnName(),content:{contentId:ni.get_id(),contentLuid:ni.get_luid(),contentType:eF.getContentTypeString(ni.get_type()),contentName:ni.get_name(),subjectArea:eF.getDataCatalogAssetTypeString(ni.get_type()),remoteType:ni.get_remoteType()},probablyOrEager:nj};var np=React.createElement(ConnectPanePluginTableauServer.LabelsPanelDialog,no);ReactDOM.render(np,nl)}))}},{$1:function(){return tab.ApplicationModel.get_instance().get_workbook().get_dataSchema()}});var mI=global.tab.WebShowMeCommand=ss.mkType(a,'tab.WebShowMeCommand',function(){tab.WebShowMeCmd.call(this)},{get_isEnabled:function(){return!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetDashboard()&&!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()&&tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='document'},invoke:function(){return this.fireAndForget(function(){})}});var mJ=global.tab.WebToolbarMoreCommand=ss.mkType(a,'tab.WebToolbarMoreCommand',function(){tab.WebToolbarMoreCmd.call(this)},{get_isVisible:function(){return false},invoke:function(){return this.fireAndForget(function(){})}});var mK=global.tab.WebZoneUrlDialog=ss.mkType(a,'tab.WebZoneUrlDialog',function(ni){this.$1=null;this.$0=null;this.$1=ni},{show:function(){this.$0=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[mM,mL,Object])).call(null,[this.$1]);this.$0.addToDom($(document.body))},dispose:function(){this.$0=tab.MiscUtil.dispose$1(this.$0);this.$1=tab.MiscUtil.dispose$1(this.$1)}},{createWebZoneUrlDialog:function(ni,nj,nk){var nl=new mM(ni,nj,nk);return new mK(nl)}});var mL=global.tab.WebZoneUrlDialogComponent=ss.mkType(a,'tab.WebZoneUrlDialogComponent',function(ni,nj){this.$9=null;this.$a=null;this.$c=null;this.$b=null;spiff.PureRenderComponent.$ctor1.call(this,ni,nj);this.state={isSelectingKeyword:false,hasError:false};this.$9=ss.mkdel(this,this.$8);this.$a='tabUrlDialogRoot'+mL.$1++},{componentWillMount:function(){this.$b=$('<div></div>');this.$b.addClass('tabUrlDialogRoot');this.$b[0].id=this.$a;this.$b[0].style.position='relative';$(document.body).append(this.$b)},componentWillUnmount:function(){this.$b.remove()},render:function(){return React.createElement(SharedWidgets.DialogWidget,{stackingRootId:this.$a,testId:'EditUrl',isModal:true,title:tab.Strings.WebZoneUrlDialogTitle,showCloseButton:false,type:0,positioningBehavior:0,shouldAdjustPositionOnWindowResize:true,onCloseRequest:this.props.cancel,children:[this.$5(),this.$4()],footerContent:this.$3(),showFooter:true,shouldReturnFocusOnClose:true,dialogWidth:375,isGlassTransparent:true,dialogBodyStyle:{overflow:'visible'},zIndex:988,shouldRecenterOnUpdate:true})},$4:function(){var ni=spiff.DOMElements.label({className:'tab-urlErrorText',style:{display:(ss.isValue(this.props.errorText)?'block':'none')},key:'error'},this.props.errorText);return ni},$3:function(){var ni={marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace,alignSelf:'center'};var nj={handleClick:ss.mkdel(this,function(nm){_.defer(ss.mkdel(this,function(){this.props.cancel()}))}),buttonType:3,testId:'Cancel',children:tab.Strings.DialogButtonCancel,style:ni,key:'cancel-button'};var nk={handleClick:ss.mkdel(this,function(nm){_.defer(ss.mkdel(this,function(){this.props.submit()}))}),buttonType:2,testId:'Submit',children:tab.Strings.DialogButtonOK,style:ni,key:'submit-button'};var nl=spiff.DOMElements.div({className:'tab-urlDialogButtons',key:'buttons'},React.createElement(SharedWidgets.ButtonWidget,nj),React.createElement(SharedWidgets.ButtonWidget,nk));return nl},$5:function(){var ni={placeholder:'',text:this.props.text,handleChange:this.props.changeText,handleEnter:this.props.submit,testId:'URLInput',key:'text-input',containerStyle:{width:'100%'},ref:this.$9,handleClearText:this.props.clearText};var nj=spiff.DOMElements.div({className:'tab-urlDialogInputs',key:'inputs'},React.createElement(SharedWidgets.OutlineTextFieldWidget,ni),this.$6());return nj},$6:function(){var ni=null;if(ss.isValue(this.props.substitutionKeywords)){ni=_.map(this.props.substitutionKeywords.substitutionKeywordSublists,ss.mkdel(this,this.$7))}var nj=new Object;nj.onSelectorToggled=ss.mkdel(this,function(){this.setState({isSelectingKeyword:!this.state.isSelectingKeyword})});nj.onFocusLost=ss.mkdel(this,function(){this.setState({isSelectingKeyword:false})});nj.isSelecting=this.state.isSelectingKeyword;nj.getDesiredHeight=ss.mkdel(this,function(nk){return _.reduce($('.tab-SelectableButtonGroup',nk).toArray(),ss.mkdel(this,this.$0),0)});nj.getMinimumWidth=ss.mkdel(this,function(nk){return _.reduce($('.tab-SelectableButtonGroup',nk).toArray(),ss.mkdel(this,this.$1),0)});nj.renderButton=function(){return React.createElement(spiff.ArrowDropdownButtonComponent,new Object)};return React.createElement(spiff.StatelessDropdownComponent,nj,ni)},$7:function(ni,nj){var nk=_.map(ni.substitutionKeywords,ss.mkdel(this,function(nn){var no=new spiff.SelectableButtonGroupItem;no.label=nn.localizedKeyword;no.testId=nn.invariantKeyword;return no}));var nl=spiff.SingleSelectGroupSelection.buildSingleSelectGroupSelection$1(Object).call(null,ni.substitutionKeywords,function(nn){return false});var nm=new Object;nm.borders=false;nm.allOption=false;nm.items=nk;nm.selection=nl;nm.onSelectionChanged=ss.mkdel(this,function(nn){this.$2(nn,ni)});nm.key=nj;return React.createElement(spiff.SelectableButtonGroupComponent,nm)},$0:function(ni,nj){return ni+spiff.SelectableButtonGroupComponent.getDesiredHeight($(nj))+1},$1:function(ni,nj){return Math.max(ni,spiff.SelectableButtonGroupComponent.getMinimumWidth($(nj)))},$2:function(ni,nj){var nk=(ss.isValue(this.$c)?this.$c.selectionStart:0);var nl=ni.mapSelected(Object).call(ni,function(nm){return nj.substitutionKeywords[nm]})[0];this.props.insertKeyword(nl,nk);this.setState({isSelectingKeyword:false})},$8:function(ni){var nj=ss.safeCast(ni,SharedWidgets.OutlineTextFieldWidget);this.$c=null;if(ss.isValue(nj)){var nk=ReactDOM.findDOMNode(nj);var nl=$(nk).find('input');if(nl.length>0){this.$c=nl[0]}}}});var mM=global.tab.WebZoneUrlDialogViewModel=ss.mkType(a,'tab.WebZoneUrlDialogViewModel',function(ni,nj,nk){this.$f=null;this.$b=null;this.$d=null;this.$e=null;this.$c=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$f=nj;this.$b=nk;this.$e=ni;tab.DashboardClientCommands.getUrlSubstitutionParameters().done(ss.mkdel(this,function(nl){this.$d=nl.substitutionKeywordsList;this.incrementProps()}))},{$9:function(){return this.$e},$a:function(ni){this.$e=ni;this.incrementProps()},$7:function(){return this.$c},$8:function(ni){this.$c=ni;this.incrementProps()},$5:function(){var ni=this.$6(this.$9());tab.DashboardClientCommands.isWebZoneUrlValid(ni).done(ss.mkdel(this,function(nj){if(nj.isValid){this.$f(ni)}else{this.$8(nj.validationMessage)}}))},$6:function(ni){var nj=ni;if(ss.isValue(this.$d)){for(var nk=0;nk<this.$d.substitutionKeywordSublists.length;nk++){var nl=this.$d.substitutionKeywordSublists[nk];for(var nm=0;nm<nl.substitutionKeywords.length;nm++){var nn=nl.substitutionKeywords[nm];var no=this.$3(nn.localizedKeyword);nj=ss.replaceAllString(nj,no,this.$3(nn.invariantKeyword))}}}return nj},$4:function(ni,nj){this.$a(ss.insertString(this.$9(),nj,this.$3(ni.localizedKeyword)))},$3:function(ni){return'<'+ni+'>'},createInitialProps:function(){return{submit:ss.mkdel(this,this.$5),cancel:this.$b,insertKeyword:ss.mkdel(this,this.$4),changeText:ss.mkdel(this,function(ni){this.$a(ni)}),clearText:ss.mkdel(this,function(){this.$a('')})}},createUpdatedProps:function(){return{substitutionKeywords:this.$d,text:this.$9(),errorText:this.$7()}}});var mN=global.tab.WhereDidSaveGoCommand=ss.mkType(a,'tab.WhereDidSaveGoCommand',function(){tab.WhereDidSaveGoCmd.call(this)},{get_isEnabled:function(){return true},invoke:function(){return this.fireAndForget(kL.showSaveGoneDialog)}});var mO=global.tab.WindowTableCalcViewModel=ss.mkType(a,'tab.WindowTableCalcViewModel',function(ni){this.$0=null;mq.call(this);this.$0=ni;this.$0.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})))},{get_model:function(){return this.$0},get_windowModel:function(){return this.$0},onModelUpdated:function(){},showWindowOptions:function(ni){var nj=new md(this.$0);this.disposables.add$1(nj);spiff.UberPopupViewModel.createForContent$1(nj,ni,null,false).show()}});var mP=global.tab.ZoneChromeButtonRender=ss.mkType(a,'tab.ZoneChromeButtonRender',function(ni,nj,nk,nl,nm){this.$d=null;this.$a=0;this.$b=0;this.$9=null;this.$c=null;this.$d=nj;this.$a=nl;this.$b=nm;this.$9=ni;this.$c=nk},{render:function(){if(ss.isNullOrUndefined(this.$d.buttons)||this.$d.buttons.length===0){return null}var ni=_.map(this.$d.buttons,ss.mkdel(this,this.$8));return spiff.DOMElements.div({className:'tabAuthZoneSelButtons'+' tabSuppressVizTooltipsAndOverlays '+(this.$d.addWasActiveClass?' tabWasActive':''),style:this.$4(),ref:this.$9},ni)},$4:function(){var ni=this.$6();var nj=this.$5();var nk={top:ni.top,left:nj.left};var nl=this.$7(nj.anchorEdge,ni.anchorEdge);return $.extend({},nk,nl)},$7:function(ni,nj){var nk=0;var nl=0;var nm=0;var nn=0;if(ni===0){nl=2;nm=2}else if(ni===2){if(nj===0){nm=2}else{nl=2}}else if(ni===3){if(nj===0){nn=2}else{nk=2}}else{nk=2;nn=2}return{borderBottomLeftRadius:nk,borderBottomRightRadius:nl,borderTopLeftRadius:nn,borderTopRightRadius:nm}},$6:function(){var ni=tab.WorkbookView.findDashboardContainer();var nj=tab.DoubleUtil.roundToInt(ni.scrollTop());var nk=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize('dashboard');var nl=nk.h+nj;var nm={top:this.$c.t,anchorEdge:1};if(nm.top<nj){nm={top:Math.min(nj,this.$c.h+this.$c.t),anchorEdge:1}}var nn=nm.top+this.$a;if(nn>nl){nn=Math.max(nl,this.$c.t);nm={top:nn-this.$a,anchorEdge:0}}return nm},$5:function(){var ni={left:this.$3(),anchorEdge:0};var nj=tab.WorkbookView.findDashboardContainer();var nk=tab.DoubleUtil.roundToInt(nj.scrollLeft());if(this.$b+ni.left>this.$d.dashboardContentWidth+nk){ni={left:this.$2(),anchorEdge:1}}if(ni.left<0){ni={left:this.$0(),anchorEdge:2}}return ni},$2:function(){return this.$c.l-this.$b+ss.idiv(2,2)},$3:function(){return this.$c.l+this.$c.w-ss.idiv(2,2)},$0:function(){return this.$c.l+2},$1:function(){return this.$c.l+this.$c.w-this.$b-2},$8:function(ni){var nj=ss.safeCast(ni,tab.ToolbarDropdownButtonViewModel);if(ss.isValue(nj)){var nk=new(ss.makeGenericType(tab.ToolbarButtonProps$1,[tab.ToolbarDropdownButtonViewModel]));nk.viewModel=nj;nk.key=nj.get_iconClass();return React.createElement(bR,nk)}var nl=new(ss.makeGenericType(tab.ToolbarButtonProps$1,[tab.ToolbarButtonViewModel]));nl.viewModel=ni;nl.key=ni.get_iconClass();return React.createElement(bP,nl)}});var mQ=global.tab.ZoneChromeDragSource=ss.mkType(a,'tab.ZoneChromeDragSource',function(ni,nj,nk){this.$3=null;this.$2=null;this.$1=null;this.$3=nk;this.$2=nj;this.$1=ni},{startDrag:function(ni){var nj=this.$2.get_selectedZone();if(ss.isNullOrUndefined(nj)){return null}if(nj.get_isFloating()){var nk=new gq(ss.mkdel(this,this.$0),{w:nj.get_width(),h:nj.get_height(),x:nj.get_x(),y:nj.get_y()},this.$3,this.$1.get_model().get_dashboardSize().w,this.$1.get_model().get_dashboardSize().h);return nk.startDrag(ni)}var nl=new dI(this.$1.get_model(),tab.DashboardView.dashboardGeometry);var nm=nl.getPointOnEdge(nj,this.$3[0]);return nl.startDrag(nm,$(ni.target),function(){})},acceptsDragType:function(){return 1},$0:function(ni){return tab.DashboardZoneCommands.resizeFreeFormZone(this.$2.get_selectedZone(),ni.x,ni.y,ni.w,ni.h)}});var mR=global.tab.ZoneDragAvatarTemplate=ss.mkType(a,'tab.ZoneDragAvatarTemplate',function(){spiff.Template.call(this,$('<div class= tab-ZoneDragAvatarContainer><div class=tab-FloatingZoneDragAvatar></div></div>'))},{get_avatarElement:function(){return this.domRoot.find('.'+'tab-FloatingZoneDragAvatar')}});var mS=global.tab.ZoneDragAvatarView=ss.mkType(a,'tab.ZoneDragAvatarView',function(ni){ss.makeGenericType(spiff.BaseView$1,[mT]).call(this,ni,new mR);this.$7();this.get_viewModel().add_displayStateChanged(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_displayStateChanged(ss.mkdel(this,this.$7))}))},{$8:function(){return ss.safeCast(this.get_template(),mR)},$7:function(){el.updateSizeAndPosition(this.$8().get_avatarElement(),this.get_viewModel().get_floatingDisplayRect());var ni=this.get_viewModel().get_isFloating()&&this.get_viewModel().get_isOverTarget();this.element.toggle(ni)}});var mT=global.tab.ZoneDragAvatarViewModel=ss.mkType(a,'tab.ZoneDragAvatarViewModel',function(ni){this.dashboardElementDragInstance=null;co.call(this,ni)},{get_isFloating:function(){return ss.isValue(this.dashboardElementDragInstance)&&this.dashboardElementDragInstance.get_isFloating()},initialize:function(ni){this.dashboardElementDragInstance=ni;this.onDisplayStateChanged();var nj=ss.mkdel(this,function(){this.onDisplayStateChanged()});ni.add_shiftStateChanged(nj);this.disposables.add(function(){ni.remove_shiftStateChanged(nj)})}},{forZoneMove:function(ni){var nj=$.Deferred();ni.done(function(nk){nj.resolve({l:nk.l,t:nk.t,w:nk.w,h:nk.h})}).fail(function(){nj.reject()});return new mT(nj)},forNewZone:function(ni){return new mT(ni)}});var mU=global.tab.ZoneDragInstance=ss.mkType(a,'tab.ZoneDragInstance',function(ni,nj,nk,nl){this.grabPoint=null;this.$2=null;eb.call(this,ni,ni.get_isFloating(),nl);this.grabPoint=nj;this.set_dragDropPresModel(nk);if(ni.get_zoneType()==='viz'){this.$2=new spiff.Glass(tab.ZoneView.getZoneElement(ni.get_zoneId()),false);this.$2.show();this.$2.set_opaque(true);this.$2.element.css('opacity','0.5');this.get_viewModel().add_disposed(ss.mkdel(this,function(nm){tab.MiscUtil.dispose$1(this.$2)}))}},{get_dragged:function(){return this.get_payload()},get_isFloating:function(){return eb.prototype.get_isFloating.call(this)&&this.get_dragged().get_canFloat()},get_defaultDropCursor:function(){return spiff.CustomCursor.delete$1},handleDrop:function(ni,nj,nk,nl,nm){if(this.get_isFloating()){var nn=this.avatarViewModel.get_floatingDisplayRect();if(nn.h>0&&nn.w>0){nk={x:nn.l+ni.x,y:nn.t+ni.y,h:nn.h,w:nn.w}}}tab.DashboardZoneCommands.moveZone(this.get_dragged().get_zoneId(),ni,this.grabPoint,nk,this.get_isFloating(),nl,nm).always(nj)},dropToNowhereAction:function(){if(this.get_dragged().get_dashboardModel().get_currentDeviceLayout()!=='default'){tab.DashboardClientCommands.removeZoneFromDeviceLayout(tsConfig.current_sheet_name,this.get_dragged().get_zoneId())}tab.DashboardZoneCommands.hideZone(this.get_dragged().get_zoneId())}},{createWithAvatar:function(ni,nj,nk){var nl=new mU(ni,nj,nk,mT.forZoneMove(co.createDeferredRect(nk)));nl.initialize();return nl}});var mV=global.tab.ZoneEdgeOrientation=ss.mkEnum(a,'tab.ZoneEdgeOrientation',{horizontal:0,vertical:1,none:2});var mW=global.tab.ZoneFloatingCheckboxViewModel=ss.mkType(a,'tab.ZoneFloatingCheckboxViewModel',function(ni){this.$7=null;nf.call(this,ni);this.$7=ni;this.disposables.add$1(ni.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.add_dashboardTypeChanged(ss.mkdel(this,this.incrementProps))}nj.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.remove_dashboardTypeChanged(ss.mkdel(this,this.incrementProps))}nj.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})))},{get_label:function(){return tab.Strings.LayoutPaneFloatingCheckbox},get_disabled:function(){return!this.get_activeZone().get_canFloat()||this.$6()},get_checked:function(){return this.get_activeZone().get_canFloat()&&this.get_activeZone().get_isFloating()},get_testId:function(){return'layout-zone-floating-checkbox'},toggleFunction:function(ni){if(ss.isValue(this.get_activeZone())&&this.get_activeZone().get_isFloating()!==ni){tab.DashboardZoneCommands.toggleFreeFormZone(this.get_activeZone().get_zoneId())}},bindEventHandlerToZone:function(ni){ni.get_zoneCommonModel().add_changeZoneFloatingState(ss.mkdel(this,this.incrementProps))},unbindEventHandlerToZone:function(ni){ni.get_zoneCommonModel().remove_changeZoneFloatingState(ss.mkdel(this,this.incrementProps))},$6:function(){return ss.isValue(this.$7)&&ss.isValue(this.$7.get_model())&&this.$7.get_model().get_isCurrentLayoutAutoGenerated()}});var mX=global.tab.ZoneInfoTreeNode=ss.mkType(a,'tab.ZoneInfoTreeNode',function(ni){mX.$ctor1.call(this,ni,[])},{get_item:function(){return this.$1},get_children:function(){return this.$0},get_expanded:function(){return true},get_key:function(){if(ss.isNullOrUndefined(this.$1)||ss.isNullOrUndefined(this.$1.deviceZoneListItem)){return mX.keyPrefix}return mX.keyPrefix+this.$1.deviceZoneListItem.get_zoneId()}},{$ctor1:function(ni,nj){this.$1=null;this.$0=null;this.$1=ni;this.$0=nj}});var mY=global.tab.ZoneMultiselectionComponent=ss.mkType(a,'tab.ZoneMultiselectionComponent',function(ni,nj){ss.makeGenericType(bl,[Object]).call(this,ni,nj)},{render:function(){var ni={l:0,t:0,w:0,h:0};var nj={className:'tabMultiSelParent',hidden:!this.props.isVisible};if(ss.isValue(this.props.zones)){ni=tab.ZoneChromeConstants.chromeRectFromZones(this.props.zones,true)}if(ss.isValue(this.props.zones)&&this.props.zones.length===1){return spiff.DOMElements.div(nj,this.renderPendingResizePreview())}return spiff.DOMElements.div(nj,this.renderEdge(2,ni),this.renderEdge(3,ni),this.renderEdge(0,ni),this.renderEdge(1,ni),this.renderButtons(ni),this.renderPendingResizePreview())}});var mZ=global.tab.ZoneMultiselectionViewModel=ss.mkType(a,'tab.ZoneMultiselectionViewModel',function(ni){this.$a=null;ss.makeGenericType(bm,[Object]).call(this,ni);this.disposables.add$1(this.dashboardModelHolder.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.handleDashboardModelChanged)).addEventBinding(ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.add_newDashboard(ss.mkdel(this,this.activeZoneChanged))}}),ss.mkdel(this,function(nj){if(nj.get_isDashboard()){nj.remove_newDashboard(ss.mkdel(this,this.activeZoneChanged))}})))},{get_dragEnabled:function(){return this.get_areMultipleZonesSelected()&&ss.isValue(this.get_selectedZones())&&!tab.ListExtensions.any(tab.ZoneModel).call(null,this.get_selectedZones(),function(ni){return!ni.get_isFloating()})},get_selectedZones:function(){return this.$a},set_selectedZones:function(ni){if(this.$8(ni)){return}var nj=this.dashboardModelHolder.get_model();if(ss.isValue(nj)&&ss.isValue(this.$a)){nj.get_multiSelectChromeCommands().remove_commandsChanged(ss.mkdel(this,this.handleUpdateZoneChrome))}this.$a=(this.$7(ni)?ni:null);if(ss.isValue(nj)&&ss.isValue(this.$a)){nj.get_multiSelectChromeCommands().add_commandsChanged(ss.mkdel(this,this.handleUpdateZoneChrome))}this.forceHidden=false;this.updateChromeItems();this.incrementProps()},$8:function(ni){if(ss.isValue(this.get_selectedZones())&&ss.isValue(ni)&&this.get_selectedZones().length===ni.length){return tab.ListExtensions.where(tab.ZoneModel).call(null,this.get_selectedZones(),function(nj){return ss.contains(ni,nj)}).length===this.get_selectedZones().length}else{return false}},$9:function(){if(ss.isValue(this.get_selectedZones())){var ni=this.get_selectedZones();for(var nj=0;nj<ni.length;nj++){var nk=ni[nj];if(nk.get_isFloating()){return false}}return true}return false},handleZoneSizeChanged:function(){if(ss.isValue(this.get_selectedZones())&&this.get_selectedZones().length===1&&ss.isValue(this.get_selectedZones()[0])){this.get_resizePreviewViewModel().resetLocalSize(this.$a[0])}this.incrementProps()},startDrag:function(ni){if(this.get_dragEnabled()){var nj=this.getGrabPoint(ni)}return null},acceptsDragType:function(){return 1},$7:function(ni){if(tab.MiscUtil.isNullOrEmpty$4(ni)){return false}return true},activeZoneChanged:function(){var ni=this.dashboardModelHolder.get_model();var nj=[];if(ss.isValue(ni)&&ni.get_isDashboard()&&ni.get_activeZoneIDs().length>=1){var nk=ni.get_activeZoneIDs();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(nm!==0){nj.push(ni.getZone(nm))}this.get_resizePreviewViewModel().resetLocalSize(ni.getZone(nm))}this.set_selectedZones(nj)}else{this.set_selectedZones(null)}},handleDashboardModelChanged:function(){this.activeZoneChanged()},updateChromeItems:function(){this.disposeChromeItems();if(ss.isNullOrUndefined(this.dashboardModelHolder.get_model())||ss.isNullOrUndefined(this.get_selectedZones())||!this.get_showZoneChromeButtons()){return}var ni=this.dashboardModelHolder.get_model().get_multiSelectChromeCommands();this.addChromeItems(ni)},createInitialProps:function(){return{zIndex:701}},createUpdatedProps:function(){var ni=true;if(ss.isValue(this.get_selectedZones())){var nj=this.get_selectedZones();for(var nk=0;nk<nj.length;nk++){var nl=nj[nk];if(!nl.get_isVisible()){ni=false}}}return{zones:this.get_selectedZones(),buttons:this.get_chromeItems(),isVisible:!this.forceHidden&&!tab.MiscUtil.isNullOrEmpty$4(this.get_selectedZones())&&ni,shouldEnlarge:this.$9(),dragEnabled:this.get_dragEnabled(),moveDragSource:this,isTopResizable:this.isResizable(2),isBottomResizable:this.isResizable(3),isLeftResizable:this.isResizable(0),isRightResizable:this.isResizable(1),shouldHaveHandle:true,isDesignMode:(ss.isValue(this.dashboardModelHolder.get_model())?this.dashboardModelHolder.get_model().get_currentlyOnDesignDashboard():false),areCornersResizable:false,addWasActiveClass:this.get_isZoneChromeActive(),dashWidth:this.get_dashboardWidth(),dashboardContentWidth:this.get_dashboardContentWidth(),resizePreviewProps:this.get_resizePreviewViewModel().get_props(),areMultipleZonesSelected:this.get_areMultipleZonesSelected()}},isResizable:function(ni){return false},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this)}});var na=global.tab.ZoneObjectDragInstance=ss.mkType(a,'tab.ZoneObjectDragInstance',function(ni,nj,nk){this.$5=null;this.dragged=null;eb.call(this,ni,ni.addAsFloating,mT.forNewZone(nk));this.dragged=ni;this.set_dragDropPresModel(nj)},{get_defaultDropCursor:function(){return spiff.CustomCursor.noOp},handleDrop:function(ni,nj,nk,nl,nm){tab.DashboardAuthoringObjectsPaneTelemetry.logAddNewObjectToDashboardEvent(true,!this.get_isFloating(),((this.dragged.zoneType==='dashboard-object')?this.dragged.objectType.toString():this.dragged.zoneType.toString()));if(this.dragged.zoneType==='web'){this.$5=mK.createWebZoneUrlDialog('',ss.mkdel(this,function(no){this.$4(ni,nj,function(np){},null,no,null,null)}),ss.mkdel(this,function(){this.$3(nj)}));this.$5.show()}else if(this.dragged.zoneType==='text'){this.$4(ni,nj,na.$0,null,null,null,null)}else if(this.dragged.zoneType==='bitmap'){this.$4(ni,nj,tab.DashboardClientCommands.showImageObjectConfigDialog,null,null,null,null)}else if(this.dragged.zoneType==='dashboard-object'&&this.dragged.objectType==='extension'&&ss.isValue(this.dragged.objectHandle)){tab.DashboardClientCommands.addFirstClassExtension(this.$2(ni,this.dragged.objectHandle,this.dragged.objectState))}else if(this.dragged.zoneType==='dashboard-object'&&this.dragged.objectType==='extension'){var nn=new tab.LaunchChooseExtensionDialogForDashboardCmd;nn.set_addExtensionToDashboardCmdInfo(this.$2(ni,null,null));nn.invoke()}else{this.$4(ni,nj,function(no){},null,null,this.dragged.objectHandle,this.dragged.objectState)}},$2:function(ni,nj,nk){return{dashboard:tsConfig.current_sheet_name,isDragDrop:true,dropLocation:{x:ni.x|0,y:ni.y|0},isHorizontal:this.dragged.isHorizontal,addAsFloating:this.get_isFloating(),dashboardObjectHandle:nj,dashboardObjectStateHandle:nk}},$4:function(ni,nj,nk,nl,nm,nn,no){tab.DashboardClientCommands.dropNewZoneObjectOnDashboard(this.dragged.zoneType,this.dragged.isHorizontal,this.get_isFloating(),ni,nl,nm,this.dragged.objectType,nn,no).done(function(np){if(ss.isValue(np.zoneId)){nk(ss.unbox(np.zoneId))}}).always(ss.mkdel(this,function(){this.$3(nj)}))},$3:function(ni){this.$5=tab.MiscUtil.dispose$1(this.$5);ni()}},{$0:function(ni){tab.RichTextClientCommands.launchTextObjectRichTextEditor(ni,true);tab.FormattingTelemetryClient.logRichTextEditorEvent(ss.mkdict(['RichTextEditorOpenedBy','DropNewTextZone','RichTextEditorOpenedFrom','Dashboard']))},create:function(ni,nj,nk){var nl=new na(ni,nj,nk);nl.initialize();return nl}});var nb=global.tab.ZoneResizeViewModel=ss.mkType(a,'tab.ZoneResizeViewModel',function(ni){this.$m=0;this.$l=null;ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.$l=ni;this.$m=3},{$k:function(){return this.$l.get_model()},isEdgeOrParentsResizable:function(ni,nj){var nk=this.$k().getZone(ni.get_parentZoneId());while(ss.isValue(nk)){var nl=this.$3(ni,nj,nk);if(this.$a(ni,nj,nk,nl)){return true}if(this.$e(ni,nj,nk)){nk=this.$k().getZone(nk.get_parentZoneId())}else{break}}return false},$9:function(ni,nj,nk){return this.$a(ni,nj,nk,this.$3(ni,nj,nk))},$a:function(ni,nj,nk,nl){if(nk.get_zoneType()==='layout-flow'){return this.$8(ni,nj,nk,nl)}return!nl},$8:function(ni,nj,nk,nl){if(nk.get_zoneCommonModel().get_zoneLayoutType()==='distribute-evenly'){return false}switch(nj){case 3:{return!nk.get_isHorizontal()&&(nk.get_hasSpace()||!nl)&&this.$2(ni,nk,0)}case 0:{return nk.get_isHorizontal()&&!nl&&this.$2(nk,ni,1)}case 1:{return nk.get_isHorizontal()&&(nk.get_hasSpace()||!nl)&&this.$2(ni,nk,1)}case 2:{return!nk.get_isHorizontal()&&!nl&&this.$2(nk,ni,0)}default:{return!nl}}},getDraggableFeedbackOnLegacyDashboard:function(ni,nj){var nk=this.$k().zonesModel.getChildren(0).sort(function(nn,no){return((nn.get_relativeZoneZIndex()>no.get_relativeZoneZIndex())?-1:1)});for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(this.$b(nm,ni,nj)){return this.$1(nm,ni,nj)}}return 2},$1:function(ni,nj,nk){var nl=this.$k().zonesModel.getChildren(ni.get_zoneId());while(nl.length>0){var nm=nl.pop();if(this.$h(nm,nj,nk)){continue}if(this.$d(nm,nj,nk)){if(this.$9(nm,0,ni)){return 1}}else if(this.$f(nm,nj,nk)){if(this.$9(nm,1,ni)){return 1}}else if(this.$g(nm,nj,nk)){if(this.$9(nm,2,ni)){return 0}}else if(this.$c(nm,nj,nk)){if(this.$9(nm,3,ni)){return 0}}ni=nm;nl=this.$k().zonesModel.getChildren(ni.get_zoneId())}return 2},$2:function(ni,nj,nk){switch(nk){case 0:{return nj.get_y()-ni.get_y()+nj.get_height()>2*32}case 1:{return nj.get_x()-ni.get_x()+nj.get_width()>2*32}default:{return false}}},$e:function(ni,nj,nk){var nl=false;switch(nj){case 3:{nl=this.$c(nk,ni.get_x(),ni.get_y()+ni.get_height());break}case 0:{nl=this.$d(nk,ni.get_x(),ni.get_y());break}case 1:{nl=this.$f(nk,ni.get_x()+ni.get_width(),ni.get_y());break}case 2:{nl=this.$g(nk,ni.get_x(),ni.get_y());break}}return nl},$3:function(ni,nj,nk){var nl=false;switch(nj){case 3:{nl=this.$4(ni,nk);break}case 0:{nl=this.$5(ni,nk);break}case 1:{nl=this.$6(ni,nk);break}case 2:{nl=this.$7(ni,nk);break}}return nl},isNotOnAnyZone:function(ni,nj){var nk=this.$l.get_model().get_zoneModels();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(!this.$h(nm,ni,nj)){return false}}return true},$7:function(ni,nj){var nk=ni.get_y();var nl=nj.get_contentY()+nj.contentBorderWidth();return nk===nl},$g:function(ni,nj,nk){return this.$i(ni.get_y(),ni.get_x(),ni.get_width(),nj,nk)},$4:function(ni,nj){var nk=ni.get_y()+ni.get_height();var nl=nj.get_contentY()+nj.get_contentHeight()+nj.contentBorderWidth();return nk===nl},$c:function(ni,nj,nk){return this.$i(ni.get_y()+ni.get_height(),ni.get_x(),ni.get_width(),nj,nk)},$5:function(ni,nj){var nk=ni.get_x();var nl=nj.get_contentX()+nj.contentBorderWidth();return nk===nl},$d:function(ni,nj,nk){return this.$j(ni.get_x(),ni.get_y(),ni.get_height(),nj,nk)},$6:function(ni,nj){var nk=ni.get_x()+ni.get_width();var nl=nj.get_contentX()+nj.get_contentWidth()+nj.contentBorderWidth();return nk===nl},$f:function(ni,nj,nk){return this.$j(ni.get_x()+ni.get_width(),ni.get_y(),ni.get_height(),nj,nk)},$i:function(ni,nj,nk,nl,nm){return nj<=nl&&nl<=nj+nk&&Math.abs(nm-ni)<=this.$m},$j:function(ni,nj,nk,nl,nm){return nj<=nm&&nm<=nj+nk&&Math.abs(nl-ni)<=this.$m},$h:function(ni,nj,nk){return ni.get_x()-this.$m>=nj||ni.get_y()-this.$m>=nk||nj>=ni.get_x()+ni.get_width()+this.$m||nk>=ni.get_y()+ni.get_height()+this.$m},$b:function(ni,nj,nk){return ni.get_x()<=nj&&ni.get_y()<=nk&&nj<=ni.get_x()+ni.get_width()&&nk<=ni.get_y()+ni.get_height()}});var nc=global.tab.ZoneSelectionComponent=ss.mkType(a,'tab.ZoneSelectionComponent',function(ni,nj){this.$b=null;this.$c=null;ss.makeGenericType(bl,[Object]).call(this,ni,nj);this.$c=new Map;this.$c.set(3,ss.mkdel(this,function(nk){this.$6(nk,[3])}));this.$c.set(0,ss.mkdel(this,function(nk){this.$6(nk,[0])}));this.$c.set(1,ss.mkdel(this,function(nk){this.$6(nk,[1])}));this.$c.set(2,ss.mkdel(this,function(nk){this.$6(nk,[2])}));this.$b=new Map;this.$b.set(nc.$1,ss.mkdel(this,function(nk){this.$6(nk,nc.$1)}));this.$b.set(nc.$2,ss.mkdel(this,function(nk){this.$6(nk,nc.$2)}));this.$b.set(nc.$3,ss.mkdel(this,function(nk){this.$6(nk,nc.$3)}));this.$b.set(nc.$4,ss.mkdel(this,function(nk){this.$6(nk,nc.$4)}))},{$8:function(){return ss.mkdel(this,function(ni){if(ss.isValue(ni)){ni.oncontextmenu=ss.mkdel(this,this.$7)}})},render:function(){var ni=(this.props.isLayoutContainer?'layoutContainerChrome':'');var nj={className:['tabZoneSelParent',ni].join(' '),hidden:!this.props.isVisible,ref:this.$8()};var nk=tab.ZoneChromeConstants.chromeRectFromZone(this.props.zone,this.props.shouldEnlarge,true);if(this.props.areMultipleZonesSelected){return spiff.DOMElements.div(nj,this.renderEdge(2,nk),this.renderEdge(3,nk),this.renderEdge(0,nk),this.renderEdge(1,nk))}else{return spiff.DOMElements.div(nj,this.renderEdge(2,nk),this.renderEdge(3,nk),this.renderEdge(0,nk),this.renderEdge(1,nk),this.renderButtons(nk),this.$a(nk,'tabZoneTopResizer',2),this.$a(nk,'tabZoneBottomResizer',3),this.$a(nk,'tabZoneRightResizer',1),this.$a(nk,'tabZoneLeftResizer',0),this.$9(nk,'tabZoneNWResizer',nc.$2),this.$9(nk,'tabZoneSWResizer',nc.$4),this.$9(nk,'tabZoneNEResizer',nc.$1),this.$9(nk,'tabZoneSEResizer',nc.$3),this.renderPendingResizePreview())}},$a:function(ni,nj,nk){var nl=this.props.dragEnabled;switch(nk){case 3:{nl=nl&&this.props.isBottomResizable;break}case 0:{nl=nl&&this.props.isLeftResizable;break}case 1:{nl=nl&&this.props.isRightResizable;break}case 2:{nl=nl&&this.props.isTopResizable;break}}return spiff.DOMElements.div({hidden:!nl,className:nj,key:nk.toString()+(ss.isValue(this.props.zone)?this.props.zone.get_zoneId().toString():''),style:tab.ZoneChromeConstants.getEdgeCss(ni,nk,4),ref:this.$c.get(nk)})},$9:function(ni,nj,nk){var nl=this.props.dragEnabled&&this.props.areCornersResizable;return spiff.DOMElements.div({hidden:!nl,className:nj,key:nk.toString()+(ss.isValue(this.props.zone)?this.props.zone.get_zoneId().toString():''),style:tab.ZoneChromeConstants.getCornerCss(ni,nk[0],nk[1],4),ref:this.$b.get(nk)})},$6:function(ni,nj){if(ss.isValue(ni)){var nk=$(ni);if(!EventUtils.DragDropManager.isDragSource(nk)){var nl=this.props.resizeDragSourceFactory(nj);EventUtils.DragDropManager.attachDragSource(nk,nl)}}},$7:function(ni){spiff.EventUtil.stopEvent(ni);this.props.onContextMenu(ni)},$5:function(ni){if(ss.isValue(ni)&&!this.props.areMultipleZonesSelected){EventUtils.DragDropManager.attachDragSource($(ni),this.props.moveDragSource)}}});var nd=global.tab.ZoneSelectionViewModel=ss.mkType(a,'tab.ZoneSelectionViewModel',function(ni,nj,nk,nl){this.$e=null;this.$f=null;this.$g=null;ss.makeGenericType(bm,[Object]).call(this,ni);this.$f=nj;var nm=new tab.ToolbarButtonViewModel(null,'tabAuthZoneChrome-tabGoToSheet',ss.mkdel(this,this.$7));nm.set_tooltipText(tab.Strings.GoToSheet);var nn=nm;this.$e=ss.arrayClone([nn]);if(nl){this.set_selectedZone(nk)}if(!nl){var no=ss.mkdel(this,function(){this.activeZoneChanged()});var np=ss.mkdel(this,function(){this.incrementProps()});this.disposables.add$1(this.dashboardModelHolder.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.handleDashboardModelChanged)).addEventBinding(function(nq){if(nq.get_isDashboard()){nq.add_newDashboard(no);nq.add_autoGeneratedDeviceLayoutsChanged(np)}},function(nq){if(nq.get_isDashboard()){nq.remove_newDashboard(no);nq.remove_autoGeneratedDeviceLayoutsChanged(np)}}))}},{$a:function(){return ss.isValue(this.dashboardModelHolder.get_model())&&this.dashboardModelHolder.get_model().get_isCurrentLayoutAutoGenerated()},get_selectedZone:function(){return this.$g},set_selectedZone:function(ni){if(ss.referenceEquals(this.$g,ni)){return}if(ss.isValue(this.$g)){this.$g.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.$9));this.$g.get_chromeCommands().remove_commandsChanged(ss.mkdel(this,this.handleUpdateZoneChrome))}this.$g=(this.isZoneSelectionSupported(ni)?ni:null);if(ss.isValue(this.$g)){this.$g.get_zoneCommonModel().add_resizeZone(ss.mkdel(this,this.$9));this.$g.get_chromeCommands().add_commandsChanged(ss.mkdel(this,this.handleUpdateZoneChrome))}this.updateChromeItems();this.get_resizePreviewViewModel().resetLocalSize(this.$g);this.forceHidden=false;this.incrementProps()},$b:function(){return ss.isValue(this.$g)&&this.$g.get_zoneType()==='viz'&&!this.get_showZoneChromeButtons()},$c:function(){return ss.isValue(this.get_selectedZone())&&!this.get_selectedZone().get_isFloating()},$d:function(){if(ss.isValue(this.get_selectedZone())&&ss.isValue(this.dashboardModelHolder.get_model())){var ni=ss.contains(nd.$1,this.get_selectedZone().get_zoneType());var nj=this.dashboardModelHolder.get_model().get_currentlyOnDesignDashboard();return!(ni&&nj)}return true},$8:function(ni){var nj=new spiff.ShowMenuOptions($(ni.currentTarget),false);nj.cursorPosition={left:ni.clientX,top:ni.clientY};var nk=nj;var nl=function(nm){tab.WidgetUtil.showMenu(nm.zoneContextMenu,nk)};tab.DashboardClientCommands.getZoneChromeContextMenu(this.get_selectedZone().get_dashboardModel().get_sheetName(),this.get_selectedZone().get_zoneId(),nl)},get_dragEnabled:function(){return!tsConfig.is_mobile&&!this.get_areMultipleZonesSelected()},isResizable:function(ni){if(ss.isValue(this.get_selectedZone())){return this.get_selectedZone().get_isFloating()||this.$f(this.get_selectedZone(),ni)}return false},createInitialProps:function(){return{selectParent:ss.mkdel(this,this.selectZoneParent)}},createUpdatedProps:function(){var ni=ss.isValue(this.get_selectedZone())&&(this.get_selectedZone().get_zoneType()==='layout-flow'||this.get_selectedZone().get_zoneType()==='layout-basic'||this.$g.get_zoneType()==='layout-carousel');return{zone:this.get_selectedZone(),buttons:(this.$b()?this.$e:this.get_chromeItems()),moveDragSource:this,resizeDragSourceFactory:ss.mkdel(this,this.createChromeDragSource),isVisible:!this.forceHidden&&ss.isValue(this.get_selectedZone())&&this.get_selectedZone().get_isVisible()&&!this.$a(),shouldEnlarge:this.$c(),dragEnabled:this.get_dragEnabled(),isTopResizable:this.isResizable(2),isBottomResizable:this.isResizable(3),isLeftResizable:this.isResizable(0),isRightResizable:this.isResizable(1),shouldHaveHandle:this.$d(),isDesignMode:(ss.isValue(this.dashboardModelHolder.get_model())?this.dashboardModelHolder.get_model().get_currentlyOnDesignDashboard():false),zoneType:(ss.isValue(this.get_selectedZone())?this.get_selectedZone().get_zoneType():'invalid'),objectType:(ss.isValue(this.get_selectedZone())?this.get_selectedZone().get_objectType():'invalid'),isHorizontal:ss.isValue(this.get_selectedZone())&&this.get_selectedZone().get_isHorizontal(),areCornersResizable:ss.isValue(this.get_selectedZone())&&this.get_selectedZone().get_isFloating(),addWasActiveClass:this.get_isZoneChromeActive(),dashWidth:this.get_dashboardWidth(),dashboardContentWidth:this.get_dashboardContentWidth(),isLayoutContainer:ni,resizePreviewProps:this.get_resizePreviewViewModel().get_props(),areMultipleZonesSelected:this.get_areMultipleZonesSelected(),onContextMenu:ss.mkdel(this,this.$8)}},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);this.set_selectedZone(null)},selectZoneParent:function(){tab.DashboardZoneCommands.selectZoneParent(this.$g.get_zoneId())},handleDashboardModelChanged:function(){var ni=this.dashboardModelHolder.get_model();if(ss.isValue(ni)&&ni.get_isDashboard()){this.set_selectedZone(ni.getZone(ni.get_activeZoneID()))}else{this.set_selectedZone(null)}},$9:function(){this.get_resizePreviewViewModel().resetLocalSize(this.$g);this.incrementProps()},activeZoneChanged:function(){if(ss.isNullOrUndefined(this.dashboardModelHolder.get_model())){return}this.set_selectedZone(this.dashboardModelHolder.get_model().getZone(this.dashboardModelHolder.get_model().get_activeZoneID()))},$7:function(){if(ss.isNullOrUndefined(this.get_selectedZone())||ss.isNullOrEmptyString(this.get_selectedZone().get_associatedSheet())){return}tab.SheetClientCommands.goToSheet(this.get_selectedZone().get_associatedSheet(),null,null)},updateChromeItems:function(){this.disposeChromeItems();if(ss.isNullOrUndefined(this.get_selectedZone())||!this.get_showZoneChromeButtons()){return}var ni=this.get_selectedZone().get_chromeCommands();this.addChromeItems(ni)},startDrag:function(ni){if(ss.isValue(this.get_selectedZone())){var nj=this.getGrabPoint(ni);var nk=tab.DashboardClientCommands.getSheetDragDropTargets(this.get_selectedZone().get_zoneId(),nj);var nl=$.Deferred();nk.done(function(nm){nl.resolve(nm.zoneDragDrop)}).fail(function(){nl.reject()});if(this.get_selectedZone().get_isFloating()){return gr.create(this.get_selectedZone(),nj,nl)}return mU.createWithAvatar(this.get_selectedZone(),nj,nl)}return null},acceptsDragType:function(){return 1},createChromeDragSource:function(ni){return new mQ(this.dashboardModelHolder,this,ni)}});var ne=global.tab.ZoneTitleCheckboxViewModel=ss.mkType(a,'tab.ZoneTitleCheckboxViewModel',function(ni){this.$7=null;nf.call(this,ni);this.$7=ni;this.disposables.add$1(this.$7.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nj){nj.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nj){nj.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})))},{get_label:function(){return tab.Strings.LayoutPaneZoneTitleCheckbox},get_testId:function(){return'layout-zone-title-checkbox'},get_disabled:function(){return!this.get_activeZone().get_canHaveTitle()||this.$6()},get_checked:function(){return this.get_activeZone().get_hasTitle()},toggleFunction:function(ni){if(ss.isValue(this.get_activeZone())&&this.get_activeZone().get_hasTitle()!==ni){tab.DashboardZoneCommands.toggleZoneTitle(this.get_activeZone().get_zoneId())}},bindEventHandlerToZone:function(ni){ni.get_zoneCommonModel().add_changeZoneTitleVisibility(ss.mkdel(this,this.incrementProps))},unbindEventHandlerToZone:function(ni){ni.get_zoneCommonModel().remove_changeZoneTitleVisibility(ss.mkdel(this,this.incrementProps))},$6:function(){return ss.isValue(this.$7)&&ss.isValue(this.$7.get_model())&&this.$7.get_model().get_isCurrentLayoutAutoGenerated()}});var nf=global.tab.ZoneToggleCheckboxBaseViewModel=ss.mkType(a,'tab.ZoneToggleCheckboxBaseViewModel',function(ni){this.$4=null;this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=ni;this.$5=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.disposables.add$1(this.$4.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addEventBinding(ss.mkdel(this,function(nj){nj.add_activeZoneChanged(ss.mkdel(this,this.$3))}),ss.mkdel(this,function(nj){nj.remove_activeZoneChanged(ss.mkdel(this,this.$3))})));this.disposables.add$1(this.$5.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,this.bindEventHandlerToZone),ss.mkdel(this,this.unbindEventHandlerToZone)))},{get_activeZone:function(){return this.$5.get_model()},set_activeZone:function(ni){this.$5.set_Model(ni)},get_disabled:null,get_checked:null,get_label:null,get_testId:null,toggleFunction:null,bindEventHandlerToZone:null,unbindEventHandlerToZone:null,$3:function(){var ni=this.$4.get_model();if(ss.isValue(ni)&&ni.get_isDashboard()&&ni.get_hasActiveZone()){this.set_activeZone(ni.getZone(ni.get_activeZoneID()))}else{this.set_activeZone(null)}},createInitialProps:function(){return{label:this.get_label(),checked:false,handleChange:ss.mkdel(this,this.toggleFunction),testId:this.get_testId()}},createUpdatedProps:function(){var ni=true;var nj=false;if(ss.isValue(this.get_activeZone())){ni=this.get_disabled();nj=this.get_checked()}return{label:this.get_props().label,checked:nj,handleChange:this.get_props().handleChange,testId:this.get_props().testId,disabled:ni}}});var ng=global.tab.ZoneVisibilityFromFieldDropdownButtonComponent=ss.mkType(a,'tab.ZoneVisibilityFromFieldDropdownButtonComponent',function(ni){spiff.PureRenderComponent.call(this,ni)},{render:function(){var ni=React.createElement(SharedWidgets.HierarchicalDropdownWidget,this.$0(),this.$1());return spiff.DOMElements.div({className:'tab-SubSectionVisibilityFromFieldDropdown',key:'select-zone-visibility-from-field-value-dropdown'},ni)},$1:function(){var ni='';if(ss.isValue(this.props.selectedFieldNameAndCaption)){if(this.props.selectedFieldNameAndCaption.length>1){ni=this.props.selectedFieldNameAndCaption[1]}}return ni},$0:function(){var ni={labelId:'fieldCaptionPairsLabelId',menuItemInfos:this.props.fieldCaptionPairs,testId:'fieldCaptionPairs-dropdown-button',type:1,onSelect:ss.mkdel(this,this.$2),zIndex:1000,disabled:this.props.disabled,style:{textOverflow:'ellipsis',whiteSpace:'nowrap'}};var nj=ss.isNullOrUndefined(this.props.errorMessage)||this.props.errorMessage.length===0;if(!nj){ni.valid=false;ni.message=this.props.errorMessage}return ni},$2:function(ni){if(!ss.staticEquals(this.props.handleSelect,null)){this.props.handleSelect(ni)}}});var nh=global.tab.ZoneVisibilityFromFieldViewModel=ss.mkType(a,'tab.ZoneVisibilityFromFieldViewModel',function(ni){this.$p=null;this.$r=null;this.$q=false;this.$3$1=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$p=ni;this.$r=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.disposables.add$1(this.$p.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$7)).addEventBinding(ss.mkdel(this,this.bindEventHandlerToDashboard),ss.mkdel(this,this.unbindEventHandlerToDashboard)));this.disposables.add$1(this.$r.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,this.bindEventHandlerToZone),ss.mkdel(this,this.unbindEventHandlerToZone)))},{bindEventHandlerToZone:function(ni){this.$o().add_changeSelectedSingleValueField(ss.mkdel(this,this.incrementProps));this.$o().add_updateListOfSingleValueFields(ss.mkdel(this,this.incrementProps))},unbindEventHandlerToZone:function(ni){this.$o().remove_changeSelectedSingleValueField(ss.mkdel(this,this.incrementProps));this.$o().remove_updateListOfSingleValueFields(ss.mkdel(this,this.incrementProps))},bindEventHandlerToDashboard:function(ni){ni.add_activeZoneChanged(ss.mkdel(this,this.$7));this.$o().add_changeSelectedSingleValueField(ss.mkdel(this,this.incrementProps));this.$o().add_updateListOfSingleValueFields(ss.mkdel(this,this.incrementProps))},unbindEventHandlerToDashboard:function(ni){ni.remove_activeZoneChanged(ss.mkdel(this,this.$7));this.$o().remove_changeSelectedSingleValueField(ss.mkdel(this,this.incrementProps));this.$o().remove_updateListOfSingleValueFields(ss.mkdel(this,this.incrementProps))},$j:function(){return tab.Strings.LayoutPaneZoneVisibilityFromFieldCheckbox},$n:function(){return'layout-zone-visibility-from-field-checkbox'},$o:function(){var ni=this.$p.get_model();if(ss.isValue(ni)&&ni.get_isDashboard()&&ni.get_hasActiveZone()){return ni.getZoneVisibilityFromFieldList()}var nj=tab.ApplicationModel.get_instance();return nj.modelInstance(tab.ZoneVisibilityFromFieldListModel).call(nj)},$d:function(){if(ss.isValue(this.$o())&&ss.isValue(this.get_activeZone())){return this.$o().getZoneVisibilityFromFieldPresModel(this.get_activeZone().get_zoneId())}else{return null}},$m:function(){if(ss.isValue(this.$o())){return this.$o().get_singleValueFields()}else{return null}},$f:function(){return ss.isNullOrUndefined(this.get_activeZone())||ss.isValue(this.$d())&&!this.$d().canSetZoneVisibilityFromField},$e:function(){if(this.$q){return this.$h()}return ss.isValue(this.$d())&&this.$d().isZoneVisibilityFromFieldChecked},$g:function(){if(ss.isValue(this.$d())){return this.$d().zoneVisibilityFromFieldError}else{return null}},$k:function(){return this.$5()},$l:function(){return this.$6()},$h:function(){return this.$3$1},$i:function(ni){this.$3$1=ni},$c:function(ni){if(ss.isValue(this.get_activeZone())){this.$q=true;this.$i(ni);if(this.$h()){this.incrementProps()}else{this.$9();this.$a()}this.$4()}},$4:function(){tab.OnlineAnalyticsClient.logEndeavourSpan('data_driven_zone_visibility_toggled',ss.mkdict(['is_checked',this.$h(),'compatible_field_count',this.$6().length-1]))},$9:function(){this.$q=false;this.$i(false)},$8:function(){var ni=this.$5();if(ni.length===2&&(ni[0]===''&&ss.referenceEquals(ni[1],tab.Strings.SingleValueFieldCaptionNone))){return true}return false},$a:function(){if(this.$8()){this.incrementProps()}else{tab.DashboardZoneCommands.clearFieldForZoneVisibility(this.get_activeZone().get_zoneId())}},$b:function(ni){if(ss.isValue(this.get_activeZone())){this.$q=true;this.$i(true);if(ss.referenceEquals(ni,tab.Strings.SingleValueFieldCaptionNone)){this.$a()}else{tab.DashboardZoneCommands.selectFieldForZoneVisibility(this.get_activeZone().get_zoneId(),ni)}}},$5:function(){var ni=[];if(ss.isValue(this.$d())&&ss.isValue(this.$d().fieldCaptionPair)){ni.push(this.$d().fieldCaptionPair.fn);ni.push(this.$d().fieldCaptionPair.fieldCaption)}return ni},$6:function(){var ni=this.$5();var nj=[];nj.push({value:tab.Strings.SingleValueFieldCaptionNone,displayValue:tab.Strings.SingleValueFieldCaptionNone,checked:ni.length===0||this.$8()});var nk=nj;if(ss.isValue(this.$d())&&ss.isValue(this.$m())&&ni.length>1){if(this.$m().length===1){this.$3(nk,this.$m()[0],ni[0])}else{var nl=this.$m();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=[];var np=this.$3(no,nn,ni[0]);var nq={value:nn.datasourceCaption,displayValue:nn.datasourceCaption,checked:np};nq.menuItemInfos=no;nk.push(nq)}}}return nk},$3:function(ni,nj,nk){var nl=false;var nm=false;for(var nn=0;nn<nj.fieldCaptionPairs.length;nn++){var no=nj.fieldCaptionPairs[nn];nm=false;if(ss.referenceEquals(no.fn,nk)){nl=true;nm=true}ni.push({value:no.fn,displayValue:no.fieldCaption,checked:nm})}return nl},get_activeZone:function(){return this.$r.get_model()},set_activeZone:function(ni){this.$r.set_Model(ni)},$7:function(){this.$9();var ni=this.$p.get_model();if(ss.isValue(ni)&&ni.get_isDashboard()&&ni.get_hasActiveZone()){this.set_activeZone(ni.getZone(ni.get_activeZoneID()))}else{this.set_activeZone(null)}},createUpdatedProps:function(){var ni=true;var nj=false;var nk=null;var nl=null;var nm=null;if(ss.isValue(this.get_activeZone())){ni=this.$f();nj=this.$e();nk=this.$g();nl=this.$k();nm=this.$l()}return{checked:nj,disabled:ni,label:this.$j(),testId:this.$n(),errorMessage:nk,selectedFieldNameAndCaption:nl,singleValueFieldCaptionPairs:nm,handleCheckboxToggle:ss.mkdel(this,this.$c),handleFieldSelection:ss.mkdel(this,this.$b)}}});ss.initClass(b);ss.initClass(c,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initInterface(gI,{get_viewType:null,get_viewModel:null,get_active:null,set_active:null});ss.initClass(f,null,[gI]);ss.initClass(g);ss.initClass(h,spiff.Template,[ss.IDisposable]);ss.initClass(i,spiff.Template,[ss.IDisposable]);ss.initClass(j);ss.initClass(k);ss.initClass(l,spiff.Template,[ss.IDisposable]);ss.initClass(m,spiff.Template,[ss.IDisposable,spiff.ITabControlTemplate]);ss.initClass(n);ss.initClass(o);ss.initClass(p,spiff.Template,[ss.IDisposable]);ss.initClass(q);ss.initClass(r);ss.initClass(s);ss.initClass(t,spiff.Template,[ss.IDisposable]);ss.initClass(u,t,[ss.IDisposable]);ss.initClass(v,t,[ss.IDisposable]);ss.initClass(w,tab.TooltipTemplate,[ss.IDisposable]);ss.initClass(x,spiff.Template,[ss.IDisposable]);ss.initClass(y,ss.makeGenericType(spiff.BaseView$1,[z]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[z]),ss.IDisposable,tab.IAppendableView]);ss.initClass(z,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(A);ss.initClass(B,spiff.Template,[ss.IDisposable]);ss.initClass(C,spiff.Template,[ss.IDisposable]);ss.initClass(D,ss.makeGenericType(spiff.BaseView$1,[E]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[E]),ss.IDisposable,tab.IAppendableView]);ss.initClass(E,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(F,ss.makeGenericType(spiff.BaseView$1,[G]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[G]),ss.IDisposable,tab.IAppendableView]);ss.initClass(co,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(G,co,[tab.IViewModel,ss.IDisposable]);ss.initClass(cn,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(H,cn,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(I,null,[ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(J);ss.initClass(K);ss.initClass(L,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(M,spiff.PureRenderComponent);ss.initClass(N);ss.initClass(O,ss.makeGenericType(spiff.BaseView$1,[Y]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[Y]),ss.IDisposable,tab.IAppendableView]);ss.initClass(P,spiff.Template,[ss.IDisposable]);ss.initClass(Q);ss.initClass(R,spiff.Template,[ss.IDisposable]);ss.initClass(S,spiff.Template,[ss.IDisposable]);ss.initClass(T,ss.makeGenericType(spiff.BaseView$1,[U]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[U]),ss.IDisposable,tab.IAppendableView]);ss.initClass(U,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(V,spiff.Template,[ss.IDisposable]);ss.initClass(W,spiff.Template,[ss.IDisposable]);ss.initClass(X,ss.makeGenericType(spiff.BaseView$1,[Y]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[Y]),ss.IDisposable,tab.IAppendableView]);ss.initClass(Y,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(Z,spiff.Template,[ss.IDisposable]);ss.initClass(ba,ss.makeGenericType(spiff.BaseView$1,[bb]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bb]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bb,spiff.BaseViewModel,[tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(bc);ss.initClass(bd,spiff.Widget,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lu,EventUtils.DragInstance);ss.initClass(cp,lu);ss.initClass(be,cp,[ss.IDisposable]);ss.initClass(bf,spiff.PureRenderComponent);ss.initClass(bg);ss.initClass(bh);ss.initClass(bi,spiff.PureRenderComponent);ss.initClass(bj,React.Component);ss.initClass(bk);ss.initClass(bn);ss.initClass(bo,ss.makeGenericType(spiff.BaseView$1,[bp]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bp]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bp,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bq);ss.initClass(br);ss.initClass(bs,spiff.Template,[ss.IDisposable]);ss.initClass(bt,ss.makeGenericType(spiff.BaseView$1,[bu]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bu]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bu,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bw,React.PureComponent);ss.initClass(bx);ss.initClass(by,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(bz);ss.initClass(bA);ss.initClass(bB,spiff.PureRenderComponent);ss.initClass(bC,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(bD);ss.initClass(bE);ss.initClass(bF,spiff.PureRenderComponent);ss.initClass(bG,ss.makeGenericType(spiff.BaseView$1,[bH]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bH]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bH,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bI,spiff.Template,[ss.IDisposable]);ss.initClass(bJ);ss.initClass(bK,ss.makeGenericType(spiff.BaseView$1,[bM]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bM]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bL,EventUtils.DragInstance);ss.initClass(bM,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bN);ss.initClass(bO,spiff.Template,[ss.IDisposable]);ss.initClass(bP,ss.makeGenericType(tab.BaseToolbarButtonComponent$2,[tab.ToolbarButtonViewModel,bQ]));ss.initClass(bQ,tab.ToolbarButtonView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bR,ss.makeGenericType(tab.BaseToolbarButtonComponent$2,[tab.ToolbarDropdownButtonViewModel,bS]));ss.initClass(bS,bQ,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bT,bQ,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bU);ss.initClass(bV,tab.ToolbarButtonTemplate,[ss.IDisposable]);ss.initClass(bW,bQ,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bX,bQ,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bY,tab.ToolbarButtonViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bZ,ss.makeGenericType(spiff.BaseView$1,[ca]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ca]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ca,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cb,spiff.Template,[ss.IDisposable]);ss.initClass(cc);ss.initClass(cd,null,[ss.makeGenericType(tab.IView$1,[ce]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ce,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cf,null,[ss.makeGenericType(tab.IView$1,[cg]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cg,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(ch,tab.ZoneChromeEdgeRender);ss.initClass(ci,tab.ZoneReadinessComponent);ss.initClass(cj,tab.ZoneReadinessViewModel,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ck,spiff.PureRenderComponent);ss.initClass(cl,null,[ss.IDisposable]);ss.initClass(cm,spiff.PureRenderComponent);ss.initClass(cq,spiff.Widget,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cr,cp);ss.initClass(cs,null,[ss.IDisposable]);ss.initClass(ct,ss.makeGenericType(spiff.BaseView$1,[cu]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cu]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cu,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(cv,spiff.PureRenderComponent);ss.initClass(cz,spiff.Template,[ss.IDisposable]);ss.initClass(cw,cz,[ss.IDisposable]);ss.initClass(cA,ss.makeGenericType(spiff.BaseView$1,[cB]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cB]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cx,cA,[tab.IWidget,ss.makeGenericType(tab.IView$1,[cB]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cy);ss.initClass(cB,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,EventUtils.IDragResponder]);ss.initClass(cC,spiff.Template,[ss.IDisposable]);ss.initClass(cD,spiff.Template,[ss.IDisposable]);ss.initClass(cE,ss.makeGenericType(spiff.BaseView$1,[cF]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cF]),ss.IDisposable,tab.IAppendableView,spiff.IListItemContentCreator]);ss.initClass(cF,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cG,spiff.Template,[ss.IDisposable]);ss.initInterface(gR,{get_scrollableContentPreferredHeight:null,setScrollableContentActualHeight:null});ss.initClass(cI);ss.initClass(cK,ss.makeGenericType(spiff.BaseView$1,[cL]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cL]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cL,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cM,spiff.Template,[ss.IDisposable]);ss.initClass(cN);ss.initClass(cO,React.Component);ss.initClass(cP,React.Component);ss.initClass(cQ,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cR,spiff.Template,[ss.IDisposable]);ss.initClass(cS,ss.makeGenericType(spiff.BaseView$1,[cT]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cT]),ss.IDisposable,tab.IAppendableView]);ss.initClass(dm,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cT,dm,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(cU,tab.CloseAuthoringCmd);ss.initClass(cV,React.Component);ss.initClass(cW,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cX,React.Component);ss.initClass(cZ,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(da,spiff.Template,[ss.IDisposable]);ss.initClass(db,ss.makeGenericType(spiff.BaseView$1,[dc]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[dc]),ss.IDisposable,tab.IAppendableView]);ss.initClass(dc,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(dd,spiff.Template,[ss.IDisposable]);ss.initClass(de,ss.makeGenericType(spiff.BaseView$1,[df]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[df]),ss.IDisposable,tab.IAppendableView]);ss.initClass(df,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(dl);ss.initClass(dg,dl);ss.initClass(dh,dl);ss.initClass(di,ss.makeGenericType(spiff.BaseView$1,[dj]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[dj]),ss.IDisposable,tab.IAppendableView]);ss.initClass(dj,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(dk,spiff.Template,[ss.IDisposable]);ss.initClass(dn);ss.initClass(dp);ss.initClass(dq,spiff.Template,[ss.IDisposable]);ss.initClass(dr,spiff.Template,[ss.IDisposable]);ss.initClass(ds,ss.makeGenericType(spiff.BaseView$1,[dt]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[dt]),ss.IDisposable,tab.IAppendableView]);ss.initClass(dt,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(du);ss.initClass(dv);ss.initClass(dw,spiff.Template,[ss.IDisposable]);ss.initClass(dx,ss.makeGenericType(spiff.BaseView$1,[gM]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gM]),ss.IDisposable,tab.IAppendableView]);ss.initInterface(gM,{get_colorProvider:null,get_selectedColor:null,set_selectedColor:null,get_isTransparencyVisible:null,get_colorTransparencyControlViewModel:null},[tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState]);ss.initClass(dy,spiff.BaseViewModel,[gM,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(dz,spiff.Template,[ss.IDisposable]);ss.initClass(dA,ss.makeGenericType(spiff.BaseView$1,[gN]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gN]),ss.IDisposable,tab.IAppendableView]);ss.initInterface(gN,{get_tabIndex:null,set_tabIndex:null},[tab.IContinuousRangeModel,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState]);ss.initClass(dB,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),gN,tab.IContinuousRangeModel,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState]);ss.initClass(dC);ss.initClass(dD,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(dE);ss.initClass(dF,React.Component);ss.initClass(dG);ss.initClass(dH,spiff.MoveDragInstance);ss.initClass(dI,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(dJ,null,[ss.IDisposable]);ss.initClass(dK,React.Component);ss.initClass(dL);ss.initClass(dM);ss.initClass(fJ,null,[ss.IDisposable]);ss.initClass(dN,fJ,[ss.IDisposable]);ss.initClass(dO,tab.CopyZoneToWebClipboardCmd);ss.initClass(mq,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(dP,mq,[tab.IViewModel,ss.IDisposable]);ss.initClass(dQ,React.Component);ss.initClass(dR,mq,[tab.IViewModel,ss.IDisposable]);ss.initClass(dS);ss.initClass(dT);ss.initClass(dU,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(dV);ss.initClass(dW,cn,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initStruct(dX);ss.initClass(dY,React.Component);ss.initClass(dZ);dZ.$ctor1.prototype=dZ.prototype;ss.initClass(ea,React.Component);ss.initClass(eb,EventUtils.DragInstance,[ss.IDisposable]);ss.initClass(ec,React.Component);ss.initClass(ed,spiff.PureRenderComponent);ss.initClass(ee,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ef);ss.initClass(eg);ss.initClass(eh);ss.initClass(ei,ss.makeGenericType(spiff.BaseReactViewModel$1,[eg]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[eg])]);ss.initClass(ej);ss.initClass(ek,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(el);ss.initClass(em,spiff.PureRenderComponent);ss.initClass(en);ss.initClass(eo,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(ep,React.PureComponent);ss.initClass(eq,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(er,ss.makeGenericType(spiff.BaseView$1,[es]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[es]),ss.IDisposable,tab.IAppendableView]);ss.initClass(es,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initInterface(gY,{getSelectedSheet:null,determineSelectedSheet:null,onUpdatedSheetList:null,onNewFlipboardNav:null,onActiveZoneChanged:null,onDoubleClicked:null,getDragInstance:null});ss.initClass(et,null,[gY]);ss.initClass(eu,ss.makeGenericType(spiff.ListComponent$2,[Object,Object]));ss.initClass(ev,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(ew,spiff.PureRenderComponent);ss.initClass(ex,React.Component);ss.initClass(ey);ss.initClass(ez,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eB,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eC,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eD,spiff.PureRenderComponent);ss.initClass(eE,spiff.PureRenderComponent);ss.initClass(eF);ss.initClass(eG,spiff.Template,[ss.IDisposable]);ss.initClass(eH,spiff.Template,[ss.IDisposable]);ss.initClass(eI,ss.makeGenericType(spiff.BaseView$1,[lc]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lc]),ss.IDisposable,tab.IAppendableView]);ss.initClass(eJ,spiff.Template,[ss.IDisposable]);ss.initClass(iF);ss.initClass(eK,iF);ss.initClass(eL);ss.initClass(eM);ss.initClass(eN,React.Component);ss.initClass(eO,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eP,tab.DeleteDraftCmd);ss.initClass(eQ,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(eR,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(eS);ss.initClass(eT);ss.initClass(eU,tab.DestroyVQLSessionCmd);ss.initClass(eV,spiff.PureRenderComponent);ss.initClass(eW);ss.initClass(eX,React.PureComponent);ss.initClass(eY,spiff.PureRenderComponent);ss.initClass(eZ);ss.initClass(fa,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(fb,ss.makeGenericType(tab.PureComponentWithAsyncDependencies$3,[Object,Object,Object]));ss.initClass(fc,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(fd,mq,[tab.IViewModel,ss.IDisposable]);ss.initClass(fe);ss.initClass(ff,React.Component);ss.initClass(fg);ss.initClass(fh);ss.initClass(fi);ss.initClass(fj,spiff.PureRenderComponent);ss.initClass(fk);ss.initClass(fl,React.Component);ss.initClass(fm);ss.initClass(fn,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);fn.$ctor1.prototype=fn.prototype;ss.initClass(fo,React.Component);ss.initClass(fp);ss.initClass(fq,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);fq.$ctor1.prototype=fq.prototype;ss.initClass(fr,React.Component);ss.initClass(fs);ss.initClass(ft,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ft.$ctor1.prototype=ft.prototype;ss.initClass(fu,React.Component);ss.initClass(fv);ss.initClass(fw,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);fw.$ctor1.prototype=fw.prototype;ss.initClass(fx,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(fy,tab.DownloadWorkbookCmd);ss.initInterface(gJ,{showDialog:null,shouldShowDialog:null});ss.initClass(fz,tab.BaseDisposableDialog,[ss.IDisposable,gJ]);ss.initClass(fA,tab.BaseDisposableDialog,[ss.IDisposable,gJ]);ss.initClass(fB,null,[ss.IDisposable]);ss.initClass(fC,tab.BaseDisposableDialog,[ss.IDisposable,gJ]);ss.initClass(fD,tab.BaseDisposableDialog,[ss.IDisposable,gJ]);ss.initClass(fE);ss.initClass(fF);ss.initClass(fG);ss.initClass(fH);ss.initClass(fK,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(fL);ss.initClass(fM,spiff.PureRenderComponent);ss.initClass(fN);ss.initClass(fO,ss.makeGenericType(spiff.BaseReactViewModel$1,[fN]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[fN])]);fO.$ctor1.prototype=fO.prototype;ss.initClass(fP,tab.EditWorkbookInDesktopCmd);ss.initClass(fQ,dy,[gM,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(fR,ss.makeGenericType(spiff.BaseView$1,[fS]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[fS]),ss.IDisposable,tab.IAppendableView]);ss.initClass(fS,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(fT,spiff.Template,[ss.IDisposable]);ss.initClass(fU,ss.makeGenericType(spiff.BaseView$1,[fV]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[fV]),ss.IDisposable,tab.IAppendableView]);ss.initClass(fV,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(fW,spiff.Template,[ss.IDisposable]);ss.initClass(fX,spiff.Template,[ss.IDisposable]);ss.initClass(fY,eb,[ss.IDisposable]);ss.initClass(fZ);ss.initClass(ga,fJ,[ss.IDisposable]);ss.initClass(gc);ss.initClass(gd,spiff.ComboBoxViewModel,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[spiff.ComboBoxProps]),spiff.IHasEnabledState]);ss.initInterface(gU,{get_hasExternalIcon:null,get_dom:null,handlePillExit:null,handlePillEnter:null},[ss.IDisposable]);ss.initClass(ge,ss.makeGenericType(spiff.BaseView$1,[jh]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[jh]),tab.IAppendableView,gU,ss.IDisposable]);ss.initClass(gf,spiff.PureRenderComponent);ss.initClass(gg);ss.initClass(gh);ss.initClass(gi);ss.initClass(gk);ss.initClass(gl);ss.initClass(gm,spiff.Template,[ss.IDisposable]);ss.initClass(gn,spiff.PureRenderComponent);ss.initClass(go,spiff.MoveDragInstance);ss.initClass(gp,React.Component);ss.initClass(gq,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mU,eb,[ss.IDisposable]);ss.initClass(gr,mU,[ss.IDisposable]);ss.initClass(gs,spiff.PureRenderComponent);ss.initClass(gt);ss.initClass(gu);ss.initClass(gv);ss.initInterface(gP,{buildDisplayTextForDate:null});ss.initClass(gw,null,[gP]);ss.initClass(gx,spiff.Template,[ss.IDisposable]);ss.initClass(gy,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(gz);ss.initClass(gA,gy);ss.initClass(gB,spiff.Glass,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(gC,spiff.PureRenderComponent);ss.initClass(gD,spiff.PureRenderComponent);ss.initClass(gE,ss.makeGenericType(spiff.BaseView$1,[gF]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gF]),ss.IDisposable,tab.IAppendableView]);ss.initClass(gF,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(gG,spiff.Template,[ss.IDisposable]);ss.initClass(gH,tab.HideZoneWithPreviewCmd);ss.initInterface(gK,{add_dropStateChanged:null,remove_dropStateChanged:null,add_visibleChanged:null,remove_visibleChanged:null,get_isVisible:null,get_dropTarget:null,get_title:null,get_name:null,get_collapsedTitleDetail:null,get_viewType:null,get_viewModel:null,get_dropState:null,get_cardBackgroundColor:null},[ss.IDisposable]);ss.initInterface(gL,{add_commitChanges:null,remove_commitChanges:null},[tab.IViewModel,ss.IDisposable]);ss.initClass(gO);ss.initInterface(gQ,{add_contentChanged:null,remove_contentChanged:null,addFloatingPanelToDom:null,addFloatingPanelToDom$1:null});ss.initClass(gS,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initInterface(gT,{get_paneContents:null,get_activePaneTitle:null,set_activePaneTitle:null});ss.initInterface(gV,{get_visualId:null,get_referenceLineId:null});ss.initClass(gW,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(gX);ss.initClass(hb,null,[gP]);ss.initClass(hc,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hd,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(he,EventUtils.DragInstance);ss.initClass(hf);ss.initClass(hg,spiff.Template,[ss.IDisposable]);ss.initClass(hh,ss.makeGenericType(spiff.BaseView$1,[hi]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[hi]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hi,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(hj);ss.initClass(hk,spiff.Template,[ss.IDisposable]);ss.initClass(hl,ss.makeGenericType(spiff.BaseView$1,[tab.IViewModel]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hm);ss.initClass(hn,spiff.Template,[ss.IDisposable]);ss.initClass(ho,ss.makeGenericType(spiff.BaseView$1,[hp]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[hp]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hp,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(hq,spiff.PureRenderComponent);ss.initClass(hr,spiff.PureRenderComponent);ss.initClass(hs,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ht,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hu,spiff.PureRenderComponent);ss.initClass(hv);ss.initClass(hw,spiff.PureRenderComponent);ss.initClass(hx,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hy,spiff.PureRenderComponent);ss.initStruct(hz);ss.initClass(hA,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hB,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(hC,spiff.PureRenderComponent);ss.initClass(hD,spiff.PureRenderComponent);ss.initClass(hE,spiff.PureRenderComponent);ss.initClass(hF,React.Component);ss.initClass(hG,spiff.PureRenderComponent);ss.initClass(hH,EventUtils.DragInstance);ss.initClass(hI,spiff.PureRenderComponent);ss.initClass(hJ,spiff.PureRenderComponent);ss.initClass(hK,null,[ss.makeGenericType(gZ,[tab.LayoutTreeItem])]);ss.initClass(hL,spiff.PureRenderComponent);ss.initClass(hM,spiff.PureRenderComponent);ss.initClass(hN,spiff.PureRenderComponent);ss.initClass(hO,spiff.PureRenderComponent);ss.initClass(hP,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hQ);ss.initClass(hR,tab.BaseHybridSidePaneProxyHelper);ss.initClass(hS,ss.makeGenericType(spiff.BaseView$1,[hT]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[hT]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hT,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(hU,tab.ZoneChromeEdgeRender);ss.initClass(hV);ss.initClass(hW,ss.makeGenericType(spiff.BaseView$1,[hX]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[hX]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hX,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(hY,spiff.Template,[ss.IDisposable]);ss.initClass(hZ,ss.makeGenericType(spiff.ReactSpiffAdapter$3,[ia,Object,Object]));ss.initClass(ia,ss.makeGenericType(lM,[ib]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ib]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ib,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ic);ss.initClass(id,React.Component);ss.initClass(ie,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ig,spiff.PureRenderComponent);ss.initClass(ih);ss.initClass(ii);ss.initClass(ij);ss.initClass(ik,spiff.PureRenderComponent);ss.initClass(il);ss.initClass(im);ss.initClass(io,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ip,React.Component);ss.initClass(iq,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IUberPopupContent,spiff.IContent]);ss.initClass(ir);ss.initClass(it,spiff.Template,[ss.IDisposable]);ss.initClass(iu,ss.makeGenericType(spiff.BaseView$1,[iv]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[iv]),ss.IDisposable,tab.IAppendableView]);ss.initClass(iv,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,EventUtils.IDragResponder]);ss.initClass(iw,spiff.Template,[ss.IDisposable]);ss.initClass(ix,ss.makeGenericType(cH,[iy]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[iy]),ss.IDisposable,tab.IAppendableView,gR]);ss.initClass(iy,spiff.BaseViewModel,[tab.IViewModel,gK,ss.IDisposable]);ss.initClass(iz,ss.makeGenericType(spiff.BaseView$1,[iA]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[iA]),ss.IDisposable,tab.IAppendableView]);ss.initClass(iA,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(iB,spiff.Template,[ss.IDisposable]);ss.initClass(iC,spiff.PureRenderComponent);ss.initClass(iD);ss.initClass(iE);ss.initClass(iG);ss.initClass(iH,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(iI);ss.initClass(lP);ss.initClass(iJ,lP);ss.initClass(iK,lP);ss.initClass(iL,lP);ss.initClass(iM,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(iN,ss.makeGenericType(spiff.BaseView$1,[iO]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[iO]),ss.IDisposable,tab.IAppendableView]);ss.initClass(iO,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(iP,spiff.Template,[ss.IDisposable]);ss.initClass(iQ,ss.makeGenericType(spiff.BaseView$1,[iR]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[iR]),ss.IDisposable,tab.IAppendableView]);ss.initClass(iR,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(iS,spiff.Template,[ss.IDisposable]);ss.initClass(iT);ss.initClass(iU);ss.initClass(iV);ss.initClass(iW,null,[spiff.IListItemContentCreator]);ss.initClass(iX);ss.initClass(iY);ss.initClass(jb,mq,[tab.IViewModel,ss.IDisposable]);ss.initClass(jc,spiff.Widget,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(jd,cp);ss.initClass(je);ss.initClass(jf);ss.initClass(jg,ss.makeGenericType(spiff.BaseView$1,[jh]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[jh]),ss.IDisposable,tab.IAppendableView]);ss.initClass(jh,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(ji,spiff.Template,[ss.IDisposable]);ss.initClass(jj);ss.initClass(jl);ss.initClass(jm);ss.initClass(jn,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(jo,React.Component);ss.initClass(jp,React.Component);ss.initClass(jq);ss.initClass(jr,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(js,spiff.Template,[ss.IDisposable]);ss.initClass(jt,ss.makeGenericType(spiff.BaseView$1,[ju]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ju]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ju,dm,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(jv,React.PureComponent);ss.initClass(jx,tab.QuickSortAscendingCmd);ss.initClass(jy,tab.QuickSortDescendingCmd);ss.initClass(jz,mq,[tab.IViewModel,ss.IDisposable]);ss.initClass(jA);jA.$ctor2.prototype=jA.$ctor1.prototype=jA.prototype;ss.initClass(jB,ss.makeGenericType(spiff.BaseView$1,[jC]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[jC]),ss.IDisposable,tab.IAppendableView]);ss.initClass(jC,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(jD);ss.initClass(jE,React.Component);ss.initClass(jF);ss.initClass(jG);ss.initClass(jH,ss.makeGenericType(spiff.BaseReactViewModel$1,[jF]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[jF]),gV]);jH.$ctor1.prototype=jH.prototype;ss.initClass(jI);ss.initClass(jJ,React.Component);ss.initClass(jK);ss.initClass(jL,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);jL.$ctor1.prototype=jL.prototype;ss.initClass(jM);ss.initClass(jN,React.Component);ss.initClass(jO);ss.initClass(jP);ss.initClass(jQ,ss.makeGenericType(spiff.BaseReactViewModel$1,[jO]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[jO]),gV]);jQ.$ctor1.prototype=jQ.prototype;ss.initClass(jR);ss.initClass(jS,React.Component);ss.initClass(jT);ss.initClass(jU);ss.initClass(jV,ss.makeGenericType(spiff.BaseReactViewModel$1,[jT]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[jT]),gV]);jV.$ctor1.prototype=jV.prototype;ss.initClass(jW);ss.initClass(jX,spiff.Template,[ss.IDisposable,spiff.ITabControlTemplate]);ss.initClass(jY,ss.makeGenericType(spiff.BaseView$1,[jZ]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[jZ]),ss.IDisposable,tab.IAppendableView]);ss.initClass(jZ,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(ka,React.Component);ss.initClass(kb);ss.initClass(kc);ss.initClass(kd,ss.makeGenericType(spiff.ReactSpiffAdapter$3,[kh,ke,kf]));ss.initClass(ke);ss.initClass(kf);ss.initClass(kg,spiff.Template,[ss.IDisposable]);ss.initClass(kh,ss.makeGenericType(spiff.BaseView$1,[ki]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ki]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ki,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(kj,React.Component);ss.initClass(kk);ss.initClass(kl,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(km,tab.RemoveZoneFromDeviceLayoutWithPreviewCmd);ss.initClass(kn,KeyboardShortcuts.BaseKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(ko);ss.initClass(kp,null,[ss.IDisposable]);ss.initClass(kq,spiff.PureRenderComponent);ss.initClass(kr,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ks,spiff.ModalDialog,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(kt,spiff.Template,[ss.IDisposable]);ss.initClass(ku,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(kv,spiff.ModalDialog,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(kw);ss.initClass(kx);ss.initClass(ky,spiff.PureRenderComponent);ss.initClass(kz,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);kz.$ctor1.prototype=kz.prototype;ss.initClass(kA,spiff.PureRenderComponent);ss.initClass(kB);ss.initClass(kD,tab.ResizeActiveZoneCmd);ss.initClass(kE,React.Component);ss.initClass(kF,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(kG);ss.initClass(kH,tab.RevertToPublishedCmd);ss.initClass(kI,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(kJ,tab.SaveAsCmd);ss.initClass(kK,tab.SaveCmd);ss.initClass(kL,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(kM,tab.SaveOrSaveAsCmd);ss.initClass(kN,React.Component);ss.initClass(kO);ss.initClass(kP,null,[ss.IDisposable]);ss.initClass(kQ);ss.initClass(kR);ss.initClass(kS);ss.initClass(kT,jd);ss.initClass(kU,spiff.PureRenderComponent);ss.initClass(kV);ss.initClass(kW,null,[ss.IDisposable]);ss.initClass(kY);ss.initClass(kZ);ss.initClass(la,eH,[ss.IDisposable]);ss.initClass(lb,eI,[tab.IWidget,ss.makeGenericType(tab.IView$1,[lc]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lc,spiff.BaseViewModel,[tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(le,spiff.PureRenderComponent);ss.initClass(lf);ss.initClass(lg);ss.initClass(lh,spiff.PureRenderComponent);ss.initClass(li);ss.initClass(lj,ss.makeGenericType(spiff.BaseReactViewModel$1,[li]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[li])]);ss.initClass(lk,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(ll);ss.initClass(lm,spiff.Template,[ss.IDisposable]);ss.initClass(ln,ss.makeGenericType(spiff.BaseView$1,[lo]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lo]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lo,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(lp,eb,[ss.IDisposable]);ss.initClass(lq,spiff.PureRenderComponent);ss.initClass(lr,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ls);ss.initClass(lt,spiff.Template,[ss.IDisposable]);ss.initClass(lv,ss.makeGenericType(cH,[lw]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lw]),ss.IDisposable,tab.IAppendableView,gR]);ss.initClass(lw,spiff.BaseViewModel,[tab.IViewModel,gK,ss.IDisposable,EventUtils.IDragResponder]);ss.initClass(lx,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(ly,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(lz,ss.makeGenericType(spiff.BaseView$1,[lA]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lA]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lA,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(lB,spiff.Template,[ss.IDisposable]);ss.initClass(lC,ss.makeGenericType(spiff.BaseView$1,[lD]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lD]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lD,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(lE);ss.initClass(lF,null,[spiff.IListItemContentCreator,spiff.IListItemDragAvatarCreator]);ss.initClass(lG,spiff.Template,[ss.IDisposable]);ss.initClass(lH,ss.makeGenericType(spiff.BaseView$1,[lI]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lI]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lI,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lJ,ss.makeGenericType(spiff.ReactSpiffAdapter$3,[lK,Object,Object]));ss.initClass(lK,ss.makeGenericType(lM,[lL]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lL]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lL,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lN,ss.makeGenericType(spiff.BaseView$1,[lO]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lO]),ss.IDisposable,tab.IAppendableView,gT]);ss.initClass(lO,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lQ);ss.initClass(lR,spiff.Template,[ss.IDisposable]);ss.initClass(lS,ss.makeGenericType(spiff.BaseView$1,[dD]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[dD]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lT,spiff.Template,[ss.IDisposable]);ss.initClass(lU,ss.makeGenericType(spiff.BaseView$1,[lV]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lV]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lV,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lW,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lX,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lY,spiff.Template,[ss.IDisposable]);ss.initClass(lZ,ss.makeGenericType(spiff.BaseView$1,[ma]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ma]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ma,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(mb,spiff.Template,[ss.IDisposable]);ss.initClass(mc,ss.makeGenericType(spiff.BaseView$1,[md]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[md]),ss.IDisposable,tab.IAppendableView]);ss.initClass(md,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(me,spiff.Template,[ss.IDisposable]);ss.initClass(mf,ss.makeGenericType(spiff.BaseView$1,[mg]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[mg]),ss.IDisposable,tab.IAppendableView]);ss.initClass(mg,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(mh,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mi,tab.ToggleFreeFormZoneWithPreviewCmd);ss.initClass(mj,tab.ToggleINDJoinSemanticsWrapperCmd);ss.initClass(mk,ss.makeGenericType(spiff.BaseView$1,[ml]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ml]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ml,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(mn);ss.initClass(mo,cz,[ss.IDisposable]);ss.initClass(mp,cA,[tab.IWidget,ss.makeGenericType(tab.IView$1,[cB]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ms,iF);ss.initClass(mt);ss.initClass(mu,tab.WebCatalogDetailsDialogCmd);ss.initClass(mv,tab.WebConnectDataCmd);ss.initClass(mw,tab.WebCreateMetricFromFieldCmd);ss.initClass(mx,tab.WebDashboardDesignCmd);ss.initClass(my,tab.WebEditDataSourceCmd);ss.initClass(mz,tab.WebEditObjectCaptionCmd);ss.initClass(mA,tab.WebEPDSPublishCmd);mA.$ctor1.prototype=mA.prototype;ss.initClass(mB,null,[tab.IWaitForCommandsWithCancel,tab.IWaitForCommands]);ss.initClass(mC,tab.WebFilterDialogDomainCancelCmd);ss.initClass(mD,tab.WebFormatPaneCmd);ss.initClass(mE,tab.WebFormatPaneForVizPointCmd);ss.initClass(mF,tab.WebRemoveShelfPillCmd);ss.initClass(mG,tab.WebRenameDatasourceDialogCmd);ss.initClass(mH,tab.WebShowFieldCatalogDetailsCmd);ss.initClass(mI,tab.WebShowMeCmd);ss.initClass(mJ,tab.WebToolbarMoreCmd);ss.initClass(mK,null,[ss.IDisposable]);ss.initClass(mL,spiff.PureRenderComponent);ss.initClass(mM,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mN,tab.WhereDidSaveGoCmd);ss.initClass(mO,mq,[tab.IViewModel,ss.IDisposable]);ss.initClass(mP);ss.initClass(mQ);ss.initClass(mR,spiff.Template,[ss.IDisposable]);ss.initClass(mS,ss.makeGenericType(spiff.BaseView$1,[mT]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[mT]),ss.IDisposable,tab.IAppendableView]);ss.initClass(mT,co,[tab.IViewModel,ss.IDisposable]);ss.initClass(nf,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mW,nf,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mX,null,[ss.makeGenericType(gZ,[tab.DeviceLayoutZoneInfo])]);mX.$ctor1.prototype=mX.prototype;ss.initClass(mY,ss.makeGenericType(bl,[Object]));ss.initClass(mZ,ss.makeGenericType(bm,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(na,eb,[ss.IDisposable]);ss.initClass(nb,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(nc,ss.makeGenericType(bl,[Object]));ss.initClass(nd,ss.makeGenericType(bm,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ne,nf,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ng,spiff.PureRenderComponent);ss.initClass(nh,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.setMetadata(gZ,{variance:[1]});(function(){gO.tableCalcIconClass='tabAuthPillIconTableCalc'})();(function(){M.$0='relativeDate'})();(function(){L.$2=null;tab.ApplicationModel.get_instance().registerNotificationHandler('doc:filter-aggregation-dialog-event',L.$0)})();(function(){iB.htmlTemplate="<div class='tabAuthMarkSizePickerContent'>\n            <div class='tabAuthMarkSizeLabel'></div>\n            <div class='tabAuthMarkSizeSlider'></div>\n        </div>"})();(function(){iz.$2=0;iz.$1=100;iz.$3=200;tab.ObjectRegistry.registerType(iz,iz).call(null)})();(function(){dz.$0="\n            <div class='tabAuthTransparencyControl'>\n                <div class='tabAuthTransparencyLabel'></div>\n                <div class='tabAuthTransparencyControlHolder'></div>\n            </div>"})();(function(){dB.minimumTransparency=0;dB.maximumTransparency=100;dB.sliderWidth=100})();(function(){tab.ObjectRegistry.registerType(dA,dA).call(null)})();(function(){dk.htmlTemplate="<div class='tabAuthColorOptionEffectUberContainer'>\n            <div class='tabAuthColorOptionEffectAutoButton'></div>\n            <div class='tabAuthColorOptionEffectNoneButton'></div>\n            <div class='tabAuthColorOptionEffectColorPicker'></div>\n            <div class='tabAuthColorOptionsEffectMoreButton'></div>\n        </div>"})();(function(){dv.columns=8;dv.$1=['#000000','#FFFFFF'];dv.$2=['#1B1B1B','#333333','#555555','#666666','#898989'];dv.$3=['#F5F5F5','#E6E6E6','#D4D4D4','#C0C0C0','#B4B4B4'];dv.$4=['#F28E2B','#F9A655','#FFBE7D','#B6992D','#D3B348','#F1CE63','#59A14F','#72B966','#8CD17D','#499894','#69AAA5','#86BCB6','#4E79A7','#75A1C7','#A0CBE8','#606B76','#818B91','#A7ACAD'];dv.$5=['#B07AA1','#C290B4','#D4A6C8','#D37295','#E799B3','#FABFD2','#E15759','#F17B79','#FF9D9A','#9D7660','#BA9582','#D7B5A6','#79706E','#998F8C','#BAB0AC','#76B7B2','#FF9DA7','#EDC948']})();(function(){dw.$1="<div class='tabColorPicker'>\n                <div class='tabColorPickerContainer'>\n                    <div class='tabColorPickerBlack'></div>\n                    <div class='tabColorPickerDarkGrays'></div>\n                    <div class='tabColorPickerWhite'></div>\n                    <div class='tabColorPickerLightGrays'></div>\n                    <div class='tabColorPickerPreset1'></div>\n                    <div class='tabColorPickerPreset2'></div>\n                    <div class='tabColorPickerUserContainer'></div>\n                </div>\n            </div>";dw.$0="<div class='tabAuthDivider'></div>";dw.$2="<div class='tabAuthTransparencyControlContainer'></div>"})();(function(){dx.$2='tabColorPickerGroup';dx.$3='tabColorPickerUser';dx.colorPickerColorClassName='tabColorPickerColor';dx.$4='tabColorSelected';dx.$1='tabColorPickerColorBorder';tab.ObjectRegistry.registerType(dx,dx).call(null)})();(function(){tab.ObjectRegistry.registerType(di,di).call(null)})();(function(){dd.htmlTemplate="<div class='tabAuthMarksCardColorEffectsContainer'>\n            <div class='tabBorderColorLabel'></div>\n            <div class='tabBorderColorButtonArea'></div>\n            <div class='tabHaloColorLabel'></div>\n            <div class='tabHaloColorButtonArea'></div>\n        </div>"})();(function(){da.$0="<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n            <div class='tabComboBoxNameContainer tab-ctrl-formatted'>\n                <span class='tabComboBoxName'></span>\n                <div class='tabComboBoxColorRule'></div>\n            </div>\n            <div class='tabComboBoxButtonHolder'>\n                <span class='tabComboBoxButton'></span>\n            </div>\n        </span>"})();(function(){tab.ObjectRegistry.registerType(db,db).call(null)})();(function(){de.$1='disabled';tab.ObjectRegistry.registerType(de,de).call(null)})();(function(){gG.htmlTemplate="<div class='tabAuthHeatmapColorOptionContent'>\n            <div class='tabAuthHeatmapEffectsContainer'>\n              <div class='tabAuthHeatmapColorControl'>\n                <div class='tabAuthHeatmapColorLabel'></div>\n                <div class='tabAuthHeatmapColorHolder'></div>\n              </div>\n              <div class='tabAuthHeatmapIntensityControl'>\n                <div class='tabAuthHeatmapIntensityLabel'></div>\n                <div class='tabAuthHeatmapIntensityHolder'></div>\n              </div>\n            </div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(gE,gE).call(null)})();(function(){iS.htmlTemplate="<div class='tabAuthNonEncodedColorPaletteOptionContent'>\n            <div class='tabAuthNonEncodedColorPaletteControl'>\n              <div class='tabAuthNonEncodedColorPaletteLabel'></div>\n              <div class='tabAuthNonEncodedColorPaletteDropdown'></div>\n            </div>\n          </div>"})();(function(){tab.ObjectRegistry.registerType(iQ,iQ).call(null)})();(function(){js.$0="<div class='tabAuthQuantitativeColorOptionContent'>\n            <div class='tabColorEditButtonContainer'></div>\n            <div class='tabAuthDivider'></div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(jt,jt).call(null)})();(function(){ju.$4=2;ju.$3=100;ju.$5=1;ju.$2=5;ju.colorStepTextClassName='tabAuthColorStepText'})();(function(){cR.htmlTemplate="<div class='tabAuthCategoricalColorOptionContent'>\n            <div class='tabColorEditButtonContainer'></div>\n            <div class='tabColorPalettePickerContainer'></div>\n            <div class='tabAuthDivider'></div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(cS,cS).call(null)})();(function(){iP.htmlTemplate="<div class='tabAuthNoFieldsColorOptionContent'>\n            <div class='tabColorPickerContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(iN,iN).call(null)})();(function(){tab.ObjectRegistry.registerType(mk,mk).call(null)})();(function(){me.htmlTemplate="<div class='tabAuthTextOptionContent'>\n            <div class='tabToggleMarkLabelsCheckboxContainer'></div>\n            <div class='tabEditMarkLabelsButtonContainer'></div>\n            <div class='tabMarksToLabelContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(mf,mf).call(null)})();(function(){ia.$2='tabLinePatternHeader';ia.$1='tabLinePatternButtonContainer';ia.selectedClassName='tabStylePickerButtonSelected';ia.labelClassName='tabLinePatternLabel';ia.textButtonClassName='tabLinePatternTextButton';ia.disabledClassName='disabled';tab.ObjectRegistry.registerType(ia,ia).call(null)})();(function(){hZ.defaultProps={handlePatternSelected:function(ni){},selectedPattern:'solid',showNone:true,headerText:null,disabled:false,disabledTooltipText:null}})();(function(){lB.htmlTemplate="<div class='tabAuthPrimitiveOptionsContainer'></div>"})();(function(){tab.ObjectRegistry.registerType(lC,lC).call(null)})();(function(){hY.htmlTemplate="<div class='tabAuthLevelSettingsContent'>\n            <div class='tabAuthLevelWidthLabel'></div>\n            <div class='tabAuthLevelWidthSlider'></div>\n            <div class='tabAuthLevelPaddingLabel'></div>\n            <div class='tabAuthLevelPaddingSlider'></div>\n        </div>"})();(function(){hW.$2=0;hW.$1=100;hW.$3=200;tab.ObjectRegistry.registerType(hW,hW).call(null)})();(function(){lt.template="<div class='tabAuthShelf'><div class='tabAuthShelfPills'><div class='tabAuthShelfPillsContent tabAuthShelfDropTarget'></div></div></div>";lt.templatePillDivider="<span class='tabAuthShelfPillDivider'><div class='tabAuthShelfPillDividerTarget'></div><div class='tabAuthShelfPillDividerPlaceholder'></div></span>";lt.templateClickSpacer="<span class='tabAuthShelfClickArea'></span>"})();(function(){cq.$0="\n<span class='tabCalcEditorTextDragAvatar'>\n    <div class='tabCalcEditorTextDragAvatarLabel'></div>\n</span>"})();(function(){bd.$0="<span class='tabAuthAnalyticsDragAvatar'>"+"<div class='tabAuthAnalyticsDragAvatarLabel'></div>"+'</span>'})();(function(){tab.StartupUtils.callOnceAfterInitialBootstrap(be.installVizDragOverride)})();(function(){var ni=new je;ni.action=function(nj){};ni.cursor=function(nj){return spiff.CustomCursor.noOp};je.noOp=ni})();(function(){fb.devicePreviewBarClass='tab-devicePreviewBar'})();(function(){t.$2="<div class='autocomplete_separator'></div>";t.$0="<div class='autocomplete_header'></div>";t.$1='<div>'+"<div class='autocomplete_item'>"+"<span class='field-icon-area'><div class='schema-field-icon'></div></span>"+'</div>'+'</div>'})();(function(){u.$1='autocomplete_field';u.$0='tab-schema-{0}-icon'})();(function(){v.$1='autocomplete_func';v.$0='autocomplete-menu-function'})();(function(){cC.$0="\n<div class='tabCalcEditorFunctionInfo'>\n  <div class='tabCalcEditorFunctionName'></div>\n  <div class='tabCalcEditorFunctionDescription'></div>\n</div>"})();(function(){cD.$0="<div class='tabCalcEditorFunctionArea'>"+"<div class='tabCalcEditorSearchableFuncList'>"+"<div class='tabCalcEditorFuncType'></div>"+"<div class='tabCalcEditorFuncSearchBox'></div>"+"<div class='tabCalcEditorFuncListSeparator'></div>"+"<div class='tabCalcEditorFuncListArea'></div>"+'</div>'+"<div class='tabCalcEditorFuncInfoArea'></div>"+'</div>'})();(function(){tab.ObjectRegistry.registerType(cE,cE).call(null)})();(function(){cG.$0="\n<div class='tabCalcEditorTitleArea'>\n  <div class='tabCalcEditorCaptionContainer'></div>\n  <div class='tabCalcEditorDataSourceLabel'><div class='icon'></div><div class='labelText'></div></div>\n  <div class='tabCalcEditorECTButtonComponent'><div class='tab-analyticsassistant-highlighted'></div></div>\n</div>"})();(function(){gx.$0="\n<div class='tabCalcEditorFuncFlyoutControl'>\n    <div class='tabCalcEditorFuncFlyoutExpander'></div>\n    <div class='tabCalcEditorFuncFlyoutCollapser'></div>\n    <div class='tabCalcEditorFuncFlyoutControlHit'></div>\n</div>"})();(function(){gW.cmdId={ns:'tabdoc',cmd:'is-analytics-assistant-available'}})();(function(){ct.$1="<div class='tabCalcDependencyContent'>\n            <div class='tabCalcDependencyPrefix'></div>\n            <div class='tabCalcDependencyInfo'></div>\n        </div>";tab.ObjectRegistry.registerType(ct,ct).call(null)})();(function(){cw.$0="<div class='tabCalcEditor'>"+"<div class='tabCalcEditorBody'>"+"<div class='tabCalcEditorCmHolder tabCalcEditorDropTarget'></div>"+'</div>'+"<div class='tabCalcEditorControlArea'>"+"<div class='tabCalcEditorStatusOk'><span class='tabCalcEditorStatusOkText'></span></div>"+"<div class='tabCalcEditorStatusErrorBtn'><span class='tabCalcEditorStatusErrorText'></span><span class='tabCalcEditorDropdownBtnIcon'></span></div>"+"<div class='tabCalcEditorDependsBtn'><span class='tabCalcEditorDependsBtnLabel'></span><span class='tabCalcEditorDropdownBtnIcon'></span></div>"+"<div class='tabCalcEditorBtnArea'></div>"+'</div>'+'</div>'})();(function(){mb.$0="\n<div class='tabWindowOptionRoot'>\n    <div class='tabWindowOptionTitle tabRow'></div>\n    <div class='tabWindowOptionAgg tabRow'></div>\n    <div class='tabWindowOptionPreviousValues tabRow'>\n        <span class='tabLabel'></span><span class='tabSpinner'></span>\n    </div>\n    <div class='tabWindowOptionNextValues tabRow'>\n        <span class='tabLabel'></span><span class='tabSpinner'></span>\n    </div>\n    <div class='tabWindowOptionCurrentValue tabRow'></div>\n    <div class='tabWindowOptionNullSetting tabRow'></div>\n</div>"})();(function(){tab.ObjectRegistry.registerType(mc,mc).call(null)})();(function(){J.$1='orderAddrOption_'})();(function(){lY.$0="\n<div class='tabSortOptionRoot'>\n    <div class='tabSortOptionMode tabRow'>\n        <span class='tabAutomatic'></span>\n        <span class='tabCustom'></span>\n    </div>\n    <div class='tabSortOptionFieldAgg tabRow'>\n        <span class='tabField'></span>\n        <span class='tabAgg'></span>\n    </div>\n    <div class='tabSortOptionAscDesc tabRow'>\n        <span class='tabDesc'></span>\n        <span class='tabAsc'></span>\n    </div>\n</div>"})();(function(){tab.ObjectRegistry.registerType(lZ,lZ).call(null)})();(function(){ma.sortModePropertyName='SortMode';ma.sortDirectionPropertyName='SortDirection'})();(function(){lT.$0="<div class='tabTableCalcEditor'>\n        <div class='tabTableCalcTypeArea'>\n            <div class='tabTableCalcTitle tabHeader3'></div>\n            <div class='tabTableCalcType tabRow comboRow'></div>\n            <div class='tabTableCalcNestedLabel tabHeader3 hide'></div>\n            <div class='tabTableCalcNested tabRow comboRow hide'></div>\n            <div class='tabTableCalcSortDirection tabRow comboRow hide'></div>\n            <div class='tabTableCalcRankType tabRow comboRow hide'></div>\n            <div class='tabTableCalcAggregation tabRow comboRow hide'></div>\n            <div class='tabTableCalcAllPages tabRow checkRow hide'></div>\n            <div class='tabTableCalcNullSetting tabRow checkRow hide'></div>\n            <div class='tabTableCalcWindowOptions tabRow comboRow hide'></div>\n            <div class='tabTableCalcComputeCompound tabRow checkRow hide'></div>\n        </div>\n        <div class='tabTableCalcComputeUsing'>\n            <span class='label tabTableCalcComputeUsingHeader tabHeader3'></span>\n            <div class='tabTableCalcOrdering tabRow'></div>\n            <div class='tabTableCalcSpecificDim hide tabRow'></div>\n        </div>\n        <div class='tabTableCalcAtTheLevel tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcDifferenceFrom tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcRelativeTo tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcRestartEvery tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcSort tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n    </div>"})();(function(){lU.$5='hide';lU.$6=3;tab.ObjectRegistry.registerType(lU,lU).call(null)})();(function(){lR.$0="<div class='tabTableCalcDialogBody'>\n        <div class='tabPrimaryTableCalcEditor'></div>\n        <div class='tabSecondaryTableCalcEditor'></div>\n    </div>"})();(function(){lS.$1="<span class='tabTableCalcFieldCaption'></span>";tab.ObjectRegistry.registerType(lS,lS).call(null)})();(function(){gd.secondaryDSTableCalcIcon='tabAuthPillIconTableCalcSecondary';gd.tableCalcIcon='tabAuthPillIconTableCalc';gd.secondaryDSIcon='tab-schema-datasource-secondary-icon'})();(function(){eO.defaultDebounceTimeout=1500})();(function(){fO.styleClass='customValueTextDropdown'})();(function(){jV.$5=tab.Strings.AODialogInstantAnalyticsLineLabel;jV.$1='ConfidenceLevel';jV.$2='ConstantValue';jV.$3='CustomLabel';jV.$4='CustomTooltip'})();(function(){jH.fromLabelCssClass='tab-fromLabelComponent';jH.toLabelCssClass='tab-toLabelComponent';jH.fromConstantValueTestId='FromConstantValue';jH.toConstantValueTestId='ToConstantValue';jH.fromCustomLabelTestId='FromCustomLabel';jH.fromCustomTooltipTestId='FromCustomTooltip';jH.toCustomLabelTestId='ToCustomLabel';jH.toCustomTooltipTestId='ToCustomTooltip';jH.$1=tab.Strings.AODialogInstantAnalyticsBandLabel})();(function(){fn.valueCssClass='tabValue';fn.formulaCssClass='tabComputation';fn.percentagesTestId='Percentages';fn.constantValueTestId='ConstantValue'})();(function(){fq.percentileTestId='Percentiles'})();(function(){ft.quantilesTestId='Quantiles'})();(function(){fw.factorsTestId='Factors'})();(function(){var ni=[];ni.push('percentages');ni.push('percentiles');ni.push('quantiles');ni.push('standard-deviation');jL.distributionTypes=ni;jL.distributionTypeStrings=ss.mkdict(['percentages',{item1:tab.Strings.AODialogPercentagesLabel,item2:'percentages-id'},'percentiles',{item1:tab.Strings.AODialogPercentilesLabel,item2:'percentiles-id'},'quantiles',{item1:tab.Strings.AODialogQuantiles,item2:'quantiles-id'},'standard-deviation',{item1:tab.Strings.AODialogStandardDeviation,item2:'sd-id'}])})();(function(){jQ.$3=tab.Strings.AODialogInstantAnalyticsBandLabel;jQ.$1='CustomLabel';jQ.$2='CustomTooltip'})();(function(){jZ.$1=ss.mkdict(['line'.toString(),'line','band'.toString(),'band','distribution'.toString(),'distribution','boxplot'.toString(),'boxplot','none'.toString(),'none'])})();(function(){kg.$0="<div class='tab-editReferenceLineScopeSection'>\n              </div>"})();(function(){jJ.$3=360;jJ.$2=137})();(function(){p.$0="<div class='tab-editReferenceLineTab'>\n                 <div class='tab-tabIcon'></div>\n                 <div class='tab-tabLabel'></div>\n              </div>"})();(function(){jX.$0='<div>'+"<div class='tab-editReferenceLineTabs'></div>"+"<div class='tab-editReferenceLineTabContentArea'></div>"+'</div>'})();(function(){tab.ObjectRegistry.registerType(jY,jY).call(null)})();(function(){cM.template="<div class='tabAuthCard'>"+"<div class='tabAuthCardLabelArea'>"+"<div class='tabAuthCardExpandoTarget'></div>"+"<div class='tabAuthCardExpando'></div>"+"<div class='tabAuthCardIcon'></div>"+"<div class='tabAuthCardLabel'></div>"+"<div class='tabAuthCardContent'></div>"+'</div>'+'</div>'})();(function(){fW.$1="<div class='"+'emptyWorksheet'+"'>"+'</div>';fW.$0="<div class='"+'emptyWorksheetText'+"'>{0}</div>"})();(function(){mR.$0='<div class= '+'tab-ZoneDragAvatarContainer'+'>'+'<div class='+'tab-FloatingZoneDragAvatar'+'></div>'+'</div>'})();(function(){tab.ObjectRegistry.registerType(mS,mS).call(null)})();(function(){eb.$0=0})();(function(){gq.$0=5})();(function(){var ni=[];ni.push('bitmap');ni.push('color');ni.push('empty');ni.push('dashboard-object');ni.push('filter');ni.push('highlighter');ni.push('map');ni.push('paramctrl');ni.push('set-membership');ni.push('shape');ni.push('size');ni.push('slide');ni.push('text');ni.push('title');ni.push('viz');ni.push('web');nd.$1=ni})();(function(){bU.$4='Authoring_ToolbarItem';bU.$5='Authoring_ToolbarMenuItem';bU.$2='checked';bU.$3='radio-selected'})();(function(){nc.$1=[2,1];nc.$3=[3,1];nc.$2=[2,0];nc.$4=[3,0]})();(function(){eh.gridToggleEvent='DashboardAuthoring_GridToggle';eh.gridSizeEvent='DashboardAuthoring_GridSize';eh.$1='GridState';eh.$3='On';eh.$2='Off';eh.$4='GridToggleMethod';eh.$5='Shortcut';eh.$6='Toggle Menu Bar';eh.gridSizeProperty='GridSize'})();(function(){var ni=new Object;ni.controlOrCommand='required';ni.shift='required';ly.keyCombo=new KeyboardShortcuts.KeyCombo('a',ni)})();(function(){var ni=new Object;ni.controlOrCommand='required';ni.shift='required';lx.keyCombo=new KeyboardShortcuts.KeyCombo('d',ni)})();(function(){nb.$1=5;nb.$2=3;nb.$0=32})();(function(){var ni={};ni['default']=tab.Strings.DashboardAuthoringDeviceLayoutDefault;ni['desktop']=tab.Strings.DashboardAuthoringDeviceLayoutDesktop;ni['phone']=tab.Strings.DashboardAuthoringDeviceLayoutPhone;ni['tablet']=tab.Strings.DashboardAuthoringDeviceLayoutTablet;dT.$3=ni;dT.$2=dT.$0()})();(function(){em.hybridObjectsPaneModule='@tableau/hybrid-objects-pane';em.$4$1=false;em.$4$2=false;em.$4$3=null;var ni=tab.WebCommandRegistry.get_instance();var nj=new tab.CommandLocalOptions;nj.blocking='none';ni.registerCommandLocalOptions({ns:'tabdoc',cmd:'get-all-object-pane-items'},nj);tab.WidgetPlugins.registerWidgetPluginModule('@tableau/hybrid-objects-pane','hybrid-objects-pane')})();(function(){jj.$2=[];jj.$0()})();(function(){tab.ObjectRegistry.registerType(lz,lz).call(null)})();(function(){lA.showMeCommandsProperty='ShowMeCommands'})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebConnectDataCmd.cmdId,mv)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.QuickSortDescendingCmd.cmdId,jy)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.QuickSortAscendingCmd.cmdId,jx)})();(function(){bx.$7=new RegExp('\\S+','g')})();(function(){fA.$0=null})();(function(){fC.$0=null})();(function(){mA.$4=0;mA.$3=0;mA.$2=1000;mA.$5=true;tab.WebCommandRegistry.get_instance().registerCommand(tab.WebEPDSPublishCmd.cmdId,mA)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebRenameDatasourceDialogCmd.cmdId,mG)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebEditDataSourceCmd.cmdId,my)})();(function(){bL.$1=new spiff.CustomCursor('not-allowed')})();(function(){var ni=new Object;ni.controlOrCommand='required';ni.alt='required';iM.keyCombo=new KeyboardShortcuts.KeyCombo('t',ni)})();(function(){iL.buttonClassName='tabAuthTabNewWorksheetBtn';iL.$0='tabAuthNewWorksheetIcon'})();(function(){iJ.buttonClassName='tabAuthTabNewDashboardBtn';iJ.$0='tabAuthNewDashboardIcon'})();(function(){iK.buttonClassName='tabAuthTabNewStoryBtn';iK.$0='tabAuthNewStoryIcon'})();(function(){E.propertyActiveItem='ActiveItem';E.propertyAllItems='AllItems';E.propertyDragToReorderLayers='DragToReorderLayers'})();(function(){B.$0="<div class='tabAccordionItem'>\n            <div class='tabAccordionItemHeader'></div>\n            <div class='tabAccordionItemContent'></div>\n            </div>"})();(function(){hi.propertyHovering='LayerReorderHoverProperty'})();(function(){x.$0="<div class='tabAccordionHeader'>\n            <div class='tabLayerVisibilityButton'></div>\n            <div class='tabAccordionItemIconContainer'>\n                <div class='tabAccordionItemIcon'></div>\n            </div>\n            <span class='tabAccordionItemTitle'>\n                <div class='tabAccordionItemTitleText'></div>\n                <input class='tabAccordionItemTitleInput' style='display: none'/>\n                <span class='tableCalcIcon'></span>\n            </span>\n            <div class='tabAccordionDropdownMenu'></div>\n            </div>"})();(function(){y.headerHeight=33})();(function(){hk.$0="<div class='layerReorderSpacerDropTargetContainer'>\n            <div class='layerReorderSpacerDropTarget'></div>\n        </div>"})();(function(){hg.$0="<div class='layerReorderDropTargetItem'>\n            <div class='layerReorderDropTarget'>\n                <div class='layerReorderDropTargetIndicatorTop'></div>\n                <div class='layerReorderDropTargetIndicator'></div>\n                <div class='layerReorderDropTargetIndicatorBottom'></div>\n            </div>\n        </div>"})();(function(){D.$1='marksSpecId';D.$0='tabAccordionItem'})();(function(){jc.pillAvatarLabelClass='tabAuthPillAvatarLabel';jc.$0="\n<span class='tabAuthPillAvatar'>\n    <div class='tabAuthPillAvatarLabel'>{0}</div>\n</span>"})();(function(){kt.maxFieldNameLength=254;kt.renameTemplate="\n        <div class='tabAuthRenameField'>\n          <div class='tab-rename-input-field-container'>\n            <input name='tab-rename-input-field' class='tab-rename-input-field' type='text' maxlength='"+254+"'/>\n          </div>\n          <div class='tab-dialog-status-msg'></div>\n          <div class='tab-dialog-actions-top-spacing'></div>\n        </div>"})();(function(){ks.debounceTimeoutMs=500})();(function(){gm.fieldLabelClass='tab-schema-field-label';gm.fieldDomSelector=ss.formatString('.{0}','tab-schema-field');gm.selectedFieldDomSelector='.tab-schema-field-pill.selected, .'+'tab-schema-field-label'+'.selected';gm.fieldAreaDomSelector='.tab-schema-field-label-area';gm.selectedFieldTouchScreenClassName='tab-schema-field-pill-touchScreenSelected';gm.template=ss.formatString("<div class='{0}'>"+"<span class='tab-schema-field-expando'><div class='tab-schema-field-expando-icon'><div class='tabAuthHitTarget'></div></div></span>"+"<span class='tab-schema-field-label-area'>"+"<span class='tab-schema-field-icon-area'><div class='tab-schema-field-icon'></div></span>"+"<div class='tab-schema-field-pill'>"+"<div class='{1}'>"+"<div class='"+'tab-schema-field-label'+"'></div>"+"<div class='tab-schema-field-pill-menu-btn'>"+"<div class='tab-schema-field-pill-menu-icon'></div>"+'</div>'+'</div>'+'</div>'+'</span>'+"<div class='tab-schema-field-children'></div>"+'</div>','tab-schema-field','tab-schema-field-content')})();(function(){gf.$1='@tableau/detailed-field-tooltip';tab.WidgetPlugins.registerWidgetPluginModule(gf.$1,'detailed-field-tooltip')})();(function(){gh.fieldBlendingIconClass='tab-schema-blending-icon';gh.fieldBlendingCandidateIconClass='tab-schema-blending-candidate-icon';gh.fieldRelatabilityIconClass='tab-schema-relatability-icon';gh.fieldHiddenIconClass='tab-schema-hidden-icon';gh.fieldStitchingIconClass='tab-schema-stitching-icon';gh.fieldRightIconContainerClass='tab-schema-right-icon-container'})();(function(){hp.hoverChanged='Hover'})();(function(){hn.$0="<span class='tabAdAreaDropSpot tabAdDropCell'>"+"<div class='tabAdAreaDropImage'></div>"+'</span>';hn.$1="<div class='tabLayerDropTarget'>"+"<div class='tabAdHeaderRow'>"+"<span class='tabAdDropTitle tabAdAxisCell'>"+"<div class='tabAdDropInstructionTextPre'></div>"+"<div class='tabAdDropLabel'></div>"+"<div class='tabAdDropInstructionTextPost'></div>"+'</span>'+'</div>'+'</div>'})();(function(){eJ.dataSourceDomClassName='tab-dataSource';eJ.dataSourceIconClassName='tab-schema-dataSourceIcon';eJ.dataSourceLabelAreaClassName='tab-schema-dataSourceName';eJ.dataSourceBrokenIndicatorAreaClassName='tab-schema-dataSourceBrokenIndicatorArea';eJ.dataSourceBrokenIndicatorIconClassName='tab-schema-dataSourceBrokenIndicatorIcon';eJ.dataSourceBrokenClassName='tab-schema-dataSourceBroken';eJ.dataSourceMenuButtonClassName='tab-schema-dataSourceMenuButton';eJ.dataSourceMenuIconClassname='tab-schema-dataSourceMenuIcon';eJ.selectedDataSourceClassName='tab-schema-dataSourceSelected';eJ.singleDataSourceClassName='tab-schema-singleDataSource';eJ.selectedDataSourceTouchScreen='tab-dataSource-touchScreenSelected';eJ.htmlTemplate="<div class='"+'tab-dataSource'+"'>"+"<div class='"+'tab-schema-dataSourceIcon'+"'></div>"+"<div class='"+'tab-schema-dataSourceName'+"'></div>"+"<div class='"+'tab-schema-dataSourceBrokenIndicatorArea'+"'>"+"<div class='"+'tab-schema-dataSourceBrokenIndicatorIcon'+"'></div>"+'</div>'+'</div>';eJ.$0="<div class='"+'tab-schema-dataSourceMenuButton'+"'>"+"<div class='"+'tab-schema-dataSourceMenuIcon'+"'></div>"+'</div>'})();(function(){V.$0="<div class='tabAnalyticsListHeader'>"+"<span class='tabAnalyticsListHeaderName'></span>"+'</div>'})();(function(){U.hoverTargetChanged='HoverTarget'})();(function(){P.$0="\n        <span class='tabAuthAnalyticsDragAvatar'>\n            <div class='tabAuthAnalyticsDragAvatarLabel'></div>\n        </span>"})();(function(){W.$0="<div class='tabAnalyticsListItem'>"+"<span class='tabAnalyticsListItemIcon'></span>"+"<span class='tabAnalyticsListItemName'></span>"+'</div>'})();(function(){R.$0="<span class='tabAdAxisDropSpotHolder'>"+"<span class='tabAdAxisDropSpot'></span>"+'</span>';R.$1="<div class='tabAdAxisRow'>"+"<span class='tabAdAxisName tabAdAxisCell'></span>"+'</div>'})();(function(){bc.scrollDelay=100;bc.$0=10})();(function(){S.$0="<span class='tabAdAreaDropSpot tabAdDropCell'>"+"<div class='tabAdAreaDropImage'></div>"+"<div class='tabAdAreaDropLabel'></div>"+'</span>';S.$1="<div class='tabAdDropTarget'>"+"<div class='tabAdHeaderRow'>"+"<span class='tabAdDropTitle tabAdAxisCell'>"+"<div class='tabAdDropInstructionTextPre'></div>"+"<div class='tabAdDropLabel'></div>"+"<div class='tabAdDropInstructionTextPost'></div>"+'</span>'+'</div>'+"<div class='tabAdHorizontalDivider'></div>"+"<div class='tabAdAxisHolder'>"+"<div class='tabAdAxisListScroller'>"+"<div class='tabAdAxisList'></div>"+"<div class='tabAdScrollHoverTop'></div>"+"<div class='tabAdScrollHoverBottom'></div>"+'</div>'+'</div>'+'</div>'})();(function(){Z.$0="<div class='tabAnalyticsPane'></div>"})();(function(){T.dropTargetIdPrefix='tabAoDropTarget-';T.dropSpotDirectHoverClass='tabDirectHover';T.dropSpotIndirectHoverClass='tabIndirectHover'})();(function(){ba.$1='.dashboardSpacer';tab.ObjectRegistry.registerType(ba,ba).call(null)})();(function(){bb.$0='analytics'})();(function(){var ni={};ni['columns-shelf']='columns';ni['rows-shelf']='rows';ni['pages-shelf']='pages';ni['filter-shelf']='filters';ni['encoding-shelf']='marks';ni['measures-shelf']='measureValues';cI.$2=ni})();(function(){jm.publishToastLocation='publishToastLocation'})();(function(){kx.replaceZoneEvent='DashboardAuthoring_ReplaceZone';kx.columeName_CurrentZoneType='CurrentZoneType';kx.columeName_NewZoneType='NewZoneType';kx.columeName_IsFloating='IsFloatingZone';kx.columeName_CurrentDeviceLayout='DeviceLayoutType';kx.columeName_NumOfZonesInDashboard='NumOfZonesInDashboard';kx.columeName_IsSheetHidden='IsSheetHidden'})();(function(){eB.fitWidthHeightStepperTestId='fit-width-height-stepper';eB.$1={alignItems:'center',flexDirection:'row',marginLeft:26};eB.$3={minWidth:80};eB.$4={marginRight:6};eB.$2={color:SharedWidgets.TabStyles.Colors.F7Disabled,marginRight:eB.$4.marginRight}})();(function(){fa.$1={modifiedLayouts:[],autoGeneratedLayouts:[]};fa.$2=3})();(function(){mX.keyPrefix='zone-info-tree-node-'})();(function(){hs.$1='DeviceLayoutToggleButton'})();(function(){dU.$4=[]})();(function(){hL.$0=400})();(function(){hE.$0=0})();(function(){lL.selectedStrokeWidthProperty='SelectedStrokeWidth'})();(function(){lK.$0='tabStrokeWidth';lK.spriteNamePrefix='strokewidth';lK.widthStart=1;lK.widthEnd=5})();(function(){hr.$0='tabLayoutBorderPicker'})();(function(){hC.$1=-9999;hC.$0=9999})();(function(){hD.$1=1;hD.$0=9999})();(function(){nf.$1=true;nf.$0=false})();(function(){nh.$0=false;nh.$1=true})();(function(){hx.$1='size';hx.$0=1000})();(function(){hA.$0=1000})();(function(){hB.layoutTreeSectionKey='layout-tree-section';hB.selectedItemSectionKey='selected-item-section';hB.initialSelectedItemSectionSizePercent=65;hB.initialLayoutTreeSectionSizePercent=100-65;hB.$1='layout';hB.layoutPaneClass='tabAuthLayoutPane';hB.$0=45})();(function(){tab.ObjectRegistry.registerType(F,F).call(null)})();(function(){dK.$2='tab-dashZoneBordersContainer';dK.$1='tab-dashZoneBorderPreview';dK.$0=2})();(function(){dF.$2='tab-dashContainerGuideContainer';dF.$1='tab-dashContainerGuideBorder';dF.$3='tab-dashContainerGuideLine';dF.$0=2;dF.$4=10;dF.$5=5})();(function(){dY.$4='tab-dashDropTargetContainer';dY.$2='tab-dashCurrentDropTarget';dY.$3='__PREVIEW__';dY.$0='__ZONES__';dY.$1='__CONTAINER__'})();(function(){gp.$0='tab-dashDropTargetContainer';gp.$1='tab-dashFloatingResizePreview'})();(function(){kE.$2='tab-dashDropTargetContainer';kE.$1='tab-dashContainerGuideBorder';kE.$9='tab-dashZoneEdgeResizer';kE.$6='tab-snapPointIndicator';kE.$3='tab-snapPointLeft';kE.$8='tab-snapPointTop';kE.$4='tab-snapPointRight';kE.$0='tab-snapPointBottom';kE.$5=5;kE.$7=2})();(function(){ci.$0=5})();(function(){fT.$0="<div class='"+'tabEmptyDashboardContainer'+"'>"+"<div class='"+'tabEmptyDashboardMessage'+"'></div>"+"<div class='"+'tabEmptyDashboardSubMessage'+"'></div>"+'</div>'})();(function(){tab.ObjectRegistry.registerType(fU,fU).call(null)})();(function(){cb.$0="\n<div class='tabAuthToolbar'>\n    <div class='tabAuthToolbarButtonArea'></div>\n    <div class='tabAuthToolbarSpacerArea'></div>\n    <div class='tabAuthToolbarShowMeArea'></div>\n</div>"})();(function(){bN.$1=new spiff.CustomCursor((BrowserSupport.BrowserSupport.IsIE()?'move':('url('+tableau.util.assetUrl('cursors/pandrag.png',true)+') 9 9, default')))})();(function(){bO.$0="\n            <span class='"+'tabAuthTab'+"'>\n                <span class='"+'tabColor'+"'></span>\n                <span class='"+'rightEdge'+"'></span>\n                <span class='"+'dragMarker'+"'></span>\n                <span class='"+'tabAuthTabLabel'+"'></span>\n                <div class='"+'tabAuthDropHandlerContainer'+"'>\n                    <div class='"+'tabAuthDropHandlerLeft'+"'></div>\n                    <div class='"+'tabAuthDropHandlerRight'+"'></div>\n                </div>\n            </span>";bO.iconTemplate="<span class='tabAuthTabIcon'></span>"})();(function(){bI.disabledTabClass='tabAuthDisabledTab';bI.dataTabIconClass='tabAuthDataTabIcon';bI.dataTabIconActiveClass='tabAuthDataTabIconActive';bI.dataTabHiddenClass='dataTabHidden';bI.$2="\n            <div class='tabAuthTabNav'>{0}\n                <div class='"+'tabAuthTabNavTabs'+"'>\n                    <div class='tabAuthTabNavTabContainer'></div>\n                    <div class='tabAuthTabCreationButtonsContainer'></div>\n                </div>\n                <div class='tabAuthLeftScrollDropTarget'></div>\n                <div class='tabAuthTabNavControls'>\n                    <div class='tabAuthTabNavButton tabAuthTabNavLeftButton'><div class='tabIcon'><div class='tabAuthHitTarget'></div></div></div>\n                    <div class='tabAuthTabNavButton tabAuthTabNavRightButton'><div class='tabIcon'><div class='tabAuthHitTarget'></div></div></div>\n                    <div class='tabAuthTabNavButton "+'tabAuthTabNavMenuButton'+"'><div class='tabIcon'><div class='tabAuthHitTarget'></div></div></div>\n                </div>\n            </div>";bI.$1="\n            <div class='tabAuthTabDSTab "+'tabAuthTab'+"' title='{0}'>\n                <span class='"+'rightEdge'+"'></span>\n                <span class='tabAuthTabIcon "+'tabAuthDataTabIcon'+"'></span><span class='tabAuthTabLabel'>{0}</span>\n            </div>";var ni=ss.formatString("\n            <div class='tabAuthTabDSTab tabAuthTab' title='{0}'>\n                <span class='rightEdge'></span>\n                <span class='tabAuthTabIcon tabAuthDataTabIcon'></span><span class='tabAuthTabLabel'>{0}</span>\n            </div>",tab.Strings.DataTabName);bI.$2=ss.formatString(bI.$2,ni)})();(function(){gn.$1=50;gn.$0=250})();(function(){bt.tabAreaSelector='.tabAuthTabArea'})();(function(){mo.$0="<span class='tabTypeInPill' title=''>"+"<div class='tabTypeInPillCmHolder'></div>"+'</span>'})();(function(){eV.$1='@tableau/detailed-field-tooltip';tab.WidgetPlugins.registerWidgetPluginModule(eV.$1,'detailed-field-tooltip')})();(function(){l.$0="<div class='tabAuthShelfScroll'><span class='tabAuthShelfScrollPrev'></span><span class='tabAuthShelfScrollNext'></span></div>"})();(function(){lk.cmdId={ns:'tabdoc',cmd:'send-context-menu-event'}})();(function(){it.htmlTemplate="\n<div class='tabAuthMarksCardTabEncoding'>\n    <div class='tabAuthMarksCardTabEncodingPrimitivesContainer'>\n        <div class='tabAuthMarksCardTabEncodingPrimitives'></div>\n    </div>\n    <div class='tabAuthMarksCardTabEncodingButtonRow'></div>\n    <div class='tabAuthMarksCardTabEncodingButtonRow'></div>\n    <div class='tabAuthMarksCardTabConfigButtonContainer'></div>\n    <div class='tabAuthMarksCardTabEncodingShelf'></div>\n</div>"})();(function(){ge.pillLabelTooltipContainerClassName='tabAuthPillLabelTooltipContainer';ge.$0='tabDropInvited'})();(function(){bw.$6='userMenu';bw.$1='logOnItem';bw.$4='server-autosave';bw.$3=62;bw.$2=40;bw.$5=50;bw.$0=220})();(function(){bK.$1='inputTabFocused';bK.$2=50;tab.ObjectRegistry.registerType(bK,bK).call(null)})();(function(){bZ.moreIconClass='tabToolbarMoreIcon';bZ.openOnDesktopIconClass='tabToolbarOpenOnDesktopIcon';bZ.replayIconButtonClass='tabAuthToolbar-replay';bZ.replayArrowButtonClass='tabAuthToolbar-splitButtonArrow';bZ.$3='More';bZ.$6=50;bZ.$7=new tab.UndoKeyboardShortcut;bZ.$4=new tab.RedoKeyboardShortcut;bZ.$5=new kl;bZ.$1=null;bZ.$2=new hd;if(tabBootstrap.FeatureFlags.isEnabled('WebKeyboardShortcutsExtended')){bZ.$1=new fK}})();(function(){lc.$4='data';lc.selectedFieldProperty='SelectedField';lc.showDimMeasSeparatorClassName='showDroppable';lc.showContainerOutlineClassName='showMoveToZone';lc.$5=300;lc.sectionsInOrder=[4,5,6,0,1,2,3]})();(function(){ho.dropTargetIdPrefix='tabLayersDropTarget';ho.dropSpotDirectHoverClass='tabDirectHover';ho.dropSpotIndirectHoverClass='tabIndirectHover'})();(function(){kv.maxSheetNameLength=254;kv.cancelButtonTestID='cancel';kv.commitButtonTestID='commit';kv.$2=50;kv.$1='newSheetName';kv.renameTemplate="\n<div class='tabAuthRenameSheet'>\n    <div>\n        <input name='"+'newSheetName'+"' class='"+'newSheetName'+"' type='text' maxlength='"+254+"'/>\n    </div>\n    <div class='tab-dialog-status-msg'></div>\n    <div class='tab-dialog-actions-top-spacing'></div>\n</div>"})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-rename-sheet',ko.$1);tab.CommandRedirectRegistry.registerHandler('command-redirect-rename-field',ko.$0)})();(function(){eI.$6='DataSource';eI.labelAreaDomProperty='SchemaItemLocator';eI.emptySectionClass='tab-schema-empty-section';eI.visibleFieldElemQuery='.'+'tab-schema-field'+':visible';eI.$b=200;eI.$c=25;eI.$d=10;eI.$8=21;eI.$a=40+80;eI.$9=30+80+120;eI.$7=30+30+42+230+30+20})();(function(){fG.showMeBarsIconClass='tabAuth-ShowMe_BarsIcon';fG.showMePillClass='tabAuthPillShowMe';fG.showMeVizDropAreaClass='showMeVizDropArea';fG.showMeVizDropAreaBorderClass='showMeDropAreaBorder'})();(function(){iy.propertyCurrentLayer='CurrentLayer'})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.CloseAuthoringCmd.cmdId,cU)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.SaveOrSaveAsCmd.cmdId,kM)})();(function(){fx.$0=null})();(function(){cd.$1$1=null})();(function(){cl.justPublishedDuration=3000;var ni=new fe;ni.set_minutesDisplayIsValid(1);ni.set_nextUpdateIntervalMs(10000);ni.set_builder(new hb(false));var nj=new fe;nj.set_minutesDisplayIsValid(2147483647);nj.set_nextUpdateIntervalMs(2147483647);nj.set_builder(new gw(false));cl.$7=[ni,nj];var ni=new fe;ni.set_minutesDisplayIsValid(1);ni.set_nextUpdateIntervalMs(10000);ni.set_builder(new hb(true));var nj=new fe;nj.set_minutesDisplayIsValid(2147483647);nj.set_nextUpdateIntervalMs(2147483647);nj.set_builder(new gw(true));cl.$4=[ni,nj];cl.$6=null;cl.$1=3000;cl.$3='server-autosave-size';cl.$5=null;cl.$2=[(new tab.CreateDataSourceFromFileUploadCmd).get_commandId().cmd,(new tab.ReplaceFileConnectionFromFileUploadCmd).get_commandId().cmd,{ns:'tabdoc',cmd:'update-image-object-properties'}.cmd,{ns:'tabdoc',cmd:'commit-batch-state-change'}.cmd]})();(function(){cc.$3='newWorkbook';cc.$2='editDatasource'})();(function(){fz.$0=null})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.SaveAsCmd.cmdId,kJ)})();(function(){by.$0=['web_author_who.htm','web_author.htm','web_author_build_view.htm'];by.$c='Show Grid'})();(function(){fD.$0=null})();(function(){jn.$0=null})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.SaveCmd.cmdId,kK)})();(function(){ms.$8='worksheetMenu';ms.$4='dashboardMenu';ms.$3='analysisMenu';ms.$6='mapMenu';ms.$5='formatMenu';ms.$7='windowMenu'})();(function(){iF.$3='fileMenu';iF.$2='dataMenu';iF.$4='helpMenu';iF.$5='tabHelpContextMenu'})();(function(){ce.$1=new ss.Lazy(function(){return new tab.SheetThumbnailCache});ce.einsteinPopoverRef=null})();(function(){eo.paneId='dashboard';eo.$0='tabAuthDashboardPane'})();(function(){bo.$1='tab-dashDragDrop';bo.dsdGlassClass='tab-dsdGlass';bo.dashboardPortPreviewHostClass='tab-dashboard-port-preview-host';tab.ObjectRegistry.registerType(bo,bo).call(null)})();(function(){tab.ObjectRegistry.registerType(fR,fR).call(null)})();(function(){cK.cardViewClassNamePrefix='tabAuthCardType-';tab.ObjectRegistry.registerType(cK,cK).call(null)})();(function(){cs.$0='.CodeMirror-hints';cs.autoCompleteDebounceTimeout=250})();(function(){cy.replaceableMarkerClassname='tabTok_replace';cy.nonReplaceableMarkerClassname='tabTok_noreplace';cy.$1='tabPillBelowCursor';cy.$0='tabActiveDropTarget'})();(function(){cA.dropInvitedClassName='tabDropInvited';cA.$5='tabTok_';cA.$4='tabTok_'+'error'})();(function(){cx.$1='.CodeMirror-vscrollbar';cx.$3=300;cx.$2=300;tab.ObjectRegistry.registerType(cx,cx).call(null)})();(function(){cf.titleClass='tab-tvTitle';cf.vizZoneClass='tabZone-viz';cf.vizViewClass='tab-tvView'})();(function(){jh.$0='tabPill'})();(function(){cB.validationDelay=250;cB.$0='tab-schema-datasource-icon'})();(function(){mp.$3=30;mp.$1='tabAnimationTransition';mp.$2='Enter';tab.ObjectRegistry.registerType(mp,mp).call(null)})();(function(){lv.smallTypeInPillWidth=108;lv.defaultTypeInPillWidth=250;lv.$4=12;lv.$2=150;lv.$5=50;lv.$8='&#9650';lv.$3='&#9664';lv.$1='&#9660';lv.$7='&#9654';lv.$6='tabAuthPillsHorizOverflow';tab.ObjectRegistry.registerType(lv,lv).call(null)})();(function(){iu.$1='configure';iu.$2='tabAuthEncodingType';tab.ObjectRegistry.registerType(iu,iu).call(null)})();(function(){h.$0="\n<div class='tabPane'>\n    <div class='tabPaneTitle'></div>\n    <div class='tabPaneBody'></div>\n</div>"})();(function(){i.$0="<div class='refLineConstantValueEditor'>"+"<span class='refLineConstantValueEditorTitle'></span>"+"<input class='refLineConstantValueEditorInput' type='text'/>"+'</div>'})();(function(){m.$0="\n<div class='tabTabbedPane'>\n    <div class='tabTabLabels'></div>\n    <div class='tabTabContentArea'></div>\n</div>"})();(function(){r.$2='SetMapScaleVisibility';r.$3='SetMapSearchVisibility';r.$1='SetFloatingToolbarVisibility';r.$0='SetAllowPanAndZoom'})();(function(){C.$0="<div class='tabAccordion'>\n            <div class='tabAccordionItems'></div>\n            <div class='layersDropTargetsContainer'></div>\n            <div class='layersDropTargetsGlass'></div>\n            </div>"})();(function(){tab.DeferredNotifications.registerHandlerFromModule(tab.IAliasDialogModule).call(null,'doc:edit-aliases-dialog-notification-event',function(ni){return ni.showDialog()})})();(function(){bf.$1='@tableau/animation-settings-side-pane';tab.WidgetPlugins.registerWidgetPluginModule(bf.$1,'animation-settings-side-pane')})();(function(){bh.id='animation-side-pane'})();(function(){bz.$1=null})();(function(){br.$a=null;br.$b=null;var ni=null;ni=function(nj,nk){br.init();tab.Application.remove_starting(ni)};tab.Application.add_starting(ni)})();(function(){ck.devConfigCookieName='AutofitDevConfigurationDialogCookie'})();(function(){tab.DeferredNotifications.registerHandlerFromModule(tab.IGroupDialogModule).call(null,'doc:update-categorical-bin-edit-dialog-event',function(ni){return ni.showGroupDialog()})})();(function(){cP.$1=null;cP.$0=null})();(function(){tab.StartupUtils.callOnceAfterInitialBootstrap(function(){var ni=null;tab.ApplicationModel.get_holder().addEventBinding(function(nj){ni=new cQ(nj.modelInstance(tab.CategoricalColorEditorDialogModel).call(nj),new cP)},function(nj){ni=tab.MiscUtil.dispose$1(ni)})})})();(function(){var ni=null;tab.StartupUtils.callOnceAfterInitialBootstrap(function(){tab.ApplicationModel.get_holder().addEventBinding(function(nj){ni=new cW(nj.modelInstance(tab.CloseDataSourceErrorDialogModel).call(nj))},function(nj){ni=tab.MiscUtil.dispose$1(ni)})})})();(function(){dq.$0="<span class='tabColorPalettePage'>\n    <div class='tabColorSpecialPalette tabColorAutomaticPalette tabColorPalette'>\n        <div class='tabPaletteBorder'></div>\n    </div>\n    <div class='tabColorPalettePageColumns'>\n        <span class='tabColorPalettePageColumn0'></span>\n        <span class='tabColorPalettePageColumn1'></span>\n    </div>\n</span>";dq.specialPaletteClass='tabColorSpecialPalette';dq.colorPaletteClass='tabColorPalette'})();(function(){dr.selectedClass='tabPaletteSelected';dr.highlightClass='tabPageHighlight';dr.warningPageLinkClass='tabPaletteWarningPageLink';dr.warningPageClass='tabColorPaletteWarning';dr.$0="<div class='tabColorPalettePicker'>\n        <div class='tabAuthLeftButtonArea'>\n            <div class='tabAuthPalettePickerLeftButton'></div>\n        </div>\n        <div class='tabColorPalettePickerWindow'>\n            <div class='tabColorPalettePickerPageContainer'></div>\n        </div>\n        <div class='tabAuthRightButtonArea'>\n            <div class='tabAuthPalettePickerRightButton'></div>\n        </div>\n        <div class='tabPalettePageControlsArea'>\n            <div class='tabPalettePageControls'></div>\n        </div>\n    </div>"})();(function(){dt.groupsPerPage=2;dt.$1=null;dt.currentPageProperty='CurrentPage';dt.selectedPaletteProperty='SelectedPalette';dt.pageRemovedProperty='PageRemoved';dt.$1={};dt.$1['palette-flag-none']=0;dt.$1['palette-flag-custom']=1<<0;dt.$1['palette-flag-not-quantitative']=1<<1;dt.$1['palette-flag-not-categorical']=1<<2;dt.$1['palette-flag-not-reference-band']=1<<3;dt.$1['palette-flag-not-boxplot']=1<<4;dt.$1['palette-flag-not-filled-map-light']=1<<5;dt.$1['palette-flag-not-filled-map-dark']=1<<6;dt.$1['palette-flag-legacy']=1<<7})();(function(){tab.ObjectRegistry.registerType(ds,ds).call(null)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-confirmation',dE.$0);tab.CommandRedirectRegistry.registerHandler('command-redirect-hide-object',dE.$1)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.CopyZoneToWebClipboardCmd.cmdId,dO)})();(function(){dS.$1='<div></div>';dS.$0='tv_drag';dS.$2='tvdrag_marquee'})();(function(){ed.$1=5;ed.$0=1000})();(function(){ee.$0=100})();(function(){tab.DeferredNotifications.registerHandler('doc:dashboard-grid-dialog-event',ef.$0)})();(function(){er.dashboardClass='tab-dashboard';er.$1='tab-dashDragDrop';er.$2='tab-dashSelection';tab.ObjectRegistry.registerType(er,er).call(null)})();(function(){eF.labelsPanelFieldTestId='Field-Labels-Panel';eF.labelsPanelDatasourceTestId='Datasource-Labels-Panel';eF.labelsPanelModePanel='panel';eF.labelsPanelModePopover='popover'})();(function(){eG.$0="<div class='tab-schemaFieldListContent'></div>"})();(function(){eL.$3=null;tab.WorldUpdateInterceptor.get().add_onBootstrapResponse(eL.$0)})();(function(){eQ.logEventType='autosave_deletedraft';eQ.$1=null})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.DeleteDraftCmd.cmdId,eP)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-delete-sheet',eS.$0)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-delete-sheets',eT.$0)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.DestroyVQLSessionCmd.cmdId,eU)})();(function(){ff.bottoM_OF_PAGE_CUTOFF=700;ff.anchorOriginVerticalAlignment='top';ff.anchorOriginHorizontalAlignment='left';ff.stackedOriginVerticalAlignment='bottom';ff.stackedOriginHorizontalAlignment='left'})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-display-format',fh.$0)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.DownloadWorkbookCmd.cmdId,fy)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-add-drill-path',fH.$0);tab.CommandRedirectRegistry.registerHandler('command-redirect-rename-drill-path',fH.$1)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.EditWorkbookInDesktopCmd.cmdId,fP);var ni=new Object;ni.nonMacControl='required';var nj=ni;var nk=new KeyboardShortcuts.KeyCombo('o',nj);var nl=new Object;nl.command='required';nl.alt='required';var nm=nl;var nn=new KeyboardShortcuts.KeyCombo('o',nm);var no=new KeyboardShortcuts.KeyCombos(nn,nk);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[fP,Object]))(no,true,true,null,null,null,null))})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-add-field-folder',gc.$0);tab.CommandRedirectRegistry.registerHandler('command-redirect-rename-field-folder',gc.$1)})();(function(){gs.$1='@tableau/formatting-pane';gs.$2=0;tab.WidgetPlugins.registerWidgetPluginModule(gs.$1,'formatting-pane')})();(function(){gv.id='formatting-side-pane';gv.$1=null;gv.$1=new tab.RightHybridSidePaneProxyHelper(gv.id,gv.openCallback,gv.updateCallback,gv.closeCallback,'doc:open-formatting-side-pane-event','doc:update-formatting-side-pane-event','doc:close-formatting-side-pane-event')})();(function(){gy.cmdId={ns:'tabdoc',cmd:'get-calc-details-web'}})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(gy.cmdId,gA)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.HideZoneWithPreviewCmd.cmdId,gH)})();(function(){hz.borderTitle='border-title';hz.backgroundTitle='background-title';hz.marginTitle='margin-title';hz.paddingTitle='padding-title'})();(function(){ig.$1='@tableau/map-layers-pane';tab.WidgetPlugins.registerWidgetPluginModule(ig.$1,'map-layers-pane')})();(function(){ii.id='map-layers-pane'})();(function(){hQ.$1=new bh;hQ.$2=new ii})();(function(){ij.type='Viz_MapOptions';ij.optionName='MapOptionName';ij.optionSetTo='OptionSetTo'})();(function(){ik.$0='mapOptionsCheckboxPropsList';ik.$3='mapOptionsUnitsContainerProps';ik.$2='mapOptionsDropdownLabelProps';ik.$1=200})();(function(){tab.DeferredNotifications.registerHandler('doc:map-options-dialog-event',il.$0)})();(function(){iw.stackingId='tabAuthMarksContentStackingId';iw.$1="<div class='tabAuthMarksContent' id='tabAuthMarksContentStackingId'></div>"})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-notification',iT.$0)})();(function(){tab.DeferredNotifications.registerHandlerFromModule(tab.IBinDialogModule).call(null,'doc:update-numeric-bin-edit-dialog-event',function(ni){return ni.showDialog()})})();(function(){ji.htmlTemplate="\n<span class='tabAuthShelfPill tabAuthPillDragSource'>\n    <span class='tabAuthPillExternalIcon'></span>\n    <span class='tabAuthPillEncodingType'></span>\n    <span class='tabAuthPillContent'>\n        <div class='tabAuthPillDrillIcon'><div class='tabAuthHitTarget'></div></div>\n        <div class='tabAuthPillLabel'>{0}</div>\n        <div class='tabAuthPillMenuBtn'><div class='tabAuthHitTarget'></div></div>\n        <div class='tabAuthPillIcons'></div>\n    </span>\n</span>"})();(function(){jo.$0=5})();(function(){jr.$0=500})();(function(){tab.DeferredNotifications.registerHandler('doc:web-quantitative-color-dialog-event',function(){var ni=new tab.QuantitativeColorEditorDialogModel;new jr(ni);return ni})})();(function(){jB.$1=988;jB.$0='.dashboardSpacer'})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-quick-edit',jD.$0)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.RemoveZoneFromDeviceLayoutWithPreviewCmd.cmdId,km)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.ResizeActiveZoneCmd.cmdId,kD)})();(function(){kI.$0=null})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.RevertToPublishedCmd.cmdId,kH)})();(function(){kL.instanceElement=null;kL.$0='server-autosave-publish'})();(function(){la.template=ss.formatString("\n            <div class='{0}'>\n              <div class='tab-schemaViewerScroll'>\n                <div class='tab-schemaViewerContentArea'>\n                    <div class='tab-schemaHeader tab-schemaDataSourcesHeader'>Data</div>\n                    <div class='tab-connectToData'></div>\n                    <div class='tab-dataSources tab-schemaViewerResizeablePane'>\n                        <div class='tab-dataSourceTitles'></div>\n                        <div class='tab-dataSourcesCombo'></div>\n                    </div>\n                    <div class='tab-schemaViewerFields'>\n                        <div class='tab-aboveSearchResizeHandle'></div>\n                        <div class='tab-schemaSearch'></div>\n                        <div class='tab-schemaPane tab-schemaCommon tab-schemaViewerResizeablePane'>\n                            <div class='tab-schemaPane-header'></div>\n                            <div class='tab-schemaPaneContent'>\n                                <div id='tab-schemaFieldContainers' class='tab-schemaSection'>\n                                    <div class='tab-schemaSection-content'></div>\n                                </div>\n                                <div class='tab-schemaCommonArea'>\n                                    <div id='tab-schemaCommonDimensions' class='tab-schemaSection'>\n                                        <div class='tab-schemaSection-content'></div>\n                                    </div>\n                                    <div class='tab-topLevelColumnSeparator tab-columnSeparator'>\n                                        <div class='separatorLabel dimLabel'><span class='separatorLabelText'>Dimensions</span></div>\n                                        <div class='separatorLine'></div>\n                                        <div class='separatorLabel measLabel'><span class='separatorLabelText'>Measures</span></div>\n                                    </div>\n                                    <div id='tab-schemaCommonMeasures' class='tab-schemaSection'>\n                                        <div class='tab-schemaSection-content'></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class='tab-schemaHeader tab-schemaDimensions-Header'></div>\n                        <div class='{1} tab-schemaViewerResizeablePane'></div>\n                        <div class='tab-schemaHeader tab-schemaMeasuresHeader'></div>\n                        <div class='{2} tab-schemaViewerResizeablePane'></div>\n                        <div class='tab-schemaHeader tab-schemaSetsHeader'></div>\n                        <div class='{3} tab-schemaViewerResizeablePane'></div>\n                        <div class='tab-schemaHeader tab-schemaParametersHeader'></div>\n                        <div class='{4} tab-schemaViewerResizeablePane'></div>\n                    </div>\n                </div>\n              </div>\n              <div class='tab-schemaDropInviteTop'></div>\n              <div class='tab-schemaDropInviteLeft'></div>\n              <div class='tab-schemaDropInviteBottom'></div>\n              <div class='tab-schemaDropInviteRight'></div>\n            </div>",'tab-schemaViewer','tab-schemaDimensions','tab-schemaMeasures','tab-schemaSets','tab-schemaParameters')})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebCatalogDetailsDialogCmd.cmdId,mu)})();(function(){lb.singleDataSourceTitleDisplayHeight=SharedWidgets.TabStyles.Sizing.RowHeight;lb.$5=null;lb.$6=null;lb.$7=null;lb.$9=null;lb.$8=null;tab.ObjectRegistry.registerType(eI,lb).call(null)})();(function(){if(tabBootstrap.FeatureFlags.isEnabled('PublishSegmentToDataCloud')){var ni=new tab.NotificationCallbackWithPresModel('doc:show-segment-creation-success-event',lf.$1);tab.DeferredNotifications.registerHandler('doc:show-segment-creation-success-event',function(){return ni});var nj=new tab.NotificationCallbackWithPresModel('doc:show-segment-creation-error-event',lf.$0);tab.DeferredNotifications.registerHandler('doc:show-segment-creation-error-event',function(){return nj})}})();(function(){if(tabBootstrap.FeatureFlags.isEnabled('PublishSegmentToDataCloud')){var ni=new tab.NotificationCallbackWithPresModel('doc:show-segment-validation-error-event',lg.$0);tab.DeferredNotifications.registerHandler('doc:show-segment-validation-error-event',function(){return ni})}})();(function(){lm.$0="<div class='tabAuthShapePicker'><div class='tabAuthShapePickerRows'></div></div>"})();(function(){lI.valueProperty='Value';lI.enabledProperty='IsEnabled';lI.incrementEnabledProperty='IsIncrementEnabled';lI.decrementEnabledProperty='IsDecrementEnabled'})();(function(){lH.incrementButtonClassName='tabDecrementButton';lH.decrementButtonClassName='tabIncrementButton';tab.ObjectRegistry.registerType(lH,lH).call(null)})();(function(){tab.ObjectRegistry.registerType(lN,lN).call(null)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.ToggleFreeFormZoneWithPreviewCmd.cmdId,mi)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.ToggleINDJoinSemanticsWrapperCmd.cmdId,mj)})();(function(){mw.$2='ntbue/#/edit';tab.WebCommandRegistry.get_instance().registerCommand(tab.WebCreateMetricFromFieldCmd.cmdId,mw)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebDashboardDesignCmd.cmdId,mx)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebEditObjectCaptionCmd.cmdId,mz)})();(function(){var ni=tab.WebCommandRegistry.get_instance();var nj=new tab.CommandLocalOptions;nj.blocking='none';nj.commandWaiter=new mB;ni.registerCommandLocalOptions({ns:'tabdoc',cmd:'categorical-filter-set-range-type-deferred'},nj);var nk=tab.WebCommandRegistry.get_instance();var nl=new tab.CommandLocalOptions;nl.blocking='none';nl.commandWaiter=new mB;nk.registerCommandLocalOptions({ns:'tabdoc',cmd:'categorical-filter-init-with-domain'},nl)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebFilterDialogDomainCancelCmd.cmdId,mC)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebFormatPaneCmd.cmdId,mD)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebFormatPaneForVizPointCmd.cmdId,mE)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebRemoveShelfPillCmd.cmdId,mF)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebShowFieldCatalogDetailsCmd.cmdId,mH)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebShowMeCmd.cmdId,mI)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebToolbarMoreCmd.cmdId,mJ)})();(function(){mL.$1=0})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WhereDidSaveGoCmd.cmdId,mN)})()})();;
/*! BEGIN ResizeHeadersModule */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlresizeheadersmodule');var b=global.tab.AxisResizerManager=ss.mkType(a,'tab.AxisResizerManager',function(o,p){this.domElements=null;this.visualID=null;this.activeResizerObjects=null;this.domElements=o;this.visualID=p;this.activeResizerObjects=[]},{setAxisResizers:function(){if(!tsConfig.is_authoring||tab.ApplicationModel.get_instance().get_currentSheetType()==='story'){return}this.$1();var o=tab.DomUtil.getRectXY(this.domElements.topLeftSpacer);var p=o.w;var q=o.h;var r=tab.DomUtil.getRectXY(this.domElements.topRightSpacer).w;var s=tab.DomUtil.getRectXY(this.domElements.bottomLeftSpacer).h;var t=tab.DomUtil.getRectXY(this.domElements.view);var u=t.w;var v=t.h;var w=q+v+s;var x=p+u+r;var y=tab.DomUtil.getRectXY(this.domElements.topAxis);var z=tab.DomUtil.getRectXY(this.domElements.rightAxis);var A=tab.DomUtil.getRectXY(this.domElements.bottomAxis);var B=tab.DomUtil.getRectXY(this.domElements.leftAxis);var C=y.w;var D=z.h;var E=A.w;var F=B.h;var G=C>0&&E>0;var H=D>0&&F>0;if(C>0){var I=p+C+r;var J=-p;var K=y.h;var L=-k.getAxisResizerMinimumRunDistance(K);var M=k.getAxisResizerMaximumRunDistance(v,w,K,G);var N=new tab.ResizerViewModelParams(this.visualID,J,I,false,L,M);this.$0(N,'topaxis')}if(D>0){var O=q+D+s;var P=-q;var Q=z.w;var R=-k.getAxisResizerMaximumRunDistance(u,x,Q,H);var S=k.getAxisResizerMinimumRunDistance(Q);var T=new tab.ResizerViewModelParams(this.visualID,P,O,true,R,S);this.$0(T,'rightaxis')}if(E>0){var U=p+E+r;var V=-p;var W=A.h;var X=-k.getAxisResizerMaximumRunDistance(v,w,W,G);var Y=k.getAxisResizerMinimumRunDistance(W);var Z=new tab.ResizerViewModelParams(this.visualID,V,U,false,X,Y);this.$0(Z,'bottomaxis')}if(F>0){var ba=q+F+s;var bb=-q;var bc=B.w;var bd=-k.getAxisResizerMinimumRunDistance(bc);var be=k.getAxisResizerMaximumRunDistance(u,x,bc,H);var bf=new tab.ResizerViewModelParams(this.visualID,bb,ba,true,bd,be);this.$0(bf,'leftaxis')}},$0:function(o,p){var q=new c(o,p);var r=new m(q);switch(p){case'topaxis':{k.appendResizerElementToDom(this.domElements.topAxis,r);break}case'rightaxis':{k.appendResizerElementToDom(this.domElements.rightAxis,r);break}case'bottomaxis':{k.appendResizerElementToDom(this.domElements.bottomAxis,r);break}case'leftaxis':{k.appendResizerElementToDom(this.domElements.leftAxis,r);break}default:{break}}this.activeResizerObjects.push(r.resizerObject);EventUtils.DragDropManager.attachDragSource(r.resizerObject,r)},$1:function(){while(!tab.MiscUtil.isNullOrEmpty$2(this.activeResizerObjects)){var o=this.activeResizerObjects.pop();EventUtils.DragDropManager.removeDragSource(o);o.parent().remove()}},dispose:function(){this.$1()}});var c=global.tab.AxisResizerViewModel=ss.mkType(a,'tab.AxisResizerViewModel',function(o,p){this.$3$1=null;n.call(this,o);this.set_axisType(p)},{get_axisType:function(){return this.$3$1},set_axisType:function(o){this.$3$1=o},get_isInvertedResize:function(){return this.get_axisType()==='rightaxis'||this.get_axisType()==='bottomaxis'},get_isFolded:function(){return this.get_axisType()==='rightaxis'||this.get_axisType()==='topaxis'},get_cssClassName:function(){return k.getAxisResizerCssClassName(this.get_axisType())},sendResizeCommand:function(o){var p=(this.get_isInvertedResize()?-o:o);if(k.isSizeDifferenceOverThreshold(o)){var q=new tab.ResizeAxisRegionCmd;q.set_visualID(this.get_visualID());q.set_sizeDifference(p);q.set_isXAxis(!this.get_isXResizer());q.set_isFolded(this.get_isFolded());q.set_uiBlocking('immediately');q.invoke()}}});var d=global.tab.CellResizerManager=ss.mkType(a,'tab.CellResizerManager',function(o,p,q){this.$9=null;this.$a=null;this.$7=0;this.$8=0;this.cellHeightResizerViews=null;this.cellWidthResizerViews=null;this.rowHeaderArea=null;this.columnHeaderArea=null;this.viewModel=null;this.rowHeaderArea=p;this.columnHeaderArea=q;this.viewModel=o;this.viewModel.add_updateCellResizerViews(ss.mkdel(this,this.handleCellResizerUpdate));this.$2();this.$9=_.debounce(ss.mkdel(this,this.scrollX),500);this.$a=_.debounce(ss.mkdel(this,this.scrollY),500)},{dispose:function(){this.$3()},scrollXWithTimeout:function(o){this.$9(o)},scrollYWithTimeout:function(o){this.$a(o)},scrollX:function(o){this.$7=o;this.$5(o,this.cellWidthResizerViews,'left',this.columnHeaderArea.width())},scrollY:function(o){this.$8=o;this.$5(o,this.cellHeightResizerViews,'top',this.rowHeaderArea.height())},$5:function(o,p,q,r){_.each(p,function(s,t){var u=s.get_viewModel().get_resizerOffset()*(t+1)-ss.idiv(10,2)-ss.imod(o,s.get_viewModel().get_resizerOffset());s.resizerObject.css(q,u+'px');var v=u<r;s.resizerObject.toggle(v)})},handleCellResizerUpdate:function(){this.$3();this.$2();if(ss.isValue(this.cellHeightResizerViews)){this.$0(this.cellHeightResizerViews,false)}if(ss.isValue(this.cellWidthResizerViews)){this.$0(this.cellWidthResizerViews,true)}},$2:function(){this.cellHeightResizerViews=null;if(ss.isValue(this.viewModel.get_cellHeightResizerVM())){this.cellHeightResizerViews=[];var o=ss.idiv(this.rowHeaderArea.height()|0,this.viewModel.get_resizeInfo().cellSize.get_height())+1;for(var p=0;p<o;p++){var q=new m(this.viewModel.get_cellHeightResizerVM());this.cellHeightResizerViews.push(q)}}this.cellWidthResizerViews=null;if(ss.isValue(this.viewModel.get_cellWidthResizerVM())){this.cellWidthResizerViews=[];var r=ss.idiv(this.columnHeaderArea.width()|0,this.viewModel.get_resizeInfo().cellSize.get_width())+1;for(var s=0;s<r;s++){var t=new m(this.viewModel.get_cellWidthResizerVM());this.cellWidthResizerViews.push(t)}}},$0:function(o,p){var q=(p?this.columnHeaderArea:this.rowHeaderArea);var r=this.columnHeaderArea.height();var s=this.rowHeaderArea.width();var t=(p?(r|0):(s|0));var u=(p?this.columnHeaderArea.width():this.rowHeaderArea.height());var v=(p?this.rowHeaderArea.height():this.columnHeaderArea.width());for(var w=0;w<o.length;w++){var x=o[w];var y=t-x.get_viewModel().get_resizerLength();var z=(p?y:this.$1(x,this.$8,w));var A=(p?this.$1(x,this.$7,w):y);var B=(p?A:z);var C=B<u;x.resizerObject.toggle(C);this.$6(x,p,v);var D={left:A+'px',top:z+'px',width:(p?(10+'px'):(x.get_viewModel().get_resizerLength()+'px')),height:(p?(x.get_viewModel().get_resizerLength()+'px'):(10+'px'))};x.resizerObject.css(D);k.appendResizerElementToDom(q,x);EventUtils.DragDropManager.attachDragSource(x.resizerObject,x)}},$1:function(o,p,q){var r=o.get_viewModel().get_resizerOffset()*(q+1);r-=ss.idiv(10,2);r-=ss.imod(p,o.get_viewModel().get_resizerOffset());return r},$6:function(o,p,q){if(p){o.get_resizeTemplate().resizer.height(o.get_viewModel().get_resizerLength()+q)}else{o.get_resizeTemplate().resizer.width(o.get_viewModel().get_resizerLength()+q)}},$3:function(){if(ss.isValue(this.cellHeightResizerViews)){this.$4(this.cellHeightResizerViews)}if(ss.isValue(this.cellWidthResizerViews)){this.$4(this.cellWidthResizerViews)}},$4:function(o){for(var p=0;p<o.length;p++){var q=o[p];EventUtils.DragDropManager.removeDragSource(q.resizerObject);q.resizerObject.parent().remove()}}});var e=global.tab.CellResizerManagerViewModel=ss.mkType(a,'tab.CellResizerManagerViewModel',function(o,p){this.$6=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.$0(o);this.$6=p;this.get_resizeInfo().add_resizeInfoUpdated(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_resizeInfo().remove_resizeInfoUpdated(ss.mkdel(this,this.$3))})));this.$5()},{add_updateCellResizerViews:function(o){this.$2$1=ss.delegateCombine(this.$2$1,o)},remove_updateCellResizerViews:function(o){this.$2$1=ss.delegateRemove(this.$2$1,o)},get_resizeInfo:function(){return this.$2$2},$0:function(o){this.$2$2=o},get_cellWidthResizerVM:function(){return this.$2$3},$1:function(o){this.$2$3=o},get_cellHeightResizerVM:function(){return this.$2$4},$2:function(o){this.$2$4=o},$3:function(){this.$5();this.$2$1()},$5:function(){this.$2(null);this.$1(null);if(this.get_resizeInfo().get_areCellHeightsAdjustable()){this.$2(this.$4(this.get_resizeInfo().get_rowHeaders()[this.get_resizeInfo().get_rowHeaders().length-1],false))}if(this.get_resizeInfo().get_areCellWidthsAdjustable()){this.$1(this.$4(this.get_resizeInfo().get_columnHeaders()[this.get_resizeInfo().get_columnHeaders().length-1],true))}},$4:function(o,p){var q=(p?o.get_height():o.get_width());var r=(p?o.get_width():o.get_height());var s=(p?-k.getHeaderResizerMinimumRunDistance(o.get_width()):-k.getHeaderResizerMinimumRunDistance(o.get_height()));var t=new tab.ResizerViewModelParams(this.$6,r,q,p,s,2147483647);var u=new f(t,o);return u}});var f=global.tab.CellResizerViewModel=ss.mkType(a,'tab.CellResizerViewModel',function(o,p){this.$6=null;n.call(this,o);this.$6=p},{get_cssClassName:function(){return(this.get_isXResizer()?'tab-tvCellWidthResizer':'tab-tvCellHeightResizer')},get_fieldName:function(){return this.$6.get_fieldName()},sendResizeCommand:function(o){if(k.isSizeDifferenceOverThreshold(o)){var p=new tab.ResizeCellWebCmd;p.set_visualID(this.get_visualID());p.set_baseCoord(0);p.set_isXAxis(this.get_isXResizer());p.set_isFolded(false);p.set_newSize(o+(this.get_isXResizer()?this.$6.get_width():this.$6.get_height()));p.invoke()}}});var g=global.tab.HeaderResizerManager=ss.mkType(a,'tab.HeaderResizerManager',function(o,p,q){this.rowHeaderResizerViews=null;this.colHeaderResizerViews=null;this.rowHeaderArea=null;this.columnHeaderArea=null;this.viewModel=null;this.rowHeaderArea=p;this.columnHeaderArea=q;this.viewModel=o;this.viewModel.add_updateResizerViews(ss.mkdel(this,this.handleResizerUpdate));this.$1()},{handleResizerUpdate:function(){if(tsConfig.is_authoring){this.$2();this.$1();if(ss.isValue(this.rowHeaderResizerViews)){this.$0(this.rowHeaderResizerViews,true,0)}if(ss.isValue(this.colHeaderResizerViews)){var o=(this.columnHeaderArea.height()|0)-this.viewModel.get_totalColumnHeadersHeight();this.$0(this.colHeaderResizerViews,false,o)}}},$2:function(){if(ss.isValue(this.rowHeaderResizerViews)){this.$3(this.rowHeaderResizerViews)}if(ss.isValue(this.colHeaderResizerViews)){this.$3(this.colHeaderResizerViews)}},$3:function(o){for(var p=0;p<o.length;p++){var q=o[p];EventUtils.DragDropManager.removeDragSource(q.resizerObject);q.resizerObject.parent().remove()}},$1:function(){this.rowHeaderResizerViews=null;if(!tab.MiscUtil.isNullOrEmpty$2(this.viewModel.get_rowHeaderResizerVMs())){this.rowHeaderResizerViews=[];var o=this.viewModel.get_rowHeaderResizerVMs();for(var p=0;p<o.length;p++){var q=o[p];var r=new m(q);this.rowHeaderResizerViews.push(r)}}this.colHeaderResizerViews=null;if(!tab.MiscUtil.isNullOrEmpty$2(this.viewModel.get_columnHeaderResizerVMs())){this.colHeaderResizerViews=[];var s=this.viewModel.get_columnHeaderResizerVMs();for(var t=0;t<s.length;t++){var u=s[t];var v=new m(u);this.colHeaderResizerViews.push(v)}}},$0:function(o,p,q){var r=(p?this.rowHeaderArea:this.columnHeaderArea);for(var s=0;s<o.length;s++){var t=o[s];k.appendResizerElementToDom(r,t);var u={left:(p?(t.get_viewModel().get_resizerOffset()-ss.idiv(10,2)+'px'):'0px'),top:(p?'0px':(t.get_viewModel().get_resizerOffset()+q-ss.idiv(10,2)+'px')),width:(p?(10+'px'):(t.get_viewModel().get_resizerLength()+'px')),height:(p?(t.get_viewModel().get_resizerLength()+'px'):(10+'px'))};t.resizerObject.css(u);EventUtils.DragDropManager.attachDragSource(t.resizerObject,t)}},dispose:function(){this.$2()}});var h=global.tab.HeaderResizerManagerViewModel=ss.mkType(a,'tab.HeaderResizerManagerViewModel',function(o,p){this.$6=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.$0(o);this.$6=p;this.get_resizeInfo().add_resizeInfoUpdated(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_resizeInfo().remove_resizeInfoUpdated(ss.mkdel(this,this.$3))})));this.$5()},{add_updateResizerViews:function(o){this.$2$1=ss.delegateCombine(this.$2$1,o)},remove_updateResizerViews:function(o){this.$2$1=ss.delegateRemove(this.$2$1,o)},get_resizeInfo:function(){return this.$2$2},$0:function(o){this.$2$2=o},get_rowHeaderResizerVMs:function(){return this.$2$3},$1:function(o){this.$2$3=o},get_columnHeaderResizerVMs:function(){return this.$2$4},$2:function(o){this.$2$4=o},get_totalColumnHeadersHeight:function(){return this.get_resizeInfo().get_totalColumnHeadersHeight()},$3:function(){this.$5();this.$2$1()},$5:function(){if(ss.isNullOrUndefined(this.get_resizeInfo())){return}this.$1(null);if(this.get_resizeInfo().get_areRowHeadersWidthAdjustable()){this.$1(this.$4(this.get_resizeInfo().get_rowHeaders(),true))}this.$2(null);if(this.get_resizeInfo().get_areColHeadersHeightAdjustable()){this.$2(this.$4(this.get_resizeInfo().get_columnHeaders(),false))}},$4:function(o,p){var q=[];var r=0;var s=(p?this.get_resizeInfo().get_sheetHeight():this.get_resizeInfo().get_sheetWidth());for(var t=0;t<o.length;t++){var u=o[t];r+=(p?u.get_width():u.get_height());var v=(p?-k.getHeaderResizerMinimumRunDistance(u.get_width()):-k.getHeaderResizerMinimumRunDistance(u.get_height()));var w=new tab.ResizerViewModelParams(this.$6,r,s,p,v,2147483647);var x=new i(w,u);q.push(x)}return q}});var i=global.tab.HeaderResizerViewModel=ss.mkType(a,'tab.HeaderResizerViewModel',function(o,p){this.$6=null;n.call(this,o);this.$6=p},{get_cssClassName:function(){return(this.get_isXResizer()?'tab-tvRowHeaderResizer':'tab-tvColumnHeaderResizer')},sendResizeCommand:function(o){if(k.isSizeDifferenceOverThreshold(o)){var p=new tab.ResizeHeaderWebCmd;p.set_visualID(this.get_visualID());p.set_newSize(o+(this.get_isXResizer()?this.$6.get_width():this.$6.get_height()));p.set_isXAxis(!this.get_isXResizer());p.set_fieldName(this.$6.get_fieldName());p.set_uiBlocking('immediately');p.invoke()}}});var j=global.tab.ResizeHeadersModuleFactory=ss.mkType(a,'tab.ResizeHeadersModuleFactory',function(){},{newHeaderResizerManagerViewModel:function(o,p){return new h(o,p)},newHeaderResizerManager:function(o,p,q){return new g(o,p,q)},newAxisResizerManager:function(o,p){return new b(o,p)},newCellResizerManagerViewModel:function(o,p){return new e(o,p)},newCellResizerManager:function(o,p,q){return new d(o,p,q)}});var k=global.tab.ResizeHelpers=ss.mkType(a,'tab.ResizeHelpers',null,null,{getHeaderResizerMinimumRunDistance:function(o){return Math.max(0,o-20)},getAxisResizerMaximumRunDistance:function(o,p,q,r){return Math.max(0,(r?(ss.idiv(o,2)-10):Math.min(ss.idiv(o*3,4),ss.idiv(p*3,4)-q)))},getAxisResizerMinimumRunDistance:function(o){return Math.max(0,o-10)},isSizeDifferenceOverThreshold:function(o){return Math.abs(o)>1},appendResizerElementToDom:function(o,p){var q=o.clone().empty().removeClass().addClass('tab-tvRegionResizerContainer');o.parent().append(q);p.addToDom(q)},$0:function(o,p){var q=o.element.parent();if(o.addedToDom&&ss.isValue(q)){q.css('left',p.css('left'));q.css('width',p.css('width'))}},getAxisResizerCssClassName:function(o){switch(o){case'topaxis':{return'tab-tvXTopRegionResizer'}case'rightaxis':{return'tab-tvYRightRegionResizer'}case'bottomaxis':{return'tab-tvXBottomRegionResizer'}case'leftaxis':{return'tab-tvYLeftRegionResizer'}default:{return''}}}});var l=global.tab.ResizerTemplate=ss.mkType(a,'tab.ResizerTemplate',function(o){this.resizer=null;spiff.Template.call(this,$("<div class='"+o+"'><div class='"+'tab-tvResizerLine'+"'></div></div>"));this.resizer=this.getElementBySelector('.'+'tab-tvResizerLine')});var m=global.tab.ResizerView=ss.mkType(a,'tab.ResizerView',function(o){this.$e=null;this.$d=0;this.resizerObject=null;ss.makeGenericType(spiff.BaseView$1,[tab.IResizerViewModel]).call(this,o,new l(o.get_cssClassName()));this.resizerObject=this.get_template().domRoot;this.$c()},{get_resizeTemplate:function(){return this.get_template()},get_getPointWithinYRegion:function(){var o=this.resizerObject.position();var p=Math.floor(o.left);var q=o.top-this.get_viewModel().get_resizerOffset()+this.resizerObject.width();return{x:Math.floor(p),y:Math.floor(q)}},get_getPointWithinXRegion:function(){var o=this.resizerObject.position();var p=o.left-this.get_viewModel().get_resizerOffset()+this.resizerObject.height();var q=Math.floor(o.top);return{x:Math.floor(p),y:Math.floor(q)}},startDrag:function(o){this.$e=tab.DomUtil.getPageOffset$1(this.resizerObject);this.doOnStart(o);this.resizerObject.css('opacity','1');return new spiff.MoveDragInstance.$ctor1(this.resizerObject,ss.mkdel(this,this.$a),ss.mkdel(this,this.$9),ss.mkdel(this,this.$b),null)},acceptsDragType:function(){return 1},$a:function(o){this.doOnMove(o)},$9:function(o){this.doOnDrop(o);this.$b()},$b:function(){this.resizerObject.css('opacity','0');this.resizerObject.offset(this.$e)},$c:function(){if(this.get_viewModel().get_isXResizer()){this.resizerObject.css('top',this.get_viewModel().get_resizerOffset()+'px');this.resizerObject.height(this.get_viewModel().get_resizerLength())}else{this.resizerObject.css('left',this.get_viewModel().get_resizerOffset()+'px');this.resizerObject.width(this.get_viewModel().get_resizerLength())}},doOnStart:function(o){if(this.get_viewModel().get_isXResizer()){this.$d=tab.DoubleUtil.roundToInt(this.resizerObject.offset().left);this.updateResizerXPosition(o)}else{this.$d=tab.DoubleUtil.roundToInt(this.resizerObject.offset().top);this.updateResizerYPosition(o)}},doOnMove:function(o){if(this.get_viewModel().get_isXResizer()){this.updateResizerXPosition(o)}else{this.updateResizerYPosition(o)}},doOnDrop:function(o){var p=(this.get_viewModel().get_isXResizer()?this.calculateXSizeDifference(o):this.calculateYSizeDifference(o));this.get_viewModel().sendResizeCommand(p)},updateResizerYPosition:function(o){var p=this.$8(o);var q=o.pageY-ss.idiv(tab.DoubleUtil.roundToInt(this.resizerObject.height()),2);if(p<=this.get_viewModel().get_resizerMinimumOffset()){q=this.$d+this.get_viewModel().get_resizerMinimumOffset()}if(p>=this.get_viewModel().get_resizerMaximumOffset()){q=this.$d+this.get_viewModel().get_resizerMaximumOffset()}var r=this.resizerObject.offset();this.resizerObject.offset({left:r.left,top:q})},updateResizerXPosition:function(o){var p=this.$7(o);var q=o.pageX-ss.idiv(tab.DoubleUtil.roundToInt(this.resizerObject.width()),2);if(p<=this.get_viewModel().get_resizerMinimumOffset()){q=this.$d+this.get_viewModel().get_resizerMinimumOffset()}if(p>=this.get_viewModel().get_resizerMaximumOffset()){q=this.$d+this.get_viewModel().get_resizerMaximumOffset()}var r=this.resizerObject.offset();this.resizerObject.offset({left:q,top:r.top})},calculateYSizeDifference:function(o){var p=o.pageY-ss.idiv(tab.DoubleUtil.roundToInt(this.resizerObject.height()),2);var q=p-this.$d;var r=Math.min(Math.max(q,this.get_viewModel().get_resizerMinimumOffset()),this.get_viewModel().get_resizerMaximumOffset());return r},calculateXSizeDifference:function(o){var p=o.pageX-ss.idiv(tab.DoubleUtil.roundToInt(this.resizerObject.width()),2);var q=p-this.$d;var r=Math.min(Math.max(q,this.get_viewModel().get_resizerMinimumOffset()),this.get_viewModel().get_resizerMaximumOffset());return r},$8:function(o){var p=o.pageY;return p-this.$d},$7:function(o){var p=o.pageX;return p-this.$d}});var n=global.tab.ResizerViewModel=ss.mkType(a,'tab.ResizerViewModel',function(o){this.$2$1=null;this.$2$2=0;this.$2$3=0;this.$2$4=false;this.$2$5=0;this.$2$6=0;spiff.BaseViewModel.call(this);this.$0(o.visualId);this.$1(o.offset);this.$2(o.length);this.$3(o.isXResizer);this.$4(o.minimumOffset);this.$5(o.maximumOffset)},{get_visualID:function(){return this.$2$1},$0:function(o){this.$2$1=o},get_resizerOffset:function(){return this.$2$2},$1:function(o){this.$2$2=o},get_resizerLength:function(){return this.$2$3},$2:function(o){this.$2$3=o},get_isXResizer:function(){return this.$2$4},$3:function(o){this.$2$4=o},get_resizerMinimumOffset:function(){return this.$2$5},$4:function(o){this.$2$5=o},get_resizerMaximumOffset:function(){return this.$2$6},$5:function(o){this.$2$6=o},get_cssClassName:null,sendResizeCommand:null});ss.initClass(b,null,[tab.IAxisResizerManager,ss.IDisposable]);ss.initClass(n,spiff.BaseViewModel,[tab.IResizerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(c,n,[tab.IResizerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(d,null,[tab.ICellResizerManager,ss.IDisposable]);ss.initClass(e,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,tab.ICellResizerManagerViewModel]);ss.initClass(f,n,[tab.IResizerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(g,null,[tab.IHeaderResizerManager,ss.IDisposable]);ss.initClass(h,spiff.BaseViewModel,[tab.IHeaderResizerManagerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(i,n,[tab.IResizerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(j,null,[tab.IResizeHeadersModule]);ss.initClass(k);ss.initClass(l,spiff.Template,[ss.IDisposable]);ss.initClass(m,ss.makeGenericType(spiff.BaseView$1,[tab.IResizerViewModel]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IResizerViewModel]),ss.IDisposable,tab.IAppendableView]);(function(){d.scrollTimeout=500})()})();;
/*! BEGIN StoryModule */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlstory');var b=global.tab.FlipboardNavigatorExtensions=ss.mkType(a,'tab.FlipboardNavigatorExtensions',null,null,{getViewModelFromStoryId:function(y,z){return _.find(y,function(A){return A.get_storyPointId()===z})}});var c=global.tab.FlipboardNavigatorPointsTemplate=ss.mkType(a,'tab.FlipboardNavigatorPointsTemplate',function(){this.points=null;spiff.Template.call(this,$("<span class='tabFlipboardNavPoints'></span>"));this.points=this.domRoot});var d=global.tab.FlipboardNavigatorView=ss.mkType(a,'tab.FlipboardNavigatorView',function(y){this.$o=null;this.$q=null;this.$p=null;this.$s=0;this.$r=null;ss.makeGenericType(spiff.BaseView$1,[tab.IFlipboardNavigatorViewModel]).call(this,y,new tab.FlipboardNavigatorTemplate);this.$s=0;this.$m();this.$g();this.get_flipboardNavViewModel().add_zoneResized(ss.mkdel(this,this.handleResized));this.get_flipboardNavViewModel().add_zoneResized(ss.mkdel(this,this.$a));this.get_flipboardNavViewModel().add_activePointUpdated(ss.mkdel(this,this.handleActivePointUpdated));this.get_flipboardNavViewModel().add_remoteUpdateComplete(ss.mkdel(this,this.$c));this.get_flipboardNavViewModel().add_findParentScroller(ss.mkdel(this,function(){return this.get_dom().scroller}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_flipboardNavViewModel().remove_zoneResized(ss.mkdel(this,this.handleResized));this.get_flipboardNavViewModel().remove_zoneResized(ss.mkdel(this,this.$a));this.get_flipboardNavViewModel().remove_activePointUpdated(ss.mkdel(this,this.handleActivePointUpdated));this.get_flipboardNavViewModel().remove_remoteUpdateComplete(ss.mkdel(this,this.$c));this.get_flipboardNavViewModel().remove_findParentScroller(ss.mkdel(this,function(){return this.get_dom().scroller}));tab.StyleUtil.clearStyleSheet('appendedStoryStyle')})));this.$b()},{get_domRoot:function(){return this.get_template().domRoot},get_flipboardNavViewModel:function(){return this.get_viewModel()},get_storyPointCaptionViewModel:function(){return ss.getItem(this.get_flipboardNavViewModel().get_captions(),0)},get_dom:function(){return ss.cast(this.get_template(),tab.FlipboardNavigatorTemplate)},get_scrollingView:function(){return this.$p},$n:function(){var y=((this.get_flipboardNavViewModel().get_navType()==='arrowonly')?0:this.get_flipboardNavViewModel().get_currentPointIndex());return this.$o.points.children().get(y)},$b:function(){this.$o=new c;var y=new spiff.ScrollableViewModel.$ctor1(false);y.set_content(this.$o.domRoot[0]);y.set_scrollX(true);this.$q=y;this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.StyleUtil.clearStyleSheet('flipboardNavScroller');this.$q.dispose()})))},$m:function(){if(this.get_flipboardNavViewModel().get_useDarkIcons()){this.get_domRoot().addClass('tabDarkIcons')}else{this.get_domRoot().addClass('tabLightIcons')}var y=this.get_flipboardNavViewModel().get_scrollBarStyle();if(ss.isValue(y)){tab.StyleUtil.appendCSSRuleToStyleSheet$1('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar',{'background-color':y.bgRestColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar:hover',ss.mkdict(['background-color',y.bgActiveColor]));tab.StyleUtil.appendCSSRuleToStyleSheet$1('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar>.iScrollIndicator',{'background-color':y.defaultColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar>.iScrollIndicator:hover',{'background-color':y.color})}},$g:function(){var y=new spiff.Button(this.get_dom().previous);var z=ss.mkdel(this,function(){this.get_flipboardNavViewModel().clickPrevious()});y.add_click(z);this.disposables.add$1(y);this.disposables.add$1(new tab.CallOnDispose(function(){y.remove_click(z)}));var A=new spiff.Button(this.get_dom().next);var B=ss.mkdel(this,function(){this.get_flipboardNavViewModel().clickNext()});A.add_click(B);this.disposables.add$1(A);this.disposables.add$1(new tab.CallOnDispose(function(){A.remove_click(B)}))},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$p=spiff.ScrollableView.createScrollableView(this.$q);this.$p.addToDom(this.get_dom().scroller);this.$c()},$c:function(){this.get_dom().previous.toggle(this.get_flipboardNavViewModel().get_showArrows());this.get_dom().next.toggle(this.get_flipboardNavViewModel().get_showArrows());var y=this.get_dom().previous.add(this.get_dom().next);var z=this.get_flipboardNavViewModel().get_storyPointHeight();var A=z+20;this.$d();var B=tab.DoubleUtil.roundToInt(this.get_dom().previousArrow.height());var C=ss.idiv(z-B,2);var D;if(C<0){D=ss.mkdict(['padding-top','0px','padding-bottom','0px','margin-bottom',ss.idiv(this.$p.get_scrollbarBuffer(),2)+'px'])}else{D=ss.mkdict(['padding-top',C+'px','padding-bottom',C+'px','margin-bottom',this.$p.get_scrollbarBuffer()+'px'])}y.css(D);this.$j();if(ss.isValue(A)){this.get_dom().scroller.css('height',A+this.$p.get_scrollbarBuffer()+'px')}this.$e();this.$f(ss.mkdel(this,this.$l))},$d:function(){var y=this.get_dom().previous.add(this.get_dom().next);y.removeClass('ArrowLarge');y.removeClass('ArrowSmall');if(this.get_flipboardNavViewModel().get_navType()==='caption'){y.addClass('ArrowLarge')}else if(this.get_flipboardNavViewModel().get_navType()==='number'||this.get_flipboardNavViewModel().get_navType()==='arrowonly'||this.get_flipboardNavViewModel().get_navType()==='dot'){y.addClass('ArrowSmall')}},$j:function(){if(ss.isNullOrUndefined(this.get_storyPointCaptionViewModel())){return}var y={};var z={};var A={};var B={};var C={};if(ss.isValue(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle())){y=this.$h(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());A=this.$k(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());C=this.$i()}if(ss.isValue(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle())){z=this.$h(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle());B=this.$k(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle());if(Object.keys(C).length<=0){C=this.$i()}}tab.StyleUtil.clearStyleSheet('appendedStoryStyle');tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabFlipboardNavScroller .tabScroller .tabScrollerContent .tabFlipboardNavPoints .tabStoryPoint',C);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent',y);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption',z);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent',A);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent',B);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionTop,.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionBottom',y);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabStoryPointCaptionTop,.tabStoryPointCaption .tabStoryPointCaptionBottom',z);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabScroller .tabScrollerContent .tabStoryPointContent',A);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabScroller .tabScrollerContent .tabStoryPointContent',B);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().scrollBarStyle.bgRestColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().scrollBarStyle.bgRestColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().scrollBarStyle.defaultColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().scrollBarStyle.defaultColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().scrollBarStyle.color});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().scrollBarStyle.color})},$h:function(y){var z=false;if(ss.isValue(y.styledBox)){return tab.FormattingConverters.makeStyledBoxCssDict(y.styledBox,z)}else{return{}}},$k:function(y){if(ss.isValue(y.textStyle)){return tab.FormattingConverters.makeFormatStyleDict(y.textStyle,null)}else{return{}}},$i:function(){var y=150;var z=70;var A={};var B=z,C=y;if(ss.isValue(this.get_viewModel().get_storyPointHeight())){B=this.get_viewModel().get_storyPointHeight()}A.height=B+20+'px';if(ss.isValue(this.get_viewModel().get_storyPointWidth())){C=this.get_viewModel().get_storyPointWidth()}A.width=C+'px';return A},handleResized:function(){var y=tab.DoubleUtil.roundToInt(this.get_dom().domRoot.parent().width())-this.$8();var z=this.$o.points[0].clientWidth;this.get_dom().scroller.css(ss.mkdict(['width',Math.min(y,z)+'px']));this.$q.triggerRefresh()},$a:function(){this.get_viewModel().closeUberMenu()},$8:function(){return(this.get_flipboardNavViewModel().get_showArrows()?(tab.DoubleUtil.roundToInt(this.get_dom().previous.outerWidth(true))+tab.DoubleUtil.roundToInt(this.get_dom().next.outerWidth(true))):0)},handleActivePointUpdated:function(){this.$e();this.$f(ss.mkdel(this,this.$l))},$l:function(){var y=this.$n();if(ss.isNullOrUndefined(y)){return}var z=y.offsetLeft;var A=z+y.offsetWidth;var B=this.$p.get_scrollerX();var C=B+tab.DoubleUtil.roundToInt(this.get_dom().scroller.width());var D=50;if(A>C){var E=tab.DoubleUtil.roundToInt(this.get_dom().scroller.width())-y.offsetWidth-D;this.$p.scrollToElement(y,0,-E,0)}else if(z<B){this.$p.scrollToElement(y,0,-D,0)}this.get_dom().previous.toggleClass('tabDisabled',this.get_flipboardNavViewModel().get_previousDisabled());this.get_dom().next.toggleClass('tabDisabled',this.get_flipboardNavViewModel().get_nextDisabled())},$e:function(){this.$r=[];this.$9();this.$f(ss.mkdel(this,this.handleResized))},$9:function(){var y=this.get_template().getElementsBySelector('.tabStoryPoint');y.remove();var z=ss.getEnumerator(this.get_flipboardNavViewModel().get_captions());try{while(z.moveNext()){var A=z.current();if(A.get_shouldBeAdded()){this.$7(A)}}}finally{z.dispose()}},$7:function(y){var z=tab.ObjectRegistry.newDeferred(j).call(null,[y]);this.$r.push(z);z.done(ss.mkdel(this,function(A){A.addToDom(this.$o.points)}))},$f:function(y){$.when.apply(null,this.$r).done([y])}});var e=global.tab.FlipboardNavigatorViewModel=ss.mkType(a,'tab.FlipboardNavigatorViewModel',function(y){this.$f=null;this.$c=[];this.$e=false;this.$d=null;this.$b=null;this.$g=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;spiff.BaseViewModel.call(this);this.$f=y;this.$f.add_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav));this.$f.get_zone().get_zoneCommonModel().add_resizeZone(ss.mkdel(this,this.$4));this.$f.add_pointWasCaptured(ss.mkdel(this,this.handlePointWasCaptured));this.$f.add_navArrowVisibilityChanged(ss.mkdel(this,this.handleNavArrowVisibilityChanged));EventUtils.GlobalUIEvents.add_DismissTemporaryElements(ss.mkdel(this,this.hideUberMenuImmediately));w.$2(ss.mkdel(this,this.closeUberMenu));w.$4(ss.mkdel(this,this.handlePointWasCaptured));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav));this.$f.get_zone().get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.$4));this.$f.remove_pointWasCaptured(ss.mkdel(this,this.handlePointWasCaptured));this.$f.remove_navArrowVisibilityChanged(ss.mkdel(this,this.handleNavArrowVisibilityChanged));EventUtils.GlobalUIEvents.remove_DismissTemporaryElements(ss.mkdel(this,this.hideUberMenuImmediately));w.$3(ss.mkdel(this,this.closeUberMenu));w.$5(ss.mkdel(this,this.handlePointWasCaptured));this.$g.done(function(A){A.dispose()})})));this.$g=tab.ObjectRegistry.newDeferred(k).call(null,[]);this.$d=[];this.$b=[];this.$1();var z=null;z=ss.mkdel(this,function(){this.$a();tab.CommandController.get().remove_commandQueueComplete(z)});tab.CommandController.get().add_commandQueueComplete(z);tab.StartupUtils.callOnceAfterInitialBootstrap(ss.mkdel(this,this.$a))},{add_zoneResized:function(y){this.$2$1=ss.delegateCombine(this.$2$1,y)},remove_zoneResized:function(y){this.$2$1=ss.delegateRemove(this.$2$1,y)},add_activePointUpdated:function(y){this.$2$2=ss.delegateCombine(this.$2$2,y)},remove_activePointUpdated:function(y){this.$2$2=ss.delegateRemove(this.$2$2,y)},add_remoteUpdateComplete:function(y){this.$2$3=ss.delegateCombine(this.$2$3,y)},remove_remoteUpdateComplete:function(y){this.$2$3=ss.delegateRemove(this.$2$3,y)},add_flipboardNavigatorUpdated:function(y){this.$2$4=ss.delegateCombine(this.$2$4,y)},remove_flipboardNavigatorUpdated:function(y){this.$2$4=ss.delegateRemove(this.$2$4,y)},add_findParentScroller:function(y){this.$2$5=ss.delegateCombine(this.$2$5,y)},remove_findParentScroller:function(y){this.$2$5=ss.delegateRemove(this.$2$5,y)},get_handlingOfContextMenuEventsRequired:function(){if(!tsConfig.is_authoring||tab.ApplicationModel.get_instance().get_currentSheetType()!=='story'){return false}return tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_ContextMenus_StoryPoint')},get_currentPointIndex:function(){return this.$f.get_currentPointIndex()},get_numberOfPoints:function(){return this.$f.get_storyPoints().length},get_storyPointHeight:function(){return this.$f.get_height()},get_storyPointWidth:function(){return this.$f.get_width()},get_previousDisabled:function(){return this.get_currentPointIndex()<=0},get_nextDisabled:function(){return this.get_currentPointIndex()>=this.get_numberOfPoints()-1},get_showArrows:function(){return this.$f.get_flipboardNavPresModel().navArrowsVisible},get_captions:function(){return this.$c},get_useDarkIcons:function(){return this.$f.get_flipboardNavPresModel().flipboardNavStyle.useDarkIcons},get_scrollBarStyle:function(){return this.$f.get_flipboardNavPresModel().flipboardNavStyle.scrollBarStyle},get_navType:function(){return this.$f.get_navType()},get_currentStoryPointId:function(){return(ss.isValue(this.$f)?this.$f.get_storyPoints()[this.get_currentPointIndex()].storyPointId:0)},handleNewFlipboardNav:function(){if(ss.isValue(this.$2$2)){this.updatePoints();this.$2$2()}if(!this.$e){var y=tab.CommandController.get();var z=null;z=ss.mkdel(this,function(){y.remove_commandQueueComplete(z);this.$e=false;this.raiseActionEvent(this.$2$3);this.$5();this.$g.done(ss.mkdel(this,function(A){A.updatePoints(this.$c,this.get_currentStoryPointId())}))});y.add_commandQueueComplete(z);this.$e=true}},handlePointWasCaptured:function(y){var z=((this.get_navType()==='arrowonly')?this.get_currentStoryPointId():y);this.$d.push(z)},handleNavArrowVisibilityChanged:function(){this.closeUberMenu()},updatePoints:function(){this.$8();this.$1()},$5:function(){for(var y=0;y<this.$d.length;y++){var z=this.$d[y];this.$6(z)}},$6:function(y){var z=b.getViewModelFromStoryId(this.$c,y);if(ss.isValue(z)){z.notifyPointWasCaptured()}},$4:function(){this.closeUberMenu();this.raiseActionEvent(this.$2$1)},$8:function(){for(var y=this.$c.length-1;y>=0;y--){this.$7(y)}},$7:function(y){var z=this.$c[y];z.remove_pointUpdatedShown(ss.mkdel(this,this.clearUpdatedPoint));z.remove_showUberMenuForPoint(ss.mkdel(this,this.showUberMenu));z.remove_hideUberMenuForPoint(ss.mkdel(this,this.hideUberMenu));z.remove_closeUberMenu(ss.mkdel(this,this.closeUberMenu));z.remove_showUpdatedToastOnReload(ss.mkdel(this,this.handlePointWasCaptured));z.remove_findParentScroller(ss.mkdel(this,this.$3));z.dispose();ss.remove(this.$c,z);ss.removeAt(this.$b,y)},$1:function(){ss.clear(this.$b);for(var y=0;y<this.get_numberOfPoints();y++){var z=new v(this.$f,y);this.$0(z);this.$b.push(z.get_storyPointId())}},$0:function(y){y.add_pointUpdatedShown(ss.mkdel(this,this.clearUpdatedPoint));y.add_showUberMenuForPoint(ss.mkdel(this,this.showUberMenu));y.add_hideUberMenuForPoint(ss.mkdel(this,this.hideUberMenu));y.add_closeUberMenu(ss.mkdel(this,this.closeUberMenu));y.add_showUpdatedToastOnReload(ss.mkdel(this,this.handlePointWasCaptured));y.add_findParentScroller(ss.mkdel(this,this.$3));this.$c.push(y)},$3:function(){return(ss.isValue(this.$2$5())?this.$2$5():null)},clearUpdatedPoint:function(y){ss.remove(this.$d,y)},showUberMenu:function(y){this.$g.done(function(z){z.showUber(y)})},hideUberMenu:function(y){this.$g.done(function(z){z.hideUberWithTimeoutAndFade()})},hideUberMenuImmediately:function(){this.$g.done(function(y){y.hideUberWithFade()})},$a:function(){this.$g.done(ss.mkdel(this,function(y){y.updatePoints(this.$c,this.get_currentStoryPointId())}))},closeUberMenu:function(){this.$g.done(function(y){y.close()})},clickNext:function(){return this.$2(l.nextStoryPoint,this.get_nextDisabled())},clickPrevious:function(){return this.$2(l.previousStoryPoint,this.get_previousDisabled())},$2:function(y,z){var A=$.Deferred();if(z){A.resolve(this.get_currentPointIndex())}else{this.$9(A,ss.mkdel(this,function(){return y(this.$f)}))}this.closeUberMenu();return A.promise()},dispose:function(){this.$8();spiff.BaseViewModel.prototype.dispose.call(this)},$9:function(y,z){var A=ss.mkdel(this,function(){y.resolve(this.get_currentPointIndex())});var B=function(){y.reject(ss.unbox(ss.cast(arguments[0],ss.Int32)))};z().then(A,B)}});var f=global.tab.FlipboardTemplate=ss.mkType(a,'tab.FlipboardTemplate',function(){spiff.Template.call(this,$("<div class='tabFlipboard'></div>"))});var g=global.tab.FlipboardView=ss.mkType(a,'tab.FlipboardView',function(y){this.$8=null;ss.makeGenericType(spiff.BaseView$1,[h]).call(this,y,new f);this.$8=y;this.$8.add_newStoryPoint(ss.mkdel(this,this.handleNewStoryPoint));this.$8.get_parentZone().add_resizeZone(ss.mkdel(this,this.handleResizeZone));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.remove_newStoryPoint(ss.mkdel(this,this.handleNewStoryPoint));this.$8.get_parentZone().remove_resizeZone(ss.mkdel(this,this.handleResizeZone))})))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.$8.get_dashboardViewModel())){this.handleNewStoryPoint()}},handleNewStoryPoint:function(){var y={w:tab.DoubleUtil.roundToInt(this.element.width()),h:tab.DoubleUtil.roundToInt(this.element.height())};this.$8.get_dashboardViewModel().set_size(g.$0(tab.RecordCast.sizeAsSizePresModel(y),this.$8.get_dashboardViewModel().get_size()));this.$7();var z=tab.ObjectRegistry.newView(tab.DashboardView).call(null,[this.$8.get_dashboardViewModel()]);z.addToDom(this.get_template().domRoot)},handleResizeZone:function(){var y={w:this.$8.get_parentZone().get_contentWidth(),h:this.$8.get_parentZone().get_contentHeight()};this.$8.get_dashboardViewModel().set_size(g.$0(tab.RecordCast.sizeAsSizePresModel(y),this.$8.get_dashboardViewModel().dashboardModel.get_dashboardSize()));this.$7()},$7:function(){var y=this.$8.get_parentZone().get_contentWidth();var z=this.$8.get_parentZone().get_contentHeight();var A=this.$8.get_dashboardViewModel().dashboardModel.get_dashboardSize();if(A.w<=y&&A.h<=z+3){this.element.css('overflow','hidden')}else{this.element.css('overflow','auto')}}},{findFlipboard:function(){return $('.'+'tabFlipboard')},$0:function(y,z){var A=tab.SizePresModelUtils.unionPresModels(y,z);if(z.h>=y.h+3&&y.w-z.w>24){A.w-=24}if(z.w>=y.w&&y.h+3-z.h>24){A.h-=24}return A}});var h=global.tab.FlipboardViewModel=ss.mkType(a,'tab.FlipboardViewModel',function(y,z){this.$5=null;this.$6=null;this.$4=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$5=y;this.$6=z;this.$5.add_invalidateZone(ss.mkdel(this,this.$2));this.$5.get_storyPointModel().add_newStoryPoint(ss.mkdel(this,this.$1));this.$5.get_storyPointModel().add_dashboardDisposal(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_invalidateZone(ss.mkdel(this,this.$2));this.$5.get_storyPointModel().remove_newStoryPoint(ss.mkdel(this,this.$1));this.$5.get_storyPointModel().remove_dashboardDisposal(ss.mkdel(this,this.$0))})));if(ss.isValue(this.get_flipboardModel().get_dashboardModel())){this.$1()}},{add_newStoryPoint:function(y){this.$2$1=ss.delegateCombine(this.$2$1,y)},remove_newStoryPoint:function(y){this.$2$1=ss.delegateRemove(this.$2$1,y)},get_flipboardModel:function(){return this.$5},get_storyPointId:function(){return this.$5.get_storyPointModel().get_storyPointId()},get_dashboardViewModel:function(){return this.$4},$3:function(){return this.get_flipboardModel().get_dashboardModel().pm},get_parentZone:function(){return this.$6},$1:function(){this.$0();if(ss.isValue(this.$3())){this.$4=tab.DashboardViewModel.new$1(this.get_flipboardModel().get_dashboardModel());this.raiseActionEvent(this.$2$1)}tab.Application.handleAllFontsFound()},$2:function(){this.$6.forceZoneValidState(false)},dispose:function(){this.$0();spiff.BaseViewModel.prototype.dispose.call(this)},$0:function(){if(ss.isValue(this.get_dashboardViewModel())){this.$4.dispose();this.$4=null}}});var i=global.tab.IStoryNavigatorContentView=ss.mkType(a,'tab.IStoryNavigatorContentView');var j=global.tab.IStoryNavigatorPointView=ss.mkType(a,'tab.IStoryNavigatorPointView');var k=global.tab.IStoryUberPopupContainer=ss.mkType(a,'tab.IStoryUberPopupContainer');var l=global.tab.StoryClientCommands=ss.mkType(a,'tab.StoryClientCommands',null,null,{setActiveStoryPoint:function(y,z){var A=$.Deferred();if(!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()||z.get_currentPointIndex()===y){A.resolve();return A.promise()}var B=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();var C=z.get_storyPoints()[y].storyPointId;var D=new tab.ClientCommand('afterDelay',function(E){l.$n(C,z,E,B)},l.$0(z.get_storyPoints()[y].storyPointId,tsConfig.is_authoring),function(E){A.resolve(E)},function(E){A.reject(E)});tab.CommandController.SendCommand(D);return A.promise()},nextStoryPoint:function(y){var z=$.Deferred();if(!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()){z.reject("The workbook's current sheet is not a story");return z.promise()}var A=y.get_currentPointIndex()+1;var B=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();var C=l.$g(y,z,B,A);var D=y.get_storyPoints()[A].storyPointId;var E=new tab.ClientCommand('afterDelay',function(F){l.$n(D,y,F,B)},l.$7(tsConfig.is_authoring),function(F){z.resolve(F)},function(F){z.reject(F)});tab.CommandController.SendCommand(E);return C},previousStoryPoint:function(y){var z=$.Deferred();if(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook().get_storyboard())){z.reject("The workbook's current sheet is not a story");return z.promise()}var A=y.get_currentPointIndex()-1;var B=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();var C=l.$g(y,z,B,A);var D=y.get_storyPoints()[A].storyPointId;var E=new tab.ClientCommand('afterDelay',function(F){l.$n(D,y,F,B)},l.$8(tsConfig.is_authoring),function(F){z.resolve(F)},function(F){z.reject(F)});tab.CommandController.SendCommand(E);return C},revertStoryPoint:function(y,z){return l.$m(l.$l,l.$b(y,z),'none')},setFlipboardNavType:function(y){return l.$m(function(z){},l.$d(y),'none')},captureStoryPoint:function(y){return l.$m(function(z){},l.$1(y),'none')},newBlankStoryPoint:function(){return l.$m(function(y){},l.$6(),'none')},duplicateActiveStoryPoint:function(){return l.$m(function(y){},l.$3(),'none')},saveActiveStoryPointAsNew:function(){return l.$m(function(y){},l.$c(),'immediately')},toggleArrows:function(){return l.$m(function(y){},l.$f(),'none')},toggleShowStoryboardTitle:function(y){return l.$m(function(z){},l.$e(y),'immediately')},insertStoryPoint:function(y,z){return l.$m(function(A){},l.$5(y,z),'none')},replaceStoryPoint:function(y,z){return l.$m(function(A){},l.$a(y,z),'none')},reorderStoryPoint:function(y,z){return l.$m(function(A){},l.$9(y,z),'none')},deleteStoryPoint:function(y){return l.$m(function(z){},l.$2(y),'none')},editStoryPointCaption:function(y,z,A){return l.$m(function(B){l.$i(y,A,B)},l.$4(y,z),'none')},addNewTextZoneToStoryboard:function(){var y=new tab.AddObjectToDashboardCmd;y.set_dashboard(tsConfig.current_sheet_name);y.set_zoneType('text');y.set_isHorizontal(false);y.set_addAsFloating(true);y.set_uiBlocking('immediately');var z=y;return z.invoke()},$g:function(y,z,A,B){var C=z.promise();if(!tsConfig.is_authoring){var D=B+(B-y.get_currentPointIndex());if(D>=0&&D<y.get_flipboardNavPresModel().storypointNavItems.length){var E=y.get_flipboardNavPresModel().storypointNavItems[D].storyPointId;C=C.then(function(){_.defer(function(){l.$k(A,E)})},null)}}return C},$k:function(y,z){if(ss.isNullOrUndefined(tab.FlipboardModel.presModelCache)||tab.FlipboardModel.presModelCache.hasStoryPoint(z)){return}var A=tab.CommandUtils.newCommand({ns:'tabsrv',cmd:'get-storypoint'},null);var B={};B['storyboard']=tsConfig.current_sheet_name;B['storyPointId']=z;A.commandParams=B;var C=function(E){var F=E;if(ss.isValue(F)&&ss.isValue(F.dashboardPresModel)){tab.FlipboardModel.presModelCache.addStoryPoint(z,F)}};var D=tab.ClientCommand.createRemoteOnly(A,'none',C,null);tab.CommandController.SendCommand(D)},$l:function(y){l.$j(y)},$b:function(y,z){var A=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'revert-story-point'},null);A.commandParams={};tab.CommandUtils.addStoryPointToCommand(A.commandParams,y);A.commandParams['storyPointId']=z.toString();return A},$1:function(y){var z=l.$h({ns:'tabdoc',cmd:'capture-story-point'});z.commandParams['storyPointId']=y.toString();return z},$i:function(y,z,A){if(ss.isValue(z)){var B=z.get_storyPoints()[z.get_currentPointIndex()];var C=A.makeMutablePresModel(z,false);B=C.storypointNavItems[z.get_currentPointIndex()];B.storyPointCaption=y}},$n:function(y,z,A,B){if(ss.isValue(z)){var C=z.get_flipboardNavPresModel();var D=0;var E=false;var F=C.storypointNavItems;for(var G=0,H=F.length;G<H;G++){if(F[G].storyPointId===y){D=G;E=true;break}}if(E){C=A.makeMutablePresModel(z,false);C.currentStorypointIndex=D}}if(ss.isValue(B)&&!tsConfig.is_authoring&&ss.isValue(tab.FlipboardModel.presModelCache)&&tab.FlipboardModel.presModelCache.hasStoryPoint(y)){var I=tab.FlipboardModel.presModelCache.getStoryPoint(y);if(tab.ApplicationModel.get_instance().get_renderMode()!=='render-mode-client'){var J=A.makeMutablePresModel(tab.ApplicationModel.get_instance(),false);J.renderMode='render-mode-client'}var K=A.makeMutablePresModel(B,true);K.activeStoryPointId=y;K.storyPoints[y.toString()]=I;var L=A.makeMutablePresModel(tab.ApplicationModel.get_instance().get_dataDictionary(),false);L.dataSegments={};if(tab.FeatureParamsLookup.getBool(43)){tabBootstrap.MetricsController.logMetricsEvent$1('StoryCacheHit',32,null)}}else{l.$j(A)}},$0:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'set-active-story-point'});A.commandParams['storyPointId']=y.toString();A.commandParams['shouldAutoCapture']=(z?'true':'false');A.commandParams['shouldAutoRevert']=(z?'false':'true');return A},$7:function(y){var z=l.$h({ns:'tabdoc',cmd:'next-story-point'});z.commandParams['shouldAutoCapture']=(y?'true':'false');z.commandParams['shouldAutoRevert']=(y?'false':'true');return z},$8:function(y){var z=l.$h({ns:'tabdoc',cmd:'previous-story-point'});z.commandParams['shouldAutoCapture']=(y?'true':'false');z.commandParams['shouldAutoRevert']=(y?'false':'true');return z},$d:function(y){var z=l.$h({ns:'tabdoc',cmd:'set-flipboard-nav-type'});z.commandParams['flipboardNavType']=y;return z},$5:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'insert-story-point'});A.commandParams['currentStorypointIndex']=z;A.commandParams['storyPointBase']=y;return A},$a:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'replace-story-point'});A.commandParams['storyPointId']=z;A.commandParams['storyPointBase']=y;return A},$9:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'reorder-story-points'});A.commandParams['storyPointId']=y;A.commandParams['currentStorypointIndex']=z;return A},$2:function(y){var z=l.$h({ns:'tabdoc',cmd:'delete-story-point'});z.commandParams['storyPointId']=y;return z},$6:function(){return l.$h({ns:'tabdoc',cmd:'new-blank-story-point'})},$3:function(){return l.$h({ns:'tabdoc',cmd:'duplicate-active-story-point'})},$c:function(){return l.$h({ns:'tabdoc',cmd:'save-active-story-point-as-new'})},$f:function(){return l.$h({ns:'tabdoc',cmd:'toggle-storypoints-nav-arrows'})},$4:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'edit-story-point-caption'});A.commandParams['storyPointCaption']=y;A.commandParams['storyPointId']=z.toString();return A},$e:function(y){var z=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'show-storyboard-title'},null);var A={};A['dashboard']=y;z.commandParams=A;return z},$h:function(y){var z=tab.CommandUtils.newCommand(y,null);var A={};A['storyboard']=tsConfig.current_sheet_name;z.commandParams=A;return z},$j:function(y){var z=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();if(ss.isValue(z)){z.invalidated(y.modelUpdateContext)}},$m:function(y,z,A){var B=$.Deferred();var C=new tab.ClientCommand(A,y,z,function(D){B.resolve(D)},function(D){B.reject(D)});tab.CommandController.SendCommand(C);return B}});var m=global.tab.StoryFactory=ss.mkType(a,'tab.StoryFactory',function(){},{newFlipboardNavigatorViewModel:function(y){return new e(y)},newFlipboardViewModel:function(y,z){return new h(y,z)},newFlipboardNavigatorView:function(y){return tab.ObjectRegistry.newDeferred(tab.IFlipboardNavigatorView).call(null,[y])},newFlipboardView:function(y){return tab.ObjectRegistry.newView(g).call(null,[y])},insertStoryPoint:function(y,z){return l.insertStoryPoint(y,z)},replaceStoryPoint:function(y,z){return l.replaceStoryPoint(y,z)},fireCloseStoryUberMenu:function(){w.$0()},fireShowUpdateToast:function(y){w.$1(y)}});var n=global.tab.StoryHelperFunctions=ss.mkType(a,'tab.StoryHelperFunctions',null,null,{isTableauFontName:function(y){return ss.startsWithString(y.toUpperCase(),'TABLEAU')},shouldUseHackForArrowOnlyNavigator:function(y,z){return z==='arrowonly'&&n.isTableauFontName(y)}});var o=global.tab.StoryNavigatorContentViewFactory=ss.mkType(a,'tab.StoryNavigatorContentViewFactory',null,null,{createContentView:function(y){if(y.get_navType()==='dot'){return new q(y)}else if(y.get_navType()==='arrowonly'){var z=y.get_selectedStoryPointStyle().textStyle.fontName;if(n.shouldUseHackForArrowOnlyNavigator(z,y.get_navType())){return new r(y)}else{return new s(y)}}else{return new s(y)}}});var p=global.tab.StoryNavigatorPointView=ss.mkType(a,'tab.StoryNavigatorPointView',function(y){p.$ctor1.call(this,y,o.createContentView(y))},{get_domRoot:function(){return this.get_template().domRoot},get_contentTemplate:function(){return ss.cast(this.$k.get_rootTemplate(),t)},get_storyPointCaptionViewModel:function(){return this.get_viewModel()},get_storyNavigatorContentView:function(){return this.$k},get_captionTemplate:function(){return ss.cast(this.get_template(),u)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$b()},$b:function(){this.$k.addToDom(this.get_captionTemplate().caption);this.$k.styleCaption(this.get_captionTemplate());this.$c()},$e:function(){this.get_domRoot().toggleClass('tabFirstPoint',this.get_storyPointCaptionViewModel().get_isFirstPoint());this.get_domRoot().toggleClass('tabLastPoint',this.get_storyPointCaptionViewModel().get_isLastPoint())},$d:function(){this.$k.dispose();this.$k=o.createContentView(this.get_viewModel());this.$g();this.$k.addToDom(this.get_captionTemplate().caption);this.get_captionTemplate().caption.removeAttr('style');this.get_captionTemplate().caption.removeClass(q.circleClassName);this.get_captionTemplate().domRoot.removeClass(q.storyPointDotClassName);this.$k.styleCaption(this.get_captionTemplate())},$c:function(){if(this.get_viewModel().get_navType()!=='caption'){this.$7()}if(tsConfig.is_authoring){this.get_captionTemplate().revert.hide()}else{this.get_captionTemplate().revert.toggle(!this.get_storyPointCaptionViewModel().get_isCaptured())}this.get_captionTemplate().caption.toggleClass('tabCurrent',this.get_storyPointCaptionViewModel().get_isCurrentPoint());this.get_captionTemplate().caption.attr('data-tb-test-id','tabStoryPoint-'+this.get_storyPointCaptionViewModel().get_storyPointId().toString());this.$k.handleUpdatePoint()},$7:function(){var y=this.get_captionTemplate().revert.find('.tab-iconButton');var z=y.width();if(!tsConfig.is_authoring){var A=(this.get_viewModel().get_width()-z)/2;y.css('left',A+'px')}},$h:function(){this.$f();this.$j();this.$i()},$i:function(){var y=new EventUtils.EventHandleSpec;y.hover=ss.mkdel(this,this.$9);y.hoverDelay=0;var z=y;z.SetHandler('mouseleave',ss.mkdel(this,this.$a));this.disposables.add$1(new EventUtils.TableauEventHandler(this.get_captionTemplate().caption[0],z))},$9:function(y){this.get_viewModel().showUberMenu()},$a:function(){this.get_viewModel().hideUberMenu()},$f:function(){var y='touchstart click';this.get_captionTemplate().caption.on(y,ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_captionTemplate().caption.off(y,ss.mkdel(this,this.$8))})))},$j:function(){this.get_captionTemplate().revert.attr('title',tab.Strings.StoryPointRevertTooltip);this.$l=new spiff.IconButton;this.$l.setIcon('tabStoryRevertSmallIcon');this.get_captionTemplate().revert.append(this.$l.element);this.disposables.add$1(this.$l.onClick(ss.mkdel(this,function(y){this.get_storyPointCaptionViewModel().revertStoryPoint()})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.dispose()})))},$g:function(){this.$k.setupContent()},$8:function(y){spiff.EventUtil.stopEvent$2(y);this.get_storyPointCaptionViewModel().clickStoryPoint()}},{$ctor1:function(y,z){this.$k=null;this.$l=null;ss.makeGenericType(spiff.BaseView$1,[v]).call(this,y,new u);this.get_storyPointCaptionViewModel().add_updatePoint(ss.mkdel(this,this.$c));this.get_storyPointCaptionViewModel().add_flipboardNavTypeChanged(ss.mkdel(this,this.$b));this.get_storyPointCaptionViewModel().set_findCaptionDom(ss.mkdel(this,function(){return this.get_captionTemplate().caption}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_storyPointCaptionViewModel().remove_updatePoint(ss.mkdel(this,this.$c));this.get_storyPointCaptionViewModel().remove_flipboardNavTypeChanged(ss.mkdel(this,this.$b));this.get_storyPointCaptionViewModel().set_findCaptionDom(null);this.$k.dispose()})));this.$k=z;this.$e();this.$g();this.$h()}});var q=global.tab.StoryNavigatorShapeView=ss.mkType(a,'tab.StoryNavigatorShapeView',function(y){ss.makeGenericType(spiff.BaseView$1,[v]).call(this,y,new t)},{get_rootTemplate:function(){return this.get_template()},handleUpdatePoint:function(){},styleCaption:function(y){y.domRoot.addClass('tabFormatted');y.domRoot.addClass(q.storyPointDotClassName);y.caption.addClass(q.circleClassName);y.captionBottom.hide();y.captionTop.hide();var z=Math.floor(this.get_viewModel().get_width()*q.dotsScale);var A=Math.floor(this.get_viewModel().get_height()*q.dotsScale);y.caption.width(z+'px');y.caption.height(A+'px');var B=ss.round(y.caption.outerWidth()-y.caption.innerWidth());var C=this.get_viewModel().get_width()-z-B;var D=this.get_viewModel().get_height()-A;C=Math.max(ss.idiv(C,2),0);D=Math.max(ss.idiv(D,2),0);y.caption.css('left',C+'px');y.caption.css('top',D+ss.round(y.toolbar.outerHeight())+'px')},setupContent:function(){this.get_template().domRoot.text('')}});var r=global.tab.StoryNavigatorTableauFontVerticalCenteringHackView=ss.mkType(a,'tab.StoryNavigatorTableauFontVerticalCenteringHackView',function(y){s.call(this,y)},{setupContent:function(){this.constructStoryPointCaptionContentTemplate(this.get_viewModel());var y=new spiff.ScrollableViewModel;y.set_content(this.get_template().domRoot[0]);y.isCenteredVertically=true;y.set_scrollY(false);y.set_scrollX(false);this.scrollableViewModel=y;var z=this.get_viewModel().get_selectedStoryPointStyle().textStyle.fontSize;if(z>14){this.scrollableViewModel.get_content().style.marginTop='-9%'}else{var A=-(0.4677000045776367*z-0.5);this.scrollableViewModel.get_content().style.marginTop=A+'%'}this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.scrollableViewModel.dispose()})))}});var s=global.tab.StoryNavigatorTextView=ss.mkType(a,'tab.StoryNavigatorTextView',function(y){this.scrollableViewModel=null;this.scrollableView=null;ss.makeGenericType(spiff.BaseView$1,[v]).call(this,y,new t)},{get_rootTemplate:function(){return this.get_template()},addToDom:function(y){spiff.Widget.prototype.addToDom.call(this,y);this.scrollableView=spiff.ScrollableView.createScrollableView(this.scrollableViewModel);this.scrollableView.addToDom(y)},styleCaption:function(y){if(this.scrollableViewModel.get_hasCustomIndicator()){y.domRoot.addClass('tabFormatted');y.captionBottom.remove();y.captionTop.remove()}var z=ss.mkdict(['right',this.scrollableView.get_scrollbarBuffer()+'px']);y.captionTop.css(z);y.captionBottom.css(z)},handleUpdatePoint:function(){this.scrollableViewModel.triggerRefresh()},$7:function(){this.scrollableViewModel.triggerRefresh()},setupContent:function(){this.constructStoryPointCaptionContentTemplate(this.get_viewModel());var y=new spiff.ScrollableViewModel;y.set_content(this.get_template().domRoot[0]);y.isCenteredVertically=this.get_viewModel().get_isCenteredVertically();y.set_scrollY(this.get_viewModel().get_navType()!=='number'&&this.get_viewModel().get_navType()!=='arrowonly');y.set_scrollX(false);this.scrollableViewModel=y;this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.scrollableViewModel.dispose()})))},constructStoryPointCaptionContentTemplate:function(y){if(y.get_isCenteredHorizontally()){this.get_template().domRoot.addClass('centered')}this.get_template().domRoot.text(this.get_viewModel().get_caption())}});var t=global.tab.StoryPointCaptionContentTemplate=ss.mkType(a,'tab.StoryPointCaptionContentTemplate',function(){spiff.Template.call(this,$("<div class='tabStoryPointContent'></div>"))});var u=global.tab.StoryPointCaptionTemplate=ss.mkType(a,'tab.StoryPointCaptionTemplate',function(){this.caption=null;this.revert=null;this.update=null;this.updateTextButton=null;this.updateIconButton=null;this.delete$1=null;this.captionTop=null;this.captionBottom=null;this.toolbar=null;spiff.Template.call(this,$("<span class='tabStoryPoint'>\n<div class='tabStoryPointToolbar'>\n  <div class='tabStoryRevert'></div>  <div class='tabStoryUpdate'><div class='tabStoryUpdateTextButton'></div><div class='tabStoryUpdateIconButton'></div></div>\n  <div class='tabStoryDelete'></div></div>\n<div class='tabStoryPointCaption' data-tb-test-id=''><div class='tabStoryPointCaptionTop'></div><div class='tabStoryPointCaptionBottom'></div></div></span>"));this.caption=this.getElementBySelector('.tabStoryPointCaption');this.revert=this.getElementBySelector('.tabStoryRevert');this.toolbar=this.getElementBySelector('.tabStoryPointToolbar');this.captionTop=this.getElementBySelector('.tabStoryPointCaptionTop');this.captionBottom=this.getElementBySelector('.tabStoryPointCaptionBottom')});var v=global.tab.StoryPointViewModel=ss.mkType(a,'tab.StoryPointViewModel',function(y,z){this.$7=null;this.$8=0;this.$4=null;this.$5=null;this.$6=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=null;this.$2$11=null;spiff.BaseViewModel.call(this);this.$7=y;this.$8=z;this.$7.add_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav))})))},{add_updatePoint:function(y){this.$2$2=ss.delegateCombine(this.$2$2,y)},remove_updatePoint:function(y){this.$2$2=ss.delegateRemove(this.$2$2,y)},add_flipboardNavTypeChanged:function(y){this.$2$3=ss.delegateCombine(this.$2$3,y)},remove_flipboardNavTypeChanged:function(y){this.$2$3=ss.delegateRemove(this.$2$3,y)},add_pointCaptured:function(y){this.$2$4=ss.delegateCombine(this.$2$4,y)},remove_pointCaptured:function(y){this.$2$4=ss.delegateRemove(this.$2$4,y)},add_pointUpdatedShown:function(y){this.$2$5=ss.delegateCombine(this.$2$5,y)},remove_pointUpdatedShown:function(y){this.$2$5=ss.delegateRemove(this.$2$5,y)},add_showUberMenuForPoint:function(y){this.$2$6=ss.delegateCombine(this.$2$6,y)},remove_showUberMenuForPoint:function(y){this.$2$6=ss.delegateRemove(this.$2$6,y)},add_hideUberMenuForPoint:function(y){this.$2$7=ss.delegateCombine(this.$2$7,y)},remove_hideUberMenuForPoint:function(y){this.$2$7=ss.delegateRemove(this.$2$7,y)},add_closeUberMenu:function(y){this.$2$8=ss.delegateCombine(this.$2$8,y)},remove_closeUberMenu:function(y){this.$2$8=ss.delegateRemove(this.$2$8,y)},add_showUpdatedToastOnReload:function(y){this.$2$9=ss.delegateCombine(this.$2$9,y)},remove_showUpdatedToastOnReload:function(y){this.$2$9=ss.delegateRemove(this.$2$9,y)},add_updatedFlipboardStyles:function(y){this.$2$10=ss.delegateCombine(this.$2$10,y)},remove_updatedFlipboardStyles:function(y){this.$2$10=ss.delegateRemove(this.$2$10,y)},add_findParentScroller:function(y){this.$2$11=ss.delegateCombine(this.$2$11,y)},remove_findParentScroller:function(y){this.$2$11=ss.delegateRemove(this.$2$11,y)},$3:function(){return this.$7.get_storyPoints()[this.$8]},get_isCurrentPoint:function(){return this.$8===this.$7.get_currentPointIndex()},get_isCaptured:function(){return this.$3().isCaptured},get_caption:function(){var y=this.$3().storyPointCaption;return((ss.isNullOrEmptyString(y)&&tsConfig.is_authoring)?tab.Strings.StoryEmptyCaptionText:y)},get_authoringCaption:function(){return this.$3().storyPointCaption},get_storyPointId:function(){return this.$3().storyPointId},get_storyPointIndex:function(){return this.$8},set_StoryPointIndex:function(y){this.$8=y},get_isFirstPoint:function(){return this.get_storyPointIndex()===0},get_isLastPoint:function(){return this.$8===this.$7.get_storyPoints().length-1},get_isOnlyPoint:function(){return this.get_isFirstPoint()&&this.get_isLastPoint()},get_storyPointStyle:function(){if(this.get_isCurrentPoint()){return this.get_selectedStoryPointStyle()}else{return this.get_unselectedStoryPointStyle()}},get_selectedStoryPointStyle:function(){return this.$7.get_flipboardNavPresModel().selectedStoryPointStyle},get_unselectedStoryPointStyle:function(){return this.$7.get_flipboardNavPresModel().unselectedStoryPointStyle},get_width:function(){return this.$7.get_width()},get_height:function(){return this.$7.get_height()},get_isCenteredHorizontally:function(){return this.$7.get_navType()==='number'||this.$7.get_navType()==='arrowonly'},get_isCenteredVertically:function(){return this.$7.get_navType()==='number'||this.$7.get_navType()==='arrowonly'},get_navType:function(){return this.$7.get_navType()},get_isStoryEmpty:function(){return this.$7.get_isStoryEmpty()},get_findCaptionDom:function(){if(ss.staticEquals(this.$5,null)||ss.staticEquals(this.$2$11,null)){return function(){return null}}var y=this.$2$11();var z=this.$5();return ss.mkdel(this,function(){return this.determineCorrectCaptionDom(y,z)})},set_findCaptionDom:function(y){this.$5=y},determineCorrectCaptionDom:function(y,z){var A=this.$0(y,z);if(A.w<z.width()){this.$6=this.$1(A);y[0].appendChild(this.$6.get(0));return this.$6}return z},get_shouldBeAdded:function(){return this.get_navType()==='arrowonly'&&this.get_isCurrentPoint()||this.get_navType()!=='arrowonly'},handleNewFlipboardNav:function(){var y=this.get_navType()!==this.$4;if(y){this.raiseActionEvent(this.$2$3)}else{this.raiseActionEvent(this.$2$2)}this.$4=this.get_navType()},notifyPointWasCaptured:function(){this.raiseActionEvent(this.$2$4)},notifyPointUpdatedWasShown:function(){this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$5,this.get_storyPointId())},notifyFlipboardStylesUpdated:function(){this.raiseActionEvent(this.$2$10)},showUberMenu:function(){this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$6,this.get_storyPointId())},hideUberMenu:function(){this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$7,this.get_storyPointId())},closeUber:function(){this.raiseActionEvent(this.$2$8)},markPointUpdated:function(){this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$9,this.get_storyPointId())},clickStoryPoint:function(){return this.$2(ss.mkdel(this,function(){v.set_isAnyStoryPointLoading(true);return l.setActiveStoryPoint(this.$8,this.$7)}),this.get_isCurrentPoint()).then(function(y){v.set_isAnyStoryPointLoading(false);return y},null)},revertStoryPoint:function(){return this.$2(ss.mkdel(this,function(){return l.revertStoryPoint(tab.ModelUtils.findContentDashboard(null).get_sheetPath(),this.$3().storyPointId)}),this.get_isCaptured())},captureStoryPoint:function(){return this.$2(ss.mkdel(this,function(){return l.captureStoryPoint(this.get_storyPointId())}),this.get_isCaptured())},deleteStoryPoint:function(){tab.DashboardModel.handleStoryPointDeleted(this.get_storyPointId());return this.$2(ss.mkdel(this,function(){return l.deleteStoryPoint(this.get_storyPointId())}),false)},editStoryPointCaption:function(y){return this.$2(ss.mkdel(this,function(){return l.editStoryPointCaption(y,this.get_storyPointId(),this.$7)}),ss.compareStrings(this.get_caption(),y,false)===0)},$2:function(y,z){var A=$.Deferred();if(z){return A.resolve(this)}else{var B=ss.mkdel(this,function(){A.resolve(this)});var C=function(){A.reject(ss.cast(arguments[0],tab.IStoryPointCaptionViewModel))};var D=y();D.then(B,C)}return A.promise()},removeIntersectionCaption:function(){if(ss.isValue(this.$6)){this.$6.remove();this.$6=null}},$0:function(y,z){var A=y[0].getBoundingClientRect();var B=z[0].getBoundingClientRect();var C=Math.max(A.left,B.left);var D=Math.min(A.right,B.right);var E=D-C;var F=C-A.left;var G={x:F,y:B.top-A.top,w:E,h:B.height};return G},$1:function(y){var z=$("<div class='tabStoryPointIntersectionCaption'></div>");z.css({height:y.h+'px',top:y.y+'px',left:y.x+'px',width:y.w+'px'});return z}},{get_isAnyStoryPointLoading:function(){return v.$2$1},set_isAnyStoryPointLoading:function(y){v.$2$1=y}});var w=global.tab.StoryUIEvents=ss.mkType(a,'tab.StoryUIEvents',null,null,{$2:function(y){w.$1$1=ss.delegateCombine(w.$1$1,y)},$3:function(y){w.$1$1=ss.delegateRemove(w.$1$1,y)},$4:function(y){w.$1$2=ss.delegateCombine(w.$1$2,y)},$5:function(y){w.$1$2=ss.delegateRemove(w.$1$2,y)},$0:function(){if(!ss.staticEquals(w.$1$1,null)){w.$1$1()}},$1:function(y){if(!ss.staticEquals(w.$1$2,null)){w.$1$2(y)}}});var x=global.tab.ViewingUberPopupContainer=ss.mkType(a,'tab.ViewingUberPopupContainer',function(){this.$1$1=0;this.$1$2=0},{get_isShowing:function(){return false},get_isShowingWithHide:function(){return false},get_targetStoryPointId:function(){return 0},get_timeoutMs:function(){return this.$1$1},set_timeoutMs:function(y){this.$1$1=y},get_fadeMs:function(){return this.$1$2},set_fadeMs:function(y){this.$1$2=y},updatePoints:function(y,z){},showUber:function(y){},hideUberWithTimeoutAndFade:function(){},hideUberWithFade:function(){},showUberWithTimeoutAndFade:function(y){},close:function(){},dispose:function(){}});ss.initClass(b);ss.initClass(c,spiff.Template,[ss.IDisposable]);ss.initClass(d,ss.makeGenericType(spiff.BaseView$1,[tab.IFlipboardNavigatorViewModel]),[tab.IWidget,tab.IFlipboardNavigatorView,ss.makeGenericType(tab.IView$1,[tab.IFlipboardNavigatorViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(e,spiff.BaseViewModel,[tab.IFlipboardNavigatorViewModel,tab.IViewModel,ss.IDisposable,tab.ICanRequireHandlingOfContextMenuEvents]);ss.initClass(f,spiff.Template,[ss.IDisposable]);ss.initClass(g,ss.makeGenericType(spiff.BaseView$1,[h]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[h]),ss.IDisposable,tab.IAppendableView]);ss.initClass(h,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,tab.IFlipboardViewModel]);ss.initInterface(i,{get_rootTemplate:null,styleCaption:null,handleUpdatePoint:null,setupContent:null},[ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initInterface(j,{get_contentTemplate:null,get_captionTemplate:null,get_storyNavigatorContentView:null},[ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initInterface(k,{get_isShowing:null,get_isShowingWithHide:null,get_targetStoryPointId:null,get_timeoutMs:null,set_timeoutMs:null,get_fadeMs:null,set_fadeMs:null,updatePoints:null,showUber:null,hideUberWithTimeoutAndFade:null,hideUberWithFade:null,showUberWithTimeoutAndFade:null,close:null},[ss.IDisposable]);ss.initClass(l);ss.initClass(m,null,[tab.IStoryModule]);ss.initClass(n);ss.initClass(o);ss.initClass(p,ss.makeGenericType(spiff.BaseView$1,[v]),[tab.IWidget,j,ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);p.$ctor1.prototype=p.prototype;ss.initClass(q,ss.makeGenericType(spiff.BaseView$1,[v]),[tab.IWidget,i,ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initClass(s,ss.makeGenericType(spiff.BaseView$1,[v]),[tab.IWidget,i,ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initClass(r,s,[tab.IWidget,i,ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initClass(t,spiff.Template,[ss.IDisposable]);ss.initClass(u,spiff.Template,[ss.IDisposable]);ss.initClass(v,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,tab.IStoryPointCaptionViewModel]);ss.initClass(w);ss.initClass(x,null,[k,ss.IDisposable]);(function(){c.$0="<span class='tabFlipboardNavPoints'></span>"})();(function(){d.horizontalScrollerSelector='.tabFlipboardNavScroller '+'.iScrollHorizontalScrollbar';d.horizontalScrollerHoverSelector='.tabFlipboardNavScroller '+'.iScrollHorizontalScrollbar:hover';d.horizontalScrollerIndicatorSelector='.tabFlipboardNavScroller '+'.iScrollHorizontalScrollbar>.iScrollIndicator';d.horizontalScrollerIndicatorHoverSelector='.tabFlipboardNavScroller '+'.iScrollHorizontalScrollbar>.iScrollIndicator:hover';d.storyPointSelector='.tabFlipboardNavScroller '+'.tabScroller .tabScrollerContent .tabFlipboardNavPoints .tabStoryPoint';d.selectedStoryPointBoxSelector='.tabStoryPointCaption.tabCurrent';d.unselectedStoryPointBoxSelector='.tabStoryPointCaption';d.selectedStoryPointTextSelector='.tabStoryPointCaption.tabCurrent'+' .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent';d.unselectedStoryPointTextSelector='.tabStoryPointCaption'+' .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent';d.selectedStoryPointScrollbarSelector='.tabStoryPointCaption.tabCurrent'+' .tabCustomScroller .tabVerticalScrollbar';d.unselectedStoryPointScrollbarSelector='.tabStoryPointCaption'+' .tabCustomScroller .tabVerticalScrollbar';d.selectedStoryPointScrollbarIndicatorSelector='.tabStoryPointCaption.tabCurrent'+' .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator';d.unselectedStoryPointScrollbarIndicatorSelector='.tabStoryPointCaption'+' .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator';d.selectedStoryPointScrollbarIndicatorHoverSelector='.tabStoryPointCaption.tabCurrent'+' .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover';d.unselectedStoryPointScrollbarIndicatorHoverSelector='.tabStoryPointCaption'+' .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover';d.selectedStoryPointNativeScrollerTopBottomSelector='.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionTop,'+'.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionBottom';d.unselectedStoryPointNativeScrollerTopBottomSelector='.tabStoryPointCaption.tabStoryPointCaptionTop,'+'.tabStoryPointCaption .tabStoryPointCaptionBottom';d.selectedStoryPointNativeScrollerTextSelector='.tabStoryPointCaption.tabCurrent'+' .tabScroller .tabScrollerContent .tabStoryPointContent';d.unselectedStoryPointNativeScrollerTextSelector='.tabStoryPointCaption'+' .tabScroller .tabScrollerContent .tabStoryPointContent';d.storyStyleSheetId='appendedStoryStyle';tab.ObjectRegistry.registerDeferredType(tab.IFlipboardNavigatorView).call(null);if(!tsConfig.is_authoring){tab.ObjectRegistry.resolveDeferredType(tab.IFlipboardNavigatorView).call(null,d)}})();(function(){v.$2$1=false})();(function(){w.$1$1=null;w.$1$2=null})();(function(){f.$0="<div class='"+'tabFlipboard'+"'></div>"})();(function(){g.scrollBarThickness=24;g.additionalHeightForMarginsOfContent=3;tab.ObjectRegistry.registerType(g,g).call(null)})();(function(){t.$0="<div class='tabStoryPointContent'></div>"})();(function(){q.circleClassName='tabStoryPointCircle';q.storyPointDotClassName='tabStoryPointDot';q.dotsScale=0.75})();(function(){s.centeredClassName='centered';s.paddedClassName='padded'})();(function(){u.$0="<span class='tabStoryPoint'>\n"+"<div class='tabStoryPointToolbar'>\n"+"  <div class='tabStoryRevert'></div>"+"  <div class='tabStoryUpdate'><div class='tabStoryUpdateTextButton'></div><div class='tabStoryUpdateIconButton'></div></div>\n"+"  <div class='tabStoryDelete'></div>"+'</div>\n'+"<div class='tabStoryPointCaption' data-tb-test-id=''>"+"<div class='tabStoryPointCaptionTop'></div><div class='tabStoryPointCaptionBottom'></div>"+'</div></span>'})();(function(){p.centeredClassName='centered';p.buttonPixelBuffer=12;p.revertUpdateSpacing=4;p.storyPointTestIdPrefix='tabStoryPoint-';tab.ObjectRegistry.registerDeferredType(j).call(null);if(!tsConfig.is_authoring){tab.ObjectRegistry.resolveDeferredType(j).call(null,p)}})();(function(){tab.ObjectRegistry.registerDeferredType(k).call(null);if(!tsConfig.is_authoring){tab.ObjectRegistry.resolveDeferredType(k).call(null,x)}})()})();;
/*! BEGIN StoryAuthoring */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlstoryauthoring');var b=global.tab.AuthoringFlipboardNavigatorView=ss.mkType(a,'tab.AuthoringFlipboardNavigatorView',function(bb){this.$i=null;this.$f=0;this.$h=0;this.$g=0;this.$k=null;this.$j=null;ss.makeGenericType(spiff.BaseView$1,[tab.IFlipboardNavigatorViewModel]).call(this,bb,new c);this.$i=new tab.FlipboardNavigatorView(bb);this.$k=new t(ss.mkdel(this,this.$b),function(){},20);this.$j=new t(ss.mkdel(this,this.$a),function(){},20);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$8));EventUtils.DragDropManager.attachDropTarget(this.get_authoringNavTemplate().previousHoverTarget,this.$k);EventUtils.DragDropManager.attachDropTarget(this.get_authoringNavTemplate().nextHoverTarget,this.$j);bb.add_zoneResized(ss.mkdel(this,this.$e));bb.add_remoteUpdateComplete(ss.mkdel(this,this.$e));bb.add_activePointUpdated(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$8));EventUtils.DragDropManager.detachDropTarget(this.get_authoringNavTemplate().previousHoverTarget);EventUtils.DragDropManager.detachDropTarget(this.get_authoringNavTemplate().nextHoverTarget);bb.remove_zoneResized(ss.mkdel(this,this.$e));bb.remove_remoteUpdateComplete(ss.mkdel(this,this.$e));bb.remove_activePointUpdated(ss.mkdel(this,this.$c))})))},{get_dom:function(){return this.$i.get_dom()},get_domRoot:function(){return this.$i.get_domRoot()},get_authoringNavTemplate:function(){return this.get_template()},get_flipboardNavigatorViewModel:function(){return this.get_viewModel()},addToDom:function(bb){this.$i.addToDom(bb);this.$i.get_dom().domRoot.append(this.get_authoringNavTemplate().domRoot);this.$e()},$e:function(){this.get_authoringNavTemplate().nextHoverTarget.width(48);this.get_authoringNavTemplate().previousHoverTarget.width(48);this.get_authoringNavTemplate().nextHoverTarget.height(this.$i.get_viewModel().get_storyPointHeight());this.get_authoringNavTemplate().previousHoverTarget.height(this.$i.get_viewModel().get_storyPointHeight());var bb=this.$i.get_dom().scroller.width();var bc=this.$i.get_dom().previous.outerWidth();var bd=tab.DomUtil.getSizeFromCssPixelProperty(this.$i.get_dom().previous,'margin-right');var be=(this.get_flipboardNavigatorViewModel().get_showArrows()?(bc+bb+bd+'px'):(bb-4+'px'));var bf=(this.get_flipboardNavigatorViewModel().get_showArrows()?(bc+2*bd-48+'px'):(-48+4+'px'));var bg={top:20+'px',left:be};var bh={top:20+'px',left:bf};this.get_authoringNavTemplate().nextHoverTarget.css(bg);this.get_authoringNavTemplate().previousHoverTarget.css(bh)},$8:function(bb){if(!this.$d(bb)){return}EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$7));this.get_authoringNavTemplate().nextHoverTarget.show();this.get_authoringNavTemplate().previousHoverTarget.show();this.$f=tab.DomUtil.getSizeFromCssPixelProperty(this.$i.get_dom().next,'margin-left');this.$g=tab.DomUtil.getSizeFromCssPixelProperty(this.$i.get_dom().scroller,'left');if(this.$i.get_viewModel().get_showArrows()){var bc=this.$f-6;var bd=bc+'px';var be={'margin-left':bd};var bf={'margin-right':bd};this.$i.get_dom().next.css(be);this.$i.get_dom().previous.css(bf)}this.$h=this.$i.get_dom().scroller.width();this.$i.get_dom().scroller.width(this.$h+6*2);var bg={'padding-left':6+'px','padding-right':6+'px'};tab.StyleUtil.appendCSSRuleToStyleSheet$1('AuthoringFlipboardNavigatorStyleSheet','.tabFlipboardNavScroller .tabScroller.tabScrollerIScroll',bg)},$7:function(bb){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$7));this.get_authoringNavTemplate().nextHoverTarget.hide();this.get_authoringNavTemplate().previousHoverTarget.hide();tab.StyleUtil.clearStyleSheet('AuthoringFlipboardNavigatorStyleSheet');if(this.$i.get_viewModel().get_showArrows()){var bc={'margin-left':this.$f+'px'};var bd={'margin-right':this.$f+'px'};this.$i.get_dom().next.css(bc);this.$i.get_dom().previous.css(bd)}else{var be={left:tab.DoubleUtil.roundToInt(this.$g)+'px'};this.$i.get_dom().scroller.css(be)}this.$i.get_dom().scroller.width(this.$h)},$d:function(bb){return ss.isInstanceOfType(bb,U)||ss.isInstanceOfType(bb,tab.SheetDragInstance)},$b:function(){this.$9(true)},$a:function(){this.$9(false)},$9:function(bb){var bc=(bb?-6:6);var bd=Math.max(this.$i.get_scrollingView().get_scrollerX()+bc,0);bd=Math.min(bd,this.$i.get_scrollingView().get_viewModel().get_content().clientWidth-ss.trunc(this.$i.get_dom().scroller.width())+2*6);this.$i.get_scrollingView().scrollTo(bd,this.$i.get_scrollingView().get_scrollerY(),10,null)},$c:function(){this.$e()}});var c=global.tab.AuthoringFlipboardNavigatorViewTemplate=ss.mkType(a,'tab.AuthoringFlipboardNavigatorViewTemplate',function(){this.previousHoverTarget=null;this.nextHoverTarget=null;spiff.Template.call(this,$("<span class='tabFlipboardNavHoverTargetsContainer'><div class='tabPreviousHoverTarget'></div><div class='tabNextHoverTarget'></div></span>"));this.previousHoverTarget=this.getElementBySelector('.'+'tabPreviousHoverTarget');this.nextHoverTarget=this.getElementBySelector('.'+'tabNextHoverTarget');this.previousHoverTarget.hide();this.nextHoverTarget.hide()});var d=global.tab.AuthoringStoryboardTemplate=ss.mkType(a,'tab.AuthoringStoryboardTemplate',function(){spiff.Template.call(this,$(''))});var e=global.tab.AuthoringStoryboardView=ss.mkType(a,'tab.AuthoringStoryboardView',function(bb){this.$e=null;this.$g=null;this.$h=null;this.$d=null;this.$f='tabFlipboardDropHighlight';this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseView$1,[tab.IAuthoringStoryboardViewModel]).call(this,bb,spiff.Template.fromHtml(''));this.set_emptyFlipboardView(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[m,l,Object])).call(null,[this.get_authoringStoryboardViewModel().get_emptyFlipboardModel()]))},{get_authoringStoryboardViewModel:function(){return this.get_viewModel()},get_zoneSelection:function(){return this.$3$1},set_zoneSelection:function(bb){this.$3$1=bb},get_emptyFlipboardView:function(){return this.$3$2},set_emptyFlipboardView:function(bb){this.$3$2=bb},$c:function(){if(!this.get_authoringStoryboardViewModel().get_isZoneWidgetryEnabled()){return}this.set_zoneSelection(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.ZoneSelectionViewModel,tab.ZoneSelectionComponent,Object])).call(null,[this.get_authoringStoryboardViewModel().zoneSelection]));this.disposables.add$1(this.get_zoneSelection())},addToDom$1:function(){this.addToDom($(''))},$9:function(){ReactDOM.unmountComponentAtNode(this.get_emptyFlipboardView().get_rootElement()[0])},addToDom:function(bb){this.$9();this.$e=tab.FlipboardView.findFlipboard();this.get_emptyFlipboardView().addToDom(this.$e);this.$8();this.$c();this.$h=tab.WorkbookView.findDashboardContainer();this.get_zoneSelection().addToDom(this.$h)},$8:function(){this.$d=new H.$ctor1(ss.mkdel(this,this.$a),ss.mkdel(this,this.$7),ss.mkdel(this,this.$b));EventUtils.DragDropManager.attachDropTarget(this.$e,this.$d);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.detachDropTarget(this.$e)})))},$a:function(){return this.get_authoringStoryboardViewModel().get_emptyFlipboardModel().get_storyPointId()},$7:function(){if(this.get_emptyFlipboardView().get_viewModel().get_isCurrentStoryPointEmpty()){tab.FlipboardView.findFlipboard().addClass(this.$f)}else{if($('.replaceStoryTarget').length===0){this.$g=$("<div class='replaceStoryTarget'></div>");$(this.$e[0]).append(this.$g)}var bb=React.createElement(w,new x);ReactDOM.render(bb,this.$g[0])}},$b:function(){if(this.get_emptyFlipboardView().get_viewModel().get_isCurrentStoryPointEmpty()){tab.FlipboardView.findFlipboard().removeClass(this.$f)}else{ReactDOM.unmountComponentAtNode(this.$g[0]);this.$g.remove()}}});var f=global.tab.AuthoringStoryboardViewModel=ss.mkType(a,'tab.AuthoringStoryboardViewModel',function(bb){this.$4=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.zoneSelection=null;spiff.BaseViewModel.call(this);this.$4=bb;this.$0(new G(bb));this.$1(new J(bb));this.set_emptyFlipboardModel(new m(bb));this.$3()},{get_isZoneWidgetryEnabled:function(){return tabBootstrap.Affordances.isOn('zoneWidgetry')},get_leftPanelContentPaneViewModel:function(){return this.$2$1},$0:function(bb){this.$2$1=bb},get_leftPanelLayoutPaneViewModel:function(){return this.$2$2},$1:function(bb){this.$2$2=bb},get_emptyFlipboardModel:function(){return this.$2$3},set_emptyFlipboardModel:function(bb){this.$2$3=bb},$3:function(){this.zoneSelection=new tab.ZoneSelectionViewModel(this.$4,ss.mkdel(this,this.$2),null,false);this.disposables.add$1(this.zoneSelection)},$2:function(bb,bc){return false}});var g=global.tab.AuthoringUberPopupContainer=ss.mkType(a,'tab.AuthoringUberPopupContainer',function(){this.$a=null;this.$9=300;this.$7=600;this.$8=null;this.$1$1=0;this.fadeWindowId=null;this.timeoutWindowId=null;this.storyPointViewModels=null},{get_isShowing:function(){return ss.isValue(this.$a)},get_isShowingWithHide:function(){return ss.isValue(this.fadeWindowId)||ss.isValue(this.timeoutWindowId)},get_isLoaded:function(){return ss.isValue(this.storyPointViewModels)},get_targetStoryPointId:function(){return this.$1$1},$0:function(bb){this.$1$1=bb},get_timeoutMs:function(){return this.$9},set_timeoutMs:function(bb){this.$9=bb},get_fadeMs:function(){return this.$7},set_fadeMs:function(bb){this.$7=bb},$6:function(){if(!ss.isValue(this.$8)){return 120}return ss.unbox(this.$8)},updatePoints:function(bb,bc){this.storyPointViewModels=bb;var bd=this.$5(bc);if(!bd){this.$1()}},showUber:function(bb){if(this.get_isShowing()&&!this.get_isShowingWithHide()&&bb===this.get_targetStoryPointId()){return}else if(this.get_isShowingWithHide()&&bb===this.get_targetStoryPointId()){this.clearTimeouts();var bc=$('.'+'tabStoryUberMenuContainer');var bd={};bd['transition-duration']='0ms';bc.css(bd);bc.removeClass('tabFadeOut');return}if(this.get_isShowing()){this.$a.hide(false);this.$a.dispose()}this.clearTimeouts();var be=tab.FlipboardNavigatorExtensions.getViewModelFromStoryId(this.storyPointViewModels,bb);var bf=be.get_findCaptionDom()();if(ss.isNullOrUndefined(bf)){return}spiff.SpiffBrowserViewport.getViewport(this.$4(be,bf));this.$0(be.get_storyPointId())},$4:function(bb,bc){return ss.mkdel(this,function(bd){var be=bd.get_dimensions().l;var bf=be+bd.get_dimensions().w;var bg=bc[0].getBoundingClientRect();var bh=((bg.left<be)?be:bg.left);var bi=((bg.right>bf)?bf:bg.right);var bj=this.$6()/2;if(bh+bj<=bf||bi-bj>=bf){this.$a=this.$2(bc,bb);this.$a.add_hidden(function(){bb.removeIntersectionCaption()});this.$a.options.focusOnShown=false;this.$a.show();if(!ss.isValue(this.$8)){this.$8=$('.'+'tabStoryUberMenuContainer').width()}}})},$2:function(bb,bc){return spiff.UberPopupViewModel.createForContentUsingCaretStyle(new Z(bc),bb,'tabStoryUberMenuContainer',null,true)},hideUberWithTimeoutAndFade:function(){if(!this.get_isShowing()||this.get_isShowingWithHide()){return}this.timeoutWindowId=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.timeoutWindowId=tab.MiscUtil.clearTimeout(this.timeoutWindowId);this.hideUberWithFade()}),this.get_timeoutMs())},hideUberWithFade:function(){if(!this.get_isShowing()||this.get_isShowingWithHide()){return}this.fadeWindowId=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.clearTimeouts();this.$3()}),this.get_fadeMs());var bb=$('.'+'tabStoryUberMenuContainer');var bc={};bc['transition-duration']=this.get_fadeMs().toString()+'ms';bb.css(bc);bb.addClass('tabFadeOut')},showUberWithTimeoutAndFade:function(bb){this.showUber(bb);this.hideUberWithTimeoutAndFade()},close:function(){tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.clearTimeouts();this.$3()}),1)},dispose:function(){this.$3()},clearTimeouts:function(){this.fadeWindowId=tab.MiscUtil.clearTimeout(this.fadeWindowId);this.timeoutWindowId=tab.MiscUtil.clearTimeout(this.timeoutWindowId)},$3:function(){if(ss.isNullOrUndefined(this.$a)){return}this.$a.hide(false);this.$a.dispose();this.$a=null;this.clearTimeouts()},$1:function(){if(!this.get_isShowing()){return}var bb=this.get_targetStoryPointId();var bc=tab.FlipboardNavigatorExtensions.getViewModelFromStoryId(this.storyPointViewModels,bb);if(ss.isNullOrUndefined(bc)){this.close()}else if(this.get_isShowingWithHide()){this.showUberWithTimeoutAndFade(bb)}else if(bc.get_isCaptured()){this.hideUberWithFade()}else{this.showUber(bb)}},$5:function(bb){var bc=_.find(this.storyPointViewModels,function(bd){return!bd.get_isCaptured()&&bd.get_storyPointId()===bb});if(ss.isValue(bc)){this.showUber(bc.get_storyPointId());return true}return false}});var h=global.tab.CaptionResizeDragComponent=ss.mkType(a,'tab.CaptionResizeDragComponent',function(bb){this.$4=null;this.$5=null;spiff.PureRenderComponent.call(this,bb);this.$5=new Map;this.$5.set(3,ss.mkdel(this,function(bc){this.$0(bc,[3])}));this.$5.set(0,ss.mkdel(this,function(bc){this.$0(bc,[0])}));this.$5.set(1,ss.mkdel(this,function(bc){this.$0(bc,[1])}));this.$4=new Map;this.$4.set(h.$1,ss.mkdel(this,function(bc){this.$0(bc,h.$1)}));this.$4.set(h.$2,ss.mkdel(this,function(bc){this.$0(bc,h.$2)}))},{render:function(){var bb=this.$1();var bc={className:'captionResizeParent','data-tb-test-id':'captionResizeParent'};return spiff.DOMElements.div(bc,this.$3(bb,'tabZoneBottomResizer',3),this.$3(bb,'tabZoneRightResizer',1),this.$3(bb,'tabZoneLeftResizer',0),this.$2(bb,'tabZoneSWResizer',h.$2),this.$2(bb,'tabZoneSEResizer',h.$1))},$1:function(){var bb=this.props.captionRect;return{l:-ss.idiv(12,2),t:0,w:bb.w+12,h:bb.h+ss.idiv(12,2)}},$3:function(bb,bc,bd){return spiff.DOMElements.div({className:bc,style:tab.ZoneChromeConstants.getEdgeCss(bb,bd,12),ref:this.$5.get(bd)})},$2:function(bb,bc,bd){return spiff.DOMElements.div({className:bc,style:tab.ZoneChromeConstants.getCornerCss(bb,bd[0],bd[1],12),ref:this.$4.get(bd)})},$0:function(bb,bc){if(ss.isValue(bb)){var bd=$(bb);if(!EventUtils.DragDropManager.isDragSource(bd)){var be=this.props.resizeDragSourceFactory(bc);EventUtils.DragDropManager.attachDragSource(bd,be)}}}});var i=global.tab.CaptionResizeDragInstance=ss.mkType(a,'tab.CaptionResizeDragInstance',function(bb,bc,bd,be,bf){tab.FloatingResizeDragInstance.call(this,bb,bc,bd,be,bf)});var j=global.tab.CaptionResizeDragSource=ss.mkType(a,'tab.CaptionResizeDragSource',function(bb,bc,bd,be){this.$3=null;this.$4=null;this.$1=0;this.$2=0;this.$3=bb;this.$4=bc;this.$1=bd;this.$2=be},{startDrag:function(bb){var bc=new k(ss.mkdel(this,this.$0),this.$3,this.$4,this.$1,this.$2);return bc.startDrag(bb)},acceptsDragType:function(){return 1},$0:function(bb){return y.setStoryPointCaptionWidthAndFlipboardNavHeight(bb.h+31,bb.w)}});var k=global.tab.CaptionResizeViewModel=ss.mkType(a,'tab.CaptionResizeViewModel',function(bb,bc,bd,be,bf){tab.FloatingResizeViewModel.call(this,bb,bc,bd,be,bf)},{createDragIntance:function(bb){return new i($(bb.target),this,ss.mkdel(this,this.onMove),ss.mkdel(this,this.onDrop),null)}});var l=global.tab.EmptyFlipboardComponent=ss.mkType(a,'tab.EmptyFlipboardComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){if(ss.isNullOrEmptyString(this.props.emptyFlipboardTitle)||ss.isNullOrEmptyString(this.props.emptyFlipboardTitle)){return null}else{var bb=spiff.DOMElements.div({className:'tabEmptyFlipboardTitle'},this.props.emptyFlipboardTitle);var bc=spiff.DOMElements.div({className:'tabEmptyFlipboardSubtitle'},this.props.emptyFlipboardSubtitle);return spiff.DOMElements.div({className:'tabEmptyFlipboardMessage'},bb,bc)}}});var m=global.tab.EmptyFlipboardViewModel=ss.mkType(a,'tab.EmptyFlipboardViewModel',function(bb){this.$6=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$6=bb;this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,function(){if(ss.isValue(this.$6.get_model())){this.$3()}})).addEventBinding(ss.mkdel(this,function(bc){if(ss.isValue(bc.get_flipboard())){bc.get_flipboard().get_storyPointModel().add_newStoryPoint(ss.mkdel(this,this.$5));bc.get_flipboard().get_storyPointModel().add_newStoryContent(ss.mkdel(this,this.$4))}}),ss.mkdel(this,function(bc){if(ss.isValue(bc.get_flipboard())){bc.get_flipboard().get_storyPointModel().remove_newStoryPoint(ss.mkdel(this,this.$5));bc.get_flipboard().get_storyPointModel().remove_newStoryContent(ss.mkdel(this,this.$4))}})))},{get_isCurrentStoryPointEmpty:function(){var bb=this.$6.get_model();if(ss.isNullOrUndefined(bb)||ss.isNullOrUndefined(bb.get_flipboard())){return true}return ss.isNullOrEmptyString(bb.get_flipboard().get_storyPointModel().get_currentSheet())},get_storyPointId:function(){var bb=this.$6.get_model();if(ss.isNullOrUndefined(bb)||ss.isNullOrUndefined(bb.get_flipboard())){return 0}return bb.get_flipboard().get_storyPointModel().get_storyPointId()},get_isBackingSheetDashboard:function(){var bb=this.$6.get_model();return bb.get_flipboard().get_storyPointModel().get_isBackingSheetDashboard()},get_isBackingWorksheetEmpty:function(){var bb=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(bb)){return false}var bc=bb.get_vizDataModel();if(ss.isNullOrUndefined(bc)){return false}return bc.get_filterFields().length===0&&bc.get_fieldCaptions().length===0&&!bc.get_hasTupleIdColumn()},get_isBackingDashboardEmpty:function(){var bb=this.$6.get_model();var bc=bb.get_flipboard().get_dashboardModel().get_zoneModels();return ss.isNullOrUndefined(bc)||bc.length<=0},$3:function(){this.incrementProps()},$5:function(){this.incrementProps()},$4:function(){this.incrementProps()},createUpdatedProps:function(){if(this.get_isCurrentStoryPointEmpty()&&!this.$6.get_model().get_hasDescription()){return{emptyFlipboardTitle:tab.Strings.StoryEmptyFlipboardTitleBE,emptyFlipboardSubtitle:tab.Strings.StoryEmptyFlipboardSubtitleBE}}if(this.get_isCurrentStoryPointEmpty()&&!this.$6.get_model().get_hasDescription()){return{emptyFlipboardTitle:tab.Strings.StoryEmptyFlipboardTitle,emptyFlipboardSubtitle:tab.Strings.StoryEmptyFlipboardSubtitle}}if(!this.get_isCurrentStoryPointEmpty()&&!this.$6.get_model().get_hasDescription()&&!this.get_isBackingSheetDashboard()&&this.get_isBackingWorksheetEmpty()){return{emptyFlipboardTitle:tab.Strings.StoryEmptyWorksheetStoryPointTitle,emptyFlipboardSubtitle:tab.Strings.StoryEmptyWorksheetStoryPointSubtitle}}if(!this.get_isCurrentStoryPointEmpty()&&!this.$6.get_model().get_hasDescription()&&this.get_isBackingSheetDashboard()&&this.get_isBackingDashboardEmpty()){return{emptyFlipboardTitle:tab.Strings.StoryEmptyDashboardStoryPointTitle,emptyFlipboardSubtitle:tab.Strings.StoryEmptyDashboardStoryPointSubtitle}}return{emptyFlipboardTitle:null,emptyFlipboardSubtitle:null}}});var n=global.tab.FlipboardLocation=ss.mkEnum(a,'tab.FlipboardLocation',{top:0,bottom:1});var o=global.tab.FlipboardLocationComponent=ss.mkType(a,'tab.FlipboardLocationComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){var bb=[];for(var bc=0;bc<this.props.allowedLocations.length;bc++){var bd=this.props.allowedLocations[bc];bb.push({label:bd.label,value:bd.location,testId:bd.location.toString(),disabled:bd.location===1})}var be=_.map(this.props.allowedLocations,function(bh){return bh.location});var bf=React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,{checkedIndex:_.indexOf(be,this.props.currentLocation),buttonList:bb,handleChange:ss.mkdel(this,function(bh,bi){this.$0(bh)})});var bg=spiff.DOMElements.div({className:['tab-SectionContent','tab-FlipboardLocationSelectionScroller'].join(' ')},bf);return spiff.DOMElements.div({className:'tab-SectionContent'},this.renderTitle(),bg)},renderTitle:function(){return spiff.DOMElements.div({className:'tab-SectionTitle'},tab.Strings.StoryPointNavigatorLocationTitle)},$0:function(bb){}});var p=global.tab.FlipboardLocationViewModel=ss.mkType(a,'tab.FlipboardLocationViewModel',function(bb){this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=bb;this.disposables.add$1(this.$4.newDisposableContext().addModelChangedHandler(ss.mkdel(this,function(){if(ss.isValue(this.$4.get_model())){this.$3()}})))},{createInitialProps:function(){var bb=[{label:tab.Strings.StoryPointNavigatorLocationTop,location:0},{label:tab.Strings.StoryPointNavigatorLocationBottom,location:1}];return{allowedLocations:bb}},createUpdatedProps:function(){return{currentLocation:0}},$3:function(){var bb=this.$4.get_model().get_flipboardNavModel();if(ss.isValue(bb)){this.incrementProps()}}});var q=global.tab.FlipboardNavTypeComponent=ss.mkType(a,'tab.FlipboardNavTypeComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return spiff.DOMElements.div({className:'tab-SectionContent'},this.$2(),this.renderButtons())},renderButtons:function(){var bb=[];for(var bc=0;bc<this.props.flipboardNavTypes.length;bc++){var bd=this.props.flipboardNavTypes[bc];bb.push({label:bd.label,value:bd.navType,testId:'NavRadioButton'})}var be=_.map(this.props.flipboardNavTypes,function(bg){return bg.navType});var bf=React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,{checkedIndex:_.indexOf(be,this.props.currentNavType),buttonList:bb,handleChange:ss.mkdel(this,function(bg,bh){this.$0(bg)})});if(this.props.flipboardNavTypes.length===1){return this.$1()}else{return spiff.DOMElements.div({className:'tab-FlipboardNavSelectionGroup'},bf,this.$1())}},$1:function(){var bb=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.StoryPointNavigatorShowArrows,checked:this.props.arrowsVisible,handleChange:this.props.setArrowVisibility,testId:'ArrowVisibilityCheckbox',disabled:!this.props.toggleArrowVisibilityEnabled});return spiff.DOMElements.div({className:['tab-SectionContent','tab-FlipboardNavSelectionArrowsVisibility'].join(' ')},bb)},$2:function(){var bb=tab.DashboardLeftPaneConstants.createTitleHtmlAttr('navStyleTitle');bb.className=[bb.className,'tab-NavigatorStyleTitle'].join(' ');return spiff.DOMElements.div(bb,tab.Strings.StoryNavigatorStyle)},$0:function(bb){if(!ss.staticEquals(this.props.setFlipboardNavType,null)){var bc=bb;this.props.setFlipboardNavType(bc)}}});var r=global.tab.FlipboardNavTypeViewModel=ss.mkType(a,'tab.FlipboardNavTypeViewModel',function(bb){this.$8=null;this.$a=null;this.$9=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$a=bb;this.disposables.add$1(this.$a.newDisposableContext().addModelChangedHandler(ss.mkdel(this,function(){if(ss.isValue(this.$a.get_model())){this.$4(this.$a.get_model())}})).addEventBinding(ss.mkdel(this,function(bc){if(ss.isValue(bc.get_flipboardNavModel())){bc.get_flipboardNavModel().add_newFlipboardNav(ss.mkdel(this,this.$3))}}),ss.mkdel(this,function(bc){if(ss.isValue(bc.get_flipboardNavModel())){bc.get_flipboardNavModel().remove_newFlipboardNav(ss.mkdel(this,this.$3))}})))},{get_currentNavType:function(){return this.$8.get_navType()},get_toggleArrowVisibilityEnabled:function(){return ss.isValue(this.$8)&&this.$8.get_storyPoints().length>1&&this.$8.get_navType()!=='arrowonly'},$5:function(bb){if(ss.isNullOrUndefined(this.$8)||this.get_currentNavType()!==bb){return false}return true},$3:function(){this.incrementProps()},createInitialProps:function(){this.$9=[];this.$9.push({label:tab.Strings.StoryNavigatorTypeCaption,navType:'caption'});this.$9.push({label:tab.Strings.StoryNavigatorTypeNumber,navType:'number'});this.$9.push({label:tab.Strings.StoryNavigatorTypeDot,navType:'dot'});this.$9.push({label:tab.Strings.StoryNavigatorTypeArrowOnly,navType:'arrowonly'});return{setFlipboardNavType:ss.mkdel(this,this.$7),setArrowVisibility:ss.mkdel(this,this.$6),arrowsVisible:false,currentNavType:'caption',flipboardNavTypes:Array.prototype.slice.call(this.$9),toggleArrowVisibilityEnabled:this.get_toggleArrowVisibilityEnabled()}},createUpdatedProps:function(){if(ss.isNullOrUndefined(this.$8)){return{}}return{currentNavType:this.$8.get_navType(),arrowsVisible:this.$8.get_arrowVisibility(),toggleArrowVisibilityEnabled:this.get_toggleArrowVisibilityEnabled()}},$4:function(bb){var bc=bb.get_flipboardNavModel();if(ss.isValue(bc)){this.$8=bc;this.incrementProps()}},$7:function(bb){if(bb!==this.$8.get_navType()){tab.StoryClientCommands.setFlipboardNavType(bb).then(function(){C.logSetFlipboardNavTypeEvent(bb,true,false)},function(){C.logSetFlipboardNavTypeEvent(bb,false,false)})}else{C.logSetFlipboardNavTypeEvent(bb,false,true)}},$6:function(bb){if(bb!==this.$8.get_arrowVisibility()){tab.StoryClientCommands.toggleArrows().then(function(){C.logToggleArrowsEvent(bb,true,false)},function(){C.logToggleArrowsEvent(bb,false,false)})}else{C.logToggleArrowsEvent(bb,false,true)}}});var s=global.tab.IStoryNavigatorAuthoringContentView=ss.mkType(a,'tab.IStoryNavigatorAuthoringContentView');var t=global.tab.NavigatorArrowHoverHandler=ss.mkType(a,'tab.NavigatorArrowHoverHandler',function(bb,bc,bd){this.$3=null;this.$4=null;this.$2=0;this.$5=null;this.$3=bb;this.$4=bc;this.$2=bd},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(bb){if(!this.$1(bb)){return null}if(!ss.staticEquals(this.$3,null)){this.$3()}if(!ss.isValue(this.$5)){this.$5=tab.WindowHelper.setInterval(this.$3,this.$2)}return this},dragExit:function(bb){this.$0(bb)},acceptDrop:function(bb){this.$0(bb);var bc=$.Deferred();bc.resolve(false);return bc},getDropTarget:function(bb){return this},getDropCursor:function(bb){return spiff.CustomCursor.noOp},$1:function(bb){var bc=ss.safeCast(bb,tab.SheetDragInstance);var bd=ss.safeCast(bb,U);return ss.isValue(bc)||ss.isValue(bd)},$0:function(bb){if(!this.$1(bb)){return}this.$5=tab.MiscUtil.clearInterval(this.$5);if(!ss.staticEquals(this.$4,null)){this.$4()}}});var u=global.tab.NewStorypointComponent=ss.mkType(a,'tab.NewStorypointComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return spiff.DOMElements.div({className:['tab-SectionContent','tab-NewStoryPointContent'].join(' ')},this.$1(),this.$0())},$1:function(){return spiff.DOMElements.div({className:'tab-SectionTitle'},tab.Strings.StoryNewPointSectionTitle)},$0:function(){var bb=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(bd){this.props.handleNewPointClicked()}),buttonType:3,testId:'tab-NewBlankPointButton',key:'tab-NewBlankPointButton',children:tab.Strings.StoryContentPaneBlankButton,density:'high',style:{marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace,marginRight:SharedWidgets.TabStyles.Spacing.DefaultSpace}});var bc=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(bd){this.props.handleDuplicateClicked()}),buttonType:3,testId:'tab-DuplicatePointButton',key:'tab-DuplicatePointButton',children:tab.Strings.StoryContentPaneDuplicateButton,density:'high',style:{marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace},disabled:this.props.isStorypointEmpty});return spiff.DOMElements.div({className:'tabStoryPaneToggleButtons',style:{display:'flex',flexFlow:'wrap'}},bb,bc)}});var v=global.tab.NewStorypointViewModel=ss.mkType(a,'tab.NewStorypointViewModel',function(bb){this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.disposables.add$1(bb.newDisposableContext().addEventBinding(ss.mkdel(this,function(bc){this.$7=bc.get_flipboardNavModel();if(ss.isValue(this.$7)){this.$7.add_newFlipboardNav(ss.mkdel(this,this.incrementProps))}}),ss.mkdel(this,function(bc){if(ss.isValue(this.$7)){this.$7.remove_newFlipboardNav(ss.mkdel(this,this.incrementProps));this.$7=null}})))},{createUpdatedProps:function(){return{isStorypointEmpty:(ss.isNullOrUndefined(this.$7)?true:this.$7.get_isCurrentStoryPointEmpty()),handleNewPointClicked:ss.mkdel(this,this.$4),handleDuplicateClicked:ss.mkdel(this,this.$3),handleSaveAsNewPointClicked:ss.mkdel(this,this.$5)}},$4:function(){if(ss.isNullOrUndefined(this.$7)){return}this.$6();tab.StoryClientCommands.newBlankStoryPoint().then(function(){C.logNewStoryPointEvent(4,true)},function(){C.logNewStoryPointEvent(4,false)})},$3:function(){if(ss.isNullOrUndefined(this.$7)){return}this.$6();tab.StoryClientCommands.duplicateActiveStoryPoint().then(function(){C.logNewStoryPointEvent(5,true)},function(){C.logNewStoryPointEvent(5,false)})},$5:function(){if(ss.isNullOrUndefined(this.$7)){return}tab.StoryClientCommands.saveActiveStoryPointAsNew()},$6:function(){var bb=this.$7.get_storyPoints()[this.$7.get_currentPointIndex()];if(!bb.isCaptured){tab.ModuleManager.load$1(tab.IStoryModule).call(null,[]).done(function(bc){bc.fireShowUpdateToast(bb.storyPointId)})}}});var w=global.tab.ReplaceStoryFeedbackComponent=ss.mkType(a,'tab.ReplaceStoryFeedbackComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){var bb=spiff.DOMElements.div({className:'tabReplaceStoryFeedbackBackground'});var bc=spiff.DOMElements.div({className:'tabReplaceMessage'},tab.Strings.StoryReplaceMessage);return spiff.DOMElements.div({className:'tabReplaceStoryFeedbackWrapper'},bb,bc)}});var x=global.tab.ReplaceStoryFeedbackProps=ss.mkType(a,'tab.ReplaceStoryFeedbackProps',function(){});var y=global.tab.StoryAuthoringCommands=ss.mkType(a,'tab.StoryAuthoringCommands',null,null,{setStoryPointCaptionWidthAndFlipboardNavHeight:function(bb,bc){var bd=new tab.SetStoryPointCaptionWidthAndFlipboardNavHeightCmd;bd.set_storyboard(tsConfig.current_sheet_name);bd.set_height(bb);bd.set_width(bc);var be=bd;return be.invoke()}});var z=global.tab.StoryAuthoringFactory=ss.mkType(a,'tab.StoryAuthoringFactory',function(){tab.StoryFactory.call(this)},{newAuthoringStoryboardViewModel:function(bb){return new f(bb)}});var A=global.tab.StoryAuthoringFloatingTextZoneComponent=ss.mkType(a,'tab.StoryAuthoringFloatingTextZoneComponent',function(bb,bc){this.$2=null;spiff.PureRenderComponent.$ctor1.call(this,bb,bc);this.$2=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}))},{startDrag:function(bb){return this.props.createDragInstance()},acceptsDragType:function(){return 1},render:function(){var bb=this.$1();var bc=new EventUtils.EventHandleSpec;bc.doubleTap=ss.mkdel(this,this.$0);var bd=bc;return EventUtils.EventForwarder.div(bd,{ref:this.$2,className:'tabAddTextToStory'},bb)},$1:function(){return spiff.DOMElements.span({key:'newFloatingTextZone',children:tab.Strings.AddFloatingTextZoneInStoriesLabel,className:'tab-FloatingTextZone'})},$0:function(bb){if(!tsConfig.is_mobile){this.props.addTextZoneToStoryboard()}}});var B=global.tab.StoryAuthoringFloatingTextZoneViewModel=ss.mkType(a,'tab.StoryAuthoringFloatingTextZoneViewModel',function(){ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this)},{createInitialProps:function(){return{addTextZoneToStoryboard:ss.mkdel(this,this.$3),createDragInstance:ss.mkdel(this,this.$4)}},createUpdatedProps:function(){return{}},$3:function(){tab.StoryClientCommands.addNewTextZoneToStoryboard().done(function(bb){tab.RichTextClientCommands.launchTextObjectRichTextEditor(ss.unbox(bb.zoneId),true)})},$4:function(){var bb=tab.DashboardClientCommands.getSheetDragDropTargets(null,null);var bc=$.Deferred();bb.done(function(bf){bc.resolve(bf.zoneDragDrop)}).fail(function(){bc.reject()});var bd=tab.BaseDashboardObjectDragAvatarViewModel.createDeferredRect(bc);var be=tab.ZoneObjectDragInstance.create(new tab.DraggedZoneObject('text',false,true,'invalid',null,null),bc,bd);return be}});var C=global.tab.StoryAuthoringTelemetry=ss.mkType(a,'tab.StoryAuthoringTelemetry',null,null,{$0:function(){return tab.OnlineAnalyticsClient.get_telemetryEnabled()},logSetFlipboardNavTypeEvent:function(bb,bc,bd){if(!C.$0()){return}tab.OnlineAnalyticsClient.logEvent('StoryAuthoring.NavType',ss.mkdict(['NavStyle',bb.toString(),'Success',bc,'SameAsServer',bd]))},logUberMenuEvent:function(bb,bc){if(!C.$0()){return}tab.OnlineAnalyticsClient.logEvent('StoryAuthoring.UberMenu',ss.mkdict(['MenuItem',D.asString(bb),'Success',bc]))},logNewStoryPointEvent:function(bb,bc){if(!C.$0()){return}tab.OnlineAnalyticsClient.logEvent('StoryAuthoring.NewStoryPoint',ss.mkdict(['StoryPointType',D.asString(bb),'Success',bc]))},logToggleArrowsEvent:function(bb,bc,bd){if(!C.$0()){return}tab.OnlineAnalyticsClient.logEvent('StoryAuthoring.ToggleArrows',ss.mkdict(['Visible',bb,'Success',bc,'SameAsServer',bd]))}});var D=global.tab.StoryAuthoringTelemetryUtil=ss.mkType(a,'tab.StoryAuthoringTelemetryUtil',null,null,{asString:function(bb){var bc='';switch(bb){case 0:{bc='Delete';break}case 1:{bc='Revert';break}case 2:{bc='Update';break}case 3:{bc='Save as new point';break}case 4:{bc='Blank';break}case 5:{bc='Duplicate';break}default:{bc='';break}}return bc}});var E=global.tab.StoryContentLeftPaneConstants=ss.mkType(a,'tab.StoryContentLeftPaneConstants');var F=global.tab.StoryContentPaneComponent=ss.mkType(a,'tab.StoryContentPaneComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return spiff.DOMElements.div({className:'tab-StoryContentPane'},this.$2(),this.$3(),this.$1(),this.$5(),this.$4())},$2:function(){return spiff.DOMElements.div({className:['tab-Section','tab-NewStoryPoint'].join(' ')},React.createElement(u,this.props.newDuplicateButtonsProps))},$3:function(){var bb=React.createElement(tab.DashboardSheetListComponent,this.props.sheets);var bc=new EventUtils.EventHandleSpec;bc.tap=ss.mkdel(this,this.$0);var bd=bc;return EventUtils.EventForwarder.div(bd,{className:['tab-Section','tab-SectionSheetList'].join(' ')},spiff.DOMElements.div(tab.DashboardLeftPaneConstants.createTitleHtmlAttr('storySheetListTitle'),tab.Strings.AuthDashboardPaneSheets),spiff.DOMElements.div(tab.DashboardLeftPaneConstants.get_contentHTMLAttr(),bb))},$1:function(){return spiff.DOMElements.div({className:['tab-Section','tab-NewFloatingTextSection'].join(' ')},React.createElement(A,this.props.storyFloatingTextZoneProps))},$5:function(){return spiff.DOMElements.div({className:['tab-Section','tab-TitleToggleSection'].join(' ')},React.createElement(W,this.props.titleToggleProps))},$4:function(){var bb=React.createElement(tab.DashboardSizeComponent,this.props.storySizeProps);var bc=spiff.DOMElements.div({className:'tab-SectionTitle'},tab.Strings.AuthDashboardPaneSizeDefault);return spiff.DOMElements.div({className:['tab-Section','tab-StorySizeSelection'].join(' ')},bc,bb)},$0:function(bb){var bc=$(bb.target);var bd=bc.hasClass('tabAuthSheetListItem')||bc.parents('.'+'tabAuthSheetListItem').length>0;if(!bd){this.props.sheets.actions.clearSelection()}}});var G=global.tab.StoryContentPaneViewModel=ss.mkType(a,'tab.StoryContentPaneViewModel',function(bb){this.$8=null;this.$4=null;this.$6=null;this.$3=null;this.$7=null;this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);var bc=new tab.DashboardNewObjectsModel;var bd=new V(bb);this.$4=new tab.SheetListViewModel(bb,bc,bd);this.$3=new tab.DashboardSizeViewModel(bb);this.$6=new v(bb);this.$7=new X(bb);this.$5=new B;this.$8=bb;this.disposables.add$2([this.addChildViewModel(this.$4),this.addChildViewModel(this.$6),this.addChildViewModel(this.$3),this.$4,this.$6,this.$3]);this.disposables.add$2([this.addChildViewModel(this.$7),this.$7]);this.disposables.add$1(this.$8.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(be){be.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(be){be.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))})))},{get_title:function(){return tab.Strings.StoryContentPaneTitle},get_id:function(){return'story-content'},get_contentViewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[G,F,Object])},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthStoryContentPane'},createUpdatedProps:function(){return{sheets:this.$4.get_props(),newDuplicateButtonsProps:this.$6.get_props(),storySizeProps:this.$3.get_props(),titleToggleProps:this.$7.get_props(),storyFloatingTextZoneProps:this.$5.get_props()}}});var H=global.tab.StoryFlipboardDropHandler=ss.mkType(a,'tab.StoryFlipboardDropHandler',function(){this.$3=null;this.$2=null;this.$1=null},{get_feedbackType:function(){return'dropfeedbackuponentry'},acceptsDragType:function(){return 1},dragOver:function(bb){if(!this.isDragInstanceSupported(bb)){return null}if(!ss.staticEquals(this.$3,null)){this.$3();EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$0))}return this},dragExit:function(bb){if(!ss.staticEquals(this.$2,null)){this.$2()}},acceptDrop:function(bb){var bc=this.isDragInstanceSupported(bb);var bd=$.Deferred();bd.resolve(bc);if(bc){var be=ss.safeCast(bb,tab.SheetDragInstance);var bf=be.dragged.sheetName;tab.StoryClientCommands.replaceStoryPoint(bf,this.$1())}return bd},getDropTarget:function(bb){return this},getDropCursor:function(bb){return(this.isDragInstanceSupported(bb)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},isDragInstanceSupported:function(bb){var bc=ss.safeCast(bb,tab.SheetDragInstance);return ss.isValue(bc)},$0:function(bb){this.dragExit(bb.drag);EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$0))}},{$ctor1:function(bb,bc,bd){this.$3=null;this.$2=null;this.$1=null;this.$1=bb;this.$3=bc;this.$2=bd}});var I=global.tab.StoryLayoutPaneComponent=ss.mkType(a,'tab.StoryLayoutPaneComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return spiff.DOMElements.div({className:'tab-Section'},this.$1(),this.$0())},$1:function(){var bb=React.createElement(q,this.props.flipboardNavTypeProps);return spiff.DOMElements.div({className:['tab-SectionContent','tab-NavigatorTypeItemsContainer'].join(' ')},bb)},$0:function(){return spiff.DOMElements.div({})}});var J=global.tab.StoryLayoutPaneViewModel=ss.mkType(a,'tab.StoryLayoutPaneViewModel',function(bb){this.$3$1=null;this.$3$2=null;this.$3$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$8(new r(bb));this.$4(new tab.DashboardSizeViewModel(bb));this.$6(new p(bb));this.disposables.add$2([this.addChildViewModel(this.$7()),this.addChildViewModel(this.$5()),this.$7(),this.$5()])},{get_title:function(){return tab.Strings.AuthLeftLayoutPaneLabel},get_id:function(){return'story-layout'},get_contentViewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[J,I,Object])},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthStoryLayoutPane'},$7:function(){return this.$3$1},$8:function(bb){this.$3$1=bb},$3:function(){return this.$3$2},$4:function(bb){this.$3$2=bb},$5:function(){return this.$3$3},$6:function(bb){this.$3$3=bb},createUpdatedProps:function(){return{flipboardNavTypeProps:this.$7().get_props(),flipboardLocationProps:this.$5().get_props()}}});var K=global.tab.StoryNavigatorAuthoringContentViewFactory=ss.mkType(a,'tab.StoryNavigatorAuthoringContentViewFactory',null,null,{createContentView:function(bb){if(bb.get_navType()==='dot'){return new L(bb)}else{var bc=bb.get_selectedStoryPointStyle().textStyle.fontName;if(tab.StoryHelperFunctions.shouldUseHackForArrowOnlyNavigator(bc,bb.get_navType())){return new M(bb)}else{return new N(bb)}}}});var L=global.tab.StoryNavigatorAuthoringShapeView=ss.mkType(a,'tab.StoryNavigatorAuthoringShapeView',function(bb){tab.StoryNavigatorShapeView.call(this,bb)},{styleUpdateToast:function(bb){var bc=this.get_viewModel().get_width()*tab.StoryNavigatorShapeView.dotsScale+2*1;var bd=this.get_viewModel().get_height()*tab.StoryNavigatorShapeView.dotsScale+2*1;bb.capturedDeltaContainer.addClass('tabStoryPointDeltaCapturedDot');var be={width:bc+'px',height:bd+'px'};bb.capturedDeltaCentered.css(be);var bf={width:bc+'px',height:bd+'px'};bb.capturedDeltaContainer.css(bf)}});var M=global.tab.StoryNavigatorAuthoringTableauFontVerticalCenteringHackView=ss.mkType(a,'tab.StoryNavigatorAuthoringTableauFontVerticalCenteringHackView',function(bb){tab.StoryNavigatorTableauFontVerticalCenteringHackView.call(this,bb)},{styleUpdateToast:function(bb){R.styleUpdateToastForStoryNavigatorAuthoringTextView(bb,this.get_viewModel())}});var N=global.tab.StoryNavigatorAuthoringTextView=ss.mkType(a,'tab.StoryNavigatorAuthoringTextView',function(bb){tab.StoryNavigatorTextView.call(this,bb)},{styleUpdateToast:function(bb){R.styleUpdateToastForStoryNavigatorAuthoringTextView(bb,this.get_viewModel())}});var O=global.tab.StoryNavigatorBetweenPointDropHandler=ss.mkType(a,'tab.StoryNavigatorBetweenPointDropHandler',function(bb,bc,bd,be){this.$7=null;this.$4=false;this.$6=null;this.$5=null;this.$7=bb;this.$4=be;this.$6=bc;this.$5=bd},{$3:function(){return(this.$4?(this.$7.get_storyPointIndex()+1):this.$7.get_storyPointIndex())},get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(bb){if(!this.$0(bb)){return null}if(!ss.staticEquals(this.$6,null)){this.$6()}return this},dragExit:function(bb){if(!ss.staticEquals(this.$5,null)){this.$5()}},acceptDrop:function(bb){var bc={};var bd=this.$2(bb,bc);var be={};var bf=this.$1(bb,be);var bg=$.Deferred();bg.resolve(bf||bd);if(bd&&bc.$.get_viewModel().get_storyPointIndex()!==this.$3()&&bc.$.get_viewModel().get_storyPointIndex()+1!==this.$3()){tab.StoryClientCommands.reorderStoryPoint(bc.$.get_viewModel().get_storyPointId(),this.$3())}else if(bf){tab.StoryClientCommands.insertStoryPoint(be.$.dragged.sheetName,this.$3())}if(!ss.staticEquals(this.$5,null)){this.$5()}return bg},getDropTarget:function(bb){return this},getDropCursor:function(bb){return(this.$0(bb)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},$0:function(bb){var bc={};var bd={};return this.$2(bb,bc)||this.$1(bb,bd)},$2:function(bb,bc){bc.$=ss.safeCast(bb,U);return ss.isValue(bc.$)},$1:function(bb,bc){bc.$=ss.safeCast(bb,tab.SheetDragInstance);return ss.isValue(bc.$)}});var P=global.tab.StoryNavigatorPointAvatar=ss.mkType(a,'tab.StoryNavigatorPointAvatar',function(bb){this.$9=null;ss.makeGenericType(spiff.BaseView$1,[tab.StoryPointViewModel]).call(this,bb,new tab.StoryPointCaptionTemplate);this.$9=tab.StoryNavigatorContentViewFactory.createContentView(bb);this.$8();this.$9.addToDom(this.get_captionTemplate().caption);this.$9.styleCaption(this.get_captionTemplate());this.$7()},{get_captionTemplate:function(){return this.get_template()},$8:function(){this.$9.setupContent();this.get_captionTemplate().caption.width(this.get_viewModel().get_width());this.get_captionTemplate().caption.height(this.get_viewModel().get_height());var bb={overflow:'visible',margin:'0'};this.get_captionTemplate().domRoot.css(bb)},$7:function(){var bb=ss.idiv(-(this.get_viewModel().get_width()+2*1),2);var bc=ss.idiv(-(this.get_viewModel().get_height()+2*1),2);if(this.get_viewModel().get_navType()==='dot'){bb=ss.round(bb*tab.StoryNavigatorShapeView.dotsScale);bc=ss.round(bc*tab.StoryNavigatorShapeView.dotsScale)}var bd={left:bb+'px',top:bc+'px'};this.get_captionTemplate().caption.css(bd)}});var Q=global.tab.StoryPointCaptionEditorTemplate=ss.mkType(a,'tab.StoryPointCaptionEditorTemplate',function(){this.editorWrapper=null;this.floatingRightDropTarget=null;this.floatingLeftDropTarget=null;this.floatingCenterDropTarget=null;this.topBetweenArrow=null;this.capturedDeltaContainer=null;this.capturedDeltaMark=null;this.capturedDeltaCentered=null;spiff.Template.call(this,$("<span class='tabStoryPointEditing'><div class='tabStoryPointCaptionEditor'></div><div class='tabStoryNavigatorPointLeftDropTarget' data-tb-test-id='tabStoryNavigatorPointLeftDropTarget'></div><div class='tabStoryNavigatorPointCenterDropTarget'></div><div class='tabStoryNavigatorPointRightDropTarget' data-tb-test-id='tabStoryNavigatorPointRightDropTarget'></div><div class='tabStoryNavigatorTopBetweenArrow'></div><div class='tabStoryPointDeltaCapturedContainer'><div class='tabStoryPointDeltaCapturedCentered'><span class='tabStoryPointDeltaCapturedMark'></span></div></div><div class='tabStoryPointCaptionDragResize'></div></span>"));this.editorWrapper=this.getElementBySelector('.'+'tabStoryPointCaptionEditor');this.floatingRightDropTarget=this.getElementBySelector('.'+'tabStoryNavigatorPointRightDropTarget');this.floatingLeftDropTarget=this.getElementBySelector('.'+'tabStoryNavigatorPointLeftDropTarget');this.floatingCenterDropTarget=this.getElementBySelector('.'+'tabStoryNavigatorPointCenterDropTarget');this.topBetweenArrow=this.getElementBySelector('.'+'tabStoryNavigatorTopBetweenArrow');this.capturedDeltaContainer=this.getElementBySelector('.'+'tabStoryPointDeltaCapturedContainer');this.capturedDeltaCentered=this.getElementBySelector('.'+'tabStoryPointDeltaCapturedCentered');this.capturedDeltaMark=this.getElementBySelector('.'+'tabStoryPointDeltaCapturedMark');this.floatingLeftDropTarget.hide();this.floatingCenterDropTarget.hide();this.floatingRightDropTarget.hide()},{get_capturedDeltaTextWidth:function(){if(ss.isNullOrUndefined(Q.$3)||ss.Nullable$1.le(Q.$3,0)){var bb=this.capturedDeltaMark.text();this.capturedDeltaMark.text(tab.Strings.StoryNavigatorUpdated);Q.$3=tab.DoubleUtil.roundToInt(this.capturedDeltaMark.width());this.capturedDeltaMark.text(bb)}return ss.unbox(Q.$3)},get_capturedDeltaMarkWidth:function(){if(ss.isNullOrUndefined(Q.$2)||ss.Nullable$1.le(Q.$2,0)){var bb=$('<div></div>').addClass('tabStoryPointDeltaCapturedMark').addClass('checkmark');this.domRoot.append(bb);Q.$2=tab.DoubleUtil.roundToInt(bb.width());bb.remove()}return ss.unbox(Q.$2)}});var R=global.tab.StoryPointCaptionEditorTemplateExtensions=ss.mkType(a,'tab.StoryPointCaptionEditorTemplateExtensions',null,null,{styleUpdateToastForStoryNavigatorAuthoringTextView:function(bb,bc){var bd={width:bc.get_width()+'px'};bb.capturedDeltaCentered.css(bd);var be={width:bc.get_width()+'px',height:bc.get_height()+'px'};bb.capturedDeltaContainer.css(be)}});var S=global.tab.StoryPointCaptionEditorView=ss.mkType(a,'tab.StoryPointCaptionEditorView',function(bb){this.$A=null;this.$v=null;this.$x=null;this.$w=null;this.$B=null;this.$y=null;this.$u=null;this.$z=null;this.$3$1=false;ss.makeGenericType(spiff.BaseView$1,[tab.StoryPointViewModel]).call(this,bb,new Q);this.get_viewModel().add_pointCaptured(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_pointCaptured(ss.mkdel(this,this.$e));if(ss.isValue(this.$u)){this.$u=tab.MiscUtil.clearTimeout(this.$u)}if(ss.isValue(this.$z)){this.$z=tab.MiscUtil.clearTimeout(this.$z)}this.$A.dispose()})));this.$v=K.createContentView(bb);this.$A=new tab.StoryNavigatorPointView.$ctor1(bb,this.$v);this.$x=null;this.$l()},{$s:function(){return this.$3$1},$t:function(bb){this.$3$1=bb},get_contentTemplate:function(){return this.$A.get_contentTemplate()},get_captionTemplate:function(){return this.$A.get_captionTemplate()},get_storyNavigatorContentView:function(){return this.$A.get_storyNavigatorContentView()},get_editorWrapper:function(){return this.get_captionEditorTemplate().editorWrapper},get_captionEditorTemplate:function(){return this.get_template()},get_hasLeftDropTarget:function(){return this.get_viewModel().get_isFirstPoint()},get_isPlaceholderPoint:function(){return this.get_viewModel().get_isStoryEmpty()},get_leftAndRightDropTargetWidth:function(){return 0.2*this.get_viewModel().get_width()},addToDom:function(bb){this.$A.addToDom(bb);this.$h(tab.DoubleUtil.roundToInt(this.get_leftAndRightDropTargetWidth()));this.$8();this.get_captionTemplate().caption.append(this.get_template().domRoot);if(this.get_viewModel().get_navType()==='caption'){this.$k()}this.$f()},$k:function(){if(!this.get_viewModel().get_isCurrentPoint()){return}var bb=this.get_captionTemplate().caption.find('.'+'tabStoryPointCaptionDragResize');var bc=React.createElement(h,{captionRect:{l:0,t:0,w:this.get_viewModel().get_width(),h:this.get_viewModel().get_height()},resizeDragSourceFactory:ss.mkdel(this,this.createCaptionResizeDragSource)});ReactDOM.render(bc,bb[0])},createCaptionResizeDragSource:function(bb){var bc=tab.DashboardView.dashboardGeometry();return new j({x:0,y:0,h:this.get_viewModel().get_height(),w:this.get_viewModel().get_width()},bb,bc.h,bc.w)},$8:function(){if(this.get_viewModel().get_navType()==='arrowonly'){return}this.$w=new T.$ctor1(this.get_viewModel(),ss.mkdel(this,this.$7),ss.mkdel(this,this.$j));EventUtils.DragDropManager.attachDragSource(this.get_captionTemplate().caption,this.$w);EventUtils.DragDropManager.attachDropTarget(this.$A.get_captionTemplate().caption,this.$w);this.$B=new O(this.get_viewModel(),ss.mkdel(this,this.$q),ss.mkdel(this,this.$f),true);EventUtils.DragDropManager.attachDropTarget(this.get_captionEditorTemplate().floatingRightDropTarget,this.$B);if(this.get_hasLeftDropTarget()){this.$y=new O(this.get_viewModel(),ss.mkdel(this,this.$p),ss.mkdel(this,this.$f),false);EventUtils.DragDropManager.attachDropTarget(this.get_captionEditorTemplate().floatingLeftDropTarget,this.$y)}EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$d));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$d));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$b));EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingRightDropTarget);EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingLeftDropTarget);EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingCenterDropTarget);EventUtils.DragDropManager.detachDropTarget(this.$A.get_captionTemplate().caption)})))},$i:function(){if(ss.isNullOrUndefined(this.$w)){this.$8();return}EventUtils.DragDropManager.removeDragSource(this.get_captionTemplate().caption);EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingRightDropTarget);EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingLeftDropTarget);if(this.get_viewModel().get_navType()!=='arrowonly'&&!this.get_viewModel().get_isOnlyPoint()){EventUtils.DragDropManager.attachDragSource(this.get_captionTemplate().caption,this.$w);EventUtils.DragDropManager.attachDropTarget(this.get_captionEditorTemplate().floatingRightDropTarget,this.$B)}if(this.get_hasLeftDropTarget()){if(ss.isNullOrUndefined(this.$y)){this.$y=new O(this.get_viewModel(),ss.mkdel(this,this.$p),ss.mkdel(this,this.$f),false)}EventUtils.DragDropManager.attachDropTarget(this.get_captionEditorTemplate().floatingLeftDropTarget,this.$y)}},$q:function(){this.$m(true)},$p:function(){this.$m(false)},$m:function(bb){this.get_captionEditorTemplate().topBetweenArrow.show();var bc=-ss.idiv(tab.DoubleUtil.roundToInt(this.get_captionEditorTemplate().topBetweenArrow.width()),2);if(bb){bc+=this.get_viewModel().get_width()}var bd={left:bc+'px',top:'-14px'};this.get_captionEditorTemplate().topBetweenArrow.css(bd)},$f:function(){this.get_captionEditorTemplate().topBetweenArrow.hide()},$7:function(){if(this.get_isPlaceholderPoint()){this.get_captionTemplate().caption.addClass('tabStoryPointPlaceholderHighlight')}else{this.get_captionTemplate().caption.addClass('tabStoryPointHighlight')}},$j:function(){this.get_captionTemplate().caption.removeClass('tabStoryPointPlaceholderHighlight');this.get_captionTemplate().caption.removeClass('tabStoryPointHighlight')},$d:function(bb){if(this.get_hasLeftDropTarget()){this.get_captionEditorTemplate().floatingLeftDropTarget.show()}this.get_captionEditorTemplate().floatingCenterDropTarget.show();this.get_captionEditorTemplate().floatingRightDropTarget.show();var bc=ss.safeCast(bb,U);if(ss.isValue(bc)){this.$h(this.get_viewModel().get_width())}this.$c(bb)},$c:function(bb){if(!this.get_viewModel().get_isCurrentPoint()){return}var bc=ss.safeCast(bb,i);if(ss.isValue(bc)){var bd=this.get_captionTemplate().caption[0].getBoundingClientRect();var be=tab.DashboardView.dashboardGeometry();bc.viewModel.setOriginalRect({x:ss.trunc(bd.left)-be.l,y:ss.trunc(bd.top)-be.t,h:this.get_viewModel().get_height(),w:this.get_viewModel().get_width()});var bf=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[k,tab.FloatingResizeFeedbackComponent,Object])).call(null,[bc.viewModel]);var bg=tab.WorkbookView.findDashboardContainer();bf.get_rootElement().addClass('tab-dashDragDrop');bf.get_rootElement().css({left:tabBootstrap.VizLayoutConstants.get_authoringGutter().left+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()+'px',top:tabBootstrap.VizLayoutConstants.get_authoringGutter().top+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()+'px'});bf.addToDom(bg)}},$b:function(bb){this.$h(tab.DoubleUtil.roundToInt(this.get_leftAndRightDropTargetWidth()));this.get_captionEditorTemplate().floatingLeftDropTarget.hide();this.get_captionEditorTemplate().floatingCenterDropTarget.hide();this.get_captionEditorTemplate().floatingRightDropTarget.hide()},$h:function(bb){var bc=ss.idiv(bb,2);if(this.get_hasLeftDropTarget()){S.$0(this.get_captionEditorTemplate().floatingLeftDropTarget,-bc+1,bb+2,this.get_viewModel().get_height())}S.$0(this.get_captionEditorTemplate().floatingCenterDropTarget,bc,this.get_viewModel().get_width()-bb,this.get_viewModel().get_height());S.$0(this.get_captionEditorTemplate().floatingRightDropTarget,this.get_viewModel().get_width()-bc-1,bb+2,this.get_viewModel().get_height())},$l:function(){var bb=this.get_captionTemplate().caption;this.disposables.add$1(spiff.EventUtil.bindWithDispose(bb,'click',ss.mkdel(this,this.$9)));this.disposables.add$1(spiff.EventUtil.bindWithDispose(bb,'contextmenu',ss.mkdel(this,this.$a)))},$9:function(bb){if(!tab.StoryPointViewModel.get_isAnyStoryPointLoading()&&this.get_viewModel().get_isCurrentPoint()&&this.get_viewModel().get_navType()==='caption'){if(ss.isNullOrUndefined(this.$x)){this.$x=S.createEditor(this.get_captionEditorTemplate().editorWrapper[0],this.get_viewModel(),ss.mkdel(this,this.stopEditingCaption))}this.$o()}},$a:function(bb){if(!tabBootstrap.FeatureFlags.isEnabled('BEAuthoring_ContextMenus_StoryPoint')){return}if(!this.get_viewModel().get_isCurrentPoint()){return}if(this.$s()){bb.stopPropagation()}else{spiff.EventUtil.stopEvent$2(bb);this.get_viewModel().clickStoryPoint();this.$9(bb)}},$o:function(){this.get_captionEditorTemplate().editorWrapper.show();this.get_contentTemplate().domRoot.hide();this.$x.focus();EventUtils.DragDropManager.removeDragSource(this.get_captionTemplate().caption);this.$t(true)},$g:function(){this.get_captionEditorTemplate().editorWrapper.hide();this.get_contentTemplate().domRoot.show();EventUtils.DragDropManager.attachDragSource(this.get_captionTemplate().caption,this.$w);this.$t(false)},stopEditingCaption:function(){this.get_viewModel().editStoryPointCaption(this.$x.getValue());this.$g()},setCodeMirrorCaption:function(bb){this.$x.setValue(bb)},$e:function(){this.$v.styleUpdateToast(this.get_captionEditorTemplate());this.$r();this.$n()},$r:function(){this.get_captionEditorTemplate().capturedDeltaContainer.show();var bb=this.get_viewModel().get_width()-2*1;if(this.get_captionEditorTemplate().get_capturedDeltaTextWidth()<=bb){this.get_captionEditorTemplate().capturedDeltaMark.text(tab.Strings.StoryNavigatorUpdated);this.get_captionEditorTemplate().capturedDeltaMark.removeClass('checkmark')}if(this.get_captionEditorTemplate().get_capturedDeltaTextWidth()>bb&&this.get_captionEditorTemplate().get_capturedDeltaMarkWidth()<=bb){this.get_captionEditorTemplate().capturedDeltaMark.text('');this.get_captionEditorTemplate().capturedDeltaMark.addClass('checkmark')}else if(this.get_captionEditorTemplate().get_capturedDeltaMarkWidth()>bb){this.get_captionEditorTemplate().capturedDeltaMark.text('');this.get_captionEditorTemplate().capturedDeltaMark.removeClass('checkmark')}this.get_captionEditorTemplate().capturedDeltaContainer.hide()},$n:function(){this.get_captionEditorTemplate().capturedDeltaContainer.show().removeClass('fadeOut').addClass('fadeIn');this.$u=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.get_captionEditorTemplate().capturedDeltaContainer.removeClass('fadeIn').addClass('fadeOut');this.$u=tab.MiscUtil.clearTimeout(this.$u)}),900);this.$z=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.$z=tab.MiscUtil.clearTimeout(this.$z);this.get_viewModel().notifyPointUpdatedWasShown()}),500)}},{createEditor:function(bb,bc,bd){var be=ss.mkdict(['Enter',bd]);var bf=new Object;bf.lineWrapping=true;bf.dragDrop=true;bf.extraKeys=be;var bg=CodeMirror(bb,bf);S.styleEditor(bg,bc);bg.setValue(bc.get_authoringCaption());bg.setCursor(bg.lineCount(),0);bg.on('blur',bd);return bg},styleEditor:function(bb,bc){var bd=tab.FormattingConverters.makeFormatStyleDict(bc.get_storyPointStyle().textStyle,null);var be=$(bb.getWrapperElement());be.css(bd);var bf=11;be.height(bc.get_height()-bf)},$0:function(bb,bc,bd,be){var bf={left:bc+'px'};bb.css(bf);bb.width(bd);bb.height(be)}});var T=global.tab.StoryPointNavigatorDragDropHandler=ss.mkType(a,'tab.StoryPointNavigatorDragDropHandler',function(bb){this.$2=null;this.$1=null;this.$0=null;this.$2=bb},{get_feedbackType:function(){return'dropfeedbackuponentry'},startDrag:function(bb){return new U(this.$2,new P(this.$2))},acceptsDragType:function(){return 1},dragOver:function(bb){if(!this.isDragInstanceSupported(bb)){return null}if(!ss.staticEquals(this.$1,null)){this.$1()}return this},dragExit:function(bb){if(!ss.staticEquals(this.$0,null)){this.$0()}},acceptDrop:function(bb){var bc=this.isDragInstanceSupported(bb);var bd=$.Deferred();bd.resolve(bc);if(bc){var be=ss.safeCast(bb,tab.SheetDragInstance);var bf=be.dragged.sheetName;tab.StoryClientCommands.replaceStoryPoint(bf,this.$2.get_storyPointId())}this.dragExit(bb);return bd},getDropTarget:function(bb){return this},getDropCursor:function(bb){return(this.isDragInstanceSupported(bb)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},isDragInstanceSupported:function(bb){var bc=ss.safeCast(bb,tab.SheetDragInstance);return ss.isValue(bc)}},{$ctor1:function(bb,bc,bd){this.$2=null;this.$1=null;this.$0=null;this.$2=bb;this.$1=bc;this.$0=bd}});var U=global.tab.StoryPointNavigatorDragInstance=ss.mkType(a,'tab.StoryPointNavigatorDragInstance',function(bb,bc){this.$2$1=null;EventUtils.DragInstance.call(this,bb,bc);this.set_viewModel(bb)},{get_viewModel:function(){return this.$2$1},set_viewModel:function(bb){this.$2$1=bb},get_defaultDropCursor:function(){return spiff.CustomCursor.delete$1},dropToNowhereAction:function(){tab.StoryClientCommands.deleteStoryPoint(this.get_viewModel().get_storyPointId())}});var V=global.tab.StorySheetListActionHandler=ss.mkType(a,'tab.StorySheetListActionHandler',function(bb){this.$2=null;this.$3=null;this.$2=bb},{$1:function(){if(ss.isNullOrUndefined(this.$2.get_model())||ss.isNullOrUndefined(this.$2.get_model().sheetListModel)||ss.isNullOrUndefined(this.$2.get_model().get_flipboard())||ss.isNullOrUndefined(this.$2.get_model().get_flipboard().get_storyPointModel())){return null}var bb=this.$2.get_model().sheetListModel.get_sheets();var bc=this.$2.get_model().get_flipboard().get_storyPointModel().get_currentSheet();var bd=tab.SheetListViewModel.findSheetListItemByName(bb,bc);return(ss.isValue(bd)?bd.pm:null)},getSelectedSheet:function(bb){if(!this.$0()){return null}return bb},determineSelectedSheet:function(bb,bc){if(!this.$0()){return null}if(ss.isNullOrUndefined(bc)){return this.$1()}else{return bc}},onUpdatedSheetList:function(bb){if(!this.$0()){return null}return this.$1()},onNewFlipboardNav:function(bb){if(!this.$0()){return null}return this.$1()},onActiveZoneChanged:function(bb){if(!this.$0()){return null}return bb},onDoubleClicked:function(bb,bc){if(!this.$0()){return}tab.ModuleManager.load$1(tab.IStoryAuthoringModule).call(null,[]).done(ss.mkdel(this,function(bd){if(this.$2.get_model().get_flipboard().get_isEmpty()){bd.replaceStoryPoint(bb.name,this.$2.get_model().get_flipboard().get_storyPointModel().get_storyPointId())}else{bd.insertStoryPoint(bb.name,-1)}}))},getDragInstance:function(bb){var bc=false;if(ss.isValue(this.$3)){bc=this.$3.get_addNewZoneAsFloating()}var bd=$.Deferred();var be=tab.SheetDragInstance.create(new tab.DraggedSheetItem(bb.name,bc),null,bd);return be},$0:function(){return tab.ApplicationModel.get_instance().get_currentSheetType()==='story'}},{$ctor1:function(bb,bc){this.$2=null;this.$3=null;this.$2=bb;this.$3=bc}});var W=global.tab.StoryTitleToggleComponent=ss.mkType(a,'tab.StoryTitleToggleComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return this.$0()},$0:function(){var bb=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.StoryContentShowTitles,checked:this.props.isTitleVisible,handleChange:this.props.updateTitleVisibility,testId:'tab-showTitles',key:'showTitles',disabled:false});var bc=spiff.DOMElements.div({className:'tab-ShowTitleCheckbox'},bb);return spiff.DOMElements.div({className:['tab-SectionContent','tab-Checkbox'].join(' ')},bc)}});var X=global.tab.StoryTitleToggleViewModel=ss.mkType(a,'tab.StoryTitleToggleViewModel',function(bb){this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=bb;this.disposables.add$1(this.$4.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(bc){bc.add_titleVisibilityChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(bc){bc.remove_titleVisibilityChanged(ss.mkdel(this,this.incrementProps))})))},{createInitialProps:function(){return{isTitleVisible:true,updateTitleVisibility:ss.mkdel(this,this.$3)}},createUpdatedProps:function(){if(ss.isValue(this.$4)&&ss.isValue(this.$4.get_model())){return{isTitleVisible:this.$4.get_model().get_isTitleVisible()}}return null},$3:function(bb){if(ss.isValue(this.$4)&&ss.isValue(this.$4.get_model())&&this.$4.get_model().get_isTitleVisible()!==bb){tab.StoryClientCommands.toggleShowStoryboardTitle(this.$4.get_model().get_sheetName())}}});var Y=global.tab.StoryUberMenuComponent=ss.mkType(a,'tab.StoryUberMenuComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return EventUtils.EventForwarder.div(new EventUtils.EventHandleSpec,{className:'tabStoryUberMenuButtons',onMouseLeave:ss.mkdel(this,this.$6),onMouseEnter:ss.mkdel(this,this.$5)},this.$0(),this.$1(),this.$3(),this.$2())},$3:function(){if(this.props.isUpdateEnabled){return Y.$0('tabStoryUpdateBtn','tabStoryUpdateIcon',tab.Strings.StoryPointUpdateButton,ss.mkdel(this,this.$9))}else{return Y.$1('tabStoryUpdateBtn','tabStoryUpdateIcon')}},$0:function(){if(this.props.isDeleteEnabled){return Y.$0('tabStoryDeleteBtn','tabStoryDeleteIcon',tab.Strings.StoryPointDeleteTooltip,ss.mkdel(this,this.$4))}else{return Y.$1('tabStoryDeleteBtn','tabStoryDeleteIcon')}},$1:function(){if(this.props.isRevertEnabled){return Y.$0('tabStoryRevertBtn','tabStoryRevertIcon',tab.Strings.StoryPointRevertTooltip,ss.mkdel(this,this.$7))}else{return Y.$1('tabStoryRevertBtn','tabStoryRevertIcon')}},$2:function(){if(this.props.isSaveAsNewEnabled){return Y.$0('tabStorySaveAsNewBtn','tabStorySaveAsNewIcon',tab.Strings.StoryPointSaveAsNewTooltip,ss.mkdel(this,this.$8))}else{return Y.$1('tabStorySaveAsNewBtn','tabStorySaveAsNewIcon')}},$9:function(bb){this.props.handleUpdate()},$4:function(bb){this.props.handleDelete()},$7:function(bb){this.props.handleRevert()},$8:function(bb){this.props.handleSaveAsNew()},$6:function(bb){if(!ss.staticEquals(this.props.hideUber,null)){this.props.hideUber()}},$5:function(bb){if(!ss.staticEquals(this.props.showUber,null)){this.props.showUber()}}},{$1:function(bb,bc){var bd=spiff.DOMElements.div({className:bc});return spiff.DOMElements.div({className:bb+' disabled',key:bb},bd)},$0:function(bb,bc,bd,be){var bf=new Object;bf.customClassName=bb;bf.iconClassName=bc;bf.key=bb;bf.onTap=be;bf.disabled=false;bf.title=bd;var bg=bf;return React.createElement(spiff.IconButtonComponent,bg)}});var Z=global.tab.StoryUberMenuViewModel=ss.mkType(a,'tab.StoryUberMenuViewModel',function(bb){this.$3$1=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_storyPointViewModel(bb)},{get_viewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[Z,Y,Object])},get_viewModel:function(){return this},get_storyPointViewModel:function(){return this.$3$1},set_storyPointViewModel:function(bb){this.$3$1=bb},get_storyPointId:function(){return this.get_storyPointViewModel().get_storyPointId()},updateUberPopupViewModel:function(bb){},disposeViewModel:function(){this.dispose()},createHostView:function(){return tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[Z,Y,Object])).call(null,[this])},createInitialProps:function(){return{handleDelete:ss.mkdel(this,this.$3),handleRevert:ss.mkdel(this,this.$4),handleUpdate:ss.mkdel(this,this.$6),handleSaveAsNew:ss.mkdel(this,this.$5),hideUber:ss.mkdel(this,this.$7),showUber:ss.mkdel(this,this.$a)}},createUpdatedProps:function(){return{isDeleteEnabled:!this.get_storyPointViewModel().get_isStoryEmpty(),isRevertEnabled:!this.get_storyPointViewModel().get_isCaptured(),isUpdateEnabled:!this.get_storyPointViewModel().get_isCaptured(),isSaveAsNewEnabled:!this.get_storyPointViewModel().get_isCaptured()&&this.get_storyPointViewModel().get_isCurrentPoint()}},$3:function(){if(this.get_props().isDeleteEnabled){this.get_storyPointViewModel().deleteStoryPoint().then(function(){C.logUberMenuEvent(0,true)},function(){C.logUberMenuEvent(0,false)});this.$8()}},$4:function(){if(this.get_props().isRevertEnabled){tab.StoryClientCommands.revertStoryPoint(tab.ModelUtils.findContentDashboard(null).get_sheetPath(),this.get_storyPointId()).then(function(){C.logUberMenuEvent(1,true)},function(){C.logUberMenuEvent(1,false)})}},$6:function(){if(this.get_props().isUpdateEnabled){this.get_storyPointViewModel().markPointUpdated();tab.StoryClientCommands.captureStoryPoint(this.get_storyPointId()).then(function(){C.logUberMenuEvent(2,true)},function(){C.logUberMenuEvent(2,false)})}},$5:function(){if(this.get_props().isSaveAsNewEnabled){tab.StoryClientCommands.saveActiveStoryPointAsNew().then(function(){C.logUberMenuEvent(3,true)},function(){C.logUberMenuEvent(3,false)});this.$8()}},$9:function(){this.incrementProps()},$7:function(){this.get_storyPointViewModel().hideUberMenu()},$8:function(){this.get_storyPointViewModel().closeUber()},$a:function(){this.get_storyPointViewModel().showUberMenu()}});var ba=global.tab.TelemetryEvent=ss.mkEnum(a,'tab.TelemetryEvent',{delete$1:0,revert:1,update:2,saveAsNew:3,blankStoryPoint:4,duplicateStoryPoint:5});ss.initClass(b,ss.makeGenericType(spiff.BaseView$1,[tab.IFlipboardNavigatorViewModel]),[tab.IWidget,tab.IFlipboardNavigatorView,ss.makeGenericType(tab.IView$1,[tab.IFlipboardNavigatorViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(c,spiff.Template,[ss.IDisposable]);ss.initClass(d,spiff.Template,[ss.IDisposable]);ss.initClass(e,ss.makeGenericType(spiff.BaseView$1,[tab.IAuthoringStoryboardViewModel]),[tab.IWidget,tab.IAuthoringStoryboardView,ss.makeGenericType(tab.IView$1,[tab.IAuthoringStoryboardViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(f,spiff.BaseViewModel,[tab.IAuthoringStoryboardViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(g,null,[tab.IStoryUberPopupContainer,ss.IDisposable]);ss.initClass(h,spiff.PureRenderComponent);ss.initClass(i,tab.FloatingResizeDragInstance);ss.initClass(j);ss.initClass(k,tab.FloatingResizeViewModel,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(l,spiff.PureRenderComponent);ss.initClass(m,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(o,spiff.PureRenderComponent);ss.initClass(p,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(q,spiff.PureRenderComponent);ss.initClass(r,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initInterface(s,{styleUpdateToast:null},[tab.IStoryNavigatorContentView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(t);ss.initClass(u,spiff.PureRenderComponent);ss.initClass(v,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(w,spiff.PureRenderComponent);ss.initClass(x);ss.initClass(y);ss.initClass(z,tab.StoryFactory,[tab.IStoryAuthoringModule,tab.IStoryModule]);ss.initClass(A,spiff.PureRenderComponent);ss.initClass(B,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(C);ss.initClass(D);ss.initClass(E);ss.initClass(F,spiff.PureRenderComponent);ss.initClass(G,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),tab.IStoryContentPaneViewModel,tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(H);H.$ctor1.prototype=H.prototype;ss.initClass(I,spiff.PureRenderComponent);ss.initClass(J,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),tab.IStoryLayoutPaneViewModel,tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(K);ss.initClass(L,tab.StoryNavigatorShapeView,[tab.IWidget,s,tab.IStoryNavigatorContentView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(M,tab.StoryNavigatorTableauFontVerticalCenteringHackView,[tab.IWidget,s,tab.IStoryNavigatorContentView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(N,tab.StoryNavigatorTextView,[tab.IWidget,s,tab.IStoryNavigatorContentView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(O);ss.initClass(P,ss.makeGenericType(spiff.BaseView$1,[tab.StoryPointViewModel]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(Q,spiff.Template,[ss.IDisposable]);ss.initClass(R);ss.initClass(S,ss.makeGenericType(spiff.BaseView$1,[tab.StoryPointViewModel]),[tab.IWidget,tab.IStoryNavigatorPointView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(T);T.$ctor1.prototype=T.prototype;ss.initClass(U,EventUtils.DragInstance);ss.initClass(V,null,[tab.ISheetListActionHandler]);V.$ctor1.prototype=V.prototype;ss.initClass(W,spiff.PureRenderComponent);ss.initClass(X,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(Y,spiff.PureRenderComponent);ss.initClass(Z,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IUberPopupContent,spiff.IContent]);(function(){c.containerClassName='tabFlipboardNavHoverTargetsContainer';c.previousHoverToScrollClassName='tabPreviousHoverTarget';c.nextHoverToScrollClassName='tabNextHoverTarget';c.htmlTemplate="<span class='"+'tabFlipboardNavHoverTargetsContainer'+"'>"+"<div class='"+'tabPreviousHoverTarget'+"'></div>"+"<div class='"+'tabNextHoverTarget'+"'></div>"+'</span>'})();(function(){tab.ObjectRegistry.resolveDeferredType(tab.IFlipboardNavigatorView).call(null,b)})();(function(){d.$0=''})();(function(){m.$0=0})();(function(){tab.ObjectRegistry.registerType(tab.IAuthoringStoryboardView,e).call(null)})();(function(){A.dragAddTextToStory='tabAddTextToStory'})();(function(){tab.ObjectRegistry.resolveDeferredType(tab.IStoryUberPopupContainer).call(null,g)})();(function(){h.$1=[3,1];h.$2=[3,0]})();(function(){j.$0=31})();(function(){E.toggleButtonsClass='tabStoryPaneToggleButtons'})();(function(){Q.editorWrapperClassName='tabStoryPointCaptionEditor';Q.floatingRightDropTargetClassName='tabStoryNavigatorPointRightDropTarget';Q.floatingLeftDropTargetClassName='tabStoryNavigatorPointLeftDropTarget';Q.floatingCenterDropTargetClassName='tabStoryNavigatorPointCenterDropTarget';Q.topBetweenArrowClassName='tabStoryNavigatorTopBetweenArrow';Q.capturedDeltaContainerClassName='tabStoryPointDeltaCapturedContainer';Q.capturedDeltaCheckmarkClassName='tabStoryPointDeltaCapturedMark';Q.capturedDeltaCenteredTextClassName='tabStoryPointDeltaCapturedCentered';Q.captionResizeDragClassName='tabStoryPointCaptionDragResize';Q.$2=null;Q.$3=null;Q.$1="<span class='tabStoryPointEditing'>"+"<div class='"+'tabStoryPointCaptionEditor'+"'></div>"+"<div class='"+'tabStoryNavigatorPointLeftDropTarget'+"' data-tb-test-id='"+'tabStoryNavigatorPointLeftDropTarget'+"'></div>"+"<div class='"+'tabStoryNavigatorPointCenterDropTarget'+"'></div>"+"<div class='"+'tabStoryNavigatorPointRightDropTarget'+"' data-tb-test-id='"+'tabStoryNavigatorPointRightDropTarget'+"'></div>"+"<div class='"+'tabStoryNavigatorTopBetweenArrow'+"'></div>"+"<div class='"+'tabStoryPointDeltaCapturedContainer'+"'>"+"<div class='"+'tabStoryPointDeltaCapturedCentered'+"'>"+"<span class='"+'tabStoryPointDeltaCapturedMark'+"'></span>"+'</div>'+'</div>'+"<div class='"+'tabStoryPointCaptionDragResize'+"'></div>"+'</span>'})();(function(){tab.ObjectRegistry.resolveDeferredType(tab.IStoryNavigatorPointView).call(null,S)})()})();;
/*! BEGIN AuthoringWeb */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlauthoringweb');var b=global.tab.AccordionHeaderViewWeb=ss.mkType(a,'tab.AccordionHeaderViewWeb',function(w){tab.AccordionHeaderView.call(this,w,new tab.AccordionHeaderTemplate)});var c=global.tab.AccordionViewWeb=ss.mkType(a,'tab.AccordionViewWeb',function(w){tab.AccordionView.call(this,w,new tab.AccordionTemplate)});var d=global.tab.AuthoringLeftAreaResizerView=ss.mkType(a,'tab.AuthoringLeftAreaResizerView',function(w){this.$a=null;ss.makeGenericType(spiff.BaseView$1,[tab.AuthoringLeftAreaViewModel]).call(this,w,new e);var x=this.disposables;var y=this.get_rootElement().get(0);var z=new EventUtils.EventHandleSpec;z.doubleTap=ss.mkdel(this,function(A){this.$7()});x.add$1(new EventUtils.TableauEventHandler(y,z))},{startDrag:function(w){if(ss.isNullOrUndefined(this.$a)){return null}var x=tab.DoubleUtil.roundToInt(this.$a.width());return new spiff.MoveDragInstance.$ctor1(this.get_rootElement(),ss.mkdel(this,function(y){this.$8(y.clientX)}),ss.mkdel(this,function(y){this.$9()}),ss.mkdel(this,function(){this.$8(x)}),null)},acceptsDragType:function(){return 1},$8:function(w){var x=Math.max(160,Math.min(500,w));this.get_viewModel().set_expandedSidePaneWidth(x)},$9:function(){this.get_viewModel().sidePaneResizeEnded()},$7:function(){this.$8(200);this.$9()},onAddedToDom:function(){this.$a=this.get_rootElement().parent();EventUtils.DragDropManager.attachDragSource(this.get_rootElement(),this)}});var e=global.tab.AuthoringLeftAreaResizerView$AuthoringLeftAreaResizerTemplate=ss.mkType(a,'tab.AuthoringLeftAreaResizerView$AuthoringLeftAreaResizerTemplate',function(){spiff.Template.call(this,$(e.htmlTemplate))});var f=global.tab.AuthoringLeftAreaTemplateWeb=ss.mkType(a,'tab.AuthoringLeftAreaTemplateWeb',function(){this.tabbedPanel=null;this.collapseButton=null;this.floatingPanel=null;tab.AuthoringLeftAreaTemplate.call(this,$(f.htmlTemplate));this.domRoot.css({top:tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()+tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+'px',bottom:tabBootstrap.VizLayoutConstants.get_authoringTabsHeight()+'px'});this.tabbedPanel=this.getElementBySelector('.tabAuthLeftViewTabbedPanel');this.collapseButton=this.getElementBySelector('.tabAuthLeftViewCollapseButton');this.floatingPanel=this.getElementBySelector('.tabAuthLeftViewFloatingPanel')});var g=global.tab.AuthoringLeftAreaViewWeb=ss.mkType(a,'tab.AuthoringLeftAreaViewWeb',function(w){this.$r=null;this.$s=0;this.$t=null;tab.AuthoringLeftAreaView.call(this,w,new f);this.$r={};this.$r['worksheet']=$.Deferred();this.$r['dashboard']=$.Deferred();this.$r['story']=$.Deferred();this.$s=this.get_viewModel().get_expandedSidePaneWidth();this.$t=new d(this.get_viewModel());this.$9();this.$h(this.get_viewModel().get_sheetType());this.set_floatingLeftPanel(new l(this.$q().floatingPanel));this.get_viewModel().add_sheetTypeChanged(ss.mkdel(this,this.$h));this.get_viewModel().add_sidePaneResized(ss.mkdel(this,this.$e));this.get_viewModel().add_sidePaneVisibilityChanged(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_sheetTypeChanged(ss.mkdel(this,this.$h));this.get_viewModel().remove_sidePaneResized(ss.mkdel(this,this.$e));this.get_viewModel().remove_sidePaneVisibilityChanged(ss.mkdel(this,this.$f))})))},{$q:function(){return this.dom},get_collapseDuration:function(){return(tsConfig.is_desktop?0:200)},updateLeftAreaForSheetType:function(w){if(w==='worksheet'||w==='dashboard'||w==='story'){this.dom.domRoot.insertBefore($('.tabAuthTabArea'))}else{this.dom.domRoot.detach();this.get_viewModel().set_controlMode(0)}this.$l('worksheet');this.$l('dashboard');this.$l('story');this.$r[w].done(ss.mkdel(this,function(x){if(ss.isValue(x)){x.addToDom(this.element);x.element.css({left:this.$s+'px'});x.element.toggle(this.get_viewModel().get_sidePaneExpansionState()==='collapsed')}}));this.get_viewModel().get_leftPanelViewModel().updatePaneForSheetType(w)},$l:function(w){this.$r[w].done(function(x){if(ss.isValue(x)){x.element.detach()}})},onAddedToDom:function(){tab.AuthoringLeftAreaView.prototype.onAddedToDom.call(this);this.$t.addToDom(this.$q().domRoot);this.$b();this.$a();this.$e(this.get_viewModel().get_expandedSidePaneWidth());if(this.get_viewModel().get_sidePaneExpansionState()==='collapsed'){this.setPanelPosition(this.get_viewModel().get_sidePaneExpansionState())}},addLeftPanelToDom:function(){if(ss.isValue(this.internalLeftPanelView)){this.$q().tabbedPanel.append(this.internalLeftPanelView.element);this.internalLeftPanelView.onAddedToDom()}},$e:function(w){this.$o(w);this.$p(w);this.$m(this.get_viewModel().get_sidePaneExpansionState())},$f:function(w){this.dom.domRoot.css('visibility',(w?'visible':'hidden'))},$o:function(w){this.$s=w;this.$r[this.get_viewModel().get_sheetType()].done(ss.mkdel(this,function(x){x.element.css({left:this.$s+'px'})}))},$p:function(w){this.dom.domRoot.width(w);if(this.get_viewModel().get_sidePaneExpansionState()==='collapsed'){this.dom.domRoot.css({left:-w+'px'})}},setPanelPosition:function(w){var x=ss.formatString('left {0}ms ease-out',this.get_collapseDuration());var y=BrowserSupport.BrowserSupport.CssTransitionName();var z={};var A={};var B={};var C={};z[y]=x;A[y]=x;B[y]=x;C[y]=x;var D=tab.DoubleUtil.roundToInt(this.dom.domRoot.width());var E=$('.tabAuthLeftShelves');var F=((tab.ApplicationModel.get_instance().get_currentSheetType()==='worksheet')?tab.DoubleUtil.roundToInt(E.width()):0);var G=tab.DoubleUtil.roundToInt($('.tabAuthSchemaCollapsed').outerWidth());if(w==='expanded'){z.left=0+'px';A.left=D+'px';B.left=D+F+'px';C.left=D+F+'px';this.$t.get_rootElement().show()}else{z.left=-D+'px';A.left=G+'px';B.left=G+F+'px';C.left=G+F+'px';this.$t.get_rootElement().hide()}window.setTimeout(ss.mkdel(this,function(){z[y]='';A[y]='';B[y]='';C[y]='';this.dom.domRoot.css(z);$('.tabAuthLeftShelves').css(A);$('.tabAuthTopShelves').css(B);$(tab.ApplicationView.dashboardViewportSelector).css(C);this.$m(w);this.get_viewModel().leftAreaResizeEnded()}),this.get_collapseDuration());this.dom.domRoot.css(z);$('.tabAuthLeftShelves').css(A);$('.tabAuthTopShelves').css(B);var H=$(tab.ApplicationView.dashboardViewportSelector);H.css(C)},$m:function(w){this.get_viewModel().set_leftAreaWidth(((w==='expanded')?tab.DoubleUtil.roundToInt(this.dom.domRoot.width()):tab.DoubleUtil.roundToInt($('.tabAuthSchemaCollapsed').outerWidth())))},$a:function(){this.get_viewModel().add_controlModeChanged(ss.mkdel(this,this.$j));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_controlModeChanged(ss.mkdel(this,this.$j))})))},$h:function(w){var x=this.internalLeftPanelView.get_paneViewForSheet();var y=x[w];if(ss.isNullOrUndefined(y)){return}y.done(ss.mkdel(this,function(z){if(ss.isNullOrUndefined(z)){return}var A=new s(z.get_paneContents());A.add_expandButtonClicked(ss.mkdel(this,this.$d));var B=this.$i(z);A.add_tabButtonClicked(B);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){A.remove_expandButtonClicked(ss.mkdel(this,this.$d));A.remove_tabButtonClicked(B);tab.MiscUtil.dispose$1(A)})));this.$r[w].resolve(A)}))},$i:function(w){return ss.mkdel(this,function(x){w.set_activePaneTitle(x);this.$d()})},$b:function(){this.get_viewModel().add_sidePaneExpansionStateChanged(ss.mkdel(this,this.$k));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_sidePaneExpansionStateChanged(ss.mkdel(this,this.$k))})))},$k:function(w){if(w==='expanded'){this.$g()}else if(w==='collapsed'){this.$n()}this.setPanelPosition(w)},$g:function(){this.$r[this.get_viewModel().get_sheetType()].done(function(w){if(ss.isValue(w)){w.element.hide()}})},$n:function(){window.setTimeout(ss.mkdel(this,function(){this.$r[this.get_viewModel().get_sheetType()].done(function(w){if(ss.isValue(w)){w.element.show()}})}),this.get_collapseDuration()-25)},$j:function(w){if(w===0){this.updateLeftAreaForSheetType(this.get_viewModel().get_sheetType())}},$9:function(){var w=new spiff.IconButton;w.setIcon('tabAuthCollapseIcon');w.set_hoverTooltipText(tab.Strings.CollapseSchemaPane);w.addClass('tabCollapseSidebar');w.add_click(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){w.remove_click(ss.mkdel(this,this.$c))})));this.$q().collapseButton.append(w.element)},$c:function(){this.get_viewModel().set_sidePaneExpansionState('collapsed')},$d:function(){this.get_viewModel().set_sidePaneExpansionState('expanded')}});var h=global.tab.AuthoringTabNavViewWeb=ss.mkType(a,'tab.AuthoringTabNavViewWeb',function(w){this.$G=null;this.$F=null;this.$E=0;tab.AuthoringTabNavView.call(this,w);this.$G=new tab.AuthoringTabNavigatorHoverHandler(ss.mkdel(this,this.handleHoverPrevious),function(){},800);this.$F=new tab.AuthoringTabNavigatorHoverHandler(ss.mkdel(this,this.handleHoverNext),function(){},800);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.handleDragStarted));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.handleDragStarted))}));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.menuButton,ss.mkdel(this,function(x){this.$u(this.dom.menuButton)})));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.leftButton,ss.mkdel(this,function(x){this.$v()})));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.rightButton,ss.mkdel(this,function(x){this.$w()})));this.$E=this.get_scroll()},{$D:function(){var w={};var x=this.get_availableWidth();var y=this.get_tabsWidth();w.min=0;w.max=((y>x)?(y-x):y);return w},get_scroll:function(){return tab.DoubleUtil.roundToInt(this.dom.tabContainer.scrollLeft())},set_scroll:function(w){this.$y(w,false)},get_shouldShowButtons:function(){var w=this.get_tabsWidth();var x=this.get_availableWidth();if(BrowserSupport.BrowserSupport.IsIE()||BrowserSupport.BrowserSupport.IsLegacyEdge()){var y=1;x+=y}return w>x},$y:function(w,x){var y=this.$D();var z=Math.min(Math.max(w,y.min),y.max);if(z!==tab.DoubleUtil.roundToInt(this.dom.tabContainer.scrollLeft())){this.dom.tabContainer.stop(true,true);if(x){this.dom.tabContainer.animate(ss.mkdict(['scrollLeft',z]),'fast','swing',ss.mkdel(this,this.$C))}else{this.dom.tabContainer.scrollLeft(z);this.$C()}}this.$E=z},onAddedToDom:function(){tab.AuthoringTabNavView.prototype.onAddedToDom.call(this);if(this.$z()){this.$q()}},$z:function(){return!tsConfig.is_mobile&&this.get_shouldShowButtons()&&!this.$t()},$q:function(){EventUtils.DragDropManager.attachDropTarget(this.dom.leftButton,this.$F);EventUtils.DragDropManager.attachDropTarget(this.dom.rightButton,this.$F);EventUtils.DragDropManager.attachDropTarget(this.dom.createButtonsContainer,this.$F);if(tab.AuthoringTabNavView.get_shouldShowDataTab()){EventUtils.DragDropManager.attachDropTarget(this.dom.dataSourceButton,this.$G)}EventUtils.DragDropManager.attachDropTarget(this.dom.leftScrollHelper,this.$G);this.disposables.add(ss.mkdel(this,this.$r))},$r:function(){if(this.$t()){EventUtils.DragDropManager.detachDropTarget(this.dom.leftButton);EventUtils.DragDropManager.detachDropTarget(this.dom.rightButton);EventUtils.DragDropManager.detachDropTarget(this.dom.createButtonsContainer);if(tab.AuthoringTabNavView.get_shouldShowDataTab()){EventUtils.DragDropManager.detachDropTarget(this.dom.dataSourceButton)}EventUtils.DragDropManager.detachDropTarget(this.dom.leftScrollHelper)}},$t:function(){return EventUtils.DragDropManager.isDropTarget(this.dom.leftButton)&&EventUtils.DragDropManager.isDropTarget(this.dom.rightButton)&&(tab.AuthoringTabNavView.get_shouldShowDataTab()&&EventUtils.DragDropManager.isDropTarget(this.dom.dataSourceButton))&&EventUtils.DragDropManager.isDropTarget(this.dom.leftScrollHelper)&&EventUtils.DragDropManager.isDropTarget(this.dom.createButtonsContainer)},handleHoverNext:function(){this.$w();this.showLeftScrollHelper()},handleHoverPrevious:function(){this.$v();this.hideLeftScrollHelper(false)},handleDragStarted:function(w){if(!h.$0(w)){return}this.showLeftScrollHelper();EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.handleDragEnded))},handleDragEnded:function(w){this.hideLeftScrollHelper(true);EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.handleDragEnded))},showLeftScrollHelper:function(){if(this.get_scroll()>0){this.dom.leftScrollHelper.show()}},hideLeftScrollHelper:function(w){if(w||this.get_scroll()===0){this.dom.leftScrollHelper.hide()}},updateTabNavigation:function(){this.$C();this.scrollToActiveTab()},scrollToActiveTab:function(){if(!this.addedToDom){return}if(this.authoringTabNavViewModel.get_areMultipleTabsSelected()){this.set_scroll(this.$E)}else{var w;if(ss.isValue(this.authoringTabNavViewModel.get_reorderedTab())){w=this.authoringTabNavViewModel.get_reorderedTab();this.authoringTabNavViewModel.set_reorderedTab(null)}else{w=this.authoringTabNavViewModel.get_currentTab()}if(ss.isNullOrUndefined(w)){this.set_scroll(0);return}var x=0;var y=spiff.Widget.getWidgets(this.dom.tabContainer.children(),tab.AuthoringTabView);for(var z=0;z<y.length;z++){var A=y[z];if(A.get_viewModel().equalTo(w)){this.$x(((x===y.length-1)?this.dom.rightMostElement():A.element));break}x++}}},$u:function(w){var x=[];var y=this.authoringTabNavViewModel.get_workbookTabs();for(var z=0;z<y.length;z++){var A=y[z];var B=0;if(ss.referenceEquals(A,this.authoringTabNavViewModel.get_currentTab())){B=2}var C=spiff.MenuItem.newItem(A,A.name,'WorkbookTab',B,null,null);var D=ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(A.color.toString(),' ',''),'(',''),')',''),',','');C.itemClass=ss.formatString('{0} {1}',tab.WidgetUtil.colorSwatchMenuItemClass,D);x.push(C)}var E=spiff.MenuViewModel.createForMenu(new spiff.Menu(x),ss.mkdel(this,this.$A),null,null);var F=new spiff.ShowMenuOptions(w,false);F.preferUp=true;E.show(F)},$A:function(w){this.authoringTabNavViewModel.simpleSelectSheetTab(w.data)},$B:function(w){this.dom.domRoot.toggleClass('tabHideControls',!w)},$C:function(){if(!this.get_shouldShowButtons()){this.$B(false);this.set_scroll(0);this.$r();return}this.$B(true);if(this.$z()){this.$q()}var w=this.get_scroll();var x=this.$D();var y=w>x.min;var z=w<x.max;this.dom.menuButton.toggleClass('tabEnabled',true);this.dom.leftButton.toggleClass('tabEnabled',y);this.dom.leftButton.toggleClass('tabDisabled',!y);this.dom.rightButton.toggleClass('tabEnabled',z);this.dom.rightButton.toggleClass('tabDisabled',!z)},$x:function(w){var x=30;var y=this.get_scroll();var z=y+w.position().left;var A=Math.round(z-x);if(A===y){return}if(A<y){this.set_scroll(A);return}var B=this.get_availableWidth();var C=y+B;var D=z+w.outerWidth();if(D+x>C){this.set_scroll(Math.round(D-B+x));return}},$s:function(w){var x=this.get_availableWidth();var y=x*0.5*(w?1:-1);this.$y(Math.round(this.get_scroll()+y),true)},$w:function(){this.$s(true)},$v:function(){this.$s(false)}},{$0:function(w){return ss.isInstanceOfType(w,tab.AuthoringTabViewDragInstance)}});var i=global.tab.AuthoringViewWeb=ss.mkType(a,'tab.AuthoringViewWeb',function(w){tab.AuthoringView.call(this,w);this.addContent();var x=ss.mkdel(this,function(){this.get_leftArea().get_viewModel().add_leftAreaResized(ss.mkdel(this,this.$q));this.get_leftArea().get_viewModel().add_leftAreaResizingEnded(ss.mkdel(this,this.$r));w.get_rightAreaDrawerViewModel().add_open(ss.mkdel(this,this.$u));w.get_rightAreaDrawerViewModel().add_close(ss.mkdel(this,this.$u));w.get_rightAreaDrawerViewModel().add_rightDrawerResized(ss.mkdel(this,this.$t));w.get_rightAreaDrawerViewModel().add_rightDrawerResizingEnded(ss.mkdel(this,this.$s));this.disposables.add(ss.mkdel(this,function(){this.get_leftArea().get_viewModel().remove_leftAreaResized(ss.mkdel(this,this.$q));this.get_leftArea().get_viewModel().remove_leftAreaResizingEnded(ss.mkdel(this,this.$r));w.get_rightAreaDrawerViewModel().remove_open(ss.mkdel(this,this.$u));w.get_rightAreaDrawerViewModel().remove_close(ss.mkdel(this,this.$u));w.get_rightAreaDrawerViewModel().remove_rightDrawerResized(ss.mkdel(this,this.$t));w.get_rightAreaDrawerViewModel().remove_rightDrawerResizingEnded(ss.mkdel(this,this.$s))}))});tab.StartupUtils.callAfterModelsInitialized(x)},{addContentToAreas:function(){tab.AuthoringView.prototype.addContentToAreas.call(this);this.layout()},$q:function(w){this.handleComponentSizing(w,tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth())},$u:function(){this.handleComponentSizing(this.get_leftAreaWidth(),tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth())},$t:function(w){this.handleComponentSizing(this.get_leftAreaWidth(),tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth())},$s:function(w){this.handleComponentSizing(this.get_leftAreaWidth(),tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth());tab.Application.get_instance().get_client().doResize()},$r:function(w){this.get_viewModel().updatePortSizeAfterManualLayout(w)}});var j=global.tab.AuthoringWorksheetViewWeb=ss.mkType(a,'tab.AuthoringWorksheetViewWeb',function(w){this.$l=null;this.$j=null;this.$k=0;tab.AuthoringWorksheetView.call(this,w);this.buildDom()},{repositionShelves:function(w,x){this.$j.css('left',w+'px');this.$l.css({left:w+this.$k+'px',right:x+'px'});var y=this.cards['top'];for(var z=0;z<y.length;z++){var A=y[z];A.get_viewModel().get_shelfViewModel().triggerUpdateShelfLayoutAction()}},addContentToAreas:function(){var w=$("<div class='tabAuthShelves'></div>");this.insideViewArea.append(w);this.$l=$("<div class='tabAuthTopShelves'></div>").css({top:tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()+'px'});var x=this.cards['top'];for(var y=0;y<x.length;y++){var z=x[y];this.$l.append(z.get_rootElement())}w.append(this.$l);this.$j=$(ss.formatString("<div class='tabAuthLeftShelves{0}'></div>",' '+'statusBar')).css({top:tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()+'px',bottom:tabBootstrap.VizLayoutConstants.get_authoringTabsHeight()+'px'});var A=$('<div></div>').appendTo(this.$j);var B=this.cards['left'];for(var C=0;C<B.length;C++){var D=B[C];A.append(D.get_rootElement())}w.append(this.$j)},notifyContentAddedToDom:function(){this.$k=tab.DoubleUtil.roundToInt(this.$j.width());tab.AuthoringWorksheetView.prototype.notifyContentAddedToDom.call(this)}});var k=global.tab.DashboardSwitchTabShortcut=ss.mkType(a,'tab.DashboardSwitchTabShortcut',function(w){this.$0=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=w},{getKeyComboOrKeyCombos:function(){return ss.applyConstructor(KeyboardShortcuts.KeyCombo,['t',null].concat(null))},getAdditionalOptions:function(){var w=new Object;w.shouldUseKeyUp=true;return w},isAllowed:function(w){return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,w)&&this.$0.addedToDom&&this.$0.get_viewModel().get_currentSheetType()==='dashboard'},executeShortcut:function(w){this.$0.get_paneViewForSheet()['dashboard'].done(function(x){var y=x;y.selectNextTab()})},getTelemetryKey:function(){return'Dashboard Switch Tab'}});var l=global.tab.FloatingLeftPanelWeb=ss.mkType(a,'tab.FloatingLeftPanelWeb',function(w){this.$0=null;this.$1$1=null;this.$0=w},{add_contentChanged:function(w){this.$1$1=ss.delegateCombine(this.$1$1,w)},remove_contentChanged:function(w){this.$1$1=ss.delegateRemove(this.$1$1,w)},addFloatingPanelToDom:function(w){this.$0.empty();w.addToDom(this.$0);if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}},addFloatingPanelToDom$1:function(w){this.$0.empty();this.$0.append(w);if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}}});var m=global.tab.LeftPanelViewWeb=ss.mkType(a,'tab.LeftPanelViewWeb',function(w){this.$b=null;this.$c=null;tab.LeftPanelView.call(this,w);this.$b={};this.$b['worksheet']=$.Deferred();this.$b['dashboard']=$.Deferred();this.$b['story']=$.Deferred();this.$7(tab.ApplicationModel.get_instance().get_workbook().get_sheetType());this.get_viewModel().add_sheetTypeChanged(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_sheetTypeChanged(ss.mkdel(this,this.$a))})));this.$9()},{get_paneViewForSheet:function(){return this.$b},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$a(this.get_viewModel().get_currentSheetType())},dispose:function(){var w=new ss.ObjectEnumerator(this.get_paneViewForSheet());try{while(w.moveNext()){var x=w.current();if(ss.isValue(x.value)){x.value.done(function(y){tab.MiscUtil.dispose$1(y)})}}}finally{w.dispose()}ss.makeGenericType(spiff.BaseView$1,[tab.LeftPanelViewModel]).prototype.dispose.call(this)},$7:function(w){var x=this.get_viewModel().get_activePanes();if(x.length===0){return}if(x.length>1){var y=[];var z=$.Deferred();for(var A=0;A<x.length;A++){var B=x[A];B.done(function(C){y.push(C);if(y.length===x.length){z.resolve(y)}})}z.done(ss.mkdel(this,function(C){if(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook())||w===tab.ApplicationModel.get_instance().get_workbook().get_sheetType()){this.$b[w].resolve(tab.ObjectRegistry.newView(tab.TabbedPaneView).call(null,[new tab.TabbedPaneViewModel(C)]))}}))}else{x[0].done(ss.mkdel(this,function(C){var D=ss.makeGenericType(tab.PaneView$1,[ss.getInstanceType(C)]);this.$b[w].resolve(tab.ObjectRegistry.newWidget$2(spiff.Widget).call(null,D,[C]))}))}},$a:function(w){this.element.children().detach();if(this.$b[w].state()==='pending'){this.$7(w)}this.$b[w].done(ss.mkdel(this,function(x){if(x.addedToDom){this.element.append(x.element)}else{x.addToDom(this.element)}}))},$9:function(){this.$8();this.$c=new k(this);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$c);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$c)}))},$8:function(){if(ss.isValue(this.$c)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$c);this.$c=null}}});var n=global.tab.MarksContentViewWeb=ss.mkType(a,'tab.MarksContentViewWeb',function(w){tab.MarksContentView.call(this,w,new tab.MarksContentTemplate);this.handleMarksCardTabsChanged()});var o=global.tab.PillViewWeb=ss.mkType(a,'tab.PillViewWeb',function(w){tab.PillView.call(this,w,new p);this.disposables.add$1(new spiff.HoverBehavior(this,'.tabAuthPillContent',ss.mkdel(this,this.$7),ss.mkdel(this,this.$8)))},{$8:function(w){this.pillStrategy.handlePillExit(w)},$7:function(w){this.pillStrategy.handlePillEnter(w)}});var p=global.tab.PillViewWebTemplate=ss.mkType(a,'tab.PillViewWebTemplate',function(){tab.PillViewTemplate.call(this,"\n<span class='tabAuthShelfPill tabAuthPillDragSource'>\n    <span class='tabAuthPillExternalIcon'></span>\n    <span class='tabAuthPillEncodingType'></span>\n    <span class='tabAuthPillContent'>\n        <div class='tabAuthPillDrillIcon'><div class='tabAuthHitTarget'></div></div>\n        <div class='tabAuthPillLabel'>{0}</div>\n        <div class='tabAuthPillMenuBtn'><div class='tabAuthHitTarget'></div></div>\n        <div class='tabAuthPillIcons'></div>\n    </span>\n</span>")});var q=global.tab.ShapePickerViewWeb=ss.mkType(a,'tab.ShapePickerViewWeb',function(w){tab.ShapePickerView.call(this,w,new tab.ShapePickerTemplate);this.updateContent()});var r=global.tab.ShowMeViewWeb=ss.mkType(a,'tab.ShowMeViewWeb',function(w){tab.ShowMeView.call(this,w);this.initContent()},{attachEventHandlers:function(w,x){x.mouseover(this.$b(w,x));if(this.smViewModel.isCommandEnabled(w)){this.perUpdateDisposables.add$1(spiff.TableauClickHandler.targetAndClick(x[0],this.$a(w)))}},$a:function(w){return ss.mkdel(this,function(){this.smViewModel.applyShowMeCommand(w)})},$b:function(w,x){return ss.mkdel(this,function(){this.setActiveItem(w,x)})}});var s=global.tab.SidebarCollapsedWidget=ss.mkType(a,'tab.SidebarCollapsedWidget',function(w){this.dom=null;this.buttonHeader=null;this.contentArea=null;this.$8=null;this.$7=null;this.$2$1=null;this.$2$2=null;spiff.Widget.call(this,$("<div class='tabAuthSchemaCollapsed'>\n                <div class='tabAuthSchemaCollapsed collapsedItems'>\n                    <div class='collapsedTabButtonContainer'></div>\n                </div>\n            </div>"));this.buttonHeader=this.element.find('.collapsedItems');this.$8=this.buttonHeader.find('.collapsedTabButtonContainer');this.contentArea=this.element.find('.tabAuthSchemaCollapsed');this.$4(w)},{add_expandButtonClicked:function(w){this.$2$1=ss.delegateCombine(this.$2$1,w)},remove_expandButtonClicked:function(w){this.$2$1=ss.delegateRemove(this.$2$1,w)},add_tabButtonClicked:function(w){this.$2$2=ss.delegateCombine(this.$2$2,w)},remove_tabButtonClicked:function(w){this.$2$2=ss.delegateRemove(this.$2$2,w)},get_width:function(){return tab.DoubleUtil.roundToInt(this.element.width())},set_width:function(w){this.element.width(w)},$4:function(w){this.$7=new spiff.IconButton;this.$7.add_click(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_click(ss.mkdel(this,this.$6));tab.MiscUtil.dispose$1(this.$7)})));this.$7.setIcon('tabAuthExpandIcon');this.$7.set_hoverTooltipText(tab.Strings.ExpandSchemaPane);this.$7.addClass('tabExpandSidebar');this.$7.element.insertBefore(this.$8);for(var x=0;x<w.length;x++){var y=w[x].get_title();var z=spiff.LabelButton.newTextButton(this.$5(y),y);z.addClass('tabButton');var A=w[x].get_id()+'-'+'tabButton';if(tab.StyleUtil.isValidCssClassName(A)){z.addClass(A)}z.addToDom(this.$8);z.element.css({top:106*(x+1)+'px'});this.disposables.add$1(z)}},$6:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}},$5:function(w){return ss.mkdel(this,function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(w)}})}});var t=global.tab.StepperControlViewWeb=ss.mkType(a,'tab.StepperControlViewWeb',function(w){tab.StepperControlView.call(this,w,new v)});var u=global.tab.StrokeWidthPickerViewWeb=ss.mkType(a,'tab.StrokeWidthPickerViewWeb',function(w){tab.StrokeWidthPickerView.call(this,w)});var v=global.tab.WebStepperControlTemplate=ss.mkType(a,'tab.WebStepperControlTemplate',function(){tab.StepperControlTemplate.call(this,"<span class='tabStepperControl'>\n            <div class='tabButtonContainer'>\n                <div class='tabIncrementButton'>&#x25B2;</div>\n                <div class='tabDecrementButton'>&#x25BC;</div>\n            </div>\n            <input class='tabStepCountValue' type='text'></input>\n        </span>");this.decrementButton=this.getElementBySelector('.tabDecrementButton');this.incrementButton=this.getElementBySelector('.tabIncrementButton');this.valueText=this.getElementBySelector('.tabStepCountValue')});ss.initClass(b,tab.AccordionHeaderView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AccordionHeaderViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(c,tab.AccordionView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AccordionViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(d,ss.makeGenericType(spiff.BaseView$1,[tab.AuthoringLeftAreaViewModel]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AuthoringLeftAreaViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(e,spiff.Template,[ss.IDisposable]);ss.initClass(f,tab.AuthoringLeftAreaTemplate,[ss.IDisposable]);ss.initClass(g,tab.AuthoringLeftAreaView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AuthoringLeftAreaViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(h,tab.AuthoringTabNavView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AuthoringTabNavViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(i,tab.AuthoringView,[ss.makeGenericType(tab.IView$1,[tab.AuthoringViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(j,tab.AuthoringWorksheetView,[ss.makeGenericType(tab.IView$1,[tab.AuthoringWorksheetViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(k,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(l,null,[tab.IFloatingLeftPanel]);ss.initClass(m,tab.LeftPanelView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.LeftPanelViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(n,tab.MarksContentView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.MarksContentViewModel]),ss.IDisposable,tab.IAppendableView,tab.IHasScrollableContentHeight]);ss.initClass(o,tab.PillView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.PillViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(p,tab.PillViewTemplate,[ss.IDisposable]);ss.initClass(q,tab.ShapePickerView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ShapePickerViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(r,tab.ShowMeView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ShowMeViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(s,spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(t,tab.StepperControlView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.StepperControlViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(u,tab.StrokeWidthPickerView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.StrokeWidthPickerViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(v,tab.StepperControlTemplate,[ss.IDisposable]);(function(){tab.ObjectRegistry.registerType(tab.AccordionHeaderView,b).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.AccordionView,c).call(null)})();(function(){e.htmlTemplate=ss.formatString("<div class='tabAuthLeftViewAreaResizer'></div>")})();(function(){d.$0=200;d.$2=160;d.$1=500})();(function(){f.htmlTemplate=ss.formatString("<div class='tabAuthLeftViewArea{0}'>\n            <div class='tabAuthLeftViewTabbedPanel'></div>\n            <div class='tabAuthLeftViewCollapseButton'></div>\n            <div class='tabAuthLeftViewFloatingPanel'></div>\n        </div>",' '+'statusBar')})();(function(){s.$1="<div class='tabAuthSchemaCollapsed'>\n                <div class='tabAuthSchemaCollapsed collapsedItems'>\n                    <div class='collapsedTabButtonContainer'></div>\n                </div>\n            </div>";s.$0=106;s.$2='tabButton'})();(function(){tab.ObjectRegistry.registerType(tab.AuthoringLeftAreaView,g).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.AuthoringTabNavView,h).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.AuthoringView,i).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.AuthoringWorksheetView,j).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.LeftPanelView,m).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.MarksContentView,n).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.PillView,o).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.ShapePickerView,q).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.ShowMeView,r).call(null)})();(function(){v.template="<span class='tabStepperControl'>\n            <div class='tabButtonContainer'>\n                <div class='tabIncrementButton'>&#x25B2;</div>\n                <div class='tabDecrementButton'>&#x25BC;</div>\n            </div>\n            <input class='tabStepCountValue' type='text'></input>\n        </span>"})();(function(){tab.ObjectRegistry.registerType(tab.StepperControlView,t).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.StrokeWidthPickerView,u).call(null)})()})();